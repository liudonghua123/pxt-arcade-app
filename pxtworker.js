"use strict";
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved. 
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0  
 
THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE, 
MERCHANTABLITY OR NON-INFRINGEMENT. 
 
See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var __assign=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},__extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts;!function(e){!function(e){e[e.Unknown=0]="Unknown",e[e.EndOfFileToken=1]="EndOfFileToken",e[e.SingleLineCommentTrivia=2]="SingleLineCommentTrivia",e[e.MultiLineCommentTrivia=3]="MultiLineCommentTrivia",e[e.NewLineTrivia=4]="NewLineTrivia",e[e.WhitespaceTrivia=5]="WhitespaceTrivia",e[e.ShebangTrivia=6]="ShebangTrivia",e[e.ConflictMarkerTrivia=7]="ConflictMarkerTrivia",e[e.NumericLiteral=8]="NumericLiteral",e[e.StringLiteral=9]="StringLiteral",e[e.JsxText=10]="JsxText",e[e.JsxTextAllWhiteSpaces=11]="JsxTextAllWhiteSpaces",e[e.RegularExpressionLiteral=12]="RegularExpressionLiteral",e[e.NoSubstitutionTemplateLiteral=13]="NoSubstitutionTemplateLiteral",e[e.TemplateHead=14]="TemplateHead",e[e.TemplateMiddle=15]="TemplateMiddle",e[e.TemplateTail=16]="TemplateTail",e[e.OpenBraceToken=17]="OpenBraceToken",e[e.CloseBraceToken=18]="CloseBraceToken",e[e.OpenParenToken=19]="OpenParenToken",e[e.CloseParenToken=20]="CloseParenToken",e[e.OpenBracketToken=21]="OpenBracketToken",e[e.CloseBracketToken=22]="CloseBracketToken",e[e.DotToken=23]="DotToken",e[e.DotDotDotToken=24]="DotDotDotToken",e[e.SemicolonToken=25]="SemicolonToken",e[e.CommaToken=26]="CommaToken",e[e.LessThanToken=27]="LessThanToken",e[e.LessThanSlashToken=28]="LessThanSlashToken",e[e.GreaterThanToken=29]="GreaterThanToken",e[e.LessThanEqualsToken=30]="LessThanEqualsToken",e[e.GreaterThanEqualsToken=31]="GreaterThanEqualsToken",e[e.EqualsEqualsToken=32]="EqualsEqualsToken",e[e.ExclamationEqualsToken=33]="ExclamationEqualsToken",e[e.EqualsEqualsEqualsToken=34]="EqualsEqualsEqualsToken",e[e.ExclamationEqualsEqualsToken=35]="ExclamationEqualsEqualsToken",e[e.EqualsGreaterThanToken=36]="EqualsGreaterThanToken",e[e.PlusToken=37]="PlusToken",e[e.MinusToken=38]="MinusToken",e[e.AsteriskToken=39]="AsteriskToken",e[e.AsteriskAsteriskToken=40]="AsteriskAsteriskToken",e[e.SlashToken=41]="SlashToken",e[e.PercentToken=42]="PercentToken",e[e.PlusPlusToken=43]="PlusPlusToken",e[e.MinusMinusToken=44]="MinusMinusToken",e[e.LessThanLessThanToken=45]="LessThanLessThanToken",e[e.GreaterThanGreaterThanToken=46]="GreaterThanGreaterThanToken",e[e.GreaterThanGreaterThanGreaterThanToken=47]="GreaterThanGreaterThanGreaterThanToken",e[e.AmpersandToken=48]="AmpersandToken",e[e.BarToken=49]="BarToken",e[e.CaretToken=50]="CaretToken",e[e.ExclamationToken=51]="ExclamationToken",e[e.TildeToken=52]="TildeToken",e[e.AmpersandAmpersandToken=53]="AmpersandAmpersandToken",e[e.BarBarToken=54]="BarBarToken",e[e.QuestionToken=55]="QuestionToken",e[e.ColonToken=56]="ColonToken",e[e.AtToken=57]="AtToken",e[e.EqualsToken=58]="EqualsToken",e[e.PlusEqualsToken=59]="PlusEqualsToken",e[e.MinusEqualsToken=60]="MinusEqualsToken",e[e.AsteriskEqualsToken=61]="AsteriskEqualsToken",e[e.AsteriskAsteriskEqualsToken=62]="AsteriskAsteriskEqualsToken",e[e.SlashEqualsToken=63]="SlashEqualsToken",e[e.PercentEqualsToken=64]="PercentEqualsToken",e[e.LessThanLessThanEqualsToken=65]="LessThanLessThanEqualsToken",e[e.GreaterThanGreaterThanEqualsToken=66]="GreaterThanGreaterThanEqualsToken",e[e.GreaterThanGreaterThanGreaterThanEqualsToken=67]="GreaterThanGreaterThanGreaterThanEqualsToken",e[e.AmpersandEqualsToken=68]="AmpersandEqualsToken",e[e.BarEqualsToken=69]="BarEqualsToken",e[e.CaretEqualsToken=70]="CaretEqualsToken",e[e.Identifier=71]="Identifier",e[e.BreakKeyword=72]="BreakKeyword",e[e.CaseKeyword=73]="CaseKeyword",e[e.CatchKeyword=74]="CatchKeyword",e[e.ClassKeyword=75]="ClassKeyword",e[e.ConstKeyword=76]="ConstKeyword",e[e.ContinueKeyword=77]="ContinueKeyword",e[e.DebuggerKeyword=78]="DebuggerKeyword",e[e.DefaultKeyword=79]="DefaultKeyword",e[e.DeleteKeyword=80]="DeleteKeyword",e[e.DoKeyword=81]="DoKeyword",e[e.ElseKeyword=82]="ElseKeyword",e[e.EnumKeyword=83]="EnumKeyword",e[e.ExportKeyword=84]="ExportKeyword",e[e.ExtendsKeyword=85]="ExtendsKeyword",e[e.FalseKeyword=86]="FalseKeyword",e[e.FinallyKeyword=87]="FinallyKeyword",e[e.ForKeyword=88]="ForKeyword",e[e.FunctionKeyword=89]="FunctionKeyword",e[e.IfKeyword=90]="IfKeyword",e[e.ImportKeyword=91]="ImportKeyword",e[e.InKeyword=92]="InKeyword",e[e.InstanceOfKeyword=93]="InstanceOfKeyword",e[e.NewKeyword=94]="NewKeyword",e[e.NullKeyword=95]="NullKeyword",e[e.ReturnKeyword=96]="ReturnKeyword",e[e.SuperKeyword=97]="SuperKeyword",e[e.SwitchKeyword=98]="SwitchKeyword",e[e.ThisKeyword=99]="ThisKeyword",e[e.ThrowKeyword=100]="ThrowKeyword",e[e.TrueKeyword=101]="TrueKeyword",e[e.TryKeyword=102]="TryKeyword",e[e.TypeOfKeyword=103]="TypeOfKeyword",e[e.VarKeyword=104]="VarKeyword",e[e.VoidKeyword=105]="VoidKeyword",e[e.WhileKeyword=106]="WhileKeyword",e[e.WithKeyword=107]="WithKeyword",e[e.ImplementsKeyword=108]="ImplementsKeyword",e[e.InterfaceKeyword=109]="InterfaceKeyword",e[e.LetKeyword=110]="LetKeyword",e[e.PackageKeyword=111]="PackageKeyword",e[e.PrivateKeyword=112]="PrivateKeyword",e[e.ProtectedKeyword=113]="ProtectedKeyword",e[e.PublicKeyword=114]="PublicKeyword",e[e.StaticKeyword=115]="StaticKeyword",e[e.YieldKeyword=116]="YieldKeyword",e[e.AbstractKeyword=117]="AbstractKeyword",e[e.AsKeyword=118]="AsKeyword",e[e.AnyKeyword=119]="AnyKeyword",e[e.AsyncKeyword=120]="AsyncKeyword",e[e.AwaitKeyword=121]="AwaitKeyword",e[e.BooleanKeyword=122]="BooleanKeyword",e[e.ConstructorKeyword=123]="ConstructorKeyword",e[e.DeclareKeyword=124]="DeclareKeyword",e[e.GetKeyword=125]="GetKeyword",e[e.IsKeyword=126]="IsKeyword",e[e.KeyOfKeyword=127]="KeyOfKeyword",e[e.ModuleKeyword=128]="ModuleKeyword",e[e.NamespaceKeyword=129]="NamespaceKeyword",e[e.NeverKeyword=130]="NeverKeyword",e[e.ReadonlyKeyword=131]="ReadonlyKeyword",e[e.RequireKeyword=132]="RequireKeyword",e[e.NumberKeyword=133]="NumberKeyword",e[e.ObjectKeyword=134]="ObjectKeyword",e[e.SetKeyword=135]="SetKeyword",e[e.StringKeyword=136]="StringKeyword",e[e.SymbolKeyword=137]="SymbolKeyword",e[e.TypeKeyword=138]="TypeKeyword",e[e.UndefinedKeyword=139]="UndefinedKeyword",e[e.FromKeyword=140]="FromKeyword",e[e.GlobalKeyword=141]="GlobalKeyword",e[e.OfKeyword=142]="OfKeyword",e[e.QualifiedName=143]="QualifiedName",e[e.ComputedPropertyName=144]="ComputedPropertyName",e[e.TypeParameter=145]="TypeParameter",e[e.Parameter=146]="Parameter",e[e.Decorator=147]="Decorator",e[e.PropertySignature=148]="PropertySignature",e[e.PropertyDeclaration=149]="PropertyDeclaration",e[e.MethodSignature=150]="MethodSignature",e[e.MethodDeclaration=151]="MethodDeclaration",e[e.Constructor=152]="Constructor",e[e.GetAccessor=153]="GetAccessor",e[e.SetAccessor=154]="SetAccessor",e[e.CallSignature=155]="CallSignature",e[e.ConstructSignature=156]="ConstructSignature",e[e.IndexSignature=157]="IndexSignature",e[e.TypePredicate=158]="TypePredicate",e[e.TypeReference=159]="TypeReference",e[e.FunctionType=160]="FunctionType",e[e.ConstructorType=161]="ConstructorType",e[e.TypeQuery=162]="TypeQuery",e[e.TypeLiteral=163]="TypeLiteral",e[e.ArrayType=164]="ArrayType",e[e.TupleType=165]="TupleType",e[e.UnionType=166]="UnionType",e[e.IntersectionType=167]="IntersectionType",e[e.ParenthesizedType=168]="ParenthesizedType",e[e.ThisType=169]="ThisType",e[e.TypeOperator=170]="TypeOperator",e[e.IndexedAccessType=171]="IndexedAccessType",e[e.MappedType=172]="MappedType",e[e.LiteralType=173]="LiteralType",e[e.ObjectBindingPattern=174]="ObjectBindingPattern",e[e.ArrayBindingPattern=175]="ArrayBindingPattern",e[e.BindingElement=176]="BindingElement",e[e.ArrayLiteralExpression=177]="ArrayLiteralExpression",e[e.ObjectLiteralExpression=178]="ObjectLiteralExpression",e[e.PropertyAccessExpression=179]="PropertyAccessExpression",e[e.ElementAccessExpression=180]="ElementAccessExpression",e[e.CallExpression=181]="CallExpression",e[e.NewExpression=182]="NewExpression",e[e.TaggedTemplateExpression=183]="TaggedTemplateExpression",e[e.TypeAssertionExpression=184]="TypeAssertionExpression",e[e.ParenthesizedExpression=185]="ParenthesizedExpression",e[e.FunctionExpression=186]="FunctionExpression",e[e.ArrowFunction=187]="ArrowFunction",e[e.DeleteExpression=188]="DeleteExpression",e[e.TypeOfExpression=189]="TypeOfExpression",e[e.VoidExpression=190]="VoidExpression",e[e.AwaitExpression=191]="AwaitExpression",e[e.PrefixUnaryExpression=192]="PrefixUnaryExpression",e[e.PostfixUnaryExpression=193]="PostfixUnaryExpression",e[e.BinaryExpression=194]="BinaryExpression",e[e.ConditionalExpression=195]="ConditionalExpression",e[e.TemplateExpression=196]="TemplateExpression",e[e.YieldExpression=197]="YieldExpression",e[e.SpreadElement=198]="SpreadElement",e[e.ClassExpression=199]="ClassExpression",e[e.OmittedExpression=200]="OmittedExpression",e[e.ExpressionWithTypeArguments=201]="ExpressionWithTypeArguments",e[e.AsExpression=202]="AsExpression",e[e.NonNullExpression=203]="NonNullExpression",e[e.MetaProperty=204]="MetaProperty",e[e.TemplateSpan=205]="TemplateSpan",e[e.SemicolonClassElement=206]="SemicolonClassElement",e[e.Block=207]="Block",e[e.VariableStatement=208]="VariableStatement",e[e.EmptyStatement=209]="EmptyStatement",e[e.ExpressionStatement=210]="ExpressionStatement",e[e.IfStatement=211]="IfStatement",e[e.DoStatement=212]="DoStatement",e[e.WhileStatement=213]="WhileStatement",e[e.ForStatement=214]="ForStatement",e[e.ForInStatement=215]="ForInStatement",e[e.ForOfStatement=216]="ForOfStatement",e[e.ContinueStatement=217]="ContinueStatement",e[e.BreakStatement=218]="BreakStatement",e[e.ReturnStatement=219]="ReturnStatement",e[e.WithStatement=220]="WithStatement",e[e.SwitchStatement=221]="SwitchStatement",e[e.LabeledStatement=222]="LabeledStatement",e[e.ThrowStatement=223]="ThrowStatement",e[e.TryStatement=224]="TryStatement",e[e.DebuggerStatement=225]="DebuggerStatement",e[e.VariableDeclaration=226]="VariableDeclaration",e[e.VariableDeclarationList=227]="VariableDeclarationList",e[e.FunctionDeclaration=228]="FunctionDeclaration",e[e.ClassDeclaration=229]="ClassDeclaration",e[e.InterfaceDeclaration=230]="InterfaceDeclaration",e[e.TypeAliasDeclaration=231]="TypeAliasDeclaration",e[e.EnumDeclaration=232]="EnumDeclaration",e[e.ModuleDeclaration=233]="ModuleDeclaration",e[e.ModuleBlock=234]="ModuleBlock",e[e.CaseBlock=235]="CaseBlock",e[e.NamespaceExportDeclaration=236]="NamespaceExportDeclaration",e[e.ImportEqualsDeclaration=237]="ImportEqualsDeclaration",e[e.ImportDeclaration=238]="ImportDeclaration",e[e.ImportClause=239]="ImportClause",e[e.NamespaceImport=240]="NamespaceImport",e[e.NamedImports=241]="NamedImports",e[e.ImportSpecifier=242]="ImportSpecifier",e[e.ExportAssignment=243]="ExportAssignment",e[e.ExportDeclaration=244]="ExportDeclaration",e[e.NamedExports=245]="NamedExports",e[e.ExportSpecifier=246]="ExportSpecifier",e[e.MissingDeclaration=247]="MissingDeclaration",e[e.ExternalModuleReference=248]="ExternalModuleReference",e[e.JsxElement=249]="JsxElement",e[e.JsxSelfClosingElement=250]="JsxSelfClosingElement",e[e.JsxOpeningElement=251]="JsxOpeningElement",e[e.JsxClosingElement=252]="JsxClosingElement",e[e.JsxAttribute=253]="JsxAttribute",e[e.JsxAttributes=254]="JsxAttributes",e[e.JsxSpreadAttribute=255]="JsxSpreadAttribute",e[e.JsxExpression=256]="JsxExpression",e[e.CaseClause=257]="CaseClause",e[e.DefaultClause=258]="DefaultClause",e[e.HeritageClause=259]="HeritageClause",e[e.CatchClause=260]="CatchClause",e[e.PropertyAssignment=261]="PropertyAssignment",e[e.ShorthandPropertyAssignment=262]="ShorthandPropertyAssignment",e[e.SpreadAssignment=263]="SpreadAssignment",e[e.EnumMember=264]="EnumMember",e[e.SourceFile=265]="SourceFile",e[e.Bundle=266]="Bundle",e[e.JSDocTypeExpression=267]="JSDocTypeExpression",e[e.JSDocAllType=268]="JSDocAllType",e[e.JSDocUnknownType=269]="JSDocUnknownType",e[e.JSDocNullableType=270]="JSDocNullableType",e[e.JSDocNonNullableType=271]="JSDocNonNullableType",e[e.JSDocOptionalType=272]="JSDocOptionalType",e[e.JSDocFunctionType=273]="JSDocFunctionType",e[e.JSDocVariadicType=274]="JSDocVariadicType",e[e.JSDocComment=275]="JSDocComment",e[e.JSDocTag=276]="JSDocTag",e[e.JSDocAugmentsTag=277]="JSDocAugmentsTag",e[e.JSDocClassTag=278]="JSDocClassTag",e[e.JSDocParameterTag=279]="JSDocParameterTag",e[e.JSDocReturnTag=280]="JSDocReturnTag",e[e.JSDocTypeTag=281]="JSDocTypeTag",e[e.JSDocTemplateTag=282]="JSDocTemplateTag",e[e.JSDocTypedefTag=283]="JSDocTypedefTag",e[e.JSDocPropertyTag=284]="JSDocPropertyTag",e[e.JSDocTypeLiteral=285]="JSDocTypeLiteral",e[e.SyntaxList=286]="SyntaxList",e[e.NotEmittedStatement=287]="NotEmittedStatement",e[e.PartiallyEmittedExpression=288]="PartiallyEmittedExpression",e[e.CommaListExpression=289]="CommaListExpression",e[e.MergeDeclarationMarker=290]="MergeDeclarationMarker",e[e.EndOfDeclarationMarker=291]="EndOfDeclarationMarker",e[e.Count=292]="Count",e[e.FirstAssignment=58]="FirstAssignment",e[e.LastAssignment=70]="LastAssignment",e[e.FirstCompoundAssignment=59]="FirstCompoundAssignment",e[e.LastCompoundAssignment=70]="LastCompoundAssignment",e[e.FirstReservedWord=72]="FirstReservedWord",e[e.LastReservedWord=107]="LastReservedWord",e[e.FirstKeyword=72]="FirstKeyword",e[e.LastKeyword=142]="LastKeyword",e[e.FirstFutureReservedWord=108]="FirstFutureReservedWord",e[e.LastFutureReservedWord=116]="LastFutureReservedWord",e[e.FirstTypeNode=158]="FirstTypeNode",e[e.LastTypeNode=173]="LastTypeNode",e[e.FirstPunctuation=17]="FirstPunctuation",e[e.LastPunctuation=70]="LastPunctuation",e[e.FirstToken=0]="FirstToken",e[e.LastToken=142]="LastToken",e[e.FirstTriviaToken=2]="FirstTriviaToken",e[e.LastTriviaToken=7]="LastTriviaToken",e[e.FirstLiteralToken=8]="FirstLiteralToken",e[e.LastLiteralToken=13]="LastLiteralToken",e[e.FirstTemplateToken=13]="FirstTemplateToken",e[e.LastTemplateToken=16]="LastTemplateToken",e[e.FirstBinaryOperator=27]="FirstBinaryOperator",e[e.LastBinaryOperator=70]="LastBinaryOperator",e[e.FirstNode=143]="FirstNode",e[e.FirstJSDocNode=267]="FirstJSDocNode",e[e.LastJSDocNode=285]="LastJSDocNode",e[e.FirstJSDocTagNode=276]="FirstJSDocTagNode",e[e.LastJSDocTagNode=285]="LastJSDocTagNode"}(e.SyntaxKind||(e.SyntaxKind={})),function(e){e[e.None=0]="None",e[e.Let=1]="Let",e[e.Const=2]="Const",e[e.NestedNamespace=4]="NestedNamespace",e[e.Synthesized=8]="Synthesized",e[e.Namespace=16]="Namespace",e[e.ExportContext=32]="ExportContext",e[e.ContainsThis=64]="ContainsThis",e[e.HasImplicitReturn=128]="HasImplicitReturn",e[e.HasExplicitReturn=256]="HasExplicitReturn",e[e.GlobalAugmentation=512]="GlobalAugmentation",e[e.HasAsyncFunctions=1024]="HasAsyncFunctions",e[e.DisallowInContext=2048]="DisallowInContext",e[e.YieldContext=4096]="YieldContext",e[e.DecoratorContext=8192]="DecoratorContext",e[e.AwaitContext=16384]="AwaitContext",e[e.ThisNodeHasError=32768]="ThisNodeHasError",e[e.JavaScriptFile=65536]="JavaScriptFile",e[e.ThisNodeOrAnySubNodesHasError=131072]="ThisNodeOrAnySubNodesHasError",e[e.HasAggregatedChildData=262144]="HasAggregatedChildData",e[e.PossiblyContainsDynamicImport=524288]="PossiblyContainsDynamicImport",e[e.JSDoc=1048576]="JSDoc",e[e.BlockScoped=3]="BlockScoped",e[e.ReachabilityCheckFlags=384]="ReachabilityCheckFlags",e[e.ReachabilityAndEmitFlags=1408]="ReachabilityAndEmitFlags",e[e.ContextFlags=96256]="ContextFlags",e[e.TypeExcludesFlags=20480]="TypeExcludesFlags"}(e.NodeFlags||(e.NodeFlags={})),function(e){e[e.None=0]="None",e[e.Export=1]="Export",e[e.Ambient=2]="Ambient",e[e.Public=4]="Public",e[e.Private=8]="Private",e[e.Protected=16]="Protected",e[e.Static=32]="Static",e[e.Readonly=64]="Readonly",e[e.Abstract=128]="Abstract",e[e.Async=256]="Async",e[e.Default=512]="Default",e[e.Const=2048]="Const",e[e.HasComputedFlags=536870912]="HasComputedFlags",e[e.AccessibilityModifier=28]="AccessibilityModifier",e[e.ParameterPropertyModifier=92]="ParameterPropertyModifier",e[e.NonPublicAccessibilityModifier=24]="NonPublicAccessibilityModifier",e[e.TypeScriptModifier=2270]="TypeScriptModifier",e[e.ExportDefault=513]="ExportDefault"}(e.ModifierFlags||(e.ModifierFlags={})),function(e){e[e.None=0]="None",e[e.IntrinsicNamedElement=1]="IntrinsicNamedElement",e[e.IntrinsicIndexedElement=2]="IntrinsicIndexedElement",e[e.IntrinsicElement=3]="IntrinsicElement"}(e.JsxFlags||(e.JsxFlags={})),function(e){e[e.Succeeded=1]="Succeeded",e[e.Failed=2]="Failed",e[e.FailedAndReported=3]="FailedAndReported"}(e.RelationComparisonResult||(e.RelationComparisonResult={})),function(e){e[e.None=0]="None",e[e.Auto=1]="Auto",e[e.Loop=2]="Loop",e[e.Unique=3]="Unique",e[e.Node=4]="Node"}(e.GeneratedIdentifierKind||(e.GeneratedIdentifierKind={})),function(e){e[e.None=0]="None",e[e.Scientific=2]="Scientific",e[e.Octal=4]="Octal",e[e.HexSpecifier=8]="HexSpecifier",e[e.BinarySpecifier=16]="BinarySpecifier",e[e.OctalSpecifier=32]="OctalSpecifier",e[e.BinaryOrOctalSpecifier=48]="BinaryOrOctalSpecifier"}(e.NumericLiteralFlags||(e.NumericLiteralFlags={})),function(e){e[e.Unreachable=1]="Unreachable",e[e.Start=2]="Start",e[e.BranchLabel=4]="BranchLabel",e[e.LoopLabel=8]="LoopLabel",e[e.Assignment=16]="Assignment",e[e.TrueCondition=32]="TrueCondition",e[e.FalseCondition=64]="FalseCondition",e[e.SwitchClause=128]="SwitchClause",e[e.ArrayMutation=256]="ArrayMutation",e[e.Referenced=512]="Referenced",e[e.Shared=1024]="Shared",e[e.PreFinally=2048]="PreFinally",e[e.AfterFinally=4096]="AfterFinally",e[e.Label=12]="Label",e[e.Condition=96]="Condition"}(e.FlowFlags||(e.FlowFlags={}));var t=function(){};e.OperationCanceledException=t,function(e){e[e.Not=0]="Not",e[e.SafeModules=1]="SafeModules",e[e.Completely=2]="Completely"}(e.StructureIsReused||(e.StructureIsReused={})),function(e){e[e.Success=0]="Success",e[e.DiagnosticsPresent_OutputsSkipped=1]="DiagnosticsPresent_OutputsSkipped",e[e.DiagnosticsPresent_OutputsGenerated=2]="DiagnosticsPresent_OutputsGenerated"}(e.ExitStatus||(e.ExitStatus={})),function(e){e[e.None=0]="None",e[e.NoTruncation=1]="NoTruncation",e[e.WriteArrayAsGenericType=2]="WriteArrayAsGenericType",e[e.WriteTypeArgumentsOfSignature=32]="WriteTypeArgumentsOfSignature",e[e.UseFullyQualifiedType=64]="UseFullyQualifiedType",e[e.SuppressAnyReturnType=256]="SuppressAnyReturnType",e[e.WriteTypeParametersInQualifiedName=512]="WriteTypeParametersInQualifiedName",e[e.AllowThisInObjectLiteral=1024]="AllowThisInObjectLiteral",e[e.AllowQualifedNameInPlaceOfIdentifier=2048]="AllowQualifedNameInPlaceOfIdentifier",e[e.AllowAnonymousIdentifier=8192]="AllowAnonymousIdentifier",e[e.AllowEmptyUnionOrIntersection=16384]="AllowEmptyUnionOrIntersection",e[e.AllowEmptyTuple=32768]="AllowEmptyTuple",e[e.IgnoreErrors=60416]="IgnoreErrors",e[e.InObjectTypeLiteral=1048576]="InObjectTypeLiteral",e[e.InTypeAlias=8388608]="InTypeAlias"}(e.NodeBuilderFlags||(e.NodeBuilderFlags={})),function(e){e[e.None=0]="None",e[e.WriteArrayAsGenericType=1]="WriteArrayAsGenericType",e[e.UseTypeOfFunction=4]="UseTypeOfFunction",e[e.NoTruncation=8]="NoTruncation",e[e.WriteArrowStyleSignature=16]="WriteArrowStyleSignature",e[e.WriteOwnNameForAnyLike=32]="WriteOwnNameForAnyLike",e[e.WriteTypeArgumentsOfSignature=64]="WriteTypeArgumentsOfSignature",e[e.InElementType=128]="InElementType",e[e.UseFullyQualifiedType=256]="UseFullyQualifiedType",e[e.InFirstTypeArgument=512]="InFirstTypeArgument",e[e.InTypeAlias=1024]="InTypeAlias",e[e.SuppressAnyReturnType=4096]="SuppressAnyReturnType",e[e.AddUndefined=8192]="AddUndefined",e[e.WriteClassExpressionAsTypeLiteral=16384]="WriteClassExpressionAsTypeLiteral",e[e.InArrayType=32768]="InArrayType",e[e.UseAliasDefinedOutsideCurrentScope=65536]="UseAliasDefinedOutsideCurrentScope"}(e.TypeFormatFlags||(e.TypeFormatFlags={})),function(e){e[e.None=0]="None",e[e.WriteTypeParametersOrArguments=1]="WriteTypeParametersOrArguments",e[e.UseOnlyExternalAliasing=2]="UseOnlyExternalAliasing"}(e.SymbolFormatFlags||(e.SymbolFormatFlags={})),function(e){e[e.Accessible=0]="Accessible",e[e.NotAccessible=1]="NotAccessible",e[e.CannotBeNamed=2]="CannotBeNamed"}(e.SymbolAccessibility||(e.SymbolAccessibility={})),function(e){e[e.UnionOrIntersection=0]="UnionOrIntersection",e[e.Spread=1]="Spread"}(e.SyntheticSymbolKind||(e.SyntheticSymbolKind={})),function(e){e[e.This=0]="This",e[e.Identifier=1]="Identifier"}(e.TypePredicateKind||(e.TypePredicateKind={})),function(e){e[e.Unknown=0]="Unknown",e[e.TypeWithConstructSignatureAndValue=1]="TypeWithConstructSignatureAndValue",e[e.VoidNullableOrNeverType=2]="VoidNullableOrNeverType",e[e.NumberLikeType=3]="NumberLikeType",e[e.StringLikeType=4]="StringLikeType",e[e.BooleanType=5]="BooleanType",e[e.ArrayLikeType=6]="ArrayLikeType",e[e.ESSymbolType=7]="ESSymbolType",e[e.Promise=8]="Promise",e[e.TypeWithCallSignature=9]="TypeWithCallSignature",e[e.ObjectType=10]="ObjectType"}(e.TypeReferenceSerializationKind||(e.TypeReferenceSerializationKind={})),function(e){e[e.None=0]="None",e[e.FunctionScopedVariable=1]="FunctionScopedVariable",e[e.BlockScopedVariable=2]="BlockScopedVariable",e[e.Property=4]="Property",e[e.EnumMember=8]="EnumMember",e[e.Function=16]="Function",e[e.Class=32]="Class",e[e.Interface=64]="Interface",e[e.ConstEnum=128]="ConstEnum",e[e.RegularEnum=256]="RegularEnum",e[e.ValueModule=512]="ValueModule",e[e.NamespaceModule=1024]="NamespaceModule",e[e.TypeLiteral=2048]="TypeLiteral",e[e.ObjectLiteral=4096]="ObjectLiteral",e[e.Method=8192]="Method",e[e.Constructor=16384]="Constructor",e[e.GetAccessor=32768]="GetAccessor",e[e.SetAccessor=65536]="SetAccessor",e[e.Signature=131072]="Signature",e[e.TypeParameter=262144]="TypeParameter",e[e.TypeAlias=524288]="TypeAlias",e[e.ExportValue=1048576]="ExportValue",e[e.Alias=2097152]="Alias",e[e.Prototype=4194304]="Prototype",e[e.ExportStar=8388608]="ExportStar",e[e.Optional=16777216]="Optional",e[e.Transient=33554432]="Transient",e[e.Enum=384]="Enum",e[e.Variable=3]="Variable",e[e.Value=107455]="Value",e[e.Type=793064]="Type",e[e.Namespace=1920]="Namespace",e[e.Module=1536]="Module",e[e.Accessor=98304]="Accessor",e[e.FunctionScopedVariableExcludes=107454]="FunctionScopedVariableExcludes",e[e.BlockScopedVariableExcludes=107455]="BlockScopedVariableExcludes",e[e.ParameterExcludes=107455]="ParameterExcludes",e[e.PropertyExcludes=0]="PropertyExcludes",e[e.EnumMemberExcludes=900095]="EnumMemberExcludes",e[e.FunctionExcludes=106927]="FunctionExcludes",e[e.ClassExcludes=899519]="ClassExcludes",e[e.InterfaceExcludes=792968]="InterfaceExcludes",e[e.RegularEnumExcludes=899327]="RegularEnumExcludes",e[e.ConstEnumExcludes=899967]="ConstEnumExcludes",e[e.ValueModuleExcludes=106639]="ValueModuleExcludes",e[e.NamespaceModuleExcludes=0]="NamespaceModuleExcludes",e[e.MethodExcludes=99263]="MethodExcludes",e[e.GetAccessorExcludes=41919]="GetAccessorExcludes",e[e.SetAccessorExcludes=74687]="SetAccessorExcludes",e[e.TypeParameterExcludes=530920]="TypeParameterExcludes",e[e.TypeAliasExcludes=793064]="TypeAliasExcludes",e[e.AliasExcludes=2097152]="AliasExcludes",e[e.ModuleMember=2623475]="ModuleMember",e[e.ExportHasLocal=944]="ExportHasLocal",e[e.HasExports=1952]="HasExports",e[e.HasMembers=6240]="HasMembers",e[e.BlockScoped=418]="BlockScoped",e[e.PropertyOrAccessor=98308]="PropertyOrAccessor",e[e.ClassMember=106500]="ClassMember",e[e.Classifiable=788448]="Classifiable"}(e.SymbolFlags||(e.SymbolFlags={})),function(e){e[e.Numeric=0]="Numeric",e[e.Literal=1]="Literal"}(e.EnumKind||(e.EnumKind={})),function(e){e[e.Instantiated=1]="Instantiated",e[e.SyntheticProperty=2]="SyntheticProperty",e[e.SyntheticMethod=4]="SyntheticMethod",e[e.Readonly=8]="Readonly",e[e.Partial=16]="Partial",e[e.HasNonUniformType=32]="HasNonUniformType",e[e.ContainsPublic=64]="ContainsPublic",e[e.ContainsProtected=128]="ContainsProtected",e[e.ContainsPrivate=256]="ContainsPrivate",e[e.ContainsStatic=512]="ContainsStatic",e[e.Synthetic=6]="Synthetic"}(e.CheckFlags||(e.CheckFlags={})),function(e){e.Call="__call",e.Constructor="__constructor",e.New="__new",e.Index="__index",e.ExportStar="__export",e.Global="__global",e.Missing="__missing",e.Type="__type",e.Object="__object",e.JSXAttributes="__jsxAttributes",e.Class="__class",e.Function="__function",e.Computed="__computed",e.Resolving="__resolving__",e.ExportEquals="export=",e.Default="default"}(e.InternalSymbolName||(e.InternalSymbolName={})),function(e){e[e.TypeChecked=1]="TypeChecked",e[e.LexicalThis=2]="LexicalThis",e[e.CaptureThis=4]="CaptureThis",e[e.CaptureNewTarget=8]="CaptureNewTarget",e[e.SuperInstance=256]="SuperInstance",e[e.SuperStatic=512]="SuperStatic",e[e.ContextChecked=1024]="ContextChecked",e[e.AsyncMethodWithSuper=2048]="AsyncMethodWithSuper",e[e.AsyncMethodWithSuperBinding=4096]="AsyncMethodWithSuperBinding",e[e.CaptureArguments=8192]="CaptureArguments",e[e.EnumValuesComputed=16384]="EnumValuesComputed",e[e.LexicalModuleMergesWithClass=32768]="LexicalModuleMergesWithClass",e[e.LoopWithCapturedBlockScopedBinding=65536]="LoopWithCapturedBlockScopedBinding",e[e.CapturedBlockScopedBinding=131072]="CapturedBlockScopedBinding",e[e.BlockScopedBindingInLoop=262144]="BlockScopedBindingInLoop",e[e.ClassWithBodyScopedClassBinding=524288]="ClassWithBodyScopedClassBinding",e[e.BodyScopedClassBinding=1048576]="BodyScopedClassBinding",e[e.NeedsLoopOutParameter=2097152]="NeedsLoopOutParameter",e[e.AssignmentsMarked=4194304]="AssignmentsMarked",e[e.ClassWithConstructorReference=8388608]="ClassWithConstructorReference",e[e.ConstructorReferenceInClass=16777216]="ConstructorReferenceInClass"}(e.NodeCheckFlags||(e.NodeCheckFlags={})),function(e){e[e.Any=1]="Any",e[e.String=2]="String",e[e.Number=4]="Number",e[e.Boolean=8]="Boolean",e[e.Enum=16]="Enum",e[e.StringLiteral=32]="StringLiteral",e[e.NumberLiteral=64]="NumberLiteral",e[e.BooleanLiteral=128]="BooleanLiteral",e[e.EnumLiteral=256]="EnumLiteral",e[e.ESSymbol=512]="ESSymbol",e[e.Void=1024]="Void",e[e.Undefined=2048]="Undefined",e[e.Null=4096]="Null",e[e.Never=8192]="Never",e[e.TypeParameter=16384]="TypeParameter",e[e.Object=32768]="Object",e[e.Union=65536]="Union",e[e.Intersection=131072]="Intersection",e[e.Index=262144]="Index",e[e.IndexedAccess=524288]="IndexedAccess",e[e.FreshLiteral=1048576]="FreshLiteral",e[e.ContainsWideningType=2097152]="ContainsWideningType",e[e.ContainsObjectLiteral=4194304]="ContainsObjectLiteral",e[e.ContainsAnyFunctionType=8388608]="ContainsAnyFunctionType",e[e.NonPrimitive=16777216]="NonPrimitive",e[e.JsxAttributes=33554432]="JsxAttributes",e[e.MarkerType=67108864]="MarkerType",e[e.Nullable=6144]="Nullable",e[e.Literal=224]="Literal",e[e.Unit=6368]="Unit",e[e.StringOrNumberLiteral=96]="StringOrNumberLiteral",e[e.DefinitelyFalsy=7392]="DefinitelyFalsy",e[e.PossiblyFalsy=7406]="PossiblyFalsy",e[e.Intrinsic=16793231]="Intrinsic",e[e.Primitive=8190]="Primitive",e[e.StringLike=262178]="StringLike",e[e.NumberLike=84]="NumberLike",e[e.BooleanLike=136]="BooleanLike",e[e.EnumLike=272]="EnumLike",e[e.UnionOrIntersection=196608]="UnionOrIntersection",e[e.StructuredType=229376]="StructuredType",e[e.StructuredOrTypeVariable=1032192]="StructuredOrTypeVariable",e[e.TypeVariable=540672]="TypeVariable",e[e.Narrowable=17810175]="Narrowable",e[e.NotUnionOrUnit=16810497]="NotUnionOrUnit",e[e.RequiresWidening=6291456]="RequiresWidening",e[e.PropagatingFlags=14680064]="PropagatingFlags"}(e.TypeFlags||(e.TypeFlags={})),function(e){e[e.Class=1]="Class",e[e.Interface=2]="Interface",e[e.Reference=4]="Reference",e[e.Tuple=8]="Tuple",e[e.Anonymous=16]="Anonymous",e[e.Mapped=32]="Mapped",e[e.Instantiated=64]="Instantiated",e[e.ObjectLiteral=128]="ObjectLiteral",e[e.EvolvingArray=256]="EvolvingArray",e[e.ObjectLiteralPatternWithComputedProperties=512]="ObjectLiteralPatternWithComputedProperties",e[e.ClassOrInterface=3]="ClassOrInterface"}(e.ObjectFlags||(e.ObjectFlags={})),function(e){e[e.Invariant=0]="Invariant",e[e.Covariant=1]="Covariant",e[e.Contravariant=2]="Contravariant",e[e.Bivariant=3]="Bivariant",e[e.Independent=4]="Independent"}(e.Variance||(e.Variance={})),function(e){e[e.Call=0]="Call",e[e.Construct=1]="Construct"}(e.SignatureKind||(e.SignatureKind={})),function(e){e[e.String=0]="String",e[e.Number=1]="Number"}(e.IndexKind||(e.IndexKind={})),function(e){e[e.Contravariant=1]="Contravariant",e[e.NakedTypeVariable=2]="NakedTypeVariable",e[e.MappedType=4]="MappedType",e[e.ReturnType=8]="ReturnType"}(e.InferencePriority||(e.InferencePriority={})),function(e){e[e.InferUnionTypes=1]="InferUnionTypes",e[e.NoDefault=2]="NoDefault",e[e.AnyDefault=4]="AnyDefault"}(e.InferenceFlags||(e.InferenceFlags={})),function(e){e[e.False=0]="False",e[e.Maybe=1]="Maybe",e[e.True=-1]="True"}(e.Ternary||(e.Ternary={})),function(e){e[e.None=0]="None",e[e.ExportsProperty=1]="ExportsProperty",e[e.ModuleExports=2]="ModuleExports",e[e.PrototypeProperty=3]="PrototypeProperty",e[e.ThisProperty=4]="ThisProperty",e[e.Property=5]="Property"}(e.SpecialPropertyAssignmentKind||(e.SpecialPropertyAssignmentKind={})),function(e){e[e.Warning=0]="Warning",e[e.Error=1]="Error",e[e.Message=2]="Message"}(e.DiagnosticCategory||(e.DiagnosticCategory={})),function(e){e[e.Classic=1]="Classic",e[e.NodeJs=2]="NodeJs"}(e.ModuleResolutionKind||(e.ModuleResolutionKind={})),function(e){e[e.None=0]="None",e[e.CommonJS=1]="CommonJS",e[e.AMD=2]="AMD",e[e.UMD=3]="UMD",e[e.System=4]="System",e[e.ES2015=5]="ES2015",e[e.ESNext=6]="ESNext"}(e.ModuleKind||(e.ModuleKind={})),function(e){e[e.None=0]="None",e[e.Preserve=1]="Preserve",e[e.React=2]="React",e[e.ReactNative=3]="ReactNative"}(e.JsxEmit||(e.JsxEmit={})),function(e){e[e.CarriageReturnLineFeed=0]="CarriageReturnLineFeed",e[e.LineFeed=1]="LineFeed"}(e.NewLineKind||(e.NewLineKind={})),function(e){e[e.Unknown=0]="Unknown",e[e.JS=1]="JS",e[e.JSX=2]="JSX",e[e.TS=3]="TS",e[e.TSX=4]="TSX",e[e.External=5]="External",e[e.JSON=6]="JSON"}(e.ScriptKind||(e.ScriptKind={})),function(e){e[e.ES3=0]="ES3",e[e.ES5=1]="ES5",e[e.ES2015=2]="ES2015",e[e.ES2016=3]="ES2016",e[e.ES2017=4]="ES2017",e[e.ESNext=5]="ESNext",e[e.Latest=5]="Latest"}(e.ScriptTarget||(e.ScriptTarget={})),function(e){e[e.Standard=0]="Standard",e[e.JSX=1]="JSX"}(e.LanguageVariant||(e.LanguageVariant={})),function(e){e[e.Simple=0]="Simple",e[e.Pretty=1]="Pretty"}(e.DiagnosticStyle||(e.DiagnosticStyle={})),function(e){e[e.None=0]="None",e[e.Recursive=1]="Recursive"}(e.WatchDirectoryFlags||(e.WatchDirectoryFlags={})),function(e){e[e.nullCharacter=0]="nullCharacter",e[e.maxAsciiCharacter=127]="maxAsciiCharacter",e[e.lineFeed=10]="lineFeed",e[e.carriageReturn=13]="carriageReturn",e[e.lineSeparator=8232]="lineSeparator",e[e.paragraphSeparator=8233]="paragraphSeparator",e[e.nextLine=133]="nextLine",e[e.space=32]="space",e[e.nonBreakingSpace=160]="nonBreakingSpace",e[e.enQuad=8192]="enQuad",e[e.emQuad=8193]="emQuad",e[e.enSpace=8194]="enSpace",e[e.emSpace=8195]="emSpace",e[e.threePerEmSpace=8196]="threePerEmSpace",e[e.fourPerEmSpace=8197]="fourPerEmSpace",e[e.sixPerEmSpace=8198]="sixPerEmSpace",e[e.figureSpace=8199]="figureSpace",e[e.punctuationSpace=8200]="punctuationSpace",e[e.thinSpace=8201]="thinSpace",e[e.hairSpace=8202]="hairSpace",e[e.zeroWidthSpace=8203]="zeroWidthSpace",e[e.narrowNoBreakSpace=8239]="narrowNoBreakSpace",e[e.ideographicSpace=12288]="ideographicSpace",e[e.mathematicalSpace=8287]="mathematicalSpace",e[e.ogham=5760]="ogham",e[e._=95]="_",e[e.$=36]="$",e[e._0=48]="_0",e[e._1=49]="_1",e[e._2=50]="_2",e[e._3=51]="_3",e[e._4=52]="_4",e[e._5=53]="_5",e[e._6=54]="_6",e[e._7=55]="_7",e[e._8=56]="_8",e[e._9=57]="_9",e[e.a=97]="a",e[e.b=98]="b",e[e.c=99]="c",e[e.d=100]="d",e[e.e=101]="e",e[e.f=102]="f",e[e.g=103]="g",e[e.h=104]="h",e[e.i=105]="i",e[e.j=106]="j",e[e.k=107]="k",e[e.l=108]="l",e[e.m=109]="m",e[e.n=110]="n",e[e.o=111]="o",e[e.p=112]="p",e[e.q=113]="q",e[e.r=114]="r",e[e.s=115]="s",e[e.t=116]="t",e[e.u=117]="u",e[e.v=118]="v",e[e.w=119]="w",e[e.x=120]="x",e[e.y=121]="y",e[e.z=122]="z",e[e.A=65]="A",e[e.B=66]="B",e[e.C=67]="C",e[e.D=68]="D",e[e.E=69]="E",e[e.F=70]="F",e[e.G=71]="G",e[e.H=72]="H",e[e.I=73]="I",e[e.J=74]="J",e[e.K=75]="K",e[e.L=76]="L",e[e.M=77]="M",e[e.N=78]="N",e[e.O=79]="O",e[e.P=80]="P",e[e.Q=81]="Q",e[e.R=82]="R",e[e.S=83]="S",e[e.T=84]="T",e[e.U=85]="U",e[e.V=86]="V",e[e.W=87]="W",e[e.X=88]="X",e[e.Y=89]="Y",e[e.Z=90]="Z",e[e.ampersand=38]="ampersand",e[e.asterisk=42]="asterisk",e[e.at=64]="at",e[e.backslash=92]="backslash",e[e.backtick=96]="backtick",e[e.bar=124]="bar",e[e.caret=94]="caret",e[e.closeBrace=125]="closeBrace",e[e.closeBracket=93]="closeBracket",e[e.closeParen=41]="closeParen",e[e.colon=58]="colon",e[e.comma=44]="comma",e[e.dot=46]="dot",e[e.doubleQuote=34]="doubleQuote",e[e.equals=61]="equals",e[e.exclamation=33]="exclamation",e[e.greaterThan=62]="greaterThan",e[e.hash=35]="hash",e[e.lessThan=60]="lessThan",e[e.minus=45]="minus",e[e.openBrace=123]="openBrace",e[e.openBracket=91]="openBracket",e[e.openParen=40]="openParen",e[e.percent=37]="percent",e[e.plus=43]="plus",e[e.question=63]="question",e[e.semicolon=59]="semicolon",e[e.singleQuote=39]="singleQuote",e[e.slash=47]="slash",e[e.tilde=126]="tilde",e[e.backspace=8]="backspace",e[e.formFeed=12]="formFeed",e[e.byteOrderMark=65279]="byteOrderMark",e[e.tab=9]="tab",e[e.verticalTab=11]="verticalTab"}(e.CharacterCodes||(e.CharacterCodes={})),function(e){e.Ts=".ts",e.Tsx=".tsx",e.Dts=".d.ts",e.Js=".js",e.Jsx=".jsx",e.Json=".json"}(e.Extension||(e.Extension={})),function(e){e[e.None=0]="None",e[e.TypeScript=1]="TypeScript",e[e.ContainsTypeScript=2]="ContainsTypeScript",e[e.ContainsJsx=4]="ContainsJsx",e[e.ContainsESNext=8]="ContainsESNext",e[e.ContainsES2017=16]="ContainsES2017",e[e.ContainsES2016=32]="ContainsES2016",e[e.ES2015=64]="ES2015",e[e.ContainsES2015=128]="ContainsES2015",e[e.Generator=256]="Generator",e[e.ContainsGenerator=512]="ContainsGenerator",e[e.DestructuringAssignment=1024]="DestructuringAssignment",e[e.ContainsDestructuringAssignment=2048]="ContainsDestructuringAssignment",e[e.ContainsDecorators=4096]="ContainsDecorators",e[e.ContainsPropertyInitializer=8192]="ContainsPropertyInitializer",e[e.ContainsLexicalThis=16384]="ContainsLexicalThis",e[e.ContainsCapturedLexicalThis=32768]="ContainsCapturedLexicalThis",e[e.ContainsLexicalThisInComputedPropertyName=65536]="ContainsLexicalThisInComputedPropertyName",e[e.ContainsDefaultValueAssignments=131072]="ContainsDefaultValueAssignments",e[e.ContainsParameterPropertyAssignments=262144]="ContainsParameterPropertyAssignments",e[e.ContainsSpread=524288]="ContainsSpread",e[e.ContainsObjectSpread=1048576]="ContainsObjectSpread",e[e.ContainsRest=524288]="ContainsRest",e[e.ContainsObjectRest=1048576]="ContainsObjectRest",e[e.ContainsComputedPropertyName=2097152]="ContainsComputedPropertyName",e[e.ContainsBlockScopedBinding=4194304]="ContainsBlockScopedBinding",e[e.ContainsBindingPattern=8388608]="ContainsBindingPattern",e[e.ContainsYield=16777216]="ContainsYield",e[e.ContainsHoistedDeclarationOrCompletion=33554432]="ContainsHoistedDeclarationOrCompletion",e[e.ContainsDynamicImport=67108864]="ContainsDynamicImport",e[e.HasComputedFlags=536870912]="HasComputedFlags",e[e.AssertTypeScript=3]="AssertTypeScript",e[e.AssertJsx=4]="AssertJsx",e[e.AssertESNext=8]="AssertESNext",e[e.AssertES2017=16]="AssertES2017",e[e.AssertES2016=32]="AssertES2016",e[e.AssertES2015=192]="AssertES2015",e[e.AssertGenerator=768]="AssertGenerator",e[e.AssertDestructuringAssignment=3072]="AssertDestructuringAssignment",e[e.NodeExcludes=536872257]="NodeExcludes",e[e.ArrowFunctionExcludes=601249089]="ArrowFunctionExcludes",e[e.FunctionExcludes=601281857]="FunctionExcludes",e[e.ConstructorExcludes=601015617]="ConstructorExcludes",e[e.MethodOrAccessorExcludes=601015617]="MethodOrAccessorExcludes",e[e.ClassExcludes=539358529]="ClassExcludes",e[e.ModuleExcludes=574674241]="ModuleExcludes",e[e.TypeExcludes=-3]="TypeExcludes",e[e.ObjectLiteralExcludes=540087617]="ObjectLiteralExcludes",e[e.ArrayLiteralOrCallOrNewExcludes=537396545]="ArrayLiteralOrCallOrNewExcludes",e[e.VariableDeclarationListExcludes=546309441]="VariableDeclarationListExcludes",e[e.ParameterExcludes=536872257]="ParameterExcludes",e[e.CatchClauseExcludes=537920833]="CatchClauseExcludes",e[e.BindingPatternExcludes=537396545]="BindingPatternExcludes",e[e.TypeScriptClassSyntaxMask=274432]="TypeScriptClassSyntaxMask",e[e.ES2015FunctionSyntaxMask=163840]="ES2015FunctionSyntaxMask"}(e.TransformFlags||(e.TransformFlags={})),function(e){e[e.SingleLine=1]="SingleLine",e[e.AdviseOnEmitNode=2]="AdviseOnEmitNode",e[e.NoSubstitution=4]="NoSubstitution",e[e.CapturesThis=8]="CapturesThis",e[e.NoLeadingSourceMap=16]="NoLeadingSourceMap",e[e.NoTrailingSourceMap=32]="NoTrailingSourceMap",e[e.NoSourceMap=48]="NoSourceMap",e[e.NoNestedSourceMaps=64]="NoNestedSourceMaps",e[e.NoTokenLeadingSourceMaps=128]="NoTokenLeadingSourceMaps",e[e.NoTokenTrailingSourceMaps=256]="NoTokenTrailingSourceMaps",e[e.NoTokenSourceMaps=384]="NoTokenSourceMaps",e[e.NoLeadingComments=512]="NoLeadingComments",e[e.NoTrailingComments=1024]="NoTrailingComments",e[e.NoComments=1536]="NoComments",e[e.NoNestedComments=2048]="NoNestedComments",e[e.HelperName=4096]="HelperName",e[e.ExportName=8192]="ExportName",e[e.LocalName=16384]="LocalName",e[e.InternalName=32768]="InternalName",e[e.Indented=65536]="Indented",e[e.NoIndentation=131072]="NoIndentation",e[e.AsyncFunctionBody=262144]="AsyncFunctionBody",e[e.ReuseTempVariableScope=524288]="ReuseTempVariableScope",e[e.CustomPrologue=1048576]="CustomPrologue",e[e.NoHoisting=2097152]="NoHoisting",e[e.HasEndOfDeclarationMarker=4194304]="HasEndOfDeclarationMarker",e[e.Iterator=8388608]="Iterator",e[e.NoAsciiEscaping=16777216]="NoAsciiEscaping",e[e.TypeScriptClassWrapper=33554432]="TypeScriptClassWrapper"}(e.EmitFlags||(e.EmitFlags={})),function(e){e[e.Extends=1]="Extends",e[e.Assign=2]="Assign",e[e.Rest=4]="Rest",e[e.Decorate=8]="Decorate",e[e.Metadata=16]="Metadata",e[e.Param=32]="Param",e[e.Awaiter=64]="Awaiter",e[e.Generator=128]="Generator",e[e.Values=256]="Values",e[e.Read=512]="Read",e[e.Spread=1024]="Spread",e[e.Await=2048]="Await",e[e.AsyncGenerator=4096]="AsyncGenerator",e[e.AsyncDelegator=8192]="AsyncDelegator",e[e.AsyncValues=16384]="AsyncValues",e[e.ExportStar=32768]="ExportStar",e[e.MakeTemplateObject=65536]="MakeTemplateObject",e[e.FirstEmitHelper=1]="FirstEmitHelper",e[e.LastEmitHelper=65536]="LastEmitHelper",e[e.ForOfIncludes=256]="ForOfIncludes",e[e.ForAwaitOfIncludes=16384]="ForAwaitOfIncludes",e[e.AsyncGeneratorIncludes=6144]="AsyncGeneratorIncludes",e[e.AsyncDelegatorIncludes=26624]="AsyncDelegatorIncludes",e[e.SpreadIncludes=1536]="SpreadIncludes"}(e.ExternalEmitHelpers||(e.ExternalEmitHelpers={})),function(e){e[e.SourceFile=0]="SourceFile",e[e.Expression=1]="Expression",e[e.IdentifierName=2]="IdentifierName",e[e.MappedTypeParameter=3]="MappedTypeParameter",e[e.Unspecified=4]="Unspecified"}(e.EmitHint||(e.EmitHint={}))}(ts||(ts={})),function(e){e.timestamp="undefined"!=typeof performance&&performance.now?function(){return performance.now()}:Date.now?Date.now:function(){return+new Date}}(ts||(ts={})),function(e){!function(t){var n,r,i,a="function"==typeof onProfilerEvent&&!0===onProfilerEvent.profiler?onProfilerEvent:function(e){},o=!1,s=0;t.mark=function(t){o&&(r.set(t,e.timestamp()),n.set(t,(n.get(t)||0)+1),a(t))},t.measure=function(t,n,a){if(o){var c=a&&r.get(a)||e.timestamp(),l=n&&r.get(n)||s;i.set(t,(i.get(t)||0)+(c-l))}},t.getCount=function(e){return n&&n.get(e)||0},t.getDuration=function(e){return i&&i.get(e)||0},t.forEachMeasure=function(e){i.forEach((function(t,n){e(n,t)}))},t.enable=function(){n=e.createMap(),r=e.createMap(),i=e.createMap(),o=!0,s=e.timestamp()},t.disable=function(){o=!1}}(e.performance||(e.performance={}))}(ts||(ts={})),function(e){e.versionMajorMinor="2.6",e.version=e.versionMajorMinor+".1"}(ts||(ts={})),function(e){e.isExternalModuleNameRelative=function(t){return e.pathIsRelative(t)||e.isRootedDiskPath(t)}}(ts||(ts={})),function(e){function t(){var e=Object.create(null);return e.__=void 0,delete e.__,e}function n(){return new i}e.collator="object"==typeof Intl&&"function"==typeof Intl.Collator?new Intl.Collator(void 0,{usage:"sort",sensitivity:"accent"}):void 0,e.localeCompareIsCorrect=e.collator&&e.collator.compare("a","B")<0,e.createMap=n,e.createUnderscoreEscapedMap=function(){return new i},e.createSymbolTable=function(e){var t=n();if(e)for(var r=0,i=e;r<i.length;r++){var a=i[r];t.set(a.escapedName,a)}return t},e.createMapFromTemplate=function(e){var t=new i;for(var n in e)S.call(e,n)&&t.set(n,e[n]);return t};var r,i="undefined"!=typeof Map&&"entries"in Map.prototype?Map:(r=function(){function e(e,t){this.index=0,this.data=e,this.selector=t,this.keys=Object.keys(e)}return e.prototype.next=function(){var e=this.index;return e<this.keys.length?(this.index++,{value:this.selector(this.data,this.keys[e]),done:!1}):{value:void 0,done:!0}},e}(),function(){function e(){this.data=t(),this.size=0}return e.prototype.get=function(e){return this.data[e]},e.prototype.set=function(e,t){return this.has(e)||this.size++,this.data[e]=t,this},e.prototype.has=function(e){return e in this.data},e.prototype.delete=function(e){return!!this.has(e)&&(this.size--,delete this.data[e],!0)},e.prototype.clear=function(){this.data=t(),this.size=0},e.prototype.keys=function(){return new r(this.data,(function(e,t){return t}))},e.prototype.values=function(){return new r(this.data,(function(e,t){return e[t]}))},e.prototype.entries=function(){return new r(this.data,(function(e,t){return[t,e[t]]}))},e.prototype.forEach=function(e){for(var t in this.data)e(this.data[t],t)},e}());function a(e,t){if(e)for(var n=0;n<e.length;n++){var r=t(e[n],n);if(r)return r}}function o(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(t(r,n))return r}}function s(e,t){for(var n=0;n<e.length;n++)if(t(e[n],n))return n;return-1}function c(e,t){if(e)for(var n=0,r=e;n<r.length;n++){if(r[n]===t)return!0}return!1}function l(e,t,n){for(var r=n||0;r<e.length;r++)if(c(t,e.charCodeAt(r)))return r;return-1}function u(e,t){for(var n=0,r=0;r<e.length;r++)t(e[r],r,e)&&(e[n]=e[r],n++);e.length=n}function d(e,t){var n;if(e){n=[];for(var r=0;r<e.length;r++)n.push(t(e[r],r))}return n}function p(e){var t;if(e){t=[];for(var n=0,r=e;n<r.length;n++){var i=r[n];i&&(N(i)?y(t,i):t.push(i))}}return t}function f(e,t){var n;if(e){n=[];for(var r=0;r<e.length;r++){var i=t(e[r],r);i&&(N(i)?y(n,i):n.push(i))}}return n}function _(e,t){if(e){if(!t)return e.length>0;for(var n=0,r=e;n<r.length;n++){if(t(r[n]))return!0}}return!1}function m(e,t){var n;if(e){n=[];e:for(var r=0,i=e;r<i.length;r++){for(var a=i[r],o=0,s=n;o<s.length;o++){var c=s[o];if(t?t(c,a):c===a)continue e}n.push(a)}}return n}function g(e,t,n){if(!e||!t)return e===t;if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++){if(!(n?n(e[r],t[r]):e[r]===t[r]))return!1}return!0}function h(e,t){return t<0?e.length+t:t}function y(e,t,n,r){if(void 0===t||0===t.length)return e;if(void 0===e)return t.slice(n,r);n=void 0===n?0:h(t,n),r=void 0===r?t.length:h(t,r);for(var i=n;i<r&&i<t.length;i++){void 0!==t[i]&&e.push(t[i])}return e}function v(e,t){return!c(e,t)&&(e.push(t),!0)}function b(e,t){if(e&&(t=h(e,t))<e.length)return e[t]}function x(e){return b(e,-1)}function k(e,t,n,r,i){if(e&&e.length>0){var a=e.length;if(a>0){var o=void 0===r||r<0?0:r,s=void 0===i||o+i>a-1?a-1:o+i,c=void 0;for(arguments.length<=2?(c=e[o],o++):c=n;o<=s;)c=t(c,e[o],o),o++;return c}}return n}e.toPath=function(e,t,n){return n(Z(e)?q(e):ne(e,t))},function(e){e[e.LessThan=-1]="LessThan",e[e.EqualTo=0]="EqualTo",e[e.GreaterThan=1]="GreaterThan"}(e.Comparison||(e.Comparison={})),e.length=function(e){return e?e.length:0},e.forEach=a,e.firstDefined=function(e,t){for(var n=0;n<e.length;n++){var r=t(e[n],n);if(void 0!==r)return r}},e.findAncestor=function(e,t){for(;e;){var n=t(e);if("quit"===n)return;if(n)return e;e=e.parent}},e.zipWith=function(e,t,n){var r=[];Le.assert(e.length===t.length);for(var i=0;i<e.length;i++)r.push(n(e[i],t[i],i));return r},e.zipToMap=function(e,t){Le.assert(e.length===t.length);for(var r=n(),i=0;i<e.length;++i)r.set(e[i],t[i]);return r},e.every=function(e,t){if(e)for(var n=0;n<e.length;n++)if(!t(e[n],n))return!1;return!0},e.find=o,e.findLast=function(e,t){for(var n=e.length-1;n>=0;n--){var r=e[n];if(t(r,n))return r}},e.findIndex=s,e.findMap=function(e,t){for(var n=0;n<e.length;n++){var r=t(e[n],n);if(r)return r}Le.fail()},e.contains=c,e.indexOf=function(e,t){if(e)for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1},e.indexOfAnyCharCode=l,e.countWhere=function(e,t){var n=0;if(e)for(var r=0;r<e.length;r++){t(e[r],r)&&n++}return n},e.filter=function(e,t){if(e){for(var n=e.length,r=0;r<n&&t(e[r]);)r++;if(r<n){var i=e.slice(0,r);for(r++;r<n;){var a=e[r];t(a)&&i.push(a),r++}return i}}return e},e.filterMutate=u,e.clear=function(e){e.length=0},e.map=d,e.sameMap=function(e,t){var n;if(e)for(var r=0;r<e.length;r++)if(n)n.push(t(e[r],r));else{var i=e[r],a=t(i,r);i!==a&&(n=e.slice(0,r)).push(a)}return n||e},e.flatten=p,e.flatMap=f,e.flatMapIter=function(e,t){for(var n=[];;){var r=e.next(),i=r.value;if(r.done)break;var a=t(i);a&&(N(a)?n.push.apply(n,a):n.push(a))}return n},e.sameFlatMap=function(e,t){var n;if(e)for(var r=0;r<e.length;r++){var i=e[r],a=t(i,r);(n||i!==a||N(a))&&(n||(n=e.slice(0,r)),N(a)?y(n,a):n.push(a))}return n||e},e.mapDefined=function(e,t){var n=[];if(e)for(var r=0;r<e.length;r++){var i=t(e[r],r);void 0!==i&&n.push(i)}return n},e.mapDefinedIter=function(e,t){for(var n=[];;){var r=e.next(),i=r.value;if(r.done)break;var a=t(i);void 0!==a&&n.push(a)}return n},e.span=function(e,t){if(e){for(var n=0;n<e.length;n++)if(!t(e[n],n))return[e.slice(0,n),e.slice(n)];return[e.slice(0),[]]}},e.spanMap=function(e,t,n){var r;if(e){r=[];for(var i=e.length,a=void 0,o=void 0,s=0,c=0;s<i;){for(;c<i;){if(o=t(e[c],c),0===c)a=o;else if(o!==a)break;c++}if(s<c){var l=n(e.slice(s,c),a,s,c);l&&r.push(l),s=c}a=o,c++}}return r},e.mapEntries=function(e,t){if(e){var r=n();return e.forEach((function(e,n){var i=t(n,e),a=i[0],o=i[1];r.set(a,o)})),r}},e.some=_,e.concatenate=function(e,t){return _(t)?_(e)?e.concat(t):t:e},e.deduplicate=m,e.arrayIsEqualTo=g,e.changesAffectModuleResolution=function(e,t){return!(e&&e.module===t.module&&e.moduleResolution===t.moduleResolution&&e.noResolve===t.noResolve&&e.target===t.target&&e.noLib===t.noLib&&e.jsx===t.jsx&&e.allowJs===t.allowJs&&e.rootDir===t.rootDir&&e.configFilePath===t.configFilePath&&e.baseUrl===t.baseUrl&&e.maxNodeModuleJsDepth===t.maxNodeModuleJsDepth&&g(e.lib,t.lib)&&g(e.typeRoots,t.typeRoots)&&g(e.rootDirs,t.rootDirs)&&E(e.paths,t.paths))},e.compact=function(e){var t;if(e)for(var n=0;n<e.length;n++){var r=e[n];!t&&r||(t||(t=e.slice(0,n)),r&&t.push(r))}return t||e},e.relativeComplement=function(e,t,n,r,i){if(void 0===n&&(n=R),void 0===r&&(r=0),void 0===i&&(i=0),!t||!e||0===t.length||0===e.length)return t;var a=[];e:for(;i<t.length;i++){t:for(;r<e.length;r++)switch(n(t[i],e[r])){case-1:break t;case 0:continue e;case 1:continue t}a.push(t[i])}return a},e.sum=function(e,t){for(var n=0,r=0,i=e;r<i.length;r++){n+=i[r][t]}return n},e.append=function(e,t){return void 0===t?e:void 0===e?[t]:(e.push(t),e)},e.addRange=y,e.pushIfUnique=v,e.appendIfUnique=function(e,t){return e?(v(e,t),e):[t]},e.stableSort=function(e,t){return void 0===t&&(t=R),e.map((function(e,t){return t})).sort((function(n,r){return t(e[n],e[r])||R(n,r)})).map((function(t){return e[t]}))},e.rangeEquals=function(e,t,n,r){for(;n<r;){if(e[n]!==t[n])return!1;n++}return!0},e.elementAt=b,e.firstOrUndefined=function(e){return b(e,0)},e.first=function(e){return Le.assert(0!==e.length),e[0]},e.lastOrUndefined=x,e.last=function(e){return Le.assert(0!==e.length),e[e.length-1]},e.singleOrUndefined=function(e){return e&&1===e.length?e[0]:void 0},e.singleOrMany=function(e){return e&&1===e.length?e[0]:e},e.replaceElement=function(e,t,n){var r=e.slice(0);return r[t]=n,r},e.binarySearch=function(e,t,n,r){if(!e||0===e.length)return-1;var i=r||0,a=e.length-1;for(n=void 0!==n?n:function(e,t){return e<t?-1:e>t?1:0};i<=a;){var o=i+(a-i>>1),s=e[o];if(0===n(s,t))return o;n(s,t)>0?a=o-1:i=o+1}return~i},e.reduceLeft=k,e.reduceRight=function(e,t,n,r,i){if(e){var a=e.length;if(a>0){var o=void 0===r||r>a-1?a-1:r,s=void 0===i||o-i<0?0:o-i,c=void 0;for(arguments.length<=2?(c=e[o],o--):c=n;o>=s;)c=t(c,e[o],o),o--;return c}}return n};var S=Object.prototype.hasOwnProperty;function T(e,t){return S.call(e,t)}function C(e,t){e.forEach((function(e,n){t.set(n,e)}))}function E(e,t,n){if(e===t)return!0;if(!e||!t)return!1;for(var r in e)if(S.call(e,r)){if(void 0===!S.call(t,r))return!1;if(n?!n(e[r],t[r]):e[r]!==t[r])return!1}for(var r in t)if(S.call(t,r)&&!S.call(e,r))return!1;return!0}function D(e,t,r){for(var i=n(),a=0,o=e;a<o.length;a++){var s=o[a];i.set(t(s),r?r(s):s)}return i}function A(e,t){var n=this.get(e);return n?n.push(t):this.set(e,n=[t]),n}function w(e,t){var n=this.get(e);n&&(He(n,t),n.length||this.delete(e))}function N(e){return Array.isArray?Array.isArray(e):e instanceof Array}function I(e){return"string"==typeof e}function P(e){var t;return function(){return e&&(t=e(),e=void 0),t}}function O(e,t,n,r,i){if(i){for(var a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];return function(e){return k(a,(function(e,t){return t(e)}),e)}}return r?function(i){return r(n(t(e(i))))}:n?function(r){return n(t(e(r)))}:t?function(n){return t(e(n))}:e?function(t){return e(t)}:function(e){return e}}function F(e,t,n){return n=n||0,e.replace(/{(\d+)}/g,(function(e,r){return t[+r+n]}))}function L(t){return e.localizedDiagnosticMessages&&e.localizedDiagnosticMessages[t.key]||t.message}function R(e,t){return e===t?0:void 0===e?-1:void 0===t?1:e<t?-1:1}function M(t,n,r){if(t===n)return 0;if(void 0===t)return-1;if(void 0===n)return 1;if(r){if(e.collator){var i=e.localeCompareIsCorrect?e.collator.compare(t,n):t.localeCompare(n,void 0,{usage:"sort",sensitivity:"accent"});return i<0?-1:i>0?1:0}if((t=t.toUpperCase())===(n=n.toUpperCase()))return 0}return t<n?-1:1}function U(e,t){return M(e,t,!0)}function B(e){return e.file?e.file.fileName:void 0}function j(e,t){return R(B(e),B(t))||R(e.start,t.start)||R(e.length,t.length)||R(e.code,t.code)||function(e,t){for(;e&&t;){var n=R(I(e)?e:e.messageText,I(t)?t:t.messageText);if(n)return n;e=I(e)?void 0:e.next,t=I(t)?void 0:t.next}if(!e&&!t)return 0;return e?1:-1}(e.messageText,t.messageText)||0}function $(e){if(e.length<2)return e;for(var t=[e[0]],n=e[0],r=1;r<e.length;r++){var i=e[r];0===j(i,n)||(t.push(i),n=i)}return t}function K(e){return e.replace(/\\/g,"/")}function z(e){if(47===e.charCodeAt(0)){if(47!==e.charCodeAt(1))return 1;var t=e.indexOf("/",2);if(t<0)return 2;var n=e.indexOf("/",t+1);return n<0?t+1:n+1}if(58===e.charCodeAt(1))return 47===e.charCodeAt(2)?3:2;if(0===e.lastIndexOf("file:///",0))return"file:///".length;var r=e.indexOf("://");return-1!==r?r+"://".length:0}e.hasProperty=T,e.getProperty=function(e,t){return S.call(e,t)?e[t]:void 0},e.getOwnKeys=function(e){var t=[];for(var n in e)S.call(e,n)&&t.push(n);return t},e.getOwnValues=function(e){var t=[];for(var n in e)S.call(e,n)&&t.push(e[n]);return t},e.arrayFrom=function(e,t){for(var n,r=[],i=e.next(),a=i.value,o=i.done;!o;a=(n=e.next()).value,o=n.done,n)r.push(t?t(a):a);return r},e.forEachEntry=function(e,t){for(var n,r=e.entries(),i=r.next(),a=i.value,o=i.done;!o;a=(n=r.next()).value,o=n.done,n){var s=a[0],c=t(a[1],s);if(c)return c}},e.forEachKey=function(e,t){for(var n,r=e.keys(),i=r.next(),a=i.value,o=i.done;!o;a=(n=r.next()).value,o=n.done,n){var s=t(a);if(s)return s}},e.copyEntries=C,e.assign=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0,i=t;r<i.length;r++){var a=i[r];for(var o in a)T(a,o)&&(e[o]=a[o])}return e},e.equalOwnProperties=E,e.arrayToMap=D,e.arrayToNumericMap=function(e,t){for(var n=[],r=0,i=e;r<i.length;r++){var a=i[r];n[t(a)]=a}return n},e.arrayToSet=function(e,t){return D(e,t||function(e){return e},(function(){return!0}))},e.cloneMap=function(e){var t=n();return C(e,t),t},e.clone=function(e){var t={};for(var n in e)S.call(e,n)&&(t[n]=e[n]);return t},e.extend=function(e,t){var n={};for(var r in t)S.call(t,r)&&(n[r]=t[r]);for(var r in e)S.call(e,r)&&(n[r]=e[r]);return n},e.createMultiMap=function(){var e=n();return e.add=A,e.remove=w,e},e.isArray=N,e.isString=I,e.tryCast=function(e,t){return void 0!==e&&t(e)?e:void 0},e.cast=function(e,t){if(void 0!==e&&t(e))return e;Le.fail("Invalid cast. The supplied value did not pass the test '"+Le.getFunctionName(t)+"'.")},e.noop=function(){},e.returnFalse=function(){return!1},e.returnTrue=function(){return!0},e.identity=function(e){return e},e.notImplemented=function(){throw new Error("Not implemented")},e.memoize=P,e.chain=function(e,t,n,r,i){if(i){for(var a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];return function(e){return O.apply(void 0,d(a,(function(t){return t(e)})))}}return r?function(i){return O(e(i),t(i),n(i),r(i))}:n?function(r){return O(e(r),t(r),n(r))}:t?function(n){return O(e(n),t(n))}:e?function(t){return O(e(t))}:function(e){return function(e){return e}}},e.compose=O,e.formatStringFromArgs=F,e.localizedDiagnosticMessages=void 0,e.getLocaleSpecificMessage=L,e.createFileDiagnostic=function(e,t,n,r){Le.assertGreaterThanOrEqual(t,0),Le.assertGreaterThanOrEqual(n,0),e&&(Le.assertLessThanOrEqual(t,e.text.length),Le.assertLessThanOrEqual(t+n,e.text.length));var i=L(r);return arguments.length>4&&(i=F(i,arguments,4)),{file:e,start:t,length:n,messageText:i,category:r.category,code:r.code}},e.formatMessage=function(e,t){var n=L(t);return arguments.length>2&&(n=F(n,arguments,2)),n},e.createCompilerDiagnostic=function(e){var t=L(e);return arguments.length>1&&(t=F(t,arguments,1)),{file:void 0,start:void 0,length:void 0,messageText:t,category:e.category,code:e.code}},e.createCompilerDiagnosticFromMessageChain=function(e){return{file:void 0,start:void 0,length:void 0,code:e.code,category:e.category,messageText:e.next?e:e.messageText}},e.chainDiagnosticMessages=function(e,t){var n=L(t);return arguments.length>2&&(n=F(n,arguments,2)),{messageText:n,category:t.category,code:t.code,next:e}},e.concatenateDiagnosticMessageChains=function(e,t){for(var n=e;n.next;)n=n.next;return n.next=t,e},e.compareValues=R,e.compareStrings=M,e.compareStringsCaseInsensitive=U,e.compareDiagnostics=j,e.sortAndDeduplicateDiagnostics=function(e){return $(e.sort(j))},e.deduplicateSortedDiagnostics=$,e.normalizeSlashes=K,e.getRootLength=z,e.directorySeparator="/";function J(t,n){for(var r=[],i=0,a=t.substr(n).split(e.directorySeparator);i<a.length;i++){var o=a[i];"."!==o&&(".."===o&&r.length>0&&".."!==x(r)?r.pop():o&&r.push(o))}return r}function q(e){return V(e).path}function V(t){var n=z(t=K(t)),r=t.substr(0,n),i=J(t,n);if(i.length){var a=r+i.join(e.directorySeparator);return{path:H(t)?a+e.directorySeparator:a,parts:i}}return{path:r,parts:i}}function H(e){return 47===e.charCodeAt(e.length-1)}function G(t){return t.substr(0,Math.max(z(t),t.lastIndexOf(e.directorySeparator)))}function W(e){return e&&!Z(e)&&pe(e,"://")}function Q(e){return e.target||0}function Y(t){return"number"==typeof t.module?t.module:Q(t)>=2?e.ModuleKind.ES2015:e.ModuleKind.CommonJS}function X(e){for(var t=!1,n=0;n<e.length;n++)if(42===e.charCodeAt(n)){if(t)return!1;t=!0}return!0}function Z(e){return e&&0!==z(e)}function ee(e,t){var n=J(e,t);return[e.substr(0,t)].concat(n)}function te(e,t){var n=z(e=K(e));return 0===n&&(n=z(e=se(K(t),e))),ee(e,n)}function ne(e,t){return re(te(e,t))}function re(t){if(t&&t.length)return t[0]+t.slice(1).join(e.directorySeparator)}function ie(t,n){return W(t)?function(t){for(var n=t.length,r=t.indexOf("://")+"://".length;r<n&&47===t.charCodeAt(r);)r++;if(r===n)return[t];var i=t.indexOf(e.directorySeparator,r);return-1!==i?ee(t,r=i+1):[t+e.directorySeparator]}(t):te(t,n)}function ae(t,n,r,i,a){var o,s=ie(n,r),c=ie(t,r);for(c.length>1&&""===x(c)&&c.pop(),o=0;o<s.length&&o<c.length&&i(c[o])===i(s[o]);o++);if(o){for(var l="",u=s.slice(o,s.length);o<c.length;o++)""!==c[o]&&(l=l+".."+e.directorySeparator);return l+u.join(e.directorySeparator)}var d=re(s);return a&&Z(d)&&(d="file:///"+d),d}function oe(t){if(void 0!==t){var n=t.lastIndexOf(e.directorySeparator);return n<0?t:t.substring(n+1)}}function se(t,n){return t&&t.length?n&&n.length?0!==z(n)?n:t.charAt(t.length-1)===e.directorySeparator?t+n:t+e.directorySeparator+n:t:n}function ce(t){return t.charAt(t.length-1)===e.directorySeparator?t.substr(0,t.length-1):t}function le(e,t,n,r){if(void 0===e||void 0===t)return!1;if(e===t)return!0;if((e=ce(e))===(t=ce(t)))return!0;var i=te(e,n),a=te(t,n);if(a.length<i.length)return!1;for(var o=0;o<i.length;o++){if(0!==M(i[o],a[o],r))return!1}return!0}function ue(e,t){return 0===e.lastIndexOf(t,0)}function de(e,t){var n=e.length-t.length;return n>=0&&e.indexOf(t,n)===n}function pe(e,t){return-1!==e.indexOf(t)}function fe(e){return pe(oe(e),".")}function _e(e,t){return e.length>t.length&&de(e,t)}function me(e,t){for(var n=0,r=t;n<r.length;n++){if(_e(e,r[n]))return!0}return!1}e.normalizePath=q,e.normalizePathAndParts=V,e.pathEndsWithDirectorySeparator=H,e.getDirectoryPath=G,e.isUrl=W,e.pathIsRelative=function(e){return/^\.\.?($|[\\/])/.test(e)},e.moduleHasNonRelativeName=function(t){return!e.isExternalModuleNameRelative(t)},e.getEmitScriptTarget=Q,e.getEmitModuleKind=Y,e.getEmitModuleResolutionKind=function(t){var n=t.moduleResolution;return void 0===n&&(n=Y(t)===e.ModuleKind.CommonJS?e.ModuleResolutionKind.NodeJs:e.ModuleResolutionKind.Classic),n},e.hasZeroOrOneAsteriskCharacter=X,e.isRootedDiskPath=Z,e.convertToRelativePath=function(e,t,n){return Z(e)?ae(t,e,t,n,!1):e},e.getNormalizedPathComponents=te,e.getNormalizedAbsolutePath=ne,e.getNormalizedPathFromPathComponents=re,e.getRelativePathToDirectoryOrUrl=ae,e.getBaseFileName=oe,e.combinePaths=se,e.removeTrailingDirectorySeparator=ce,e.ensureTrailingDirectorySeparator=function(t){return t.charAt(t.length-1)!==e.directorySeparator?t+e.directorySeparator:t},e.comparePaths=function(e,t,n,r){if(e===t)return 0;if(void 0===e)return-1;if(void 0===t)return 1;e=ce(e),t=ce(t);for(var i=te(e,n),a=te(t,n),o=Math.min(i.length,a.length),s=0;s<o;s++){var c=M(i[s],a[s],r);if(0!==c)return c}return R(i.length,a.length)},e.containsPath=le,e.startsWith=ue,e.removePrefix=function(e,t){return ue(e,t)?e.substr(t.length):e},e.endsWith=de,e.stringContains=pe,e.hasExtension=fe,e.fileExtensionIs=_e,e.fileExtensionIsOneOf=me;var ge=/[^\w\s\/]/g,he=[42,63];e.commonPackageFolders=["node_modules","bower_components","jspm_packages"];var ye="(?!("+e.commonPackageFolders.join("|")+")(/|$))",ve={singleAsteriskRegexFragment:"([^./]|(\\.(?!min\\.js$))?)*",doubleAsteriskRegexFragment:"(/"+ye+"[^/.][^/]*)*?",replaceWildcardCharacter:function(e){return Ee(e,ve.singleAsteriskRegexFragment)}},be={singleAsteriskRegexFragment:"[^/]*",doubleAsteriskRegexFragment:"(/"+ye+"[^/.][^/]*)*?",replaceWildcardCharacter:function(e){return Ee(e,be.singleAsteriskRegexFragment)}},xe={singleAsteriskRegexFragment:"[^/]*",doubleAsteriskRegexFragment:"(/.+?)?",replaceWildcardCharacter:function(e){return Ee(e,xe.singleAsteriskRegexFragment)}},ke={files:ve,directories:be,exclude:xe};function Se(e,t,n){var r=Te(e,t,n);if(r&&r.length)return"^("+r.map((function(e){return"("+e+")"})).join("|")+")"+("exclude"===n?"($|/)":"$")}function Te(t,n,r){if(void 0!==t&&0!==t.length)return f(t,(function(t){return t&&function(t,n,r,i){var a=i.singleAsteriskRegexFragment,o=i.doubleAsteriskRegexFragment,s=i.replaceWildcardCharacter,c="",l=!1,u=!1,d=te(t,n),p=x(d);if("exclude"!==r&&"**"===p)return;d[0]=ce(d[0]),Ce(p)&&d.push("**","*");for(var f=0,_=0,m=d;_<m.length;_++){var g=m[_];if("**"===g){if(l)return;c+=o,l=!0}else if("directories"===r&&(c+="(",f++),u&&(c+=e.directorySeparator),"exclude"!==r){var h="";42===g.charCodeAt(0)?(h+="([^./]"+a+")?",g=g.substr(1)):63===g.charCodeAt(0)&&(h+="[^./]",g=g.substr(1)),(h+=g.replace(ge,s))!==g&&(c+=ye),c+=h}else c+=g.replace(ge,s);u=!0}for(;f>0;)c+=")?",f--;return c}(t,n,r,ke[r])}))}function Ce(e){return!/[.*?]/.test(e)}function Ee(e,t){return"*"===e?t:"?"===e?"[^/]":"\\"+e}function De(e,t,n,r,i){e=q(e);var a=se(i=q(i),e);return{includeFilePatterns:d(Te(n,a,"files"),(function(e){return"^"+e+"$"})),includeFilePattern:Se(n,a,"files"),includeDirectoryPattern:Se(n,a,"directories"),excludePattern:Se(t,a,"exclude"),basePaths:we(e,n,r)}}function Ae(e,t,n,r,i,a,o,c){for(var l=De(e=q(e),n,r,i,a=q(a)),u=i?"":"i",d=l.includeFilePatterns&&l.includeFilePatterns.map((function(e){return new RegExp(e,u)})),f=l.includeDirectoryPattern&&new RegExp(l.includeDirectoryPattern,u),_=l.excludePattern&&new RegExp(l.excludePattern,u),m=d?d.map((function(){return[]})):[[]],g=i?M:U,h=0,y=l.basePaths;h<y.length;h++){var v=y[h];b(v,se(a,v),o)}return p(m);function b(e,n,r){for(var i=c(e),a=i.files,o=i.directories,l=function(r){var i=se(e,r),a=se(n,r);if(t&&!me(i,t))return"continue";if(_&&_.test(a))return"continue";if(d){var o=s(d,(function(e){return e.test(a)}));-1!==o&&m[o].push(i)}else m[0].push(i)},u=0,p=a=a.slice().sort(g);u<p.length;u++){l(v=p[u])}if(void 0===r||0!=--r)for(var h=0,y=o=o.slice().sort(g);h<y.length;h++){var v=y[h],x=se(e,v),k=se(n,v);f&&!f.test(k)||_&&_.test(k)||b(x,k,r)}}}function we(t,n,r){var i=[t];if(n){for(var a=[],o=0,s=n;o<s.length;o++){var c=s[o],l=Z(c)?c:q(se(t,c));a.push(Ne(l))}a.sort(r?M:U);for(var u=function(n){e.every(i,(function(e){return!le(e,n,t,!r)}))&&i.push(n)},d=0,p=a;d<p.length;d++){u(p[d])}}return i}function Ne(t){var n=l(t,he);return n<0?fe(t)?ce(G(t)):t:t.substring(0,t.lastIndexOf(e.directorySeparator,n))}function Ie(e){switch(e.substr(e.lastIndexOf(".")).toLowerCase()){case".js":return 1;case".jsx":return 2;case".ts":return 3;case".tsx":return 4;case".json":return 6;default:return 0}}e.getRegularExpressionForWildcard=Se,e.isImplicitGlob=Ce,e.getFileMatcherPatterns=De,e.matchFiles=Ae,e.ensureScriptKind=function(e,t){return t||Ie(e)||3},e.getScriptKindFromFileName=Ie,e.supportedTypeScriptExtensions=[".ts",".tsx",".d.ts"],e.supportedTypescriptExtensionsForExtractExtension=[".d.ts",".ts",".tsx"],e.supportedJavascriptExtensions=[".js",".jsx"];var Pe=e.supportedTypeScriptExtensions.concat(e.supportedJavascriptExtensions);function Oe(t,n){var r=t&&t.allowJs;return n&&0!==n.length&&r?m(Pe.concat(n.map((function(e){return e.extension})))):r?Pe:e.supportedTypeScriptExtensions}function Fe(e,t){return e<2?0:e<t.length?2:t.length}e.getSupportedExtensions=Oe,e.hasJavaScriptFileExtension=function(t){return a(e.supportedJavascriptExtensions,(function(e){return _e(t,e)}))},e.hasTypeScriptFileExtension=function(t){return a(e.supportedTypeScriptExtensions,(function(e){return _e(t,e)}))},e.isSupportedSourceFileName=function(e,t,n){if(!e)return!1;for(var r=0,i=Oe(t,n);r<i.length;r++){if(_e(e,i[r]))return!0}return!1},function(e){e[e.TypeScriptFiles=0]="TypeScriptFiles",e[e.DeclarationAndJavaScriptFiles=2]="DeclarationAndJavaScriptFiles",e[e.Highest=0]="Highest",e[e.Lowest=2]="Lowest"}(e.ExtensionPriority||(e.ExtensionPriority={})),e.getExtensionPriority=function(e,t){for(var n=t.length-1;n>=0;n--)if(_e(e,t[n]))return Fe(n,t);return 0},e.adjustExtensionPriority=Fe,e.getNextLowestExtensionPriority=function(e,t){return e<2?2:t.length};var Le,Re=[".d.ts",".ts",".js",".tsx",".jsx"];function Me(e){for(var t=0,n=Re;t<n.length;t++){var r=Ue(e,n[t]);if(void 0!==r)return r}return e}function Ue(e,t){return _e(e,t)?Be(e,t):void 0}function Be(e,t){return e.substring(0,e.length-t.length)}function je(e,t){this.flags=e,this.escapedName=t,this.declarations=void 0}function $e(e,t){this.flags=t,Le.isDebugging&&(this.checker=e)}function Ke(){}function ze(e,t,n){this.id=0,this.kind=e,this.pos=t,this.end=n,this.flags=0,this.modifierFlagsCache=0,this.transformFlags=0,this.parent=void 0,this.original=void 0}function Je(e,t,n){this.fileName=e,this.text=t,this.skipTrivia=n||function(e){return e}}function qe(e,t){for(var n=t;n<e.length-1;n++)e[n]=e[n+1];e.pop()}function Ve(e,t){e[t]=e[e.length-1],e.pop()}function He(e,t){!function(e,t){for(var n=0;n<e.length;n++)if(t(e[n])){Ve(e,n);break}}(e,(function(e){return e===t}))}function Ge(e){return e?function(e){return e}:function(e){return e.toLowerCase()}}function We(e,t,n){for(var r=void 0,i=-1,a=0,o=e;a<o.length;a++){var s=o[a],c=t(s);Qe(c,n)&&c.prefix.length>i&&(i=c.prefix.length,r=s)}return r}function Qe(e,t){var n=e.prefix,r=e.suffix;return t.length>=n.length+r.length&&ue(t,n)&&de(t,r)}function Ye(e){Le.assert(X(e));var t=e.indexOf("*");return-1===t?void 0:{prefix:e.substr(0,t),suffix:e.substr(t+1)}}function Xe(t){return o(e.supportedTypescriptExtensionsForExtractExtension,(function(e){return _e(t,e)}))||o(e.supportedJavascriptExtensions,(function(e){return _e(t,e)}))}e.removeFileExtension=Me,e.tryRemoveExtension=Ue,e.removeExtension=Be,e.changeExtension=function(e,t){return Me(e)+t},e.objectAllocator={getNodeConstructor:function(){return ze},getTokenConstructor:function(){return ze},getIdentifierConstructor:function(){return ze},getSourceFileConstructor:function(){return ze},getSymbolConstructor:function(){return je},getTypeConstructor:function(){return $e},getSignatureConstructor:function(){return Ke},getSourceMapSourceConstructor:function(){return Je}},function(e){e[e.None=0]="None",e[e.Normal=1]="Normal",e[e.Aggressive=2]="Aggressive",e[e.VeryAggressive=3]="VeryAggressive"}(e.AssertionLevel||(e.AssertionLevel={})),function(e){function t(e,n){var r=new Error(e?"Debug Failure. "+e:"Debug Failure.");throw Error.captureStackTrace&&Error.captureStackTrace(r,n||t),r}e.currentAssertionLevel=0,e.isDebugging=!1,e.shouldAssert=function(t){return e.currentAssertionLevel>=t},e.assert=function e(n,r,i,a){n||(i&&(r+="\r\nVerbose Debug Information: "+("string"==typeof i?i:i())),t(r?"False expression: "+r:"False expression.",a||e))},e.assertEqual=function(e,n,r,i){e!==n&&t("Expected "+e+" === "+n+". "+(r?i?r+" "+i:r:""))},e.assertLessThan=function(e,n,r){e>=n&&t("Expected "+e+" < "+n+". "+(r||""))},e.assertLessThanOrEqual=function(e,n){e>n&&t("Expected "+e+" <= "+n)},e.assertGreaterThanOrEqual=function(e,n){e<n&&t("Expected "+e+" >= "+n)},e.fail=t,e.assertNever=function e(n,r,i){return t(r||"Illegal value: "+n,i||e)},e.getFunctionName=function(e){if("function"!=typeof e)return"";if(e.hasOwnProperty("name"))return e.name;var t=Function.prototype.toString.call(e),n=/^function\s+([\w\$]+)\s*\(/.exec(t);return n?n[1]:""}}(Le=e.Debug||(e.Debug={})),e.orderedRemoveItem=function(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return qe(e,n),!0;return!1},e.orderedRemoveItemAt=qe,e.unorderedRemoveItemAt=Ve,e.unorderedRemoveItem=He,e.createGetCanonicalFileName=Ge,e.matchPatternOrExact=function(e,t){for(var n=[],r=0,i=e;r<i.length;r++){var a=i[r],o=Ye(a);if(o)n.push(o);else if(a===t)return a}return We(n,(function(e){return e}),t)},e.patternText=function(e){return e.prefix+"*"+e.suffix},e.matchedText=function(e,t){return Le.assert(Qe(e,t)),t.substr(e.prefix.length,t.length-e.suffix.length)},e.findBestPatternMatch=We,e.tryParsePattern=Ye,e.positionIsSynthesized=function(e){return!(e>=0)},e.extensionIsTypeScript=function(e){return".ts"===e||".tsx"===e||".d.ts"===e},e.extensionFromPath=function(e){var t=Xe(e);if(void 0!==t)return t;Le.fail("File "+e+" has unknown extension.")},e.isAnySupportedFileExtension=function(e){return void 0!==Xe(e)},e.tryGetExtensionFromPath=Xe,e.getAnyExtensionFromPath=function(e){var t=oe(e),n=t.lastIndexOf(".");if(n>=0)return t.substring(n)},e.isCheckJsEnabledForFile=function(e,t){return e.checkJsDirective?e.checkJsDirective.enabled:t.checkJs},e.and=function(e,t){return function(n){return e(n)&&t(n)}},e.assertTypeIsNever=function(e){},e.createCachedDirectoryStructureHost=function(t){var r=n(),i=P((function(){return t.getCurrentDirectory()})),a=Ge(t.useCaseSensitiveFileNames);return{useCaseSensitiveFileNames:t.useCaseSensitiveFileNames,newLine:t.newLine,readFile:function(e,n){return t.readFile(e,n)},write:function(e){return t.write(e)},writeFile:function(e,n,r){var i=c(o(e));i&&y(i,l(e),!0);return t.writeFile(e,n,r)},fileExists:function(e){var n=c(o(e));return n&&g(n.files,l(e))||t.fileExists(e)},directoryExists:function(e){var n=o(e);return r.has(n)||t.directoryExists(e)},createDirectory:function(e){var n=c(o(e)),r=l(e);n&&h(n.directories,r,!0);t.createDirectory(e)},getCurrentDirectory:i,getDirectories:function(e){var n=o(e),r=f(e,n);if(r)return r.directories.slice();return t.getDirectories(e)},readDirectory:function(e,n,r,a,c){var l=o(e),u=f(e,l);if(u)return Ae(e,n,r,a,t.useCaseSensitiveFileNames,i(),c,(function(e){var t=o(e);if(t===l)return u;return s(t)||p(e,t)}));return t.readDirectory(e,n,r,a,c)},addOrDeleteFileOrDirectory:function(e,n){if(s(n))t.directoryExists(e)||r.delete(n);else{var i=c(n);if(i){var a=l(e);if(i){var o={fileExists:t.fileExists(n),directoryExists:t.directoryExists(n)};return y(i,a,o.fileExists),h(i.directories,a,o.directoryExists),o}}}},addOrDeleteFile:function(t,n,r){if(r===e.FileWatcherEventKind.Changed)return;var i=c(n);i&&y(i,l(t),r===e.FileWatcherEventKind.Created)},clearCache:function(){r.clear()},exit:function(e){return t.exit(e)}};function o(t){return e.toPath(t,i(),a)}function s(e){return r.get(e)}function c(e){return s(G(e))}function l(e){return oe(q(e))}function p(e,n){var i={files:d(t.readDirectory(e,void 0,void 0,["*.*"]),l)||[],directories:t.getDirectories(e)||[]};return r.set(n,i),i}function f(e,t){var n=s(t);if(n)return n;try{return p(e,t)}catch(e){return void Le.assert(!r.has(t))}}function m(e,t){return a(e)===a(t)}function g(e,t){return _(e,(function(e){return m(e,t)}))}function h(e,t,n){if(g(e,t)){if(!n)return u(e,(function(e){return!m(e,t)}))}else if(n)return e.push(t)}function y(e,t,n){h(e.files,t,n)}}}(ts||(ts={})),function(e){var t;function n(){if("undefined"!=typeof process){var e=process.version;if(e){var t=e.indexOf(".");if(-1!==t)return parseInt(e.substring(1,t))}}}e.setStackTraceLimit=function(){Error.stackTraceLimit<100&&(Error.stackTraceLimit=100)},function(e){e[e.Created=0]="Created",e[e.Changed=1]="Changed",e[e.Deleted=2]="Deleted"}(t=e.FileWatcherEventKind||(e.FileWatcherEventKind={})),e.getNodeMajorVersion=n,e.sys=function(){function r(t,n){var i=e.getDirectoryPath(t),a=""!==i&&t!==i&&!n.directoryExists(i);a&&r(i,n),!a&&n.directoryExists(t)||n.createDirectory(t)}var i,a;if("undefined"!=typeof ChakraHost?(a=ChakraHost.realpath&&function(e){return ChakraHost.realpath(e)},i={newLine:ChakraHost.newLine||"\r\n",args:ChakraHost.args,useCaseSensitiveFileNames:!!ChakraHost.useCaseSensitiveFileNames,write:ChakraHost.echo,readFile:function(e,t){return ChakraHost.readFile(e)},writeFile:function(e,t,n){n&&(t="\ufeff"+t),ChakraHost.writeFile(e,t)},resolvePath:ChakraHost.resolvePath,fileExists:ChakraHost.fileExists,directoryExists:ChakraHost.directoryExists,createDirectory:ChakraHost.createDirectory,getExecutingFilePath:function(){return ChakraHost.executingFile},getCurrentDirectory:function(){return ChakraHost.currentDirectory},getDirectories:ChakraHost.getDirectories,getEnvironmentVariable:ChakraHost.getEnvironmentVariable||function(){return""},readDirectory:function(t,n,r,i,a){var o=e.getFileMatcherPatterns(t,r,i,!!ChakraHost.useCaseSensitiveFileNames,ChakraHost.currentDirectory);return ChakraHost.readDirectory(t,n,o.basePaths,o.excludePattern,o.includeFilePattern,o.includeDirectoryPattern)},exit:ChakraHost.quit,realpath:a}):"undefined"!=typeof process&&process.nextTick&&!process.browser&&"undefined"!=typeof require&&(i=function(){var r,i,a=require("fs"),o=require("path"),s=require("os"),c=require("crypto"),l=process.env.TSC_NONPOLLING_WATCHER,u=function(){var n=e.createMap(),r=e.createMultiMap();return{addFile:function(t,n){return a(t,n),i(e.getDirectoryPath(t)),{fileName:t,callback:n}},removeFile:function(t){var i,a,o,s,c;s=t.fileName,c=t.callback,r.remove(s,c),i=t.fileName,a=e.getDirectoryPath(i),(o=n.get(a))&&(o.referenceCount-=1,o.referenceCount<=0&&(o.close(),n.delete(a)))}};function i(i){var a=n.get(i);a?a.referenceCount+=1:((a=m(i||".",(function(n,a){return function(n,i,a){var o=e.isString(i)?e.getNormalizedAbsolutePath(i,a):void 0;if("change"===n||"rename"===n){var s=r.get(o);if(s)for(var c=0,l=s;c<l.length;c++)(0,l[c])(o,t.Changed)}}(n,a,i)}))).referenceCount=1,n.set(i,a))}function a(e,t){r.add(e,t)}}(),d=n()>=4,p=s.platform(),f="win32"!==p&&"win64"!==p&&!y((r=__filename,r.replace(/\w/g,(function(e){var t=e.toUpperCase();return e===t?e.toLowerCase():t}))));function _(e,n,r){return a.watchFile(e,{persistent:!0,interval:r||250},i),{close:function(){return a.unwatchFile(e,i)}};function i(r,i){var a=0==+r.mtime,o=0==+i.mtime,s=a&&!o,c=!a&&o?t.Created:s?t.Deleted:t.Changed;c===t.Changed&&+r.mtime<=+i.mtime||n(e,c)}}function m(e,n,r){var i,o=v(e)?s():c();return{close:function(){o.close()}};function s(){void 0===i&&(i=!d||"win32"!==process.platform&&"darwin"!==process.platform?{persistent:!0}:{persistent:!0,recursive:!!r});var t=a.watch(e,i,n);return t.on("error",(function(){v(e)||(o=c(),n("rename",""))})),t}function c(){return _(e,(function(r,i){i===t.Created&&v(e)&&(o.close(),o=s(),n("rename",""))}))}}function g(t){try{for(var n=a.readdirSync(t||".").sort(),r=[],i=[],o=0,s=n;o<s.length;o++){var c=s[o];if("."!==c&&".."!==c){var l=e.combinePaths(t,c),u=void 0;try{u=a.statSync(l)}catch(e){continue}u.isFile()?r.push(c):u.isDirectory()&&i.push(c)}}return{files:r,directories:i}}catch(e){return{files:[],directories:[]}}}function h(e,t){try{var n=a.statSync(e);switch(t){case 0:return n.isFile();case 1:return n.isDirectory()}}catch(e){return!1}}function y(e){return h(e,0)}function v(e){return h(e,1)}!function(e){e[e.File=0]="File",e[e.Directory=1]="Directory"}(i||(i={}));var b={args:process.argv.slice(2),newLine:s.EOL,useCaseSensitiveFileNames:f,write:function(e){process.stdout.write(e)},readFile:function(e,t){if(y(e)){var n=a.readFileSync(e),r=n.length;if(r>=2&&254===n[0]&&255===n[1]){r&=-2;for(var i=0;i<r;i+=2){var o=n[i];n[i]=n[i+1],n[i+1]=o}return n.toString("utf16le",2)}return r>=2&&255===n[0]&&254===n[1]?n.toString("utf16le",2):r>=3&&239===n[0]&&187===n[1]&&191===n[2]?n.toString("utf8",3):n.toString("utf8")}},writeFile:function(e,t,n){var r;n&&(t="\ufeff"+t);try{r=a.openSync(e,"w"),a.writeSync(r,t,void 0,"utf8")}finally{void 0!==r&&a.closeSync(r)}},watchFile:function(e,t,n){if(l){var r=u.addFile(e,t);return{close:function(){return u.removeFile(r)}}}return _(e,t,n)},watchDirectory:function(t,n,r){return m(t,(function(r,i){"rename"===r&&n(i?e.normalizePath(e.combinePaths(t,i)):i)}),r)},resolvePath:function(e){return o.resolve(e)},fileExists:y,directoryExists:v,createDirectory:function(e){b.directoryExists(e)||a.mkdirSync(e)},getExecutingFilePath:function(){return __filename},getCurrentDirectory:function(){return process.cwd()},getDirectories:function(t){return e.filter(a.readdirSync(t),(function(n){return h(e.combinePaths(t,n),1)}))},getEnvironmentVariable:function(e){return process.env[e]||""},readDirectory:function(t,n,r,i,a){return e.matchFiles(t,n,r,i,f,process.cwd(),a,g)},getModifiedTime:function(e){try{return a.statSync(e).mtime}catch(e){return}},createHash:function(e){var t=c.createHash("md5");return t.update(e),t.digest("hex")},getMemoryUsage:function(){return global.gc&&global.gc(),process.memoryUsage().heapUsed},getFileSize:function(e){try{var t=a.statSync(e);if(t.isFile())return t.size}catch(e){}return 0},exit:function(e){process.exit(e)},realpath:function(e){return a.realpathSync(e)},debugMode:e.some(process.execArgv,(function(e){return/^--(inspect|debug)(-brk)?(=\d+)?$/i.test(e)})),tryEnableSourceMapsForHost:function(){try{require("source-map-support").install()}catch(e){}},setTimeout:setTimeout,clearTimeout:clearTimeout};return b}()),i){var o=i.writeFile;i.writeFile=function(t,n,a){var s=e.getDirectoryPath(e.normalizeSlashes(t));s&&!i.directoryExists(s)&&r(s,i),o.call(i,t,n,a)}}return i}(),e.sys&&e.sys.getEnvironmentVariable&&(e.Debug.currentAssertionLevel=/^development$/i.test(e.sys.getEnvironmentVariable("NODE_ENV"))?1:0),e.sys&&e.sys.debugMode&&(e.Debug.isDebugging=!0)}(ts||(ts={})),function(e){function t(e,t,n,r){return{code:e,category:t,key:n,message:r}}e.Diagnostics={Unterminated_string_literal:t(1002,e.DiagnosticCategory.Error,"Unterminated_string_literal_1002","Unterminated string literal."),Identifier_expected:t(1003,e.DiagnosticCategory.Error,"Identifier_expected_1003","Identifier expected."),_0_expected:t(1005,e.DiagnosticCategory.Error,"_0_expected_1005","'{0}' expected."),A_file_cannot_have_a_reference_to_itself:t(1006,e.DiagnosticCategory.Error,"A_file_cannot_have_a_reference_to_itself_1006","A file cannot have a reference to itself."),Trailing_comma_not_allowed:t(1009,e.DiagnosticCategory.Error,"Trailing_comma_not_allowed_1009","Trailing comma not allowed."),Asterisk_Slash_expected:t(1010,e.DiagnosticCategory.Error,"Asterisk_Slash_expected_1010","'*/' expected."),Unexpected_token:t(1012,e.DiagnosticCategory.Error,"Unexpected_token_1012","Unexpected token."),A_rest_parameter_must_be_last_in_a_parameter_list:t(1014,e.DiagnosticCategory.Error,"A_rest_parameter_must_be_last_in_a_parameter_list_1014","A rest parameter must be last in a parameter list."),Parameter_cannot_have_question_mark_and_initializer:t(1015,e.DiagnosticCategory.Error,"Parameter_cannot_have_question_mark_and_initializer_1015","Parameter cannot have question mark and initializer."),A_required_parameter_cannot_follow_an_optional_parameter:t(1016,e.DiagnosticCategory.Error,"A_required_parameter_cannot_follow_an_optional_parameter_1016","A required parameter cannot follow an optional parameter."),An_index_signature_cannot_have_a_rest_parameter:t(1017,e.DiagnosticCategory.Error,"An_index_signature_cannot_have_a_rest_parameter_1017","An index signature cannot have a rest parameter."),An_index_signature_parameter_cannot_have_an_accessibility_modifier:t(1018,e.DiagnosticCategory.Error,"An_index_signature_parameter_cannot_have_an_accessibility_modifier_1018","An index signature parameter cannot have an accessibility modifier."),An_index_signature_parameter_cannot_have_a_question_mark:t(1019,e.DiagnosticCategory.Error,"An_index_signature_parameter_cannot_have_a_question_mark_1019","An index signature parameter cannot have a question mark."),An_index_signature_parameter_cannot_have_an_initializer:t(1020,e.DiagnosticCategory.Error,"An_index_signature_parameter_cannot_have_an_initializer_1020","An index signature parameter cannot have an initializer."),An_index_signature_must_have_a_type_annotation:t(1021,e.DiagnosticCategory.Error,"An_index_signature_must_have_a_type_annotation_1021","An index signature must have a type annotation."),An_index_signature_parameter_must_have_a_type_annotation:t(1022,e.DiagnosticCategory.Error,"An_index_signature_parameter_must_have_a_type_annotation_1022","An index signature parameter must have a type annotation."),An_index_signature_parameter_type_must_be_string_or_number:t(1023,e.DiagnosticCategory.Error,"An_index_signature_parameter_type_must_be_string_or_number_1023","An index signature parameter type must be 'string' or 'number'."),readonly_modifier_can_only_appear_on_a_property_declaration_or_index_signature:t(1024,e.DiagnosticCategory.Error,"readonly_modifier_can_only_appear_on_a_property_declaration_or_index_signature_1024","'readonly' modifier can only appear on a property declaration or index signature."),Accessibility_modifier_already_seen:t(1028,e.DiagnosticCategory.Error,"Accessibility_modifier_already_seen_1028","Accessibility modifier already seen."),_0_modifier_must_precede_1_modifier:t(1029,e.DiagnosticCategory.Error,"_0_modifier_must_precede_1_modifier_1029","'{0}' modifier must precede '{1}' modifier."),_0_modifier_already_seen:t(1030,e.DiagnosticCategory.Error,"_0_modifier_already_seen_1030","'{0}' modifier already seen."),_0_modifier_cannot_appear_on_a_class_element:t(1031,e.DiagnosticCategory.Error,"_0_modifier_cannot_appear_on_a_class_element_1031","'{0}' modifier cannot appear on a class element."),super_must_be_followed_by_an_argument_list_or_member_access:t(1034,e.DiagnosticCategory.Error,"super_must_be_followed_by_an_argument_list_or_member_access_1034","'super' must be followed by an argument list or member access."),Only_ambient_modules_can_use_quoted_names:t(1035,e.DiagnosticCategory.Error,"Only_ambient_modules_can_use_quoted_names_1035","Only ambient modules can use quoted names."),Statements_are_not_allowed_in_ambient_contexts:t(1036,e.DiagnosticCategory.Error,"Statements_are_not_allowed_in_ambient_contexts_1036","Statements are not allowed in ambient contexts."),A_declare_modifier_cannot_be_used_in_an_already_ambient_context:t(1038,e.DiagnosticCategory.Error,"A_declare_modifier_cannot_be_used_in_an_already_ambient_context_1038","A 'declare' modifier cannot be used in an already ambient context."),Initializers_are_not_allowed_in_ambient_contexts:t(1039,e.DiagnosticCategory.Error,"Initializers_are_not_allowed_in_ambient_contexts_1039","Initializers are not allowed in ambient contexts."),_0_modifier_cannot_be_used_in_an_ambient_context:t(1040,e.DiagnosticCategory.Error,"_0_modifier_cannot_be_used_in_an_ambient_context_1040","'{0}' modifier cannot be used in an ambient context."),_0_modifier_cannot_be_used_with_a_class_declaration:t(1041,e.DiagnosticCategory.Error,"_0_modifier_cannot_be_used_with_a_class_declaration_1041","'{0}' modifier cannot be used with a class declaration."),_0_modifier_cannot_be_used_here:t(1042,e.DiagnosticCategory.Error,"_0_modifier_cannot_be_used_here_1042","'{0}' modifier cannot be used here."),_0_modifier_cannot_appear_on_a_data_property:t(1043,e.DiagnosticCategory.Error,"_0_modifier_cannot_appear_on_a_data_property_1043","'{0}' modifier cannot appear on a data property."),_0_modifier_cannot_appear_on_a_module_or_namespace_element:t(1044,e.DiagnosticCategory.Error,"_0_modifier_cannot_appear_on_a_module_or_namespace_element_1044","'{0}' modifier cannot appear on a module or namespace element."),A_0_modifier_cannot_be_used_with_an_interface_declaration:t(1045,e.DiagnosticCategory.Error,"A_0_modifier_cannot_be_used_with_an_interface_declaration_1045","A '{0}' modifier cannot be used with an interface declaration."),A_declare_modifier_is_required_for_a_top_level_declaration_in_a_d_ts_file:t(1046,e.DiagnosticCategory.Error,"A_declare_modifier_is_required_for_a_top_level_declaration_in_a_d_ts_file_1046","A 'declare' modifier is required for a top level declaration in a .d.ts file."),A_rest_parameter_cannot_be_optional:t(1047,e.DiagnosticCategory.Error,"A_rest_parameter_cannot_be_optional_1047","A rest parameter cannot be optional."),A_rest_parameter_cannot_have_an_initializer:t(1048,e.DiagnosticCategory.Error,"A_rest_parameter_cannot_have_an_initializer_1048","A rest parameter cannot have an initializer."),A_set_accessor_must_have_exactly_one_parameter:t(1049,e.DiagnosticCategory.Error,"A_set_accessor_must_have_exactly_one_parameter_1049","A 'set' accessor must have exactly one parameter."),A_set_accessor_cannot_have_an_optional_parameter:t(1051,e.DiagnosticCategory.Error,"A_set_accessor_cannot_have_an_optional_parameter_1051","A 'set' accessor cannot have an optional parameter."),A_set_accessor_parameter_cannot_have_an_initializer:t(1052,e.DiagnosticCategory.Error,"A_set_accessor_parameter_cannot_have_an_initializer_1052","A 'set' accessor parameter cannot have an initializer."),A_set_accessor_cannot_have_rest_parameter:t(1053,e.DiagnosticCategory.Error,"A_set_accessor_cannot_have_rest_parameter_1053","A 'set' accessor cannot have rest parameter."),A_get_accessor_cannot_have_parameters:t(1054,e.DiagnosticCategory.Error,"A_get_accessor_cannot_have_parameters_1054","A 'get' accessor cannot have parameters."),Type_0_is_not_a_valid_async_function_return_type_in_ES5_SlashES3_because_it_does_not_refer_to_a_Promise_compatible_constructor_value:t(1055,e.DiagnosticCategory.Error,"Type_0_is_not_a_valid_async_function_return_type_in_ES5_SlashES3_because_it_does_not_refer_to_a_Prom_1055","Type '{0}' is not a valid async function return type in ES5/ES3 because it does not refer to a Promise-compatible constructor value."),Accessors_are_only_available_when_targeting_ECMAScript_5_and_higher:t(1056,e.DiagnosticCategory.Error,"Accessors_are_only_available_when_targeting_ECMAScript_5_and_higher_1056","Accessors are only available when targeting ECMAScript 5 and higher."),An_async_function_or_method_must_have_a_valid_awaitable_return_type:t(1057,e.DiagnosticCategory.Error,"An_async_function_or_method_must_have_a_valid_awaitable_return_type_1057","An async function or method must have a valid awaitable return type."),The_return_type_of_an_async_function_must_either_be_a_valid_promise_or_must_not_contain_a_callable_then_member:t(1058,e.DiagnosticCategory.Error,"The_return_type_of_an_async_function_must_either_be_a_valid_promise_or_must_not_contain_a_callable_t_1058","The return type of an async function must either be a valid promise or must not contain a callable 'then' member."),A_promise_must_have_a_then_method:t(1059,e.DiagnosticCategory.Error,"A_promise_must_have_a_then_method_1059","A promise must have a 'then' method."),The_first_parameter_of_the_then_method_of_a_promise_must_be_a_callback:t(1060,e.DiagnosticCategory.Error,"The_first_parameter_of_the_then_method_of_a_promise_must_be_a_callback_1060","The first parameter of the 'then' method of a promise must be a callback."),Enum_member_must_have_initializer:t(1061,e.DiagnosticCategory.Error,"Enum_member_must_have_initializer_1061","Enum member must have initializer."),Type_is_referenced_directly_or_indirectly_in_the_fulfillment_callback_of_its_own_then_method:t(1062,e.DiagnosticCategory.Error,"Type_is_referenced_directly_or_indirectly_in_the_fulfillment_callback_of_its_own_then_method_1062","Type is referenced directly or indirectly in the fulfillment callback of its own 'then' method."),An_export_assignment_cannot_be_used_in_a_namespace:t(1063,e.DiagnosticCategory.Error,"An_export_assignment_cannot_be_used_in_a_namespace_1063","An export assignment cannot be used in a namespace."),The_return_type_of_an_async_function_or_method_must_be_the_global_Promise_T_type:t(1064,e.DiagnosticCategory.Error,"The_return_type_of_an_async_function_or_method_must_be_the_global_Promise_T_type_1064","The return type of an async function or method must be the global Promise<T> type."),In_ambient_enum_declarations_member_initializer_must_be_constant_expression:t(1066,e.DiagnosticCategory.Error,"In_ambient_enum_declarations_member_initializer_must_be_constant_expression_1066","In ambient enum declarations member initializer must be constant expression."),Unexpected_token_A_constructor_method_accessor_or_property_was_expected:t(1068,e.DiagnosticCategory.Error,"Unexpected_token_A_constructor_method_accessor_or_property_was_expected_1068","Unexpected token. A constructor, method, accessor, or property was expected."),_0_modifier_cannot_appear_on_a_type_member:t(1070,e.DiagnosticCategory.Error,"_0_modifier_cannot_appear_on_a_type_member_1070","'{0}' modifier cannot appear on a type member."),_0_modifier_cannot_appear_on_an_index_signature:t(1071,e.DiagnosticCategory.Error,"_0_modifier_cannot_appear_on_an_index_signature_1071","'{0}' modifier cannot appear on an index signature."),A_0_modifier_cannot_be_used_with_an_import_declaration:t(1079,e.DiagnosticCategory.Error,"A_0_modifier_cannot_be_used_with_an_import_declaration_1079","A '{0}' modifier cannot be used with an import declaration."),Invalid_reference_directive_syntax:t(1084,e.DiagnosticCategory.Error,"Invalid_reference_directive_syntax_1084","Invalid 'reference' directive syntax."),Octal_literals_are_not_available_when_targeting_ECMAScript_5_and_higher_Use_the_syntax_0:t(1085,e.DiagnosticCategory.Error,"Octal_literals_are_not_available_when_targeting_ECMAScript_5_and_higher_Use_the_syntax_0_1085","Octal literals are not available when targeting ECMAScript 5 and higher. Use the syntax '{0}'."),An_accessor_cannot_be_declared_in_an_ambient_context:t(1086,e.DiagnosticCategory.Error,"An_accessor_cannot_be_declared_in_an_ambient_context_1086","An accessor cannot be declared in an ambient context."),_0_modifier_cannot_appear_on_a_constructor_declaration:t(1089,e.DiagnosticCategory.Error,"_0_modifier_cannot_appear_on_a_constructor_declaration_1089","'{0}' modifier cannot appear on a constructor declaration."),_0_modifier_cannot_appear_on_a_parameter:t(1090,e.DiagnosticCategory.Error,"_0_modifier_cannot_appear_on_a_parameter_1090","'{0}' modifier cannot appear on a parameter."),Only_a_single_variable_declaration_is_allowed_in_a_for_in_statement:t(1091,e.DiagnosticCategory.Error,"Only_a_single_variable_declaration_is_allowed_in_a_for_in_statement_1091","Only a single variable declaration is allowed in a 'for...in' statement."),Type_parameters_cannot_appear_on_a_constructor_declaration:t(1092,e.DiagnosticCategory.Error,"Type_parameters_cannot_appear_on_a_constructor_declaration_1092","Type parameters cannot appear on a constructor declaration."),Type_annotation_cannot_appear_on_a_constructor_declaration:t(1093,e.DiagnosticCategory.Error,"Type_annotation_cannot_appear_on_a_constructor_declaration_1093","Type annotation cannot appear on a constructor declaration."),An_accessor_cannot_have_type_parameters:t(1094,e.DiagnosticCategory.Error,"An_accessor_cannot_have_type_parameters_1094","An accessor cannot have type parameters."),A_set_accessor_cannot_have_a_return_type_annotation:t(1095,e.DiagnosticCategory.Error,"A_set_accessor_cannot_have_a_return_type_annotation_1095","A 'set' accessor cannot have a return type annotation."),An_index_signature_must_have_exactly_one_parameter:t(1096,e.DiagnosticCategory.Error,"An_index_signature_must_have_exactly_one_parameter_1096","An index signature must have exactly one parameter."),_0_list_cannot_be_empty:t(1097,e.DiagnosticCategory.Error,"_0_list_cannot_be_empty_1097","'{0}' list cannot be empty."),Type_parameter_list_cannot_be_empty:t(1098,e.DiagnosticCategory.Error,"Type_parameter_list_cannot_be_empty_1098","Type parameter list cannot be empty."),Type_argument_list_cannot_be_empty:t(1099,e.DiagnosticCategory.Error,"Type_argument_list_cannot_be_empty_1099","Type argument list cannot be empty."),Invalid_use_of_0_in_strict_mode:t(1100,e.DiagnosticCategory.Error,"Invalid_use_of_0_in_strict_mode_1100","Invalid use of '{0}' in strict mode."),with_statements_are_not_allowed_in_strict_mode:t(1101,e.DiagnosticCategory.Error,"with_statements_are_not_allowed_in_strict_mode_1101","'with' statements are not allowed in strict mode."),delete_cannot_be_called_on_an_identifier_in_strict_mode:t(1102,e.DiagnosticCategory.Error,"delete_cannot_be_called_on_an_identifier_in_strict_mode_1102","'delete' cannot be called on an identifier in strict mode."),A_for_await_of_statement_is_only_allowed_within_an_async_function_or_async_generator:t(1103,e.DiagnosticCategory.Error,"A_for_await_of_statement_is_only_allowed_within_an_async_function_or_async_generator_1103","A 'for-await-of' statement is only allowed within an async function or async generator."),A_continue_statement_can_only_be_used_within_an_enclosing_iteration_statement:t(1104,e.DiagnosticCategory.Error,"A_continue_statement_can_only_be_used_within_an_enclosing_iteration_statement_1104","A 'continue' statement can only be used within an enclosing iteration statement."),A_break_statement_can_only_be_used_within_an_enclosing_iteration_or_switch_statement:t(1105,e.DiagnosticCategory.Error,"A_break_statement_can_only_be_used_within_an_enclosing_iteration_or_switch_statement_1105","A 'break' statement can only be used within an enclosing iteration or switch statement."),Jump_target_cannot_cross_function_boundary:t(1107,e.DiagnosticCategory.Error,"Jump_target_cannot_cross_function_boundary_1107","Jump target cannot cross function boundary."),A_return_statement_can_only_be_used_within_a_function_body:t(1108,e.DiagnosticCategory.Error,"A_return_statement_can_only_be_used_within_a_function_body_1108","A 'return' statement can only be used within a function body."),Expression_expected:t(1109,e.DiagnosticCategory.Error,"Expression_expected_1109","Expression expected."),Type_expected:t(1110,e.DiagnosticCategory.Error,"Type_expected_1110","Type expected."),A_default_clause_cannot_appear_more_than_once_in_a_switch_statement:t(1113,e.DiagnosticCategory.Error,"A_default_clause_cannot_appear_more_than_once_in_a_switch_statement_1113","A 'default' clause cannot appear more than once in a 'switch' statement."),Duplicate_label_0:t(1114,e.DiagnosticCategory.Error,"Duplicate_label_0_1114","Duplicate label '{0}'."),A_continue_statement_can_only_jump_to_a_label_of_an_enclosing_iteration_statement:t(1115,e.DiagnosticCategory.Error,"A_continue_statement_can_only_jump_to_a_label_of_an_enclosing_iteration_statement_1115","A 'continue' statement can only jump to a label of an enclosing iteration statement."),A_break_statement_can_only_jump_to_a_label_of_an_enclosing_statement:t(1116,e.DiagnosticCategory.Error,"A_break_statement_can_only_jump_to_a_label_of_an_enclosing_statement_1116","A 'break' statement can only jump to a label of an enclosing statement."),An_object_literal_cannot_have_multiple_properties_with_the_same_name_in_strict_mode:t(1117,e.DiagnosticCategory.Error,"An_object_literal_cannot_have_multiple_properties_with_the_same_name_in_strict_mode_1117","An object literal cannot have multiple properties with the same name in strict mode."),An_object_literal_cannot_have_multiple_get_Slashset_accessors_with_the_same_name:t(1118,e.DiagnosticCategory.Error,"An_object_literal_cannot_have_multiple_get_Slashset_accessors_with_the_same_name_1118","An object literal cannot have multiple get/set accessors with the same name."),An_object_literal_cannot_have_property_and_accessor_with_the_same_name:t(1119,e.DiagnosticCategory.Error,"An_object_literal_cannot_have_property_and_accessor_with_the_same_name_1119","An object literal cannot have property and accessor with the same name."),An_export_assignment_cannot_have_modifiers:t(1120,e.DiagnosticCategory.Error,"An_export_assignment_cannot_have_modifiers_1120","An export assignment cannot have modifiers."),Octal_literals_are_not_allowed_in_strict_mode:t(1121,e.DiagnosticCategory.Error,"Octal_literals_are_not_allowed_in_strict_mode_1121","Octal literals are not allowed in strict mode."),A_tuple_type_element_list_cannot_be_empty:t(1122,e.DiagnosticCategory.Error,"A_tuple_type_element_list_cannot_be_empty_1122","A tuple type element list cannot be empty."),Variable_declaration_list_cannot_be_empty:t(1123,e.DiagnosticCategory.Error,"Variable_declaration_list_cannot_be_empty_1123","Variable declaration list cannot be empty."),Digit_expected:t(1124,e.DiagnosticCategory.Error,"Digit_expected_1124","Digit expected."),Hexadecimal_digit_expected:t(1125,e.DiagnosticCategory.Error,"Hexadecimal_digit_expected_1125","Hexadecimal digit expected."),Unexpected_end_of_text:t(1126,e.DiagnosticCategory.Error,"Unexpected_end_of_text_1126","Unexpected end of text."),Invalid_character:t(1127,e.DiagnosticCategory.Error,"Invalid_character_1127","Invalid character."),Declaration_or_statement_expected:t(1128,e.DiagnosticCategory.Error,"Declaration_or_statement_expected_1128","Declaration or statement expected."),Statement_expected:t(1129,e.DiagnosticCategory.Error,"Statement_expected_1129","Statement expected."),case_or_default_expected:t(1130,e.DiagnosticCategory.Error,"case_or_default_expected_1130","'case' or 'default' expected."),Property_or_signature_expected:t(1131,e.DiagnosticCategory.Error,"Property_or_signature_expected_1131","Property or signature expected."),Enum_member_expected:t(1132,e.DiagnosticCategory.Error,"Enum_member_expected_1132","Enum member expected."),Variable_declaration_expected:t(1134,e.DiagnosticCategory.Error,"Variable_declaration_expected_1134","Variable declaration expected."),Argument_expression_expected:t(1135,e.DiagnosticCategory.Error,"Argument_expression_expected_1135","Argument expression expected."),Property_assignment_expected:t(1136,e.DiagnosticCategory.Error,"Property_assignment_expected_1136","Property assignment expected."),Expression_or_comma_expected:t(1137,e.DiagnosticCategory.Error,"Expression_or_comma_expected_1137","Expression or comma expected."),Parameter_declaration_expected:t(1138,e.DiagnosticCategory.Error,"Parameter_declaration_expected_1138","Parameter declaration expected."),Type_parameter_declaration_expected:t(1139,e.DiagnosticCategory.Error,"Type_parameter_declaration_expected_1139","Type parameter declaration expected."),Type_argument_expected:t(1140,e.DiagnosticCategory.Error,"Type_argument_expected_1140","Type argument expected."),String_literal_expected:t(1141,e.DiagnosticCategory.Error,"String_literal_expected_1141","String literal expected."),Line_break_not_permitted_here:t(1142,e.DiagnosticCategory.Error,"Line_break_not_permitted_here_1142","Line break not permitted here."),or_expected:t(1144,e.DiagnosticCategory.Error,"or_expected_1144","'{' or ';' expected."),Declaration_expected:t(1146,e.DiagnosticCategory.Error,"Declaration_expected_1146","Declaration expected."),Import_declarations_in_a_namespace_cannot_reference_a_module:t(1147,e.DiagnosticCategory.Error,"Import_declarations_in_a_namespace_cannot_reference_a_module_1147","Import declarations in a namespace cannot reference a module."),Cannot_use_imports_exports_or_module_augmentations_when_module_is_none:t(1148,e.DiagnosticCategory.Error,"Cannot_use_imports_exports_or_module_augmentations_when_module_is_none_1148","Cannot use imports, exports, or module augmentations when '--module' is 'none'."),File_name_0_differs_from_already_included_file_name_1_only_in_casing:t(1149,e.DiagnosticCategory.Error,"File_name_0_differs_from_already_included_file_name_1_only_in_casing_1149","File name '{0}' differs from already included file name '{1}' only in casing."),new_T_cannot_be_used_to_create_an_array_Use_new_Array_T_instead:t(1150,e.DiagnosticCategory.Error,"new_T_cannot_be_used_to_create_an_array_Use_new_Array_T_instead_1150","'new T[]' cannot be used to create an array. Use 'new Array<T>()' instead."),const_declarations_must_be_initialized:t(1155,e.DiagnosticCategory.Error,"const_declarations_must_be_initialized_1155","'const' declarations must be initialized."),const_declarations_can_only_be_declared_inside_a_block:t(1156,e.DiagnosticCategory.Error,"const_declarations_can_only_be_declared_inside_a_block_1156","'const' declarations can only be declared inside a block."),let_declarations_can_only_be_declared_inside_a_block:t(1157,e.DiagnosticCategory.Error,"let_declarations_can_only_be_declared_inside_a_block_1157","'let' declarations can only be declared inside a block."),Unterminated_template_literal:t(1160,e.DiagnosticCategory.Error,"Unterminated_template_literal_1160","Unterminated template literal."),Unterminated_regular_expression_literal:t(1161,e.DiagnosticCategory.Error,"Unterminated_regular_expression_literal_1161","Unterminated regular expression literal."),An_object_member_cannot_be_declared_optional:t(1162,e.DiagnosticCategory.Error,"An_object_member_cannot_be_declared_optional_1162","An object member cannot be declared optional."),A_yield_expression_is_only_allowed_in_a_generator_body:t(1163,e.DiagnosticCategory.Error,"A_yield_expression_is_only_allowed_in_a_generator_body_1163","A 'yield' expression is only allowed in a generator body."),Computed_property_names_are_not_allowed_in_enums:t(1164,e.DiagnosticCategory.Error,"Computed_property_names_are_not_allowed_in_enums_1164","Computed property names are not allowed in enums."),A_computed_property_name_in_an_ambient_context_must_directly_refer_to_a_built_in_symbol:t(1165,e.DiagnosticCategory.Error,"A_computed_property_name_in_an_ambient_context_must_directly_refer_to_a_built_in_symbol_1165","A computed property name in an ambient context must directly refer to a built-in symbol."),A_computed_property_name_in_a_class_property_declaration_must_directly_refer_to_a_built_in_symbol:t(1166,e.DiagnosticCategory.Error,"A_computed_property_name_in_a_class_property_declaration_must_directly_refer_to_a_built_in_symbol_1166","A computed property name in a class property declaration must directly refer to a built-in symbol."),A_computed_property_name_in_a_method_overload_must_directly_refer_to_a_built_in_symbol:t(1168,e.DiagnosticCategory.Error,"A_computed_property_name_in_a_method_overload_must_directly_refer_to_a_built_in_symbol_1168","A computed property name in a method overload must directly refer to a built-in symbol."),A_computed_property_name_in_an_interface_must_directly_refer_to_a_built_in_symbol:t(1169,e.DiagnosticCategory.Error,"A_computed_property_name_in_an_interface_must_directly_refer_to_a_built_in_symbol_1169","A computed property name in an interface must directly refer to a built-in symbol."),A_computed_property_name_in_a_type_literal_must_directly_refer_to_a_built_in_symbol:t(1170,e.DiagnosticCategory.Error,"A_computed_property_name_in_a_type_literal_must_directly_refer_to_a_built_in_symbol_1170","A computed property name in a type literal must directly refer to a built-in symbol."),A_comma_expression_is_not_allowed_in_a_computed_property_name:t(1171,e.DiagnosticCategory.Error,"A_comma_expression_is_not_allowed_in_a_computed_property_name_1171","A comma expression is not allowed in a computed property name."),extends_clause_already_seen:t(1172,e.DiagnosticCategory.Error,"extends_clause_already_seen_1172","'extends' clause already seen."),extends_clause_must_precede_implements_clause:t(1173,e.DiagnosticCategory.Error,"extends_clause_must_precede_implements_clause_1173","'extends' clause must precede 'implements' clause."),Classes_can_only_extend_a_single_class:t(1174,e.DiagnosticCategory.Error,"Classes_can_only_extend_a_single_class_1174","Classes can only extend a single class."),implements_clause_already_seen:t(1175,e.DiagnosticCategory.Error,"implements_clause_already_seen_1175","'implements' clause already seen."),Interface_declaration_cannot_have_implements_clause:t(1176,e.DiagnosticCategory.Error,"Interface_declaration_cannot_have_implements_clause_1176","Interface declaration cannot have 'implements' clause."),Binary_digit_expected:t(1177,e.DiagnosticCategory.Error,"Binary_digit_expected_1177","Binary digit expected."),Octal_digit_expected:t(1178,e.DiagnosticCategory.Error,"Octal_digit_expected_1178","Octal digit expected."),Unexpected_token_expected:t(1179,e.DiagnosticCategory.Error,"Unexpected_token_expected_1179","Unexpected token. '{' expected."),Property_destructuring_pattern_expected:t(1180,e.DiagnosticCategory.Error,"Property_destructuring_pattern_expected_1180","Property destructuring pattern expected."),Array_element_destructuring_pattern_expected:t(1181,e.DiagnosticCategory.Error,"Array_element_destructuring_pattern_expected_1181","Array element destructuring pattern expected."),A_destructuring_declaration_must_have_an_initializer:t(1182,e.DiagnosticCategory.Error,"A_destructuring_declaration_must_have_an_initializer_1182","A destructuring declaration must have an initializer."),An_implementation_cannot_be_declared_in_ambient_contexts:t(1183,e.DiagnosticCategory.Error,"An_implementation_cannot_be_declared_in_ambient_contexts_1183","An implementation cannot be declared in ambient contexts."),Modifiers_cannot_appear_here:t(1184,e.DiagnosticCategory.Error,"Modifiers_cannot_appear_here_1184","Modifiers cannot appear here."),Merge_conflict_marker_encountered:t(1185,e.DiagnosticCategory.Error,"Merge_conflict_marker_encountered_1185","Merge conflict marker encountered."),A_rest_element_cannot_have_an_initializer:t(1186,e.DiagnosticCategory.Error,"A_rest_element_cannot_have_an_initializer_1186","A rest element cannot have an initializer."),A_parameter_property_may_not_be_declared_using_a_binding_pattern:t(1187,e.DiagnosticCategory.Error,"A_parameter_property_may_not_be_declared_using_a_binding_pattern_1187","A parameter property may not be declared using a binding pattern."),Only_a_single_variable_declaration_is_allowed_in_a_for_of_statement:t(1188,e.DiagnosticCategory.Error,"Only_a_single_variable_declaration_is_allowed_in_a_for_of_statement_1188","Only a single variable declaration is allowed in a 'for...of' statement."),The_variable_declaration_of_a_for_in_statement_cannot_have_an_initializer:t(1189,e.DiagnosticCategory.Error,"The_variable_declaration_of_a_for_in_statement_cannot_have_an_initializer_1189","The variable declaration of a 'for...in' statement cannot have an initializer."),The_variable_declaration_of_a_for_of_statement_cannot_have_an_initializer:t(1190,e.DiagnosticCategory.Error,"The_variable_declaration_of_a_for_of_statement_cannot_have_an_initializer_1190","The variable declaration of a 'for...of' statement cannot have an initializer."),An_import_declaration_cannot_have_modifiers:t(1191,e.DiagnosticCategory.Error,"An_import_declaration_cannot_have_modifiers_1191","An import declaration cannot have modifiers."),Module_0_has_no_default_export:t(1192,e.DiagnosticCategory.Error,"Module_0_has_no_default_export_1192","Module '{0}' has no default export."),An_export_declaration_cannot_have_modifiers:t(1193,e.DiagnosticCategory.Error,"An_export_declaration_cannot_have_modifiers_1193","An export declaration cannot have modifiers."),Export_declarations_are_not_permitted_in_a_namespace:t(1194,e.DiagnosticCategory.Error,"Export_declarations_are_not_permitted_in_a_namespace_1194","Export declarations are not permitted in a namespace."),Catch_clause_variable_cannot_have_a_type_annotation:t(1196,e.DiagnosticCategory.Error,"Catch_clause_variable_cannot_have_a_type_annotation_1196","Catch clause variable cannot have a type annotation."),Catch_clause_variable_cannot_have_an_initializer:t(1197,e.DiagnosticCategory.Error,"Catch_clause_variable_cannot_have_an_initializer_1197","Catch clause variable cannot have an initializer."),An_extended_Unicode_escape_value_must_be_between_0x0_and_0x10FFFF_inclusive:t(1198,e.DiagnosticCategory.Error,"An_extended_Unicode_escape_value_must_be_between_0x0_and_0x10FFFF_inclusive_1198","An extended Unicode escape value must be between 0x0 and 0x10FFFF inclusive."),Unterminated_Unicode_escape_sequence:t(1199,e.DiagnosticCategory.Error,"Unterminated_Unicode_escape_sequence_1199","Unterminated Unicode escape sequence."),Line_terminator_not_permitted_before_arrow:t(1200,e.DiagnosticCategory.Error,"Line_terminator_not_permitted_before_arrow_1200","Line terminator not permitted before arrow."),Import_assignment_cannot_be_used_when_targeting_ECMAScript_modules_Consider_using_import_Asterisk_as_ns_from_mod_import_a_from_mod_import_d_from_mod_or_another_module_format_instead:t(1202,e.DiagnosticCategory.Error,"Import_assignment_cannot_be_used_when_targeting_ECMAScript_modules_Consider_using_import_Asterisk_as_1202","Import assignment cannot be used when targeting ECMAScript modules. Consider using 'import * as ns from \"mod\"', 'import {a} from \"mod\"', 'import d from \"mod\"', or another module format instead."),Export_assignment_cannot_be_used_when_targeting_ECMAScript_modules_Consider_using_export_default_or_another_module_format_instead:t(1203,e.DiagnosticCategory.Error,"Export_assignment_cannot_be_used_when_targeting_ECMAScript_modules_Consider_using_export_default_or__1203","Export assignment cannot be used when targeting ECMAScript modules. Consider using 'export default' or another module format instead."),Cannot_re_export_a_type_when_the_isolatedModules_flag_is_provided:t(1205,e.DiagnosticCategory.Error,"Cannot_re_export_a_type_when_the_isolatedModules_flag_is_provided_1205","Cannot re-export a type when the '--isolatedModules' flag is provided."),Decorators_are_not_valid_here:t(1206,e.DiagnosticCategory.Error,"Decorators_are_not_valid_here_1206","Decorators are not valid here."),Decorators_cannot_be_applied_to_multiple_get_Slashset_accessors_of_the_same_name:t(1207,e.DiagnosticCategory.Error,"Decorators_cannot_be_applied_to_multiple_get_Slashset_accessors_of_the_same_name_1207","Decorators cannot be applied to multiple get/set accessors of the same name."),Cannot_compile_namespaces_when_the_isolatedModules_flag_is_provided:t(1208,e.DiagnosticCategory.Error,"Cannot_compile_namespaces_when_the_isolatedModules_flag_is_provided_1208","Cannot compile namespaces when the '--isolatedModules' flag is provided."),Ambient_const_enums_are_not_allowed_when_the_isolatedModules_flag_is_provided:t(1209,e.DiagnosticCategory.Error,"Ambient_const_enums_are_not_allowed_when_the_isolatedModules_flag_is_provided_1209","Ambient const enums are not allowed when the '--isolatedModules' flag is provided."),Invalid_use_of_0_Class_definitions_are_automatically_in_strict_mode:t(1210,e.DiagnosticCategory.Error,"Invalid_use_of_0_Class_definitions_are_automatically_in_strict_mode_1210","Invalid use of '{0}'. Class definitions are automatically in strict mode."),A_class_declaration_without_the_default_modifier_must_have_a_name:t(1211,e.DiagnosticCategory.Error,"A_class_declaration_without_the_default_modifier_must_have_a_name_1211","A class declaration without the 'default' modifier must have a name."),Identifier_expected_0_is_a_reserved_word_in_strict_mode:t(1212,e.DiagnosticCategory.Error,"Identifier_expected_0_is_a_reserved_word_in_strict_mode_1212","Identifier expected. '{0}' is a reserved word in strict mode."),Identifier_expected_0_is_a_reserved_word_in_strict_mode_Class_definitions_are_automatically_in_strict_mode:t(1213,e.DiagnosticCategory.Error,"Identifier_expected_0_is_a_reserved_word_in_strict_mode_Class_definitions_are_automatically_in_stric_1213","Identifier expected. '{0}' is a reserved word in strict mode. Class definitions are automatically in strict mode."),Identifier_expected_0_is_a_reserved_word_in_strict_mode_Modules_are_automatically_in_strict_mode:t(1214,e.DiagnosticCategory.Error,"Identifier_expected_0_is_a_reserved_word_in_strict_mode_Modules_are_automatically_in_strict_mode_1214","Identifier expected. '{0}' is a reserved word in strict mode. Modules are automatically in strict mode."),Invalid_use_of_0_Modules_are_automatically_in_strict_mode:t(1215,e.DiagnosticCategory.Error,"Invalid_use_of_0_Modules_are_automatically_in_strict_mode_1215","Invalid use of '{0}'. Modules are automatically in strict mode."),Identifier_expected_esModule_is_reserved_as_an_exported_marker_when_transforming_ECMAScript_modules:t(1216,e.DiagnosticCategory.Error,"Identifier_expected_esModule_is_reserved_as_an_exported_marker_when_transforming_ECMAScript_modules_1216","Identifier expected. '__esModule' is reserved as an exported marker when transforming ECMAScript modules."),Export_assignment_is_not_supported_when_module_flag_is_system:t(1218,e.DiagnosticCategory.Error,"Export_assignment_is_not_supported_when_module_flag_is_system_1218","Export assignment is not supported when '--module' flag is 'system'."),Experimental_support_for_decorators_is_a_feature_that_is_subject_to_change_in_a_future_release_Set_the_experimentalDecorators_option_to_remove_this_warning:t(1219,e.DiagnosticCategory.Error,"Experimental_support_for_decorators_is_a_feature_that_is_subject_to_change_in_a_future_release_Set_t_1219","Experimental support for decorators is a feature that is subject to change in a future release. Set the 'experimentalDecorators' option to remove this warning."),Generators_are_only_available_when_targeting_ECMAScript_2015_or_higher:t(1220,e.DiagnosticCategory.Error,"Generators_are_only_available_when_targeting_ECMAScript_2015_or_higher_1220","Generators are only available when targeting ECMAScript 2015 or higher."),Generators_are_not_allowed_in_an_ambient_context:t(1221,e.DiagnosticCategory.Error,"Generators_are_not_allowed_in_an_ambient_context_1221","Generators are not allowed in an ambient context."),An_overload_signature_cannot_be_declared_as_a_generator:t(1222,e.DiagnosticCategory.Error,"An_overload_signature_cannot_be_declared_as_a_generator_1222","An overload signature cannot be declared as a generator."),_0_tag_already_specified:t(1223,e.DiagnosticCategory.Error,"_0_tag_already_specified_1223","'{0}' tag already specified."),Signature_0_must_be_a_type_predicate:t(1224,e.DiagnosticCategory.Error,"Signature_0_must_be_a_type_predicate_1224","Signature '{0}' must be a type predicate."),Cannot_find_parameter_0:t(1225,e.DiagnosticCategory.Error,"Cannot_find_parameter_0_1225","Cannot find parameter '{0}'."),Type_predicate_0_is_not_assignable_to_1:t(1226,e.DiagnosticCategory.Error,"Type_predicate_0_is_not_assignable_to_1_1226","Type predicate '{0}' is not assignable to '{1}'."),Parameter_0_is_not_in_the_same_position_as_parameter_1:t(1227,e.DiagnosticCategory.Error,"Parameter_0_is_not_in_the_same_position_as_parameter_1_1227","Parameter '{0}' is not in the same position as parameter '{1}'."),A_type_predicate_is_only_allowed_in_return_type_position_for_functions_and_methods:t(1228,e.DiagnosticCategory.Error,"A_type_predicate_is_only_allowed_in_return_type_position_for_functions_and_methods_1228","A type predicate is only allowed in return type position for functions and methods."),A_type_predicate_cannot_reference_a_rest_parameter:t(1229,e.DiagnosticCategory.Error,"A_type_predicate_cannot_reference_a_rest_parameter_1229","A type predicate cannot reference a rest parameter."),A_type_predicate_cannot_reference_element_0_in_a_binding_pattern:t(1230,e.DiagnosticCategory.Error,"A_type_predicate_cannot_reference_element_0_in_a_binding_pattern_1230","A type predicate cannot reference element '{0}' in a binding pattern."),An_export_assignment_can_only_be_used_in_a_module:t(1231,e.DiagnosticCategory.Error,"An_export_assignment_can_only_be_used_in_a_module_1231","An export assignment can only be used in a module."),An_import_declaration_can_only_be_used_in_a_namespace_or_module:t(1232,e.DiagnosticCategory.Error,"An_import_declaration_can_only_be_used_in_a_namespace_or_module_1232","An import declaration can only be used in a namespace or module."),An_export_declaration_can_only_be_used_in_a_module:t(1233,e.DiagnosticCategory.Error,"An_export_declaration_can_only_be_used_in_a_module_1233","An export declaration can only be used in a module."),An_ambient_module_declaration_is_only_allowed_at_the_top_level_in_a_file:t(1234,e.DiagnosticCategory.Error,"An_ambient_module_declaration_is_only_allowed_at_the_top_level_in_a_file_1234","An ambient module declaration is only allowed at the top level in a file."),A_namespace_declaration_is_only_allowed_in_a_namespace_or_module:t(1235,e.DiagnosticCategory.Error,"A_namespace_declaration_is_only_allowed_in_a_namespace_or_module_1235","A namespace declaration is only allowed in a namespace or module."),The_return_type_of_a_property_decorator_function_must_be_either_void_or_any:t(1236,e.DiagnosticCategory.Error,"The_return_type_of_a_property_decorator_function_must_be_either_void_or_any_1236","The return type of a property decorator function must be either 'void' or 'any'."),The_return_type_of_a_parameter_decorator_function_must_be_either_void_or_any:t(1237,e.DiagnosticCategory.Error,"The_return_type_of_a_parameter_decorator_function_must_be_either_void_or_any_1237","The return type of a parameter decorator function must be either 'void' or 'any'."),Unable_to_resolve_signature_of_class_decorator_when_called_as_an_expression:t(1238,e.DiagnosticCategory.Error,"Unable_to_resolve_signature_of_class_decorator_when_called_as_an_expression_1238","Unable to resolve signature of class decorator when called as an expression."),Unable_to_resolve_signature_of_parameter_decorator_when_called_as_an_expression:t(1239,e.DiagnosticCategory.Error,"Unable_to_resolve_signature_of_parameter_decorator_when_called_as_an_expression_1239","Unable to resolve signature of parameter decorator when called as an expression."),Unable_to_resolve_signature_of_property_decorator_when_called_as_an_expression:t(1240,e.DiagnosticCategory.Error,"Unable_to_resolve_signature_of_property_decorator_when_called_as_an_expression_1240","Unable to resolve signature of property decorator when called as an expression."),Unable_to_resolve_signature_of_method_decorator_when_called_as_an_expression:t(1241,e.DiagnosticCategory.Error,"Unable_to_resolve_signature_of_method_decorator_when_called_as_an_expression_1241","Unable to resolve signature of method decorator when called as an expression."),abstract_modifier_can_only_appear_on_a_class_method_or_property_declaration:t(1242,e.DiagnosticCategory.Error,"abstract_modifier_can_only_appear_on_a_class_method_or_property_declaration_1242","'abstract' modifier can only appear on a class, method, or property declaration."),_0_modifier_cannot_be_used_with_1_modifier:t(1243,e.DiagnosticCategory.Error,"_0_modifier_cannot_be_used_with_1_modifier_1243","'{0}' modifier cannot be used with '{1}' modifier."),Abstract_methods_can_only_appear_within_an_abstract_class:t(1244,e.DiagnosticCategory.Error,"Abstract_methods_can_only_appear_within_an_abstract_class_1244","Abstract methods can only appear within an abstract class."),Method_0_cannot_have_an_implementation_because_it_is_marked_abstract:t(1245,e.DiagnosticCategory.Error,"Method_0_cannot_have_an_implementation_because_it_is_marked_abstract_1245","Method '{0}' cannot have an implementation because it is marked abstract."),An_interface_property_cannot_have_an_initializer:t(1246,e.DiagnosticCategory.Error,"An_interface_property_cannot_have_an_initializer_1246","An interface property cannot have an initializer."),A_type_literal_property_cannot_have_an_initializer:t(1247,e.DiagnosticCategory.Error,"A_type_literal_property_cannot_have_an_initializer_1247","A type literal property cannot have an initializer."),A_class_member_cannot_have_the_0_keyword:t(1248,e.DiagnosticCategory.Error,"A_class_member_cannot_have_the_0_keyword_1248","A class member cannot have the '{0}' keyword."),A_decorator_can_only_decorate_a_method_implementation_not_an_overload:t(1249,e.DiagnosticCategory.Error,"A_decorator_can_only_decorate_a_method_implementation_not_an_overload_1249","A decorator can only decorate a method implementation, not an overload."),Function_declarations_are_not_allowed_inside_blocks_in_strict_mode_when_targeting_ES3_or_ES5:t(1250,e.DiagnosticCategory.Error,"Function_declarations_are_not_allowed_inside_blocks_in_strict_mode_when_targeting_ES3_or_ES5_1250","Function declarations are not allowed inside blocks in strict mode when targeting 'ES3' or 'ES5'."),Function_declarations_are_not_allowed_inside_blocks_in_strict_mode_when_targeting_ES3_or_ES5_Class_definitions_are_automatically_in_strict_mode:t(1251,e.DiagnosticCategory.Error,"Function_declarations_are_not_allowed_inside_blocks_in_strict_mode_when_targeting_ES3_or_ES5_Class_d_1251","Function declarations are not allowed inside blocks in strict mode when targeting 'ES3' or 'ES5'. Class definitions are automatically in strict mode."),Function_declarations_are_not_allowed_inside_blocks_in_strict_mode_when_targeting_ES3_or_ES5_Modules_are_automatically_in_strict_mode:t(1252,e.DiagnosticCategory.Error,"Function_declarations_are_not_allowed_inside_blocks_in_strict_mode_when_targeting_ES3_or_ES5_Modules_1252","Function declarations are not allowed inside blocks in strict mode when targeting 'ES3' or 'ES5'. Modules are automatically in strict mode."),_0_tag_cannot_be_used_independently_as_a_top_level_JSDoc_tag:t(1253,e.DiagnosticCategory.Error,"_0_tag_cannot_be_used_independently_as_a_top_level_JSDoc_tag_1253","'{0}' tag cannot be used independently as a top level JSDoc tag."),A_const_initializer_in_an_ambient_context_must_be_a_string_or_numeric_literal:t(1254,e.DiagnosticCategory.Error,"A_const_initializer_in_an_ambient_context_must_be_a_string_or_numeric_literal_1254","A 'const' initializer in an ambient context must be a string or numeric literal."),with_statements_are_not_allowed_in_an_async_function_block:t(1300,e.DiagnosticCategory.Error,"with_statements_are_not_allowed_in_an_async_function_block_1300","'with' statements are not allowed in an async function block."),await_expression_is_only_allowed_within_an_async_function:t(1308,e.DiagnosticCategory.Error,"await_expression_is_only_allowed_within_an_async_function_1308","'await' expression is only allowed within an async function."),can_only_be_used_in_an_object_literal_property_inside_a_destructuring_assignment:t(1312,e.DiagnosticCategory.Error,"can_only_be_used_in_an_object_literal_property_inside_a_destructuring_assignment_1312","'=' can only be used in an object literal property inside a destructuring assignment."),The_body_of_an_if_statement_cannot_be_the_empty_statement:t(1313,e.DiagnosticCategory.Error,"The_body_of_an_if_statement_cannot_be_the_empty_statement_1313","The body of an 'if' statement cannot be the empty statement."),Global_module_exports_may_only_appear_in_module_files:t(1314,e.DiagnosticCategory.Error,"Global_module_exports_may_only_appear_in_module_files_1314","Global module exports may only appear in module files."),Global_module_exports_may_only_appear_in_declaration_files:t(1315,e.DiagnosticCategory.Error,"Global_module_exports_may_only_appear_in_declaration_files_1315","Global module exports may only appear in declaration files."),Global_module_exports_may_only_appear_at_top_level:t(1316,e.DiagnosticCategory.Error,"Global_module_exports_may_only_appear_at_top_level_1316","Global module exports may only appear at top level."),A_parameter_property_cannot_be_declared_using_a_rest_parameter:t(1317,e.DiagnosticCategory.Error,"A_parameter_property_cannot_be_declared_using_a_rest_parameter_1317","A parameter property cannot be declared using a rest parameter."),An_abstract_accessor_cannot_have_an_implementation:t(1318,e.DiagnosticCategory.Error,"An_abstract_accessor_cannot_have_an_implementation_1318","An abstract accessor cannot have an implementation."),A_default_export_can_only_be_used_in_an_ECMAScript_style_module:t(1319,e.DiagnosticCategory.Error,"A_default_export_can_only_be_used_in_an_ECMAScript_style_module_1319","A default export can only be used in an ECMAScript-style module."),Type_of_await_operand_must_either_be_a_valid_promise_or_must_not_contain_a_callable_then_member:t(1320,e.DiagnosticCategory.Error,"Type_of_await_operand_must_either_be_a_valid_promise_or_must_not_contain_a_callable_then_member_1320","Type of 'await' operand must either be a valid promise or must not contain a callable 'then' member."),Type_of_yield_operand_in_an_async_generator_must_either_be_a_valid_promise_or_must_not_contain_a_callable_then_member:t(1321,e.DiagnosticCategory.Error,"Type_of_yield_operand_in_an_async_generator_must_either_be_a_valid_promise_or_must_not_contain_a_cal_1321","Type of 'yield' operand in an async generator must either be a valid promise or must not contain a callable 'then' member."),Type_of_iterated_elements_of_a_yield_Asterisk_operand_must_either_be_a_valid_promise_or_must_not_contain_a_callable_then_member:t(1322,e.DiagnosticCategory.Error,"Type_of_iterated_elements_of_a_yield_Asterisk_operand_must_either_be_a_valid_promise_or_must_not_con_1322","Type of iterated elements of a 'yield*' operand must either be a valid promise or must not contain a callable 'then' member."),Dynamic_import_cannot_be_used_when_targeting_ECMAScript_2015_modules:t(1323,e.DiagnosticCategory.Error,"Dynamic_import_cannot_be_used_when_targeting_ECMAScript_2015_modules_1323","Dynamic import cannot be used when targeting ECMAScript 2015 modules."),Dynamic_import_must_have_one_specifier_as_an_argument:t(1324,e.DiagnosticCategory.Error,"Dynamic_import_must_have_one_specifier_as_an_argument_1324","Dynamic import must have one specifier as an argument."),Specifier_of_dynamic_import_cannot_be_spread_element:t(1325,e.DiagnosticCategory.Error,"Specifier_of_dynamic_import_cannot_be_spread_element_1325","Specifier of dynamic import cannot be spread element."),Dynamic_import_cannot_have_type_arguments:t(1326,e.DiagnosticCategory.Error,"Dynamic_import_cannot_have_type_arguments_1326","Dynamic import cannot have type arguments"),String_literal_with_double_quotes_expected:t(1327,e.DiagnosticCategory.Error,"String_literal_with_double_quotes_expected_1327","String literal with double quotes expected."),Property_value_can_only_be_string_literal_numeric_literal_true_false_null_object_literal_or_array_literal:t(1328,e.DiagnosticCategory.Error,"Property_value_can_only_be_string_literal_numeric_literal_true_false_null_object_literal_or_array_li_1328","Property value can only be string literal, numeric literal, 'true', 'false', 'null', object literal or array literal."),_0_accepts_too_few_arguments_to_be_used_as_a_decorator_here_Did_you_mean_to_call_it_first_and_write_0:t(1329,e.DiagnosticCategory.Error,"_0_accepts_too_few_arguments_to_be_used_as_a_decorator_here_Did_you_mean_to_call_it_first_and_write__1329","'{0}' accepts too few arguments to be used as a decorator here. Did you mean to call it first and write '@{0}()'?"),Duplicate_identifier_0:t(2300,e.DiagnosticCategory.Error,"Duplicate_identifier_0_2300","Duplicate identifier '{0}'."),Initializer_of_instance_member_variable_0_cannot_reference_identifier_1_declared_in_the_constructor:t(2301,e.DiagnosticCategory.Error,"Initializer_of_instance_member_variable_0_cannot_reference_identifier_1_declared_in_the_constructor_2301","Initializer of instance member variable '{0}' cannot reference identifier '{1}' declared in the constructor."),Static_members_cannot_reference_class_type_parameters:t(2302,e.DiagnosticCategory.Error,"Static_members_cannot_reference_class_type_parameters_2302","Static members cannot reference class type parameters."),Circular_definition_of_import_alias_0:t(2303,e.DiagnosticCategory.Error,"Circular_definition_of_import_alias_0_2303","Circular definition of import alias '{0}'."),Cannot_find_name_0:t(2304,e.DiagnosticCategory.Error,"Cannot_find_name_0_2304","Cannot find name '{0}'."),Module_0_has_no_exported_member_1:t(2305,e.DiagnosticCategory.Error,"Module_0_has_no_exported_member_1_2305","Module '{0}' has no exported member '{1}'."),File_0_is_not_a_module:t(2306,e.DiagnosticCategory.Error,"File_0_is_not_a_module_2306","File '{0}' is not a module."),Cannot_find_module_0:t(2307,e.DiagnosticCategory.Error,"Cannot_find_module_0_2307","Cannot find module '{0}'."),Module_0_has_already_exported_a_member_named_1_Consider_explicitly_re_exporting_to_resolve_the_ambiguity:t(2308,e.DiagnosticCategory.Error,"Module_0_has_already_exported_a_member_named_1_Consider_explicitly_re_exporting_to_resolve_the_ambig_2308","Module {0} has already exported a member named '{1}'. Consider explicitly re-exporting to resolve the ambiguity."),An_export_assignment_cannot_be_used_in_a_module_with_other_exported_elements:t(2309,e.DiagnosticCategory.Error,"An_export_assignment_cannot_be_used_in_a_module_with_other_exported_elements_2309","An export assignment cannot be used in a module with other exported elements."),Type_0_recursively_references_itself_as_a_base_type:t(2310,e.DiagnosticCategory.Error,"Type_0_recursively_references_itself_as_a_base_type_2310","Type '{0}' recursively references itself as a base type."),A_class_may_only_extend_another_class:t(2311,e.DiagnosticCategory.Error,"A_class_may_only_extend_another_class_2311","A class may only extend another class."),An_interface_may_only_extend_a_class_or_another_interface:t(2312,e.DiagnosticCategory.Error,"An_interface_may_only_extend_a_class_or_another_interface_2312","An interface may only extend a class or another interface."),Type_parameter_0_has_a_circular_constraint:t(2313,e.DiagnosticCategory.Error,"Type_parameter_0_has_a_circular_constraint_2313","Type parameter '{0}' has a circular constraint."),Generic_type_0_requires_1_type_argument_s:t(2314,e.DiagnosticCategory.Error,"Generic_type_0_requires_1_type_argument_s_2314","Generic type '{0}' requires {1} type argument(s)."),Type_0_is_not_generic:t(2315,e.DiagnosticCategory.Error,"Type_0_is_not_generic_2315","Type '{0}' is not generic."),Global_type_0_must_be_a_class_or_interface_type:t(2316,e.DiagnosticCategory.Error,"Global_type_0_must_be_a_class_or_interface_type_2316","Global type '{0}' must be a class or interface type."),Global_type_0_must_have_1_type_parameter_s:t(2317,e.DiagnosticCategory.Error,"Global_type_0_must_have_1_type_parameter_s_2317","Global type '{0}' must have {1} type parameter(s)."),Cannot_find_global_type_0:t(2318,e.DiagnosticCategory.Error,"Cannot_find_global_type_0_2318","Cannot find global type '{0}'."),Named_property_0_of_types_1_and_2_are_not_identical:t(2319,e.DiagnosticCategory.Error,"Named_property_0_of_types_1_and_2_are_not_identical_2319","Named property '{0}' of types '{1}' and '{2}' are not identical."),Interface_0_cannot_simultaneously_extend_types_1_and_2:t(2320,e.DiagnosticCategory.Error,"Interface_0_cannot_simultaneously_extend_types_1_and_2_2320","Interface '{0}' cannot simultaneously extend types '{1}' and '{2}'."),Excessive_stack_depth_comparing_types_0_and_1:t(2321,e.DiagnosticCategory.Error,"Excessive_stack_depth_comparing_types_0_and_1_2321","Excessive stack depth comparing types '{0}' and '{1}'."),Type_0_is_not_assignable_to_type_1:t(2322,e.DiagnosticCategory.Error,"Type_0_is_not_assignable_to_type_1_2322","Type '{0}' is not assignable to type '{1}'."),Cannot_redeclare_exported_variable_0:t(2323,e.DiagnosticCategory.Error,"Cannot_redeclare_exported_variable_0_2323","Cannot redeclare exported variable '{0}'."),Property_0_is_missing_in_type_1:t(2324,e.DiagnosticCategory.Error,"Property_0_is_missing_in_type_1_2324","Property '{0}' is missing in type '{1}'."),Property_0_is_private_in_type_1_but_not_in_type_2:t(2325,e.DiagnosticCategory.Error,"Property_0_is_private_in_type_1_but_not_in_type_2_2325","Property '{0}' is private in type '{1}' but not in type '{2}'."),Types_of_property_0_are_incompatible:t(2326,e.DiagnosticCategory.Error,"Types_of_property_0_are_incompatible_2326","Types of property '{0}' are incompatible."),Property_0_is_optional_in_type_1_but_required_in_type_2:t(2327,e.DiagnosticCategory.Error,"Property_0_is_optional_in_type_1_but_required_in_type_2_2327","Property '{0}' is optional in type '{1}' but required in type '{2}'."),Types_of_parameters_0_and_1_are_incompatible:t(2328,e.DiagnosticCategory.Error,"Types_of_parameters_0_and_1_are_incompatible_2328","Types of parameters '{0}' and '{1}' are incompatible."),Index_signature_is_missing_in_type_0:t(2329,e.DiagnosticCategory.Error,"Index_signature_is_missing_in_type_0_2329","Index signature is missing in type '{0}'."),Index_signatures_are_incompatible:t(2330,e.DiagnosticCategory.Error,"Index_signatures_are_incompatible_2330","Index signatures are incompatible."),this_cannot_be_referenced_in_a_module_or_namespace_body:t(2331,e.DiagnosticCategory.Error,"this_cannot_be_referenced_in_a_module_or_namespace_body_2331","'this' cannot be referenced in a module or namespace body."),this_cannot_be_referenced_in_current_location:t(2332,e.DiagnosticCategory.Error,"this_cannot_be_referenced_in_current_location_2332","'this' cannot be referenced in current location."),this_cannot_be_referenced_in_constructor_arguments:t(2333,e.DiagnosticCategory.Error,"this_cannot_be_referenced_in_constructor_arguments_2333","'this' cannot be referenced in constructor arguments."),this_cannot_be_referenced_in_a_static_property_initializer:t(2334,e.DiagnosticCategory.Error,"this_cannot_be_referenced_in_a_static_property_initializer_2334","'this' cannot be referenced in a static property initializer."),super_can_only_be_referenced_in_a_derived_class:t(2335,e.DiagnosticCategory.Error,"super_can_only_be_referenced_in_a_derived_class_2335","'super' can only be referenced in a derived class."),super_cannot_be_referenced_in_constructor_arguments:t(2336,e.DiagnosticCategory.Error,"super_cannot_be_referenced_in_constructor_arguments_2336","'super' cannot be referenced in constructor arguments."),Super_calls_are_not_permitted_outside_constructors_or_in_nested_functions_inside_constructors:t(2337,e.DiagnosticCategory.Error,"Super_calls_are_not_permitted_outside_constructors_or_in_nested_functions_inside_constructors_2337","Super calls are not permitted outside constructors or in nested functions inside constructors."),super_property_access_is_permitted_only_in_a_constructor_member_function_or_member_accessor_of_a_derived_class:t(2338,e.DiagnosticCategory.Error,"super_property_access_is_permitted_only_in_a_constructor_member_function_or_member_accessor_of_a_der_2338","'super' property access is permitted only in a constructor, member function, or member accessor of a derived class."),Property_0_does_not_exist_on_type_1:t(2339,e.DiagnosticCategory.Error,"Property_0_does_not_exist_on_type_1_2339","Property '{0}' does not exist on type '{1}'."),Only_public_and_protected_methods_of_the_base_class_are_accessible_via_the_super_keyword:t(2340,e.DiagnosticCategory.Error,"Only_public_and_protected_methods_of_the_base_class_are_accessible_via_the_super_keyword_2340","Only public and protected methods of the base class are accessible via the 'super' keyword."),Property_0_is_private_and_only_accessible_within_class_1:t(2341,e.DiagnosticCategory.Error,"Property_0_is_private_and_only_accessible_within_class_1_2341","Property '{0}' is private and only accessible within class '{1}'."),An_index_expression_argument_must_be_of_type_string_number_symbol_or_any:t(2342,e.DiagnosticCategory.Error,"An_index_expression_argument_must_be_of_type_string_number_symbol_or_any_2342","An index expression argument must be of type 'string', 'number', 'symbol', or 'any'."),This_syntax_requires_an_imported_helper_named_1_but_module_0_has_no_exported_member_1:t(2343,e.DiagnosticCategory.Error,"This_syntax_requires_an_imported_helper_named_1_but_module_0_has_no_exported_member_1_2343","This syntax requires an imported helper named '{1}', but module '{0}' has no exported member '{1}'."),Type_0_does_not_satisfy_the_constraint_1:t(2344,e.DiagnosticCategory.Error,"Type_0_does_not_satisfy_the_constraint_1_2344","Type '{0}' does not satisfy the constraint '{1}'."),Argument_of_type_0_is_not_assignable_to_parameter_of_type_1:t(2345,e.DiagnosticCategory.Error,"Argument_of_type_0_is_not_assignable_to_parameter_of_type_1_2345","Argument of type '{0}' is not assignable to parameter of type '{1}'."),Call_target_does_not_contain_any_signatures:t(2346,e.DiagnosticCategory.Error,"Call_target_does_not_contain_any_signatures_2346","Call target does not contain any signatures."),Untyped_function_calls_may_not_accept_type_arguments:t(2347,e.DiagnosticCategory.Error,"Untyped_function_calls_may_not_accept_type_arguments_2347","Untyped function calls may not accept type arguments."),Value_of_type_0_is_not_callable_Did_you_mean_to_include_new:t(2348,e.DiagnosticCategory.Error,"Value_of_type_0_is_not_callable_Did_you_mean_to_include_new_2348","Value of type '{0}' is not callable. Did you mean to include 'new'?"),Cannot_invoke_an_expression_whose_type_lacks_a_call_signature_Type_0_has_no_compatible_call_signatures:t(2349,e.DiagnosticCategory.Error,"Cannot_invoke_an_expression_whose_type_lacks_a_call_signature_Type_0_has_no_compatible_call_signatur_2349","Cannot invoke an expression whose type lacks a call signature. Type '{0}' has no compatible call signatures."),Only_a_void_function_can_be_called_with_the_new_keyword:t(2350,e.DiagnosticCategory.Error,"Only_a_void_function_can_be_called_with_the_new_keyword_2350","Only a void function can be called with the 'new' keyword."),Cannot_use_new_with_an_expression_whose_type_lacks_a_call_or_construct_signature:t(2351,e.DiagnosticCategory.Error,"Cannot_use_new_with_an_expression_whose_type_lacks_a_call_or_construct_signature_2351","Cannot use 'new' with an expression whose type lacks a call or construct signature."),Type_0_cannot_be_converted_to_type_1:t(2352,e.DiagnosticCategory.Error,"Type_0_cannot_be_converted_to_type_1_2352","Type '{0}' cannot be converted to type '{1}'."),Object_literal_may_only_specify_known_properties_and_0_does_not_exist_in_type_1:t(2353,e.DiagnosticCategory.Error,"Object_literal_may_only_specify_known_properties_and_0_does_not_exist_in_type_1_2353","Object literal may only specify known properties, and '{0}' does not exist in type '{1}'."),This_syntax_requires_an_imported_helper_but_module_0_cannot_be_found:t(2354,e.DiagnosticCategory.Error,"This_syntax_requires_an_imported_helper_but_module_0_cannot_be_found_2354","This syntax requires an imported helper but module '{0}' cannot be found."),A_function_whose_declared_type_is_neither_void_nor_any_must_return_a_value:t(2355,e.DiagnosticCategory.Error,"A_function_whose_declared_type_is_neither_void_nor_any_must_return_a_value_2355","A function whose declared type is neither 'void' nor 'any' must return a value."),An_arithmetic_operand_must_be_of_type_any_number_or_an_enum_type:t(2356,e.DiagnosticCategory.Error,"An_arithmetic_operand_must_be_of_type_any_number_or_an_enum_type_2356","An arithmetic operand must be of type 'any', 'number' or an enum type."),The_operand_of_an_increment_or_decrement_operator_must_be_a_variable_or_a_property_access:t(2357,e.DiagnosticCategory.Error,"The_operand_of_an_increment_or_decrement_operator_must_be_a_variable_or_a_property_access_2357","The operand of an increment or decrement operator must be a variable or a property access."),The_left_hand_side_of_an_instanceof_expression_must_be_of_type_any_an_object_type_or_a_type_parameter:t(2358,e.DiagnosticCategory.Error,"The_left_hand_side_of_an_instanceof_expression_must_be_of_type_any_an_object_type_or_a_type_paramete_2358","The left-hand side of an 'instanceof' expression must be of type 'any', an object type or a type parameter."),The_right_hand_side_of_an_instanceof_expression_must_be_of_type_any_or_of_a_type_assignable_to_the_Function_interface_type:t(2359,e.DiagnosticCategory.Error,"The_right_hand_side_of_an_instanceof_expression_must_be_of_type_any_or_of_a_type_assignable_to_the_F_2359","The right-hand side of an 'instanceof' expression must be of type 'any' or of a type assignable to the 'Function' interface type."),The_left_hand_side_of_an_in_expression_must_be_of_type_any_string_number_or_symbol:t(2360,e.DiagnosticCategory.Error,"The_left_hand_side_of_an_in_expression_must_be_of_type_any_string_number_or_symbol_2360","The left-hand side of an 'in' expression must be of type 'any', 'string', 'number', or 'symbol'."),The_right_hand_side_of_an_in_expression_must_be_of_type_any_an_object_type_or_a_type_parameter:t(2361,e.DiagnosticCategory.Error,"The_right_hand_side_of_an_in_expression_must_be_of_type_any_an_object_type_or_a_type_parameter_2361","The right-hand side of an 'in' expression must be of type 'any', an object type or a type parameter."),The_left_hand_side_of_an_arithmetic_operation_must_be_of_type_any_number_or_an_enum_type:t(2362,e.DiagnosticCategory.Error,"The_left_hand_side_of_an_arithmetic_operation_must_be_of_type_any_number_or_an_enum_type_2362","The left-hand side of an arithmetic operation must be of type 'any', 'number' or an enum type."),The_right_hand_side_of_an_arithmetic_operation_must_be_of_type_any_number_or_an_enum_type:t(2363,e.DiagnosticCategory.Error,"The_right_hand_side_of_an_arithmetic_operation_must_be_of_type_any_number_or_an_enum_type_2363","The right-hand side of an arithmetic operation must be of type 'any', 'number' or an enum type."),The_left_hand_side_of_an_assignment_expression_must_be_a_variable_or_a_property_access:t(2364,e.DiagnosticCategory.Error,"The_left_hand_side_of_an_assignment_expression_must_be_a_variable_or_a_property_access_2364","The left-hand side of an assignment expression must be a variable or a property access."),Operator_0_cannot_be_applied_to_types_1_and_2:t(2365,e.DiagnosticCategory.Error,"Operator_0_cannot_be_applied_to_types_1_and_2_2365","Operator '{0}' cannot be applied to types '{1}' and '{2}'."),Function_lacks_ending_return_statement_and_return_type_does_not_include_undefined:t(2366,e.DiagnosticCategory.Error,"Function_lacks_ending_return_statement_and_return_type_does_not_include_undefined_2366","Function lacks ending return statement and return type does not include 'undefined'."),Type_parameter_name_cannot_be_0:t(2368,e.DiagnosticCategory.Error,"Type_parameter_name_cannot_be_0_2368","Type parameter name cannot be '{0}'."),A_parameter_property_is_only_allowed_in_a_constructor_implementation:t(2369,e.DiagnosticCategory.Error,"A_parameter_property_is_only_allowed_in_a_constructor_implementation_2369","A parameter property is only allowed in a constructor implementation."),A_rest_parameter_must_be_of_an_array_type:t(2370,e.DiagnosticCategory.Error,"A_rest_parameter_must_be_of_an_array_type_2370","A rest parameter must be of an array type."),A_parameter_initializer_is_only_allowed_in_a_function_or_constructor_implementation:t(2371,e.DiagnosticCategory.Error,"A_parameter_initializer_is_only_allowed_in_a_function_or_constructor_implementation_2371","A parameter initializer is only allowed in a function or constructor implementation."),Parameter_0_cannot_be_referenced_in_its_initializer:t(2372,e.DiagnosticCategory.Error,"Parameter_0_cannot_be_referenced_in_its_initializer_2372","Parameter '{0}' cannot be referenced in its initializer."),Initializer_of_parameter_0_cannot_reference_identifier_1_declared_after_it:t(2373,e.DiagnosticCategory.Error,"Initializer_of_parameter_0_cannot_reference_identifier_1_declared_after_it_2373","Initializer of parameter '{0}' cannot reference identifier '{1}' declared after it."),Duplicate_string_index_signature:t(2374,e.DiagnosticCategory.Error,"Duplicate_string_index_signature_2374","Duplicate string index signature."),Duplicate_number_index_signature:t(2375,e.DiagnosticCategory.Error,"Duplicate_number_index_signature_2375","Duplicate number index signature."),A_super_call_must_be_the_first_statement_in_the_constructor_when_a_class_contains_initialized_properties_or_has_parameter_properties:t(2376,e.DiagnosticCategory.Error,"A_super_call_must_be_the_first_statement_in_the_constructor_when_a_class_contains_initialized_proper_2376","A 'super' call must be the first statement in the constructor when a class contains initialized properties or has parameter properties."),Constructors_for_derived_classes_must_contain_a_super_call:t(2377,e.DiagnosticCategory.Error,"Constructors_for_derived_classes_must_contain_a_super_call_2377","Constructors for derived classes must contain a 'super' call."),A_get_accessor_must_return_a_value:t(2378,e.DiagnosticCategory.Error,"A_get_accessor_must_return_a_value_2378","A 'get' accessor must return a value."),Getter_and_setter_accessors_do_not_agree_in_visibility:t(2379,e.DiagnosticCategory.Error,"Getter_and_setter_accessors_do_not_agree_in_visibility_2379","Getter and setter accessors do not agree in visibility."),get_and_set_accessor_must_have_the_same_type:t(2380,e.DiagnosticCategory.Error,"get_and_set_accessor_must_have_the_same_type_2380","'get' and 'set' accessor must have the same type."),A_signature_with_an_implementation_cannot_use_a_string_literal_type:t(2381,e.DiagnosticCategory.Error,"A_signature_with_an_implementation_cannot_use_a_string_literal_type_2381","A signature with an implementation cannot use a string literal type."),Specialized_overload_signature_is_not_assignable_to_any_non_specialized_signature:t(2382,e.DiagnosticCategory.Error,"Specialized_overload_signature_is_not_assignable_to_any_non_specialized_signature_2382","Specialized overload signature is not assignable to any non-specialized signature."),Overload_signatures_must_all_be_exported_or_non_exported:t(2383,e.DiagnosticCategory.Error,"Overload_signatures_must_all_be_exported_or_non_exported_2383","Overload signatures must all be exported or non-exported."),Overload_signatures_must_all_be_ambient_or_non_ambient:t(2384,e.DiagnosticCategory.Error,"Overload_signatures_must_all_be_ambient_or_non_ambient_2384","Overload signatures must all be ambient or non-ambient."),Overload_signatures_must_all_be_public_private_or_protected:t(2385,e.DiagnosticCategory.Error,"Overload_signatures_must_all_be_public_private_or_protected_2385","Overload signatures must all be public, private or protected."),Overload_signatures_must_all_be_optional_or_required:t(2386,e.DiagnosticCategory.Error,"Overload_signatures_must_all_be_optional_or_required_2386","Overload signatures must all be optional or required."),Function_overload_must_be_static:t(2387,e.DiagnosticCategory.Error,"Function_overload_must_be_static_2387","Function overload must be static."),Function_overload_must_not_be_static:t(2388,e.DiagnosticCategory.Error,"Function_overload_must_not_be_static_2388","Function overload must not be static."),Function_implementation_name_must_be_0:t(2389,e.DiagnosticCategory.Error,"Function_implementation_name_must_be_0_2389","Function implementation name must be '{0}'."),Constructor_implementation_is_missing:t(2390,e.DiagnosticCategory.Error,"Constructor_implementation_is_missing_2390","Constructor implementation is missing."),Function_implementation_is_missing_or_not_immediately_following_the_declaration:t(2391,e.DiagnosticCategory.Error,"Function_implementation_is_missing_or_not_immediately_following_the_declaration_2391","Function implementation is missing or not immediately following the declaration."),Multiple_constructor_implementations_are_not_allowed:t(2392,e.DiagnosticCategory.Error,"Multiple_constructor_implementations_are_not_allowed_2392","Multiple constructor implementations are not allowed."),Duplicate_function_implementation:t(2393,e.DiagnosticCategory.Error,"Duplicate_function_implementation_2393","Duplicate function implementation."),Overload_signature_is_not_compatible_with_function_implementation:t(2394,e.DiagnosticCategory.Error,"Overload_signature_is_not_compatible_with_function_implementation_2394","Overload signature is not compatible with function implementation."),Individual_declarations_in_merged_declaration_0_must_be_all_exported_or_all_local:t(2395,e.DiagnosticCategory.Error,"Individual_declarations_in_merged_declaration_0_must_be_all_exported_or_all_local_2395","Individual declarations in merged declaration '{0}' must be all exported or all local."),Duplicate_identifier_arguments_Compiler_uses_arguments_to_initialize_rest_parameters:t(2396,e.DiagnosticCategory.Error,"Duplicate_identifier_arguments_Compiler_uses_arguments_to_initialize_rest_parameters_2396","Duplicate identifier 'arguments'. Compiler uses 'arguments' to initialize rest parameters."),Declaration_name_conflicts_with_built_in_global_identifier_0:t(2397,e.DiagnosticCategory.Error,"Declaration_name_conflicts_with_built_in_global_identifier_0_2397","Declaration name conflicts with built-in global identifier '{0}'."),Duplicate_identifier_this_Compiler_uses_variable_declaration_this_to_capture_this_reference:t(2399,e.DiagnosticCategory.Error,"Duplicate_identifier_this_Compiler_uses_variable_declaration_this_to_capture_this_reference_2399","Duplicate identifier '_this'. Compiler uses variable declaration '_this' to capture 'this' reference."),Expression_resolves_to_variable_declaration_this_that_compiler_uses_to_capture_this_reference:t(2400,e.DiagnosticCategory.Error,"Expression_resolves_to_variable_declaration_this_that_compiler_uses_to_capture_this_reference_2400","Expression resolves to variable declaration '_this' that compiler uses to capture 'this' reference."),Duplicate_identifier_super_Compiler_uses_super_to_capture_base_class_reference:t(2401,e.DiagnosticCategory.Error,"Duplicate_identifier_super_Compiler_uses_super_to_capture_base_class_reference_2401","Duplicate identifier '_super'. Compiler uses '_super' to capture base class reference."),Expression_resolves_to_super_that_compiler_uses_to_capture_base_class_reference:t(2402,e.DiagnosticCategory.Error,"Expression_resolves_to_super_that_compiler_uses_to_capture_base_class_reference_2402","Expression resolves to '_super' that compiler uses to capture base class reference."),Subsequent_variable_declarations_must_have_the_same_type_Variable_0_must_be_of_type_1_but_here_has_type_2:t(2403,e.DiagnosticCategory.Error,"Subsequent_variable_declarations_must_have_the_same_type_Variable_0_must_be_of_type_1_but_here_has_t_2403","Subsequent variable declarations must have the same type.  Variable '{0}' must be of type '{1}', but here has type '{2}'."),The_left_hand_side_of_a_for_in_statement_cannot_use_a_type_annotation:t(2404,e.DiagnosticCategory.Error,"The_left_hand_side_of_a_for_in_statement_cannot_use_a_type_annotation_2404","The left-hand side of a 'for...in' statement cannot use a type annotation."),The_left_hand_side_of_a_for_in_statement_must_be_of_type_string_or_any:t(2405,e.DiagnosticCategory.Error,"The_left_hand_side_of_a_for_in_statement_must_be_of_type_string_or_any_2405","The left-hand side of a 'for...in' statement must be of type 'string' or 'any'."),The_left_hand_side_of_a_for_in_statement_must_be_a_variable_or_a_property_access:t(2406,e.DiagnosticCategory.Error,"The_left_hand_side_of_a_for_in_statement_must_be_a_variable_or_a_property_access_2406","The left-hand side of a 'for...in' statement must be a variable or a property access."),The_right_hand_side_of_a_for_in_statement_must_be_of_type_any_an_object_type_or_a_type_parameter:t(2407,e.DiagnosticCategory.Error,"The_right_hand_side_of_a_for_in_statement_must_be_of_type_any_an_object_type_or_a_type_parameter_2407","The right-hand side of a 'for...in' statement must be of type 'any', an object type or a type parameter."),Setters_cannot_return_a_value:t(2408,e.DiagnosticCategory.Error,"Setters_cannot_return_a_value_2408","Setters cannot return a value."),Return_type_of_constructor_signature_must_be_assignable_to_the_instance_type_of_the_class:t(2409,e.DiagnosticCategory.Error,"Return_type_of_constructor_signature_must_be_assignable_to_the_instance_type_of_the_class_2409","Return type of constructor signature must be assignable to the instance type of the class."),The_with_statement_is_not_supported_All_symbols_in_a_with_block_will_have_type_any:t(2410,e.DiagnosticCategory.Error,"The_with_statement_is_not_supported_All_symbols_in_a_with_block_will_have_type_any_2410","The 'with' statement is not supported. All symbols in a 'with' block will have type 'any'."),Property_0_of_type_1_is_not_assignable_to_string_index_type_2:t(2411,e.DiagnosticCategory.Error,"Property_0_of_type_1_is_not_assignable_to_string_index_type_2_2411","Property '{0}' of type '{1}' is not assignable to string index type '{2}'."),Property_0_of_type_1_is_not_assignable_to_numeric_index_type_2:t(2412,e.DiagnosticCategory.Error,"Property_0_of_type_1_is_not_assignable_to_numeric_index_type_2_2412","Property '{0}' of type '{1}' is not assignable to numeric index type '{2}'."),Numeric_index_type_0_is_not_assignable_to_string_index_type_1:t(2413,e.DiagnosticCategory.Error,"Numeric_index_type_0_is_not_assignable_to_string_index_type_1_2413","Numeric index type '{0}' is not assignable to string index type '{1}'."),Class_name_cannot_be_0:t(2414,e.DiagnosticCategory.Error,"Class_name_cannot_be_0_2414","Class name cannot be '{0}'."),Class_0_incorrectly_extends_base_class_1:t(2415,e.DiagnosticCategory.Error,"Class_0_incorrectly_extends_base_class_1_2415","Class '{0}' incorrectly extends base class '{1}'."),Class_static_side_0_incorrectly_extends_base_class_static_side_1:t(2417,e.DiagnosticCategory.Error,"Class_static_side_0_incorrectly_extends_base_class_static_side_1_2417","Class static side '{0}' incorrectly extends base class static side '{1}'."),Class_0_incorrectly_implements_interface_1:t(2420,e.DiagnosticCategory.Error,"Class_0_incorrectly_implements_interface_1_2420","Class '{0}' incorrectly implements interface '{1}'."),A_class_may_only_implement_another_class_or_interface:t(2422,e.DiagnosticCategory.Error,"A_class_may_only_implement_another_class_or_interface_2422","A class may only implement another class or interface."),Class_0_defines_instance_member_function_1_but_extended_class_2_defines_it_as_instance_member_accessor:t(2423,e.DiagnosticCategory.Error,"Class_0_defines_instance_member_function_1_but_extended_class_2_defines_it_as_instance_member_access_2423","Class '{0}' defines instance member function '{1}', but extended class '{2}' defines it as instance member accessor."),Class_0_defines_instance_member_function_1_but_extended_class_2_defines_it_as_instance_member_property:t(2424,e.DiagnosticCategory.Error,"Class_0_defines_instance_member_function_1_but_extended_class_2_defines_it_as_instance_member_proper_2424","Class '{0}' defines instance member function '{1}', but extended class '{2}' defines it as instance member property."),Class_0_defines_instance_member_property_1_but_extended_class_2_defines_it_as_instance_member_function:t(2425,e.DiagnosticCategory.Error,"Class_0_defines_instance_member_property_1_but_extended_class_2_defines_it_as_instance_member_functi_2425","Class '{0}' defines instance member property '{1}', but extended class '{2}' defines it as instance member function."),Class_0_defines_instance_member_accessor_1_but_extended_class_2_defines_it_as_instance_member_function:t(2426,e.DiagnosticCategory.Error,"Class_0_defines_instance_member_accessor_1_but_extended_class_2_defines_it_as_instance_member_functi_2426","Class '{0}' defines instance member accessor '{1}', but extended class '{2}' defines it as instance member function."),Interface_name_cannot_be_0:t(2427,e.DiagnosticCategory.Error,"Interface_name_cannot_be_0_2427","Interface name cannot be '{0}'."),All_declarations_of_0_must_have_identical_type_parameters:t(2428,e.DiagnosticCategory.Error,"All_declarations_of_0_must_have_identical_type_parameters_2428","All declarations of '{0}' must have identical type parameters."),Interface_0_incorrectly_extends_interface_1:t(2430,e.DiagnosticCategory.Error,"Interface_0_incorrectly_extends_interface_1_2430","Interface '{0}' incorrectly extends interface '{1}'."),Enum_name_cannot_be_0:t(2431,e.DiagnosticCategory.Error,"Enum_name_cannot_be_0_2431","Enum name cannot be '{0}'."),In_an_enum_with_multiple_declarations_only_one_declaration_can_omit_an_initializer_for_its_first_enum_element:t(2432,e.DiagnosticCategory.Error,"In_an_enum_with_multiple_declarations_only_one_declaration_can_omit_an_initializer_for_its_first_enu_2432","In an enum with multiple declarations, only one declaration can omit an initializer for its first enum element."),A_namespace_declaration_cannot_be_in_a_different_file_from_a_class_or_function_with_which_it_is_merged:t(2433,e.DiagnosticCategory.Error,"A_namespace_declaration_cannot_be_in_a_different_file_from_a_class_or_function_with_which_it_is_merg_2433","A namespace declaration cannot be in a different file from a class or function with which it is merged."),A_namespace_declaration_cannot_be_located_prior_to_a_class_or_function_with_which_it_is_merged:t(2434,e.DiagnosticCategory.Error,"A_namespace_declaration_cannot_be_located_prior_to_a_class_or_function_with_which_it_is_merged_2434","A namespace declaration cannot be located prior to a class or function with which it is merged."),Ambient_modules_cannot_be_nested_in_other_modules_or_namespaces:t(2435,e.DiagnosticCategory.Error,"Ambient_modules_cannot_be_nested_in_other_modules_or_namespaces_2435","Ambient modules cannot be nested in other modules or namespaces."),Ambient_module_declaration_cannot_specify_relative_module_name:t(2436,e.DiagnosticCategory.Error,"Ambient_module_declaration_cannot_specify_relative_module_name_2436","Ambient module declaration cannot specify relative module name."),Module_0_is_hidden_by_a_local_declaration_with_the_same_name:t(2437,e.DiagnosticCategory.Error,"Module_0_is_hidden_by_a_local_declaration_with_the_same_name_2437","Module '{0}' is hidden by a local declaration with the same name."),Import_name_cannot_be_0:t(2438,e.DiagnosticCategory.Error,"Import_name_cannot_be_0_2438","Import name cannot be '{0}'."),Import_or_export_declaration_in_an_ambient_module_declaration_cannot_reference_module_through_relative_module_name:t(2439,e.DiagnosticCategory.Error,"Import_or_export_declaration_in_an_ambient_module_declaration_cannot_reference_module_through_relati_2439","Import or export declaration in an ambient module declaration cannot reference module through relative module name."),Import_declaration_conflicts_with_local_declaration_of_0:t(2440,e.DiagnosticCategory.Error,"Import_declaration_conflicts_with_local_declaration_of_0_2440","Import declaration conflicts with local declaration of '{0}'."),Duplicate_identifier_0_Compiler_reserves_name_1_in_top_level_scope_of_a_module:t(2441,e.DiagnosticCategory.Error,"Duplicate_identifier_0_Compiler_reserves_name_1_in_top_level_scope_of_a_module_2441","Duplicate identifier '{0}'. Compiler reserves name '{1}' in top level scope of a module."),Types_have_separate_declarations_of_a_private_property_0:t(2442,e.DiagnosticCategory.Error,"Types_have_separate_declarations_of_a_private_property_0_2442","Types have separate declarations of a private property '{0}'."),Property_0_is_protected_but_type_1_is_not_a_class_derived_from_2:t(2443,e.DiagnosticCategory.Error,"Property_0_is_protected_but_type_1_is_not_a_class_derived_from_2_2443","Property '{0}' is protected but type '{1}' is not a class derived from '{2}'."),Property_0_is_protected_in_type_1_but_public_in_type_2:t(2444,e.DiagnosticCategory.Error,"Property_0_is_protected_in_type_1_but_public_in_type_2_2444","Property '{0}' is protected in type '{1}' but public in type '{2}'."),Property_0_is_protected_and_only_accessible_within_class_1_and_its_subclasses:t(2445,e.DiagnosticCategory.Error,"Property_0_is_protected_and_only_accessible_within_class_1_and_its_subclasses_2445","Property '{0}' is protected and only accessible within class '{1}' and its subclasses."),Property_0_is_protected_and_only_accessible_through_an_instance_of_class_1:t(2446,e.DiagnosticCategory.Error,"Property_0_is_protected_and_only_accessible_through_an_instance_of_class_1_2446","Property '{0}' is protected and only accessible through an instance of class '{1}'."),The_0_operator_is_not_allowed_for_boolean_types_Consider_using_1_instead:t(2447,e.DiagnosticCategory.Error,"The_0_operator_is_not_allowed_for_boolean_types_Consider_using_1_instead_2447","The '{0}' operator is not allowed for boolean types. Consider using '{1}' instead."),Block_scoped_variable_0_used_before_its_declaration:t(2448,e.DiagnosticCategory.Error,"Block_scoped_variable_0_used_before_its_declaration_2448","Block-scoped variable '{0}' used before its declaration."),Class_0_used_before_its_declaration:t(2449,e.DiagnosticCategory.Error,"Class_0_used_before_its_declaration_2449","Class '{0}' used before its declaration."),Enum_0_used_before_its_declaration:t(2450,e.DiagnosticCategory.Error,"Enum_0_used_before_its_declaration_2450","Enum '{0}' used before its declaration."),Cannot_redeclare_block_scoped_variable_0:t(2451,e.DiagnosticCategory.Error,"Cannot_redeclare_block_scoped_variable_0_2451","Cannot redeclare block-scoped variable '{0}'."),An_enum_member_cannot_have_a_numeric_name:t(2452,e.DiagnosticCategory.Error,"An_enum_member_cannot_have_a_numeric_name_2452","An enum member cannot have a numeric name."),The_type_argument_for_type_parameter_0_cannot_be_inferred_from_the_usage_Consider_specifying_the_type_arguments_explicitly:t(2453,e.DiagnosticCategory.Error,"The_type_argument_for_type_parameter_0_cannot_be_inferred_from_the_usage_Consider_specifying_the_typ_2453","The type argument for type parameter '{0}' cannot be inferred from the usage. Consider specifying the type arguments explicitly."),Variable_0_is_used_before_being_assigned:t(2454,e.DiagnosticCategory.Error,"Variable_0_is_used_before_being_assigned_2454","Variable '{0}' is used before being assigned."),Type_argument_candidate_1_is_not_a_valid_type_argument_because_it_is_not_a_supertype_of_candidate_0:t(2455,e.DiagnosticCategory.Error,"Type_argument_candidate_1_is_not_a_valid_type_argument_because_it_is_not_a_supertype_of_candidate_0_2455","Type argument candidate '{1}' is not a valid type argument because it is not a supertype of candidate '{0}'."),Type_alias_0_circularly_references_itself:t(2456,e.DiagnosticCategory.Error,"Type_alias_0_circularly_references_itself_2456","Type alias '{0}' circularly references itself."),Type_alias_name_cannot_be_0:t(2457,e.DiagnosticCategory.Error,"Type_alias_name_cannot_be_0_2457","Type alias name cannot be '{0}'."),An_AMD_module_cannot_have_multiple_name_assignments:t(2458,e.DiagnosticCategory.Error,"An_AMD_module_cannot_have_multiple_name_assignments_2458","An AMD module cannot have multiple name assignments."),Type_0_has_no_property_1_and_no_string_index_signature:t(2459,e.DiagnosticCategory.Error,"Type_0_has_no_property_1_and_no_string_index_signature_2459","Type '{0}' has no property '{1}' and no string index signature."),Type_0_has_no_property_1:t(2460,e.DiagnosticCategory.Error,"Type_0_has_no_property_1_2460","Type '{0}' has no property '{1}'."),Type_0_is_not_an_array_type:t(2461,e.DiagnosticCategory.Error,"Type_0_is_not_an_array_type_2461","Type '{0}' is not an array type."),A_rest_element_must_be_last_in_a_destructuring_pattern:t(2462,e.DiagnosticCategory.Error,"A_rest_element_must_be_last_in_a_destructuring_pattern_2462","A rest element must be last in a destructuring pattern."),A_binding_pattern_parameter_cannot_be_optional_in_an_implementation_signature:t(2463,e.DiagnosticCategory.Error,"A_binding_pattern_parameter_cannot_be_optional_in_an_implementation_signature_2463","A binding pattern parameter cannot be optional in an implementation signature."),A_computed_property_name_must_be_of_type_string_number_symbol_or_any:t(2464,e.DiagnosticCategory.Error,"A_computed_property_name_must_be_of_type_string_number_symbol_or_any_2464","A computed property name must be of type 'string', 'number', 'symbol', or 'any'."),this_cannot_be_referenced_in_a_computed_property_name:t(2465,e.DiagnosticCategory.Error,"this_cannot_be_referenced_in_a_computed_property_name_2465","'this' cannot be referenced in a computed property name."),super_cannot_be_referenced_in_a_computed_property_name:t(2466,e.DiagnosticCategory.Error,"super_cannot_be_referenced_in_a_computed_property_name_2466","'super' cannot be referenced in a computed property name."),A_computed_property_name_cannot_reference_a_type_parameter_from_its_containing_type:t(2467,e.DiagnosticCategory.Error,"A_computed_property_name_cannot_reference_a_type_parameter_from_its_containing_type_2467","A computed property name cannot reference a type parameter from its containing type."),Cannot_find_global_value_0:t(2468,e.DiagnosticCategory.Error,"Cannot_find_global_value_0_2468","Cannot find global value '{0}'."),The_0_operator_cannot_be_applied_to_type_symbol:t(2469,e.DiagnosticCategory.Error,"The_0_operator_cannot_be_applied_to_type_symbol_2469","The '{0}' operator cannot be applied to type 'symbol'."),Symbol_reference_does_not_refer_to_the_global_Symbol_constructor_object:t(2470,e.DiagnosticCategory.Error,"Symbol_reference_does_not_refer_to_the_global_Symbol_constructor_object_2470","'Symbol' reference does not refer to the global Symbol constructor object."),A_computed_property_name_of_the_form_0_must_be_of_type_symbol:t(2471,e.DiagnosticCategory.Error,"A_computed_property_name_of_the_form_0_must_be_of_type_symbol_2471","A computed property name of the form '{0}' must be of type 'symbol'."),Spread_operator_in_new_expressions_is_only_available_when_targeting_ECMAScript_5_and_higher:t(2472,e.DiagnosticCategory.Error,"Spread_operator_in_new_expressions_is_only_available_when_targeting_ECMAScript_5_and_higher_2472","Spread operator in 'new' expressions is only available when targeting ECMAScript 5 and higher."),Enum_declarations_must_all_be_const_or_non_const:t(2473,e.DiagnosticCategory.Error,"Enum_declarations_must_all_be_const_or_non_const_2473","Enum declarations must all be const or non-const."),In_const_enum_declarations_member_initializer_must_be_constant_expression:t(2474,e.DiagnosticCategory.Error,"In_const_enum_declarations_member_initializer_must_be_constant_expression_2474","In 'const' enum declarations member initializer must be constant expression."),const_enums_can_only_be_used_in_property_or_index_access_expressions_or_the_right_hand_side_of_an_import_declaration_or_export_assignment:t(2475,e.DiagnosticCategory.Error,"const_enums_can_only_be_used_in_property_or_index_access_expressions_or_the_right_hand_side_of_an_im_2475","'const' enums can only be used in property or index access expressions or the right hand side of an import declaration or export assignment."),A_const_enum_member_can_only_be_accessed_using_a_string_literal:t(2476,e.DiagnosticCategory.Error,"A_const_enum_member_can_only_be_accessed_using_a_string_literal_2476","A const enum member can only be accessed using a string literal."),const_enum_member_initializer_was_evaluated_to_a_non_finite_value:t(2477,e.DiagnosticCategory.Error,"const_enum_member_initializer_was_evaluated_to_a_non_finite_value_2477","'const' enum member initializer was evaluated to a non-finite value."),const_enum_member_initializer_was_evaluated_to_disallowed_value_NaN:t(2478,e.DiagnosticCategory.Error,"const_enum_member_initializer_was_evaluated_to_disallowed_value_NaN_2478","'const' enum member initializer was evaluated to disallowed value 'NaN'."),Property_0_does_not_exist_on_const_enum_1:t(2479,e.DiagnosticCategory.Error,"Property_0_does_not_exist_on_const_enum_1_2479","Property '{0}' does not exist on 'const' enum '{1}'."),let_is_not_allowed_to_be_used_as_a_name_in_let_or_const_declarations:t(2480,e.DiagnosticCategory.Error,"let_is_not_allowed_to_be_used_as_a_name_in_let_or_const_declarations_2480","'let' is not allowed to be used as a name in 'let' or 'const' declarations."),Cannot_initialize_outer_scoped_variable_0_in_the_same_scope_as_block_scoped_declaration_1:t(2481,e.DiagnosticCategory.Error,"Cannot_initialize_outer_scoped_variable_0_in_the_same_scope_as_block_scoped_declaration_1_2481","Cannot initialize outer scoped variable '{0}' in the same scope as block scoped declaration '{1}'."),The_left_hand_side_of_a_for_of_statement_cannot_use_a_type_annotation:t(2483,e.DiagnosticCategory.Error,"The_left_hand_side_of_a_for_of_statement_cannot_use_a_type_annotation_2483","The left-hand side of a 'for...of' statement cannot use a type annotation."),Export_declaration_conflicts_with_exported_declaration_of_0:t(2484,e.DiagnosticCategory.Error,"Export_declaration_conflicts_with_exported_declaration_of_0_2484","Export declaration conflicts with exported declaration of '{0}'."),The_left_hand_side_of_a_for_of_statement_must_be_a_variable_or_a_property_access:t(2487,e.DiagnosticCategory.Error,"The_left_hand_side_of_a_for_of_statement_must_be_a_variable_or_a_property_access_2487","The left-hand side of a 'for...of' statement must be a variable or a property access."),Type_must_have_a_Symbol_iterator_method_that_returns_an_iterator:t(2488,e.DiagnosticCategory.Error,"Type_must_have_a_Symbol_iterator_method_that_returns_an_iterator_2488","Type must have a '[Symbol.iterator]()' method that returns an iterator."),An_iterator_must_have_a_next_method:t(2489,e.DiagnosticCategory.Error,"An_iterator_must_have_a_next_method_2489","An iterator must have a 'next()' method."),The_type_returned_by_the_next_method_of_an_iterator_must_have_a_value_property:t(2490,e.DiagnosticCategory.Error,"The_type_returned_by_the_next_method_of_an_iterator_must_have_a_value_property_2490","The type returned by the 'next()' method of an iterator must have a 'value' property."),The_left_hand_side_of_a_for_in_statement_cannot_be_a_destructuring_pattern:t(2491,e.DiagnosticCategory.Error,"The_left_hand_side_of_a_for_in_statement_cannot_be_a_destructuring_pattern_2491","The left-hand side of a 'for...in' statement cannot be a destructuring pattern."),Cannot_redeclare_identifier_0_in_catch_clause:t(2492,e.DiagnosticCategory.Error,"Cannot_redeclare_identifier_0_in_catch_clause_2492","Cannot redeclare identifier '{0}' in catch clause."),Tuple_type_0_with_length_1_cannot_be_assigned_to_tuple_with_length_2:t(2493,e.DiagnosticCategory.Error,"Tuple_type_0_with_length_1_cannot_be_assigned_to_tuple_with_length_2_2493","Tuple type '{0}' with length '{1}' cannot be assigned to tuple with length '{2}'."),Using_a_string_in_a_for_of_statement_is_only_supported_in_ECMAScript_5_and_higher:t(2494,e.DiagnosticCategory.Error,"Using_a_string_in_a_for_of_statement_is_only_supported_in_ECMAScript_5_and_higher_2494","Using a string in a 'for...of' statement is only supported in ECMAScript 5 and higher."),Type_0_is_not_an_array_type_or_a_string_type:t(2495,e.DiagnosticCategory.Error,"Type_0_is_not_an_array_type_or_a_string_type_2495","Type '{0}' is not an array type or a string type."),The_arguments_object_cannot_be_referenced_in_an_arrow_function_in_ES3_and_ES5_Consider_using_a_standard_function_expression:t(2496,e.DiagnosticCategory.Error,"The_arguments_object_cannot_be_referenced_in_an_arrow_function_in_ES3_and_ES5_Consider_using_a_stand_2496","The 'arguments' object cannot be referenced in an arrow function in ES3 and ES5. Consider using a standard function expression."),Module_0_resolves_to_a_non_module_entity_and_cannot_be_imported_using_this_construct:t(2497,e.DiagnosticCategory.Error,"Module_0_resolves_to_a_non_module_entity_and_cannot_be_imported_using_this_construct_2497","Module '{0}' resolves to a non-module entity and cannot be imported using this construct."),Module_0_uses_export_and_cannot_be_used_with_export_Asterisk:t(2498,e.DiagnosticCategory.Error,"Module_0_uses_export_and_cannot_be_used_with_export_Asterisk_2498","Module '{0}' uses 'export =' and cannot be used with 'export *'."),An_interface_can_only_extend_an_identifier_Slashqualified_name_with_optional_type_arguments:t(2499,e.DiagnosticCategory.Error,"An_interface_can_only_extend_an_identifier_Slashqualified_name_with_optional_type_arguments_2499","An interface can only extend an identifier/qualified-name with optional type arguments."),A_class_can_only_implement_an_identifier_Slashqualified_name_with_optional_type_arguments:t(2500,e.DiagnosticCategory.Error,"A_class_can_only_implement_an_identifier_Slashqualified_name_with_optional_type_arguments_2500","A class can only implement an identifier/qualified-name with optional type arguments."),A_rest_element_cannot_contain_a_binding_pattern:t(2501,e.DiagnosticCategory.Error,"A_rest_element_cannot_contain_a_binding_pattern_2501","A rest element cannot contain a binding pattern."),_0_is_referenced_directly_or_indirectly_in_its_own_type_annotation:t(2502,e.DiagnosticCategory.Error,"_0_is_referenced_directly_or_indirectly_in_its_own_type_annotation_2502","'{0}' is referenced directly or indirectly in its own type annotation."),Cannot_find_namespace_0:t(2503,e.DiagnosticCategory.Error,"Cannot_find_namespace_0_2503","Cannot find namespace '{0}'."),Type_must_have_a_Symbol_asyncIterator_method_that_returns_an_async_iterator:t(2504,e.DiagnosticCategory.Error,"Type_must_have_a_Symbol_asyncIterator_method_that_returns_an_async_iterator_2504","Type must have a '[Symbol.asyncIterator]()' method that returns an async iterator."),A_generator_cannot_have_a_void_type_annotation:t(2505,e.DiagnosticCategory.Error,"A_generator_cannot_have_a_void_type_annotation_2505","A generator cannot have a 'void' type annotation."),_0_is_referenced_directly_or_indirectly_in_its_own_base_expression:t(2506,e.DiagnosticCategory.Error,"_0_is_referenced_directly_or_indirectly_in_its_own_base_expression_2506","'{0}' is referenced directly or indirectly in its own base expression."),Type_0_is_not_a_constructor_function_type:t(2507,e.DiagnosticCategory.Error,"Type_0_is_not_a_constructor_function_type_2507","Type '{0}' is not a constructor function type."),No_base_constructor_has_the_specified_number_of_type_arguments:t(2508,e.DiagnosticCategory.Error,"No_base_constructor_has_the_specified_number_of_type_arguments_2508","No base constructor has the specified number of type arguments."),Base_constructor_return_type_0_is_not_a_class_or_interface_type:t(2509,e.DiagnosticCategory.Error,"Base_constructor_return_type_0_is_not_a_class_or_interface_type_2509","Base constructor return type '{0}' is not a class or interface type."),Base_constructors_must_all_have_the_same_return_type:t(2510,e.DiagnosticCategory.Error,"Base_constructors_must_all_have_the_same_return_type_2510","Base constructors must all have the same return type."),Cannot_create_an_instance_of_the_abstract_class_0:t(2511,e.DiagnosticCategory.Error,"Cannot_create_an_instance_of_the_abstract_class_0_2511","Cannot create an instance of the abstract class '{0}'."),Overload_signatures_must_all_be_abstract_or_non_abstract:t(2512,e.DiagnosticCategory.Error,"Overload_signatures_must_all_be_abstract_or_non_abstract_2512","Overload signatures must all be abstract or non-abstract."),Abstract_method_0_in_class_1_cannot_be_accessed_via_super_expression:t(2513,e.DiagnosticCategory.Error,"Abstract_method_0_in_class_1_cannot_be_accessed_via_super_expression_2513","Abstract method '{0}' in class '{1}' cannot be accessed via super expression."),Classes_containing_abstract_methods_must_be_marked_abstract:t(2514,e.DiagnosticCategory.Error,"Classes_containing_abstract_methods_must_be_marked_abstract_2514","Classes containing abstract methods must be marked abstract."),Non_abstract_class_0_does_not_implement_inherited_abstract_member_1_from_class_2:t(2515,e.DiagnosticCategory.Error,"Non_abstract_class_0_does_not_implement_inherited_abstract_member_1_from_class_2_2515","Non-abstract class '{0}' does not implement inherited abstract member '{1}' from class '{2}'."),All_declarations_of_an_abstract_method_must_be_consecutive:t(2516,e.DiagnosticCategory.Error,"All_declarations_of_an_abstract_method_must_be_consecutive_2516","All declarations of an abstract method must be consecutive."),Cannot_assign_an_abstract_constructor_type_to_a_non_abstract_constructor_type:t(2517,e.DiagnosticCategory.Error,"Cannot_assign_an_abstract_constructor_type_to_a_non_abstract_constructor_type_2517","Cannot assign an abstract constructor type to a non-abstract constructor type."),A_this_based_type_guard_is_not_compatible_with_a_parameter_based_type_guard:t(2518,e.DiagnosticCategory.Error,"A_this_based_type_guard_is_not_compatible_with_a_parameter_based_type_guard_2518","A 'this'-based type guard is not compatible with a parameter-based type guard."),An_async_iterator_must_have_a_next_method:t(2519,e.DiagnosticCategory.Error,"An_async_iterator_must_have_a_next_method_2519","An async iterator must have a 'next()' method."),Duplicate_identifier_0_Compiler_uses_declaration_1_to_support_async_functions:t(2520,e.DiagnosticCategory.Error,"Duplicate_identifier_0_Compiler_uses_declaration_1_to_support_async_functions_2520","Duplicate identifier '{0}'. Compiler uses declaration '{1}' to support async functions."),Expression_resolves_to_variable_declaration_0_that_compiler_uses_to_support_async_functions:t(2521,e.DiagnosticCategory.Error,"Expression_resolves_to_variable_declaration_0_that_compiler_uses_to_support_async_functions_2521","Expression resolves to variable declaration '{0}' that compiler uses to support async functions."),The_arguments_object_cannot_be_referenced_in_an_async_function_or_method_in_ES3_and_ES5_Consider_using_a_standard_function_or_method:t(2522,e.DiagnosticCategory.Error,"The_arguments_object_cannot_be_referenced_in_an_async_function_or_method_in_ES3_and_ES5_Consider_usi_2522","The 'arguments' object cannot be referenced in an async function or method in ES3 and ES5. Consider using a standard function or method."),yield_expressions_cannot_be_used_in_a_parameter_initializer:t(2523,e.DiagnosticCategory.Error,"yield_expressions_cannot_be_used_in_a_parameter_initializer_2523","'yield' expressions cannot be used in a parameter initializer."),await_expressions_cannot_be_used_in_a_parameter_initializer:t(2524,e.DiagnosticCategory.Error,"await_expressions_cannot_be_used_in_a_parameter_initializer_2524","'await' expressions cannot be used in a parameter initializer."),Initializer_provides_no_value_for_this_binding_element_and_the_binding_element_has_no_default_value:t(2525,e.DiagnosticCategory.Error,"Initializer_provides_no_value_for_this_binding_element_and_the_binding_element_has_no_default_value_2525","Initializer provides no value for this binding element and the binding element has no default value."),A_this_type_is_available_only_in_a_non_static_member_of_a_class_or_interface:t(2526,e.DiagnosticCategory.Error,"A_this_type_is_available_only_in_a_non_static_member_of_a_class_or_interface_2526","A 'this' type is available only in a non-static member of a class or interface."),The_inferred_type_of_0_references_an_inaccessible_this_type_A_type_annotation_is_necessary:t(2527,e.DiagnosticCategory.Error,"The_inferred_type_of_0_references_an_inaccessible_this_type_A_type_annotation_is_necessary_2527","The inferred type of '{0}' references an inaccessible 'this' type. A type annotation is necessary."),A_module_cannot_have_multiple_default_exports:t(2528,e.DiagnosticCategory.Error,"A_module_cannot_have_multiple_default_exports_2528","A module cannot have multiple default exports."),Duplicate_identifier_0_Compiler_reserves_name_1_in_top_level_scope_of_a_module_containing_async_functions:t(2529,e.DiagnosticCategory.Error,"Duplicate_identifier_0_Compiler_reserves_name_1_in_top_level_scope_of_a_module_containing_async_func_2529","Duplicate identifier '{0}'. Compiler reserves name '{1}' in top level scope of a module containing async functions."),Property_0_is_incompatible_with_index_signature:t(2530,e.DiagnosticCategory.Error,"Property_0_is_incompatible_with_index_signature_2530","Property '{0}' is incompatible with index signature."),Object_is_possibly_null:t(2531,e.DiagnosticCategory.Error,"Object_is_possibly_null_2531","Object is possibly 'null'."),Object_is_possibly_undefined:t(2532,e.DiagnosticCategory.Error,"Object_is_possibly_undefined_2532","Object is possibly 'undefined'."),Object_is_possibly_null_or_undefined:t(2533,e.DiagnosticCategory.Error,"Object_is_possibly_null_or_undefined_2533","Object is possibly 'null' or 'undefined'."),A_function_returning_never_cannot_have_a_reachable_end_point:t(2534,e.DiagnosticCategory.Error,"A_function_returning_never_cannot_have_a_reachable_end_point_2534","A function returning 'never' cannot have a reachable end point."),Enum_type_0_has_members_with_initializers_that_are_not_literals:t(2535,e.DiagnosticCategory.Error,"Enum_type_0_has_members_with_initializers_that_are_not_literals_2535","Enum type '{0}' has members with initializers that are not literals."),Type_0_cannot_be_used_to_index_type_1:t(2536,e.DiagnosticCategory.Error,"Type_0_cannot_be_used_to_index_type_1_2536","Type '{0}' cannot be used to index type '{1}'."),Type_0_has_no_matching_index_signature_for_type_1:t(2537,e.DiagnosticCategory.Error,"Type_0_has_no_matching_index_signature_for_type_1_2537","Type '{0}' has no matching index signature for type '{1}'."),Type_0_cannot_be_used_as_an_index_type:t(2538,e.DiagnosticCategory.Error,"Type_0_cannot_be_used_as_an_index_type_2538","Type '{0}' cannot be used as an index type."),Cannot_assign_to_0_because_it_is_not_a_variable:t(2539,e.DiagnosticCategory.Error,"Cannot_assign_to_0_because_it_is_not_a_variable_2539","Cannot assign to '{0}' because it is not a variable."),Cannot_assign_to_0_because_it_is_a_constant_or_a_read_only_property:t(2540,e.DiagnosticCategory.Error,"Cannot_assign_to_0_because_it_is_a_constant_or_a_read_only_property_2540","Cannot assign to '{0}' because it is a constant or a read-only property."),The_target_of_an_assignment_must_be_a_variable_or_a_property_access:t(2541,e.DiagnosticCategory.Error,"The_target_of_an_assignment_must_be_a_variable_or_a_property_access_2541","The target of an assignment must be a variable or a property access."),Index_signature_in_type_0_only_permits_reading:t(2542,e.DiagnosticCategory.Error,"Index_signature_in_type_0_only_permits_reading_2542","Index signature in type '{0}' only permits reading."),Duplicate_identifier_newTarget_Compiler_uses_variable_declaration_newTarget_to_capture_new_target_meta_property_reference:t(2543,e.DiagnosticCategory.Error,"Duplicate_identifier_newTarget_Compiler_uses_variable_declaration_newTarget_to_capture_new_target_me_2543","Duplicate identifier '_newTarget'. Compiler uses variable declaration '_newTarget' to capture 'new.target' meta-property reference."),Expression_resolves_to_variable_declaration_newTarget_that_compiler_uses_to_capture_new_target_meta_property_reference:t(2544,e.DiagnosticCategory.Error,"Expression_resolves_to_variable_declaration_newTarget_that_compiler_uses_to_capture_new_target_meta__2544","Expression resolves to variable declaration '_newTarget' that compiler uses to capture 'new.target' meta-property reference."),A_mixin_class_must_have_a_constructor_with_a_single_rest_parameter_of_type_any:t(2545,e.DiagnosticCategory.Error,"A_mixin_class_must_have_a_constructor_with_a_single_rest_parameter_of_type_any_2545","A mixin class must have a constructor with a single rest parameter of type 'any[]'."),Property_0_has_conflicting_declarations_and_is_inaccessible_in_type_1:t(2546,e.DiagnosticCategory.Error,"Property_0_has_conflicting_declarations_and_is_inaccessible_in_type_1_2546","Property '{0}' has conflicting declarations and is inaccessible in type '{1}'."),The_type_returned_by_the_next_method_of_an_async_iterator_must_be_a_promise_for_a_type_with_a_value_property:t(2547,e.DiagnosticCategory.Error,"The_type_returned_by_the_next_method_of_an_async_iterator_must_be_a_promise_for_a_type_with_a_value__2547","The type returned by the 'next()' method of an async iterator must be a promise for a type with a 'value' property."),Type_0_is_not_an_array_type_or_does_not_have_a_Symbol_iterator_method_that_returns_an_iterator:t(2548,e.DiagnosticCategory.Error,"Type_0_is_not_an_array_type_or_does_not_have_a_Symbol_iterator_method_that_returns_an_iterator_2548","Type '{0}' is not an array type or does not have a '[Symbol.iterator]()' method that returns an iterator."),Type_0_is_not_an_array_type_or_a_string_type_or_does_not_have_a_Symbol_iterator_method_that_returns_an_iterator:t(2549,e.DiagnosticCategory.Error,"Type_0_is_not_an_array_type_or_a_string_type_or_does_not_have_a_Symbol_iterator_method_that_returns__2549","Type '{0}' is not an array type or a string type or does not have a '[Symbol.iterator]()' method that returns an iterator."),Generic_type_instantiation_is_excessively_deep_and_possibly_infinite:t(2550,e.DiagnosticCategory.Error,"Generic_type_instantiation_is_excessively_deep_and_possibly_infinite_2550","Generic type instantiation is excessively deep and possibly infinite."),Property_0_does_not_exist_on_type_1_Did_you_mean_2:t(2551,e.DiagnosticCategory.Error,"Property_0_does_not_exist_on_type_1_Did_you_mean_2_2551","Property '{0}' does not exist on type '{1}'. Did you mean '{2}'?"),Cannot_find_name_0_Did_you_mean_1:t(2552,e.DiagnosticCategory.Error,"Cannot_find_name_0_Did_you_mean_1_2552","Cannot find name '{0}'. Did you mean '{1}'?"),Computed_values_are_not_permitted_in_an_enum_with_string_valued_members:t(2553,e.DiagnosticCategory.Error,"Computed_values_are_not_permitted_in_an_enum_with_string_valued_members_2553","Computed values are not permitted in an enum with string valued members."),Expected_0_arguments_but_got_1:t(2554,e.DiagnosticCategory.Error,"Expected_0_arguments_but_got_1_2554","Expected {0} arguments, but got {1}."),Expected_at_least_0_arguments_but_got_1:t(2555,e.DiagnosticCategory.Error,"Expected_at_least_0_arguments_but_got_1_2555","Expected at least {0} arguments, but got {1}."),Expected_0_arguments_but_got_a_minimum_of_1:t(2556,e.DiagnosticCategory.Error,"Expected_0_arguments_but_got_a_minimum_of_1_2556","Expected {0} arguments, but got a minimum of {1}."),Expected_at_least_0_arguments_but_got_a_minimum_of_1:t(2557,e.DiagnosticCategory.Error,"Expected_at_least_0_arguments_but_got_a_minimum_of_1_2557","Expected at least {0} arguments, but got a minimum of {1}."),Expected_0_type_arguments_but_got_1:t(2558,e.DiagnosticCategory.Error,"Expected_0_type_arguments_but_got_1_2558","Expected {0} type arguments, but got {1}."),Type_0_has_no_properties_in_common_with_type_1:t(2559,e.DiagnosticCategory.Error,"Type_0_has_no_properties_in_common_with_type_1_2559","Type '{0}' has no properties in common with type '{1}'."),Value_of_type_0_has_no_properties_in_common_with_type_1_Did_you_mean_to_call_it:t(2560,e.DiagnosticCategory.Error,"Value_of_type_0_has_no_properties_in_common_with_type_1_Did_you_mean_to_call_it_2560","Value of type '{0}' has no properties in common with type '{1}'. Did you mean to call it?"),Object_literal_may_only_specify_known_properties_but_0_does_not_exist_in_type_1_Did_you_mean_to_write_2:t(2561,e.DiagnosticCategory.Error,"Object_literal_may_only_specify_known_properties_but_0_does_not_exist_in_type_1_Did_you_mean_to_writ_2561","Object literal may only specify known properties, but '{0}' does not exist in type '{1}'. Did you mean to write '{2}'?"),Base_class_expressions_cannot_reference_class_type_parameters:t(2562,e.DiagnosticCategory.Error,"Base_class_expressions_cannot_reference_class_type_parameters_2562","Base class expressions cannot reference class type parameters."),The_containing_function_or_module_body_is_too_large_for_control_flow_analysis:t(2563,e.DiagnosticCategory.Error,"The_containing_function_or_module_body_is_too_large_for_control_flow_analysis_2563","The containing function or module body is too large for control flow analysis."),JSX_element_attributes_type_0_may_not_be_a_union_type:t(2600,e.DiagnosticCategory.Error,"JSX_element_attributes_type_0_may_not_be_a_union_type_2600","JSX element attributes type '{0}' may not be a union type."),The_return_type_of_a_JSX_element_constructor_must_return_an_object_type:t(2601,e.DiagnosticCategory.Error,"The_return_type_of_a_JSX_element_constructor_must_return_an_object_type_2601","The return type of a JSX element constructor must return an object type."),JSX_element_implicitly_has_type_any_because_the_global_type_JSX_Element_does_not_exist:t(2602,e.DiagnosticCategory.Error,"JSX_element_implicitly_has_type_any_because_the_global_type_JSX_Element_does_not_exist_2602","JSX element implicitly has type 'any' because the global type 'JSX.Element' does not exist."),Property_0_in_type_1_is_not_assignable_to_type_2:t(2603,e.DiagnosticCategory.Error,"Property_0_in_type_1_is_not_assignable_to_type_2_2603","Property '{0}' in type '{1}' is not assignable to type '{2}'."),JSX_element_type_0_does_not_have_any_construct_or_call_signatures:t(2604,e.DiagnosticCategory.Error,"JSX_element_type_0_does_not_have_any_construct_or_call_signatures_2604","JSX element type '{0}' does not have any construct or call signatures."),JSX_element_type_0_is_not_a_constructor_function_for_JSX_elements:t(2605,e.DiagnosticCategory.Error,"JSX_element_type_0_is_not_a_constructor_function_for_JSX_elements_2605","JSX element type '{0}' is not a constructor function for JSX elements."),Property_0_of_JSX_spread_attribute_is_not_assignable_to_target_property:t(2606,e.DiagnosticCategory.Error,"Property_0_of_JSX_spread_attribute_is_not_assignable_to_target_property_2606","Property '{0}' of JSX spread attribute is not assignable to target property."),JSX_element_class_does_not_support_attributes_because_it_does_not_have_a_0_property:t(2607,e.DiagnosticCategory.Error,"JSX_element_class_does_not_support_attributes_because_it_does_not_have_a_0_property_2607","JSX element class does not support attributes because it does not have a '{0}' property."),The_global_type_JSX_0_may_not_have_more_than_one_property:t(2608,e.DiagnosticCategory.Error,"The_global_type_JSX_0_may_not_have_more_than_one_property_2608","The global type 'JSX.{0}' may not have more than one property."),JSX_spread_child_must_be_an_array_type:t(2609,e.DiagnosticCategory.Error,"JSX_spread_child_must_be_an_array_type_2609","JSX spread child must be an array type."),Cannot_augment_module_0_with_value_exports_because_it_resolves_to_a_non_module_entity:t(2649,e.DiagnosticCategory.Error,"Cannot_augment_module_0_with_value_exports_because_it_resolves_to_a_non_module_entity_2649","Cannot augment module '{0}' with value exports because it resolves to a non-module entity."),A_member_initializer_in_a_enum_declaration_cannot_reference_members_declared_after_it_including_members_defined_in_other_enums:t(2651,e.DiagnosticCategory.Error,"A_member_initializer_in_a_enum_declaration_cannot_reference_members_declared_after_it_including_memb_2651","A member initializer in a enum declaration cannot reference members declared after it, including members defined in other enums."),Merged_declaration_0_cannot_include_a_default_export_declaration_Consider_adding_a_separate_export_default_0_declaration_instead:t(2652,e.DiagnosticCategory.Error,"Merged_declaration_0_cannot_include_a_default_export_declaration_Consider_adding_a_separate_export_d_2652","Merged declaration '{0}' cannot include a default export declaration. Consider adding a separate 'export default {0}' declaration instead."),Non_abstract_class_expression_does_not_implement_inherited_abstract_member_0_from_class_1:t(2653,e.DiagnosticCategory.Error,"Non_abstract_class_expression_does_not_implement_inherited_abstract_member_0_from_class_1_2653","Non-abstract class expression does not implement inherited abstract member '{0}' from class '{1}'."),Exported_external_package_typings_file_cannot_contain_tripleslash_references_Please_contact_the_package_author_to_update_the_package_definition:t(2654,e.DiagnosticCategory.Error,"Exported_external_package_typings_file_cannot_contain_tripleslash_references_Please_contact_the_pack_2654","Exported external package typings file cannot contain tripleslash references. Please contact the package author to update the package definition."),Exported_external_package_typings_file_0_is_not_a_module_Please_contact_the_package_author_to_update_the_package_definition:t(2656,e.DiagnosticCategory.Error,"Exported_external_package_typings_file_0_is_not_a_module_Please_contact_the_package_author_to_update_2656","Exported external package typings file '{0}' is not a module. Please contact the package author to update the package definition."),JSX_expressions_must_have_one_parent_element:t(2657,e.DiagnosticCategory.Error,"JSX_expressions_must_have_one_parent_element_2657","JSX expressions must have one parent element."),Type_0_provides_no_match_for_the_signature_1:t(2658,e.DiagnosticCategory.Error,"Type_0_provides_no_match_for_the_signature_1_2658","Type '{0}' provides no match for the signature '{1}'."),super_is_only_allowed_in_members_of_object_literal_expressions_when_option_target_is_ES2015_or_higher:t(2659,e.DiagnosticCategory.Error,"super_is_only_allowed_in_members_of_object_literal_expressions_when_option_target_is_ES2015_or_highe_2659","'super' is only allowed in members of object literal expressions when option 'target' is 'ES2015' or higher."),super_can_only_be_referenced_in_members_of_derived_classes_or_object_literal_expressions:t(2660,e.DiagnosticCategory.Error,"super_can_only_be_referenced_in_members_of_derived_classes_or_object_literal_expressions_2660","'super' can only be referenced in members of derived classes or object literal expressions."),Cannot_export_0_Only_local_declarations_can_be_exported_from_a_module:t(2661,e.DiagnosticCategory.Error,"Cannot_export_0_Only_local_declarations_can_be_exported_from_a_module_2661","Cannot export '{0}'. Only local declarations can be exported from a module."),Cannot_find_name_0_Did_you_mean_the_static_member_1_0:t(2662,e.DiagnosticCategory.Error,"Cannot_find_name_0_Did_you_mean_the_static_member_1_0_2662","Cannot find name '{0}'. Did you mean the static member '{1}.{0}'?"),Cannot_find_name_0_Did_you_mean_the_instance_member_this_0:t(2663,e.DiagnosticCategory.Error,"Cannot_find_name_0_Did_you_mean_the_instance_member_this_0_2663","Cannot find name '{0}'. Did you mean the instance member 'this.{0}'?"),Invalid_module_name_in_augmentation_module_0_cannot_be_found:t(2664,e.DiagnosticCategory.Error,"Invalid_module_name_in_augmentation_module_0_cannot_be_found_2664","Invalid module name in augmentation, module '{0}' cannot be found."),Invalid_module_name_in_augmentation_Module_0_resolves_to_an_untyped_module_at_1_which_cannot_be_augmented:t(2665,e.DiagnosticCategory.Error,"Invalid_module_name_in_augmentation_Module_0_resolves_to_an_untyped_module_at_1_which_cannot_be_augm_2665","Invalid module name in augmentation. Module '{0}' resolves to an untyped module at '{1}', which cannot be augmented."),Exports_and_export_assignments_are_not_permitted_in_module_augmentations:t(2666,e.DiagnosticCategory.Error,"Exports_and_export_assignments_are_not_permitted_in_module_augmentations_2666","Exports and export assignments are not permitted in module augmentations."),Imports_are_not_permitted_in_module_augmentations_Consider_moving_them_to_the_enclosing_external_module:t(2667,e.DiagnosticCategory.Error,"Imports_are_not_permitted_in_module_augmentations_Consider_moving_them_to_the_enclosing_external_mod_2667","Imports are not permitted in module augmentations. Consider moving them to the enclosing external module."),export_modifier_cannot_be_applied_to_ambient_modules_and_module_augmentations_since_they_are_always_visible:t(2668,e.DiagnosticCategory.Error,"export_modifier_cannot_be_applied_to_ambient_modules_and_module_augmentations_since_they_are_always__2668","'export' modifier cannot be applied to ambient modules and module augmentations since they are always visible."),Augmentations_for_the_global_scope_can_only_be_directly_nested_in_external_modules_or_ambient_module_declarations:t(2669,e.DiagnosticCategory.Error,"Augmentations_for_the_global_scope_can_only_be_directly_nested_in_external_modules_or_ambient_module_2669","Augmentations for the global scope can only be directly nested in external modules or ambient module declarations."),Augmentations_for_the_global_scope_should_have_declare_modifier_unless_they_appear_in_already_ambient_context:t(2670,e.DiagnosticCategory.Error,"Augmentations_for_the_global_scope_should_have_declare_modifier_unless_they_appear_in_already_ambien_2670","Augmentations for the global scope should have 'declare' modifier unless they appear in already ambient context."),Cannot_augment_module_0_because_it_resolves_to_a_non_module_entity:t(2671,e.DiagnosticCategory.Error,"Cannot_augment_module_0_because_it_resolves_to_a_non_module_entity_2671","Cannot augment module '{0}' because it resolves to a non-module entity."),Cannot_assign_a_0_constructor_type_to_a_1_constructor_type:t(2672,e.DiagnosticCategory.Error,"Cannot_assign_a_0_constructor_type_to_a_1_constructor_type_2672","Cannot assign a '{0}' constructor type to a '{1}' constructor type."),Constructor_of_class_0_is_private_and_only_accessible_within_the_class_declaration:t(2673,e.DiagnosticCategory.Error,"Constructor_of_class_0_is_private_and_only_accessible_within_the_class_declaration_2673","Constructor of class '{0}' is private and only accessible within the class declaration."),Constructor_of_class_0_is_protected_and_only_accessible_within_the_class_declaration:t(2674,e.DiagnosticCategory.Error,"Constructor_of_class_0_is_protected_and_only_accessible_within_the_class_declaration_2674","Constructor of class '{0}' is protected and only accessible within the class declaration."),Cannot_extend_a_class_0_Class_constructor_is_marked_as_private:t(2675,e.DiagnosticCategory.Error,"Cannot_extend_a_class_0_Class_constructor_is_marked_as_private_2675","Cannot extend a class '{0}'. Class constructor is marked as private."),Accessors_must_both_be_abstract_or_non_abstract:t(2676,e.DiagnosticCategory.Error,"Accessors_must_both_be_abstract_or_non_abstract_2676","Accessors must both be abstract or non-abstract."),A_type_predicate_s_type_must_be_assignable_to_its_parameter_s_type:t(2677,e.DiagnosticCategory.Error,"A_type_predicate_s_type_must_be_assignable_to_its_parameter_s_type_2677","A type predicate's type must be assignable to its parameter's type."),Type_0_is_not_comparable_to_type_1:t(2678,e.DiagnosticCategory.Error,"Type_0_is_not_comparable_to_type_1_2678","Type '{0}' is not comparable to type '{1}'."),A_function_that_is_called_with_the_new_keyword_cannot_have_a_this_type_that_is_void:t(2679,e.DiagnosticCategory.Error,"A_function_that_is_called_with_the_new_keyword_cannot_have_a_this_type_that_is_void_2679","A function that is called with the 'new' keyword cannot have a 'this' type that is 'void'."),A_0_parameter_must_be_the_first_parameter:t(2680,e.DiagnosticCategory.Error,"A_0_parameter_must_be_the_first_parameter_2680","A '{0}' parameter must be the first parameter."),A_constructor_cannot_have_a_this_parameter:t(2681,e.DiagnosticCategory.Error,"A_constructor_cannot_have_a_this_parameter_2681","A constructor cannot have a 'this' parameter."),get_and_set_accessor_must_have_the_same_this_type:t(2682,e.DiagnosticCategory.Error,"get_and_set_accessor_must_have_the_same_this_type_2682","'get' and 'set' accessor must have the same 'this' type."),this_implicitly_has_type_any_because_it_does_not_have_a_type_annotation:t(2683,e.DiagnosticCategory.Error,"this_implicitly_has_type_any_because_it_does_not_have_a_type_annotation_2683","'this' implicitly has type 'any' because it does not have a type annotation."),The_this_context_of_type_0_is_not_assignable_to_method_s_this_of_type_1:t(2684,e.DiagnosticCategory.Error,"The_this_context_of_type_0_is_not_assignable_to_method_s_this_of_type_1_2684","The 'this' context of type '{0}' is not assignable to method's 'this' of type '{1}'."),The_this_types_of_each_signature_are_incompatible:t(2685,e.DiagnosticCategory.Error,"The_this_types_of_each_signature_are_incompatible_2685","The 'this' types of each signature are incompatible."),_0_refers_to_a_UMD_global_but_the_current_file_is_a_module_Consider_adding_an_import_instead:t(2686,e.DiagnosticCategory.Error,"_0_refers_to_a_UMD_global_but_the_current_file_is_a_module_Consider_adding_an_import_instead_2686","'{0}' refers to a UMD global, but the current file is a module. Consider adding an import instead."),All_declarations_of_0_must_have_identical_modifiers:t(2687,e.DiagnosticCategory.Error,"All_declarations_of_0_must_have_identical_modifiers_2687","All declarations of '{0}' must have identical modifiers."),Cannot_find_type_definition_file_for_0:t(2688,e.DiagnosticCategory.Error,"Cannot_find_type_definition_file_for_0_2688","Cannot find type definition file for '{0}'."),Cannot_extend_an_interface_0_Did_you_mean_implements:t(2689,e.DiagnosticCategory.Error,"Cannot_extend_an_interface_0_Did_you_mean_implements_2689","Cannot extend an interface '{0}'. Did you mean 'implements'?"),An_import_path_cannot_end_with_a_0_extension_Consider_importing_1_instead:t(2691,e.DiagnosticCategory.Error,"An_import_path_cannot_end_with_a_0_extension_Consider_importing_1_instead_2691","An import path cannot end with a '{0}' extension. Consider importing '{1}' instead."),_0_is_a_primitive_but_1_is_a_wrapper_object_Prefer_using_0_when_possible:t(2692,e.DiagnosticCategory.Error,"_0_is_a_primitive_but_1_is_a_wrapper_object_Prefer_using_0_when_possible_2692","'{0}' is a primitive, but '{1}' is a wrapper object. Prefer using '{0}' when possible."),_0_only_refers_to_a_type_but_is_being_used_as_a_value_here:t(2693,e.DiagnosticCategory.Error,"_0_only_refers_to_a_type_but_is_being_used_as_a_value_here_2693","'{0}' only refers to a type, but is being used as a value here."),Namespace_0_has_no_exported_member_1:t(2694,e.DiagnosticCategory.Error,"Namespace_0_has_no_exported_member_1_2694","Namespace '{0}' has no exported member '{1}'."),Left_side_of_comma_operator_is_unused_and_has_no_side_effects:t(2695,e.DiagnosticCategory.Error,"Left_side_of_comma_operator_is_unused_and_has_no_side_effects_2695","Left side of comma operator is unused and has no side effects."),The_Object_type_is_assignable_to_very_few_other_types_Did_you_mean_to_use_the_any_type_instead:t(2696,e.DiagnosticCategory.Error,"The_Object_type_is_assignable_to_very_few_other_types_Did_you_mean_to_use_the_any_type_instead_2696","The 'Object' type is assignable to very few other types. Did you mean to use the 'any' type instead?"),An_async_function_or_method_must_return_a_Promise_Make_sure_you_have_a_declaration_for_Promise_or_include_ES2015_in_your_lib_option:t(2697,e.DiagnosticCategory.Error,"An_async_function_or_method_must_return_a_Promise_Make_sure_you_have_a_declaration_for_Promise_or_in_2697","An async function or method must return a 'Promise'. Make sure you have a declaration for 'Promise' or include 'ES2015' in your `--lib` option."),Spread_types_may_only_be_created_from_object_types:t(2698,e.DiagnosticCategory.Error,"Spread_types_may_only_be_created_from_object_types_2698","Spread types may only be created from object types."),Static_property_0_conflicts_with_built_in_property_Function_0_of_constructor_function_1:t(2699,e.DiagnosticCategory.Error,"Static_property_0_conflicts_with_built_in_property_Function_0_of_constructor_function_1_2699","Static property '{0}' conflicts with built-in property 'Function.{0}' of constructor function '{1}'."),Rest_types_may_only_be_created_from_object_types:t(2700,e.DiagnosticCategory.Error,"Rest_types_may_only_be_created_from_object_types_2700","Rest types may only be created from object types."),The_target_of_an_object_rest_assignment_must_be_a_variable_or_a_property_access:t(2701,e.DiagnosticCategory.Error,"The_target_of_an_object_rest_assignment_must_be_a_variable_or_a_property_access_2701","The target of an object rest assignment must be a variable or a property access."),_0_only_refers_to_a_type_but_is_being_used_as_a_namespace_here:t(2702,e.DiagnosticCategory.Error,"_0_only_refers_to_a_type_but_is_being_used_as_a_namespace_here_2702","'{0}' only refers to a type, but is being used as a namespace here."),The_operand_of_a_delete_operator_must_be_a_property_reference:t(2703,e.DiagnosticCategory.Error,"The_operand_of_a_delete_operator_must_be_a_property_reference_2703","The operand of a delete operator must be a property reference."),The_operand_of_a_delete_operator_cannot_be_a_read_only_property:t(2704,e.DiagnosticCategory.Error,"The_operand_of_a_delete_operator_cannot_be_a_read_only_property_2704","The operand of a delete operator cannot be a read-only property."),An_async_function_or_method_in_ES5_SlashES3_requires_the_Promise_constructor_Make_sure_you_have_a_declaration_for_the_Promise_constructor_or_include_ES2015_in_your_lib_option:t(2705,e.DiagnosticCategory.Error,"An_async_function_or_method_in_ES5_SlashES3_requires_the_Promise_constructor_Make_sure_you_have_a_de_2705","An async function or method in ES5/ES3 requires the 'Promise' constructor.  Make sure you have a declaration for the 'Promise' constructor or include 'ES2015' in your `--lib` option."),Required_type_parameters_may_not_follow_optional_type_parameters:t(2706,e.DiagnosticCategory.Error,"Required_type_parameters_may_not_follow_optional_type_parameters_2706","Required type parameters may not follow optional type parameters."),Generic_type_0_requires_between_1_and_2_type_arguments:t(2707,e.DiagnosticCategory.Error,"Generic_type_0_requires_between_1_and_2_type_arguments_2707","Generic type '{0}' requires between {1} and {2} type arguments."),Cannot_use_namespace_0_as_a_value:t(2708,e.DiagnosticCategory.Error,"Cannot_use_namespace_0_as_a_value_2708","Cannot use namespace '{0}' as a value."),Cannot_use_namespace_0_as_a_type:t(2709,e.DiagnosticCategory.Error,"Cannot_use_namespace_0_as_a_type_2709","Cannot use namespace '{0}' as a type."),_0_are_specified_twice_The_attribute_named_0_will_be_overwritten:t(2710,e.DiagnosticCategory.Error,"_0_are_specified_twice_The_attribute_named_0_will_be_overwritten_2710","'{0}' are specified twice. The attribute named '{0}' will be overwritten."),A_dynamic_import_call_returns_a_Promise_Make_sure_you_have_a_declaration_for_Promise_or_include_ES2015_in_your_lib_option:t(2711,e.DiagnosticCategory.Error,"A_dynamic_import_call_returns_a_Promise_Make_sure_you_have_a_declaration_for_Promise_or_include_ES20_2711","A dynamic import call returns a 'Promise'. Make sure you have a declaration for 'Promise' or include 'ES2015' in your `--lib` option."),A_dynamic_import_call_in_ES5_SlashES3_requires_the_Promise_constructor_Make_sure_you_have_a_declaration_for_the_Promise_constructor_or_include_ES2015_in_your_lib_option:t(2712,e.DiagnosticCategory.Error,"A_dynamic_import_call_in_ES5_SlashES3_requires_the_Promise_constructor_Make_sure_you_have_a_declarat_2712","A dynamic import call in ES5/ES3 requires the 'Promise' constructor.  Make sure you have a declaration for the 'Promise' constructor or include 'ES2015' in your `--lib` option."),Cannot_access_0_1_because_0_is_a_type_but_not_a_namespace_Did_you_mean_to_retrieve_the_type_of_the_property_1_in_0_with_0_1:t(2713,e.DiagnosticCategory.Error,"Cannot_access_0_1_because_0_is_a_type_but_not_a_namespace_Did_you_mean_to_retrieve_the_type_of_the_p_2713","Cannot access '{0}.{1}' because '{0}' is a type, but not a namespace. Did you mean to retrieve the type of the property '{1}' in '{0}' with '{0}[\"{1}\"]'?"),The_expression_of_an_export_assignment_must_be_an_identifier_or_qualified_name_in_an_ambient_context:t(2714,e.DiagnosticCategory.Error,"The_expression_of_an_export_assignment_must_be_an_identifier_or_qualified_name_in_an_ambient_context_2714","The expression of an export assignment must be an identifier or qualified name in an ambient context."),Type_parameter_0_has_a_circular_default:t(2716,e.DiagnosticCategory.Error,"Type_parameter_0_has_a_circular_default_2716","Type parameter '{0}' has a circular default."),Import_declaration_0_is_using_private_name_1:t(4e3,e.DiagnosticCategory.Error,"Import_declaration_0_is_using_private_name_1_4000","Import declaration '{0}' is using private name '{1}'."),Type_parameter_0_of_exported_class_has_or_is_using_private_name_1:t(4002,e.DiagnosticCategory.Error,"Type_parameter_0_of_exported_class_has_or_is_using_private_name_1_4002","Type parameter '{0}' of exported class has or is using private name '{1}'."),Type_parameter_0_of_exported_interface_has_or_is_using_private_name_1:t(4004,e.DiagnosticCategory.Error,"Type_parameter_0_of_exported_interface_has_or_is_using_private_name_1_4004","Type parameter '{0}' of exported interface has or is using private name '{1}'."),Type_parameter_0_of_constructor_signature_from_exported_interface_has_or_is_using_private_name_1:t(4006,e.DiagnosticCategory.Error,"Type_parameter_0_of_constructor_signature_from_exported_interface_has_or_is_using_private_name_1_4006","Type parameter '{0}' of constructor signature from exported interface has or is using private name '{1}'."),Type_parameter_0_of_call_signature_from_exported_interface_has_or_is_using_private_name_1:t(4008,e.DiagnosticCategory.Error,"Type_parameter_0_of_call_signature_from_exported_interface_has_or_is_using_private_name_1_4008","Type parameter '{0}' of call signature from exported interface has or is using private name '{1}'."),Type_parameter_0_of_public_static_method_from_exported_class_has_or_is_using_private_name_1:t(4010,e.DiagnosticCategory.Error,"Type_parameter_0_of_public_static_method_from_exported_class_has_or_is_using_private_name_1_4010","Type parameter '{0}' of public static method from exported class has or is using private name '{1}'."),Type_parameter_0_of_public_method_from_exported_class_has_or_is_using_private_name_1:t(4012,e.DiagnosticCategory.Error,"Type_parameter_0_of_public_method_from_exported_class_has_or_is_using_private_name_1_4012","Type parameter '{0}' of public method from exported class has or is using private name '{1}'."),Type_parameter_0_of_method_from_exported_interface_has_or_is_using_private_name_1:t(4014,e.DiagnosticCategory.Error,"Type_parameter_0_of_method_from_exported_interface_has_or_is_using_private_name_1_4014","Type parameter '{0}' of method from exported interface has or is using private name '{1}'."),Type_parameter_0_of_exported_function_has_or_is_using_private_name_1:t(4016,e.DiagnosticCategory.Error,"Type_parameter_0_of_exported_function_has_or_is_using_private_name_1_4016","Type parameter '{0}' of exported function has or is using private name '{1}'."),Implements_clause_of_exported_class_0_has_or_is_using_private_name_1:t(4019,e.DiagnosticCategory.Error,"Implements_clause_of_exported_class_0_has_or_is_using_private_name_1_4019","Implements clause of exported class '{0}' has or is using private name '{1}'."),extends_clause_of_exported_class_0_has_or_is_using_private_name_1:t(4020,e.DiagnosticCategory.Error,"extends_clause_of_exported_class_0_has_or_is_using_private_name_1_4020","'extends' clause of exported class '{0}' has or is using private name '{1}'."),extends_clause_of_exported_interface_0_has_or_is_using_private_name_1:t(4022,e.DiagnosticCategory.Error,"extends_clause_of_exported_interface_0_has_or_is_using_private_name_1_4022","'extends' clause of exported interface '{0}' has or is using private name '{1}'."),Exported_variable_0_has_or_is_using_name_1_from_external_module_2_but_cannot_be_named:t(4023,e.DiagnosticCategory.Error,"Exported_variable_0_has_or_is_using_name_1_from_external_module_2_but_cannot_be_named_4023","Exported variable '{0}' has or is using name '{1}' from external module {2} but cannot be named."),Exported_variable_0_has_or_is_using_name_1_from_private_module_2:t(4024,e.DiagnosticCategory.Error,"Exported_variable_0_has_or_is_using_name_1_from_private_module_2_4024","Exported variable '{0}' has or is using name '{1}' from private module '{2}'."),Exported_variable_0_has_or_is_using_private_name_1:t(4025,e.DiagnosticCategory.Error,"Exported_variable_0_has_or_is_using_private_name_1_4025","Exported variable '{0}' has or is using private name '{1}'."),Public_static_property_0_of_exported_class_has_or_is_using_name_1_from_external_module_2_but_cannot_be_named:t(4026,e.DiagnosticCategory.Error,"Public_static_property_0_of_exported_class_has_or_is_using_name_1_from_external_module_2_but_cannot__4026","Public static property '{0}' of exported class has or is using name '{1}' from external module {2} but cannot be named."),Public_static_property_0_of_exported_class_has_or_is_using_name_1_from_private_module_2:t(4027,e.DiagnosticCategory.Error,"Public_static_property_0_of_exported_class_has_or_is_using_name_1_from_private_module_2_4027","Public static property '{0}' of exported class has or is using name '{1}' from private module '{2}'."),Public_static_property_0_of_exported_class_has_or_is_using_private_name_1:t(4028,e.DiagnosticCategory.Error,"Public_static_property_0_of_exported_class_has_or_is_using_private_name_1_4028","Public static property '{0}' of exported class has or is using private name '{1}'."),Public_property_0_of_exported_class_has_or_is_using_name_1_from_external_module_2_but_cannot_be_named:t(4029,e.DiagnosticCategory.Error,"Public_property_0_of_exported_class_has_or_is_using_name_1_from_external_module_2_but_cannot_be_name_4029","Public property '{0}' of exported class has or is using name '{1}' from external module {2} but cannot be named."),Public_property_0_of_exported_class_has_or_is_using_name_1_from_private_module_2:t(4030,e.DiagnosticCategory.Error,"Public_property_0_of_exported_class_has_or_is_using_name_1_from_private_module_2_4030","Public property '{0}' of exported class has or is using name '{1}' from private module '{2}'."),Public_property_0_of_exported_class_has_or_is_using_private_name_1:t(4031,e.DiagnosticCategory.Error,"Public_property_0_of_exported_class_has_or_is_using_private_name_1_4031","Public property '{0}' of exported class has or is using private name '{1}'."),Property_0_of_exported_interface_has_or_is_using_name_1_from_private_module_2:t(4032,e.DiagnosticCategory.Error,"Property_0_of_exported_interface_has_or_is_using_name_1_from_private_module_2_4032","Property '{0}' of exported interface has or is using name '{1}' from private module '{2}'."),Property_0_of_exported_interface_has_or_is_using_private_name_1:t(4033,e.DiagnosticCategory.Error,"Property_0_of_exported_interface_has_or_is_using_private_name_1_4033","Property '{0}' of exported interface has or is using private name '{1}'."),Parameter_0_of_public_static_property_setter_from_exported_class_has_or_is_using_name_1_from_private_module_2:t(4034,e.DiagnosticCategory.Error,"Parameter_0_of_public_static_property_setter_from_exported_class_has_or_is_using_name_1_from_private_4034","Parameter '{0}' of public static property setter from exported class has or is using name '{1}' from private module '{2}'."),Parameter_0_of_public_static_property_setter_from_exported_class_has_or_is_using_private_name_1:t(4035,e.DiagnosticCategory.Error,"Parameter_0_of_public_static_property_setter_from_exported_class_has_or_is_using_private_name_1_4035","Parameter '{0}' of public static property setter from exported class has or is using private name '{1}'."),Parameter_0_of_public_property_setter_from_exported_class_has_or_is_using_name_1_from_private_module_2:t(4036,e.DiagnosticCategory.Error,"Parameter_0_of_public_property_setter_from_exported_class_has_or_is_using_name_1_from_private_module_4036","Parameter '{0}' of public property setter from exported class has or is using name '{1}' from private module '{2}'."),Parameter_0_of_public_property_setter_from_exported_class_has_or_is_using_private_name_1:t(4037,e.DiagnosticCategory.Error,"Parameter_0_of_public_property_setter_from_exported_class_has_or_is_using_private_name_1_4037","Parameter '{0}' of public property setter from exported class has or is using private name '{1}'."),Return_type_of_public_static_property_getter_from_exported_class_has_or_is_using_name_0_from_external_module_1_but_cannot_be_named:t(4038,e.DiagnosticCategory.Error,"Return_type_of_public_static_property_getter_from_exported_class_has_or_is_using_name_0_from_externa_4038","Return type of public static property getter from exported class has or is using name '{0}' from external module {1} but cannot be named."),Return_type_of_public_static_property_getter_from_exported_class_has_or_is_using_name_0_from_private_module_1:t(4039,e.DiagnosticCategory.Error,"Return_type_of_public_static_property_getter_from_exported_class_has_or_is_using_name_0_from_private_4039","Return type of public static property getter from exported class has or is using name '{0}' from private module '{1}'."),Return_type_of_public_static_property_getter_from_exported_class_has_or_is_using_private_name_0:t(4040,e.DiagnosticCategory.Error,"Return_type_of_public_static_property_getter_from_exported_class_has_or_is_using_private_name_0_4040","Return type of public static property getter from exported class has or is using private name '{0}'."),Return_type_of_public_property_getter_from_exported_class_has_or_is_using_name_0_from_external_module_1_but_cannot_be_named:t(4041,e.DiagnosticCategory.Error,"Return_type_of_public_property_getter_from_exported_class_has_or_is_using_name_0_from_external_modul_4041","Return type of public property getter from exported class has or is using name '{0}' from external module {1} but cannot be named."),Return_type_of_public_property_getter_from_exported_class_has_or_is_using_name_0_from_private_module_1:t(4042,e.DiagnosticCategory.Error,"Return_type_of_public_property_getter_from_exported_class_has_or_is_using_name_0_from_private_module_4042","Return type of public property getter from exported class has or is using name '{0}' from private module '{1}'."),Return_type_of_public_property_getter_from_exported_class_has_or_is_using_private_name_0:t(4043,e.DiagnosticCategory.Error,"Return_type_of_public_property_getter_from_exported_class_has_or_is_using_private_name_0_4043","Return type of public property getter from exported class has or is using private name '{0}'."),Return_type_of_constructor_signature_from_exported_interface_has_or_is_using_name_0_from_private_module_1:t(4044,e.DiagnosticCategory.Error,"Return_type_of_constructor_signature_from_exported_interface_has_or_is_using_name_0_from_private_mod_4044","Return type of constructor signature from exported interface has or is using name '{0}' from private module '{1}'."),Return_type_of_constructor_signature_from_exported_interface_has_or_is_using_private_name_0:t(4045,e.DiagnosticCategory.Error,"Return_type_of_constructor_signature_from_exported_interface_has_or_is_using_private_name_0_4045","Return type of constructor signature from exported interface has or is using private name '{0}'."),Return_type_of_call_signature_from_exported_interface_has_or_is_using_name_0_from_private_module_1:t(4046,e.DiagnosticCategory.Error,"Return_type_of_call_signature_from_exported_interface_has_or_is_using_name_0_from_private_module_1_4046","Return type of call signature from exported interface has or is using name '{0}' from private module '{1}'."),Return_type_of_call_signature_from_exported_interface_has_or_is_using_private_name_0:t(4047,e.DiagnosticCategory.Error,"Return_type_of_call_signature_from_exported_interface_has_or_is_using_private_name_0_4047","Return type of call signature from exported interface has or is using private name '{0}'."),Return_type_of_index_signature_from_exported_interface_has_or_is_using_name_0_from_private_module_1:t(4048,e.DiagnosticCategory.Error,"Return_type_of_index_signature_from_exported_interface_has_or_is_using_name_0_from_private_module_1_4048","Return type of index signature from exported interface has or is using name '{0}' from private module '{1}'."),Return_type_of_index_signature_from_exported_interface_has_or_is_using_private_name_0:t(4049,e.DiagnosticCategory.Error,"Return_type_of_index_signature_from_exported_interface_has_or_is_using_private_name_0_4049","Return type of index signature from exported interface has or is using private name '{0}'."),Return_type_of_public_static_method_from_exported_class_has_or_is_using_name_0_from_external_module_1_but_cannot_be_named:t(4050,e.DiagnosticCategory.Error,"Return_type_of_public_static_method_from_exported_class_has_or_is_using_name_0_from_external_module__4050","Return type of public static method from exported class has or is using name '{0}' from external module {1} but cannot be named."),Return_type_of_public_static_method_from_exported_class_has_or_is_using_name_0_from_private_module_1:t(4051,e.DiagnosticCategory.Error,"Return_type_of_public_static_method_from_exported_class_has_or_is_using_name_0_from_private_module_1_4051","Return type of public static method from exported class has or is using name '{0}' from private module '{1}'."),Return_type_of_public_static_method_from_exported_class_has_or_is_using_private_name_0:t(4052,e.DiagnosticCategory.Error,"Return_type_of_public_static_method_from_exported_class_has_or_is_using_private_name_0_4052","Return type of public static method from exported class has or is using private name '{0}'."),Return_type_of_public_method_from_exported_class_has_or_is_using_name_0_from_external_module_1_but_cannot_be_named:t(4053,e.DiagnosticCategory.Error,"Return_type_of_public_method_from_exported_class_has_or_is_using_name_0_from_external_module_1_but_c_4053","Return type of public method from exported class has or is using name '{0}' from external module {1} but cannot be named."),Return_type_of_public_method_from_exported_class_has_or_is_using_name_0_from_private_module_1:t(4054,e.DiagnosticCategory.Error,"Return_type_of_public_method_from_exported_class_has_or_is_using_name_0_from_private_module_1_4054","Return type of public method from exported class has or is using name '{0}' from private module '{1}'."),Return_type_of_public_method_from_exported_class_has_or_is_using_private_name_0:t(4055,e.DiagnosticCategory.Error,"Return_type_of_public_method_from_exported_class_has_or_is_using_private_name_0_4055","Return type of public method from exported class has or is using private name '{0}'."),Return_type_of_method_from_exported_interface_has_or_is_using_name_0_from_private_module_1:t(4056,e.DiagnosticCategory.Error,"Return_type_of_method_from_exported_interface_has_or_is_using_name_0_from_private_module_1_4056","Return type of method from exported interface has or is using name '{0}' from private module '{1}'."),Return_type_of_method_from_exported_interface_has_or_is_using_private_name_0:t(4057,e.DiagnosticCategory.Error,"Return_type_of_method_from_exported_interface_has_or_is_using_private_name_0_4057","Return type of method from exported interface has or is using private name '{0}'."),Return_type_of_exported_function_has_or_is_using_name_0_from_external_module_1_but_cannot_be_named:t(4058,e.DiagnosticCategory.Error,"Return_type_of_exported_function_has_or_is_using_name_0_from_external_module_1_but_cannot_be_named_4058","Return type of exported function has or is using name '{0}' from external module {1} but cannot be named."),Return_type_of_exported_function_has_or_is_using_name_0_from_private_module_1:t(4059,e.DiagnosticCategory.Error,"Return_type_of_exported_function_has_or_is_using_name_0_from_private_module_1_4059","Return type of exported function has or is using name '{0}' from private module '{1}'."),Return_type_of_exported_function_has_or_is_using_private_name_0:t(4060,e.DiagnosticCategory.Error,"Return_type_of_exported_function_has_or_is_using_private_name_0_4060","Return type of exported function has or is using private name '{0}'."),Parameter_0_of_constructor_from_exported_class_has_or_is_using_name_1_from_external_module_2_but_cannot_be_named:t(4061,e.DiagnosticCategory.Error,"Parameter_0_of_constructor_from_exported_class_has_or_is_using_name_1_from_external_module_2_but_can_4061","Parameter '{0}' of constructor from exported class has or is using name '{1}' from external module {2} but cannot be named."),Parameter_0_of_constructor_from_exported_class_has_or_is_using_name_1_from_private_module_2:t(4062,e.DiagnosticCategory.Error,"Parameter_0_of_constructor_from_exported_class_has_or_is_using_name_1_from_private_module_2_4062","Parameter '{0}' of constructor from exported class has or is using name '{1}' from private module '{2}'."),Parameter_0_of_constructor_from_exported_class_has_or_is_using_private_name_1:t(4063,e.DiagnosticCategory.Error,"Parameter_0_of_constructor_from_exported_class_has_or_is_using_private_name_1_4063","Parameter '{0}' of constructor from exported class has or is using private name '{1}'."),Parameter_0_of_constructor_signature_from_exported_interface_has_or_is_using_name_1_from_private_module_2:t(4064,e.DiagnosticCategory.Error,"Parameter_0_of_constructor_signature_from_exported_interface_has_or_is_using_name_1_from_private_mod_4064","Parameter '{0}' of constructor signature from exported interface has or is using name '{1}' from private module '{2}'."),Parameter_0_of_constructor_signature_from_exported_interface_has_or_is_using_private_name_1:t(4065,e.DiagnosticCategory.Error,"Parameter_0_of_constructor_signature_from_exported_interface_has_or_is_using_private_name_1_4065","Parameter '{0}' of constructor signature from exported interface has or is using private name '{1}'."),Parameter_0_of_call_signature_from_exported_interface_has_or_is_using_name_1_from_private_module_2:t(4066,e.DiagnosticCategory.Error,"Parameter_0_of_call_signature_from_exported_interface_has_or_is_using_name_1_from_private_module_2_4066","Parameter '{0}' of call signature from exported interface has or is using name '{1}' from private module '{2}'."),Parameter_0_of_call_signature_from_exported_interface_has_or_is_using_private_name_1:t(4067,e.DiagnosticCategory.Error,"Parameter_0_of_call_signature_from_exported_interface_has_or_is_using_private_name_1_4067","Parameter '{0}' of call signature from exported interface has or is using private name '{1}'."),Parameter_0_of_public_static_method_from_exported_class_has_or_is_using_name_1_from_external_module_2_but_cannot_be_named:t(4068,e.DiagnosticCategory.Error,"Parameter_0_of_public_static_method_from_exported_class_has_or_is_using_name_1_from_external_module__4068","Parameter '{0}' of public static method from exported class has or is using name '{1}' from external module {2} but cannot be named."),Parameter_0_of_public_static_method_from_exported_class_has_or_is_using_name_1_from_private_module_2:t(4069,e.DiagnosticCategory.Error,"Parameter_0_of_public_static_method_from_exported_class_has_or_is_using_name_1_from_private_module_2_4069","Parameter '{0}' of public static method from exported class has or is using name '{1}' from private module '{2}'."),Parameter_0_of_public_static_method_from_exported_class_has_or_is_using_private_name_1:t(4070,e.DiagnosticCategory.Error,"Parameter_0_of_public_static_method_from_exported_class_has_or_is_using_private_name_1_4070","Parameter '{0}' of public static method from exported class has or is using private name '{1}'."),Parameter_0_of_public_method_from_exported_class_has_or_is_using_name_1_from_external_module_2_but_cannot_be_named:t(4071,e.DiagnosticCategory.Error,"Parameter_0_of_public_method_from_exported_class_has_or_is_using_name_1_from_external_module_2_but_c_4071","Parameter '{0}' of public method from exported class has or is using name '{1}' from external module {2} but cannot be named."),Parameter_0_of_public_method_from_exported_class_has_or_is_using_name_1_from_private_module_2:t(4072,e.DiagnosticCategory.Error,"Parameter_0_of_public_method_from_exported_class_has_or_is_using_name_1_from_private_module_2_4072","Parameter '{0}' of public method from exported class has or is using name '{1}' from private module '{2}'."),Parameter_0_of_public_method_from_exported_class_has_or_is_using_private_name_1:t(4073,e.DiagnosticCategory.Error,"Parameter_0_of_public_method_from_exported_class_has_or_is_using_private_name_1_4073","Parameter '{0}' of public method from exported class has or is using private name '{1}'."),Parameter_0_of_method_from_exported_interface_has_or_is_using_name_1_from_private_module_2:t(4074,e.DiagnosticCategory.Error,"Parameter_0_of_method_from_exported_interface_has_or_is_using_name_1_from_private_module_2_4074","Parameter '{0}' of method from exported interface has or is using name '{1}' from private module '{2}'."),Parameter_0_of_method_from_exported_interface_has_or_is_using_private_name_1:t(4075,e.DiagnosticCategory.Error,"Parameter_0_of_method_from_exported_interface_has_or_is_using_private_name_1_4075","Parameter '{0}' of method from exported interface has or is using private name '{1}'."),Parameter_0_of_exported_function_has_or_is_using_name_1_from_external_module_2_but_cannot_be_named:t(4076,e.DiagnosticCategory.Error,"Parameter_0_of_exported_function_has_or_is_using_name_1_from_external_module_2_but_cannot_be_named_4076","Parameter '{0}' of exported function has or is using name '{1}' from external module {2} but cannot be named."),Parameter_0_of_exported_function_has_or_is_using_name_1_from_private_module_2:t(4077,e.DiagnosticCategory.Error,"Parameter_0_of_exported_function_has_or_is_using_name_1_from_private_module_2_4077","Parameter '{0}' of exported function has or is using name '{1}' from private module '{2}'."),Parameter_0_of_exported_function_has_or_is_using_private_name_1:t(4078,e.DiagnosticCategory.Error,"Parameter_0_of_exported_function_has_or_is_using_private_name_1_4078","Parameter '{0}' of exported function has or is using private name '{1}'."),Exported_type_alias_0_has_or_is_using_private_name_1:t(4081,e.DiagnosticCategory.Error,"Exported_type_alias_0_has_or_is_using_private_name_1_4081","Exported type alias '{0}' has or is using private name '{1}'."),Default_export_of_the_module_has_or_is_using_private_name_0:t(4082,e.DiagnosticCategory.Error,"Default_export_of_the_module_has_or_is_using_private_name_0_4082","Default export of the module has or is using private name '{0}'."),Type_parameter_0_of_exported_type_alias_has_or_is_using_private_name_1:t(4083,e.DiagnosticCategory.Error,"Type_parameter_0_of_exported_type_alias_has_or_is_using_private_name_1_4083","Type parameter '{0}' of exported type alias has or is using private name '{1}'."),Conflicting_definitions_for_0_found_at_1_and_2_Consider_installing_a_specific_version_of_this_library_to_resolve_the_conflict:t(4090,e.DiagnosticCategory.Message,"Conflicting_definitions_for_0_found_at_1_and_2_Consider_installing_a_specific_version_of_this_librar_4090","Conflicting definitions for '{0}' found at '{1}' and '{2}'. Consider installing a specific version of this library to resolve the conflict."),Parameter_0_of_index_signature_from_exported_interface_has_or_is_using_name_1_from_private_module_2:t(4091,e.DiagnosticCategory.Error,"Parameter_0_of_index_signature_from_exported_interface_has_or_is_using_name_1_from_private_module_2_4091","Parameter '{0}' of index signature from exported interface has or is using name '{1}' from private module '{2}'."),Parameter_0_of_index_signature_from_exported_interface_has_or_is_using_private_name_1:t(4092,e.DiagnosticCategory.Error,"Parameter_0_of_index_signature_from_exported_interface_has_or_is_using_private_name_1_4092","Parameter '{0}' of index signature from exported interface has or is using private name '{1}'."),Property_0_of_exported_class_expression_may_not_be_private_or_protected:t(4094,e.DiagnosticCategory.Error,"Property_0_of_exported_class_expression_may_not_be_private_or_protected_4094","Property '{0}' of exported class expression may not be private or protected."),The_current_host_does_not_support_the_0_option:t(5001,e.DiagnosticCategory.Error,"The_current_host_does_not_support_the_0_option_5001","The current host does not support the '{0}' option."),Cannot_find_the_common_subdirectory_path_for_the_input_files:t(5009,e.DiagnosticCategory.Error,"Cannot_find_the_common_subdirectory_path_for_the_input_files_5009","Cannot find the common subdirectory path for the input files."),File_specification_cannot_end_in_a_recursive_directory_wildcard_Asterisk_Asterisk_Colon_0:t(5010,e.DiagnosticCategory.Error,"File_specification_cannot_end_in_a_recursive_directory_wildcard_Asterisk_Asterisk_Colon_0_5010","File specification cannot end in a recursive directory wildcard ('**'): '{0}'."),File_specification_cannot_contain_multiple_recursive_directory_wildcards_Asterisk_Asterisk_Colon_0:t(5011,e.DiagnosticCategory.Error,"File_specification_cannot_contain_multiple_recursive_directory_wildcards_Asterisk_Asterisk_Colon_0_5011","File specification cannot contain multiple recursive directory wildcards ('**'): '{0}'."),Cannot_read_file_0_Colon_1:t(5012,e.DiagnosticCategory.Error,"Cannot_read_file_0_Colon_1_5012","Cannot read file '{0}': {1}."),Failed_to_parse_file_0_Colon_1:t(5014,e.DiagnosticCategory.Error,"Failed_to_parse_file_0_Colon_1_5014","Failed to parse file '{0}': {1}."),Unknown_compiler_option_0:t(5023,e.DiagnosticCategory.Error,"Unknown_compiler_option_0_5023","Unknown compiler option '{0}'."),Compiler_option_0_requires_a_value_of_type_1:t(5024,e.DiagnosticCategory.Error,"Compiler_option_0_requires_a_value_of_type_1_5024","Compiler option '{0}' requires a value of type {1}."),Could_not_write_file_0_Colon_1:t(5033,e.DiagnosticCategory.Error,"Could_not_write_file_0_Colon_1_5033","Could not write file '{0}': {1}."),Option_project_cannot_be_mixed_with_source_files_on_a_command_line:t(5042,e.DiagnosticCategory.Error,"Option_project_cannot_be_mixed_with_source_files_on_a_command_line_5042","Option 'project' cannot be mixed with source files on a command line."),Option_isolatedModules_can_only_be_used_when_either_option_module_is_provided_or_option_target_is_ES2015_or_higher:t(5047,e.DiagnosticCategory.Error,"Option_isolatedModules_can_only_be_used_when_either_option_module_is_provided_or_option_target_is_ES_5047","Option 'isolatedModules' can only be used when either option '--module' is provided or option 'target' is 'ES2015' or higher."),Option_0_can_only_be_used_when_either_option_inlineSourceMap_or_option_sourceMap_is_provided:t(5051,e.DiagnosticCategory.Error,"Option_0_can_only_be_used_when_either_option_inlineSourceMap_or_option_sourceMap_is_provided_5051","Option '{0} can only be used when either option '--inlineSourceMap' or option '--sourceMap' is provided."),Option_0_cannot_be_specified_without_specifying_option_1:t(5052,e.DiagnosticCategory.Error,"Option_0_cannot_be_specified_without_specifying_option_1_5052","Option '{0}' cannot be specified without specifying option '{1}'."),Option_0_cannot_be_specified_with_option_1:t(5053,e.DiagnosticCategory.Error,"Option_0_cannot_be_specified_with_option_1_5053","Option '{0}' cannot be specified with option '{1}'."),A_tsconfig_json_file_is_already_defined_at_Colon_0:t(5054,e.DiagnosticCategory.Error,"A_tsconfig_json_file_is_already_defined_at_Colon_0_5054","A 'tsconfig.json' file is already defined at: '{0}'."),Cannot_write_file_0_because_it_would_overwrite_input_file:t(5055,e.DiagnosticCategory.Error,"Cannot_write_file_0_because_it_would_overwrite_input_file_5055","Cannot write file '{0}' because it would overwrite input file."),Cannot_write_file_0_because_it_would_be_overwritten_by_multiple_input_files:t(5056,e.DiagnosticCategory.Error,"Cannot_write_file_0_because_it_would_be_overwritten_by_multiple_input_files_5056","Cannot write file '{0}' because it would be overwritten by multiple input files."),Cannot_find_a_tsconfig_json_file_at_the_specified_directory_Colon_0:t(5057,e.DiagnosticCategory.Error,"Cannot_find_a_tsconfig_json_file_at_the_specified_directory_Colon_0_5057","Cannot find a tsconfig.json file at the specified directory: '{0}'."),The_specified_path_does_not_exist_Colon_0:t(5058,e.DiagnosticCategory.Error,"The_specified_path_does_not_exist_Colon_0_5058","The specified path does not exist: '{0}'."),Invalid_value_for_reactNamespace_0_is_not_a_valid_identifier:t(5059,e.DiagnosticCategory.Error,"Invalid_value_for_reactNamespace_0_is_not_a_valid_identifier_5059","Invalid value for '--reactNamespace'. '{0}' is not a valid identifier."),Option_paths_cannot_be_used_without_specifying_baseUrl_option:t(5060,e.DiagnosticCategory.Error,"Option_paths_cannot_be_used_without_specifying_baseUrl_option_5060","Option 'paths' cannot be used without specifying '--baseUrl' option."),Pattern_0_can_have_at_most_one_Asterisk_character:t(5061,e.DiagnosticCategory.Error,"Pattern_0_can_have_at_most_one_Asterisk_character_5061","Pattern '{0}' can have at most one '*' character."),Substitution_0_in_pattern_1_in_can_have_at_most_one_Asterisk_character:t(5062,e.DiagnosticCategory.Error,"Substitution_0_in_pattern_1_in_can_have_at_most_one_Asterisk_character_5062","Substitution '{0}' in pattern '{1}' in can have at most one '*' character."),Substitutions_for_pattern_0_should_be_an_array:t(5063,e.DiagnosticCategory.Error,"Substitutions_for_pattern_0_should_be_an_array_5063","Substitutions for pattern '{0}' should be an array."),Substitution_0_for_pattern_1_has_incorrect_type_expected_string_got_2:t(5064,e.DiagnosticCategory.Error,"Substitution_0_for_pattern_1_has_incorrect_type_expected_string_got_2_5064","Substitution '{0}' for pattern '{1}' has incorrect type, expected 'string', got '{2}'."),File_specification_cannot_contain_a_parent_directory_that_appears_after_a_recursive_directory_wildcard_Asterisk_Asterisk_Colon_0:t(5065,e.DiagnosticCategory.Error,"File_specification_cannot_contain_a_parent_directory_that_appears_after_a_recursive_directory_wildca_5065","File specification cannot contain a parent directory ('..') that appears after a recursive directory wildcard ('**'): '{0}'."),Substitutions_for_pattern_0_shouldn_t_be_an_empty_array:t(5066,e.DiagnosticCategory.Error,"Substitutions_for_pattern_0_shouldn_t_be_an_empty_array_5066","Substitutions for pattern '{0}' shouldn't be an empty array."),Invalid_value_for_jsxFactory_0_is_not_a_valid_identifier_or_qualified_name:t(5067,e.DiagnosticCategory.Error,"Invalid_value_for_jsxFactory_0_is_not_a_valid_identifier_or_qualified_name_5067","Invalid value for 'jsxFactory'. '{0}' is not a valid identifier or qualified-name."),Concatenate_and_emit_output_to_single_file:t(6001,e.DiagnosticCategory.Message,"Concatenate_and_emit_output_to_single_file_6001","Concatenate and emit output to single file."),Generates_corresponding_d_ts_file:t(6002,e.DiagnosticCategory.Message,"Generates_corresponding_d_ts_file_6002","Generates corresponding '.d.ts' file."),Specify_the_location_where_debugger_should_locate_map_files_instead_of_generated_locations:t(6003,e.DiagnosticCategory.Message,"Specify_the_location_where_debugger_should_locate_map_files_instead_of_generated_locations_6003","Specify the location where debugger should locate map files instead of generated locations."),Specify_the_location_where_debugger_should_locate_TypeScript_files_instead_of_source_locations:t(6004,e.DiagnosticCategory.Message,"Specify_the_location_where_debugger_should_locate_TypeScript_files_instead_of_source_locations_6004","Specify the location where debugger should locate TypeScript files instead of source locations."),Watch_input_files:t(6005,e.DiagnosticCategory.Message,"Watch_input_files_6005","Watch input files."),Redirect_output_structure_to_the_directory:t(6006,e.DiagnosticCategory.Message,"Redirect_output_structure_to_the_directory_6006","Redirect output structure to the directory."),Do_not_erase_const_enum_declarations_in_generated_code:t(6007,e.DiagnosticCategory.Message,"Do_not_erase_const_enum_declarations_in_generated_code_6007","Do not erase const enum declarations in generated code."),Do_not_emit_outputs_if_any_errors_were_reported:t(6008,e.DiagnosticCategory.Message,"Do_not_emit_outputs_if_any_errors_were_reported_6008","Do not emit outputs if any errors were reported."),Do_not_emit_comments_to_output:t(6009,e.DiagnosticCategory.Message,"Do_not_emit_comments_to_output_6009","Do not emit comments to output."),Do_not_emit_outputs:t(6010,e.DiagnosticCategory.Message,"Do_not_emit_outputs_6010","Do not emit outputs."),Allow_default_imports_from_modules_with_no_default_export_This_does_not_affect_code_emit_just_typechecking:t(6011,e.DiagnosticCategory.Message,"Allow_default_imports_from_modules_with_no_default_export_This_does_not_affect_code_emit_just_typech_6011","Allow default imports from modules with no default export. This does not affect code emit, just typechecking."),Skip_type_checking_of_declaration_files:t(6012,e.DiagnosticCategory.Message,"Skip_type_checking_of_declaration_files_6012","Skip type checking of declaration files."),Do_not_resolve_the_real_path_of_symlinks:t(6013,e.DiagnosticCategory.Message,"Do_not_resolve_the_real_path_of_symlinks_6013","Do not resolve the real path of symlinks."),Specify_ECMAScript_target_version_Colon_ES3_default_ES5_ES2015_ES2016_ES2017_or_ESNEXT:t(6015,e.DiagnosticCategory.Message,"Specify_ECMAScript_target_version_Colon_ES3_default_ES5_ES2015_ES2016_ES2017_or_ESNEXT_6015","Specify ECMAScript target version: 'ES3' (default), 'ES5', 'ES2015', 'ES2016', 'ES2017', or 'ESNEXT'."),Specify_module_code_generation_Colon_none_commonjs_amd_system_umd_es2015_or_ESNext:t(6016,e.DiagnosticCategory.Message,"Specify_module_code_generation_Colon_none_commonjs_amd_system_umd_es2015_or_ESNext_6016","Specify module code generation: 'none', 'commonjs', 'amd', 'system', 'umd', 'es2015', or 'ESNext'."),Print_this_message:t(6017,e.DiagnosticCategory.Message,"Print_this_message_6017","Print this message."),Print_the_compiler_s_version:t(6019,e.DiagnosticCategory.Message,"Print_the_compiler_s_version_6019","Print the compiler's version."),Compile_the_project_given_the_path_to_its_configuration_file_or_to_a_folder_with_a_tsconfig_json:t(6020,e.DiagnosticCategory.Message,"Compile_the_project_given_the_path_to_its_configuration_file_or_to_a_folder_with_a_tsconfig_json_6020","Compile the project given the path to its configuration file, or to a folder with a 'tsconfig.json'."),Syntax_Colon_0:t(6023,e.DiagnosticCategory.Message,"Syntax_Colon_0_6023","Syntax: {0}"),options:t(6024,e.DiagnosticCategory.Message,"options_6024","options"),file:t(6025,e.DiagnosticCategory.Message,"file_6025","file"),Examples_Colon_0:t(6026,e.DiagnosticCategory.Message,"Examples_Colon_0_6026","Examples: {0}"),Options_Colon:t(6027,e.DiagnosticCategory.Message,"Options_Colon_6027","Options:"),Version_0:t(6029,e.DiagnosticCategory.Message,"Version_0_6029","Version {0}"),Insert_command_line_options_and_files_from_a_file:t(6030,e.DiagnosticCategory.Message,"Insert_command_line_options_and_files_from_a_file_6030","Insert command line options and files from a file."),File_change_detected_Starting_incremental_compilation:t(6032,e.DiagnosticCategory.Message,"File_change_detected_Starting_incremental_compilation_6032","File change detected. Starting incremental compilation..."),KIND:t(6034,e.DiagnosticCategory.Message,"KIND_6034","KIND"),FILE:t(6035,e.DiagnosticCategory.Message,"FILE_6035","FILE"),VERSION:t(6036,e.DiagnosticCategory.Message,"VERSION_6036","VERSION"),LOCATION:t(6037,e.DiagnosticCategory.Message,"LOCATION_6037","LOCATION"),DIRECTORY:t(6038,e.DiagnosticCategory.Message,"DIRECTORY_6038","DIRECTORY"),STRATEGY:t(6039,e.DiagnosticCategory.Message,"STRATEGY_6039","STRATEGY"),FILE_OR_DIRECTORY:t(6040,e.DiagnosticCategory.Message,"FILE_OR_DIRECTORY_6040","FILE OR DIRECTORY"),Compilation_complete_Watching_for_file_changes:t(6042,e.DiagnosticCategory.Message,"Compilation_complete_Watching_for_file_changes_6042","Compilation complete. Watching for file changes."),Generates_corresponding_map_file:t(6043,e.DiagnosticCategory.Message,"Generates_corresponding_map_file_6043","Generates corresponding '.map' file."),Compiler_option_0_expects_an_argument:t(6044,e.DiagnosticCategory.Error,"Compiler_option_0_expects_an_argument_6044","Compiler option '{0}' expects an argument."),Unterminated_quoted_string_in_response_file_0:t(6045,e.DiagnosticCategory.Error,"Unterminated_quoted_string_in_response_file_0_6045","Unterminated quoted string in response file '{0}'."),Argument_for_0_option_must_be_Colon_1:t(6046,e.DiagnosticCategory.Error,"Argument_for_0_option_must_be_Colon_1_6046","Argument for '{0}' option must be: {1}."),Locale_must_be_of_the_form_language_or_language_territory_For_example_0_or_1:t(6048,e.DiagnosticCategory.Error,"Locale_must_be_of_the_form_language_or_language_territory_For_example_0_or_1_6048","Locale must be of the form <language> or <language>-<territory>. For example '{0}' or '{1}'."),Unsupported_locale_0:t(6049,e.DiagnosticCategory.Error,"Unsupported_locale_0_6049","Unsupported locale '{0}'."),Unable_to_open_file_0:t(6050,e.DiagnosticCategory.Error,"Unable_to_open_file_0_6050","Unable to open file '{0}'."),Corrupted_locale_file_0:t(6051,e.DiagnosticCategory.Error,"Corrupted_locale_file_0_6051","Corrupted locale file {0}."),Raise_error_on_expressions_and_declarations_with_an_implied_any_type:t(6052,e.DiagnosticCategory.Message,"Raise_error_on_expressions_and_declarations_with_an_implied_any_type_6052","Raise error on expressions and declarations with an implied 'any' type."),File_0_not_found:t(6053,e.DiagnosticCategory.Error,"File_0_not_found_6053","File '{0}' not found."),File_0_has_unsupported_extension_The_only_supported_extensions_are_1:t(6054,e.DiagnosticCategory.Error,"File_0_has_unsupported_extension_The_only_supported_extensions_are_1_6054","File '{0}' has unsupported extension. The only supported extensions are {1}."),Suppress_noImplicitAny_errors_for_indexing_objects_lacking_index_signatures:t(6055,e.DiagnosticCategory.Message,"Suppress_noImplicitAny_errors_for_indexing_objects_lacking_index_signatures_6055","Suppress noImplicitAny errors for indexing objects lacking index signatures."),Do_not_emit_declarations_for_code_that_has_an_internal_annotation:t(6056,e.DiagnosticCategory.Message,"Do_not_emit_declarations_for_code_that_has_an_internal_annotation_6056","Do not emit declarations for code that has an '@internal' annotation."),Specify_the_root_directory_of_input_files_Use_to_control_the_output_directory_structure_with_outDir:t(6058,e.DiagnosticCategory.Message,"Specify_the_root_directory_of_input_files_Use_to_control_the_output_directory_structure_with_outDir_6058","Specify the root directory of input files. Use to control the output directory structure with --outDir."),File_0_is_not_under_rootDir_1_rootDir_is_expected_to_contain_all_source_files:t(6059,e.DiagnosticCategory.Error,"File_0_is_not_under_rootDir_1_rootDir_is_expected_to_contain_all_source_files_6059","File '{0}' is not under 'rootDir' '{1}'. 'rootDir' is expected to contain all source files."),Specify_the_end_of_line_sequence_to_be_used_when_emitting_files_Colon_CRLF_dos_or_LF_unix:t(6060,e.DiagnosticCategory.Message,"Specify_the_end_of_line_sequence_to_be_used_when_emitting_files_Colon_CRLF_dos_or_LF_unix_6060","Specify the end of line sequence to be used when emitting files: 'CRLF' (dos) or 'LF' (unix)."),NEWLINE:t(6061,e.DiagnosticCategory.Message,"NEWLINE_6061","NEWLINE"),Option_0_can_only_be_specified_in_tsconfig_json_file:t(6064,e.DiagnosticCategory.Error,"Option_0_can_only_be_specified_in_tsconfig_json_file_6064","Option '{0}' can only be specified in 'tsconfig.json' file."),Enables_experimental_support_for_ES7_decorators:t(6065,e.DiagnosticCategory.Message,"Enables_experimental_support_for_ES7_decorators_6065","Enables experimental support for ES7 decorators."),Enables_experimental_support_for_emitting_type_metadata_for_decorators:t(6066,e.DiagnosticCategory.Message,"Enables_experimental_support_for_emitting_type_metadata_for_decorators_6066","Enables experimental support for emitting type metadata for decorators."),Enables_experimental_support_for_ES7_async_functions:t(6068,e.DiagnosticCategory.Message,"Enables_experimental_support_for_ES7_async_functions_6068","Enables experimental support for ES7 async functions."),Specify_module_resolution_strategy_Colon_node_Node_js_or_classic_TypeScript_pre_1_6:t(6069,e.DiagnosticCategory.Message,"Specify_module_resolution_strategy_Colon_node_Node_js_or_classic_TypeScript_pre_1_6_6069","Specify module resolution strategy: 'node' (Node.js) or 'classic' (TypeScript pre-1.6)."),Initializes_a_TypeScript_project_and_creates_a_tsconfig_json_file:t(6070,e.DiagnosticCategory.Message,"Initializes_a_TypeScript_project_and_creates_a_tsconfig_json_file_6070","Initializes a TypeScript project and creates a tsconfig.json file."),Successfully_created_a_tsconfig_json_file:t(6071,e.DiagnosticCategory.Message,"Successfully_created_a_tsconfig_json_file_6071","Successfully created a tsconfig.json file."),Suppress_excess_property_checks_for_object_literals:t(6072,e.DiagnosticCategory.Message,"Suppress_excess_property_checks_for_object_literals_6072","Suppress excess property checks for object literals."),Stylize_errors_and_messages_using_color_and_context_experimental:t(6073,e.DiagnosticCategory.Message,"Stylize_errors_and_messages_using_color_and_context_experimental_6073","Stylize errors and messages using color and context (experimental)."),Do_not_report_errors_on_unused_labels:t(6074,e.DiagnosticCategory.Message,"Do_not_report_errors_on_unused_labels_6074","Do not report errors on unused labels."),Report_error_when_not_all_code_paths_in_function_return_a_value:t(6075,e.DiagnosticCategory.Message,"Report_error_when_not_all_code_paths_in_function_return_a_value_6075","Report error when not all code paths in function return a value."),Report_errors_for_fallthrough_cases_in_switch_statement:t(6076,e.DiagnosticCategory.Message,"Report_errors_for_fallthrough_cases_in_switch_statement_6076","Report errors for fallthrough cases in switch statement."),Do_not_report_errors_on_unreachable_code:t(6077,e.DiagnosticCategory.Message,"Do_not_report_errors_on_unreachable_code_6077","Do not report errors on unreachable code."),Disallow_inconsistently_cased_references_to_the_same_file:t(6078,e.DiagnosticCategory.Message,"Disallow_inconsistently_cased_references_to_the_same_file_6078","Disallow inconsistently-cased references to the same file."),Specify_library_files_to_be_included_in_the_compilation_Colon:t(6079,e.DiagnosticCategory.Message,"Specify_library_files_to_be_included_in_the_compilation_Colon_6079","Specify library files to be included in the compilation: "),Specify_JSX_code_generation_Colon_preserve_react_native_or_react:t(6080,e.DiagnosticCategory.Message,"Specify_JSX_code_generation_Colon_preserve_react_native_or_react_6080","Specify JSX code generation: 'preserve', 'react-native', or 'react'."),File_0_has_an_unsupported_extension_so_skipping_it:t(6081,e.DiagnosticCategory.Message,"File_0_has_an_unsupported_extension_so_skipping_it_6081","File '{0}' has an unsupported extension, so skipping it."),Only_amd_and_system_modules_are_supported_alongside_0:t(6082,e.DiagnosticCategory.Error,"Only_amd_and_system_modules_are_supported_alongside_0_6082","Only 'amd' and 'system' modules are supported alongside --{0}."),Base_directory_to_resolve_non_absolute_module_names:t(6083,e.DiagnosticCategory.Message,"Base_directory_to_resolve_non_absolute_module_names_6083","Base directory to resolve non-absolute module names."),Deprecated_Use_jsxFactory_instead_Specify_the_object_invoked_for_createElement_when_targeting_react_JSX_emit:t(6084,e.DiagnosticCategory.Message,"Deprecated_Use_jsxFactory_instead_Specify_the_object_invoked_for_createElement_when_targeting_react__6084","[Deprecated] Use '--jsxFactory' instead. Specify the object invoked for createElement when targeting 'react' JSX emit"),Enable_tracing_of_the_name_resolution_process:t(6085,e.DiagnosticCategory.Message,"Enable_tracing_of_the_name_resolution_process_6085","Enable tracing of the name resolution process."),Resolving_module_0_from_1:t(6086,e.DiagnosticCategory.Message,"Resolving_module_0_from_1_6086","======== Resolving module '{0}' from '{1}'. ========"),Explicitly_specified_module_resolution_kind_Colon_0:t(6087,e.DiagnosticCategory.Message,"Explicitly_specified_module_resolution_kind_Colon_0_6087","Explicitly specified module resolution kind: '{0}'."),Module_resolution_kind_is_not_specified_using_0:t(6088,e.DiagnosticCategory.Message,"Module_resolution_kind_is_not_specified_using_0_6088","Module resolution kind is not specified, using '{0}'."),Module_name_0_was_successfully_resolved_to_1:t(6089,e.DiagnosticCategory.Message,"Module_name_0_was_successfully_resolved_to_1_6089","======== Module name '{0}' was successfully resolved to '{1}'. ========"),Module_name_0_was_not_resolved:t(6090,e.DiagnosticCategory.Message,"Module_name_0_was_not_resolved_6090","======== Module name '{0}' was not resolved. ========"),paths_option_is_specified_looking_for_a_pattern_to_match_module_name_0:t(6091,e.DiagnosticCategory.Message,"paths_option_is_specified_looking_for_a_pattern_to_match_module_name_0_6091","'paths' option is specified, looking for a pattern to match module name '{0}'."),Module_name_0_matched_pattern_1:t(6092,e.DiagnosticCategory.Message,"Module_name_0_matched_pattern_1_6092","Module name '{0}', matched pattern '{1}'."),Trying_substitution_0_candidate_module_location_Colon_1:t(6093,e.DiagnosticCategory.Message,"Trying_substitution_0_candidate_module_location_Colon_1_6093","Trying substitution '{0}', candidate module location: '{1}'."),Resolving_module_name_0_relative_to_base_url_1_2:t(6094,e.DiagnosticCategory.Message,"Resolving_module_name_0_relative_to_base_url_1_2_6094","Resolving module name '{0}' relative to base url '{1}' - '{2}'."),Loading_module_as_file_Slash_folder_candidate_module_location_0_target_file_type_1:t(6095,e.DiagnosticCategory.Message,"Loading_module_as_file_Slash_folder_candidate_module_location_0_target_file_type_1_6095","Loading module as file / folder, candidate module location '{0}', target file type '{1}'."),File_0_does_not_exist:t(6096,e.DiagnosticCategory.Message,"File_0_does_not_exist_6096","File '{0}' does not exist."),File_0_exist_use_it_as_a_name_resolution_result:t(6097,e.DiagnosticCategory.Message,"File_0_exist_use_it_as_a_name_resolution_result_6097","File '{0}' exist - use it as a name resolution result."),Loading_module_0_from_node_modules_folder_target_file_type_1:t(6098,e.DiagnosticCategory.Message,"Loading_module_0_from_node_modules_folder_target_file_type_1_6098","Loading module '{0}' from 'node_modules' folder, target file type '{1}'."),Found_package_json_at_0:t(6099,e.DiagnosticCategory.Message,"Found_package_json_at_0_6099","Found 'package.json' at '{0}'."),package_json_does_not_have_a_0_field:t(6100,e.DiagnosticCategory.Message,"package_json_does_not_have_a_0_field_6100","'package.json' does not have a '{0}' field."),package_json_has_0_field_1_that_references_2:t(6101,e.DiagnosticCategory.Message,"package_json_has_0_field_1_that_references_2_6101","'package.json' has '{0}' field '{1}' that references '{2}'."),Allow_javascript_files_to_be_compiled:t(6102,e.DiagnosticCategory.Message,"Allow_javascript_files_to_be_compiled_6102","Allow javascript files to be compiled."),Option_0_should_have_array_of_strings_as_a_value:t(6103,e.DiagnosticCategory.Error,"Option_0_should_have_array_of_strings_as_a_value_6103","Option '{0}' should have array of strings as a value."),Checking_if_0_is_the_longest_matching_prefix_for_1_2:t(6104,e.DiagnosticCategory.Message,"Checking_if_0_is_the_longest_matching_prefix_for_1_2_6104","Checking if '{0}' is the longest matching prefix for '{1}' - '{2}'."),Expected_type_of_0_field_in_package_json_to_be_string_got_1:t(6105,e.DiagnosticCategory.Message,"Expected_type_of_0_field_in_package_json_to_be_string_got_1_6105","Expected type of '{0}' field in 'package.json' to be 'string', got '{1}'."),baseUrl_option_is_set_to_0_using_this_value_to_resolve_non_relative_module_name_1:t(6106,e.DiagnosticCategory.Message,"baseUrl_option_is_set_to_0_using_this_value_to_resolve_non_relative_module_name_1_6106","'baseUrl' option is set to '{0}', using this value to resolve non-relative module name '{1}'."),rootDirs_option_is_set_using_it_to_resolve_relative_module_name_0:t(6107,e.DiagnosticCategory.Message,"rootDirs_option_is_set_using_it_to_resolve_relative_module_name_0_6107","'rootDirs' option is set, using it to resolve relative module name '{0}'."),Longest_matching_prefix_for_0_is_1:t(6108,e.DiagnosticCategory.Message,"Longest_matching_prefix_for_0_is_1_6108","Longest matching prefix for '{0}' is '{1}'."),Loading_0_from_the_root_dir_1_candidate_location_2:t(6109,e.DiagnosticCategory.Message,"Loading_0_from_the_root_dir_1_candidate_location_2_6109","Loading '{0}' from the root dir '{1}', candidate location '{2}'."),Trying_other_entries_in_rootDirs:t(6110,e.DiagnosticCategory.Message,"Trying_other_entries_in_rootDirs_6110","Trying other entries in 'rootDirs'."),Module_resolution_using_rootDirs_has_failed:t(6111,e.DiagnosticCategory.Message,"Module_resolution_using_rootDirs_has_failed_6111","Module resolution using 'rootDirs' has failed."),Do_not_emit_use_strict_directives_in_module_output:t(6112,e.DiagnosticCategory.Message,"Do_not_emit_use_strict_directives_in_module_output_6112","Do not emit 'use strict' directives in module output."),Enable_strict_null_checks:t(6113,e.DiagnosticCategory.Message,"Enable_strict_null_checks_6113","Enable strict null checks."),Unknown_option_excludes_Did_you_mean_exclude:t(6114,e.DiagnosticCategory.Error,"Unknown_option_excludes_Did_you_mean_exclude_6114","Unknown option 'excludes'. Did you mean 'exclude'?"),Raise_error_on_this_expressions_with_an_implied_any_type:t(6115,e.DiagnosticCategory.Message,"Raise_error_on_this_expressions_with_an_implied_any_type_6115","Raise error on 'this' expressions with an implied 'any' type."),Resolving_type_reference_directive_0_containing_file_1_root_directory_2:t(6116,e.DiagnosticCategory.Message,"Resolving_type_reference_directive_0_containing_file_1_root_directory_2_6116","======== Resolving type reference directive '{0}', containing file '{1}', root directory '{2}'. ========"),Resolving_using_primary_search_paths:t(6117,e.DiagnosticCategory.Message,"Resolving_using_primary_search_paths_6117","Resolving using primary search paths..."),Resolving_from_node_modules_folder:t(6118,e.DiagnosticCategory.Message,"Resolving_from_node_modules_folder_6118","Resolving from node_modules folder..."),Type_reference_directive_0_was_successfully_resolved_to_1_primary_Colon_2:t(6119,e.DiagnosticCategory.Message,"Type_reference_directive_0_was_successfully_resolved_to_1_primary_Colon_2_6119","======== Type reference directive '{0}' was successfully resolved to '{1}', primary: {2}. ========"),Type_reference_directive_0_was_not_resolved:t(6120,e.DiagnosticCategory.Message,"Type_reference_directive_0_was_not_resolved_6120","======== Type reference directive '{0}' was not resolved. ========"),Resolving_with_primary_search_path_0:t(6121,e.DiagnosticCategory.Message,"Resolving_with_primary_search_path_0_6121","Resolving with primary search path '{0}'."),Root_directory_cannot_be_determined_skipping_primary_search_paths:t(6122,e.DiagnosticCategory.Message,"Root_directory_cannot_be_determined_skipping_primary_search_paths_6122","Root directory cannot be determined, skipping primary search paths."),Resolving_type_reference_directive_0_containing_file_1_root_directory_not_set:t(6123,e.DiagnosticCategory.Message,"Resolving_type_reference_directive_0_containing_file_1_root_directory_not_set_6123","======== Resolving type reference directive '{0}', containing file '{1}', root directory not set. ========"),Type_declaration_files_to_be_included_in_compilation:t(6124,e.DiagnosticCategory.Message,"Type_declaration_files_to_be_included_in_compilation_6124","Type declaration files to be included in compilation."),Looking_up_in_node_modules_folder_initial_location_0:t(6125,e.DiagnosticCategory.Message,"Looking_up_in_node_modules_folder_initial_location_0_6125","Looking up in 'node_modules' folder, initial location '{0}'."),Containing_file_is_not_specified_and_root_directory_cannot_be_determined_skipping_lookup_in_node_modules_folder:t(6126,e.DiagnosticCategory.Message,"Containing_file_is_not_specified_and_root_directory_cannot_be_determined_skipping_lookup_in_node_mod_6126","Containing file is not specified and root directory cannot be determined, skipping lookup in 'node_modules' folder."),Resolving_type_reference_directive_0_containing_file_not_set_root_directory_1:t(6127,e.DiagnosticCategory.Message,"Resolving_type_reference_directive_0_containing_file_not_set_root_directory_1_6127","======== Resolving type reference directive '{0}', containing file not set, root directory '{1}'. ========"),Resolving_type_reference_directive_0_containing_file_not_set_root_directory_not_set:t(6128,e.DiagnosticCategory.Message,"Resolving_type_reference_directive_0_containing_file_not_set_root_directory_not_set_6128","======== Resolving type reference directive '{0}', containing file not set, root directory not set. ========"),Resolving_real_path_for_0_result_1:t(6130,e.DiagnosticCategory.Message,"Resolving_real_path_for_0_result_1_6130","Resolving real path for '{0}', result '{1}'."),Cannot_compile_modules_using_option_0_unless_the_module_flag_is_amd_or_system:t(6131,e.DiagnosticCategory.Error,"Cannot_compile_modules_using_option_0_unless_the_module_flag_is_amd_or_system_6131","Cannot compile modules using option '{0}' unless the '--module' flag is 'amd' or 'system'."),File_name_0_has_a_1_extension_stripping_it:t(6132,e.DiagnosticCategory.Message,"File_name_0_has_a_1_extension_stripping_it_6132","File name '{0}' has a '{1}' extension - stripping it."),_0_is_declared_but_its_value_is_never_read:t(6133,e.DiagnosticCategory.Error,"_0_is_declared_but_its_value_is_never_read_6133","'{0}' is declared but its value is never read."),Report_errors_on_unused_locals:t(6134,e.DiagnosticCategory.Message,"Report_errors_on_unused_locals_6134","Report errors on unused locals."),Report_errors_on_unused_parameters:t(6135,e.DiagnosticCategory.Message,"Report_errors_on_unused_parameters_6135","Report errors on unused parameters."),The_maximum_dependency_depth_to_search_under_node_modules_and_load_JavaScript_files:t(6136,e.DiagnosticCategory.Message,"The_maximum_dependency_depth_to_search_under_node_modules_and_load_JavaScript_files_6136","The maximum dependency depth to search under node_modules and load JavaScript files."),Cannot_import_type_declaration_files_Consider_importing_0_instead_of_1:t(6137,e.DiagnosticCategory.Error,"Cannot_import_type_declaration_files_Consider_importing_0_instead_of_1_6137","Cannot import type declaration files. Consider importing '{0}' instead of '{1}'."),Property_0_is_declared_but_its_value_is_never_read:t(6138,e.DiagnosticCategory.Error,"Property_0_is_declared_but_its_value_is_never_read_6138","Property '{0}' is declared but its value is never read."),Import_emit_helpers_from_tslib:t(6139,e.DiagnosticCategory.Message,"Import_emit_helpers_from_tslib_6139","Import emit helpers from 'tslib'."),Auto_discovery_for_typings_is_enabled_in_project_0_Running_extra_resolution_pass_for_module_1_using_cache_location_2:t(6140,e.DiagnosticCategory.Error,"Auto_discovery_for_typings_is_enabled_in_project_0_Running_extra_resolution_pass_for_module_1_using__6140","Auto discovery for typings is enabled in project '{0}'. Running extra resolution pass for module '{1}' using cache location '{2}'."),Parse_in_strict_mode_and_emit_use_strict_for_each_source_file:t(6141,e.DiagnosticCategory.Message,"Parse_in_strict_mode_and_emit_use_strict_for_each_source_file_6141",'Parse in strict mode and emit "use strict" for each source file.'),Module_0_was_resolved_to_1_but_jsx_is_not_set:t(6142,e.DiagnosticCategory.Error,"Module_0_was_resolved_to_1_but_jsx_is_not_set_6142","Module '{0}' was resolved to '{1}', but '--jsx' is not set."),Module_0_was_resolved_as_locally_declared_ambient_module_in_file_1:t(6144,e.DiagnosticCategory.Message,"Module_0_was_resolved_as_locally_declared_ambient_module_in_file_1_6144","Module '{0}' was resolved as locally declared ambient module in file '{1}'."),Module_0_was_resolved_as_ambient_module_declared_in_1_since_this_file_was_not_modified:t(6145,e.DiagnosticCategory.Message,"Module_0_was_resolved_as_ambient_module_declared_in_1_since_this_file_was_not_modified_6145","Module '{0}' was resolved as ambient module declared in '{1}' since this file was not modified."),Specify_the_JSX_factory_function_to_use_when_targeting_react_JSX_emit_e_g_React_createElement_or_h:t(6146,e.DiagnosticCategory.Message,"Specify_the_JSX_factory_function_to_use_when_targeting_react_JSX_emit_e_g_React_createElement_or_h_6146","Specify the JSX factory function to use when targeting 'react' JSX emit, e.g. 'React.createElement' or 'h'."),Resolution_for_module_0_was_found_in_cache:t(6147,e.DiagnosticCategory.Message,"Resolution_for_module_0_was_found_in_cache_6147","Resolution for module '{0}' was found in cache."),Directory_0_does_not_exist_skipping_all_lookups_in_it:t(6148,e.DiagnosticCategory.Message,"Directory_0_does_not_exist_skipping_all_lookups_in_it_6148","Directory '{0}' does not exist, skipping all lookups in it."),Show_diagnostic_information:t(6149,e.DiagnosticCategory.Message,"Show_diagnostic_information_6149","Show diagnostic information."),Show_verbose_diagnostic_information:t(6150,e.DiagnosticCategory.Message,"Show_verbose_diagnostic_information_6150","Show verbose diagnostic information."),Emit_a_single_file_with_source_maps_instead_of_having_a_separate_file:t(6151,e.DiagnosticCategory.Message,"Emit_a_single_file_with_source_maps_instead_of_having_a_separate_file_6151","Emit a single file with source maps instead of having a separate file."),Emit_the_source_alongside_the_sourcemaps_within_a_single_file_requires_inlineSourceMap_or_sourceMap_to_be_set:t(6152,e.DiagnosticCategory.Message,"Emit_the_source_alongside_the_sourcemaps_within_a_single_file_requires_inlineSourceMap_or_sourceMap__6152","Emit the source alongside the sourcemaps within a single file; requires '--inlineSourceMap' or '--sourceMap' to be set."),Transpile_each_file_as_a_separate_module_similar_to_ts_transpileModule:t(6153,e.DiagnosticCategory.Message,"Transpile_each_file_as_a_separate_module_similar_to_ts_transpileModule_6153","Transpile each file as a separate module (similar to 'ts.transpileModule')."),Print_names_of_generated_files_part_of_the_compilation:t(6154,e.DiagnosticCategory.Message,"Print_names_of_generated_files_part_of_the_compilation_6154","Print names of generated files part of the compilation."),Print_names_of_files_part_of_the_compilation:t(6155,e.DiagnosticCategory.Message,"Print_names_of_files_part_of_the_compilation_6155","Print names of files part of the compilation."),The_locale_used_when_displaying_messages_to_the_user_e_g_en_us:t(6156,e.DiagnosticCategory.Message,"The_locale_used_when_displaying_messages_to_the_user_e_g_en_us_6156","The locale used when displaying messages to the user (e.g. 'en-us')"),Do_not_generate_custom_helper_functions_like_extends_in_compiled_output:t(6157,e.DiagnosticCategory.Message,"Do_not_generate_custom_helper_functions_like_extends_in_compiled_output_6157","Do not generate custom helper functions like '__extends' in compiled output."),Do_not_include_the_default_library_file_lib_d_ts:t(6158,e.DiagnosticCategory.Message,"Do_not_include_the_default_library_file_lib_d_ts_6158","Do not include the default library file (lib.d.ts)."),Do_not_add_triple_slash_references_or_imported_modules_to_the_list_of_compiled_files:t(6159,e.DiagnosticCategory.Message,"Do_not_add_triple_slash_references_or_imported_modules_to_the_list_of_compiled_files_6159","Do not add triple-slash references or imported modules to the list of compiled files."),Deprecated_Use_skipLibCheck_instead_Skip_type_checking_of_default_library_declaration_files:t(6160,e.DiagnosticCategory.Message,"Deprecated_Use_skipLibCheck_instead_Skip_type_checking_of_default_library_declaration_files_6160","[Deprecated] Use '--skipLibCheck' instead. Skip type checking of default library declaration files."),List_of_folders_to_include_type_definitions_from:t(6161,e.DiagnosticCategory.Message,"List_of_folders_to_include_type_definitions_from_6161","List of folders to include type definitions from."),Disable_size_limitations_on_JavaScript_projects:t(6162,e.DiagnosticCategory.Message,"Disable_size_limitations_on_JavaScript_projects_6162","Disable size limitations on JavaScript projects."),The_character_set_of_the_input_files:t(6163,e.DiagnosticCategory.Message,"The_character_set_of_the_input_files_6163","The character set of the input files."),Emit_a_UTF_8_Byte_Order_Mark_BOM_in_the_beginning_of_output_files:t(6164,e.DiagnosticCategory.Message,"Emit_a_UTF_8_Byte_Order_Mark_BOM_in_the_beginning_of_output_files_6164","Emit a UTF-8 Byte Order Mark (BOM) in the beginning of output files."),Do_not_truncate_error_messages:t(6165,e.DiagnosticCategory.Message,"Do_not_truncate_error_messages_6165","Do not truncate error messages."),Output_directory_for_generated_declaration_files:t(6166,e.DiagnosticCategory.Message,"Output_directory_for_generated_declaration_files_6166","Output directory for generated declaration files."),A_series_of_entries_which_re_map_imports_to_lookup_locations_relative_to_the_baseUrl:t(6167,e.DiagnosticCategory.Message,"A_series_of_entries_which_re_map_imports_to_lookup_locations_relative_to_the_baseUrl_6167","A series of entries which re-map imports to lookup locations relative to the 'baseUrl'."),List_of_root_folders_whose_combined_content_represents_the_structure_of_the_project_at_runtime:t(6168,e.DiagnosticCategory.Message,"List_of_root_folders_whose_combined_content_represents_the_structure_of_the_project_at_runtime_6168","List of root folders whose combined content represents the structure of the project at runtime."),Show_all_compiler_options:t(6169,e.DiagnosticCategory.Message,"Show_all_compiler_options_6169","Show all compiler options."),Deprecated_Use_outFile_instead_Concatenate_and_emit_output_to_single_file:t(6170,e.DiagnosticCategory.Message,"Deprecated_Use_outFile_instead_Concatenate_and_emit_output_to_single_file_6170","[Deprecated] Use '--outFile' instead. Concatenate and emit output to single file"),Command_line_Options:t(6171,e.DiagnosticCategory.Message,"Command_line_Options_6171","Command-line Options"),Basic_Options:t(6172,e.DiagnosticCategory.Message,"Basic_Options_6172","Basic Options"),Strict_Type_Checking_Options:t(6173,e.DiagnosticCategory.Message,"Strict_Type_Checking_Options_6173","Strict Type-Checking Options"),Module_Resolution_Options:t(6174,e.DiagnosticCategory.Message,"Module_Resolution_Options_6174","Module Resolution Options"),Source_Map_Options:t(6175,e.DiagnosticCategory.Message,"Source_Map_Options_6175","Source Map Options"),Additional_Checks:t(6176,e.DiagnosticCategory.Message,"Additional_Checks_6176","Additional Checks"),Experimental_Options:t(6177,e.DiagnosticCategory.Message,"Experimental_Options_6177","Experimental Options"),Advanced_Options:t(6178,e.DiagnosticCategory.Message,"Advanced_Options_6178","Advanced Options"),Provide_full_support_for_iterables_in_for_of_spread_and_destructuring_when_targeting_ES5_or_ES3:t(6179,e.DiagnosticCategory.Message,"Provide_full_support_for_iterables_in_for_of_spread_and_destructuring_when_targeting_ES5_or_ES3_6179","Provide full support for iterables in 'for-of', spread, and destructuring when targeting 'ES5' or 'ES3'."),Enable_all_strict_type_checking_options:t(6180,e.DiagnosticCategory.Message,"Enable_all_strict_type_checking_options_6180","Enable all strict type-checking options."),List_of_language_service_plugins:t(6181,e.DiagnosticCategory.Message,"List_of_language_service_plugins_6181","List of language service plugins."),Scoped_package_detected_looking_in_0:t(6182,e.DiagnosticCategory.Message,"Scoped_package_detected_looking_in_0_6182","Scoped package detected, looking in '{0}'"),Reusing_resolution_of_module_0_to_file_1_from_old_program:t(6183,e.DiagnosticCategory.Message,"Reusing_resolution_of_module_0_to_file_1_from_old_program_6183","Reusing resolution of module '{0}' to file '{1}' from old program."),Reusing_module_resolutions_originating_in_0_since_resolutions_are_unchanged_from_old_program:t(6184,e.DiagnosticCategory.Message,"Reusing_module_resolutions_originating_in_0_since_resolutions_are_unchanged_from_old_program_6184","Reusing module resolutions originating in '{0}' since resolutions are unchanged from old program."),Disable_strict_checking_of_generic_signatures_in_function_types:t(6185,e.DiagnosticCategory.Message,"Disable_strict_checking_of_generic_signatures_in_function_types_6185","Disable strict checking of generic signatures in function types."),Enable_strict_checking_of_function_types:t(6186,e.DiagnosticCategory.Message,"Enable_strict_checking_of_function_types_6186","Enable strict checking of function types."),Variable_0_implicitly_has_an_1_type:t(7005,e.DiagnosticCategory.Error,"Variable_0_implicitly_has_an_1_type_7005","Variable '{0}' implicitly has an '{1}' type."),Parameter_0_implicitly_has_an_1_type:t(7006,e.DiagnosticCategory.Error,"Parameter_0_implicitly_has_an_1_type_7006","Parameter '{0}' implicitly has an '{1}' type."),Member_0_implicitly_has_an_1_type:t(7008,e.DiagnosticCategory.Error,"Member_0_implicitly_has_an_1_type_7008","Member '{0}' implicitly has an '{1}' type."),new_expression_whose_target_lacks_a_construct_signature_implicitly_has_an_any_type:t(7009,e.DiagnosticCategory.Error,"new_expression_whose_target_lacks_a_construct_signature_implicitly_has_an_any_type_7009","'new' expression, whose target lacks a construct signature, implicitly has an 'any' type."),_0_which_lacks_return_type_annotation_implicitly_has_an_1_return_type:t(7010,e.DiagnosticCategory.Error,"_0_which_lacks_return_type_annotation_implicitly_has_an_1_return_type_7010","'{0}', which lacks return-type annotation, implicitly has an '{1}' return type."),Function_expression_which_lacks_return_type_annotation_implicitly_has_an_0_return_type:t(7011,e.DiagnosticCategory.Error,"Function_expression_which_lacks_return_type_annotation_implicitly_has_an_0_return_type_7011","Function expression, which lacks return-type annotation, implicitly has an '{0}' return type."),Construct_signature_which_lacks_return_type_annotation_implicitly_has_an_any_return_type:t(7013,e.DiagnosticCategory.Error,"Construct_signature_which_lacks_return_type_annotation_implicitly_has_an_any_return_type_7013","Construct signature, which lacks return-type annotation, implicitly has an 'any' return type."),Element_implicitly_has_an_any_type_because_index_expression_is_not_of_type_number:t(7015,e.DiagnosticCategory.Error,"Element_implicitly_has_an_any_type_because_index_expression_is_not_of_type_number_7015","Element implicitly has an 'any' type because index expression is not of type 'number'."),Could_not_find_a_declaration_file_for_module_0_1_implicitly_has_an_any_type:t(7016,e.DiagnosticCategory.Error,"Could_not_find_a_declaration_file_for_module_0_1_implicitly_has_an_any_type_7016","Could not find a declaration file for module '{0}'. '{1}' implicitly has an 'any' type."),Element_implicitly_has_an_any_type_because_type_0_has_no_index_signature:t(7017,e.DiagnosticCategory.Error,"Element_implicitly_has_an_any_type_because_type_0_has_no_index_signature_7017","Element implicitly has an 'any' type because type '{0}' has no index signature."),Object_literal_s_property_0_implicitly_has_an_1_type:t(7018,e.DiagnosticCategory.Error,"Object_literal_s_property_0_implicitly_has_an_1_type_7018","Object literal's property '{0}' implicitly has an '{1}' type."),Rest_parameter_0_implicitly_has_an_any_type:t(7019,e.DiagnosticCategory.Error,"Rest_parameter_0_implicitly_has_an_any_type_7019","Rest parameter '{0}' implicitly has an 'any[]' type."),Call_signature_which_lacks_return_type_annotation_implicitly_has_an_any_return_type:t(7020,e.DiagnosticCategory.Error,"Call_signature_which_lacks_return_type_annotation_implicitly_has_an_any_return_type_7020","Call signature, which lacks return-type annotation, implicitly has an 'any' return type."),_0_implicitly_has_type_any_because_it_does_not_have_a_type_annotation_and_is_referenced_directly_or_indirectly_in_its_own_initializer:t(7022,e.DiagnosticCategory.Error,"_0_implicitly_has_type_any_because_it_does_not_have_a_type_annotation_and_is_referenced_directly_or__7022","'{0}' implicitly has type 'any' because it does not have a type annotation and is referenced directly or indirectly in its own initializer."),_0_implicitly_has_return_type_any_because_it_does_not_have_a_return_type_annotation_and_is_referenced_directly_or_indirectly_in_one_of_its_return_expressions:t(7023,e.DiagnosticCategory.Error,"_0_implicitly_has_return_type_any_because_it_does_not_have_a_return_type_annotation_and_is_reference_7023","'{0}' implicitly has return type 'any' because it does not have a return type annotation and is referenced directly or indirectly in one of its return expressions."),Function_implicitly_has_return_type_any_because_it_does_not_have_a_return_type_annotation_and_is_referenced_directly_or_indirectly_in_one_of_its_return_expressions:t(7024,e.DiagnosticCategory.Error,"Function_implicitly_has_return_type_any_because_it_does_not_have_a_return_type_annotation_and_is_ref_7024","Function implicitly has return type 'any' because it does not have a return type annotation and is referenced directly or indirectly in one of its return expressions."),Generator_implicitly_has_type_0_because_it_does_not_yield_any_values_Consider_supplying_a_return_type:t(7025,e.DiagnosticCategory.Error,"Generator_implicitly_has_type_0_because_it_does_not_yield_any_values_Consider_supplying_a_return_typ_7025","Generator implicitly has type '{0}' because it does not yield any values. Consider supplying a return type."),JSX_element_implicitly_has_type_any_because_no_interface_JSX_0_exists:t(7026,e.DiagnosticCategory.Error,"JSX_element_implicitly_has_type_any_because_no_interface_JSX_0_exists_7026","JSX element implicitly has type 'any' because no interface 'JSX.{0}' exists."),Unreachable_code_detected:t(7027,e.DiagnosticCategory.Error,"Unreachable_code_detected_7027","Unreachable code detected."),Unused_label:t(7028,e.DiagnosticCategory.Error,"Unused_label_7028","Unused label."),Fallthrough_case_in_switch:t(7029,e.DiagnosticCategory.Error,"Fallthrough_case_in_switch_7029","Fallthrough case in switch."),Not_all_code_paths_return_a_value:t(7030,e.DiagnosticCategory.Error,"Not_all_code_paths_return_a_value_7030","Not all code paths return a value."),Binding_element_0_implicitly_has_an_1_type:t(7031,e.DiagnosticCategory.Error,"Binding_element_0_implicitly_has_an_1_type_7031","Binding element '{0}' implicitly has an '{1}' type."),Property_0_implicitly_has_type_any_because_its_set_accessor_lacks_a_parameter_type_annotation:t(7032,e.DiagnosticCategory.Error,"Property_0_implicitly_has_type_any_because_its_set_accessor_lacks_a_parameter_type_annotation_7032","Property '{0}' implicitly has type 'any', because its set accessor lacks a parameter type annotation."),Property_0_implicitly_has_type_any_because_its_get_accessor_lacks_a_return_type_annotation:t(7033,e.DiagnosticCategory.Error,"Property_0_implicitly_has_type_any_because_its_get_accessor_lacks_a_return_type_annotation_7033","Property '{0}' implicitly has type 'any', because its get accessor lacks a return type annotation."),Variable_0_implicitly_has_type_1_in_some_locations_where_its_type_cannot_be_determined:t(7034,e.DiagnosticCategory.Error,"Variable_0_implicitly_has_type_1_in_some_locations_where_its_type_cannot_be_determined_7034","Variable '{0}' implicitly has type '{1}' in some locations where its type cannot be determined."),Try_npm_install_types_Slash_0_if_it_exists_or_add_a_new_declaration_d_ts_file_containing_declare_module_0:t(7035,e.DiagnosticCategory.Error,"Try_npm_install_types_Slash_0_if_it_exists_or_add_a_new_declaration_d_ts_file_containing_declare_mod_7035","Try `npm install @types/{0}` if it exists or add a new declaration (.d.ts) file containing `declare module '{0}';`"),Dynamic_import_s_specifier_must_be_of_type_string_but_here_has_type_0:t(7036,e.DiagnosticCategory.Error,"Dynamic_import_s_specifier_must_be_of_type_string_but_here_has_type_0_7036","Dynamic import's specifier must be of type 'string', but here has type '{0}'."),You_cannot_rename_this_element:t(8e3,e.DiagnosticCategory.Error,"You_cannot_rename_this_element_8000","You cannot rename this element."),You_cannot_rename_elements_that_are_defined_in_the_standard_TypeScript_library:t(8001,e.DiagnosticCategory.Error,"You_cannot_rename_elements_that_are_defined_in_the_standard_TypeScript_library_8001","You cannot rename elements that are defined in the standard TypeScript library."),import_can_only_be_used_in_a_ts_file:t(8002,e.DiagnosticCategory.Error,"import_can_only_be_used_in_a_ts_file_8002","'import ... =' can only be used in a .ts file."),export_can_only_be_used_in_a_ts_file:t(8003,e.DiagnosticCategory.Error,"export_can_only_be_used_in_a_ts_file_8003","'export=' can only be used in a .ts file."),type_parameter_declarations_can_only_be_used_in_a_ts_file:t(8004,e.DiagnosticCategory.Error,"type_parameter_declarations_can_only_be_used_in_a_ts_file_8004","'type parameter declarations' can only be used in a .ts file."),implements_clauses_can_only_be_used_in_a_ts_file:t(8005,e.DiagnosticCategory.Error,"implements_clauses_can_only_be_used_in_a_ts_file_8005","'implements clauses' can only be used in a .ts file."),interface_declarations_can_only_be_used_in_a_ts_file:t(8006,e.DiagnosticCategory.Error,"interface_declarations_can_only_be_used_in_a_ts_file_8006","'interface declarations' can only be used in a .ts file."),module_declarations_can_only_be_used_in_a_ts_file:t(8007,e.DiagnosticCategory.Error,"module_declarations_can_only_be_used_in_a_ts_file_8007","'module declarations' can only be used in a .ts file."),type_aliases_can_only_be_used_in_a_ts_file:t(8008,e.DiagnosticCategory.Error,"type_aliases_can_only_be_used_in_a_ts_file_8008","'type aliases' can only be used in a .ts file."),_0_can_only_be_used_in_a_ts_file:t(8009,e.DiagnosticCategory.Error,"_0_can_only_be_used_in_a_ts_file_8009","'{0}' can only be used in a .ts file."),types_can_only_be_used_in_a_ts_file:t(8010,e.DiagnosticCategory.Error,"types_can_only_be_used_in_a_ts_file_8010","'types' can only be used in a .ts file."),type_arguments_can_only_be_used_in_a_ts_file:t(8011,e.DiagnosticCategory.Error,"type_arguments_can_only_be_used_in_a_ts_file_8011","'type arguments' can only be used in a .ts file."),parameter_modifiers_can_only_be_used_in_a_ts_file:t(8012,e.DiagnosticCategory.Error,"parameter_modifiers_can_only_be_used_in_a_ts_file_8012","'parameter modifiers' can only be used in a .ts file."),non_null_assertions_can_only_be_used_in_a_ts_file:t(8013,e.DiagnosticCategory.Error,"non_null_assertions_can_only_be_used_in_a_ts_file_8013","'non-null assertions' can only be used in a .ts file."),enum_declarations_can_only_be_used_in_a_ts_file:t(8015,e.DiagnosticCategory.Error,"enum_declarations_can_only_be_used_in_a_ts_file_8015","'enum declarations' can only be used in a .ts file."),type_assertion_expressions_can_only_be_used_in_a_ts_file:t(8016,e.DiagnosticCategory.Error,"type_assertion_expressions_can_only_be_used_in_a_ts_file_8016","'type assertion expressions' can only be used in a .ts file."),Octal_literal_types_must_use_ES2015_syntax_Use_the_syntax_0:t(8017,e.DiagnosticCategory.Error,"Octal_literal_types_must_use_ES2015_syntax_Use_the_syntax_0_8017","Octal literal types must use ES2015 syntax. Use the syntax '{0}'."),Octal_literals_are_not_allowed_in_enums_members_initializer_Use_the_syntax_0:t(8018,e.DiagnosticCategory.Error,"Octal_literals_are_not_allowed_in_enums_members_initializer_Use_the_syntax_0_8018","Octal literals are not allowed in enums members initializer. Use the syntax '{0}'."),Report_errors_in_js_files:t(8019,e.DiagnosticCategory.Message,"Report_errors_in_js_files_8019","Report errors in .js files."),JSDoc_types_can_only_be_used_inside_documentation_comments:t(8020,e.DiagnosticCategory.Error,"JSDoc_types_can_only_be_used_inside_documentation_comments_8020","JSDoc types can only be used inside documentation comments."),JSDoc_typedef_tag_should_either_have_a_type_annotation_or_be_followed_by_property_or_member_tags:t(8021,e.DiagnosticCategory.Error,"JSDoc_typedef_tag_should_either_have_a_type_annotation_or_be_followed_by_property_or_member_tags_8021","JSDoc '@typedef' tag should either have a type annotation or be followed by '@property' or '@member' tags."),JSDoc_0_is_not_attached_to_a_class:t(8022,e.DiagnosticCategory.Error,"JSDoc_0_is_not_attached_to_a_class_8022","JSDoc '@{0}' is not attached to a class."),JSDoc_0_1_does_not_match_the_extends_2_clause:t(8023,e.DiagnosticCategory.Error,"JSDoc_0_1_does_not_match_the_extends_2_clause_8023","JSDoc '@{0} {1}' does not match the 'extends {2}' clause."),JSDoc_param_tag_has_name_0_but_there_is_no_parameter_with_that_name:t(8024,e.DiagnosticCategory.Error,"JSDoc_param_tag_has_name_0_but_there_is_no_parameter_with_that_name_8024","JSDoc '@param' tag has name '{0}', but there is no parameter with that name."),Class_declarations_cannot_have_more_than_one_augments_or_extends_tag:t(8025,e.DiagnosticCategory.Error,"Class_declarations_cannot_have_more_than_one_augments_or_extends_tag_8025","Class declarations cannot have more than one `@augments` or `@extends` tag."),Only_identifiers_Slashqualified_names_with_optional_type_arguments_are_currently_supported_in_a_class_extends_clause:t(9002,e.DiagnosticCategory.Error,"Only_identifiers_Slashqualified_names_with_optional_type_arguments_are_currently_supported_in_a_clas_9002","Only identifiers/qualified-names with optional type arguments are currently supported in a class 'extends' clause."),class_expressions_are_not_currently_supported:t(9003,e.DiagnosticCategory.Error,"class_expressions_are_not_currently_supported_9003","'class' expressions are not currently supported."),Language_service_is_disabled:t(9004,e.DiagnosticCategory.Error,"Language_service_is_disabled_9004","Language service is disabled."),JSX_attributes_must_only_be_assigned_a_non_empty_expression:t(17e3,e.DiagnosticCategory.Error,"JSX_attributes_must_only_be_assigned_a_non_empty_expression_17000","JSX attributes must only be assigned a non-empty 'expression'."),JSX_elements_cannot_have_multiple_attributes_with_the_same_name:t(17001,e.DiagnosticCategory.Error,"JSX_elements_cannot_have_multiple_attributes_with_the_same_name_17001","JSX elements cannot have multiple attributes with the same name."),Expected_corresponding_JSX_closing_tag_for_0:t(17002,e.DiagnosticCategory.Error,"Expected_corresponding_JSX_closing_tag_for_0_17002","Expected corresponding JSX closing tag for '{0}'."),JSX_attribute_expected:t(17003,e.DiagnosticCategory.Error,"JSX_attribute_expected_17003","JSX attribute expected."),Cannot_use_JSX_unless_the_jsx_flag_is_provided:t(17004,e.DiagnosticCategory.Error,"Cannot_use_JSX_unless_the_jsx_flag_is_provided_17004","Cannot use JSX unless the '--jsx' flag is provided."),A_constructor_cannot_contain_a_super_call_when_its_class_extends_null:t(17005,e.DiagnosticCategory.Error,"A_constructor_cannot_contain_a_super_call_when_its_class_extends_null_17005","A constructor cannot contain a 'super' call when its class extends 'null'."),An_unary_expression_with_the_0_operator_is_not_allowed_in_the_left_hand_side_of_an_exponentiation_expression_Consider_enclosing_the_expression_in_parentheses:t(17006,e.DiagnosticCategory.Error,"An_unary_expression_with_the_0_operator_is_not_allowed_in_the_left_hand_side_of_an_exponentiation_ex_17006","An unary expression with the '{0}' operator is not allowed in the left-hand side of an exponentiation expression. Consider enclosing the expression in parentheses."),A_type_assertion_expression_is_not_allowed_in_the_left_hand_side_of_an_exponentiation_expression_Consider_enclosing_the_expression_in_parentheses:t(17007,e.DiagnosticCategory.Error,"A_type_assertion_expression_is_not_allowed_in_the_left_hand_side_of_an_exponentiation_expression_Con_17007","A type assertion expression is not allowed in the left-hand side of an exponentiation expression. Consider enclosing the expression in parentheses."),JSX_element_0_has_no_corresponding_closing_tag:t(17008,e.DiagnosticCategory.Error,"JSX_element_0_has_no_corresponding_closing_tag_17008","JSX element '{0}' has no corresponding closing tag."),super_must_be_called_before_accessing_this_in_the_constructor_of_a_derived_class:t(17009,e.DiagnosticCategory.Error,"super_must_be_called_before_accessing_this_in_the_constructor_of_a_derived_class_17009","'super' must be called before accessing 'this' in the constructor of a derived class."),Unknown_type_acquisition_option_0:t(17010,e.DiagnosticCategory.Error,"Unknown_type_acquisition_option_0_17010","Unknown type acquisition option '{0}'."),super_must_be_called_before_accessing_a_property_of_super_in_the_constructor_of_a_derived_class:t(17011,e.DiagnosticCategory.Error,"super_must_be_called_before_accessing_a_property_of_super_in_the_constructor_of_a_derived_class_17011","'super' must be called before accessing a property of 'super' in the constructor of a derived class."),_0_is_not_a_valid_meta_property_for_keyword_1_Did_you_mean_2:t(17012,e.DiagnosticCategory.Error,"_0_is_not_a_valid_meta_property_for_keyword_1_Did_you_mean_2_17012","'{0}' is not a valid meta-property for keyword '{1}'. Did you mean '{2}'?"),Meta_property_0_is_only_allowed_in_the_body_of_a_function_declaration_function_expression_or_constructor:t(17013,e.DiagnosticCategory.Error,"Meta_property_0_is_only_allowed_in_the_body_of_a_function_declaration_function_expression_or_constru_17013","Meta-property '{0}' is only allowed in the body of a function declaration, function expression, or constructor."),Circularity_detected_while_resolving_configuration_Colon_0:t(18e3,e.DiagnosticCategory.Error,"Circularity_detected_while_resolving_configuration_Colon_0_18000","Circularity detected while resolving configuration: {0}"),A_path_in_an_extends_option_must_be_relative_or_rooted_but_0_is_not:t(18001,e.DiagnosticCategory.Error,"A_path_in_an_extends_option_must_be_relative_or_rooted_but_0_is_not_18001","A path in an 'extends' option must be relative or rooted, but '{0}' is not."),The_files_list_in_config_file_0_is_empty:t(18002,e.DiagnosticCategory.Error,"The_files_list_in_config_file_0_is_empty_18002","The 'files' list in config file '{0}' is empty."),No_inputs_were_found_in_config_file_0_Specified_include_paths_were_1_and_exclude_paths_were_2:t(18003,e.DiagnosticCategory.Error,"No_inputs_were_found_in_config_file_0_Specified_include_paths_were_1_and_exclude_paths_were_2_18003","No inputs were found in config file '{0}'. Specified 'include' paths were '{1}' and 'exclude' paths were '{2}'."),Add_missing_super_call:t(90001,e.DiagnosticCategory.Message,"Add_missing_super_call_90001","Add missing 'super()' call."),Make_super_call_the_first_statement_in_the_constructor:t(90002,e.DiagnosticCategory.Message,"Make_super_call_the_first_statement_in_the_constructor_90002","Make 'super()' call the first statement in the constructor."),Change_extends_to_implements:t(90003,e.DiagnosticCategory.Message,"Change_extends_to_implements_90003","Change 'extends' to 'implements'."),Remove_declaration_for_Colon_0:t(90004,e.DiagnosticCategory.Message,"Remove_declaration_for_Colon_0_90004","Remove declaration for: '{0}'."),Implement_interface_0:t(90006,e.DiagnosticCategory.Message,"Implement_interface_0_90006","Implement interface '{0}'."),Implement_inherited_abstract_class:t(90007,e.DiagnosticCategory.Message,"Implement_inherited_abstract_class_90007","Implement inherited abstract class."),Add_this_to_unresolved_variable:t(90008,e.DiagnosticCategory.Message,"Add_this_to_unresolved_variable_90008","Add 'this.' to unresolved variable."),Adding_a_tsconfig_json_file_will_help_organize_projects_that_contain_both_TypeScript_and_JavaScript_files_Learn_more_at_https_Colon_Slash_Slashaka_ms_Slashtsconfig:t(90009,e.DiagnosticCategory.Error,"Adding_a_tsconfig_json_file_will_help_organize_projects_that_contain_both_TypeScript_and_JavaScript__90009","Adding a tsconfig.json file will help organize projects that contain both TypeScript and JavaScript files. Learn more at https://aka.ms/tsconfig."),Type_0_is_not_assignable_to_type_1_Two_different_types_with_this_name_exist_but_they_are_unrelated:t(90010,e.DiagnosticCategory.Error,"Type_0_is_not_assignable_to_type_1_Two_different_types_with_this_name_exist_but_they_are_unrelated_90010","Type '{0}' is not assignable to type '{1}'. Two different types with this name exist, but they are unrelated."),Import_0_from_1:t(90013,e.DiagnosticCategory.Message,"Import_0_from_1_90013","Import '{0}' from \"{1}\"."),Change_0_to_1:t(90014,e.DiagnosticCategory.Message,"Change_0_to_1_90014","Change '{0}' to '{1}'."),Add_0_to_existing_import_declaration_from_1:t(90015,e.DiagnosticCategory.Message,"Add_0_to_existing_import_declaration_from_1_90015","Add '{0}' to existing import declaration from \"{1}\"."),Declare_property_0:t(90016,e.DiagnosticCategory.Message,"Declare_property_0_90016","Declare property '{0}'."),Add_index_signature_for_property_0:t(90017,e.DiagnosticCategory.Message,"Add_index_signature_for_property_0_90017","Add index signature for property '{0}'."),Disable_checking_for_this_file:t(90018,e.DiagnosticCategory.Message,"Disable_checking_for_this_file_90018","Disable checking for this file."),Ignore_this_error_message:t(90019,e.DiagnosticCategory.Message,"Ignore_this_error_message_90019","Ignore this error message."),Initialize_property_0_in_the_constructor:t(90020,e.DiagnosticCategory.Message,"Initialize_property_0_in_the_constructor_90020","Initialize property '{0}' in the constructor."),Initialize_static_property_0:t(90021,e.DiagnosticCategory.Message,"Initialize_static_property_0_90021","Initialize static property '{0}'."),Change_spelling_to_0:t(90022,e.DiagnosticCategory.Message,"Change_spelling_to_0_90022","Change spelling to '{0}'."),Declare_method_0:t(90023,e.DiagnosticCategory.Message,"Declare_method_0_90023","Declare method '{0}'."),Declare_static_method_0:t(90024,e.DiagnosticCategory.Message,"Declare_static_method_0_90024","Declare static method '{0}'."),Prefix_0_with_an_underscore:t(90025,e.DiagnosticCategory.Message,"Prefix_0_with_an_underscore_90025","Prefix '{0}' with an underscore."),Rewrite_as_the_indexed_access_type_0:t(90026,e.DiagnosticCategory.Message,"Rewrite_as_the_indexed_access_type_0_90026","Rewrite as the indexed access type '{0}'."),Declare_static_property_0:t(90027,e.DiagnosticCategory.Message,"Declare_static_property_0_90027","Declare static property '{0}'."),Call_decorator_expression:t(90028,e.DiagnosticCategory.Message,"Call_decorator_expression_90028","Call decorator expression."),Convert_function_to_an_ES2015_class:t(95001,e.DiagnosticCategory.Message,"Convert_function_to_an_ES2015_class_95001","Convert function to an ES2015 class"),Convert_function_0_to_class:t(95002,e.DiagnosticCategory.Message,"Convert_function_0_to_class_95002","Convert function '{0}' to class"),Extract_symbol:t(95003,e.DiagnosticCategory.Message,"Extract_symbol_95003","Extract symbol"),Extract_to_0_in_1:t(95004,e.DiagnosticCategory.Message,"Extract_to_0_in_1_95004","Extract to {0} in {1}"),Extract_function:t(95005,e.DiagnosticCategory.Message,"Extract_function_95005","Extract function"),Extract_constant:t(95006,e.DiagnosticCategory.Message,"Extract_constant_95006","Extract constant"),Extract_to_0_in_enclosing_scope:t(95007,e.DiagnosticCategory.Message,"Extract_to_0_in_enclosing_scope_95007","Extract to {0} in enclosing scope"),Extract_to_0_in_1_scope:t(95008,e.DiagnosticCategory.Message,"Extract_to_0_in_1_scope_95008","Extract to {0} in {1} scope"),Annotate_with_type_from_JSDoc:t(95009,e.DiagnosticCategory.Message,"Annotate_with_type_from_JSDoc_95009","Annotate with type from JSDoc"),Annotate_with_types_from_JSDoc:t(95010,e.DiagnosticCategory.Message,"Annotate_with_types_from_JSDoc_95010","Annotate with types from JSDoc"),Infer_type_of_0_from_usage:t(95011,e.DiagnosticCategory.Message,"Infer_type_of_0_from_usage_95011","Infer type of '{0}' from usage."),Infer_parameter_types_from_usage:t(95012,e.DiagnosticCategory.Message,"Infer_parameter_types_from_usage_95012","Infer parameter types from usage.")}}(ts||(ts={})),function(e){function t(e){return e>=71}e.tokenIsIdentifierOrKeyword=t;var n=e.createMapFromTemplate({abstract:117,any:119,as:118,boolean:122,break:72,case:73,catch:74,class:75,continue:77,const:76,constructor:123,debugger:78,declare:124,default:79,delete:80,do:81,else:82,enum:83,export:84,extends:85,false:86,finally:87,for:88,from:140,function:89,get:125,if:90,implements:108,import:91,in:92,instanceof:93,interface:109,is:126,keyof:127,let:110,module:128,namespace:129,never:130,new:94,null:95,number:133,object:134,package:111,private:112,protected:113,public:114,readonly:131,require:132,global:141,return:96,set:135,static:115,string:136,super:97,switch:98,symbol:137,this:99,throw:100,true:101,try:102,type:138,typeof:103,undefined:139,var:104,void:105,while:106,with:107,yield:116,async:120,await:121,of:142,"{":17,"}":18,"(":19,")":20,"[":21,"]":22,".":23,"...":24,";":25,",":26,"<":27,">":29,"<=":30,">=":31,"==":32,"!=":33,"===":34,"!==":35,"=>":36,"+":37,"-":38,"**":40,"*":39,"/":41,"%":42,"++":43,"--":44,"<<":45,"</":28,">>":46,">>>":47,"&":48,"|":49,"^":50,"!":51,"~":52,"&&":53,"||":54,"?":55,":":56,"=":58,"+=":59,"-=":60,"*=":61,"**=":62,"/=":63,"%=":64,"<<=":65,">>=":66,">>>=":67,"&=":68,"|=":69,"^=":70,"@":57}),r=[170,170,181,181,186,186,192,214,216,246,248,543,546,563,592,685,688,696,699,705,720,721,736,740,750,750,890,890,902,902,904,906,908,908,910,929,931,974,976,983,986,1011,1024,1153,1164,1220,1223,1224,1227,1228,1232,1269,1272,1273,1329,1366,1369,1369,1377,1415,1488,1514,1520,1522,1569,1594,1600,1610,1649,1747,1749,1749,1765,1766,1786,1788,1808,1808,1810,1836,1920,1957,2309,2361,2365,2365,2384,2384,2392,2401,2437,2444,2447,2448,2451,2472,2474,2480,2482,2482,2486,2489,2524,2525,2527,2529,2544,2545,2565,2570,2575,2576,2579,2600,2602,2608,2610,2611,2613,2614,2616,2617,2649,2652,2654,2654,2674,2676,2693,2699,2701,2701,2703,2705,2707,2728,2730,2736,2738,2739,2741,2745,2749,2749,2768,2768,2784,2784,2821,2828,2831,2832,2835,2856,2858,2864,2866,2867,2870,2873,2877,2877,2908,2909,2911,2913,2949,2954,2958,2960,2962,2965,2969,2970,2972,2972,2974,2975,2979,2980,2984,2986,2990,2997,2999,3001,3077,3084,3086,3088,3090,3112,3114,3123,3125,3129,3168,3169,3205,3212,3214,3216,3218,3240,3242,3251,3253,3257,3294,3294,3296,3297,3333,3340,3342,3344,3346,3368,3370,3385,3424,3425,3461,3478,3482,3505,3507,3515,3517,3517,3520,3526,3585,3632,3634,3635,3648,3654,3713,3714,3716,3716,3719,3720,3722,3722,3725,3725,3732,3735,3737,3743,3745,3747,3749,3749,3751,3751,3754,3755,3757,3760,3762,3763,3773,3773,3776,3780,3782,3782,3804,3805,3840,3840,3904,3911,3913,3946,3976,3979,4096,4129,4131,4135,4137,4138,4176,4181,4256,4293,4304,4342,4352,4441,4447,4514,4520,4601,4608,4614,4616,4678,4680,4680,4682,4685,4688,4694,4696,4696,4698,4701,4704,4742,4744,4744,4746,4749,4752,4782,4784,4784,4786,4789,4792,4798,4800,4800,4802,4805,4808,4814,4816,4822,4824,4846,4848,4878,4880,4880,4882,4885,4888,4894,4896,4934,4936,4954,5024,5108,5121,5740,5743,5750,5761,5786,5792,5866,6016,6067,6176,6263,6272,6312,7680,7835,7840,7929,7936,7957,7960,7965,7968,8005,8008,8013,8016,8023,8025,8025,8027,8027,8029,8029,8031,8061,8064,8116,8118,8124,8126,8126,8130,8132,8134,8140,8144,8147,8150,8155,8160,8172,8178,8180,8182,8188,8319,8319,8450,8450,8455,8455,8458,8467,8469,8469,8473,8477,8484,8484,8486,8486,8488,8488,8490,8493,8495,8497,8499,8505,8544,8579,12293,12295,12321,12329,12337,12341,12344,12346,12353,12436,12445,12446,12449,12538,12540,12542,12549,12588,12593,12686,12704,12727,13312,19893,19968,40869,40960,42124,44032,55203,63744,64045,64256,64262,64275,64279,64285,64285,64287,64296,64298,64310,64312,64316,64318,64318,64320,64321,64323,64324,64326,64433,64467,64829,64848,64911,64914,64967,65008,65019,65136,65138,65140,65140,65142,65276,65313,65338,65345,65370,65382,65470,65474,65479,65482,65487,65490,65495,65498,65500],i=[170,170,181,181,186,186,192,214,216,246,248,543,546,563,592,685,688,696,699,705,720,721,736,740,750,750,768,846,864,866,890,890,902,902,904,906,908,908,910,929,931,974,976,983,986,1011,1024,1153,1155,1158,1164,1220,1223,1224,1227,1228,1232,1269,1272,1273,1329,1366,1369,1369,1377,1415,1425,1441,1443,1465,1467,1469,1471,1471,1473,1474,1476,1476,1488,1514,1520,1522,1569,1594,1600,1621,1632,1641,1648,1747,1749,1756,1759,1768,1770,1773,1776,1788,1808,1836,1840,1866,1920,1968,2305,2307,2309,2361,2364,2381,2384,2388,2392,2403,2406,2415,2433,2435,2437,2444,2447,2448,2451,2472,2474,2480,2482,2482,2486,2489,2492,2492,2494,2500,2503,2504,2507,2509,2519,2519,2524,2525,2527,2531,2534,2545,2562,2562,2565,2570,2575,2576,2579,2600,2602,2608,2610,2611,2613,2614,2616,2617,2620,2620,2622,2626,2631,2632,2635,2637,2649,2652,2654,2654,2662,2676,2689,2691,2693,2699,2701,2701,2703,2705,2707,2728,2730,2736,2738,2739,2741,2745,2748,2757,2759,2761,2763,2765,2768,2768,2784,2784,2790,2799,2817,2819,2821,2828,2831,2832,2835,2856,2858,2864,2866,2867,2870,2873,2876,2883,2887,2888,2891,2893,2902,2903,2908,2909,2911,2913,2918,2927,2946,2947,2949,2954,2958,2960,2962,2965,2969,2970,2972,2972,2974,2975,2979,2980,2984,2986,2990,2997,2999,3001,3006,3010,3014,3016,3018,3021,3031,3031,3047,3055,3073,3075,3077,3084,3086,3088,3090,3112,3114,3123,3125,3129,3134,3140,3142,3144,3146,3149,3157,3158,3168,3169,3174,3183,3202,3203,3205,3212,3214,3216,3218,3240,3242,3251,3253,3257,3262,3268,3270,3272,3274,3277,3285,3286,3294,3294,3296,3297,3302,3311,3330,3331,3333,3340,3342,3344,3346,3368,3370,3385,3390,3395,3398,3400,3402,3405,3415,3415,3424,3425,3430,3439,3458,3459,3461,3478,3482,3505,3507,3515,3517,3517,3520,3526,3530,3530,3535,3540,3542,3542,3544,3551,3570,3571,3585,3642,3648,3662,3664,3673,3713,3714,3716,3716,3719,3720,3722,3722,3725,3725,3732,3735,3737,3743,3745,3747,3749,3749,3751,3751,3754,3755,3757,3769,3771,3773,3776,3780,3782,3782,3784,3789,3792,3801,3804,3805,3840,3840,3864,3865,3872,3881,3893,3893,3895,3895,3897,3897,3902,3911,3913,3946,3953,3972,3974,3979,3984,3991,3993,4028,4038,4038,4096,4129,4131,4135,4137,4138,4140,4146,4150,4153,4160,4169,4176,4185,4256,4293,4304,4342,4352,4441,4447,4514,4520,4601,4608,4614,4616,4678,4680,4680,4682,4685,4688,4694,4696,4696,4698,4701,4704,4742,4744,4744,4746,4749,4752,4782,4784,4784,4786,4789,4792,4798,4800,4800,4802,4805,4808,4814,4816,4822,4824,4846,4848,4878,4880,4880,4882,4885,4888,4894,4896,4934,4936,4954,4969,4977,5024,5108,5121,5740,5743,5750,5761,5786,5792,5866,6016,6099,6112,6121,6160,6169,6176,6263,6272,6313,7680,7835,7840,7929,7936,7957,7960,7965,7968,8005,8008,8013,8016,8023,8025,8025,8027,8027,8029,8029,8031,8061,8064,8116,8118,8124,8126,8126,8130,8132,8134,8140,8144,8147,8150,8155,8160,8172,8178,8180,8182,8188,8255,8256,8319,8319,8400,8412,8417,8417,8450,8450,8455,8455,8458,8467,8469,8469,8473,8477,8484,8484,8486,8486,8488,8488,8490,8493,8495,8497,8499,8505,8544,8579,12293,12295,12321,12335,12337,12341,12344,12346,12353,12436,12441,12442,12445,12446,12449,12542,12549,12588,12593,12686,12704,12727,13312,19893,19968,40869,40960,42124,44032,55203,63744,64045,64256,64262,64275,64279,64285,64296,64298,64310,64312,64316,64318,64318,64320,64321,64323,64324,64326,64433,64467,64829,64848,64911,64914,64967,65008,65019,65056,65059,65075,65076,65101,65103,65136,65138,65140,65140,65142,65276,65296,65305,65313,65338,65343,65343,65345,65370,65381,65470,65474,65479,65482,65487,65490,65495,65498,65500],a=[170,170,181,181,186,186,192,214,216,246,248,705,710,721,736,740,748,748,750,750,880,884,886,887,890,893,902,902,904,906,908,908,910,929,931,1013,1015,1153,1162,1319,1329,1366,1369,1369,1377,1415,1488,1514,1520,1522,1568,1610,1646,1647,1649,1747,1749,1749,1765,1766,1774,1775,1786,1788,1791,1791,1808,1808,1810,1839,1869,1957,1969,1969,1994,2026,2036,2037,2042,2042,2048,2069,2074,2074,2084,2084,2088,2088,2112,2136,2208,2208,2210,2220,2308,2361,2365,2365,2384,2384,2392,2401,2417,2423,2425,2431,2437,2444,2447,2448,2451,2472,2474,2480,2482,2482,2486,2489,2493,2493,2510,2510,2524,2525,2527,2529,2544,2545,2565,2570,2575,2576,2579,2600,2602,2608,2610,2611,2613,2614,2616,2617,2649,2652,2654,2654,2674,2676,2693,2701,2703,2705,2707,2728,2730,2736,2738,2739,2741,2745,2749,2749,2768,2768,2784,2785,2821,2828,2831,2832,2835,2856,2858,2864,2866,2867,2869,2873,2877,2877,2908,2909,2911,2913,2929,2929,2947,2947,2949,2954,2958,2960,2962,2965,2969,2970,2972,2972,2974,2975,2979,2980,2984,2986,2990,3001,3024,3024,3077,3084,3086,3088,3090,3112,3114,3123,3125,3129,3133,3133,3160,3161,3168,3169,3205,3212,3214,3216,3218,3240,3242,3251,3253,3257,3261,3261,3294,3294,3296,3297,3313,3314,3333,3340,3342,3344,3346,3386,3389,3389,3406,3406,3424,3425,3450,3455,3461,3478,3482,3505,3507,3515,3517,3517,3520,3526,3585,3632,3634,3635,3648,3654,3713,3714,3716,3716,3719,3720,3722,3722,3725,3725,3732,3735,3737,3743,3745,3747,3749,3749,3751,3751,3754,3755,3757,3760,3762,3763,3773,3773,3776,3780,3782,3782,3804,3807,3840,3840,3904,3911,3913,3948,3976,3980,4096,4138,4159,4159,4176,4181,4186,4189,4193,4193,4197,4198,4206,4208,4213,4225,4238,4238,4256,4293,4295,4295,4301,4301,4304,4346,4348,4680,4682,4685,4688,4694,4696,4696,4698,4701,4704,4744,4746,4749,4752,4784,4786,4789,4792,4798,4800,4800,4802,4805,4808,4822,4824,4880,4882,4885,4888,4954,4992,5007,5024,5108,5121,5740,5743,5759,5761,5786,5792,5866,5870,5872,5888,5900,5902,5905,5920,5937,5952,5969,5984,5996,5998,6e3,6016,6067,6103,6103,6108,6108,6176,6263,6272,6312,6314,6314,6320,6389,6400,6428,6480,6509,6512,6516,6528,6571,6593,6599,6656,6678,6688,6740,6823,6823,6917,6963,6981,6987,7043,7072,7086,7087,7098,7141,7168,7203,7245,7247,7258,7293,7401,7404,7406,7409,7413,7414,7424,7615,7680,7957,7960,7965,7968,8005,8008,8013,8016,8023,8025,8025,8027,8027,8029,8029,8031,8061,8064,8116,8118,8124,8126,8126,8130,8132,8134,8140,8144,8147,8150,8155,8160,8172,8178,8180,8182,8188,8305,8305,8319,8319,8336,8348,8450,8450,8455,8455,8458,8467,8469,8469,8473,8477,8484,8484,8486,8486,8488,8488,8490,8493,8495,8505,8508,8511,8517,8521,8526,8526,8544,8584,11264,11310,11312,11358,11360,11492,11499,11502,11506,11507,11520,11557,11559,11559,11565,11565,11568,11623,11631,11631,11648,11670,11680,11686,11688,11694,11696,11702,11704,11710,11712,11718,11720,11726,11728,11734,11736,11742,11823,11823,12293,12295,12321,12329,12337,12341,12344,12348,12353,12438,12445,12447,12449,12538,12540,12543,12549,12589,12593,12686,12704,12730,12784,12799,13312,19893,19968,40908,40960,42124,42192,42237,42240,42508,42512,42527,42538,42539,42560,42606,42623,42647,42656,42735,42775,42783,42786,42888,42891,42894,42896,42899,42912,42922,43e3,43009,43011,43013,43015,43018,43020,43042,43072,43123,43138,43187,43250,43255,43259,43259,43274,43301,43312,43334,43360,43388,43396,43442,43471,43471,43520,43560,43584,43586,43588,43595,43616,43638,43642,43642,43648,43695,43697,43697,43701,43702,43705,43709,43712,43712,43714,43714,43739,43741,43744,43754,43762,43764,43777,43782,43785,43790,43793,43798,43808,43814,43816,43822,43968,44002,44032,55203,55216,55238,55243,55291,63744,64109,64112,64217,64256,64262,64275,64279,64285,64285,64287,64296,64298,64310,64312,64316,64318,64318,64320,64321,64323,64324,64326,64433,64467,64829,64848,64911,64914,64967,65008,65019,65136,65140,65142,65276,65313,65338,65345,65370,65382,65470,65474,65479,65482,65487,65490,65495,65498,65500],o=[170,170,181,181,186,186,192,214,216,246,248,705,710,721,736,740,748,748,750,750,768,884,886,887,890,893,902,902,904,906,908,908,910,929,931,1013,1015,1153,1155,1159,1162,1319,1329,1366,1369,1369,1377,1415,1425,1469,1471,1471,1473,1474,1476,1477,1479,1479,1488,1514,1520,1522,1552,1562,1568,1641,1646,1747,1749,1756,1759,1768,1770,1788,1791,1791,1808,1866,1869,1969,1984,2037,2042,2042,2048,2093,2112,2139,2208,2208,2210,2220,2276,2302,2304,2403,2406,2415,2417,2423,2425,2431,2433,2435,2437,2444,2447,2448,2451,2472,2474,2480,2482,2482,2486,2489,2492,2500,2503,2504,2507,2510,2519,2519,2524,2525,2527,2531,2534,2545,2561,2563,2565,2570,2575,2576,2579,2600,2602,2608,2610,2611,2613,2614,2616,2617,2620,2620,2622,2626,2631,2632,2635,2637,2641,2641,2649,2652,2654,2654,2662,2677,2689,2691,2693,2701,2703,2705,2707,2728,2730,2736,2738,2739,2741,2745,2748,2757,2759,2761,2763,2765,2768,2768,2784,2787,2790,2799,2817,2819,2821,2828,2831,2832,2835,2856,2858,2864,2866,2867,2869,2873,2876,2884,2887,2888,2891,2893,2902,2903,2908,2909,2911,2915,2918,2927,2929,2929,2946,2947,2949,2954,2958,2960,2962,2965,2969,2970,2972,2972,2974,2975,2979,2980,2984,2986,2990,3001,3006,3010,3014,3016,3018,3021,3024,3024,3031,3031,3046,3055,3073,3075,3077,3084,3086,3088,3090,3112,3114,3123,3125,3129,3133,3140,3142,3144,3146,3149,3157,3158,3160,3161,3168,3171,3174,3183,3202,3203,3205,3212,3214,3216,3218,3240,3242,3251,3253,3257,3260,3268,3270,3272,3274,3277,3285,3286,3294,3294,3296,3299,3302,3311,3313,3314,3330,3331,3333,3340,3342,3344,3346,3386,3389,3396,3398,3400,3402,3406,3415,3415,3424,3427,3430,3439,3450,3455,3458,3459,3461,3478,3482,3505,3507,3515,3517,3517,3520,3526,3530,3530,3535,3540,3542,3542,3544,3551,3570,3571,3585,3642,3648,3662,3664,3673,3713,3714,3716,3716,3719,3720,3722,3722,3725,3725,3732,3735,3737,3743,3745,3747,3749,3749,3751,3751,3754,3755,3757,3769,3771,3773,3776,3780,3782,3782,3784,3789,3792,3801,3804,3807,3840,3840,3864,3865,3872,3881,3893,3893,3895,3895,3897,3897,3902,3911,3913,3948,3953,3972,3974,3991,3993,4028,4038,4038,4096,4169,4176,4253,4256,4293,4295,4295,4301,4301,4304,4346,4348,4680,4682,4685,4688,4694,4696,4696,4698,4701,4704,4744,4746,4749,4752,4784,4786,4789,4792,4798,4800,4800,4802,4805,4808,4822,4824,4880,4882,4885,4888,4954,4957,4959,4992,5007,5024,5108,5121,5740,5743,5759,5761,5786,5792,5866,5870,5872,5888,5900,5902,5908,5920,5940,5952,5971,5984,5996,5998,6e3,6002,6003,6016,6099,6103,6103,6108,6109,6112,6121,6155,6157,6160,6169,6176,6263,6272,6314,6320,6389,6400,6428,6432,6443,6448,6459,6470,6509,6512,6516,6528,6571,6576,6601,6608,6617,6656,6683,6688,6750,6752,6780,6783,6793,6800,6809,6823,6823,6912,6987,6992,7001,7019,7027,7040,7155,7168,7223,7232,7241,7245,7293,7376,7378,7380,7414,7424,7654,7676,7957,7960,7965,7968,8005,8008,8013,8016,8023,8025,8025,8027,8027,8029,8029,8031,8061,8064,8116,8118,8124,8126,8126,8130,8132,8134,8140,8144,8147,8150,8155,8160,8172,8178,8180,8182,8188,8204,8205,8255,8256,8276,8276,8305,8305,8319,8319,8336,8348,8400,8412,8417,8417,8421,8432,8450,8450,8455,8455,8458,8467,8469,8469,8473,8477,8484,8484,8486,8486,8488,8488,8490,8493,8495,8505,8508,8511,8517,8521,8526,8526,8544,8584,11264,11310,11312,11358,11360,11492,11499,11507,11520,11557,11559,11559,11565,11565,11568,11623,11631,11631,11647,11670,11680,11686,11688,11694,11696,11702,11704,11710,11712,11718,11720,11726,11728,11734,11736,11742,11744,11775,11823,11823,12293,12295,12321,12335,12337,12341,12344,12348,12353,12438,12441,12442,12445,12447,12449,12538,12540,12543,12549,12589,12593,12686,12704,12730,12784,12799,13312,19893,19968,40908,40960,42124,42192,42237,42240,42508,42512,42539,42560,42607,42612,42621,42623,42647,42655,42737,42775,42783,42786,42888,42891,42894,42896,42899,42912,42922,43e3,43047,43072,43123,43136,43204,43216,43225,43232,43255,43259,43259,43264,43309,43312,43347,43360,43388,43392,43456,43471,43481,43520,43574,43584,43597,43600,43609,43616,43638,43642,43643,43648,43714,43739,43741,43744,43759,43762,43766,43777,43782,43785,43790,43793,43798,43808,43814,43816,43822,43968,44010,44012,44013,44016,44025,44032,55203,55216,55238,55243,55291,63744,64109,64112,64217,64256,64262,64275,64279,64285,64296,64298,64310,64312,64316,64318,64318,64320,64321,64323,64324,64326,64433,64467,64829,64848,64911,64914,64967,65008,65019,65024,65039,65056,65062,65075,65076,65101,65103,65136,65140,65142,65276,65296,65305,65313,65338,65343,65343,65345,65370,65382,65470,65474,65479,65482,65487,65490,65495,65498,65500];function s(e,t){if(e<t[0])return!1;for(var n,r=0,i=t.length;r+1<i;){if(n=r+(i-r)/2,t[n-=n%2]<=e&&e<=t[n+1])return!0;e<t[n]?i=n:r=n+2}return!1}function c(e,t){return s(e,t>=1?a:r)}e.isUnicodeIdentifierStart=c;var l,u=(l=[],n.forEach((function(e,t){l[e]=t})),l);function d(e){for(var t=new Array,n=0,r=0;n<e.length;){var i=e.charCodeAt(n);switch(n++,i){case 13:10===e.charCodeAt(n)&&n++;case 10:t.push(r),r=n;break;default:i>127&&h(i)&&(t.push(r),r=n)}}return t.push(r),t}function p(t,n,r,i){e.Debug.assert(n>=0&&n<t.length);var a=t[n]+r;return n<t.length-1?e.Debug.assert(a<t[n+1]):void 0!==i&&e.Debug.assert(a<=i.length),a}function f(e){return e.lineMap||(e.lineMap=d(e.text))}function _(t,n){var r=e.binarySearch(t,n);return r<0&&(r=~r-1,e.Debug.assert(-1!==r,"position cannot precede the beginning of the file")),{line:r,character:n-t[r]}}function m(e){return g(e)||h(e)}function g(e){return 32===e||9===e||11===e||12===e||160===e||133===e||5760===e||e>=8192&&e<=8203||8239===e||8287===e||12288===e||65279===e}function h(e){return 10===e||13===e||8232===e||8233===e}function y(e){return e>=48&&e<=57}function v(e){return e>=48&&e<=55}e.tokenToString=function(e){return u[e]},e.stringToToken=function(e){return n.get(e)},e.computeLineStarts=d,e.getPositionOfLineAndCharacter=function(e,t,n){return p(f(e),t,n,e.text)},e.computePositionOfLineAndCharacter=p,e.getLineStarts=f,e.computeLineAndCharacterOfPosition=_,e.getLineAndCharacterOfPosition=function(e,t){return _(f(e),t)},e.isWhiteSpaceLike=m,e.isWhiteSpaceSingleLine=g,e.isLineBreak=h,e.isOctalDigit=v,e.couldStartTrivia=function(e,t){var n=e.charCodeAt(t);switch(n){case 13:case 10:case 9:case 11:case 12:case 32:case 47:case 60:case 124:case 61:case 62:return!0;case 35:return 0===t;default:return n>127}},e.skipTrivia=function(t,n,r,i){if(void 0===i&&(i=!1),e.positionIsSynthesized(n))return n;for(;;){var a=t.charCodeAt(n);switch(a){case 13:10===t.charCodeAt(n+1)&&n++;case 10:if(n++,r)return n;continue;case 9:case 11:case 12:case 32:n++;continue;case 47:if(i)break;if(47===t.charCodeAt(n+1)){for(n+=2;n<t.length&&!h(t.charCodeAt(n));)n++;continue}if(42===t.charCodeAt(n+1)){for(n+=2;n<t.length;){if(42===t.charCodeAt(n)&&47===t.charCodeAt(n+1)){n+=2;break}n++}continue}break;case 60:case 124:case 61:case 62:if(x(t,n)){n=k(t,n);continue}break;case 35:if(0===n&&T(t,n)){n=C(t,n);continue}break;default:if(a>127&&m(a)){n++;continue}}return n}};var b="<<<<<<<".length;function x(t,n){if(e.Debug.assert(n>=0),0===n||h(t.charCodeAt(n-1))){var r=t.charCodeAt(n);if(n+b<t.length){for(var i=0;i<b;i++)if(t.charCodeAt(n+i)!==r)return!1;return 61===r||32===t.charCodeAt(n+b)}}return!1}function k(t,n,r){r&&r(e.Diagnostics.Merge_conflict_marker_encountered,b);var i=t.charCodeAt(n),a=t.length;if(60===i||62===i)for(;n<a&&!h(t.charCodeAt(n));)n++;else for(e.Debug.assert(124===i||61===i);n<a;){var o=t.charCodeAt(n);if((61===o||62===o)&&o!==i&&x(t,n))break;n++}return n}var S=/^#!.*/;function T(t,n){return e.Debug.assert(0===n),S.test(t)}function C(e,t){return t+=S.exec(e)[0].length}function E(e,t,n,r,i,a,o){var s,c,l,u,d=!1,p=r||0===n,f=o;e:for(;n>=0&&n<t.length;){var _=t.charCodeAt(n);switch(_){case 13:10===t.charCodeAt(n+1)&&n++;case 10:if(n++,r)break e;p=!0,d&&(u=!0);continue;case 9:case 11:case 12:case 32:n++;continue;case 47:var g=t.charCodeAt(n+1),y=!1;if(47===g||42===g){var v=47===g?2:3,b=n;if(n+=2,47===g)for(;n<t.length;){if(h(t.charCodeAt(n))){y=!0;break}n++}else for(;n<t.length;){if(42===t.charCodeAt(n)&&47===t.charCodeAt(n+1)){n+=2;break}n++}if(p){if(d){if(f=i(s,c,l,u,a,f),!e&&f)return f;d=!1}s=b,c=n,l=v,u=y,d=!0}continue}break e;default:if(_>127&&m(_)){d&&h(_)&&(u=!0),n++;continue}break e}}return d&&(f=i(s,c,l,u,a,f)),f}function D(e,t,n,r,i){return E(!0,e,t,!1,n,r,i)}function A(e,t,n,r,i){return E(!0,e,t,!0,n,r,i)}function w(e,t,n,r,i,a){return a||(a=[]),a.push({kind:n,pos:e,end:t,hasTrailingNewLine:r}),a}function N(e,t){return e>=65&&e<=90||e>=97&&e<=122||36===e||95===e||e>127&&c(e,t)}function I(e,t){return e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||36===e||95===e||e>127&&function(e,t){return s(e,t>=1?o:i)}(e,t)}e.forEachLeadingCommentRange=function(e,t,n,r){return E(!1,e,t,!1,n,r)},e.forEachTrailingCommentRange=function(e,t,n,r){return E(!1,e,t,!0,n,r)},e.reduceEachLeadingCommentRange=D,e.reduceEachTrailingCommentRange=A,e.getLeadingCommentRanges=function(e,t){return D(e,t,w,void 0,void 0)},e.getTrailingCommentRanges=function(e,t){return A(e,t,w,void 0,void 0)},e.getShebang=function(e){var t=S.exec(e);if(t)return t[0]},e.isIdentifierStart=N,e.isIdentifierPart=I,e.isIdentifierText=function(e,t){if(!N(e.charCodeAt(0),t))return!1;for(var n=1;n<e.length;n++)if(!I(e.charCodeAt(n),t))return!1;return!0},e.createScanner=function(r,i,a,o,s,c,l){var u,d,p,f,_,b,S,E,D,A;return void 0===a&&(a=0),G(o,c,l),{getStartPos:function(){return p},getTextPos:function(){return u},getToken:function(){return _},getTokenPos:function(){return f},getTokenText:function(){return o.substring(f,u)},getTokenValue:function(){return b},hasExtendedUnicodeEscape:function(){return E},hasPrecedingLineBreak:function(){return S},isIdentifier:function(){return 71===_||_>107},isReservedWord:function(){return _>=72&&_<=107},isUnterminated:function(){return D},getNumericLiteralFlags:function(){return A},reScanGreaterToken:function(){if(29===_){if(62===o.charCodeAt(u))return 62===o.charCodeAt(u+1)?61===o.charCodeAt(u+2)?(u+=3,_=67):(u+=2,_=47):61===o.charCodeAt(u+1)?(u+=2,_=66):(u++,_=46);if(61===o.charCodeAt(u))return u++,_=31}return _},reScanSlashToken:function(){if(41===_||63===_){for(var t=f+1,n=!1,i=!1;;){if(t>=d){D=!0,w(e.Diagnostics.Unterminated_regular_expression_literal);break}var a=o.charCodeAt(t);if(h(a)){D=!0,w(e.Diagnostics.Unterminated_regular_expression_literal);break}if(n)n=!1;else{if(47===a&&!i){t++;break}91===a?i=!0:92===a?n=!0:93===a&&(i=!1)}t++}for(;t<d&&I(o.charCodeAt(t),r);)t++;u=t,b=o.substring(f,u),_=12}return _},reScanTemplateToken:function(){return e.Debug.assert(18===_,"'reScanTemplateToken' should only be called on a '}'"),u=f,_=U()},scanJsxIdentifier:function(){if(t(_)){for(var e=u;u<d;){var n=o.charCodeAt(u);if(45!==n&&!(e===u?N(n,r):I(n,r)))break;u++}b+=o.substr(e,u-e)}return _},scanJsxAttributeValue:function(){switch(p=u,o.charCodeAt(u)){case 34:case 39:return b=M(!1),_=9;default:return q()}},reScanJsxToken:function(){return u=f=p,_=V()},scanJsxToken:V,scanJSDocToken:function(){if(u>=d)return _=1;p=u,f=u;var e=o.charCodeAt(u);switch(e){case 9:case 11:case 12:case 32:for(;u<d&&g(o.charCodeAt(u));)u++;return _=5;case 64:return u++,_=57;case 10:case 13:return u++,_=4;case 42:return u++,_=39;case 123:return u++,_=17;case 125:return u++,_=18;case 91:return u++,_=21;case 93:return u++,_=22;case 60:return u++,_=27;case 62:return u++,_=29;case 61:return u++,_=58;case 44:return u++,_=26;case 46:return u++,_=23}if(N(e,5)){for(u++;I(o.charCodeAt(u),5)&&u<d;)u++;return _=71}return u+=1,_=0},scan:q,getText:function(){return o},setText:G,setScriptTarget:function(e){r=e},setLanguageVariant:function(e){a=e},setOnError:function(e){s=e},setTextPos:W,tryScan:function(e){return H(e,!1)},lookAhead:function(e){return H(e,!0)},scanRange:function(e,t,n){var r=d,i=u,a=p,s=f,c=_,l=S,m=b,g=E,h=D;G(o,e,t);var y=n();return d=r,u=i,p=a,f=s,_=c,S=l,b=m,E=g,D=h,y}};function w(e,t){s&&s(e,t||0)}function P(){for(var t=u;y(o.charCodeAt(u));)u++;if(46===o.charCodeAt(u))for(u++;y(o.charCodeAt(u));)u++;var n=u;if(69===o.charCodeAt(u)||101===o.charCodeAt(u))if(u++,A=2,43!==o.charCodeAt(u)&&45!==o.charCodeAt(u)||u++,y(o.charCodeAt(u))){for(u++;y(o.charCodeAt(u));)u++;n=u}else w(e.Diagnostics.Digit_expected);return""+ +o.substring(t,n)}function O(){for(var e=u;v(o.charCodeAt(u));)u++;return+o.substring(e,u)}function F(e){return R(e,!1)}function L(e){return R(e,!0)}function R(e,t){for(var n=0,r=0;n<e||t;){var i=o.charCodeAt(u);if(i>=48&&i<=57)r=16*r+i-48;else if(i>=65&&i<=70)r=16*r+i-65+10;else{if(!(i>=97&&i<=102))break;r=16*r+i-97+10}u++,n++}return n<e&&(r=-1),r}function M(t){void 0===t&&(t=!0);for(var n=o.charCodeAt(u),r="",i=++u;;){if(u>=d){r+=o.substring(i,u),D=!0,w(e.Diagnostics.Unterminated_string_literal);break}var a=o.charCodeAt(u);if(a===n){r+=o.substring(i,u),u++;break}if(92===a&&t)r+=o.substring(i,u),r+=B(),i=u;else{if(h(a)){r+=o.substring(i,u),D=!0,w(e.Diagnostics.Unterminated_string_literal);break}u++}}return r}function U(){for(var t,n=96===o.charCodeAt(u),r=++u,i="";;){if(u>=d){i+=o.substring(r,u),D=!0,w(e.Diagnostics.Unterminated_template_literal),t=n?13:16;break}var a=o.charCodeAt(u);if(96===a){i+=o.substring(r,u),u++,t=n?13:16;break}if(36===a&&u+1<d&&123===o.charCodeAt(u+1)){i+=o.substring(r,u),u+=2,t=n?14:15;break}92!==a?13!==a?u++:(i+=o.substring(r,u),++u<d&&10===o.charCodeAt(u)&&u++,i+="\n",r=u):(i+=o.substring(r,u),i+=B(),r=u)}return e.Debug.assert(void 0!==t),b=i,t}function B(){if(++u>=d)return w(e.Diagnostics.Unexpected_end_of_text),"";var t=o.charCodeAt(u);switch(u++,t){case 48:return"\0";case 98:return"\b";case 116:return"\t";case 110:return"\n";case 118:return"\v";case 102:return"\f";case 114:return"\r";case 39:return"'";case 34:return'"';case 117:return u<d&&123===o.charCodeAt(u)?(E=!0,u++,function(){var t=L(1),n=!1;t<0?(w(e.Diagnostics.Hexadecimal_digit_expected),n=!0):t>1114111&&(w(e.Diagnostics.An_extended_Unicode_escape_value_must_be_between_0x0_and_0x10FFFF_inclusive),n=!0);u>=d?(w(e.Diagnostics.Unexpected_end_of_text),n=!0):125===o.charCodeAt(u)?u++:(w(e.Diagnostics.Unterminated_Unicode_escape_sequence),n=!0);if(n)return"";return function(t){if(e.Debug.assert(0<=t&&t<=1114111),t<=65535)return String.fromCharCode(t);var n=Math.floor((t-65536)/1024)+55296,r=(t-65536)%1024+56320;return String.fromCharCode(n,r)}(t)}()):j(4);case 120:return j(2);case 13:u<d&&10===o.charCodeAt(u)&&u++;case 10:case 8232:case 8233:return"";default:return String.fromCharCode(t)}}function j(t){var n=F(t);return n>=0?String.fromCharCode(n):(w(e.Diagnostics.Hexadecimal_digit_expected),"")}function $(){if(u+5<d&&117===o.charCodeAt(u+1)){var e=u;u+=2;var t=F(4);return u=e,t}return-1}function K(){for(var e="",t=u;u<d;){var n=o.charCodeAt(u);if(I(n,r))u++;else{if(92!==n)break;if(!((n=$())>=0&&I(n,r)))break;e+=o.substring(t,u),e+=String.fromCharCode(n),t=u+=6}}return e+=o.substring(t,u)}function z(){var e=b.length;if(e>=2&&e<=11){var t=b.charCodeAt(0);if(t>=97&&t<=122&&void 0!==(_=n.get(b)))return _}return _=71}function J(t){e.Debug.assert(2===t||8===t,"Expected either base 2 or base 8");for(var n=0,r=0;;){var i=o.charCodeAt(u),a=i-48;if(!y(i)||a>=t)break;n=n*t+a,u++,r++}return 0===r?-1:n}function q(){for(p=u,E=!1,S=!1,D=!1,A=0;;){if(f=u,u>=d)return _=1;var t=o.charCodeAt(u);if(35===t&&0===u&&T(o,u)){if(u=C(o,u),i)continue;return _=6}switch(t){case 10:case 13:if(S=!0,i){u++;continue}return 13===t&&u+1<d&&10===o.charCodeAt(u+1)?u+=2:u++,_=4;case 9:case 11:case 12:case 32:if(i){u++;continue}for(;u<d&&g(o.charCodeAt(u));)u++;return _=5;case 33:return 61===o.charCodeAt(u+1)?61===o.charCodeAt(u+2)?(u+=3,_=35):(u+=2,_=33):(u++,_=51);case 34:case 39:return b=M(),_=9;case 96:return _=U();case 37:return 61===o.charCodeAt(u+1)?(u+=2,_=64):(u++,_=42);case 38:return 38===o.charCodeAt(u+1)?(u+=2,_=53):61===o.charCodeAt(u+1)?(u+=2,_=68):(u++,_=48);case 40:return u++,_=19;case 41:return u++,_=20;case 42:return 61===o.charCodeAt(u+1)?(u+=2,_=61):42===o.charCodeAt(u+1)?61===o.charCodeAt(u+2)?(u+=3,_=62):(u+=2,_=40):(u++,_=39);case 43:return 43===o.charCodeAt(u+1)?(u+=2,_=43):61===o.charCodeAt(u+1)?(u+=2,_=59):(u++,_=37);case 44:return u++,_=26;case 45:return 45===o.charCodeAt(u+1)?(u+=2,_=44):61===o.charCodeAt(u+1)?(u+=2,_=60):(u++,_=38);case 46:return y(o.charCodeAt(u+1))?(b=P(),_=8):46===o.charCodeAt(u+1)&&46===o.charCodeAt(u+2)?(u+=3,_=24):(u++,_=23);case 47:if(47===o.charCodeAt(u+1)){for(u+=2;u<d&&!h(o.charCodeAt(u));)u++;if(i)continue;return _=2}if(42===o.charCodeAt(u+1)){u+=2;for(var n=!1;u<d;){var s=o.charCodeAt(u);if(42===s&&47===o.charCodeAt(u+1)){u+=2,n=!0;break}h(s)&&(S=!0),u++}if(n||w(e.Diagnostics.Asterisk_Slash_expected),i)continue;return D=!n,_=3}return 61===o.charCodeAt(u+1)?(u+=2,_=63):(u++,_=41);case 48:var c;if(u+2<d&&(88===o.charCodeAt(u+1)||120===o.charCodeAt(u+1)))return u+=2,(c=L(1))<0&&(w(e.Diagnostics.Hexadecimal_digit_expected),c=0),b=""+c,A=8,_=8;if(u+2<d&&(66===o.charCodeAt(u+1)||98===o.charCodeAt(u+1)))return u+=2,(c=J(2))<0&&(w(e.Diagnostics.Binary_digit_expected),c=0),b=""+c,A=16,_=8;if(u+2<d&&(79===o.charCodeAt(u+1)||111===o.charCodeAt(u+1)))return u+=2,(c=J(8))<0&&(w(e.Diagnostics.Octal_digit_expected),c=0),b=""+c,A=32,_=8;if(u+1<d&&v(o.charCodeAt(u+1)))return b=""+O(),A=4,_=8;case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return b=P(),_=8;case 58:return u++,_=56;case 59:return u++,_=25;case 60:if(x(o,u)){if(u=k(o,u,w),i)continue;return _=7}return 60===o.charCodeAt(u+1)?61===o.charCodeAt(u+2)?(u+=3,_=65):(u+=2,_=45):61===o.charCodeAt(u+1)?(u+=2,_=30):1===a&&47===o.charCodeAt(u+1)&&42!==o.charCodeAt(u+2)?(u+=2,_=28):(u++,_=27);case 61:if(x(o,u)){if(u=k(o,u,w),i)continue;return _=7}return 61===o.charCodeAt(u+1)?61===o.charCodeAt(u+2)?(u+=3,_=34):(u+=2,_=32):62===o.charCodeAt(u+1)?(u+=2,_=36):(u++,_=58);case 62:if(x(o,u)){if(u=k(o,u,w),i)continue;return _=7}return u++,_=29;case 63:return u++,_=55;case 91:return u++,_=21;case 93:return u++,_=22;case 94:return 61===o.charCodeAt(u+1)?(u+=2,_=70):(u++,_=50);case 123:return u++,_=17;case 124:if(x(o,u)){if(u=k(o,u,w),i)continue;return _=7}return 124===o.charCodeAt(u+1)?(u+=2,_=54):61===o.charCodeAt(u+1)?(u+=2,_=69):(u++,_=49);case 125:return u++,_=18;case 126:return u++,_=52;case 64:return u++,_=57;case 92:var l=$();return l>=0&&N(l,r)?(u+=6,b=String.fromCharCode(l)+K(),_=z()):(w(e.Diagnostics.Invalid_character),u++,_=0);default:if(N(t,r)){for(u++;u<d&&I(t=o.charCodeAt(u),r);)u++;return b=o.substring(f,u),92===t&&(b+=K()),_=z()}if(g(t)){u++;continue}if(h(t)){S=!0,u++;continue}return w(e.Diagnostics.Invalid_character),u++,_=0}}}function V(){if(p=f=u,u>=d)return _=1;var e=o.charCodeAt(u);if(60===e)return 47===o.charCodeAt(u+1)?(u+=2,_=28):(u++,_=27);if(123===e)return u++,_=17;for(var t=0;u<d&&123!==(e=o.charCodeAt(u));){if(60===e){if(x(o,u))return u=k(o,u,w),_=7;break}h(e)&&0===t?t=-1:m(e)||(t=u),u++}return-1===t?11:10}function H(e,t){var n=u,r=p,i=f,a=_,o=b,s=S,c=e();return c&&!t||(u=n,p=r,f=i,_=a,b=o,S=s),c}function G(e,t,n){o=e||"",d=void 0===n?o.length:t+n,W(t||0)}function W(t){e.Debug.assert(t>=0),u=t,p=t,f=t,_=0,S=!1,b=void 0,E=!1,D=!1}}}(ts||(ts={})),function(e){e.emptyArray=[],e.emptyMap=e.createMap(),e.externalHelpersModuleNameText="tslib",e.getDeclarationOfKind=function(e,t){var n=e.declarations;if(n)for(var r=0,i=n;r<i.length;r++){var a=i[r];if(a.kind===t)return a}};var t,n,r=(t="",{string:function(){return t},writeKeyword:n=function(e){return t+=e},writeOperator:n,writePunctuation:n,writeSpace:n,writeStringLiteral:n,writeParameter:n,writeProperty:n,writeSymbol:n,writeLine:function(){return t+=" "},increaseIndent:e.noop,decreaseIndent:e.noop,clear:function(){return t=""},trackSymbol:e.noop,reportInaccessibleThisError:e.noop,reportPrivateInBaseOfClassExpression:e.noop});function i(e){return e.end-e.pos}function a(t){return function(t){if(!(262144&t.flags)){(0!=(32768&t.flags)||e.forEachChild(t,a))&&(t.flags|=131072),t.flags|=262144}}(t),0!=(131072&t.flags)}function o(e){for(;e&&265!==e.kind;)e=e.parent;return e}function s(t,n){e.Debug.assert(t>=0);var r=e.getLineStarts(n),i=t,a=n.text;if(i+1===r.length)return a.length-1;var o=r[i],s=r[i+1]-1;for(e.Debug.assert(e.isLineBreak(a.charCodeAt(s)));o<=s&&e.isLineBreak(a.charCodeAt(s));)s--;return s}function c(e){return void 0===e||e.pos===e.end&&e.pos>=0&&1!==e.kind}function l(e){return!c(e)}function u(e,t){return 42===e.charCodeAt(t.pos+1)&&33===e.charCodeAt(t.pos+2)}function d(t,n,r){return c(t)?t.pos:e.isJSDocNode(t)?e.skipTrivia((n||o(t)).text,t.pos,!1,!0):r&&e.hasJSDocNodes(t)?d(t.jsDoc[0]):286===t.kind&&t._children.length>0?d(t._children[0],n,r):e.skipTrivia((n||o(t)).text,t.pos)}function p(t,n,r){if(void 0===r&&(r=!1),c(n))return"";var i=t.text;return i.substring(r?n.pos:e.skipTrivia(i,n.pos),n.end)}function f(t,n){return c(n)?"":t.substring(e.skipTrivia(t,n.pos),n.end)}function _(e,t){return void 0===t&&(t=!1),p(o(e),e,t)}function m(e,t){var n=e.pos,r=t.pos;return n<r?-1:r<n?1:0}function g(e){var t=e.emitNode;return t&&t.flags}function h(e){return e.length>=2&&95===e.charCodeAt(0)&&95===e.charCodeAt(1)?"_"+e:e}function y(e){var t=ce(e);return 226===t.kind&&260===t.parent.kind}function v(e){return e&&233===e.kind&&(9===e.name.kind||x(e))}function b(t){return e.isModuleDeclaration(t)&&9===t.name.kind}function x(e){return!!(512&e.flags)}function k(t,n){switch(t.kind){case 265:case 235:case 260:case 233:case 214:case 215:case 216:case 152:case 151:case 153:case 154:case 228:case 186:case 187:return!0;case 207:return n&&!e.isFunctionLike(n)}return!1}function S(e){return 0===i(e)?"(Missing)":_(e)}function T(e){switch(e.kind){case 71:return e.escapedText;case 9:case 8:return h(e.text);case 144:if(te(e.expression))return h(e.expression.text)}}function C(t,n,r,i,a,o){var s=D(t,n);return e.createFileDiagnostic(t,s.start,s.length,r,i,a,o)}function E(t,n){var r=e.createScanner(t.languageVersion,!0,t.languageVariant,t.text,void 0,n);r.scan();var i=r.getTokenPos();return e.createTextSpanFromBounds(i,r.getTextPos())}function D(t,n){var r=n;switch(n.kind){case 265:var i=e.skipTrivia(t.text,0,!1);return i===t.text.length?e.createTextSpan(0,0):E(t,i);case 226:case 176:case 229:case 199:case 230:case 233:case 232:case 264:case 228:case 186:case 151:case 153:case 154:case 231:r=n.name;break;case 187:return function(t,n){var r=e.skipTrivia(t.text,n.pos);if(n.body&&207===n.body.kind){var i=e.getLineAndCharacterOfPosition(t,n.body.pos).line;if(i<e.getLineAndCharacterOfPosition(t,n.body.end).line)return e.createTextSpan(r,s(i,t)-r+1)}return e.createTextSpanFromBounds(r,n.end)}(t,n)}if(void 0===r)return E(t,n.pos);var a=c(r)?r.pos:e.skipTrivia(t.text,r.pos);return e.createTextSpanFromBounds(a,r.end)}function A(t){return!!(2&e.getCombinedNodeFlags(t))||!!(2048&e.getCombinedModifierFlags(t))}e.usingSingleLineStringWriter=function(e){var t=r.string();try{return e(r),r.string()}finally{r.clear(),r.writeKeyword(t)}},e.getFullWidth=i,e.getResolvedModule=function(e,t){return e&&e.resolvedModules&&e.resolvedModules.get(t)},e.setResolvedModule=function(t,n,r){t.resolvedModules||(t.resolvedModules=e.createMap()),t.resolvedModules.set(n,r)},e.setResolvedTypeReferenceDirective=function(t,n,r){t.resolvedTypeReferenceDirectiveNames||(t.resolvedTypeReferenceDirectiveNames=e.createMap()),t.resolvedTypeReferenceDirectiveNames.set(n,r)},e.moduleResolutionIsEqualTo=function(e,t){return e.isExternalLibraryImport===t.isExternalLibraryImport&&e.extension===t.extension&&e.resolvedFileName===t.resolvedFileName&&(n=e.packageId,r=t.packageId,n===r||n&&r&&n.name===r.name&&n.subModuleName===r.subModuleName&&n.version===r.version);var n,r},e.typeDirectiveIsEqualTo=function(e,t){return e.resolvedFileName===t.resolvedFileName&&e.primary===t.primary},e.hasChangesInResolutions=function(t,n,r,i){e.Debug.assert(t.length===n.length);for(var a=0;a<t.length;a++){var o=n[a],s=r&&r.get(t[a]);if(s?!o||!i(s,o):o)return!0}return!1},e.containsParseError=a,e.getSourceFileOfNode=o,e.isStatementWithLocals=function(e){switch(e.kind){case 207:case 235:case 214:case 215:case 216:return!0}return!1},e.getStartPositionOfLine=function(t,n){return e.Debug.assert(t>=0),e.getLineStarts(n)[t]},e.nodePosToString=function(t){var n=o(t),r=e.getLineAndCharacterOfPosition(n,t.pos);return n.fileName+"("+(r.line+1)+","+(r.character+1)+")"},e.getEndLinePosition=s,e.nodeIsMissing=c,e.nodeIsPresent=l,e.isRecognizedTripleSlashComment=function(t,n,r){if(47===t.charCodeAt(n+1)&&n+2<r&&47===t.charCodeAt(n+2)){var i=t.substring(n,r);return!!(i.match(e.fullTripleSlashReferencePathRegEx)||i.match(e.fullTripleSlashAMDReferencePathRegEx)||i.match(w)||i.match(N))}return!1},e.isPinnedComment=u,e.getTokenPosOfNode=d,e.getNonDecoratorTokenPosOfNode=function(t,n){return c(t)||!t.decorators?d(t,n):e.skipTrivia((n||o(t)).text,t.decorators.end)},e.getSourceTextOfNodeFromSourceFile=p,e.getTextOfNodeFromSourceText=f,e.getTextOfNode=_,e.indexOfNode=function(t,n){return e.binarySearch(t,n,m)},e.getEmitFlags=g,e.getLiteralText=function(t,n){if(!le(t)&&t.parent)return p(n,t);var r=16777216&g(t)?ye:Se;switch(t.kind){case 9:return t.singleQuote?"'"+r(t.text,39)+"'":'"'+r(t.text,34)+'"';case 13:return"`"+r(t.text,96)+"`";case 14:return"`"+r(t.text,96)+"${";case 15:return"}"+r(t.text,96)+"${";case 16:return"}"+r(t.text,96)+"`";case 8:case 12:return t.text}e.Debug.fail("Literal kind '"+t.kind+"' not accounted for.")},e.getTextOfConstantValue=function(t){return e.isString(t)?'"'+Se(t)+'"':""+t},e.escapeLeadingUnderscores=h,e.escapeIdentifier=function(e){return e},e.makeIdentifierFromModuleName=function(t){return e.getBaseFileName(t).replace(/^(\d)/,"_$1").replace(/\W/g,"_")},e.isBlockOrCatchScoped=function(t){return 0!=(3&e.getCombinedNodeFlags(t))||y(t)},e.isCatchClauseVariableDeclarationOrBindingElement=y,e.isAmbientModule=v,e.isModuleWithStringLiteralName=b,e.isNonGlobalAmbientModule=function(t){return e.isModuleDeclaration(t)&&e.isStringLiteral(t.name)},e.isShorthandAmbientModuleSymbol=function(e){return(t=e.valueDeclaration)&&233===t.kind&&!t.body;var t},e.isBlockScopedContainerTopLevel=function(t){return 265===t.kind||233===t.kind||e.isFunctionLike(t)},e.isGlobalScopeAugmentation=x,e.isExternalModuleAugmentation=function(t){if(!t||!v(t))return!1;switch(t.parent.kind){case 265:return e.isExternalModule(t.parent);case 234:return v(t.parent.parent)&&!e.isExternalModule(t.parent.parent.parent)}return!1},e.isEffectiveExternalModule=function(t,n){return e.isExternalModule(t)||n.isolatedModules},e.isBlockScope=k,e.isDeclarationWithTypeParameters=function(t){switch(t.kind){case 155:case 156:case 150:case 157:case 160:case 161:case 273:case 229:case 199:case 230:case 231:case 282:case 228:case 151:case 152:case 153:case 154:case 186:case 187:return!0;default:return e.assertTypeIsNever(t),!1}},e.isAnyImportSyntax=function(e){switch(e.kind){case 238:case 237:return!0;default:return!1}},e.getEnclosingBlockScopeContainer=function(e){for(var t=e.parent;t;){if(k(t,t.parent))return t;t=t.parent}},e.declarationNameToString=S,e.getNameFromIndexInfo=function(e){return e.declaration?S(e.declaration.parameters[0].name):void 0},e.getTextOfPropertyName=T,e.entityNameToString=function t(n){switch(n.kind){case 71:return 0===i(n)?e.idText(n):_(n);case 143:return t(n.left)+"."+t(n.right);case 179:return t(n.expression)+"."+t(n.name)}},e.createDiagnosticForNode=function(e,t,n,r,i){return C(o(e),e,t,n,r,i)},e.createDiagnosticForNodeInSourceFile=C,e.createDiagnosticForNodeFromMessageChain=function(e,t){var n=o(e),r=D(n,e);return{file:n,start:r.start,length:r.length,code:t.code,category:t.category,messageText:t.next?t:t.messageText}},e.getSpanOfTokenAtPosition=E,e.getErrorSpanForNode=D,e.isExternalOrCommonJsModule=function(e){return void 0!==(e.externalModuleIndicator||e.commonJsModuleIndicator)},e.isConstEnumDeclaration=function(e){return 232===e.kind&&A(e)},e.isConst=A,e.isLet=function(t){return!!(1&e.getCombinedNodeFlags(t))},e.isSuperCall=function(e){return 181===e.kind&&97===e.expression.kind},e.isImportCall=function(e){return 181===e.kind&&91===e.expression.kind},e.isPrologueDirective=function(e){return 210===e.kind&&9===e.expression.kind},e.getLeadingCommentRangesOfNode=function(t,n){return 10!==t.kind?e.getLeadingCommentRanges(n.text,t.pos):void 0},e.getJSDocCommentRanges=function(t,n){var r=146===t.kind||145===t.kind||186===t.kind||187===t.kind||185===t.kind?e.concatenate(e.getTrailingCommentRanges(n,t.pos),e.getLeadingCommentRanges(n,t.pos)):e.getLeadingCommentRanges(n,t.pos);return e.filter(r,(function(e){return 42===n.charCodeAt(e.pos+1)&&42===n.charCodeAt(e.pos+2)&&47!==n.charCodeAt(e.pos+3)}))},e.fullTripleSlashReferencePathRegEx=/^(\/\/\/\s*<reference\s+path\s*=\s*)('|")(.+?)\2.*?\/>/;var w=/^(\/\/\/\s*<reference\s+types\s*=\s*)('|")(.+?)\2.*?\/>/;e.fullTripleSlashAMDReferencePathRegEx=/^(\/\/\/\s*<amd-dependency\s+path\s*=\s*)('|")(.+?)\2.*?\/>/;var N=/^(\/\/\/\s*<reference\s+no-default-lib\s*=\s*)('|")(.+?)\2\s*\/>/;function I(t){if(158<=t.kind&&t.kind<=173)return!0;switch(t.kind){case 119:case 133:case 136:case 122:case 137:case 139:case 130:return!0;case 105:return 190!==t.parent.kind;case 201:return!Ye(t);case 71:(143===t.parent.kind&&t.parent.right===t||179===t.parent.kind&&t.parent.name===t)&&(t=t.parent),e.Debug.assert(71===t.kind||143===t.kind||179===t.kind,"'node' was expected to be a qualified name, identifier or property access in 'isPartOfTypeNode'.");case 143:case 179:case 99:var n=t.parent;if(162===n.kind)return!1;if(158<=n.kind&&n.kind<=173)return!0;switch(n.kind){case 201:return!Ye(n);case 145:return t===n.constraint;case 149:case 148:case 146:case 226:return t===n.type;case 228:case 186:case 187:case 152:case 151:case 150:case 153:case 154:return t===n.type;case 155:case 156:case 157:case 184:return t===n.type;case 181:case 182:return n.typeArguments&&e.indexOf(n.typeArguments,t)>=0;case 183:return!1}}return!1}function P(e){if(e)switch(e.kind){case 176:case 264:case 146:case 261:case 149:case 148:case 262:case 226:return!0}return!1}function O(t,n){for(;;){if(!(t=t.parent))return;switch(t.kind){case 144:if(e.isClassLike(t.parent.parent))return t;t=t.parent;break;case 147:146===t.parent.kind&&e.isClassElement(t.parent.parent)?t=t.parent.parent:e.isClassElement(t.parent)&&(t=t.parent);break;case 187:if(!n)continue;case 228:case 186:case 233:case 149:case 148:case 151:case 150:case 152:case 153:case 154:case 155:case 156:case 157:case 232:case 265:return t}}}function F(e){switch(e.kind){case 229:return!0;case 149:return 229===e.parent.kind;case 153:case 154:case 151:return void 0!==e.body&&229===e.parent.kind;case 146:return void 0!==e.parent.body&&(152===e.parent.kind||151===e.parent.kind||154===e.parent.kind)&&229===e.parent.parent.kind}return!1}function L(e){return void 0!==e.decorators&&F(e)}function R(e){return L(e)||M(e)}function M(t){switch(t.kind){case 229:return e.forEach(t.members,R);case 151:case 154:return e.forEach(t.parameters,L)}}function U(e){var t=e.parent;return(251===t.kind||250===t.kind||252===t.kind)&&t.tagName===e}function B(e){switch(e.kind){case 97:case 95:case 101:case 86:case 12:case 177:case 178:case 179:case 180:case 181:case 182:case 183:case 202:case 184:case 203:case 185:case 186:case 199:case 187:case 190:case 188:case 189:case 192:case 193:case 194:case 195:case 198:case 196:case 13:case 200:case 249:case 250:case 197:case 191:case 204:return!0;case 143:for(;143===e.parent.kind;)e=e.parent;return 162===e.parent.kind||U(e);case 71:if(162===e.parent.kind||U(e))return!0;case 8:case 9:case 99:return j(e);default:return!1}}function j(e){var t=e.parent;switch(t.kind){case 226:case 146:case 149:case 148:case 264:case 261:case 176:return t.initializer===e;case 210:case 211:case 212:case 213:case 219:case 220:case 221:case 257:case 223:return t.expression===e;case 214:var n=t;return n.initializer===e&&227!==n.initializer.kind||n.condition===e||n.incrementor===e;case 215:case 216:var r=t;return r.initializer===e&&227!==r.initializer.kind||r.expression===e;case 184:case 202:case 205:case 144:return e===t.expression;case 147:case 256:case 255:case 263:return!0;case 201:return t.expression===e&&Ye(t);default:return B(t)}}function $(e){return 237===e.kind&&248===e.moduleReference.kind}function K(e){return z(e)}function z(e){return e&&!!(65536&e.flags)}function J(e){if(!z(e))return 0;if(58!==e.operatorToken.kind||179!==e.left.kind)return 0;var t=e.left;if(71===t.expression.kind){var n=t.expression;return"exports"===n.escapedText?1:"module"===n.escapedText&&"exports"===t.name.escapedText?2:5}if(99===t.expression.kind)return 4;if(179===t.expression.kind){var r=t.expression;if(71===r.expression.kind){if("module"===r.expression.escapedText&&"exports"===r.name.escapedText)return 1;if("prototype"===r.name.escapedText)return 3}}return 0}function q(t){return e.isExpressionStatement(t)&&t.expression&&e.isBinaryExpression(t.expression)&&58===t.expression.operatorToken.kind&&t.expression.right}function V(t,n){return e.isVariableStatement(t)&&t.declarationList.declarations.length>0&&(!n||t.declarationList.declarations[0].initializer===n)&&t.declarationList.declarations[0].initializer}function H(t,n){return e.isVariableStatement(t)&&t.declarationList.declarations.length>0&&(!n||t.declarationList.declarations[0]===n)&&t.declarationList.declarations[0]}function G(e){return 233===e.kind&&e.body&&233===e.body.kind&&e.body}function W(t){var n;return function t(r){var i=r.parent;i&&(261===i.kind||G(i))&&t(i);i&&i.parent&&(H(i.parent,r)||q(i.parent))&&t(i.parent);i&&i.parent&&i.parent.parent&&V(i.parent.parent,r)&&t(i.parent.parent);146===r.kind&&(n=e.addRange(n,e.getJSDocParameterTags(r)));P(r)&&r.initializer&&e.hasJSDocNodes(r.initializer)&&(n=e.addRange(n,r.initializer.jsDoc));e.hasJSDocNodes(r)&&(n=e.addRange(n,r.jsDoc))}(t),n||e.emptyArray}function Q(t){return e.Debug.assert(275===t.parent.kind),t.parent.parent}function Y(e){return void 0!==e.dotDotDotToken}function X(e){for(var t=e.parent;;){switch(t.kind){case 194:var n=t.operatorToken.kind;return Ge(n)&&t.left===e?58===n?1:2:0;case 192:case 193:var r=t.operator;return 43===r||44===r?2:0;case 215:case 216:return t.initializer===e?1:0;case 185:case 177:case 198:e=t;break;case 262:if(t.name!==e)return 0;e=t.parent;break;case 261:if(t.name===e)return 0;e=t.parent;break;default:return 0}t=e.parent}}function Z(e){return Xe(e.expression)}function ee(e,t){if(e)for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i.token===t)return i}}function te(e){var t=e.kind;return 9===t||8===t}function ne(t){var n=e.getNameOfDeclaration(t);return n&&re(n)}function re(e){return 144===e.kind&&!te(e.expression)&&!ie(e.expression)}function ie(t){return e.isPropertyAccessExpression(t)&&se(t.expression)}function ae(t){if(71===t.kind)return t.escapedText;if(9===t.kind||8===t.kind)return h(t.text);if(144===t.kind){var n=t.expression;if(ie(n))return oe(e.idText(n.name));if(9===n.kind||8===n.kind)return h(n.text)}}function oe(e){return"__@"+e}function se(e){return 71===e.kind&&"Symbol"===e.escapedText}function ce(e){for(;176===e.kind;)e=e.parent.parent;return e}function le(t){return e.positionIsSynthesized(t.pos)||e.positionIsSynthesized(t.end)}function ue(e,t,n){switch(e){case 182:return n?0:1;case 192:case 189:case 190:case 188:case 191:case 195:case 197:return 1;case 194:switch(t){case 40:case 58:case 59:case 60:case 62:case 61:case 63:case 64:case 65:case 66:case 67:case 68:case 70:case 69:return 1}}return 0}function de(e){return 194===e.kind?e.operatorToken.kind:192===e.kind||193===e.kind?e.operator:e.kind}function pe(e,t,n){switch(e){case 99:case 97:case 71:case 95:case 101:case 86:case 8:case 9:case 177:case 178:case 186:case 187:case 199:case 249:case 250:case 12:case 13:case 196:case 185:case 200:return 19;case 183:case 179:case 180:return 18;case 182:return n?18:17;case 181:return 17;case 193:return 16;case 192:case 189:case 190:case 188:case 191:return 15;case 194:switch(t){case 51:case 52:return 15;case 40:case 39:case 41:case 42:return 14;case 37:case 38:return 13;case 45:case 46:case 47:return 12;case 27:case 30:case 29:case 31:case 92:case 93:return 11;case 32:case 34:case 33:case 35:return 10;case 48:return 9;case 50:return 8;case 49:return 7;case 53:return 6;case 54:return 5;case 58:case 59:case 60:case 62:case 61:case 63:case 64:case 65:case 66:case 67:case 68:case 70:case 69:return 3;case 26:return 0;default:return-1}case 195:return 4;case 197:return 2;case 198:return 1;case 289:return 0;default:return-1}}e.isPartOfTypeNode=I,e.isChildOfNodeWithKind=function(e,t){for(;e;){if(e.kind===t)return!0;e=e.parent}return!1},e.forEachReturnStatement=function(t,n){return function t(r){switch(r.kind){case 219:return n(r);case 235:case 207:case 211:case 212:case 213:case 214:case 215:case 216:case 220:case 221:case 257:case 258:case 222:case 224:case 260:return e.forEachChild(r,t)}}(t)},e.forEachYieldExpression=function(t,n){return function t(r){switch(r.kind){case 197:n(r);var i=r.expression;return void(i&&t(i));case 232:case 230:case 233:case 231:case 229:case 199:return;default:if(e.isFunctionLike(r)){var a=r.name;if(a&&144===a.kind)return void t(a.expression)}else I(r)||e.forEachChild(r,t)}}(t)},e.getRestParameterElementType=function(t){return t&&164===t.kind?t.elementType:t&&159===t.kind?e.singleOrUndefined(t.typeArguments):void 0},e.isVariableLike=P,e.introducesArgumentsExoticObject=function(e){switch(e.kind){case 151:case 150:case 152:case 153:case 154:case 228:case 186:return!0}return!1},e.unwrapInnermostStatementOfLabel=function(e,t){for(;;){if(t&&t(e),222!==e.statement.kind)return e.statement;e=e.statement}},e.isFunctionBlock=function(t){return t&&207===t.kind&&e.isFunctionLike(t.parent)},e.isObjectLiteralMethod=function(e){return e&&151===e.kind&&178===e.parent.kind},e.isObjectLiteralOrClassExpressionMethod=function(e){return 151===e.kind&&(178===e.parent.kind||199===e.parent.kind)},e.isIdentifierTypePredicate=function(e){return e&&1===e.kind},e.isThisTypePredicate=function(e){return e&&0===e.kind},e.getPropertyAssignment=function(t,n,r){return e.filter(t.properties,(function(e){if(261===e.kind){var t=T(e.name);return n===t||r&&r===t}}))},e.getContainingFunction=function(t){return e.findAncestor(t.parent,e.isFunctionLike)},e.getContainingClass=function(t){return e.findAncestor(t.parent,e.isClassLike)},e.getThisContainer=O,e.getNewTargetContainer=function(e){var t=O(e,!1);if(t)switch(t.kind){case 152:case 228:case 186:return t}},e.getSuperContainer=function(t,n){for(;;){if(!(t=t.parent))return t;switch(t.kind){case 144:t=t.parent;break;case 228:case 186:case 187:if(!n)continue;case 149:case 148:case 151:case 150:case 152:case 153:case 154:return t;case 147:146===t.parent.kind&&e.isClassElement(t.parent.parent)?t=t.parent.parent:e.isClassElement(t.parent)&&(t=t.parent)}}},e.getImmediatelyInvokedFunctionExpression=function(e){if(186===e.kind||187===e.kind){for(var t=e,n=e.parent;185===n.kind;)t=n,n=n.parent;if(181===n.kind&&n.expression===t)return n}},e.isSuperProperty=function(e){var t=e.kind;return(179===t||180===t)&&97===e.expression.kind},e.getEntityNameFromTypeNode=function(e){switch(e.kind){case 159:return e.typeName;case 201:return Xe(e.expression)?e.expression:void 0;case 71:case 143:return e}},e.getInvokedExpression=function(t){return 183===t.kind?t.tag:e.isJsxOpeningLikeElement(t)?t.tagName:t.expression},e.nodeCanBeDecorated=F,e.nodeIsDecorated=L,e.nodeOrChildIsDecorated=R,e.childIsDecorated=M,e.isJSXTagName=U,e.isPartOfExpression=B,e.isInExpressionContext=j,e.isExternalModuleImportEqualsDeclaration=$,e.getExternalModuleImportEqualsDeclarationExpression=function(t){return e.Debug.assert($(t)),t.moduleReference.expression},e.isInternalModuleImportEqualsDeclaration=function(e){return 237===e.kind&&248!==e.moduleReference.kind},e.isSourceFileJavaScript=K,e.isInJavaScriptFile=z,e.isInJSDoc=function(e){return e&&!!(1048576&e.flags)},e.isJSDocIndexSignature=function(t){return e.isTypeReferenceNode(t)&&e.isIdentifier(t.typeName)&&"Object"===t.typeName.escapedText&&t.typeArguments&&2===t.typeArguments.length&&(136===t.typeArguments[0].kind||133===t.typeArguments[0].kind)},e.isRequireCall=function(e,t){if(181!==e.kind)return!1;var n=e,r=n.expression,i=n.arguments;if(71!==r.kind||"require"!==r.escapedText)return!1;if(1!==i.length)return!1;var a=i[0];return!t||9===a.kind||13===a.kind},e.isSingleOrDoubleQuote=function(e){return 39===e||34===e},e.isStringDoubleQuoted=function(e,t){return 34===p(t,e).charCodeAt(0)},e.isDeclarationOfFunctionOrClassExpression=function(e){if(e.valueDeclaration&&226===e.valueDeclaration.kind){var t=e.valueDeclaration;return t.initializer&&(186===t.initializer.kind||199===t.initializer.kind)}return!1},e.getRightMostAssignedExpression=function(e){for(;Qe(e,!0);)e=e.right;return e},e.isExportsIdentifier=function(t){return e.isIdentifier(t)&&"exports"===t.escapedText},e.isModuleExportsPropertyAccessExpression=function(t){return e.isPropertyAccessExpression(t)&&e.isIdentifier(t.expression)&&"module"===t.expression.escapedText&&"exports"===t.name.escapedText},e.getSpecialPropertyAssignmentKind=J,e.getExternalModuleName=function(e){if(238===e.kind)return e.moduleSpecifier;if(237===e.kind){var t=e.moduleReference;if(248===t.kind)return t.expression}return 244===e.kind?e.moduleSpecifier:b(e)?e.name:void 0},e.getNamespaceDeclarationNode=function(e){if(237===e.kind)return e;var t=e.importClause;return t&&t.namedBindings&&240===t.namedBindings.kind?t.namedBindings:void 0},e.isDefaultImport=function(e){return 238===e.kind&&e.importClause&&!!e.importClause.name},e.hasQuestionToken=function(e){if(e)switch(e.kind){case 146:case 151:case 150:case 262:case 261:case 149:case 148:return void 0!==e.questionToken}return!1},e.isJSDocConstructSignature=function(e){return 273===e.kind&&e.parameters.length>0&&e.parameters[0].name&&"new"===e.parameters[0].name.escapedText},e.getAllJSDocs=function(t){return e.isJSDocTypedefTag(t)?[t.parent]:W(t)},e.getSourceOfAssignment=q,e.getSingleInitializerOfVariableStatement=V,e.getSingleVariableOfVariableStatement=H,e.getNestedModuleDeclaration=G,e.getJSDocCommentsAndTags=W,e.getParameterSymbolFromJSDoc=function(t){if(t.symbol)return t.symbol;if(e.isIdentifier(t.name)){var n=t.name.escapedText,r=Q(t),i=q(r)||V(r)||H(r)||G(r)||r;if(i&&e.isFunctionLike(i)){var a=e.find(i.parameters,(function(e){return 71===e.name.kind&&e.name.escapedText===n}));return a&&a.symbol}}},e.getJSDocHost=Q,e.getTypeParameterFromJsDoc=function(t){var n=t.name.escapedText,r=t.parent.parent.parent.typeParameters;return e.find(r,(function(e){return e.name.escapedText===n}))},e.hasRestParameter=function(t){var n=e.lastOrUndefined(t.parameters);return n&&Y(n)},e.isRestParameter=Y,function(e){e[e.None=0]="None",e[e.Definite=1]="Definite",e[e.Compound=2]="Compound"}(e.AssignmentKind||(e.AssignmentKind={})),e.getAssignmentTargetKind=X,e.isAssignmentTarget=function(e){return 0!==X(e)},e.isDeleteTarget=function(e){if(179!==e.kind&&180!==e.kind)return!1;for(e=e.parent;e&&185===e.kind;)e=e.parent;return e&&188===e.kind},e.isNodeDescendantOf=function(e,t){for(;e;){if(e===t)return!0;e=e.parent}return!1},e.isInAmbientContext=function(e){for(;e;){if(ze(e,2)||265===e.kind&&e.isDeclarationFile)return!0;e=e.parent}return!1},e.isDeclarationName=function(t){switch(t.kind){case 71:case 9:case 8:return e.isDeclaration(t.parent)&&t.parent.name===t;default:return!1}},e.isAnyDeclarationName=function(t){switch(t.kind){case 71:case 9:case 8:if(e.isDeclaration(t.parent))return t.parent.name===t;var n=t.parent.parent;return e.isBinaryExpression(n)&&0!==J(n)&&e.getNameOfDeclaration(n)===t;default:return!1}},e.isLiteralComputedPropertyDeclarationName=function(t){return(9===t.kind||8===t.kind)&&144===t.parent.kind&&e.isDeclaration(t.parent.parent)},e.isIdentifierName=function(e){var t=e.parent;switch(t.kind){case 149:case 148:case 151:case 150:case 153:case 154:case 264:case 261:case 179:return t.name===e;case 143:if(t.right===e){for(;143===t.kind;)t=t.parent;return 162===t.kind}return!1;case 176:case 242:return t.propertyName===e;case 246:case 253:return!0}return!1},e.isAliasSymbolDeclaration=function(e){return 237===e.kind||236===e.kind||239===e.kind&&!!e.name||240===e.kind||242===e.kind||246===e.kind||243===e.kind&&Z(e)},e.exportAssignmentIsAlias=Z,e.getClassExtendsHeritageClauseElement=function(e){var t=ee(e.heritageClauses,85);return t&&t.types.length>0?t.types[0]:void 0},e.getClassImplementsHeritageClauseElements=function(e){var t=ee(e.heritageClauses,108);return t?t.types:void 0},e.getInterfaceBaseTypeNodes=function(e){var t=ee(e.heritageClauses,85);return t?t.types:void 0},e.getHeritageClause=ee,e.tryResolveScriptReference=function(t,n,r){if(!t.getCompilerOptions().noResolve){var i=e.isRootedDiskPath(r.fileName)?r.fileName:e.combinePaths(e.getDirectoryPath(n.fileName),r.fileName);return t.getSourceFile(i)}},e.getAncestor=function(e,t){for(;e;){if(e.kind===t)return e;e=e.parent}},e.getFileReferenceFromReferencePath=function(t,n){var r=new RegExp(N.source,"gim");if(/^\/\/\/\s*<reference\s+/gim.test(t)){if(r.test(t))return{isNoDefaultLib:!0};var i=e.fullTripleSlashReferencePathRegEx.exec(t),a=!i&&w.exec(t),o=i||a;if(o){var s=n.pos+o[1].length+o[2].length;return{fileReference:{pos:s,end:s+o[3].length,fileName:o[3]},isNoDefaultLib:!1,isTypeReferenceDirective:!!a}}return{diagnosticMessage:e.Diagnostics.Invalid_reference_directive_syntax,isNoDefaultLib:!1}}},e.isKeyword=function(e){return 72<=e&&e<=142},e.isTrivia=function(e){return 2<=e&&e<=7},function(e){e[e.Normal=0]="Normal",e[e.Generator=1]="Generator",e[e.Async=2]="Async",e[e.Invalid=4]="Invalid",e[e.AsyncGenerator=3]="AsyncGenerator"}(e.FunctionFlags||(e.FunctionFlags={})),e.getFunctionFlags=function(e){if(!e)return 4;var t=0;switch(e.kind){case 228:case 186:case 151:e.asteriskToken&&(t|=1);case 187:ze(e,256)&&(t|=2)}return e.body||(t|=4),t},e.isAsyncFunction=function(e){switch(e.kind){case 228:case 186:case 187:case 151:return void 0!==e.body&&void 0===e.asteriskToken&&ze(e,256)}return!1},e.isStringOrNumericLiteral=te,e.hasDynamicName=ne,e.isDynamicName=re,e.isWellKnownSymbolSyntactically=ie,e.getPropertyNameForPropertyNameNode=ae,e.getTextOfIdentifierOrLiteral=function(t){if(t){if(71===t.kind)return e.idText(t);if(9===t.kind||8===t.kind)return t.text}},e.getEscapedTextOfIdentifierOrLiteral=function(e){if(e){if(71===e.kind)return e.escapedText;if(9===e.kind||8===e.kind)return h(e.text)}},e.getPropertyNameForKnownSymbolName=oe,e.isESSymbolIdentifier=se,e.isPushOrUnshiftIdentifier=function(e){return"push"===e.escapedText||"unshift"===e.escapedText},e.isParameterDeclaration=function(e){return 146===ce(e).kind},e.getRootDeclaration=ce,e.nodeStartsNewLexicalEnvironment=function(e){var t=e.kind;return 152===t||186===t||228===t||187===t||151===t||153===t||154===t||233===t||265===t},e.nodeIsSynthesized=le,e.getOriginalSourceFile=function(t){return e.getParseTreeNode(t,e.isSourceFile)||t},function(e){e[e.Left=0]="Left",e[e.Right=1]="Right"}(e.Associativity||(e.Associativity={})),e.getExpressionAssociativity=function(e){var t=de(e),n=182===e.kind&&void 0!==e.arguments;return ue(e.kind,t,n)},e.getOperatorAssociativity=ue,e.getExpressionPrecedence=function(e){var t=de(e),n=182===e.kind&&void 0!==e.arguments;return pe(e.kind,t,n)},e.getOperator=de,e.getOperatorPrecedence=pe,e.createDiagnosticCollection=function(){var t=[],n=e.createMap(),r=!1,i=0;return{add:function(e){var a;e.file?(a=n.get(e.file.fileName))||(a=[],n.set(e.file.fileName,a)):a=t;a.push(e),r=!0,i++},getGlobalDiagnostics:function(){return a(),t},getDiagnostics:function(r){if(a(),r)return n.get(r)||[];var i=[];function o(e){i.push(e)}return e.forEach(t,o),n.forEach((function(t){e.forEach(t,o)})),e.sortAndDeduplicateDiagnostics(i)},getModificationCount:function(){return i},reattachFileDiagnostics:function(t){e.forEach(n.get(t.fileName),(function(e){return e.file=t}))}};function a(){r&&(r=!1,t=e.sortAndDeduplicateDiagnostics(t),n.forEach((function(t,r){n.set(r,e.sortAndDeduplicateDiagnostics(t))})))}};var fe=/[\\\"\u0000-\u001f\t\v\f\b\r\n\u2028\u2029\u0085]/g,_e=/[\\\'\u0000-\u001f\t\v\f\b\r\n\u2028\u2029\u0085]/g,me=/[\\\`\u0000-\u001f\t\v\f\b\r\n\u2028\u2029\u0085]/g,ge=e.createMapFromTemplate({"\0":"\\0","\t":"\\t","\v":"\\v","\f":"\\f","\b":"\\b","\r":"\\r","\n":"\\n","\\":"\\\\",'"':'\\"',"'":"\\'","`":"\\`","\u2028":"\\u2028","\u2029":"\\u2029","":"\\u0085"}),he=/\\0[0-9]/g;function ye(e,t){var n=96===t?me:39===t?_e:fe;return e.replace(n,be).replace(he,ve)}function ve(e){return"\\x00"+e.charAt(e.length-1)}function be(e){return ge.get(e)||xe(e.charCodeAt(0))}function xe(e){return"\\u"+("0000"+e.toString(16).toUpperCase()).slice(-4)}e.escapeString=ye,e.isIntrinsicJsxName=function(e){var t=e.substr(0,1);return t.toLowerCase()===t};var ke=/[^\u0000-\u007F]/g;function Se(e,t){return e=ye(e,t),ke.test(e)?e.replace(ke,(function(e){return xe(e.charCodeAt(0))})):e}e.escapeNonAsciiString=Se;var Te=["","    "];function Ce(e){return void 0===Te[e]&&(Te[e]=Ce(e-1)+Te[1]),Te[e]}function Ee(){return Te[1].length}function De(e,t){return t.moduleName||Ae(e,t.fileName)}function Ae(t,n){var r=function(e){return t.getCanonicalFileName(e)},i=e.toPath(t.getCommonSourceDirectory(),t.getCurrentDirectory(),r),a=e.getNormalizedAbsolutePath(n,t.getCurrentDirectory()),o=e.getRelativePathToDirectoryOrUrl(i,a,i,r,!1);return e.removeFileExtension(o)}function we(e,t,n){return!(t.noEmitForJsFiles&&K(e)||e.isDeclarationFile||n(e))}function Ne(t,n,r){var i=e.getNormalizedAbsolutePath(t.fileName,n.getCurrentDirectory()),a=n.getCommonSourceDirectory();return i=0===n.getCanonicalFileName(i).indexOf(n.getCanonicalFileName(a))?i.substring(a.length):i,e.combinePaths(r,i)}function Ie(t,n){return e.getLineAndCharacterOfPosition(t,n).line}function Pe(t,n){return e.computeLineAndCharacterOfPosition(t,n).line}function Oe(e){if(e&&e.parameters.length>0){var t=2===e.parameters.length&&Fe(e.parameters[0]);return e.parameters[t?1:0]}}function Fe(e){return Le(e.name)}function Le(e){return e&&71===e.kind&&Re(e)}function Re(e){return 99===e.originalKeywordKind}function Me(t,n){return t.type?t.type:n||z(t)?e.getJSDocType(t):void 0}function Ue(e,t,n,r){Be(e,t,n.pos,r)}function Be(e,t,n,r){r&&r.length&&n!==r[0].pos&&Pe(e,n)!==Pe(e,r[0].pos)&&t.writeLine()}function je(e,t,n,r,i,a,o,s){if(r&&r.length>0){i&&n.write(" ");for(var c=!1,l=0,u=r;l<u.length;l++){var d=u[l];c&&(n.write(" "),c=!1),s(e,t,n,d.pos,d.end,o),d.hasTrailingNewLine?n.writeLine():c=!0}c&&a&&n.write(" ")}}function $e(e,t,n,r,i,a){var o=Math.min(t,a-1),s=e.substring(i,o).replace(/^\s+|\s+$/g,"");s?(n.write(s),o!==t&&n.writeLine()):n.writeLiteral(r)}function Ke(t,n,r){for(var i=0;n<r&&e.isWhiteSpaceSingleLine(t.charCodeAt(n));n++)9===t.charCodeAt(n)?i+=Ee()-i%Ee():i++;return i}function ze(e,t){return!!Je(e,t)}function Je(e,t){return qe(e)&t}function qe(e){if(536870912&e.modifierFlagsCache)return-536870913&e.modifierFlagsCache;var t=Ve(e);return e.modifierFlagsCache=536870912|t,t}function Ve(e){var t=0;if(e.modifiers)for(var n=0,r=e.modifiers;n<r.length;n++){t|=He(r[n].kind)}return(4&e.flags||71===e.kind&&e.isInJSDocNamespace)&&(t|=1),t}function He(e){switch(e){case 115:return 32;case 114:return 4;case 113:return 16;case 112:return 8;case 117:return 128;case 84:return 1;case 124:return 2;case 76:return 2048;case 79:return 512;case 120:return 256;case 131:return 64}return 0}function Ge(e){return e>=58&&e<=70}function We(t){if(201===t.kind&&85===t.parent.token&&e.isClassLike(t.parent.parent))return t.parent.parent}function Qe(t,n){return e.isBinaryExpression(t)&&(n?58===t.operatorToken.kind:Ge(t.operatorToken.kind))&&e.isLeftHandSideExpression(t.left)}function Ye(e){return void 0!==We(e)}function Xe(e){return 71===e.kind||179===e.kind&&Xe(e.expression)}e.getIndentString=Ce,e.getIndentSize=Ee,e.createTextWriter=function(t){var n,r,i,a,o;function s(e){e&&e.length&&(i&&(n+=Ce(r),i=!1),n+=e)}function c(){n="",r=0,i=!0,a=0,o=0}return c(),{write:s,rawWrite:function(e){void 0!==e&&(i&&(i=!1),n+=e)},writeTextOfNode:function(e,t){s(f(e,t))},writeLiteral:function(t){if(t&&t.length){s(t);var r=e.computeLineStarts(t);r.length>1&&(a=a+r.length-1,o=n.length-t.length+e.lastOrUndefined(r))}},writeLine:function(){i||(a++,o=(n+=t).length,i=!0)},increaseIndent:function(){r++},decreaseIndent:function(){r--},getIndent:function(){return r},getTextPos:function(){return n.length},getLine:function(){return a+1},getColumn:function(){return i?r*Ee()+1:n.length-o+1},getText:function(){return n},isAtStartOfLine:function(){return i},reset:c}},e.getResolvedExternalModuleName=De,e.getExternalModuleNameFromDeclaration=function(e,t,n){var r=t.getExternalModuleFileFromDeclaration(n);if(r&&!r.isDeclarationFile)return De(e,r)},e.getExternalModuleNameFromPath=Ae,e.getOwnEmitOutputFilePath=function(t,n,r){var i=n.getCompilerOptions();return(i.outDir?e.removeFileExtension(Ne(t,n,i.outDir)):e.removeFileExtension(t.fileName))+r},e.getDeclarationEmitOutputFilePath=function(t,n){var r=n.getCompilerOptions(),i=r.declarationDir||r.outDir,a=i?Ne(t,n,i):t.fileName;return e.removeFileExtension(a)+".d.ts"},e.getSourceFilesToEmit=function(t,n){var r=t.getCompilerOptions(),i=function(e){return t.isSourceFileFromExternalLibrary(e)};if(r.outFile||r.out){var a=e.getEmitModuleKind(r),o=a===e.ModuleKind.AMD||a===e.ModuleKind.System;return e.filter(t.getSourceFiles(),(function(t){return(o||!e.isExternalModule(t))&&we(t,r,i)}))}var s=void 0===n?t.getSourceFiles():[n];return e.filter(s,(function(e){return we(e,r,i)}))},e.sourceFileMayBeEmitted=we,e.getSourceFilePathInNewDir=Ne,e.writeFile=function(t,n,r,i,a,o){t.writeFile(r,i,a,(function(t){n.add(e.createCompilerDiagnostic(e.Diagnostics.Could_not_write_file_0_Colon_1,r,t))}),o)},e.getLineOfLocalPosition=Ie,e.getLineOfLocalPositionFromLineMap=Pe,e.getFirstConstructorWithBody=function(t){return e.forEach(t.members,(function(e){if(152===e.kind&&l(e.body))return e}))},e.getSetAccessorTypeAnnotationNode=function(e){var t=Oe(e);return t&&t.type},e.getThisParameter=function(e){if(e.parameters.length){var t=e.parameters[0];if(Fe(t))return t}},e.parameterIsThisKeyword=Fe,e.isThisIdentifier=Le,e.identifierIsThisKeyword=Re,e.getAllAccessorDeclarations=function(t,n){var r,i,a,o;return ne(n)?(r=n,153===n.kind?a=n:154===n.kind?o=n:e.Debug.fail("Accessor has wrong kind")):e.forEach(t,(function(e){153!==e.kind&&154!==e.kind||ze(e,32)!==ze(n,32)||ae(e.name)===ae(n.name)&&(r?i||(i=e):r=e,153!==e.kind||a||(a=e),154!==e.kind||o||(o=e))})),{firstAccessor:r,secondAccessor:i,getAccessor:a,setAccessor:o}},e.getEffectiveTypeAnnotationNode=Me,e.getEffectiveReturnTypeNode=function(t,n){return t.type?t.type:n||z(t)?e.getJSDocReturnType(t):void 0},e.getEffectiveTypeParameterDeclarations=function(t,n){if(t.typeParameters)return t.typeParameters;if(n||z(t)){var r=e.getJSDocTemplateTag(t);return r&&r.typeParameters}},e.getEffectiveSetAccessorTypeAnnotationNode=function(e,t){var n=Oe(e);return n&&Me(n,t)},e.emitNewLineBeforeLeadingComments=Ue,e.emitNewLineBeforeLeadingCommentsOfPosition=Be,e.emitNewLineBeforeLeadingCommentOfPosition=function(e,t,n,r){n!==r&&Pe(e,n)!==Pe(e,r)&&t.writeLine()},e.emitComments=je,e.emitDetachedComments=function(t,n,r,i,a,o,s){var c,l;if(s?0===a.pos&&(c=e.filter(e.getLeadingCommentRanges(t,a.pos),(function(e){return u(t,e)}))):c=e.getLeadingCommentRanges(t,a.pos),c){for(var d=[],p=void 0,f=0,_=c;f<_.length;f++){var m=_[f];if(p){var g=Pe(n,p.end);if(Pe(n,m.pos)>=g+2)break}d.push(m),p=m}if(d.length){g=Pe(n,e.lastOrUndefined(d).end);Pe(n,e.skipTrivia(t,a.pos))>=g+2&&(Ue(n,r,a,c),je(t,n,r,d,!1,!0,o,i),l={nodePos:a.pos,detachedCommentEndPos:e.lastOrUndefined(d).end})}}return l},e.writeCommentRange=function(t,n,r,i,a,o){if(42===t.charCodeAt(i+1))for(var s=e.computeLineAndCharacterOfPosition(n,i),c=n.length,l=void 0,u=i,d=s.line;u<a;d++){var p=d+1===c?t.length+1:n[d+1];if(u!==i){void 0===l&&(l=Ke(t,n[s.line],i));var f=r.getIndent()*Ee()-l+Ke(t,u,p);if(f>0){var _=f%Ee(),m=Ce((f-_)/Ee());for(r.rawWrite(m);_;)r.rawWrite(" "),_--}else r.rawWrite("")}$e(t,a,r,o,u,p),u=p}else r.write(t.substring(i,a))},e.hasModifiers=function(e){return 0!==qe(e)},e.hasModifier=ze,e.getSelectedModifierFlags=Je,e.getModifierFlags=qe,e.getModifierFlagsNoCache=Ve,e.modifierToFlag=He,e.isLogicalOperator=function(e){return 54===e||53===e||51===e},e.isAssignmentOperator=Ge,e.tryGetClassExtendingExpressionWithTypeArguments=We,e.isAssignmentExpression=Qe,e.isDestructuringAssignment=function(e){if(Qe(e,!0)){var t=e.left.kind;return 178===t||177===t}return!1},e.isExpressionWithTypeArgumentsInClassExtendsClause=Ye,e.isExpressionWithTypeArgumentsInClassImplementsClause=function(t){return 201===t.kind&&Xe(t.expression)&&t.parent&&108===t.parent.token&&t.parent.parent&&e.isClassLike(t.parent.parent)},e.isEntityNameExpression=Xe,e.isRightSideOfQualifiedNameOrPropertyAccess=function(e){return 143===e.parent.kind&&e.parent.right===e||179===e.parent.kind&&e.parent.name===e},e.isEmptyObjectLiteral=function(e){return 178===e.kind&&0===e.properties.length},e.isEmptyArrayLiteral=function(e){return 177===e.kind&&0===e.elements.length},e.getLocalSymbolForExportDefault=function(t){return function(t){return t&&e.length(t.declarations)>0&&ze(t.declarations[0],512)}(t)?t.declarations[0].localSymbol:void 0},e.tryExtractTypeScriptExtension=function(t){return e.find(e.supportedTypescriptExtensionsForExtractExtension,(function(n){return e.fileExtensionIs(t,n)}))};var Ze="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";e.convertToBase64=function(t){for(var n,r,i,a,o="",s=function(t){for(var n=[],r=t.length,i=0;i<r;i++){var a=t.charCodeAt(i);a<128?n.push(a):a<2048?(n.push(a>>6|192),n.push(63&a|128)):a<65536?(n.push(a>>12|224),n.push(a>>6&63|128),n.push(63&a|128)):a<131072?(n.push(a>>18|240),n.push(a>>12&63|128),n.push(a>>6&63|128),n.push(63&a|128)):e.Debug.assert(!1,"Unexpected code point")}return n}(t),c=0,l=s.length;c<l;)n=s[c]>>2,r=(3&s[c])<<4|s[c+1]>>4,i=(15&s[c+1])<<2|s[c+2]>>6,a=63&s[c+2],c+1>=l?i=a=64:c+2>=l&&(a=64),o+=Ze.charAt(n)+Ze.charAt(r)+Ze.charAt(i)+Ze.charAt(a),c+=3;return o};var et;function tt(t,n,r){void 0===t&&(t=0);var i=function(t){var n=[];for(var r in t){var i=t[r];"number"==typeof i&&n.push([i,r])}return e.stableSort(n,(function(t,n){return e.compareValues(t[0],n[0])}))}(n);if(0===t)return i.length>0&&0===i[0][0]?i[0][1]:"0";if(r){for(var a="",o=t,s=i.length-1;s>=0&&0!==o;s--){var c=i[s],l=c[0],u=c[1];0!==l&&(o&l)===l&&(o&=~l,a=u+(a?", ":"")+a)}if(0===o)return a}else for(var d=0,p=i;d<p.length;d++){var f=p[d];l=f[0],u=f[1];if(l===t)return u}return t.toString()}function nt(e,t){return{pos:e,end:t}}function rt(e,t){return nt(t,e.end)}function it(e){return e.decorators&&e.decorators.length>0?rt(e,e.decorators.end):e}function at(e,t,n){return ot(st(e,n),t.end,n)}function ot(e,t,n){return e===t||Ie(n,e)===Ie(n,t)}function st(t,n){return e.positionIsSynthesized(t.pos)?-1:e.skipTrivia(n.text,t.pos)}function ct(e){return void 0!==e.initializer}function lt(e){return 33554432&e.flags?e.checkFlags:0}function ut(e){var t=e.parent;if(!t)return 0;switch(t.kind){case 193:case 192:var n=t.operator;return 43===n||44===n?o():0;case 194:var r=t,i=r.left,a=r.operatorToken;return i===e&&Ge(a.kind)?o():0;case 179:return t.name!==e?0:ut(t);default:return 0}function o(){return t.parent&&210===t.parent.kind?1:2}}e.getNewLineCharacter=function(t,n){switch(t.newLine){case 0:return"\r\n";case 1:return"\n"}return n?n.newLine:e.sys?e.sys.newLine:"\r\n"},e.formatSyntaxKind=function(t){return tt(t,e.SyntaxKind,!1)},e.formatModifierFlags=function(t){return tt(t,e.ModifierFlags,!0)},e.formatTransformFlags=function(t){return tt(t,e.TransformFlags,!0)},e.formatEmitFlags=function(t){return tt(t,e.EmitFlags,!0)},e.formatSymbolFlags=function(t){return tt(t,e.SymbolFlags,!0)},e.formatTypeFlags=function(t){return tt(t,e.TypeFlags,!0)},e.formatObjectFlags=function(t){return tt(t,e.ObjectFlags,!0)},e.createRange=nt,e.moveRangeEnd=function(e,t){return nt(e.pos,t)},e.moveRangePos=rt,e.moveRangePastDecorators=it,e.moveRangePastModifiers=function(e){return e.modifiers&&e.modifiers.length>0?rt(e,e.modifiers.end):it(e)},e.isCollapsedRange=function(e){return e.pos===e.end},e.createTokenRange=function(t,n){return nt(t,t+e.tokenToString(n).length)},e.rangeIsOnSingleLine=function(e,t){return at(e,e,t)},e.rangeStartPositionsAreOnSameLine=function(e,t,n){return ot(st(e,n),st(t,n),n)},e.rangeEndPositionsAreOnSameLine=function(e,t,n){return ot(e.end,t.end,n)},e.rangeStartIsOnSameLineAsRangeEnd=at,e.rangeEndIsOnSameLineAsRangeStart=function(e,t,n){return ot(e.end,st(t,n),n)},e.positionsAreOnSameLine=ot,e.getStartPositionOfRange=st,e.isDeclarationNameOfEnumOrNamespace=function(t){var n=e.getParseTreeNode(t);if(n)switch(n.parent.kind){case 232:case 233:return n===n.parent.name}return!1},e.getInitializedVariables=function(t){return e.filter(t.declarations,ct)},e.isWatchSet=function(e){return e.watch&&e.hasOwnProperty("watch")},e.getCheckFlags=lt,e.getDeclarationModifierFlagsFromSymbol=function(t){if(t.valueDeclaration){var n=e.getCombinedModifierFlags(t.valueDeclaration);return t.parent&&32&t.parent.flags?n:-29&n}if(6&lt(t)){var r=t.checkFlags;return(256&r?8:64&r?4:16)|(512&r?32:0)}return 4194304&t.flags?36:0},e.levenshtein=function(e,t){for(var n=new Array(t.length+1),r=new Array(t.length+1),i=0;i<t.length+1;i++)n[i]=i,r[i]=-1;for(i=1;i<e.length+1;i++){r[0]=i;for(var a=1;a<t.length+1;a++)r[a]=Math.min(n[a]+1,r[a-1]+1,n[a-1]+(e[i-1]===t[a-1]?0:2));var o=n;n=r,r=o}return n[n.length-1]},e.skipAlias=function(e,t){return 2097152&e.flags?t.getAliasedSymbol(e):e},e.getCombinedLocalAndExportSymbolFlags=function(e){return e.exportSymbol?e.exportSymbol.flags|e.flags:e.flags},e.isWriteOnlyAccess=function(e){return 1===ut(e)},e.isWriteAccess=function(e){return 0!==ut(e)},function(e){e[e.Read=0]="Read",e[e.Write=1]="Write",e[e.ReadWrite=2]="ReadWrite"}(et||(et={})),e.compareDataObjects=function e(t,n){if(!t||!n||Object.keys(t).length!==Object.keys(n).length)return!1;for(var r in t)if("object"==typeof t[r]){if(!e(t[r],n[r]))return!1}else if("function"!=typeof t[r]&&t[r]!==n[r])return!1;return!0},e.clearMap=function(e,t){e.forEach(t),e.clear()},e.mutateMap=function(e,t,n){var r=n.createNewValue,i=n.onDeleteValue,a=n.onExistingValue;e.forEach((function(n,r){var o=t.get(r);void 0===o?(e.delete(r),i(n,r)):a&&a(n,o,r)})),t.forEach((function(t,n){e.has(n)||e.set(n,r(n,t))}))},e.forEachAncestorDirectory=function(t,n){for(;;){var r=n(t);if(void 0!==r)return r;var i=e.getDirectoryPath(t);if(i===t)return;t=i}}}(ts||(ts={})),function(e){function t(e){return e.start+e.length}function n(e){return 0===e.length}function r(e,t){if(e<0)throw new Error("start < 0");if(t<0)throw new Error("length < 0");return{start:e,length:t}}function i(e,t){return r(e,t-e)}function a(e,t){if(t<0)throw new Error("newLength < 0");return{span:e,newLength:t}}function o(t){return!!e.isBindingPattern(t)&&e.every(t.elements,s)}function s(t){return!!e.isOmittedExpression(t)||o(t.name)}function c(t){for(;t&&(176===t.kind||e.isBindingPattern(t));)t=t.parent;return t}function l(e,t){if(e)for(;void 0!==e.original;)e=e.original;return!t||t(e)?e:void 0}function u(e){return 0==(8&e.flags)}function d(e){var t=e;return t.length>=3&&95===t.charCodeAt(0)&&95===t.charCodeAt(1)&&95===t.charCodeAt(2)?t.substr(1):t}function p(t){var n=_(t);return e.isIdentifier(n)?n:void 0}function f(t){return t.name||function(t){var n=t.parent.parent;if(n){if(e.isDeclaration(n))return p(n);switch(n.kind){case 208:return n.declarationList&&n.declarationList.declarations[0]?p(n.declarationList.declarations[0]):void 0;case 210:var r=n.expression;switch(r.kind){case 179:return r.name;case 180:var i=r.argumentExpression;if(e.isIdentifier(i))return i}return;case 1:return;case 185:return p(n.expression);case 222:return e.isDeclaration(n.statement)||e.isExpression(n.statement)?p(n.statement):void 0;default:e.Debug.assertNever(n,"Found typedef tag attached to node which it should not be!")}}}(t)}function _(t){if(t){switch(t.kind){case 284:case 279:var n=t.name;if(143===n.kind)return n.right;break;case 194:var r=t;switch(e.getSpecialPropertyAssignmentKind(r)){case 1:case 4:case 5:case 3:return r.left.name;default:return}case 283:return f(t);case 243:var i=t.expression;return e.isIdentifier(i)?i:void 0}return t.name}}function m(t){if(t.name&&e.isIdentifier(t.name)){var n=t.name.escapedText;return h(t.parent).filter((function(t){return e.isJSDocParameterTag(t)&&e.isIdentifier(t.name)&&t.name.escapedText===n}))}}function g(e){return y(e,280)}function h(t){var n=t.jsDocCache;return void 0===n&&(t.jsDocCache=n=e.flatMap(e.getJSDocCommentsAndTags(t),(function(t){return e.isJSDoc(t)?t.tags:t}))),n}function y(t,n){var r=h(t);return e.find(r,(function(e){return e.kind===n}))}e.getDefaultLibFileName=function(e){switch(e.target){case 5:return"lib.esnext.full.d.ts";case 4:return"lib.es2017.full.d.ts";case 3:return"lib.es2016.full.d.ts";case 2:return"lib.es6.d.ts";default:return"lib.d.ts"}},e.textSpanEnd=t,e.textSpanIsEmpty=n,e.textSpanContainsPosition=function(e,n){return n>=e.start&&n<t(e)},e.textSpanContainsTextSpan=function(e,n){return n.start>=e.start&&t(n)<=t(e)},e.textSpanOverlapsWith=function(e,n){return Math.max(e.start,n.start)<Math.min(t(e),t(n))},e.textSpanOverlap=function(e,n){var r=Math.max(e.start,n.start),a=Math.min(t(e),t(n));if(r<a)return i(r,a)},e.textSpanIntersectsWithTextSpan=function(e,n){return n.start<=t(e)&&t(n)>=e.start},e.textSpanIntersectsWith=function(e,n,r){var i=n+r;return n<=t(e)&&i>=e.start},e.decodedTextSpanIntersectsWith=function(e,t,n,r){return n<=e+t&&n+r>=e},e.textSpanIntersectsWithPosition=function(e,n){return n<=t(e)&&n>=e.start},e.textSpanIntersection=function(e,n){var r=Math.max(e.start,n.start),a=Math.min(t(e),t(n));if(r<=a)return i(r,a)},e.createTextSpan=r,e.createTextSpanFromBounds=i,e.textChangeRangeNewSpan=function(e){return r(e.span.start,e.newLength)},e.textChangeRangeIsUnchanged=function(e){return n(e.span)&&0===e.newLength},e.createTextChangeRange=a,e.unchangedTextChangeRange=a(r(0,0),0),e.collapseTextChangeRangesAcrossMultipleVersions=function(n){if(0===n.length)return e.unchangedTextChangeRange;if(1===n.length)return n[0];for(var r=n[0],o=r.span.start,s=t(r.span),c=o+r.newLength,l=1;l<n.length;l++){var u=n[l],d=o,p=s,f=c,_=u.span.start,m=t(u.span),g=_+u.newLength;o=Math.min(d,_),s=Math.max(p,p+(m-f)),c=Math.max(g,g+(f-m))}return a(i(o,s),c-o)},e.getTypeParameterOwner=function(t){if(t&&145===t.kind)for(var n=t;n;n=n.parent)if(e.isFunctionLike(n)||e.isClassLike(n)||230===n.kind)return n},e.isParameterPropertyDeclaration=function(t){return e.hasModifier(t,92)&&152===t.parent.kind&&e.isClassLike(t.parent.parent)},e.isEmptyBindingPattern=o,e.isEmptyBindingElement=s,e.getCombinedModifierFlags=function(t){t=c(t);var n=e.getModifierFlags(t);return 226===t.kind&&(t=t.parent),t&&227===t.kind&&(n|=e.getModifierFlags(t),t=t.parent),t&&208===t.kind&&(n|=e.getModifierFlags(t)),n},e.getCombinedNodeFlags=function(e){var t=(e=c(e)).flags;return 226===e.kind&&(e=e.parent),e&&227===e.kind&&(t|=e.flags,e=e.parent),e&&208===e.kind&&(t|=e.flags),t},e.validateLocaleAndSetLanguage=function(t,n,r){var i=/^([a-z]+)([_\-]([a-z]+))?$/.exec(t.toLowerCase());if(i){var a=i[1];o(a,i[3],r)||o(a,void 0,r)}else r&&r.push(e.createCompilerDiagnostic(e.Diagnostics.Locale_must_be_of_the_form_language_or_language_territory_For_example_0_or_1,"en","ja-jp"));function o(t,r,i){var a=e.normalizePath(n.getExecutingFilePath()),o=e.getDirectoryPath(a),s=e.combinePaths(o,t);if(r&&(s=s+"-"+r),s=n.resolvePath(e.combinePaths(s,"diagnosticMessages.generated.json")),!n.fileExists(s))return!1;var c="";try{c=n.readFile(s)}catch(t){return i&&i.push(e.createCompilerDiagnostic(e.Diagnostics.Unable_to_open_file_0,s)),!1}try{e.localizedDiagnosticMessages=JSON.parse(c)}catch(t){return i&&i.push(e.createCompilerDiagnostic(e.Diagnostics.Corrupted_locale_file_0,s)),!1}return!0}},e.getOriginalNode=l,e.isParseTreeNode=u,e.getParseTreeNode=function(e,t){return void 0===e||u(e)?e:!u(e=l(e))||t&&!t(e)?void 0:e},e.unescapeLeadingUnderscores=d,e.idText=function(e){return d(e.escapedText)},e.symbolName=function(e){return d(e.escapedName)},e.unescapeIdentifier=function(e){return e},e.getNameOfJSDocTypedef=f,e.getNameOfDeclaration=_,e.getJSDocParameterTags=m,e.hasJSDocParameterTags=function(e){return!!y(e,279)},e.getJSDocAugmentsTag=function(e){return y(e,277)},e.getJSDocClassTag=function(e){return y(e,278)},e.getJSDocReturnTag=g,e.getJSDocTemplateTag=function(e){return y(e,282)},e.getJSDocTypeTag=function(e){var t=y(e,281);if(t&&t.typeExpression&&t.typeExpression.type)return t},e.getJSDocType=function(t){var n=y(t,281);if(!n&&146===t.kind){var r=m(t);r&&(n=e.find(r,(function(e){return!!e.typeExpression})))}return n&&n.typeExpression&&n.typeExpression.type},e.getJSDocReturnType=function(e){var t=g(e);return t&&t.typeExpression&&t.typeExpression.type},e.getJSDocTags=h,e.getAllJSDocTagsOfKind=function(t,n){var r=h(t);return e.filter(r,(function(e){return e.kind===n}))}}(ts||(ts={})),function(e){e.isNumericLiteral=function(e){return 8===e.kind},e.isStringLiteral=function(e){return 9===e.kind},e.isJsxText=function(e){return 10===e.kind},e.isRegularExpressionLiteral=function(e){return 12===e.kind},e.isNoSubstitutionTemplateLiteral=function(e){return 13===e.kind},e.isTemplateHead=function(e){return 14===e.kind},e.isTemplateMiddle=function(e){return 15===e.kind},e.isTemplateTail=function(e){return 16===e.kind},e.isIdentifier=function(e){return 71===e.kind},e.isQualifiedName=function(e){return 143===e.kind},e.isComputedPropertyName=function(e){return 144===e.kind},e.isTypeParameterDeclaration=function(e){return 145===e.kind},e.isParameter=function(e){return 146===e.kind},e.isDecorator=function(e){return 147===e.kind},e.isPropertySignature=function(e){return 148===e.kind},e.isPropertyDeclaration=function(e){return 149===e.kind},e.isMethodSignature=function(e){return 150===e.kind},e.isMethodDeclaration=function(e){return 151===e.kind},e.isConstructorDeclaration=function(e){return 152===e.kind},e.isGetAccessorDeclaration=function(e){return 153===e.kind},e.isSetAccessorDeclaration=function(e){return 154===e.kind},e.isCallSignatureDeclaration=function(e){return 155===e.kind},e.isConstructSignatureDeclaration=function(e){return 156===e.kind},e.isIndexSignatureDeclaration=function(e){return 157===e.kind},e.isTypePredicateNode=function(e){return 158===e.kind},e.isTypeReferenceNode=function(e){return 159===e.kind},e.isFunctionTypeNode=function(e){return 160===e.kind},e.isConstructorTypeNode=function(e){return 161===e.kind},e.isTypeQueryNode=function(e){return 162===e.kind},e.isTypeLiteralNode=function(e){return 163===e.kind},e.isArrayTypeNode=function(e){return 164===e.kind},e.isTupleTypeNode=function(e){return 165===e.kind},e.isUnionTypeNode=function(e){return 166===e.kind},e.isIntersectionTypeNode=function(e){return 167===e.kind},e.isParenthesizedTypeNode=function(e){return 168===e.kind},e.isThisTypeNode=function(e){return 169===e.kind},e.isTypeOperatorNode=function(e){return 170===e.kind},e.isIndexedAccessTypeNode=function(e){return 171===e.kind},e.isMappedTypeNode=function(e){return 172===e.kind},e.isLiteralTypeNode=function(e){return 173===e.kind},e.isObjectBindingPattern=function(e){return 174===e.kind},e.isArrayBindingPattern=function(e){return 175===e.kind},e.isBindingElement=function(e){return 176===e.kind},e.isArrayLiteralExpression=function(e){return 177===e.kind},e.isObjectLiteralExpression=function(e){return 178===e.kind},e.isPropertyAccessExpression=function(e){return 179===e.kind},e.isElementAccessExpression=function(e){return 180===e.kind},e.isCallExpression=function(e){return 181===e.kind},e.isNewExpression=function(e){return 182===e.kind},e.isTaggedTemplateExpression=function(e){return 183===e.kind},e.isTypeAssertion=function(e){return 184===e.kind},e.isParenthesizedExpression=function(e){return 185===e.kind},e.skipPartiallyEmittedExpressions=function(e){for(;288===e.kind;)e=e.expression;return e},e.isFunctionExpression=function(e){return 186===e.kind},e.isArrowFunction=function(e){return 187===e.kind},e.isDeleteExpression=function(e){return 188===e.kind},e.isTypeOfExpression=function(e){return 191===e.kind},e.isVoidExpression=function(e){return 190===e.kind},e.isAwaitExpression=function(e){return 191===e.kind},e.isPrefixUnaryExpression=function(e){return 192===e.kind},e.isPostfixUnaryExpression=function(e){return 193===e.kind},e.isBinaryExpression=function(e){return 194===e.kind},e.isConditionalExpression=function(e){return 195===e.kind},e.isTemplateExpression=function(e){return 196===e.kind},e.isYieldExpression=function(e){return 197===e.kind},e.isSpreadElement=function(e){return 198===e.kind},e.isClassExpression=function(e){return 199===e.kind},e.isOmittedExpression=function(e){return 200===e.kind},e.isExpressionWithTypeArguments=function(e){return 201===e.kind},e.isAsExpression=function(e){return 202===e.kind},e.isNonNullExpression=function(e){return 203===e.kind},e.isMetaProperty=function(e){return 204===e.kind},e.isTemplateSpan=function(e){return 205===e.kind},e.isSemicolonClassElement=function(e){return 206===e.kind},e.isBlock=function(e){return 207===e.kind},e.isVariableStatement=function(e){return 208===e.kind},e.isEmptyStatement=function(e){return 209===e.kind},e.isExpressionStatement=function(e){return 210===e.kind},e.isIfStatement=function(e){return 211===e.kind},e.isDoStatement=function(e){return 212===e.kind},e.isWhileStatement=function(e){return 213===e.kind},e.isForStatement=function(e){return 214===e.kind},e.isForInStatement=function(e){return 215===e.kind},e.isForOfStatement=function(e){return 216===e.kind},e.isContinueStatement=function(e){return 217===e.kind},e.isBreakStatement=function(e){return 218===e.kind},e.isReturnStatement=function(e){return 219===e.kind},e.isWithStatement=function(e){return 220===e.kind},e.isSwitchStatement=function(e){return 221===e.kind},e.isLabeledStatement=function(e){return 222===e.kind},e.isThrowStatement=function(e){return 223===e.kind},e.isTryStatement=function(e){return 224===e.kind},e.isDebuggerStatement=function(e){return 225===e.kind},e.isVariableDeclaration=function(e){return 226===e.kind},e.isVariableDeclarationList=function(e){return 227===e.kind},e.isFunctionDeclaration=function(e){return 228===e.kind},e.isClassDeclaration=function(e){return 229===e.kind},e.isInterfaceDeclaration=function(e){return 230===e.kind},e.isTypeAliasDeclaration=function(e){return 231===e.kind},e.isEnumDeclaration=function(e){return 232===e.kind},e.isModuleDeclaration=function(e){return 233===e.kind},e.isModuleBlock=function(e){return 234===e.kind},e.isCaseBlock=function(e){return 235===e.kind},e.isNamespaceExportDeclaration=function(e){return 236===e.kind},e.isImportEqualsDeclaration=function(e){return 237===e.kind},e.isImportDeclaration=function(e){return 238===e.kind},e.isImportClause=function(e){return 239===e.kind},e.isNamespaceImport=function(e){return 240===e.kind},e.isNamedImports=function(e){return 241===e.kind},e.isImportSpecifier=function(e){return 242===e.kind},e.isExportAssignment=function(e){return 243===e.kind},e.isExportDeclaration=function(e){return 244===e.kind},e.isNamedExports=function(e){return 245===e.kind},e.isExportSpecifier=function(e){return 246===e.kind},e.isMissingDeclaration=function(e){return 247===e.kind},e.isExternalModuleReference=function(e){return 248===e.kind},e.isJsxElement=function(e){return 249===e.kind},e.isJsxSelfClosingElement=function(e){return 250===e.kind},e.isJsxOpeningElement=function(e){return 251===e.kind},e.isJsxClosingElement=function(e){return 252===e.kind},e.isJsxAttribute=function(e){return 253===e.kind},e.isJsxAttributes=function(e){return 254===e.kind},e.isJsxSpreadAttribute=function(e){return 255===e.kind},e.isJsxExpression=function(e){return 256===e.kind},e.isCaseClause=function(e){return 257===e.kind},e.isDefaultClause=function(e){return 258===e.kind},e.isHeritageClause=function(e){return 259===e.kind},e.isCatchClause=function(e){return 260===e.kind},e.isPropertyAssignment=function(e){return 261===e.kind},e.isShorthandPropertyAssignment=function(e){return 262===e.kind},e.isSpreadAssignment=function(e){return 263===e.kind},e.isEnumMember=function(e){return 264===e.kind},e.isSourceFile=function(e){return 265===e.kind},e.isBundle=function(e){return 266===e.kind},e.isJSDocTypeExpression=function(e){return 267===e.kind},e.isJSDocAllType=function(e){return 268===e.kind},e.isJSDocUnknownType=function(e){return 269===e.kind},e.isJSDocNullableType=function(e){return 270===e.kind},e.isJSDocNonNullableType=function(e){return 271===e.kind},e.isJSDocOptionalType=function(e){return 272===e.kind},e.isJSDocFunctionType=function(e){return 273===e.kind},e.isJSDocVariadicType=function(e){return 274===e.kind},e.isJSDoc=function(e){return 275===e.kind},e.isJSDocAugmentsTag=function(e){return 277===e.kind},e.isJSDocParameterTag=function(e){return 279===e.kind},e.isJSDocReturnTag=function(e){return 280===e.kind},e.isJSDocTypeTag=function(e){return 281===e.kind},e.isJSDocTemplateTag=function(e){return 282===e.kind},e.isJSDocTypedefTag=function(e){return 283===e.kind},e.isJSDocPropertyTag=function(e){return 284===e.kind},e.isJSDocPropertyLikeTag=function(e){return 284===e.kind||279===e.kind},e.isJSDocTypeLiteral=function(e){return 285===e.kind}}(ts||(ts={})),function(e){function t(e){return e>=143}function n(e){return 8<=e&&e<=13}function r(e){switch(e){case 117:case 120:case 76:case 124:case 79:case 84:case 114:case 112:case 113:case 131:case 115:return!0}return!1}function i(e){return e&&o(e.kind)}function a(e){switch(e){case 228:case 151:case 152:case 153:case 154:case 186:case 187:return!0;default:return!1}}function o(e){switch(e){case 150:case 155:case 156:case 157:case 160:case 273:case 161:return!0;default:return a(e)}}function s(e){switch(e.kind){case 174:case 178:return!0}return!1}function c(e){switch(e.kind){case 175:case 177:return!0}return!1}function l(e){switch(e){case 179:case 180:case 182:case 181:case 249:case 250:case 183:case 177:case 185:case 178:case 199:case 186:case 71:case 12:case 8:case 9:case 13:case 196:case 86:case 95:case 99:case 101:case 97:case 203:case 204:case 91:return!0;default:return!1}}function u(e){switch(e){case 192:case 193:case 188:case 189:case 190:case 191:case 184:return!0;default:return l(e)}}function d(t){return function(e){switch(e){case 195:case 197:case 187:case 194:case 198:case 202:case 200:case 289:case 288:return!0;default:return u(e)}}(e.skipPartiallyEmittedExpressions(t).kind)}function p(e){return 288===e.kind}function f(e){return 287===e.kind}function _(e){return 228===e||247===e||229===e||230===e||231===e||232===e||233===e||238===e||237===e||244===e||243===e||236===e}function m(e){return 218===e||217===e||225===e||212===e||210===e||209===e||215===e||216===e||214===e||211===e||222===e||219===e||221===e||223===e||224===e||208===e||213===e||220===e||287===e||291===e||290===e}function g(e){return e.kind>=276&&e.kind<=285}e.isSyntaxList=function(e){return 286===e.kind},e.isNode=function(e){return t(e.kind)},e.isNodeKind=t,e.isToken=function(e){return e.kind>=0&&e.kind<=142},e.isNodeArray=function(e){return e.hasOwnProperty("pos")&&e.hasOwnProperty("end")},e.isLiteralKind=n,e.isLiteralExpression=function(e){return n(e.kind)},e.isTemplateLiteralKind=function(e){return 13<=e&&e<=16},e.isTemplateMiddleOrTemplateTail=function(e){var t=e.kind;return 15===t||16===t},e.isStringTextContainingNode=function(e){switch(e.kind){case 9:case 14:case 15:case 16:case 13:return!0;default:return!1}},e.isGeneratedIdentifier=function(t){return e.isIdentifier(t)&&t.autoGenerateKind>0},e.isModifierKind=r,e.isModifier=function(e){return r(e.kind)},e.isEntityName=function(e){var t=e.kind;return 143===t||71===t},e.isPropertyName=function(e){var t=e.kind;return 71===t||9===t||8===t||144===t},e.isBindingName=function(e){var t=e.kind;return 71===t||174===t||175===t},e.isFunctionLike=i,e.isFunctionLikeDeclaration=function(e){return e&&a(e.kind)},e.isFunctionLikeKind=o,e.isFunctionOrModuleBlock=function(t){return e.isSourceFile(t)||e.isModuleBlock(t)||e.isBlock(t)&&i(t.parent)},e.isClassElement=function(e){var t=e.kind;return 152===t||149===t||151===t||153===t||154===t||157===t||206===t||247===t},e.isClassLike=function(e){return e&&(229===e.kind||199===e.kind)},e.isAccessor=function(e){return e&&(153===e.kind||154===e.kind)},e.isTypeElement=function(e){var t=e.kind;return 156===t||155===t||148===t||150===t||157===t||247===t},e.isObjectLiteralElementLike=function(e){var t=e.kind;return 261===t||262===t||263===t||151===t||153===t||154===t||247===t},e.isTypeNode=function(e){return(t=e.kind)>=158&&t<=173||119===t||133===t||134===t||122===t||136===t||137===t||99===t||105===t||139===t||95===t||130===t||201===t||268===t||269===t||270===t||271===t||272===t||273===t||274===t;var t},e.isFunctionOrConstructorTypeNode=function(e){switch(e.kind){case 160:case 161:return!0}return!1},e.isBindingPattern=function(e){if(e){var t=e.kind;return 175===t||174===t}return!1},e.isAssignmentPattern=function(e){var t=e.kind;return 177===t||178===t},e.isArrayBindingElement=function(e){var t=e.kind;return 176===t||200===t},e.isDeclarationBindingElement=function(e){switch(e.kind){case 226:case 146:case 176:return!0}return!1},e.isBindingOrAssignmentPattern=function(e){return s(e)||c(e)},e.isObjectBindingOrAssignmentPattern=s,e.isArrayBindingOrAssignmentPattern=c,e.isPropertyAccessOrQualifiedName=function(e){var t=e.kind;return 179===t||143===t},e.isCallLikeExpression=function(e){switch(e.kind){case 251:case 250:case 181:case 182:case 183:case 147:return!0;default:return!1}},e.isCallOrNewExpression=function(e){return 181===e.kind||182===e.kind},e.isTemplateLiteral=function(e){var t=e.kind;return 196===t||13===t},e.isLeftHandSideExpression=function(t){return l(e.skipPartiallyEmittedExpressions(t).kind)},e.isUnaryExpression=function(t){return u(e.skipPartiallyEmittedExpressions(t).kind)},e.isUnaryExpressionWithWrite=function(e){switch(e.kind){case 193:return!0;case 192:return 43===e.operator||44===e.operator;default:return!1}},e.isExpression=d,e.isAssertionExpression=function(e){var t=e.kind;return 184===t||202===t},e.isPartiallyEmittedExpression=p,e.isNotEmittedStatement=f,e.isNotEmittedOrPartiallyEmittedNode=function(e){return f(e)||p(e)},e.isIterationStatement=function e(t,n){switch(t.kind){case 214:case 215:case 216:case 212:case 213:return!0;case 222:return n&&e(t.statement,n)}return!1},e.isForInOrOfStatement=function(e){return 215===e.kind||216===e.kind},e.isConciseBody=function(t){return e.isBlock(t)||d(t)},e.isFunctionBody=function(t){return e.isBlock(t)},e.isForInitializer=function(t){return e.isVariableDeclarationList(t)||d(t)},e.isModuleBody=function(e){var t=e.kind;return 234===t||233===t||71===t},e.isNamespaceBody=function(e){var t=e.kind;return 234===t||233===t},e.isJSDocNamespaceBody=function(e){var t=e.kind;return 71===t||233===t},e.isNamedImportBindings=function(e){var t=e.kind;return 241===t||240===t},e.isModuleOrEnumDeclaration=function(e){return 233===e.kind||232===e.kind},e.isDeclaration=function(t){return 145===t.kind?282!==t.parent.kind||e.isInJavaScriptFile(t):187===(n=t.kind)||176===n||229===n||199===n||152===n||232===n||264===n||246===n||228===n||186===n||153===n||239===n||237===n||242===n||230===n||253===n||151===n||150===n||233===n||236===n||240===n||146===n||261===n||149===n||148===n||154===n||262===n||231===n||145===n||226===n||283===n;var n},e.isDeclarationStatement=function(e){return _(e.kind)},e.isStatementButNotDeclaration=function(e){return m(e.kind)},e.isStatement=function(t){var n=t.kind;return m(n)||_(n)||function(t){if(207!==t.kind)return!1;if(void 0!==t.parent&&(224===t.parent.kind||260===t.parent.kind))return!1;return!e.isFunctionBlock(t)}(t)},e.isModuleReference=function(e){var t=e.kind;return 248===t||143===t||71===t},e.isJsxTagNameExpression=function(e){var t=e.kind;return 99===t||71===t||179===t},e.isJsxChild=function(e){var t=e.kind;return 249===t||256===t||250===t||10===t},e.isJsxAttributeLike=function(e){var t=e.kind;return 253===t||255===t},e.isStringLiteralOrJsxExpression=function(e){var t=e.kind;return 9===t||256===t},e.isJsxOpeningLikeElement=function(e){var t=e.kind;return 251===t||250===t},e.isCaseOrDefaultClause=function(e){var t=e.kind;return 257===t||258===t},e.isJSDocNode=function(e){return e.kind>=267&&e.kind<=285},e.isJSDocCommentContainingNode=function(e){return 275===e.kind||g(e)},e.isJSDocTag=g,e.isSetAccessor=function(e){return 154===e.kind},e.isGetAccessor=function(e){return 153===e.kind},e.hasJSDocNodes=function(e){return!!e.jsDoc&&e.jsDoc.length>0}}(ts||(ts={})),function(e){var t,n,r,i,a,o,s;function c(e,t){return t&&e(t)}function l(e,t,n){if(n){if(t)return t(n);for(var r=0,i=n;r<i.length;r++){var a=e(i[r]);if(a)return a}}}function u(e,t,n){if(e&&!(e.kind<=142))switch(e.kind){case 143:return c(t,e.left)||c(t,e.right);case 145:return c(t,e.name)||c(t,e.constraint)||c(t,e.default)||c(t,e.expression);case 262:return l(t,n,e.decorators)||l(t,n,e.modifiers)||c(t,e.name)||c(t,e.questionToken)||c(t,e.equalsToken)||c(t,e.objectAssignmentInitializer);case 263:return c(t,e.expression);case 146:case 149:case 148:case 261:case 226:case 176:return l(t,n,e.decorators)||l(t,n,e.modifiers)||c(t,e.propertyName)||c(t,e.dotDotDotToken)||c(t,e.name)||c(t,e.questionToken)||c(t,e.type)||c(t,e.initializer);case 160:case 161:case 155:case 156:case 157:return l(t,n,e.decorators)||l(t,n,e.modifiers)||l(t,n,e.typeParameters)||l(t,n,e.parameters)||c(t,e.type);case 151:case 150:case 152:case 153:case 154:case 186:case 228:case 187:return l(t,n,e.decorators)||l(t,n,e.modifiers)||c(t,e.asteriskToken)||c(t,e.name)||c(t,e.questionToken)||l(t,n,e.typeParameters)||l(t,n,e.parameters)||c(t,e.type)||c(t,e.equalsGreaterThanToken)||c(t,e.body);case 159:return c(t,e.typeName)||l(t,n,e.typeArguments);case 158:return c(t,e.parameterName)||c(t,e.type);case 162:return c(t,e.exprName);case 163:return l(t,n,e.members);case 164:return c(t,e.elementType);case 165:return l(t,n,e.elementTypes);case 166:case 167:return l(t,n,e.types);case 168:case 170:return c(t,e.type);case 171:return c(t,e.objectType)||c(t,e.indexType);case 172:return c(t,e.readonlyToken)||c(t,e.typeParameter)||c(t,e.questionToken)||c(t,e.type);case 173:return c(t,e.literal);case 174:case 175:case 177:return l(t,n,e.elements);case 178:return l(t,n,e.properties);case 179:return c(t,e.expression)||c(t,e.name);case 180:return c(t,e.expression)||c(t,e.argumentExpression);case 181:case 182:return c(t,e.expression)||l(t,n,e.typeArguments)||l(t,n,e.arguments);case 183:return c(t,e.tag)||c(t,e.template);case 184:return c(t,e.type)||c(t,e.expression);case 185:case 188:case 189:case 190:return c(t,e.expression);case 192:return c(t,e.operand);case 197:return c(t,e.asteriskToken)||c(t,e.expression);case 191:return c(t,e.expression);case 193:return c(t,e.operand);case 194:return c(t,e.left)||c(t,e.operatorToken)||c(t,e.right);case 202:return c(t,e.expression)||c(t,e.type);case 203:return c(t,e.expression);case 204:return c(t,e.name);case 195:return c(t,e.condition)||c(t,e.questionToken)||c(t,e.whenTrue)||c(t,e.colonToken)||c(t,e.whenFalse);case 198:return c(t,e.expression);case 207:case 234:return l(t,n,e.statements);case 265:return l(t,n,e.statements)||c(t,e.endOfFileToken);case 208:return l(t,n,e.decorators)||l(t,n,e.modifiers)||c(t,e.declarationList);case 227:return l(t,n,e.declarations);case 210:return c(t,e.expression);case 211:return c(t,e.expression)||c(t,e.thenStatement)||c(t,e.elseStatement);case 212:return c(t,e.statement)||c(t,e.expression);case 213:return c(t,e.expression)||c(t,e.statement);case 214:return c(t,e.initializer)||c(t,e.condition)||c(t,e.incrementor)||c(t,e.statement);case 215:return c(t,e.initializer)||c(t,e.expression)||c(t,e.statement);case 216:return c(t,e.awaitModifier)||c(t,e.initializer)||c(t,e.expression)||c(t,e.statement);case 217:case 218:return c(t,e.label);case 219:return c(t,e.expression);case 220:return c(t,e.expression)||c(t,e.statement);case 221:return c(t,e.expression)||c(t,e.caseBlock);case 235:return l(t,n,e.clauses);case 257:return c(t,e.expression)||l(t,n,e.statements);case 258:return l(t,n,e.statements);case 222:return c(t,e.label)||c(t,e.statement);case 223:return c(t,e.expression);case 224:return c(t,e.tryBlock)||c(t,e.catchClause)||c(t,e.finallyBlock);case 260:return c(t,e.variableDeclaration)||c(t,e.block);case 147:return c(t,e.expression);case 229:case 199:case 230:return l(t,n,e.decorators)||l(t,n,e.modifiers)||c(t,e.name)||l(t,n,e.typeParameters)||l(t,n,e.heritageClauses)||l(t,n,e.members);case 231:return l(t,n,e.decorators)||l(t,n,e.modifiers)||c(t,e.name)||l(t,n,e.typeParameters)||c(t,e.type);case 232:return l(t,n,e.decorators)||l(t,n,e.modifiers)||c(t,e.name)||l(t,n,e.members);case 264:return c(t,e.name)||c(t,e.initializer);case 233:return l(t,n,e.decorators)||l(t,n,e.modifiers)||c(t,e.name)||c(t,e.body);case 237:return l(t,n,e.decorators)||l(t,n,e.modifiers)||c(t,e.name)||c(t,e.moduleReference);case 238:return l(t,n,e.decorators)||l(t,n,e.modifiers)||c(t,e.importClause)||c(t,e.moduleSpecifier);case 239:return c(t,e.name)||c(t,e.namedBindings);case 236:case 240:return c(t,e.name);case 241:case 245:return l(t,n,e.elements);case 244:return l(t,n,e.decorators)||l(t,n,e.modifiers)||c(t,e.exportClause)||c(t,e.moduleSpecifier);case 242:case 246:return c(t,e.propertyName)||c(t,e.name);case 243:return l(t,n,e.decorators)||l(t,n,e.modifiers)||c(t,e.expression);case 196:return c(t,e.head)||l(t,n,e.templateSpans);case 205:return c(t,e.expression)||c(t,e.literal);case 144:return c(t,e.expression);case 259:return l(t,n,e.types);case 201:return c(t,e.expression)||l(t,n,e.typeArguments);case 248:return c(t,e.expression);case 247:return l(t,n,e.decorators);case 289:return l(t,n,e.elements);case 249:return c(t,e.openingElement)||l(t,n,e.children)||c(t,e.closingElement);case 250:case 251:return c(t,e.tagName)||c(t,e.attributes);case 254:return l(t,n,e.properties);case 253:return c(t,e.name)||c(t,e.initializer);case 255:return c(t,e.expression);case 256:return c(t,e.dotDotDotToken)||c(t,e.expression);case 252:return c(t,e.tagName);case 267:case 271:case 270:case 272:return c(t,e.type);case 273:return l(t,n,e.parameters)||c(t,e.type);case 274:return c(t,e.type);case 275:return l(t,n,e.tags);case 279:case 284:return e.isNameFirst?c(t,e.name)||c(t,e.typeExpression):c(t,e.typeExpression)||c(t,e.name);case 280:case 281:return c(t,e.typeExpression);case 277:return c(t,e.class);case 282:return l(t,n,e.typeParameters);case 283:return e.typeExpression&&267===e.typeExpression.kind?c(t,e.typeExpression)||c(t,e.fullName):c(t,e.fullName)||c(t,e.typeExpression);case 285:if(e.jsDocPropertyTags)for(var r=0,i=e.jsDocPropertyTags;r<i.length;r++){c(t,i[r])}return;case 288:return c(t,e.expression)}}!function(e){e[e.None=0]="None",e[e.Yield=1]="Yield",e[e.Await=2]="Await",e[e.Type=4]="Type",e[e.RequireCompleteParameterList=8]="RequireCompleteParameterList",e[e.IgnoreMissingOpenBrace=16]="IgnoreMissingOpenBrace",e[e.JSDoc=32]="JSDoc"}(t||(t={})),e.createNode=function(t,o,s){return 265===t?new(a||(a=e.objectAllocator.getSourceFileConstructor()))(t,o,s):71===t?new(i||(i=e.objectAllocator.getIdentifierConstructor()))(t,o,s):e.isNodeKind(t)?new(n||(n=e.objectAllocator.getNodeConstructor()))(t,o,s):new(r||(r=e.objectAllocator.getTokenConstructor()))(t,o,s)},e.forEachChild=u,e.createSourceFile=function(t,n,r,i,a){void 0===i&&(i=!1),e.performance.mark("beforeParse");var s=o.parseSourceFile(t,n,r,void 0,i,a);return e.performance.mark("afterParse"),e.performance.measure("Parse","beforeParse","afterParse"),s},e.parseIsolatedEntityName=function(e,t){return o.parseIsolatedEntityName(e,t)},e.parseJsonText=function(e,t){return o.parseJsonText(e,t)},e.isExternalModule=function(e){return void 0!==e.externalModuleIndicator},e.updateSourceFile=function(e,t,n,r){var i=s.updateSourceFile(e,t,n,r);return i.flags|=524288&e.flags,i},e.parseIsolatedJSDocComment=function(e,t,n){var r=o.JSDocParser.parseIsolatedJSDocComment(e,t,n);return r&&r.jsDoc&&o.fixupParentReferences(r.jsDoc),r},e.parseJSDocTypeExpressionForTests=function(e,t,n){return o.JSDocParser.parseJSDocTypeExpressionForTests(e,t,n)},function(t){var n,r,i,a,o,s,c,l,d,p,f,_,m,g,h,y,v,b=e.createScanner(5,!0),x=10240,k=!1;function S(e){return 4===e||2===e||1===e||6===e?1:0}function T(t,o,l,u){n=e.objectAllocator.getNodeConstructor(),r=e.objectAllocator.getTokenConstructor(),i=e.objectAllocator.getIdentifierConstructor(),a=e.objectAllocator.getSourceFileConstructor(),d=t,c=l,s=[],m=0,f=e.createMap(),_=0,p=0,g=1===u||2===u||6===u?65536:0,k=!1,b.setText(d),b.setOnError(q),b.setScriptTarget(o),b.setLanguageVariant(S(u))}function C(){b.setText(""),b.setOnError(void 0),s=void 0,o=void 0,f=void 0,c=void 0,d=void 0}function E(t){var n=e.getJSDocCommentRanges(t,o.text);if(n)for(var r=0,i=n;r<i.length;r++){var a=i[r],s=v.parseJSDocComment(t,a.pos,a.end-a.pos);s&&(t.jsDoc||(t.jsDoc=[]),t.jsDoc.push(s))}return t}function D(t){var n=t;return void u(t,(function t(r){if(r.parent!==n){r.parent=n;var i=n;if(n=r,u(r,t),e.hasJSDocNodes(r))for(var a=0,o=r.jsDoc;a<o.length;a++){var s=o[a];s.parent=r,n=s,u(s,t)}n=i}}))}function A(t,n,r){var i=new a(265,0,d.length);return p++,i.text=d,i.bindDiagnostics=[],i.languageVersion=n,i.fileName=e.normalizePath(t),i.languageVariant=S(r),i.isDeclarationFile=e.fileExtensionIs(i.fileName,".d.ts"),i.scriptKind=r,i}function w(e,t){e?g|=t:g&=~t}function N(e){w(e,2048)}function I(e){w(e,4096)}function P(e){w(e,8192)}function O(e){w(e,16384)}function F(e,t){var n=e&g;if(n){w(!1,n);var r=t();return w(!0,n),r}return t()}function L(e,t){var n=e&~g;if(n){w(!0,n);var r=t();return w(!1,n),r}return t()}function R(e){return F(2048,e)}function M(e){return L(16384,e)}function U(e){return 0!=(g&e)}function B(){return U(4096)}function j(){return U(2048)}function $(){return U(8192)}function K(){return U(16384)}function z(e,t){var n=b.getTokenPos();J(n,b.getTextPos()-n,e,t)}function J(t,n,r,i){var a=e.lastOrUndefined(s);a&&t===a.start||s.push(e.createFileDiagnostic(o,t,n,r,i)),k=!0}function q(e,t){J(b.getTextPos(),t||0,e)}function V(){return b.getStartPos()}function H(){return l}function G(){return l=b.scan()}function W(){return l=b.reScanGreaterToken()}function Q(){return l=b.scanJsxIdentifier()}function Y(){return l=b.scanJsxToken()}function X(t,n){var r=l,i=s.length,a=k,o=g,c=n?b.lookAhead(t):b.tryScan(t);return e.Debug.assert(o===g),c&&!n||(l=r,s.length=i,k=a),c}function Z(e){return X(e,!0)}function ee(e){return X(e,!1)}function te(){return 71===H()||(116!==H()||!B())&&((121!==H()||!K())&&H()>107)}function ne(t,n,r){return void 0===r&&(r=!0),H()===t?(r&&G(),!0):(n?z(n):z(e.Diagnostics._0_expected,e.tokenToString(t)),!1)}function re(e){return H()===e&&(G(),!0)}function ie(e){if(H()===e)return oe()}function ae(e,t,n,r){return ie(e)||pe(e,t,n,r)}function oe(){var e=le(H());return G(),de(e)}function se(){return 25===H()||(18===H()||1===H()||b.hasPrecedingLineBreak())}function ce(){return se()?(25===H()&&G(),!0):ne(25)}function le(t,a){return p++,a>=0||(a=b.getStartPos()),e.isNodeKind(t)?new n(t,a,a):71===t?new i(t,a,a):new r(t,a,a)}function ue(e,t,n){var r=e.length,i=r>=1&&r<=4?e.slice():e;return i.pos=t,i.end=void 0===n?b.getStartPos():n,i}function de(e,t){return e.end=void 0===t?b.getStartPos():t,g&&(e.flags|=g),k&&(k=!1,e.flags|=32768),e}function pe(t,n,r,i){n?J(b.getStartPos(),0,r,i):z(r,i);var a=le(t,b.getStartPos());return 71===t?a.escapedText="":(e.isLiteralKind(t)||e.isTemplateLiteralKind(t))&&(a.text=""),de(a)}function fe(e){var t=f.get(e);return void 0===t&&f.set(e,t=e),t}function _e(t,n){if(_++,t){var r=le(71);return 71!==H()&&(r.originalKeywordKind=H()),r.escapedText=e.escapeLeadingUnderscores(fe(b.getTokenValue())),G(),de(r)}return pe(71,1===H(),n||e.Diagnostics.Identifier_expected)}function me(e){return _e(te(),e)}function ge(t){return _e(e.tokenIsIdentifierOrKeyword(H()),t)}function he(){return e.tokenIsIdentifierOrKeyword(H())||9===H()||8===H()}function ye(e){if(9===H()||8===H()){var t=Je();return t.text=fe(t.text),t}return e&&21===H()?function(){var e=le(144);return ne(21),e.expression=R(Nt),ne(22),de(e)}():ge()}function ve(){return ye(!0)}function be(e){return H()===e&&ee(ke)}function xe(){return G(),!b.hasPrecedingLineBreak()&&Se()}function ke(){return 76===H()?83===G():84===H()?(G(),79===H()?Z(Te):39!==H()&&118!==H()&&17!==H()&&Se()):79===H()?Te():115===H()?(G(),Se()):xe()}function Se(){return 21===H()||17===H()||39===H()||24===H()||he()}function Te(){return G(),75===H()||89===H()||109===H()||117===H()&&Z(bn)||120===H()&&Z(xn)}function Ce(t,n){if(Fe(t))return!0;switch(t){case 0:case 1:case 3:return!(25===H()&&n)&&Cn();case 2:return 73===H()||79===H();case 4:return Z(ot);case 5:return Z(qn)||25===H()&&!n;case 6:return 21===H()||he();case 12:return 21===H()||39===H()||24===H()||he();case 17:return he();case 9:return 21===H()||24===H()||he();case 7:return 17===H()?Z(Ee):n?te()&&!we():At()&&!we();case 8:return On();case 10:return 26===H()||24===H()||On();case 18:return te();case 11:case 15:return 26===H()||24===H()||wt();case 16:return Xe();case 19:case 20:return 26===H()||ht();case 21:return nr();case 22:return e.tokenIsIdentifierOrKeyword(H());case 13:return e.tokenIsIdentifierOrKeyword(H())||17===H();case 14:return!0}e.Debug.fail("Non-exhaustive case in 'isListElement'.")}function Ee(){if(e.Debug.assert(17===H()),18===G()){var t=G();return 26===t||17===t||85===t||108===t}return!0}function De(){return G(),te()}function Ae(){return G(),e.tokenIsIdentifierOrKeyword(H())}function we(){return(108===H()||85===H())&&Z(Ne)}function Ne(){return G(),wt()}function Ie(e){if(1===H())return!0;switch(e){case 1:case 2:case 4:case 5:case 6:case 12:case 9:case 22:return 18===H();case 3:return 18===H()||73===H()||79===H();case 7:return 17===H()||85===H()||108===H();case 8:return function(){if(se())return!0;if(jt(H()))return!0;if(36===H())return!0;return!1}();case 18:return 29===H()||19===H()||17===H()||85===H()||108===H();case 11:return 20===H()||25===H();case 15:case 20:case 10:return 22===H();case 16:case 17:return 20===H()||22===H();case 19:return 26!==H();case 21:return 17===H()||18===H();case 13:return 29===H()||41===H();case 14:return 27===H()&&Z(cr)}}function Pe(e,t){var n=m;m|=1<<e;for(var r=[],i=V();!Ie(e);)if(Ce(e,!1)){var a=Oe(e,t);r.push(a)}else if(Le(e))break;return m=n,ue(r,i)}function Oe(e,t){var n=Fe(e);return n?function(e){return b.setTextPos(e.end),G(),e}(n):t()}function Fe(t){if(!k&&c){var n=c.currentNode(b.getStartPos());if(!e.nodeIsMissing(n))if(!n.intersectsChange)if(!e.containsParseError(n))if((96256&n.flags)===g&&function(e,t){switch(t){case 5:return function(e){if(e)switch(e.kind){case 152:case 157:case 153:case 154:case 149:case 206:return!0;case 151:var t=e;return!(71===t.name.kind&&123===t.name.originalKeywordKind)}return!1}(e);case 2:return function(e){if(e)switch(e.kind){case 257:case 258:return!0}return!1}(e);case 0:case 1:case 3:return function(e){if(e)switch(e.kind){case 228:case 208:case 207:case 211:case 210:case 223:case 219:case 221:case 218:case 217:case 215:case 216:case 214:case 213:case 220:case 209:case 224:case 222:case 212:case 225:case 238:case 237:case 244:case 243:case 233:case 229:case 230:case 232:case 231:return!0}return!1}(e);case 6:return function(e){return 264===e.kind}(e);case 4:return function(e){if(e)switch(e.kind){case 156:case 150:case 157:case 148:case 155:return!0}return!1}(e);case 8:return function(e){if(226!==e.kind)return!1;return void 0===e.initializer}(e);case 16:return function(e){if(146!==e.kind)return!1;return void 0===e.initializer}(e);case 17:return!1}return!1}(n,t))return n}}function Le(t){return z(function(t){switch(t){case 0:case 1:return e.Diagnostics.Declaration_or_statement_expected;case 2:return e.Diagnostics.case_or_default_expected;case 3:return e.Diagnostics.Statement_expected;case 17:case 4:return e.Diagnostics.Property_or_signature_expected;case 5:return e.Diagnostics.Unexpected_token_A_constructor_method_accessor_or_property_was_expected;case 6:return e.Diagnostics.Enum_member_expected;case 7:return e.Diagnostics.Expression_expected;case 8:return e.Diagnostics.Variable_declaration_expected;case 9:return e.Diagnostics.Property_destructuring_pattern_expected;case 10:return e.Diagnostics.Array_element_destructuring_pattern_expected;case 11:return e.Diagnostics.Argument_expression_expected;case 12:return e.Diagnostics.Property_assignment_expected;case 15:return e.Diagnostics.Expression_or_comma_expected;case 16:return e.Diagnostics.Parameter_declaration_expected;case 18:return e.Diagnostics.Type_parameter_declaration_expected;case 19:return e.Diagnostics.Type_argument_expected;case 20:return e.Diagnostics.Type_expected;case 21:return e.Diagnostics.Unexpected_token_expected;case 22:case 13:case 14:return e.Diagnostics.Identifier_expected}}(t)),!!function(){for(var e=0;e<23;e++)if(m&1<<e&&(Ce(e,!0)||Ie(e)))return!0;return!1}()||(G(),!1)}function Re(e,t,n){var r=m;m|=1<<e;for(var i=[],a=V(),o=-1;;)if(Ce(e,!1)){var s=b.getStartPos();if(i.push(Oe(e,t)),o=b.getTokenPos(),re(26))continue;if(o=-1,Ie(e))break;ne(26),n&&25===H()&&!b.hasPrecedingLineBreak()&&G(),s===b.getStartPos()&&G()}else{if(Ie(e))break;if(Le(e))break}m=r;var c=ue(i,a);return o>=0&&(c.hasTrailingComma=!0),c}function Me(){return ue([],V())}function Ue(e,t,n,r){if(ne(n)){var i=Re(e,t);return ne(r),i}return Me()}function Be(e,t){for(var n=e?ge(t):me(t),r=b.getStartPos();re(23);){if(27===H()){n.jsdocDotPos=r;break}r=b.getStartPos(),n=je(n,$e(e))}return n}function je(e,t){var n=le(143,e.pos);return n.left=e,n.right=t,de(n)}function $e(t){if(b.hasPrecedingLineBreak()&&e.tokenIsIdentifierOrKeyword(H())&&Z(vn))return pe(71,!0,e.Diagnostics.Identifier_expected);return t?ge():me()}function Ke(){var t,n=le(196);n.head=(t=qe(H()),e.Debug.assert(14===t.kind,"Template head has wrong token kind"),t),e.Debug.assert(14===n.head.kind,"Template head has wrong token kind");var r=[],i=V();do{r.push(ze())}while(15===e.lastOrUndefined(r).literal.kind);return n.templateSpans=ue(r,i),de(n)}function ze(){var t,n,r=le(205);return r.expression=R(Nt),18===H()?(l=b.reScanTemplateToken(),n=qe(H()),e.Debug.assert(15===n.kind||16===n.kind,"Template fragment has wrong token kind"),t=n):t=ae(16,!1,e.Diagnostics._0_expected,e.tokenToString(18)),r.literal=t,de(r)}function Je(){return qe(H())}function qe(e){var t=le(e),n=b.getTokenValue();return t.text=n,b.hasExtendedUnicodeEscape()&&(t.hasExtendedUnicodeEscape=!0),b.isUnterminated()&&(t.isUnterminated=!0),8===t.kind&&(t.numericLiteralFlags=b.getNumericLiteralFlags()),G(),de(t),t}function Ve(){var t=le(159);return t.typeName=Be(!0,e.Diagnostics.Type_expected),b.hasPrecedingLineBreak()||27!==H()||(t.typeArguments=Ue(19,Ct,27,29)),de(t)}function He(){var e=le(146);return 99!==H()&&94!==H()||(e.name=ge(),ne(56)),e.type=Ct(),de(e)}function Ge(e){var t=le(e);return G(),t.type=gt(),de(t)}function We(){var e=le(145);return e.name=me(),re(85)&&(ht()||!wt()?e.constraint=Ct():e.expression=qt()),re(58)&&(e.default=Ct()),de(e)}function Qe(){if(27===H())return Ue(18,We,27,29)}function Ye(){if(re(56))return Ct()}function Xe(){return 24===H()||On()||e.isModifierKind(H())||57===H()||ht(!0)}function Ze(t){var n=le(146);return 99===H()?(n.name=_e(!0),n.type=Ye(),de(n)):(n.decorators=Vn(),n.modifiers=Hn(),n.dotDotDotToken=ie(24),n.name=Fn(),0===e.getFullWidth(n.name)&&!e.hasModifiers(n)&&e.isModifierKind(H())&&G(),n.questionToken=ie(55),n.type=Ye(),n.initializer=It(!0,t),E(de(n)))}function et(t,n,r){32&n||(r.typeParameters=Qe()),r.parameters=function(e){if(ne(19)){var t=B(),n=K();I(!!(1&e)),O(!!(2&e));var r=Re(16,32&e?He:function(){return Ze(!!(8&e))});if(I(t),O(n),!ne(20)&&8&e)return;return r}return 8&e?void 0:Me()}(n),r.type=function(t,n){return function(t,n){if(36===t)return ne(t),!0;if(re(56))return!0;if(n&&36===H())return z(e.Diagnostics._0_expected,e.tokenToString(56)),G(),!0;return!1}(t,n)?function(){var e=te()&&ee(Tt),t=Ct();if(e){var n=le(158,e.pos);return n.parameterName=e,n.type=t,de(n)}return t}():void 0}(t,!!(4&n))}function tt(){re(26)||ce()}function nt(e){var t=le(e);return 156===e&&ne(94),et(56,4,t),tt(),E(de(t))}function rt(){return 21===H()&&Z(it)}function it(){if(G(),24===H()||22===H())return!0;if(e.isModifierKind(H())){if(G(),te())return!0}else{if(!te())return!1;G()}return 56===H()||26===H()||55===H()&&(G(),56===H()||26===H()||22===H())}function at(e,t,n){var r=le(157,e);return r.decorators=t,r.modifiers=n,r.parameters=Ue(16,Ze,21,22),r.type=Dt(),tt(),E(de(r))}function ot(){if(19===H()||27===H())return!0;for(var t;e.isModifierKind(H());)t=!0,G();return 21===H()||(he()&&(t=!0,G()),!!t&&(19===H()||27===H()||55===H()||56===H()||26===H()||se()))}function st(){if(19===H()||27===H())return nt(155);if(94===H()&&Z(ct))return nt(156);var e=V(),t=Hn();return rt()?at(e,void 0,t):function(e,t){var n=ve(),r=ie(55);if(19===H()||27===H()){var i=le(150,e);return i.modifiers=t,i.name=n,i.questionToken=r,et(56,4,i),tt(),E(de(i))}var a=le(148,e);return a.modifiers=t,a.name=n,a.questionToken=r,a.type=Dt(),58===H()&&(a.initializer=Kn()),tt(),E(de(a))}(e,t)}function ct(){return G(),19===H()||27===H()}function lt(){var e;return ne(17)?(e=Pe(4,st),ne(18)):e=Me(),e}function ut(){return G(),131===H()&&G(),21===H()&&De()&&92===G()}function dt(){var e=le(172);return ne(17),e.readonlyToken=ie(131),ne(21),e.typeParameter=function(){var e=le(145);return e.name=me(),ne(92),e.constraint=Ct(),de(e)}(),ne(22),e.questionToken=ie(55),e.type=Dt(),ce(),ne(18),de(e)}function pt(e){var t=le(e);return 161===e&&ne(94),et(36,4,t),E(de(t))}function ft(){var e=oe();return 23===H()?void 0:e}function _t(e){var t,n=le(173);e&&((t=le(192)).operator=38,G());var r=101===H()||86===H()?oe():qe(H());return e&&(t.operand=r,de(t),r=t),n.literal=r,de(n)}function mt(){return 8===G()}function gt(){switch(H()){case 119:case 136:case 133:case 122:case 137:case 139:case 130:case 134:return ee(ft)||Ve();case 39:return n=le(268),G(),de(n);case 55:return function(){var e,t=b.getStartPos();return G(),26===H()||18===H()||20===H()||29===H()||58===H()||49===H()?de(e=le(269,t)):((e=le(270,t)).type=Ct(),de(e))}();case 89:return function(){if(Z(sr)){var e=le(273);return G(),et(56,36,e),E(de(e))}var t=le(159);return t.typeName=ge(),de(t)}();case 24:return Ge(274);case 51:return Ge(271);case 13:case 9:case 8:case 101:case 86:return _t();case 38:return Z(mt)?_t(!0):Ve();case 105:case 95:return oe();case 99:var e=(t=le(169),G(),de(t));return 126!==H()||b.hasPrecedingLineBreak()?e:function(e){G();var t=le(158,e.pos);return t.parameterName=e,t.type=Ct(),de(t)}(e);case 103:return function(){var e=le(162);return ne(103),e.exprName=Be(!0),de(e)}();case 17:return Z(ut)?dt():function(){var e=le(163);return e.members=lt(),de(e)}();case 21:return function(){var e=le(165);return e.elementTypes=Ue(20,Ct,21,22),de(e)}();case 19:return function(){var e=le(168);return ne(19),e.type=Ct(),ne(20),de(e)}();default:return Ve()}var t,n}function ht(e){switch(H()){case 119:case 136:case 133:case 122:case 137:case 105:case 139:case 95:case 99:case 103:case 130:case 17:case 21:case 27:case 49:case 48:case 94:case 9:case 8:case 101:case 86:case 134:case 39:case 55:case 51:case 24:return!0;case 38:return!e&&Z(mt);case 19:return!e&&Z(yt);default:return te()}}function yt(){return G(),20===H()||Xe()||ht()}function vt(e,t){G();var n=le(e,t.pos);return n.type=t,de(n)}function bt(){switch(H()){case 127:return e=127,t=le(170),ne(e),t.operator=e,t.type=bt(),de(t)}var e,t;return function(){for(var e=gt();!b.hasPrecedingLineBreak();)switch(H()){case 58:if(!(1048576&g))return e;e=vt(272,e);break;case 51:e=vt(271,e);break;case 55:e=vt(270,e);break;case 21:var t;ne(21),ht()?((t=le(171,e.pos)).objectType=e,t.indexType=Ct(),ne(22),e=de(t)):((t=le(164,e.pos)).elementType=e,ne(22),e=de(t));break;default:return e}return e}()}function xt(e,t,n){re(n);var r=t();if(H()===n){for(var i=[r];re(n);)i.push(t());var a=le(e,r.pos);a.types=ue(i,r.pos),r=de(a)}return r}function kt(){return xt(167,bt,48)}function St(){if(G(),20===H()||24===H())return!0;if(function(){if(e.isModifierKind(H())&&Hn(),te()||99===H())return G(),!0;if(21===H()||17===H()){var t=s.length;return Fn(),t===s.length}return!1}()){if(56===H()||26===H()||55===H()||58===H())return!0;if(20===H()&&(G(),36===H()))return!0}return!1}function Tt(){var e=me();if(126===H()&&!b.hasPrecedingLineBreak())return G(),e}function Ct(){return F(20480,Et)}function Et(){return 27===H()||19===H()&&Z(St)?pt(160):94===H()?pt(161):xt(166,kt,49)}function Dt(){return re(56)?Ct():void 0}function At(){switch(H()){case 99:case 97:case 95:case 101:case 86:case 8:case 9:case 13:case 14:case 19:case 21:case 17:case 89:case 75:case 94:case 41:case 63:case 71:return!0;case 91:return Z(ct);default:return te()}}function wt(){if(At())return!0;switch(H()){case 37:case 38:case 52:case 51:case 80:case 103:case 105:case 43:case 44:case 27:case 121:case 116:return!0;default:return!!function(){if(j()&&92===H())return!1;return Kt()>0}()||te()}}function Nt(){var e=$();e&&P(!1);for(var t,n=Pt();t=ie(26);)n=zt(n,t,Pt());return e&&P(!0),n}function It(t,n){if(58!==H()){if(b.hasPrecedingLineBreak()||t&&17===H()||!wt())return;if(t&&n){var r=pe(71,!0,e.Diagnostics._0_expected,"=");return r.escapedText="= not found",r}}return ne(58),Pt()}function Pt(){if(function(){if(116===H())return!!B()||Z(kn);return!1}())return t=le(197),G(),b.hasPrecedingLineBreak()||39!==H()&&!wt()||(t.asteriskToken=ie(39),t.expression=Pt()),de(t);var t,n=function(){var t=function(){if(19===H()||27===H()||120===H())return Z(Ft);if(36===H())return 1;return 0}();if(0===t)return;var n=1===t?Mt(!0):ee(Lt);if(!n)return;var r=e.hasModifier(n,256),i=H();return n.equalsGreaterThanToken=ae(36,!1,e.Diagnostics._0_expected,"=>"),n.body=36===i||17===i?Ut(r):me(),E(de(n))}()||function(){if(120===H()&&1===Z(Rt)){var e=Gn();return Ot(Bt(0),e)}return}();if(n)return n;var r=Bt(0);return 71===r.kind&&36===H()?Ot(r):e.isLeftHandSideExpression(r)&&e.isAssignmentOperator(W())?zt(r,oe(),Pt()):function(t){var n=ie(55);if(!n)return t;var r=le(195,t.pos);return r.condition=t,r.questionToken=n,r.whenTrue=F(x,Pt),r.colonToken=ae(56,!1,e.Diagnostics._0_expected,e.tokenToString(56)),r.whenFalse=Pt(),de(r)}(r)}function Ot(t,n){var r;e.Debug.assert(36===H(),"parseSimpleArrowFunctionExpression should only have been called if we had a =>"),n?(r=le(187,n.pos)).modifiers=n:r=le(187,t.pos);var i=le(146,t.pos);return i.name=t,de(i),r.parameters=ue([i],i.pos,i.end),r.equalsGreaterThanToken=ae(36,!1,e.Diagnostics._0_expected,"=>"),r.body=Ut(!!n),E(de(r))}function Ft(){if(120===H()){if(G(),b.hasPrecedingLineBreak())return 0;if(19!==H()&&27!==H())return 0}var t=H(),n=G();if(19===t){if(20===n)switch(G()){case 36:case 56:case 17:return 1;default:return 0}return 21===n||17===n?2:24===n?1:te()?56===G()?1:2:0}return e.Debug.assert(27===t),te()?1===o.languageVariant?Z((function(){var e=G();if(85===e)switch(G()){case 58:case 29:return!1;default:return!0}else if(26===e)return!0;return!1}))?1:0:2:0}function Lt(){return Mt(!1)}function Rt(){if(120===H()){if(G(),b.hasPrecedingLineBreak()||36===H())return 0;var e=Bt(0);if(!b.hasPrecedingLineBreak()&&71===e.kind&&36===H())return 1}return 0}function Mt(t){var n=le(187);if(n.modifiers=Gn(),et(56,(e.hasModifier(n,256)?2:0)|(t?0:8),n),n.parameters&&(t||!(36!==H()&&17!==H()||e.find(n.parameters,(function(t){return t.initializer&&e.isIdentifier(t.initializer)&&"= not found"===t.initializer.escapedText})))))return n}function Ut(e){return 17===H()?_n(e?2:0):25===H()||89===H()||75===H()||!Cn()||17!==H()&&89!==H()&&75!==H()&&57!==H()&&wt()?e?M(Pt):F(16384,Pt):_n(16|(e?2:0))}function Bt(e){return $t(e,qt())}function jt(e){return 92===e||142===e}function $t(e,t){for(;;){W();var n=Kt();if(!(40===H()?n>=e:n>e))break;if(92===H()&&j())break;if(118===H()){if(b.hasPrecedingLineBreak())break;G(),t=Jt(t,Ct())}else t=zt(t,oe(),Bt(n))}return t}function Kt(){switch(H()){case 54:return 1;case 53:return 2;case 49:return 3;case 50:return 4;case 48:return 5;case 32:case 33:case 34:case 35:return 6;case 27:case 29:case 30:case 31:case 93:case 92:case 118:return 7;case 45:case 46:case 47:return 8;case 37:case 38:return 9;case 39:case 41:case 42:return 10;case 40:return 11}return-1}function zt(e,t,n){var r=le(194,e.pos);return r.left=e,r.operatorToken=t,r.right=n,de(r)}function Jt(e,t){var n=le(202,e.pos);return n.expression=e,n.type=t,de(n)}function qt(){if(function(){switch(H()){case 37:case 38:case 52:case 51:case 80:case 103:case 105:case 121:return!1;case 27:if(1!==o.languageVariant)return!1;default:return!0}}()){var t=Ht();return 40===H()?$t(Kt(),t):t}var n=H(),r=Vt();if(40===H()){var i=e.skipTrivia(d,r.pos);184===r.kind?J(i,r.end-i,e.Diagnostics.A_type_assertion_expression_is_not_allowed_in_the_left_hand_side_of_an_exponentiation_expression_Consider_enclosing_the_expression_in_parentheses):J(i,r.end-i,e.Diagnostics.An_unary_expression_with_the_0_operator_is_not_allowed_in_the_left_hand_side_of_an_exponentiation_expression_Consider_enclosing_the_expression_in_parentheses,e.tokenToString(n))}return r}function Vt(){switch(H()){case 37:case 38:case 52:case 51:return(e=le(192)).operator=H(),G(),e.operand=Vt(),de(e);case 80:return function(){var e=le(188);return G(),e.expression=Vt(),de(e)}();case 103:return function(){var e=le(189);return G(),e.expression=Vt(),de(e)}();case 105:return function(){var e=le(190);return G(),e.expression=Vt(),de(e)}();case 27:return function(){var e=le(184);return ne(27),e.type=Ct(),ne(29),e.expression=Vt(),de(e)}();case 121:if(121===H()&&(K()||Z(kn)))return function(){var e=le(191);return G(),e.expression=Vt(),de(e)}();default:return Ht()}var e}function Ht(){if(43===H()||44===H())return(t=le(192)).operator=H(),G(),t.operand=Gt(),de(t);if(1===o.languageVariant&&27===H()&&Z(Ae))return Yt(!0);var t,n=Gt();return e.Debug.assert(e.isLeftHandSideExpression(n)),43!==H()&&44!==H()||b.hasPrecedingLineBreak()?n:((t=le(193,n.pos)).operand=n,t.operator=H(),G(),de(t))}function Gt(){var t;return 91===H()&&Z(ct)?(o.flags|=524288,t=oe()):t=97===H()?function(){var t=oe();if(19===H()||23===H()||21===H())return t;var n=le(179,t.pos);return n.expression=t,ae(23,!1,e.Diagnostics.super_must_be_followed_by_an_argument_list_or_member_access),n.name=$e(!0),de(n)}():Wt(),function(e){for(;;)if(e=nn(e),27!==H()){if(19!==H())return e;(t=le(181,e.pos)).expression=e,t.arguments=rn(),e=de(t)}else{var t,n=ee(an);if(!n)return e;(t=le(181,e.pos)).expression=e,t.typeArguments=n,t.arguments=rn(),e=de(t)}}(t)}function Wt(){return nn(function(){switch(H()){case 8:case 9:case 13:return Je();case 99:case 97:case 95:case 101:case 86:return oe();case 19:return t=le(185),ne(19),t.expression=R(Nt),ne(20),E(de(t));case 21:return function(){var e=le(177);ne(21),b.hasPrecedingLineBreak()&&(e.multiLine=!0);return e.elements=Re(15,on),ne(22),de(e)}();case 17:return un();case 120:if(!Z(xn))break;return dn();case 75:return Yn(b.getStartPos(),void 0,void 0,199);case 89:return dn();case 94:return function(){var e=b.getStartPos();if(ne(94),re(23)){var t=le(204,e);return t.keywordToken=94,t.name=ge(),de(t)}var n=le(182,e);n.expression=Wt(),n.typeArguments=ee(an),(n.typeArguments||19===H())&&(n.arguments=rn());return de(n)}();case 41:case 63:if(12===(l=b.reScanSlashToken()))return Je();break;case 14:return Ke()}var t;return me(e.Diagnostics.Expression_expected)}())}function Qt(e,t){return e.kind===t.kind&&(71===e.kind?e.escapedText===t.escapedText:99===e.kind||e.name.escapedText===t.name.escapedText&&Qt(e.expression,t.expression))}function Yt(t){var n,r=function(e){var t=b.getStartPos();ne(27);var n,r=Zt(),i=(a=le(254),a.properties=Pe(13,tn),de(a));var a;29===H()?(n=le(251,t),Y()):(ne(41),e?ne(29):(ne(29,void 0,!1),Y()),n=le(250,t));return n.tagName=r,n.attributes=i,de(n)}(t);if(251===r.kind){var i=le(249,r.pos);i.openingElement=r,i.children=function(t){var n=[],r=V(),i=m;m|=16384;for(;l=b.reScanJsxToken(),28!==H();){if(1===H()){J(t.pos,t.end-t.pos,e.Diagnostics.JSX_element_0_has_no_corresponding_closing_tag,e.getTextOfNodeFromSourceText(d,t));break}if(7===H())break;var a=Xt();a&&n.push(a)}return m=i,ue(n,r)}(i.openingElement.tagName),i.closingElement=function(e){var t=le(252);ne(28),t.tagName=Zt(),e?ne(29):(ne(29,void 0,!1),Y());return de(t)}(t),Qt(i.openingElement.tagName,i.closingElement.tagName)||J(i.closingElement.pos,i.closingElement.end-i.closingElement.pos,e.Diagnostics.Expected_corresponding_JSX_closing_tag_for_0,e.getTextOfNodeFromSourceText(d,i.openingElement.tagName)),n=de(i)}else e.Debug.assert(250===r.kind),n=r;if(t&&27===H()){var a=ee((function(){return Yt(!0)}));if(a){z(e.Diagnostics.JSX_expressions_must_have_one_parent_element);var o=le(194,n.pos);return o.end=a.end,o.left=n,o.right=a,o.operatorToken=pe(26,!1,void 0),o.operatorToken.pos=o.operatorToken.end=o.right.pos,o}}return n}function Xt(){switch(H()){case 10:case 11:return(t=le(10,b.getStartPos())).containsOnlyWhiteSpaces=11===l,l=b.scanJsxToken(),de(t);case 17:return en(!1);case 27:return Yt(!1)}var t;e.Debug.fail("Unknown JSX child kind "+H())}function Zt(){Q();for(var e=99===H()?oe():ge();re(23);){var t=le(179,e.pos);t.expression=e,t.name=$e(!0),e=de(t)}return e}function en(e){var t=le(256);return ne(17),18!==H()&&(t.dotDotDotToken=ie(24),t.expression=Pt()),e?ne(18):(ne(18,void 0,!1),Y()),de(t)}function tn(){if(17===H())return function(){var e=le(255);return ne(17),ne(24),e.expression=Nt(),ne(18),de(e)}();Q();var e=le(253);if(e.name=ge(),58===H())switch(l=b.scanJsxAttributeValue()){case 9:e.initializer=Je();break;default:e.initializer=en(!0)}return de(e)}function nn(e){for(;;){if(ie(23)){var t=le(179,e.pos);t.expression=e,t.name=$e(!0),e=de(t)}else if(51!==H()||b.hasPrecedingLineBreak())if($()||!re(21)){if(13!==H()&&14!==H())return e;var n=le(183,e.pos);n.tag=e,n.template=13===H()?Je():Ke(),e=de(n)}else{var r=le(180,e.pos);if(r.expression=e,22!==H()&&(r.argumentExpression=R(Nt),9===r.argumentExpression.kind||8===r.argumentExpression.kind)){var i=r.argumentExpression;i.text=fe(i.text)}ne(22),e=de(r)}else{G();var a=le(203,e.pos);a.expression=e,e=de(a)}}}function rn(){ne(19);var e=Re(11,sn);return ne(20),e}function an(){if(re(27)){var e=Re(19,Ct);if(ne(29))return e&&function(){switch(H()){case 19:case 23:case 20:case 22:case 56:case 25:case 55:case 32:case 34:case 33:case 35:case 53:case 54:case 50:case 48:case 49:case 18:case 1:return!0;case 26:case 17:default:return!1}}()?e:void 0}}function on(){return 24===H()?(e=le(198),ne(24),e.expression=Pt(),de(e)):26===H()?le(200):Pt();var e}function sn(){return F(x,on)}function cn(e,t,n){return be(125)?zn(153,e,t,n):be(135)?zn(154,e,t,n):void 0}function ln(){var e=b.getStartPos();if(ie(24)){var t=le(263,e);return t.expression=Pt(),E(de(t))}var n=Vn(),r=Hn(),i=cn(e,n,r);if(i)return i;var a=ie(39),o=te(),s=ve(),c=ie(55);if(a||19===H()||27===H())return jn(e,n,r,a,s,c);if(o&&(26===H()||18===H()||58===H())){var l=le(262,e);l.name=s,l.questionToken=c;var u=ie(58);return u&&(l.equalsToken=u,l.objectAssignmentInitializer=R(Pt)),E(de(l))}var d=le(261,e);return d.modifiers=r,d.name=s,d.questionToken=c,ne(56),d.initializer=R(Pt),E(de(d))}function un(){var e=le(178);return ne(17),b.hasPrecedingLineBreak()&&(e.multiLine=!0),e.properties=Re(12,ln,!0),ne(18),de(e)}function dn(){var t=$();t&&P(!1);var n=le(186);n.modifiers=Hn(),ne(89),n.asteriskToken=ie(39);var r=n.asteriskToken?1:0,i=e.hasModifier(n,256)?2:0;return n.name=r&&i?L(20480,pn):r?function(e){return L(4096,e)}(pn):i?M(pn):pn(),et(56,r|i,n),n.body=_n(r|i),t&&P(!0),E(de(n))}function pn(){return te()?me():void 0}function fn(e,t){var n=le(207);return ne(17,t)||e?(b.hasPrecedingLineBreak()&&(n.multiLine=!0),n.statements=Pe(1,Dn),ne(18)):n.statements=Me(),de(n)}function _n(e,t){var n=B();I(!!(1&e));var r=K();O(!!(2&e));var i=$();i&&P(!1);var a=fn(!!(16&e),t);return i&&P(!0),I(n),O(r),a}function mn(){var e=V();ne(88);var t=ie(121);ne(19);var n,r=void 0;if(25!==H()&&(r=104===H()||110===H()||76===H()?Rn(!0):L(2048,Nt)),t?ne(142):re(142)){var i=le(216,e);i.awaitModifier=t,i.initializer=r,i.expression=R(Pt),ne(20),n=i}else if(re(92)){var a=le(215,e);a.initializer=r,a.expression=R(Nt),ne(20),n=a}else{var o=le(214,e);o.initializer=r,ne(25),25!==H()&&20!==H()&&(o.condition=R(Nt)),ne(25),20!==H()&&(o.incrementor=R(Nt)),ne(20),n=o}return n.statement=Dn(),de(n)}function gn(e){var t=le(e);return ne(218===e?72:77),se()||(t.label=me()),ce(),de(t)}function hn(){return 73===H()?(e=le(257),ne(73),e.expression=R(Nt),ne(56),e.statements=Pe(3,Dn),de(e)):function(){var e=le(258);return ne(79),ne(56),e.statements=Pe(3,Dn),de(e)}();var e}function yn(){var e=le(224);return ne(102),e.tryBlock=fn(!1),e.catchClause=74===H()?function(){var e=le(260);ne(74),re(19)?(e.variableDeclaration=Ln(),ne(20)):e.variableDeclaration=void 0;return e.block=fn(!1),de(e)}():void 0,e.catchClause&&87!==H()||(ne(87),e.finallyBlock=fn(!1)),de(e)}function vn(){return G(),e.tokenIsIdentifierOrKeyword(H())&&!b.hasPrecedingLineBreak()}function bn(){return G(),75===H()&&!b.hasPrecedingLineBreak()}function xn(){return G(),89===H()&&!b.hasPrecedingLineBreak()}function kn(){return G(),(e.tokenIsIdentifierOrKeyword(H())||8===H()||9===H())&&!b.hasPrecedingLineBreak()}function Sn(){for(;;)switch(H()){case 104:case 110:case 76:case 89:case 75:case 83:return!0;case 109:case 138:return G(),!b.hasPrecedingLineBreak()&&te();case 128:case 129:return wn();case 117:case 120:case 124:case 112:case 113:case 114:case 131:if(G(),b.hasPrecedingLineBreak())return!1;continue;case 141:return G(),17===H()||71===H()||84===H();case 91:return G(),9===H()||39===H()||17===H()||e.tokenIsIdentifierOrKeyword(H());case 84:if(G(),58===H()||39===H()||17===H()||79===H()||118===H())return!0;continue;case 115:G();continue;default:return!1}}function Tn(){return Z(Sn)}function Cn(){switch(H()){case 57:case 25:case 17:case 104:case 110:case 89:case 75:case 83:case 90:case 81:case 106:case 88:case 77:case 72:case 96:case 107:case 98:case 100:case 102:case 78:case 74:case 87:return!0;case 91:return Tn()||Z(ct);case 76:case 84:return Tn();case 120:case 124:case 109:case 128:case 129:case 138:case 141:return!0;case 114:case 112:case 113:case 115:case 131:return Tn()||!Z(vn);default:return wt()}}function En(){return G(),te()||17===H()||21===H()}function Dn(){switch(H()){case 25:return e=le(209),ne(25),de(e);case 17:return fn(!1);case 104:return Un(b.getStartPos(),void 0,void 0);case 110:if(Z(En))return Un(b.getStartPos(),void 0,void 0);break;case 89:return Bn(b.getStartPos(),void 0,void 0);case 75:return Qn(b.getStartPos(),void 0,void 0);case 90:return function(){var e=le(211);return ne(90),ne(19),e.expression=R(Nt),ne(20),e.thenStatement=Dn(),e.elseStatement=re(82)?Dn():void 0,de(e)}();case 81:return function(){var e=le(212);return ne(81),e.statement=Dn(),ne(106),ne(19),e.expression=R(Nt),ne(20),re(25),de(e)}();case 106:return function(){var e=le(213);return ne(106),ne(19),e.expression=R(Nt),ne(20),e.statement=Dn(),de(e)}();case 88:return mn();case 77:return gn(217);case 72:return gn(218);case 96:return function(){var e=le(219);return ne(96),se()||(e.expression=R(Nt)),ce(),de(e)}();case 107:return function(){var e=le(220);return ne(107),ne(19),e.expression=R(Nt),ne(20),e.statement=Dn(),de(e)}();case 98:return function(){var e=le(221);ne(98),ne(19),e.expression=R(Nt),ne(20);var t=le(235,b.getStartPos());return ne(17),t.clauses=Pe(2,hn),ne(18),e.caseBlock=de(t),de(e)}();case 100:return function(){var e=le(223);return ne(100),e.expression=b.hasPrecedingLineBreak()?void 0:R(Nt),ce(),de(e)}();case 102:case 74:case 87:return yn();case 78:return function(){var e=le(225);return ne(78),ce(),de(e)}();case 57:return An();case 120:case 109:case 138:case 128:case 129:case 124:case 76:case 83:case 84:case 91:case 112:case 113:case 114:case 117:case 115:case 131:case 141:if(Tn())return An()}var e;return function(){var e=b.getStartPos(),t=R(Nt);if(71===t.kind&&re(56)){var n=le(222,e);return n.label=t,n.statement=Dn(),E(de(n))}var r=le(210,e);return r.expression=t,ce(),E(de(r))}()}function An(){var t=V(),n=Vn(),r=Hn();switch(H()){case 104:case 110:case 76:return Un(t,n,r);case 89:return Bn(t,n,r);case 75:return Qn(t,n,r);case 109:return function(e,t,n){var r=le(230,e);return r.decorators=t,r.modifiers=n,ne(109),r.name=me(),r.typeParameters=Qe(),r.heritageClauses=Xn(),r.members=lt(),E(de(r))}(t,n,r);case 138:return function(e,t,n){var r=le(231,e);return r.decorators=t,r.modifiers=n,ne(138),r.name=me(),r.typeParameters=Qe(),ne(58),r.type=Ct(),ce(),E(de(r))}(t,n,r);case 83:return function(e,t,n){var r=le(232,e);r.decorators=t,r.modifiers=n,ne(83),r.name=me(),ne(17)?(r.members=Re(6,rr),ne(18)):r.members=Me();return E(de(r))}(t,n,r);case 141:case 128:case 129:return function(e,t,n){var r=0;if(141===H())return or(e,t,n);if(re(129))r|=16;else if(ne(128),9===H())return or(e,t,n);return ar(e,t,n,r)}(t,n,r);case 91:return function(e,t,n){ne(91);var r,i=b.getStartPos();if(te()&&(r=me(),26!==H()&&140!==H()))return function(e,t,n,r){var i=le(237,e);return i.decorators=t,i.modifiers=n,i.name=r,ne(58),i.moduleReference=function(){return 132===H()&&Z(sr)?function(){var e=le(248);return ne(132),ne(19),e.expression=lr(),ne(20),de(e)}():Be(!1)}(),ce(),E(de(i))}(e,t,n,r);var a=le(238,e);a.decorators=t,a.modifiers=n,(r||39===H()||17===H())&&(a.importClause=function(e,t){var n=le(239,t);e&&(n.name=e);n.name&&!re(26)||(n.namedBindings=39===H()?(r=le(240),ne(39),ne(118),r.name=me(),de(r)):ur(241));var r;return de(n)}(r,i),ne(140));return a.moduleSpecifier=lr(),ce(),de(a)}(t,n,r);case 84:switch(G(),H()){case 79:case 58:return function(e,t,n){var r=le(243,e);r.decorators=t,r.modifiers=n,re(58)?r.isExportEquals=!0:ne(79);return r.expression=Pt(),ce(),de(r)}(t,n,r);case 118:return function(e,t,n){var r=le(236,e);return r.decorators=t,r.modifiers=n,ne(118),ne(129),r.name=me(),ce(),de(r)}(t,n,r);default:return function(e,t,n){var r=le(244,e);r.decorators=t,r.modifiers=n,re(39)?(ne(140),r.moduleSpecifier=lr()):(r.exportClause=ur(245),(140===H()||9===H()&&!b.hasPrecedingLineBreak())&&(ne(140),r.moduleSpecifier=lr()));return ce(),de(r)}(t,n,r)}default:if(n||r){var i=pe(247,!0,e.Diagnostics.Declaration_expected);return i.pos=t,i.decorators=n,i.modifiers=r,de(i)}}}function wn(){return G(),!b.hasPrecedingLineBreak()&&(te()||9===H())}function Nn(e,t){if(17===H()||!se())return _n(e,t);ce()}function In(){if(26===H())return le(200);var e=le(176);return e.dotDotDotToken=ie(24),e.name=Fn(),e.initializer=It(!1),de(e)}function Pn(){var e=le(176);e.dotDotDotToken=ie(24);var t=te(),n=ve();return t&&56!==H()?e.name=n:(ne(56),e.propertyName=n,e.name=Fn()),e.initializer=It(!1),de(e)}function On(){return 17===H()||21===H()||te()}function Fn(){return 21===H()?(e=le(175),ne(21),e.elements=Re(10,In),ne(22),de(e)):17===H()?function(){var e=le(174);return ne(17),e.elements=Re(9,Pn),ne(18),de(e)}():me();var e}function Ln(){var e=le(226);return e.name=Fn(),e.type=Dt(),jt(H())||(e.initializer=Kn()),de(e)}function Rn(t){var n=le(227);switch(H()){case 104:break;case 110:n.flags|=1;break;case 76:n.flags|=2;break;default:e.Debug.fail()}if(G(),142===H()&&Z(Mn))n.declarations=Me();else{var r=j();N(t),n.declarations=Re(8,Ln),N(r)}return de(n)}function Mn(){return De()&&20===G()}function Un(e,t,n){var r=le(208,e);return r.decorators=t,r.modifiers=n,r.declarationList=Rn(!1),ce(),E(de(r))}function Bn(t,n,r){var i=le(228,t);i.decorators=n,i.modifiers=r,ne(89),i.asteriskToken=ie(39),i.name=e.hasModifier(i,512)?pn():me();var a=i.asteriskToken?1:0,o=e.hasModifier(i,256)?2:0;return et(56,a|o,i),i.body=Nn(a|o,e.Diagnostics.or_expected),E(de(i))}function jn(t,n,r,i,a,o,s){var c=le(151,t);c.decorators=n,c.modifiers=r,c.asteriskToken=i,c.name=a,c.questionToken=o;var l=i?1:0,u=e.hasModifier(c,256)?2:0;return et(56,l|u,c),c.body=Nn(l|u,s),E(de(c))}function $n(t,n,r,i,a){var o=le(149,t);return o.decorators=n,o.modifiers=r,o.name=i,o.questionToken=a,o.type=Dt(),o.initializer=e.hasModifier(o,32)?R(Kn):F(6144,Kn),ce(),E(de(o))}function Kn(){return It(!1)}function zn(e,t,n,r){var i=le(e,t);return i.decorators=n,i.modifiers=r,i.name=ve(),et(56,0,i),i.body=Nn(0),E(de(i))}function Jn(e){switch(e){case 114:case 112:case 113:case 115:case 131:return!0;default:return!1}}function qn(){var t;if(57===H())return!0;for(;e.isModifierKind(H());){if(Jn(t=H()))return!0;G()}if(39===H())return!0;if(he()&&(t=H(),G()),21===H())return!0;if(void 0!==t){if(!e.isKeyword(t)||135===t||125===t)return!0;switch(H()){case 19:case 27:case 56:case 58:case 55:return!0;default:return se()}}return!1}function Vn(){for(var e,t=V();;){var n=V();if(!re(57))break;var r=le(147,n);r.expression=L(8192,Gt),de(r),(e||(e=[])).push(r)}return e&&ue(e,t)}function Hn(t){for(var n,r=V();;){var i=b.getStartPos(),a=H();if(76===H()&&t){if(!ee(xe))break}else if(!e.isModifierKind(H())||!ee(ke))break;var o=de(le(a,i));(n||(n=[])).push(o)}return n&&ue(n,r)}function Gn(){var e;if(120===H()){var t=b.getStartPos(),n=H();G(),e=ue([de(le(n,t))],t)}return e}function Wn(){if(25===H()){var t=le(206);return G(),de(t)}var n=V(),r=Vn(),i=Hn(!0),a=cn(n,r,i);return a||(123===H()?function(t,n,r){var i=le(152,t);return i.decorators=n,i.modifiers=r,ne(123),et(56,0,i),i.body=Nn(0,e.Diagnostics.or_expected),E(de(i))}(n,r,i):rt()?at(n,r,i):e.tokenIsIdentifierOrKeyword(H())||9===H()||8===H()||39===H()||21===H()?function(t,n,r){var i=ie(39),a=ve(),o=ie(55);return i||19===H()||27===H()?jn(t,n,r,i,a,o,e.Diagnostics.or_expected):$n(t,n,r,a,o)}(n,r,i):r||i?$n(n,r,i,pe(71,!0,e.Diagnostics.Declaration_expected),void 0):void e.Debug.fail("Should not have attempted to parse class member declaration."))}function Qn(e,t,n){return Yn(e,t,n,229)}function Yn(e,t,n,r){var i=le(r,e);return i.decorators=t,i.modifiers=n,ne(75),i.name=!te()||108===H()&&Z(Ae)?void 0:me(),i.typeParameters=Qe(),i.heritageClauses=Xn(),ne(17)?(i.members=Pe(5,Wn),ne(18)):i.members=Me(),E(de(i))}function Xn(){if(nr())return Pe(21,Zn)}function Zn(){var e=H();if(85===e||108===e){var t=le(259);return t.token=e,G(),t.types=Re(7,er),de(t)}}function er(){var e=le(201);return e.expression=Gt(),e.typeArguments=tr(),de(e)}function tr(){return 27===H()?Ue(19,Ct,27,29):void 0}function nr(){return 85===H()||108===H()}function rr(){var e=le(264,b.getStartPos());return e.name=ve(),e.initializer=R(Kn),E(de(e))}function ir(){var e=le(234,b.getStartPos());return ne(17)?(e.statements=Pe(1,Dn),ne(18)):e.statements=Me(),de(e)}function ar(e,t,n,r){var i=le(233,e),a=16&r;return i.decorators=t,i.modifiers=n,i.flags|=r,i.name=me(),i.body=re(23)?ar(V(),void 0,void 0,4|a):ir(),E(de(i))}function or(e,t,n){var r=le(233,e);return r.decorators=t,r.modifiers=n,141===H()?(r.name=me(),r.flags|=512):(r.name=Je(),r.name.text=fe(r.name.text)),17===H()?r.body=ir():ce(),de(r)}function sr(){return 19===G()}function cr(){return 41===G()}function lr(){if(9===H()){var e=Je();return e.text=fe(e.text),e}return Nt()}function ur(e){var t=le(e);return t.elements=Ue(22,241===e?pr:dr,17,18),de(t)}function dr(){return fr(246)}function pr(){return fr(242)}function fr(t){var n=le(t),r=e.isKeyword(H())&&!te(),i=b.getTokenPos(),a=b.getTextPos(),o=ge();return 118===H()?(n.propertyName=o,ne(118),r=e.isKeyword(H())&&!te(),i=b.getTokenPos(),a=b.getTextPos(),n.name=ge()):n.name=o,242===t&&r&&J(i,a-i,e.Diagnostics.Identifier_expected),de(n)}function _r(t){for(var n,r=e.createScanner(t.languageVersion,!1,0,d),i=[],a=[],o=[],c=void 0;;){var l=r.scan();if(2!==l){if(e.isTrivia(l))continue;break}var u={kind:r.getToken(),pos:r.getTokenPos(),end:r.getTextPos()},p=d.substring(u.pos,u.end),f=e.getFileReferenceFromReferencePath(p,u);if(f){var _=f.fileReference;t.hasNoDefaultLib=f.isNoDefaultLib;var m=f.diagnosticMessage;_&&(f.isTypeReferenceDirective?a.push(_):i.push(_)),m&&s.push(e.createFileDiagnostic(t,u.pos,u.end-u.pos,m))}else{var g=/^\/\/\/\s*<amd-module\s+name\s*=\s*('|")(.+?)\1/gim.exec(p);g&&(n&&s.push(e.createFileDiagnostic(t,u.pos,u.end-u.pos,e.Diagnostics.An_AMD_module_cannot_have_multiple_name_assignments)),n=g[2]);if(/^\/\/\/\s*<amd-dependency\s/gim.exec(p)){var h=/\spath\s*=\s*('|")(.+?)\1/gim.exec(p),y=/\sname\s*=\s*('|")(.+?)\1/gim.exec(p);if(h){var v={path:h[2],name:y?y[2]:void 0};o.push(v)}}var b=/^\/\/\/?\s*(@ts-check|@ts-nocheck)\s*$/gim.exec(p);b&&(c={enabled:0===e.compareStrings(b[1],"@ts-check",!0),end:u.end,pos:u.pos})}}t.referencedFiles=i,t.typeReferenceDirectives=a,t.amdDependencies=o,t.moduleName=n,t.checkJsDirective=c}t.parseSourceFile=function(t,n,r,i,a,c){T(n,r,i,c=e.ensureScriptKind(t,c));var l=function(t,n,r,i){(o=A(t,n,i)).flags=g,G(),_r(o),o.statements=Pe(0,Dn),e.Debug.assert(1===H()),o.endOfFileToken=E(oe()),function(t){t.externalModuleIndicator=e.forEach(t.statements,(function(t){return e.hasModifier(t,1)||237===t.kind&&248===t.moduleReference.kind||238===t.kind||243===t.kind||244===t.kind?t:void 0}))}(o),o.nodeCount=p,o.identifierCount=_,o.identifiers=f,o.parseDiagnostics=s,r&&D(o);return o}(t,r,a,c);return C(),l},t.parseIsolatedEntityName=function(e,t){T(e,t,void 0,1),G();var n=Be(!0),r=1===H()&&!s.length;return C(),r?n:void 0},t.parseJsonText=function(t,n){T(n,2,void 0,6);var r=o=A(t,2,6);return G(),1===H()?o.endOfFileToken=oe():17===H()||Z((function(){return 9===H()}))?(r.jsonObject=un(),o.endOfFileToken=ae(1,!1,e.Diagnostics.Unexpected_token)):ne(17),o.parseDiagnostics=s,C(),r},t.fixupParentReferences=D,function(e){e[e.SourceElements=0]="SourceElements",e[e.BlockStatements=1]="BlockStatements",e[e.SwitchClauses=2]="SwitchClauses",e[e.SwitchClauseStatements=3]="SwitchClauseStatements",e[e.TypeMembers=4]="TypeMembers",e[e.ClassMembers=5]="ClassMembers",e[e.EnumMembers=6]="EnumMembers",e[e.HeritageClauseElement=7]="HeritageClauseElement",e[e.VariableDeclarations=8]="VariableDeclarations",e[e.ObjectBindingElements=9]="ObjectBindingElements",e[e.ArrayBindingElements=10]="ArrayBindingElements",e[e.ArgumentExpressions=11]="ArgumentExpressions",e[e.ObjectLiteralMembers=12]="ObjectLiteralMembers",e[e.JsxAttributes=13]="JsxAttributes",e[e.JsxChildren=14]="JsxChildren",e[e.ArrayLiteralMembers=15]="ArrayLiteralMembers",e[e.Parameters=16]="Parameters",e[e.RestProperties=17]="RestProperties",e[e.TypeParameters=18]="TypeParameters",e[e.TypeArguments=19]="TypeArguments",e[e.TupleElementTypes=20]="TupleElementTypes",e[e.HeritageClauses=21]="HeritageClauses",e[e.ImportOrExportSpecifiers=22]="ImportOrExportSpecifiers",e[e.Count=23]="Count"}(h||(h={})),function(e){e[e.False=0]="False",e[e.True=1]="True",e[e.Unknown=2]="Unknown"}(y||(y={})),function(t){function n(e){var t=le(267,b.getTokenPos());if(ne(17)||!e)return t.type=L(1048576,Ct),ne(18),D(t),de(t)}var r,i;function a(t,r){var i=d;t=t||0;var a,o,s,c=void 0===r?i.length:t+r;r=c-t,e.Debug.assert(t>=0),e.Debug.assert(t<=c),e.Debug.assert(c<=i.length);var u,p=[];return function(e,t){return 47===e.charCodeAt(t)&&42===e.charCodeAt(t+1)&&42===e.charCodeAt(t+2)&&42!==e.charCodeAt(t+3)}(i,t)?(b.scanRange(t+3,r-5,(function(){var e=!0,n=1,r=void 0,l=t-Math.max(i.lastIndexOf("\n",t),0)+4;function d(e){r||(r=l),p.push(e),l+=e.length}for(D();5===H();)D();for(4===H()&&(n=0,l=0,D());1!==H();){switch(H()){case 57:0===n||1===n?(_(p),g(l),n=0,e=!1,r=void 0,l++):d(b.getTokenText());break;case 4:p.push(b.getTokenText()),n=0,l=0;break;case 39:var m=b.getTokenText();1===n||2===n?(n=2,d(m)):(n=1,l+=m.length);break;case 71:d(b.getTokenText()),n=2;break;case 5:var h=b.getTokenText();2===n?p.push(h):void 0!==r&&l+h.length>r&&p.push(h.slice(r-l-1)),l+=h.length;break;case 1:break;default:n=2,d(b.getTokenText())}e?D():e=!0}f(p),_(p),u=function(){var e=le(275,t);return e.tags=a&&ue(a,o,s),e.comment=p.length?p.join(""):void 0,de(e,c)}()})),u):u;function f(e){for(;e.length&&("\n"===e[0]||"\r"===e[0]);)e.shift()}function _(e){for(;e.length&&("\n"===e[e.length-1]||"\r"===e[e.length-1]);)e.pop()}function m(){for(;5===H()||4===H();)D()}function g(t){e.Debug.assert(57===H());var n=le(57,b.getTokenPos());n.end=b.getTextPos(),D();var r=A();if(m(),r){var i;if(r)switch(r.escapedText){case"augments":case"extends":i=function(e,t){var n=le(277,e.pos);return n.atToken=e,n.tagName=t,n.class=function(){var e=re(17),t=le(201);t.expression=function(){var e=A(!0);for(;re(23);){var t=le(179,e.pos);t.expression=e,t.name=A(),e=de(t)}return e}(),t.typeArguments=tr();var n=de(t);e&&ne(18);return n}(),de(n)}(n,r);break;case"class":case"constructor":i=function(e,t){var n=le(278,e.pos);return n.atToken=e,n.tagName=t,de(n)}(n,r);break;case"arg":case"argument":case"param":i=k(n,r,1);break;case"return":case"returns":i=function(t,n){e.forEach(a,(function(e){return 280===e.kind}))&&J(n.pos,b.getTokenPos()-n.pos,e.Diagnostics._0_tag_already_specified,n.escapedText);var r=le(280,t.pos);return r.atToken=t,r.tagName=n,r.typeExpression=y(),de(r)}(n,r);break;case"template":i=function(t,n){e.forEach(a,(function(e){return 282===e.kind}))&&J(n.pos,b.getTokenPos()-n.pos,e.Diagnostics._0_tag_already_specified,n.escapedText);var r=[],i=V();for(;;){var o=A();if(m(),!o)return void J(b.getStartPos(),0,e.Diagnostics.Identifier_expected);var s=le(145,o.pos);if(s.name=o,de(s),r.push(s),26!==H())break;D(),m()}var c=le(282,t.pos);return c.atToken=t,c.tagName=n,c.typeParameters=ue(r,i),de(c),c}(n,r);break;case"type":i=S(n,r);break;case"typedef":i=function(e,t){var n=y();m();var r=le(283,e.pos);if(r.atToken=e,r.tagName=t,r.fullName=l(0),r.fullName)for(var i=r.fullName;;){if(71===i.kind||!i.body){r.name=71===i.kind?i:i.name;break}i=i.body}if(m(),r.typeExpression=n,!n||x(n.type)){for(var a=void 0,o=void 0,s=void 0,c=b.getStartPos();a=ee((function(){return C(0)}));)if(o||(o=le(285,c)),281===a.kind){if(s)break;s=a}else o.jsDocPropertyTags||(o.jsDocPropertyTags=[]),o.jsDocPropertyTags.push(a);o&&(n&&164===n.type.kind&&(o.isArrayType=!0),r.typeExpression=s&&s.typeExpression&&!x(s.typeExpression.type)?s.typeExpression:de(o))}return de(r);function l(e){var t=b.getTokenPos(),n=A();if(n&&re(23)){var r=le(233,t);return r.flags|=e,r.name=n,r.body=l(4),de(r)}return n&&4&e&&(n.isInJSDocNamespace=!0),n}}(n,r);break;default:i=h(n,r)}else i=h(n,r);i&&function(e,t){e.comment=t.join(""),a?a.push(e):(a=[e],o=e.pos);s=e.end}(i,function(e){var t,n=[],r=0;function i(r){t||(t=e),n.push(r),e+=r.length}for(;57!==H()&&1!==H();){switch(H()){case 4:r>=1&&(r=0,n.push(b.getTokenText())),e=0;break;case 57:break;case 5:if(2===r)i(b.getTokenText());else{var a=b.getTokenText();void 0!==t&&e+a.length>t&&n.push(a.slice(t-e-1)),e+=a.length}break;case 39:if(0===r){r=1,e+=b.getTokenText().length;break}default:r=2,i(b.getTokenText())}if(57===H())break;D()}return f(n),_(n),n}(t+i.end-i.pos))}}function h(e,t){var n=le(276,e.pos);return n.atToken=e,n.tagName=t,de(n)}function y(){return m(),17===H()?n():void 0}function v(){var e=re(21),t=function(){var e=A(!0);re(21)&&ne(22);for(;re(23);){var t=A(!0);re(21)&&ne(22),e=je(e,t)}return e}();return e&&(m(),ie(58)&&Nt(),ne(22)),{name:t,isBracketed:e}}function x(t){switch(t.kind){case 134:return!0;case 164:return x(t.elementType);default:return e.isTypeReferenceNode(t)&&e.isIdentifier(t.typeName)&&"Object"===t.typeName.escapedText}}function k(e,t,n){var r=y(),i=!r;m();var a=v(),o=a.name,s=a.isBracketed;m(),i&&(r=y());var c=le(1===n?279:284,e.pos),l=function(e,t){if(e&&x(e.type)){for(var n=le(267,b.getTokenPos()),r=void 0,i=void 0,a=b.getStartPos(),o=void 0;r=ee((function(){return C(1,t)}));)o||(o=[]),o.push(r);if(o)return(i=le(285,a)).jsDocPropertyTags=o,164===e.type.kind&&(i.isArrayType=!0),n.type=de(i),de(n)}}(r,o);return l&&(r=l,i=!0),c.atToken=e,c.tagName=t,c.typeExpression=r,c.name=o,c.isNameFirst=i,c.isBracketed=s,de(c)}function S(t,r){e.forEach(a,(function(e){return 281===e.kind}))&&J(r.pos,b.getTokenPos()-r.pos,e.Diagnostics._0_tag_already_specified,r.escapedText);var i=le(281,t.pos);return i.atToken=t,i.tagName=r,i.typeExpression=n(!0),de(i)}function T(t,n){for(;!e.isIdentifier(t)||!e.isIdentifier(n);){if(e.isIdentifier(t)||e.isIdentifier(n)||t.right.escapedText!==n.right.escapedText)return!1;t=t.left,n=n.left}return t.escapedText===n.escapedText}function C(t,n){for(var r=!0,i=!1;;)switch(D(),H()){case 57:if(r){var a=E(t);return!(a&&279===a.kind&&(e.isIdentifier(a.name)||!T(n,a.name.left)))&&a}i=!1;break;case 4:r=!0,i=!1;break;case 39:i&&(r=!1),i=!0;break;case 71:r=!1;break;case 1:return!1}}function E(t){e.Debug.assert(57===H());var n=le(57,b.getStartPos());n.end=b.getTextPos(),D();var r=A();if(m(),!r)return!1;switch(r.escapedText){case"type":return 0===t&&S(n,r);case"prop":case"property":return 0===t&&k(n,r,t);case"arg":case"argument":case"param":return 1===t&&k(n,r,t)}return!1}function D(){return l=b.scanJSDocToken()}function A(t){if(void 0===t&&(t=!1),!e.tokenIsIdentifierOrKeyword(H()))return t?pe(71,!0,e.Diagnostics.Identifier_expected):void z(e.Diagnostics.Identifier_expected);var n=b.getTokenPos(),r=b.getTextPos(),a=le(71,n);return a.escapedText=e.escapeLeadingUnderscores(i.substring(n,r)),de(a,r),D(),a}}t.parseJSDocTypeExpressionForTests=function(e,t,r){T(e,5,void 0,1),o=A("file.js",5,1),b.setText(e,t,r),l=b.scan();var i=n(),a=s;return C(),i?{jsDocTypeExpression:i,diagnostics:a}:void 0},t.parseJSDocTypeExpression=n,t.parseIsolatedJSDocComment=function(e,t,n){T(e,5,void 0,1),o={languageVariant:0,text:e};var r=a(t,n),i=s;return C(),r?{jsDoc:r,diagnostics:i}:void 0},t.parseJSDocComment=function(t,n,r){var i,c=l,u=s.length,d=k,p=a(n,r);return p&&(p.parent=t),e.isInJavaScriptFile(t)&&(o.jsDocDiagnostics||(o.jsDocDiagnostics=[]),(i=o.jsDocDiagnostics).push.apply(i,s)),l=c,s.length=u,k=d,p},function(e){e[e.BeginningOfLine=0]="BeginningOfLine",e[e.SawAsterisk=1]="SawAsterisk",e[e.SavingComments=2]="SavingComments"}(r||(r={})),function(e){e[e.Property=0]="Property",e[e.Parameter=1]="Parameter"}(i||(i={})),t.parseJSDocCommentWorker=a}(v=t.JSDocParser||(t.JSDocParser={}))}(o||(o={})),function(t){function n(t,n,i,o,s,c){return void(n?d(t):l(t));function l(t){var n="";if(c&&r(t)&&(n=o.substring(t.pos,t.end)),t._children&&(t._children=void 0),t.pos+=i,t.end+=i,c&&r(t)&&e.Debug.assert(n===s.substring(t.pos,t.end)),u(t,l,d),e.hasJSDocNodes(t))for(var p=0,f=t.jsDoc;p<f.length;p++){u(f[p],l,d)}a(t,c)}function d(e){e._children=void 0,e.pos+=i,e.end+=i;for(var t=0,n=e;t<n.length;t++){l(n[t])}}}function r(e){switch(e.kind){case 9:case 8:case 71:return!0}return!1}function i(t,n,r,i,a){e.Debug.assert(t.end>=n,"Adjusting an element that was entirely before the change range"),e.Debug.assert(t.pos<=r,"Adjusting an element that was entirely after the change range"),e.Debug.assert(t.pos<=t.end),t.pos=Math.min(t.pos,i),t.end>=r?t.end+=a:t.end=Math.min(t.end,i),e.Debug.assert(t.pos<=t.end),t.parent&&(e.Debug.assert(t.pos>=t.parent.pos),e.Debug.assert(t.end<=t.parent.end))}function a(t,n){if(n){var r=t.pos;u(t,(function(t){e.Debug.assert(t.pos>=r),r=t.end})),e.Debug.assert(r<=t.end)}}function s(t,n){var r,i=t;if(u(t,(function t(a){if(e.nodeIsMissing(a))return;if(!(a.pos<=n))return e.Debug.assert(a.pos>n),!0;if(a.pos>=i.pos&&(i=a),n<a.end)return u(a,t),!0;e.Debug.assert(a.end<=n),r=a})),r){var a=function(e){for(;;){var t=o(e);if(!t)return e;e=t}}(r);a.pos>i.pos&&(i=a)}return i;function o(t){var n=void 0;return u(t,(function(t){e.nodeIsPresent(t)&&(n=t)})),n}}function c(t,n,r,i){var a=t.text;if(r&&(e.Debug.assert(a.length-r.span.length+r.newLength===n.length),i||e.Debug.shouldAssert(3))){var o=a.substr(0,r.span.start),s=n.substr(0,r.span.start);e.Debug.assert(o===s);var c=a.substring(e.textSpanEnd(r.span),a.length),l=n.substring(e.textSpanEnd(e.textChangeRangeNewSpan(r)),n.length);e.Debug.assert(c===l)}}var l;t.updateSourceFile=function(t,r,l,d){if(c(t,r,l,d=d||e.Debug.shouldAssert(2)),e.textChangeRangeIsUnchanged(l))return t;if(0===t.statements.length)return o.parseSourceFile(t.fileName,r,t.languageVersion,void 0,!0,t.scriptKind);var p=t;e.Debug.assert(!p.hasBeenIncrementallyParsed),p.hasBeenIncrementallyParsed=!0;var f=t.text,_=function(t){var n=t.statements,r=0;e.Debug.assert(r<n.length);var i=n[r],a=-1;return{currentNode:function(t){return t!==a&&(i&&i.end===t&&r<n.length-1&&(r++,i=n[r]),i&&i.pos===t||o(t)),a=t,e.Debug.assert(!i||i.pos===t),i}};function o(e){return n=void 0,r=-1,i=void 0,void u(t,a,o);function a(t){return e>=t.pos&&e<t.end&&(u(t,a,o),!0)}function o(t){if(e>=t.pos&&e<t.end)for(var s=0;s<t.length;s++){var c=t[s];if(c){if(c.pos===e)return n=t,r=s,i=c,!0;if(c.pos<e&&e<c.end)return u(c,a,o),!0}}return!1}}}(t),m=function(t,n){for(var r=1,i=n.span.start,a=0;i>0&&a<=r;a++){var o=s(t,i);e.Debug.assert(o.pos<=i);var c=o.pos;i=Math.max(0,c-1)}var l=e.createTextSpanFromBounds(i,e.textSpanEnd(n.span)),u=n.newLength+(n.span.start-i);return e.createTextChangeRange(l,u)}(t,l);c(t,r,m,d),e.Debug.assert(m.span.start<=l.span.start),e.Debug.assert(e.textSpanEnd(m.span)===e.textSpanEnd(l.span)),e.Debug.assert(e.textSpanEnd(e.textChangeRangeNewSpan(m))===e.textSpanEnd(e.textChangeRangeNewSpan(l)));var g=e.textChangeRangeNewSpan(m).length-m.span.length;return function(t,r,o,s,c,l,d,p){return void f(t);function f(t){if(e.Debug.assert(t.pos<=t.end),t.pos>o)n(t,!1,c,l,d,p);else{var m=t.end;if(m>=r)return t.intersectsChange=!0,t._children=void 0,i(t,r,o,s,c),u(t,f,_),void a(t,p);e.Debug.assert(m<r)}}function _(t){if(e.Debug.assert(t.pos<=t.end),t.pos>o)n(t,!0,c,l,d,p);else{var a=t.end;if(a>=r){t.intersectsChange=!0,t._children=void 0,i(t,r,o,s,c);for(var u=0,_=t;u<_.length;u++){f(_[u])}}else e.Debug.assert(a<r)}}}(p,m.span.start,e.textSpanEnd(m.span),e.textSpanEnd(e.textChangeRangeNewSpan(m)),g,f,r,d),o.parseSourceFile(t.fileName,r,t.languageVersion,_,!0,t.scriptKind)},function(e){e[e.Value=-1]="Value"}(l||(l={}))}(s||(s={}))}(ts||(ts={})),function(e){var t;function n(t){if(230===t.kind||231===t.kind)return 0;if(e.isConstEnumDeclaration(t))return 2;if(238!==t.kind&&237!==t.kind||e.hasModifier(t,1)){if(234===t.kind){var r=0;return e.forEachChild(t,(function(e){switch(n(e)){case 0:return!1;case 2:return r=2,!1;case 1:return r=1,!0}})),r}if(233===t.kind){var i=t.body;return i?n(i):1}return 71===t.kind&&t.isInJSDocNamespace?0:1}return 0}!function(e){e[e.NonInstantiated=0]="NonInstantiated",e[e.Instantiated=1]="Instantiated",e[e.ConstEnumOnly=2]="ConstEnumOnly"}(e.ModuleInstanceState||(e.ModuleInstanceState={})),e.getModuleInstanceState=n,function(e){e[e.None=0]="None",e[e.IsContainer=1]="IsContainer",e[e.IsBlockScopedContainer=2]="IsBlockScopedContainer",e[e.IsControlFlowContainer=4]="IsControlFlowContainer",e[e.IsFunctionLike=8]="IsFunctionLike",e[e.IsFunctionExpression=16]="IsFunctionExpression",e[e.HasLocals=32]="HasLocals",e[e.IsInterface=64]="IsInterface",e[e.IsObjectLiteralOrClassExpressionMethod=128]="IsObjectLiteralOrClassExpressionMethod"}(t||(t={}));var r=function(){var t,r,s,c,l,u,d,p,f,_,m,g,h,y,v,b,x,k,S,T,C,E,D=0,A={flags:1},w={flags:1},N=0;function I(n,r,i,a,o){return e.createDiagnosticForNodeInSourceFile(e.getSourceFileOfNode(n)||t,n,r,i,a,o)}return function(n,i){t=n,r=i,s=e.getEmitScriptTarget(r),S=function(e,t){return!(!(void 0===t.alwaysStrict?t.strict:t.alwaysStrict)||e.isDeclarationFile)||!!e.externalModuleIndicator}(t,i),C=e.createUnderscoreEscapedMap(),D=0,E=t.isDeclarationFile,T=e.objectAllocator.getSymbolConstructor(),t.locals||(be(t),t.symbolCount=D,t.classifiableNames=C),t=void 0,r=void 0,s=void 0,c=void 0,l=void 0,u=void 0,d=void 0,p=!1,f=void 0,_=void 0,m=void 0,g=void 0,h=void 0,y=void 0,b=void 0,x=!1,k=0,N=0};function P(e,t){return D++,new T(e,t)}function O(t,n,r){if(t.flags|=r,n.symbol=t,t.declarations?t.declarations.push(n):t.declarations=[n],1952&r&&!t.exports&&(t.exports=e.createSymbolTable()),6240&r&&!t.members&&(t.members=e.createSymbolTable()),107455&r){var i=t.valueDeclaration;(!i||i.kind!==n.kind&&233===i.kind)&&(t.valueDeclaration=n)}}function F(t){if(243===t.kind)return t.isExportEquals?"export=":"default";var n=e.getNameOfDeclaration(t);if(n){if(e.isAmbientModule(t)){var r=e.getTextOfIdentifierOrLiteral(n);return e.isGlobalScopeAugmentation(t)?"__global":'"'+r+'"'}if(144===n.kind){var i=n.expression;return e.isStringOrNumericLiteral(i)?e.escapeLeadingUnderscores(i.text):(e.Debug.assert(e.isWellKnownSymbolSyntactically(i)),e.getPropertyNameForKnownSymbolName(e.idText(i.name)))}return e.getEscapedTextOfIdentifierOrLiteral(n)}switch(t.kind){case 152:return"__constructor";case 160:case 155:return"__call";case 161:case 156:return"__new";case 157:return"__index";case 244:return"__export";case 194:if(2===e.getSpecialPropertyAssignmentKind(t))return"export=";e.Debug.fail("Unknown binary declaration kind");break;case 228:case 229:return e.hasModifier(t,512)?"default":void 0;case 273:return e.isJSDocConstructSignature(t)?"__new":"__call";case 146:e.Debug.assert(273===t.parent.kind);var a=t.parent;return"arg"+e.indexOf(a.parameters,t);case 283:var o=e.getNameOfJSDocTypedef(t);return void 0!==o?o.escapedText:void 0}}function L(t){return t.name?e.declarationNameToString(t.name):e.unescapeLeadingUnderscores(F(t))}function R(n,r,i,a,o,s){e.Debug.assert(!e.hasDynamicName(i));var c,l=e.hasModifier(i,512),u=l&&r?"default":F(i);if(void 0===u)c=P(0,"__missing");else if(c=n.get(u),788448&a&&C.set(u,!0),c){if(s&&!c.isReplaceableByMethod)return c;if(c.flags&o)if(c.isReplaceableByMethod)n.set(u,c=P(0,u));else{i.name&&(i.name.parent=i);var d=2&c.flags?e.Diagnostics.Cannot_redeclare_block_scoped_variable_0:e.Diagnostics.Duplicate_identifier_0;c.declarations&&c.declarations.length&&(l||c.declarations&&c.declarations.length&&(l||243===i.kind&&!i.isExportEquals))&&(d=e.Diagnostics.A_module_cannot_have_multiple_default_exports),e.forEach(c.declarations,(function(n){t.bindDiagnostics.push(I(e.getNameOfDeclaration(n)||n,d,L(n)))})),t.bindDiagnostics.push(I(e.getNameOfDeclaration(i)||i,d,L(i))),c=P(0,u)}}else n.set(u,c=P(0,u)),s&&(c.isReplaceableByMethod=!0);return O(c,i,a),c.parent=r,c}function M(t,n,r){var i=1&e.getCombinedModifierFlags(t);if(2097152&n)return 246===t.kind||237===t.kind&&i?R(l.symbol.exports,l.symbol,t,n,r):R(l.locals,void 0,t,n,r);283===t.kind&&e.Debug.assert(e.isInJavaScriptFile(t));var a=283===t.kind&&t.name&&71===t.name.kind&&t.name.isInJSDocNamespace;if(!e.isAmbientModule(t)&&(i||32&l.flags)||a){var o=107455&n?1048576:0,s=R(l.locals,void 0,t,o,r);return s.exportSymbol=R(l.symbol.exports,l.symbol,t,n,r),t.localSymbol=s,s}return R(l.locals,void 0,t,n,r)}function U(e){if(E)$(e);else if(536870912&e.transformFlags)E=!0,$(e),E=!1,N|=e.transformFlags&~a(e.kind);else{var t=N;N=0,$(e),N=t|i(e,N)}}function B(t){if(void 0!==t)if(E)e.forEach(t,be);else{var n=N;N=0;for(var r=0,i=0,a=t;i<a.length;i++){var o=a[i];be(o),r|=-536870913&o.transformFlags}t.transformFlags=536870912|r,N|=n}}function j(t){e.forEachChild(t,be,B)}function $(i){if(e.hasJSDocNodes(i))if(e.isInJavaScriptFile(i))for(var a=0,s=i.jsDoc;a<s.length;a++){be(s[a])}else for(var c=0,l=i.jsDoc;c<l.length;c++){o(i,l[c])}if(function(t){if(!(1&f.flags))return!1;if(f===A){if(e.isStatementButNotDeclaration(t)&&209!==t.kind||229===t.kind||233===t.kind&&function(e){var t=n(e);return 1===t||2===t&&r.preserveConstEnums}(t)||232===t.kind&&(!e.isConstEnumDeclaration(t)||r.preserveConstEnums))f=w,!r.allowUnreachableCode&&!e.isInAmbientContext(t)&&(208!==t.kind||3&e.getCombinedNodeFlags(t.declarationList)||e.forEach(t.declarationList.declarations,(function(e){return e.initializer})))&&ve(t,e.Diagnostics.Unreachable_code_detected)}return!0}(i))j(i);else switch(i.kind){case 213:!function(e){var t=H(),n=V(),r=V();W(t,f),f=t,ne(e.expression,n,r),f=ee(n),re(e.statement,r,t),W(t,f),f=ee(r)}(i);break;case 212:!function(t){var n=H(),r=222===t.parent.kind?e.lastOrUndefined(b):void 0,i=r?r.continueTarget:V(),a=r?r.breakTarget:V();W(n,f),f=n,re(t.statement,a,i),W(i,f),f=ee(i),ne(t.expression,n,a),f=ee(a)}(i);break;case 214:!function(e){var t=H(),n=V(),r=V();be(e.initializer),W(t,f),f=t,ne(e.condition,n,r),f=ee(n),re(e.statement,r,t),be(e.incrementor),W(t,f),f=ee(r)}(i);break;case 215:case 216:!function(e){var t=H(),n=V();W(t,f),f=t,216===e.kind&&be(e.awaitModifier);be(e.expression),W(n,f),be(e.initializer),227!==e.initializer.kind&&oe(e.initializer);re(e.statement,n,t),W(t,f),f=ee(n)}(i);break;case 211:!function(e){var t=V(),n=V(),r=V();ne(e.expression,t,n),f=ee(t),be(e.thenStatement),W(r,f),f=ee(n),be(e.elseStatement),W(r,f),f=ee(r)}(i);break;case 219:case 223:!function(e){be(e.expression),219===e.kind&&(x=!0,g&&W(g,f));f=A}(i);break;case 218:case 217:!function(e){if(be(e.label),e.label){var t=function(e){if(b)for(var t=0,n=b;t<n.length;t++){var r=n[t];if(r.name===e)return r}return}(e.label.escapedText);t&&(t.referenced=!0,ie(e,t.breakTarget,t.continueTarget))}else ie(e,_,m)}(i);break;case 224:!function(e){var t=V(),n=f;be(e.tryBlock),W(t,f);var r=f,i=A;e.catchClause&&(f=n,be(e.catchClause),W(t,f),i=f);if(e.finallyBlock){var a={flags:2048,antecedent:n,lock:{}};if(W(t,a),f=ee(t),be(e.finallyBlock),1&f.flags||1&r.flags&&1&i.flags&&(f=r===w||i===w?w:A),!(1&f.flags)){var o={flags:4096,antecedent:f};a.lock=o,f=o}}else f=ee(t)}(i);break;case 221:!function(t){var n=V();be(t.expression);var r=_,i=v;_=n,v=f,be(t.caseBlock),W(n,f);var a=e.forEach(t.caseBlock.clauses,(function(e){return 258===e.kind}));t.possiblyExhaustive=!a&&!n.antecedents,a||W(n,Y(v,t,0,0));_=r,v=i,f=ee(n)}(i);break;case 235:!function(t){var n=N;N=0;for(var i=t.clauses,a=A,o=0;o<i.length;o++){for(var s=o;!i[o].statements.length&&o+1<i.length;)be(i[o]),o++;var c=V();W(c,Y(v,t.parent,s,o+1)),W(c,a),f=ee(c);var l=i[o];be(l),a=f,1&f.flags||o===i.length-1||!r.noFallthroughCasesInSwitch||ve(l,e.Diagnostics.Fallthrough_case_in_switch)}i.transformFlags=536870912|N,N|=n}(i);break;case 257:!function(e){var t=f;f=v,be(e.expression),f=t,B(e.statements)}(i);break;case 222:!function(n){var i=H(),a=V();be(n.label),W(i,f);var o=function(e,t,n){var r={name:e,breakTarget:t,continueTarget:n,referenced:!1};return(b||(b=[])).push(r),r}(n.label.escapedText,a,i);be(n.statement),b.pop(),o.referenced||r.allowUnusedLabels||t.bindDiagnostics.push(I(n.label,e.Diagnostics.Unused_label));n.statement&&212===n.statement.kind||(W(a,f),f=ee(a))}(i);break;case 192:!function(e){if(51===e.operator){var t=h;h=y,y=t,j(e),y=h,h=t}else j(e),43!==e.operator&&44!==e.operator||oe(e.operand)}(i);break;case 193:!function(e){j(e),(43===e.operator||44===e.operator)&&oe(e.operand)}(i);break;case 194:!function(t){var n=t.operatorToken.kind;if(53===n||54===n)if(function(e){for(;185===e.parent.kind||192===e.parent.kind&&51===e.parent.operator;)e=e.parent;return!function(e){var t=e.parent;switch(t.kind){case 211:case 213:case 212:return t.expression===e;case 214:case 195:return t.condition===e}return!1}(e)&&!te(e.parent)}(t)){var r=V();se(t,r,r),f=ee(r)}else se(t,h,y);else{if(j(t),e.isAssignmentOperator(n)&&!e.isAssignmentTarget(t))if(oe(t.left),58===n&&180===t.left.kind)q(t.left.expression)&&(f=Z(f,t))}}(i);break;case 188:!function(e){j(e),179===e.expression.kind&&oe(e.expression)}(i);break;case 195:!function(e){var t=V(),n=V(),r=V();ne(e.condition,t,n),f=ee(t),be(e.questionToken),be(e.whenTrue),W(r,f),f=ee(n),be(e.colonToken),be(e.whenFalse),W(r,f),f=ee(r)}(i);break;case 226:!function(t){j(t),(t.initializer||e.isForInOrOfStatement(t.parent.parent))&&ce(t)}(i);break;case 181:!function(t){var n=t.expression;for(;185===n.kind;)n=n.expression;186===n.kind||187===n.kind?(B(t.typeArguments),B(t.arguments),be(t.expression)):j(t);if(179===t.expression.kind){var r=t.expression;q(r.expression)&&e.isPushOrUnshiftIdentifier(r.name)&&(f=Z(f,t))}}(i);break;case 275:!function(t){e.forEachChild(t,(function(e){283!==e.kind&&be(e)}))}(i);break;case 283:!function(t){e.forEachChild(t,(function(e){t.fullName&&e===t.name&&71!==t.fullName.kind||be(e)}))}(i);break;default:j(i)}}function K(e){switch(e.kind){case 71:case 99:case 179:return z(e);case 181:return function(e){if(e.arguments)for(var t=0,n=e.arguments;t<n.length;t++){if(z(n[t]))return!0}if(179===e.expression.kind&&z(e.expression.expression))return!0;return!1}(e);case 185:return K(e.expression);case 194:return function(e){switch(e.operatorToken.kind){case 58:return z(e.left);case 32:case 33:case 34:case 35:return q(e.left)||q(e.right)||J(e.right,e.left)||J(e.left,e.right);case 93:return q(e.left);case 26:return K(e.right)}return!1}(e);case 192:return 51===e.operator&&K(e.operand)}return!1}function z(e){return 71===e.kind||99===e.kind||97===e.kind||179===e.kind&&z(e.expression)}function J(e,t){return 189===e.kind&&q(e.expression)&&9===t.kind}function q(e){switch(e.kind){case 185:return q(e.expression);case 194:switch(e.operatorToken.kind){case 58:return q(e.left);case 26:return q(e.right)}}return z(e)}function V(){return{flags:4,antecedents:void 0}}function H(){return{flags:8,antecedents:void 0}}function G(e){e.flags|=512&e.flags?1024:512}function W(t,n){1&n.flags||e.contains(t.antecedents,n)||((t.antecedents||(t.antecedents=[])).push(n),G(n))}function Q(e,t,n){return 1&t.flags?t:n?101===n.kind&&64&e||86===n.kind&&32&e?A:K(n)?(G(t),{flags:e,expression:n,antecedent:t}):t:32&e?t:A}function Y(e,t,n,r){return K(t.expression)?(G(e),{flags:128,switchStatement:t,clauseStart:n,clauseEnd:r,antecedent:e}):e}function X(e,t){return G(e),{flags:16,antecedent:e,node:t}}function Z(e,t){return G(e),{flags:256,antecedent:e,node:t}}function ee(e){var t=e.antecedents;return t?1===t.length?t[0]:e:A}function te(e){for(;;)if(185===e.kind)e=e.expression;else{if(192!==e.kind||51!==e.operator)return 194===e.kind&&(53===e.operatorToken.kind||54===e.operatorToken.kind);e=e.operand}}function ne(e,t,n){var r=h,i=y;h=t,y=n,be(e),h=r,y=i,e&&te(e)||(W(t,Q(32,f,e)),W(n,Q(64,f,e)))}function re(e,t,n){var r=_,i=m;_=t,m=n,be(e),_=r,m=i}function ie(e,t,n){var r=218===e.kind?t:n;r&&(W(r,f),f=A)}function ae(e){194===e.kind&&58===e.operatorToken.kind?oe(e.left):oe(e)}function oe(e){if(z(e))f=X(f,e);else if(177===e.kind)for(var t=0,n=e.elements;t<n.length;t++){var r=n[t];198===r.kind?oe(r.expression):ae(r)}else if(178===e.kind)for(var i=0,a=e.properties;i<a.length;i++){var o=a[i];261===o.kind?ae(o.initializer):262===o.kind?oe(o.name):263===o.kind&&oe(o.expression)}}function se(e,t,n){var r={flags:4,antecedents:void 0};53===e.operatorToken.kind?ne(e.left,r,n):ne(e.left,t,r),f=ee(r),be(e.operatorToken),ne(e.right,t,n)}function ce(t){var n=e.isOmittedExpression(t)?void 0:t.name;if(e.isBindingPattern(n))for(var r=0,i=n.elements;r<i.length;r++){ce(i[r])}else f=X(f,t)}function le(e){d&&(d.nextContainer=e),d=e}function ue(n,r,i){switch(l.kind){case 233:return M(n,r,i);case 265:return function(n,r,i){return e.isExternalModule(t)?M(n,r,i):R(t.locals,void 0,n,r,i)}(n,r,i);case 199:case 229:return function(t,n,r){return e.hasModifier(t,32)?R(l.symbol.exports,l.symbol,t,n,r):R(l.symbol.members,l.symbol,t,n,r)}(n,r,i);case 232:return R(l.symbol.exports,l.symbol,n,r,i);case 163:case 285:case 178:case 230:case 254:return R(l.symbol.members,l.symbol,n,r,i);case 160:case 161:case 155:case 156:case 157:case 151:case 150:case 152:case 153:case 154:case 228:case 186:case 187:case 273:case 231:case 172:return R(l.locals,void 0,n,r,i)}}function de(t){e.isInAmbientContext(t)&&!function(e){var t=265===e.kind?e:e.body;if(t&&(265===t.kind||234===t.kind))for(var n=0,r=t.statements;n<r.length;n++){var i=r[n];if(244===i.kind||243===i.kind)return!0}return!1}(t)?t.flags|=32:t.flags&=-33}function pe(e){var t=n(e),r=0!==t;return ue(e,r?512:1024,r?106639:0),t}function fe(e,t,n){var r=P(t,n);8&t&&(r.parent=l.symbol),O(r,e,t)}function _e(t,n,r){switch(u.kind){case 233:M(t,n,r);break;case 265:if(e.isExternalModule(l)){M(t,n,r);break}default:u.locals||(u.locals=e.createSymbolTable(),le(u)),R(u.locals,void 0,t,n,r)}}function me(n){S&&n.originalKeywordKind>=108&&n.originalKeywordKind<=116&&!e.isIdentifierName(n)&&!e.isInAmbientContext(n)&&(t.parseDiagnostics.length||t.bindDiagnostics.push(I(n,function(n){if(e.getContainingClass(n))return e.Diagnostics.Identifier_expected_0_is_a_reserved_word_in_strict_mode_Class_definitions_are_automatically_in_strict_mode;if(t.externalModuleIndicator)return e.Diagnostics.Identifier_expected_0_is_a_reserved_word_in_strict_mode_Modules_are_automatically_in_strict_mode;return e.Diagnostics.Identifier_expected_0_is_a_reserved_word_in_strict_mode}(n),e.declarationNameToString(n))))}function ge(n,r){if(r&&71===r.kind){var i=r;if(o=i,e.isIdentifier(o)&&("eval"===o.escapedText||"arguments"===o.escapedText)){var a=e.getErrorSpanForNode(t,r);t.bindDiagnostics.push(e.createFileDiagnostic(t,a.start,a.length,function(n){if(e.getContainingClass(n))return e.Diagnostics.Invalid_use_of_0_Class_definitions_are_automatically_in_strict_mode;if(t.externalModuleIndicator)return e.Diagnostics.Invalid_use_of_0_Modules_are_automatically_in_strict_mode;return e.Diagnostics.Invalid_use_of_0_in_strict_mode}(n),e.idText(i)))}}var o}function he(e){S&&ge(e,e.name)}function ye(n){if(s<2&&265!==u.kind&&233!==u.kind&&!e.isFunctionLike(u)){var r=e.getErrorSpanForNode(t,n);t.bindDiagnostics.push(e.createFileDiagnostic(t,r.start,r.length,function(n){return e.getContainingClass(n)?e.Diagnostics.Function_declarations_are_not_allowed_inside_blocks_in_strict_mode_when_targeting_ES3_or_ES5_Class_definitions_are_automatically_in_strict_mode:t.externalModuleIndicator?e.Diagnostics.Function_declarations_are_not_allowed_inside_blocks_in_strict_mode_when_targeting_ES3_or_ES5_Modules_are_automatically_in_strict_mode:e.Diagnostics.Function_declarations_are_not_allowed_inside_blocks_in_strict_mode_when_targeting_ES3_or_ES5}(n)))}}function ve(n,r,i,a,o){var s=e.getSpanOfTokenAtPosition(t,n.pos);t.bindDiagnostics.push(e.createFileDiagnostic(t,s.start,s.length,r,i,a,o))}function be(n){if(n){n.parent=c;var r=S;if(e.isInJavaScriptFile(n)&&function(t){if(!e.hasJSDocNodes(t))return;for(var n=0,r=t.jsDoc;n<r.length;n++){var i=r[n];if(i.tags)for(var a=0,o=i.tags;a<o.length;a++){var s=o[a];if(283===s.kind){var l=c;c=i,be(s),c=l}}}}(n),function(n){switch(n.kind){case 71:if(n.isInJSDocNamespace){for(var r=n.parent;r&&283!==r.kind;)r=r.parent;_e(r,524288,793064);break}case 99:return f&&(e.isExpression(n)||262===c.kind)&&(n.flowNode=f),me(n);case 179:f&&z(n)&&(n.flowNode=f);break;case 194:switch(e.getSpecialPropertyAssignmentKind(n)){case 1:Te(n);break;case 2:!function(n){var r=e.getRightMostAssignedExpression(n.right);if(e.isEmptyObjectLiteral(r)||Ce(r))return void Se(n);Se(n),R(t.symbol.exports,t.symbol,n,1049092,0)}(n);break;case 3:!function(e){var t=e.left,n=t.expression,r=n.expression;t.parent=e,r.parent=n,n.parent=t,we(r.escapedText,t,!0)}(n);break;case 4:!function(t){e.Debug.assert(e.isInJavaScriptFile(t));var n=e.getThisContainer(t,!1);switch(n.kind){case 228:case 186:n.symbol.members=n.symbol.members||e.createSymbolTable(),R(n.symbol.members,n.symbol,t,4,0);break;case 152:case 149:case 151:case 153:case 154:var r=n.parent;R(e.hasModifier(n,32)?r.symbol.exports:r.symbol.members,r.symbol,t,4,0,!0)}}(n);break;case 5:!function(t){var n=t.left,r=n.expression;e.isIdentifier(r)&&(n.parent=t,r.parent=n,Ee(r)?Te(t):we(r.escapedText,n,!1))}(n);break;case 0:break;default:e.Debug.fail("Unknown special property assignment kind")}return function(t){S&&e.isLeftHandSideExpression(t.left)&&e.isAssignmentOperator(t.operatorToken.kind)&&ge(t,t.left)}(n);case 260:return function(e){S&&e.variableDeclaration&&ge(e,e.variableDeclaration.name)}(n);case 188:return function(n){if(S&&71===n.expression.kind){var r=e.getErrorSpanForNode(t,n.expression);t.bindDiagnostics.push(e.createFileDiagnostic(t,r.start,r.length,e.Diagnostics.delete_cannot_be_called_on_an_identifier_in_strict_mode))}}(n);case 8:return function(n){S&&4&n.numericLiteralFlags&&t.bindDiagnostics.push(I(n,e.Diagnostics.Octal_literals_are_not_allowed_in_strict_mode))}(n);case 193:return function(e){S&&ge(e,e.operand)}(n);case 192:return function(e){S&&(43!==e.operator&&44!==e.operator||ge(e,e.operand))}(n);case 220:return function(t){S&&ve(t,e.Diagnostics.with_statements_are_not_allowed_in_strict_mode)}(n);case 169:return void(p=!0);case 158:return function(e){var t=e.parameterName,n=e.type;t&&71===t.kind&&me(t);t&&169===t.kind&&(p=!0);be(n)}(n);case 145:return ue(n,262144,530920);case 146:return function(t){S&&!e.isInAmbientContext(t)&&ge(t,t.name);e.isBindingPattern(t.name)?fe(t,1,"__"+e.indexOf(t.parent.parameters,t)):ue(t,1,107455);if(e.isParameterPropertyDeclaration(t)){var n=t.parent.parent;R(n.symbol.members,n.symbol,t,4|(t.questionToken?16777216:0),0)}}(n);case 226:return Ne(n);case 176:return n.flowNode=f,Ne(n);case 149:case 148:return function(e){return Ie(e,4|(e.questionToken?16777216:0),0)}(n);case 261:case 262:return Ie(n,4,0);case 264:return Ie(n,8,900095);case 155:case 156:case 157:return ue(n,131072,0);case 151:case 150:return Ie(n,8192|(n.questionToken?16777216:0),e.isObjectLiteralMethod(n)?0:99263);case 228:return function(n){t.isDeclarationFile||e.isInAmbientContext(n)||e.isAsyncFunction(n)&&(k|=1024);he(n),S?(ye(n),_e(n,16,106927)):ue(n,16,106927)}(n);case 152:return ue(n,16384,0);case 153:return Ie(n,32768,41919);case 154:return Ie(n,65536,74687);case 160:case 273:case 161:return function(t){var n=P(131072,F(t));O(n,t,131072);var r=P(2048,"__type");O(r,t,2048),r.members=e.createSymbolTable(),r.members.set(n.escapedName,n)}(n);case 163:case 285:case 172:return function(e){return fe(e,2048,"__type")}(n);case 178:return function(n){var r;if(function(e){e[e.Property=1]="Property",e[e.Accessor=2]="Accessor"}(r||(r={})),S)for(var i=e.createUnderscoreEscapedMap(),a=0,o=n.properties;a<o.length;a++){var s=o[a];if(263!==s.kind&&71===s.name.kind){var c=s.name,l=261===s.kind||262===s.kind||151===s.kind?1:2,u=i.get(c.escapedText);if(u){if(1===l&&1===u){var d=e.getErrorSpanForNode(t,c);t.bindDiagnostics.push(e.createFileDiagnostic(t,d.start,d.length,e.Diagnostics.An_object_literal_cannot_have_multiple_properties_with_the_same_name_in_strict_mode))}}else i.set(c.escapedText,l)}}return fe(n,4096,"__object")}(n);case 186:case 187:return function(n){t.isDeclarationFile||e.isInAmbientContext(n)||e.isAsyncFunction(n)&&(k|=1024);f&&(n.flowNode=f);he(n);var r=n.name?n.name.escapedText:"__function";return fe(n,16,r)}(n);case 181:e.isInJavaScriptFile(n)&&function(n){!t.commonJsModuleIndicator&&e.isRequireCall(n,!1)&&Se(n)}(n);break;case 199:case 229:return S=!0,function(n){if(229===n.kind)_e(n,32,899519);else{fe(n,32,n.name?n.name.escapedText:"__class"),n.name&&C.set(n.name.escapedText,!0)}var r=n.symbol,i=P(4194308,"prototype"),a=r.exports.get(i.escapedName);a&&(n.name&&(n.name.parent=n),t.bindDiagnostics.push(I(a.declarations[0],e.Diagnostics.Duplicate_identifier_0,e.symbolName(i))));r.exports.set(i.escapedName,i),i.parent=r}(n);case 230:return _e(n,64,792968);case 231:return _e(n,524288,793064);case 232:return function(t){return e.isConst(t)?_e(t,128,899967):_e(t,256,899327)}(n);case 233:return function(n){if(de(n),e.isAmbientModule(n))if(e.hasModifier(n,1)&&ve(n,e.Diagnostics.export_modifier_cannot_be_applied_to_ambient_modules_and_module_augmentations_since_they_are_always_visible),e.isExternalModuleAugmentation(n))pe(n);else{var r=void 0;if(9===n.name.kind){var i=n.name.text;e.hasZeroOrOneAsteriskCharacter(i)?r=e.tryParsePattern(i):ve(n.name,e.Diagnostics.Pattern_0_can_have_at_most_one_Asterisk_character,i)}var a=ue(n,512,106639);r&&(t.patternAmbientModules||(t.patternAmbientModules=[])).push({pattern:r,symbol:a})}else{var o=pe(n);if(0!==o)if(304&n.symbol.flags)n.symbol.constEnumOnlyModule=!1;else{var s=2===o;void 0===n.symbol.constEnumOnlyModule?n.symbol.constEnumOnlyModule=s:n.symbol.constEnumOnlyModule=n.symbol.constEnumOnlyModule&&s}}}(n);case 254:return function(e){return fe(e,4096,"__jsxAttributes")}(n);case 253:return function(e,t,n){return ue(e,t,n)}(n,4,0);case 237:case 240:case 242:case 246:return ue(n,2097152,2097152);case 236:return function(n){n.modifiers&&n.modifiers.length&&t.bindDiagnostics.push(I(n,e.Diagnostics.Modifiers_cannot_appear_here));if(265!==n.parent.kind)return void t.bindDiagnostics.push(I(n,e.Diagnostics.Global_module_exports_may_only_appear_at_top_level));var r=n.parent;if(!e.isExternalModule(r))return void t.bindDiagnostics.push(I(n,e.Diagnostics.Global_module_exports_may_only_appear_in_module_files));if(!r.isDeclarationFile)return void t.bindDiagnostics.push(I(n,e.Diagnostics.Global_module_exports_may_only_appear_in_declaration_files));t.symbol.globalExports=t.symbol.globalExports||e.createSymbolTable(),R(t.symbol.globalExports,t.symbol,n,2097152,2097152)}(n);case 239:return function(e){e.name&&ue(e,2097152,2097152)}(n);case 244:return function(e){l.symbol&&l.symbol.exports?e.exportClause||R(l.symbol.exports,l.symbol,e,8388608,0):fe(e,8388608,F(e))}(n);case 243:return function(t){if(l.symbol&&l.symbol.exports){var n=243===t.kind&&e.exportAssignmentIsAlias(t)?2097152:4;R(l.symbol.exports,l.symbol,t,n,2097204)}else fe(t,2097152,F(t))}(n);case 265:return xe(n.statements),de(t),void(e.isExternalModule(t)&&ke());case 207:if(!e.isFunctionLike(n.parent))return;case 234:return xe(n.statements);case 279:if(285!==n.parent.kind)break;case 284:var i=n;return ue(i,i.isBracketed||i.typeExpression&&272===i.typeExpression.type.kind?16777220:4,0);case 283:var a=n.fullName;if(!a||71===a.kind)_e(n,524288,793064)}}(n),n.kind>142){var a=c;c=n;var o=function(t){switch(t.kind){case 199:case 229:case 232:case 178:case 163:case 285:case 254:return 1;case 230:return 65;case 233:case 231:case 172:return 33;case 265:return 37;case 151:if(e.isObjectLiteralOrClassExpressionMethod(t))return 173;case 152:case 228:case 150:case 153:case 154:case 155:case 273:case 160:case 156:case 157:case 161:return 45;case 186:case 187:return 61;case 234:return 4;case 149:return t.initializer?4:0;case 260:case 214:case 215:case 216:case 235:return 2;case 207:return e.isFunctionLike(t.parent)?0:2}return 0}(n);0===o?U(n):function(t,n){var r=l,i=u;if(1&n?(l=u=t,32&n&&(l.locals=e.createSymbolTable()),le(l)):2&n&&((u=t).locals=void 0),4&n){var a=f,o=_,s=m,c=g,d=b,h=x,y=16&n&&!e.hasModifier(t,256)&&!!e.getImmediatelyInvokedFunctionExpression(t);y?g={flags:4,antecedents:void 0}:(f={flags:2},144&n&&(f.container=t),g=void 0),_=void 0,m=void 0,b=void 0,x=!1,U(t),t.flags&=-1409,!(1&f.flags)&&8&n&&e.nodeIsPresent(t.body)&&(t.flags|=128,x&&(t.flags|=256)),265===t.kind&&(t.flags|=k),y?(W(g,f),f=ee(g)):f=a,_=o,m=s,g=c,b=d,x=h}else 64&n?(p=!1,U(t),t.flags=p?64|t.flags:-65&t.flags):U(t);l=r,u=i}(n,o),c=a}else E||0!=(536870912&n.transformFlags)||(N|=i(n,0));S=r}}function xe(n){if(!S)for(var r=0,i=n;r<i.length;r++){var a=i[r];if(!e.isPrologueDirective(a))return;if(o=a,s=void 0,'"use strict"'===(s=e.getTextOfNodeFromSourceText(t.text,o.expression))||"'use strict'"===s)return void(S=!0)}var o,s}function ke(){fe(t,512,'"'+e.removeFileExtension(t.fileName)+'"')}function Se(e){t.commonJsModuleIndicator||(t.commonJsModuleIndicator=e,t.externalModuleIndicator||ke())}function Te(e){Se(e),R(t.symbol.exports,t.symbol,e.left,1048580,0)}function Ce(t){return e.isExportsIdentifier(t)||e.isModuleExportsPropertyAccessExpression(t)||e.isIdentifier(t)&&Ee(t)}function Ee(t){var n=Ae(t.escapedText);return n&&n.valueDeclaration&&e.isVariableDeclaration(n.valueDeclaration)&&n.valueDeclaration.initializer&&De(n.valueDeclaration.initializer)}function De(t){return Ce(t)||e.isAssignmentExpression(t,!0)&&(De(t.left)||De(t.right))}function Ae(e){return l.symbol&&l.symbol.exports&&l.symbol.exports.get(e)||l.locals&&l.locals.get(e)}function we(t,n,r){var i=Ae(t);(i&&e.isDeclarationOfFunctionOrClassExpression(i)&&(i=i.valueDeclaration.initializer.symbol),i&&48&i.flags)&&R(r?i.members||(i.members=e.createSymbolTable()):i.exports||(i.exports=e.createSymbolTable()),i,n,4,0)}function Ne(t){S&&ge(t,t.name),e.isBindingPattern(t.name)||(e.isBlockOrCatchScoped(t)?function(e){_e(e,2,107455)}(t):e.isParameterDeclaration(t)?ue(t,1,107455):ue(t,1,107454))}function Ie(n,r,i){return t.isDeclarationFile||e.isInAmbientContext(n)||!e.isAsyncFunction(n)||(k|=1024),f&&e.isObjectLiteralOrClassExpressionMethod(n)&&(n.flowNode=f),e.hasDynamicName(n)?fe(n,r,"__computed"):ue(n,r,i)}}();function i(t,n){var r=t.kind;switch(r){case 181:return function(e,t){var n=t,r=e.expression,i=r.kind;e.typeArguments&&(n|=3);(524288&t||function(e,t){switch(t){case 97:return!0;case 179:case 180:return 97===e.expression.kind}return!1}(r,i))&&(n|=192);91===r.kind&&(n|=67108864,16384&t&&(n|=32768));return e.transformFlags=536870912|n,-537396546&n}(t,n);case 182:return function(e,t){var n=t;e.typeArguments&&(n|=3);524288&t&&(n|=192);return e.transformFlags=536870912|n,-537396546&n}(t,n);case 233:return function(t,n){var r=3;0==(2&e.getModifierFlags(t))&&(r|=n);return t.transformFlags=536870912|r,-574674242&r}(t,n);case 185:return function(e,t){var n=t,r=e.expression,i=r.kind,a=r.transformFlags;202!==i&&184!==i||(n|=3);1024&a&&(n|=1024);return e.transformFlags=536870912|n,-536872258&n}(t,n);case 194:return function(e,t){var n=t,r=e.operatorToken.kind,i=e.left.kind;58===r&&178===i?n|=3272:58===r&&177===i?n|=3264:40!==r&&62!==r||(n|=32);return e.transformFlags=536870912|n,-536872258&n}(t,n);case 210:return function(e,t){var n=t;1024&e.expression.transformFlags&&(n|=192);return e.transformFlags=536870912|n,-536872258&n}(t,n);case 146:return function(t,n){var r=n,i=t.name,a=t.initializer,o=t.dotDotDotToken;(t.questionToken||t.type||4096&n||e.isThisIdentifier(i))&&(r|=3);e.hasModifier(t,92)&&(r|=262147);1048576&n&&(r|=8);(8388608&n||a||o)&&(r|=131264);return t.transformFlags=536870912|r,-536872258&r}(t,n);case 187:return function(t,n){var r=192|n;(e.hasModifier(t,2270)||t.typeParameters||t.type)&&(r|=3);e.hasModifier(t,256)&&(r|=16);1048576&n&&(r|=8);16384&n&&(r|=32768);return t.transformFlags=536870912|r,-601249090&r}(t,n);case 186:return function(t,n){var r=n;(e.hasModifier(t,2270)||t.typeParameters||t.type)&&(r|=3);e.hasModifier(t,256)&&(r|=t.asteriskToken?8:16);1048576&n&&(r|=8);163840&n&&(r|=192);t.asteriskToken&&(r|=768);return t.transformFlags=536870912|r,-601281858&r}(t,n);case 228:return function(t,n){var r,i=e.getModifierFlags(t);!t.body||2&i?r=3:(r=33554432|n,(2270&i||t.typeParameters||t.type)&&(r|=3),256&i&&(r|=t.asteriskToken?8:16),1048576&n&&(r|=8),163840&n&&(r|=192),t.asteriskToken&&(r|=768));return t.transformFlags=536870912|r,-601281858&r}(t,n);case 226:return function(e,t){var n=t;n|=8388800,1048576&t&&(n|=8);e.type&&(n|=3);return e.transformFlags=536870912|n,-536872258&n}(t,n);case 227:return function(e,t){var n=33554432|t;8388608&t&&(n|=192);3&e.flags&&(n|=4194496);return e.transformFlags=536870912|n,-546309442&n}(t,n);case 208:return function(t,n){var r,i=t.declarationList.transformFlags;e.hasModifier(t,2)?r=3:(r=n,8388608&i&&(r|=192));return t.transformFlags=536870912|r,-536872258&r}(t,n);case 222:return function(t,n){var r=n;4194304&n&&e.isIterationStatement(t,!0)&&(r|=192);return t.transformFlags=536870912|r,-536872258&r}(t,n);case 229:return function(t,n){var r;e.hasModifier(t,2)?r=3:(r=192|n,(274432&n||t.typeParameters)&&(r|=3),65536&n&&(r|=16384));return t.transformFlags=536870912|r,-539358530&r}(t,n);case 199:return function(e,t){var n=192|t;(274432&t||e.typeParameters)&&(n|=3);65536&t&&(n|=16384);return e.transformFlags=536870912|n,-539358530&n}(t,n);case 259:return function(t,n){var r=n;switch(t.token){case 85:r|=192;break;case 108:r|=3;break;default:e.Debug.fail("Unexpected token for heritage clause")}return t.transformFlags=536870912|r,-536872258&r}(t,n);case 260:return function(t,n){var r=n;t.variableDeclaration?e.isBindingPattern(t.variableDeclaration.name)&&(r|=192):r|=8;return t.transformFlags=536870912|r,-537920834&r}(t,n);case 201:return function(e,t){var n=192|t;e.typeArguments&&(n|=3);return e.transformFlags=536870912|n,-536872258&n}(t,n);case 152:return function(t,n){var r=n;!e.hasModifier(t,2270)&&t.body||(r|=3);1048576&n&&(r|=8);return t.transformFlags=536870912|r,-601015618&r}(t,n);case 149:return function(e,t){var n=3|t;e.initializer&&(n|=8192);return e.transformFlags=536870912|n,-536872258&n}(t,n);case 151:return function(t,n){var r=192|n;(t.decorators||e.hasModifier(t,2270)||t.typeParameters||t.type||!t.body)&&(r|=3);1048576&n&&(r|=8);e.hasModifier(t,256)&&(r|=t.asteriskToken?8:16);t.asteriskToken&&(r|=768);return t.transformFlags=536870912|r,-601015618&r}(t,n);case 153:case 154:return function(t,n){var r=n;(t.decorators||e.hasModifier(t,2270)||t.type||!t.body)&&(r|=3);1048576&n&&(r|=8);return t.transformFlags=536870912|r,-601015618&r}(t,n);case 237:return function(t,n){var r=n;e.isExternalModuleImportEqualsDeclaration(t)||(r|=3);return t.transformFlags=536870912|r,-536872258&r}(t,n);case 179:return function(e,t){var n=t;97===e.expression.kind&&(n|=16384);return e.transformFlags=536870912|n,-536872258&n}(t,n);default:return function(e,t,n){var r=n,i=536872257;switch(t){case 120:case 191:r|=24;break;case 114:case 112:case 113:case 117:case 124:case 76:case 232:case 264:case 184:case 202:case 203:case 131:r|=3;break;case 249:case 250:case 251:case 10:case 252:case 253:case 254:case 255:case 256:r|=4;break;case 13:case 14:case 15:case 16:case 196:case 183:case 262:case 115:case 204:r|=192;break;case 9:e.hasExtendedUnicodeEscape&&(r|=192);break;case 8:48&e.numericLiteralFlags&&(r|=192);break;case 216:e.awaitModifier&&(r|=8),r|=192;break;case 197:r|=16777416;break;case 119:case 133:case 130:case 134:case 136:case 122:case 137:case 105:case 145:case 148:case 150:case 155:case 156:case 157:case 158:case 159:case 160:case 161:case 162:case 163:case 164:case 165:case 166:case 167:case 168:case 230:case 231:case 169:case 170:case 171:case 172:case 173:case 236:r=3,i=-3;break;case 144:r|=2097152,16384&n&&(r|=65536);break;case 198:r|=524480;break;case 263:r|=1048584;break;case 97:r|=192;break;case 99:r|=16384;break;case 174:r|=8388800,524288&n&&(r|=1048584),i=537396545;break;case 175:r|=8388800,i=537396545;break;case 176:r|=192,e.dotDotDotToken&&(r|=524288);break;case 147:r|=4099;break;case 178:i=540087617,2097152&n&&(r|=192),65536&n&&(r|=16384),1048576&n&&(r|=8);break;case 177:case 182:i=537396545,524288&n&&(r|=192);break;case 212:case 213:case 214:case 215:4194304&n&&(r|=192);break;case 265:32768&n&&(r|=192);break;case 219:case 217:case 218:r|=33554432}return e.transformFlags=536870912|r,r&~i}(t,r,n)}}function a(e){if(e>=158&&e<=173)return-3;switch(e){case 181:case 182:case 177:return 537396545;case 233:return 574674241;case 146:return 536872257;case 187:return 601249089;case 186:case 228:return 601281857;case 227:return 546309441;case 229:case 199:return 539358529;case 152:return 601015617;case 151:case 153:case 154:return 601015617;case 119:case 133:case 130:case 136:case 134:case 122:case 137:case 105:case 145:case 148:case 150:case 155:case 156:case 157:case 230:case 231:return-3;case 178:return 540087617;case 260:return 537920833;case 174:case 175:return 537396545;default:return 536872257}}function o(t,n){n.parent=t,e.forEachChild(n,(function(e){return o(n,e)}))}e.bindSourceFile=function(t,n){e.performance.mark("beforeBind"),r(t,n),e.performance.mark("afterBind"),e.performance.measure("Bind","beforeBind","afterBind")},e.computeTransformFlagsForNode=i,e.getTransformFlagsSubtreeExclusions=a}(ts||(ts={})),function(e){e.createGetSymbolWalker=function(t,n,r,i,a,o,s,c,l){return function(u){void 0===u&&(u=function(){return!0});var d=[],p=[];return{walkType:function(t){try{return f(t),{visitedTypes:e.getOwnValues(d),visitedSymbols:e.getOwnValues(p)}}finally{e.clear(d),e.clear(p)}},walkSymbol:function(t){try{return g(t),{visitedTypes:e.getOwnValues(d),visitedSymbols:e.getOwnValues(p)}}finally{e.clear(d),e.clear(p)}}};function f(t){if(t&&(!d[t.id]&&(d[t.id]=t,!g(t.symbol)))){if(32768&t.flags){var n=t,i=n.objectFlags;4&i&&function(t){f(t.target),e.forEach(t.typeArguments,f)}(t),32&i&&function(e){f(e.typeParameter),f(e.constraintType),f(e.templateType),f(e.modifiersType)}(t),3&i&&(m(a=t),e.forEach(a.typeParameters,f),e.forEach(r(a),f),f(a.thisType)),24&i&&m(n)}var a;16384&t.flags&&function(e){f(c(e))}(t),196608&t.flags&&function(t){e.forEach(t.types,f)}(t),262144&t.flags&&function(e){f(e.type)}(t),524288&t.flags&&function(e){f(e.objectType),f(e.indexType),f(e.constraint)}(t)}}function _(r){r.typePredicate&&f(r.typePredicate.type),e.forEach(r.typeParameters,f);for(var i=0,a=r.parameters;i<a.length;i++){g(a[i])}f(t(r)),f(n(r))}function m(e){f(s(e,0)),f(s(e,1));for(var t=i(e),n=0,r=t.callSignatures;n<r.length;n++){_(r[n])}for(var a=0,o=t.constructSignatures;a<o.length;a++){_(o[a])}for(var c=0,l=t.properties;c<l.length;c++){g(l[c])}}function g(t){if(t){var n=e.getSymbolId(t);if(!p[n]){if(p[n]=t,!u(t))return!0;f(a(t)),1952&t.flags&&t.exports.forEach(g),e.forEach(t.declarations,(function(e){if(e.type&&162===e.type.kind){var t=e.type;g(o(l(t.exprName)))}}))}}}}}}(ts||(ts={})),function(e){function t(t){t.trace(e.formatMessage.apply(void 0,arguments))}function n(e,t){return e.traceResolution&&void 0!==t.trace}function r(e,t){return t&&{path:t.path,extension:t.ext,packageId:e}}function i(e){return r(void 0,e)}var a;function o(t){if(t)return e.Debug.assert(e.extensionIsTypeScript(t.extension)),{fileName:t.path,packageId:t.packageId}}function s(e,t,n){return{resolvedModule:e&&{resolvedFileName:e.path,extension:e.extension,isExternalLibraryImport:t,packageId:e.packageId},failedLookupLocations:n}}function c(e,t){try{var n=t.readFile(e);return n?JSON.parse(n):{}}catch(e){return{}}}function l(t,n){return t.typeRoots?t.typeRoots:(t.configFilePath?r=e.getDirectoryPath(t.configFilePath):n.getCurrentDirectory&&(r=n.getCurrentDirectory()),void 0!==r?function(t,n){if(!n.directoryExists)return[e.combinePaths(t,u)];var r;return e.forEachAncestorDirectory(e.normalizePath(t),(function(t){var i=e.combinePaths(t,u);n.directoryExists(i)&&(r||(r=[])).push(i)})),r}(r,n):void 0);var r}e.trace=t,e.isTraceEnabled=n,function(e){e[e.TypeScript=0]="TypeScript",e[e.JavaScript=1]="JavaScript",e[e.DtsOnly=2]="DtsOnly"}(a||(a={})),e.getEffectiveTypeRoots=l;var u=e.combinePaths("node_modules","@types");function d(n,r,a,o,s,c){return e.isExternalModuleNameRelative(r)?function(n,r,i,a,o,s){if(!s.compilerOptions.rootDirs)return;s.traceEnabled&&t(s.host,e.Diagnostics.rootDirs_option_is_set_using_it_to_resolve_relative_module_name_0,r);for(var c,l,u=e.normalizePath(e.combinePaths(i,r)),d=0,p=s.compilerOptions.rootDirs;d<p.length;d++){var f=p[d],_=e.normalizePath(f);e.endsWith(_,e.directorySeparator)||(_+=e.directorySeparator);var m=e.startsWith(u,_)&&(void 0===l||l.length<_.length);s.traceEnabled&&t(s.host,e.Diagnostics.Checking_if_0_is_the_longest_matching_prefix_for_1_2,_,u,m),m&&(l=_,c=f)}if(l){s.traceEnabled&&t(s.host,e.Diagnostics.Longest_matching_prefix_for_0_is_1,u,l);var h=u.substr(l.length);s.traceEnabled&&t(s.host,e.Diagnostics.Loading_0_from_the_root_dir_1_candidate_location_2,h,l,u);var y=a(n,u,o,!g(i,s.host),s);if(y)return y;s.traceEnabled&&t(s.host,e.Diagnostics.Trying_other_entries_in_rootDirs);for(var v=0,b=s.compilerOptions.rootDirs;v<b.length;v++){if((f=b[v])!==c){var x=e.combinePaths(e.normalizePath(f),h);s.traceEnabled&&t(s.host,e.Diagnostics.Loading_0_from_the_root_dir_1_candidate_location_2,h,f,x);var k=a(n,x,o,!g(e.getDirectoryPath(x),s.host),s);if(k)return k}}s.traceEnabled&&t(s.host,e.Diagnostics.Module_resolution_using_rootDirs_has_failed)}return}(n,r,a,o,s,c):function(n,r,a,o,s){if(!s.compilerOptions.baseUrl)return;s.traceEnabled&&t(s.host,e.Diagnostics.baseUrl_option_is_set_to_0_using_this_value_to_resolve_non_relative_module_name_1,s.compilerOptions.baseUrl,r);var c=void 0;s.compilerOptions.paths&&(s.traceEnabled&&t(s.host,e.Diagnostics.paths_option_is_specified_looking_for_a_pattern_to_match_module_name_0,r),c=e.matchPatternOrExact(e.getOwnKeys(s.compilerOptions.paths),r));if(c){var l=e.isString(c)?void 0:e.matchedText(c,r),u=e.isString(c)?c:e.patternText(c);return s.traceEnabled&&t(s.host,e.Diagnostics.Module_name_0_matched_pattern_1,r,u),e.forEach(s.compilerOptions.paths[u],(function(r){var c=l?r.replace("*",l):r,u=e.normalizePath(e.combinePaths(s.compilerOptions.baseUrl,c));s.traceEnabled&&t(s.host,e.Diagnostics.Trying_substitution_0_candidate_module_location_Colon_1,r,c);var d=e.tryGetExtensionFromPath(u);if(void 0!==d){var p=b(u,o,!1,s);if(void 0!==p)return i({path:p,ext:d})}return a(n,u,o,!g(e.getDirectoryPath(u),s.host),s)}))}var d=e.normalizePath(e.combinePaths(s.compilerOptions.baseUrl,r));return s.traceEnabled&&t(s.host,e.Diagnostics.Resolving_module_name_0_relative_to_base_url_1_2,r,s.compilerOptions.baseUrl,d),a(n,d,o,!g(e.getDirectoryPath(d),s.host),s)}(n,r,o,s,c)}function p(t,n,r,i,a){return f(t,e.getDirectoryPath(n),r,i,a,!1)}function f(r,i,o,c,l,u){var p=n(o,c),f=[],g={compilerOptions:o,host:c,traceEnabled:p},h=u?v(a.JavaScript):v(a.TypeScript)||v(a.JavaScript);if(h&&h.value){var y=h.value;return s(y.resolved,y.isExternalLibraryImport,f)}return{resolvedModule:void 0,failedLookupLocations:f};function v(n){var s=d(n,r,i,(function(e,t,n,r,i){return m(e,t,n,r,i,!0)}),f,g);if(s)return F({resolved:s,isExternalLibraryImport:!1});if(e.isExternalModuleNameRelative(r)){var u=e.normalizePathAndParts(e.combinePaths(i,r)),h=u.path,y=u.parts,v=m(n,h,f,!1,g,!0);return v&&F({resolved:v,isExternalLibraryImport:e.contains(y,"node_modules")})}p&&t(c,e.Diagnostics.Loading_module_0_from_node_modules_folder_target_file_type_1,r,a[n]);var b=D(n,r,i,f,g,l);if(b){var x=b.value;return o.preserveSymlinks||(x=x&&__assign({},b.value,{path:_(b.value.path,c,p),extension:b.value.extension})),{value:x&&{resolved:x,isExternalLibraryImport:!0}}}}}function _(n,r,i){if(!r.realpath)return n;var a=e.normalizePath(r.realpath(n));return i&&t(r,e.Diagnostics.Resolving_real_path_for_0_result_1,n,a),a}function m(n,r,o,s,c,l){if(c.traceEnabled&&t(c.host,e.Diagnostics.Loading_module_as_file_Slash_folder_candidate_module_location_0_target_file_type_1,r,a[n]),!e.pathEndsWithDirectorySeparator(r)){if(!s){var u=e.getDirectoryPath(r);g(u,c.host)||(c.traceEnabled&&t(c.host,e.Diagnostics.Directory_0_does_not_exist_skipping_all_lookups_in_it,u),s=!0)}var d=y(n,r,o,s,c);if(d)return i(d)}s||(g(r,c.host)||(c.traceEnabled&&t(c.host,e.Diagnostics.Directory_0_does_not_exist_skipping_all_lookups_in_it,r),s=!0));return x(n,r,o,s,c,l)}function g(e,t){return!t.directoryExists||t.directoryExists(e)}function h(e,t,n,r,a){return i(y(e,t,n,r,a))}function y(n,r,i,a,o){var s=v(r,n,i,a,o);if(s)return s;if(e.hasJavaScriptFileExtension(r)){var c=e.removeFileExtension(r);if(o.traceEnabled){var l=r.substring(c.length);t(o.host,e.Diagnostics.File_name_0_has_a_1_extension_stripping_it,r,l)}return v(c,n,i,a,o)}}function v(t,n,r,i,o){if(!i){var s=e.getDirectoryPath(t);s&&(i=!g(s,o.host))}switch(n){case a.DtsOnly:return c(".d.ts");case a.TypeScript:return c(".ts")||c(".tsx")||c(".d.ts");case a.JavaScript:return c(".js")||c(".jsx")}function c(e){var n=b(t+e,r,i,o);return n&&{path:n,ext:e}}}function b(n,r,i,a){if(!i){if(a.host.fileExists(n))return a.traceEnabled&&t(a.host,e.Diagnostics.File_0_exist_use_it_as_a_name_resolution_result,n),n;a.traceEnabled&&t(a.host,e.Diagnostics.File_0_does_not_exist,n)}r.push(n)}function x(e,t,n,i,a,o){void 0===o&&(o=!0);var s=o?S(t,"",n,i,a):{packageJsonContent:void 0,packageId:void 0},c=s.packageJsonContent;return r(s.packageId,k(e,t,n,i,a,c))}function k(n,r,i,o,s,c){var l=c&&function(n,r,i,o,s){var c=function(n,r,i,a){return n?o("typings")||o("types"):o("main");function o(n){if(e.hasProperty(r,n)){var o=r[n];if(e.isString(o)){var s=e.normalizePath(e.combinePaths(i,o));return a.traceEnabled&&t(a.host,e.Diagnostics.package_json_has_0_field_1_that_references_2,n,o,s),s}a.traceEnabled&&t(a.host,e.Diagnostics.Expected_type_of_0_field_in_package_json_to_be_string_got_1,n,typeof o)}else a.traceEnabled&&t(a.host,e.Diagnostics.package_json_does_not_have_a_0_field,n)}}(r!==a.JavaScript,n,i,s);if(!c)return;var l=!g(e.getDirectoryPath(c),s.host),u=b(c,o,l,s);if(u){var d=u&&function(t,n){var r=e.tryGetExtensionFromPath(n);return void 0!==r&&function(e,t){switch(e){case a.JavaScript:return".js"===t||".jsx"===t;case a.TypeScript:return".ts"===t||".tsx"===t||".d.ts"===t;case a.DtsOnly:return".d.ts"===t}}(t,r)?{path:n,ext:r}:void 0}(r,u);if(d)return d;s.traceEnabled&&t(s.host,e.Diagnostics.File_0_has_an_unsupported_extension_so_skipping_it,u)}var p=m(r===a.DtsOnly?a.TypeScript:r,c,o,l,s,!1);if(p)return e.Debug.assert(void 0===p.packageId),{path:p.path,ext:p.extension}}(c,n,r,i,s);if(l)return l;var u=!o&&g(r,s.host);return y(n,e.combinePaths(r,"index"),i,!u,s)}function S(n,r,i,a,o){var s=o.host,l=o.traceEnabled,u=!a&&g(n,s),d=T(n);if(u&&s.fileExists(d)){l&&t(s,e.Diagnostics.Found_package_json_at_0,d);var p=c(d,s);return{found:!0,packageJsonContent:p,packageId:"string"==typeof p.name&&"string"==typeof p.version?{name:p.name,subModuleName:r,version:p.version}:void 0}}return u&&l&&t(s,e.Diagnostics.File_0_does_not_exist,d),i.push(d),{found:!1,packageJsonContent:void 0,packageId:void 0}}function T(t){return e.combinePaths(t,"package.json")}function C(t,n,i,a,o,s){var c,l,u=e.normalizePath(e.combinePaths(i,n)),d=S(u,"",o,!a,s);if(d.found)c=d.packageJsonContent,l=d.packageId;else{var p=E(n),f=p.packageName,_=p.rest;if(""!==_)l=S(e.combinePaths(i,f),_,o,!a,s).packageId}return r(l,y(t,u,o,!a,s)||k(t,u,o,!a,s,c))}function E(t){var n=t.indexOf(e.directorySeparator);return"@"===t[0]&&(n=t.indexOf(e.directorySeparator,n+1)),-1===n?{packageName:t,rest:""}:{packageName:t.slice(0,n),rest:t.slice(n+1)}}function D(e,t,n,r,i,a){return A(e,t,n,r,i,!1,a)}function A(t,n,r,i,a,o,s){var c=s&&s.getOrCreateCacheForModuleName(n);return e.forEachAncestorDirectory(e.normalizeSlashes(r),(function(r){if("node_modules"!==e.getBaseFileName(r)){var s=P(c,n,r,a.traceEnabled,a.host);return s||F(w(t,n,r,i,a,o))}}))}function w(n,r,i,o,s,c){void 0===c&&(c=!1);var l=e.combinePaths(i,"node_modules"),u=g(l,s.host);!u&&s.traceEnabled&&t(s.host,e.Diagnostics.Directory_0_does_not_exist_skipping_all_lookups_in_it,l);var d=c?void 0:C(n,r,l,u,o,s);if(d)return d;if(n!==a.JavaScript){var p=e.combinePaths(l,"@types"),f=u;return u&&!g(p,s.host)&&(s.traceEnabled&&t(s.host,e.Diagnostics.Directory_0_does_not_exist_skipping_all_lookups_in_it,p),f=!1),C(a.DtsOnly,function(n,r){var i=I(n);r.traceEnabled&&i!==n&&t(r.host,e.Diagnostics.Scoped_package_detected_looking_in_0,i);return i}(r,s),p,f,o,s)}}e.resolveTypeReferenceDirective=function(r,i,s,c){var u=n(s,c),d={compilerOptions:s,host:c,traceEnabled:u},p=l(s,c);u&&(void 0===i?void 0===p?t(c,e.Diagnostics.Resolving_type_reference_directive_0_containing_file_not_set_root_directory_not_set,r):t(c,e.Diagnostics.Resolving_type_reference_directive_0_containing_file_not_set_root_directory_1,r,p):void 0===p?t(c,e.Diagnostics.Resolving_type_reference_directive_0_containing_file_1_root_directory_not_set,r,i):t(c,e.Diagnostics.Resolving_type_reference_directive_0_containing_file_1_root_directory_2,r,i,p));var f,m=[],h=function(){if(p&&p.length)return u&&t(c,e.Diagnostics.Resolving_with_primary_search_path_0,p.join(", ")),e.forEach(p,(function(n){var i=e.combinePaths(n,r),s=e.getDirectoryPath(i),l=g(s,c);return!l&&u&&t(c,e.Diagnostics.Directory_0_does_not_exist_skipping_all_lookups_in_it,s),o(x(a.DtsOnly,i,m,!l,d))}));u&&t(c,e.Diagnostics.Root_directory_cannot_be_determined_skipping_primary_search_paths)}(),y=!0;return h||(h=function(){var n,s=i&&e.getDirectoryPath(i);if(void 0!==s){u&&t(c,e.Diagnostics.Looking_up_in_node_modules_folder_initial_location_0,s);var l=D(a.DtsOnly,r,s,m,d,void 0);return!(n=o(l&&l.value))&&u&&t(c,e.Diagnostics.Type_reference_directive_0_was_not_resolved,r),n}u&&t(c,e.Diagnostics.Containing_file_is_not_specified_and_root_directory_cannot_be_determined_skipping_lookup_in_node_modules_folder)}(),y=!1),h&&(s.preserveSymlinks||(h=__assign({},h,{fileName:_(h.fileName,c,u)})),u&&t(c,e.Diagnostics.Type_reference_directive_0_was_successfully_resolved_to_1_primary_Colon_2,r,h.fileName,y),f={primary:y,resolvedFileName:h.fileName,packageId:h.packageId}),{resolvedTypeReferenceDirective:f,failedLookupLocations:m}},e.getAutomaticTypeDirectiveNames=function(t,n){if(t.types)return t.types;var r=[];if(n.directoryExists&&n.getDirectories){var i=l(t,n);if(i)for(var a=0,o=i;a<o.length;a++){var s=o[a];if(n.directoryExists(s))for(var u=0,d=n.getDirectories(s);u<d.length;u++){var p=d[u],f=e.normalizePath(p),_=T(e.combinePaths(s,f));n.fileExists(_)&&null===c(_,n).typings||r.push(e.getBaseFileName(f))}}}return r},e.createModuleResolutionCache=function(t,n){var r=e.createMap(),i=e.createMap();return{getOrCreateCacheForDirectory:function(i){var a=e.toPath(i,t,n),o=r.get(a);o||(o=e.createMap(),r.set(a,o));return o},getOrCreateCacheForModuleName:function(r){if(e.isExternalModuleNameRelative(r))return;var a=i.get(r);a||(a=function(){var r=e.createMap();return{get:i,set:a};function i(i){return r.get(e.toPath(i,t,n))}function a(i,a){var s=e.toPath(i,t,n);if(!r.has(s)){r.set(s,a);for(var c=o(s,a.resolvedModule&&a.resolvedModule.resolvedFileName),l=s;;){var u=e.getDirectoryPath(l);if(u===l||r.has(u))break;if(r.set(u,a),(l=u)===c)break}}}function o(r,i){if(void 0!==i){for(var a=e.toPath(e.getDirectoryPath(i),t,n),o=0;o<Math.min(r.length,a.length)&&r.charCodeAt(o)===a.charCodeAt(o);)o++;var s=r.lastIndexOf(e.directorySeparator,o);if(!(s<0))return r.substr(0,s)}}}(),i.set(r,a));return a}}},e.resolveModuleName=function(r,i,a,o,s){var c=n(a,o);c&&t(o,e.Diagnostics.Resolving_module_0_from_1,r,i);var l=e.getDirectoryPath(i),u=s&&s.getOrCreateCacheForDirectory(l),d=u&&u.get(r);if(d)c&&t(o,e.Diagnostics.Resolution_for_module_0_was_found_in_cache,r);else{var f=a.moduleResolution;switch(void 0===f?(f=e.getEmitModuleKind(a)===e.ModuleKind.CommonJS?e.ModuleResolutionKind.NodeJs:e.ModuleResolutionKind.Classic,c&&t(o,e.Diagnostics.Module_resolution_kind_is_not_specified_using_0,e.ModuleResolutionKind[f])):c&&t(o,e.Diagnostics.Explicitly_specified_module_resolution_kind_Colon_0,e.ModuleResolutionKind[f]),f){case e.ModuleResolutionKind.NodeJs:d=p(r,i,a,o,s);break;case e.ModuleResolutionKind.Classic:d=O(r,i,a,o,s);break;default:e.Debug.fail("Unexpected moduleResolution: "+f)}if(u){u.set(r,d);var _=s.getOrCreateCacheForModuleName(r);_&&_.set(l,d)}}return c&&(d.resolvedModule?t(o,e.Diagnostics.Module_name_0_was_successfully_resolved_to_1,r,d.resolvedModule.resolvedFileName):t(o,e.Diagnostics.Module_name_0_was_not_resolved,r)),d},e.nodeModuleNameResolver=p,e.resolveJavaScriptModule=function(t,n,r){var i=f(t,n,{moduleResolution:e.ModuleResolutionKind.NodeJs,allowJs:!0},r,void 0,!0),a=i.resolvedModule,o=i.failedLookupLocations;if(!a)throw new Error("Could not resolve JS module '"+t+"' starting at '"+n+"'. Looked in: "+o.join(", "));return a.resolvedFileName},e.directoryProbablyExists=g,e.getPackageName=E;var N="__";function I(t){if(e.startsWith(t,"@")){var n=t.replace(e.directorySeparator,N);if(n!==t)return n.slice(1)}return t}function P(n,r,i,a,o){var s=n&&n.get(i);if(s)return a&&t(o,e.Diagnostics.Resolution_for_module_0_was_found_in_cache,r),{value:s.resolvedModule&&{path:s.resolvedModule.resolvedFileName,extension:s.resolvedModule.extension,packageId:s.resolvedModule.packageId}}}function O(t,r,i,o,c){var l=n(i,o),u={compilerOptions:i,host:o,traceEnabled:l},p=[],f=e.getDirectoryPath(r),_=m(a.TypeScript)||m(a.JavaScript);return s(_&&_.value,!1,p);function m(n){var r=d(n,t,f,h,p,u);if(r)return{value:r};var i=c&&c.getOrCreateCacheForModuleName(t);if(e.isExternalModuleNameRelative(t)){var s=e.normalizePath(e.combinePaths(f,t));return F(h(n,s,p,!1,u))}var _=e.forEachAncestorDirectory(f,(function(r){var a=P(i,t,r,l,o);if(a)return a;var s=e.normalizePath(e.combinePaths(r,t));return F(h(n,s,p,!1,u))}));return _||(n===a.TypeScript?function(e,t,n,r){return A(a.DtsOnly,e,t,n,r,!0,void 0)}(t,f,p,u):void 0)}}function F(e){return void 0!==e?{value:e}:void 0}e.getTypesPackageName=function(e){return"@types/"+I(e)},e.getPackageNameFromAtTypesDirectory=function(t){var n=e.removePrefix(t,"@types/");return n!==t?e.stringContains(n,N)?"@"+n.replace(N,e.directorySeparator):n:t},e.classicNameResolver=O,e.loadModuleFromGlobalCache=function(r,i,o,c,l){var u=n(o,c);u&&t(c,e.Diagnostics.Auto_discovery_for_typings_is_enabled_in_project_0_Running_extra_resolution_pass_for_module_1_using_cache_location_2,i,r,l);var d={compilerOptions:o,host:c,traceEnabled:u},p=[];return s(w(a.DtsOnly,r,l,p,d),!0,p)}}(ts||(ts={})),function(e){var t=/^".+"$/,n=1,r=1,i=1,a=1;function o(e){return e.id||(e.id=r,r++),e.id}function s(e){return e.id||(e.id=n,n++),e.id}function c(t,n){var r=e.getModuleInstanceState(t);return 1===r||n&&2===r}function l(t){switch(t.parent.kind){case 242:case 246:return!0;default:return e.isDeclarationName(t)}}function u(e){switch(e.kind){case 239:case 237:case 240:case 242:return!0;case 71:return 242===e.parent.kind;default:return!1}}e.getNodeId=o,e.getSymbolId=s,e.isInstantiatedModule=c,e.createTypeChecker=function(n,r){var d,p,f,_=e.objectAllocator.getSymbolConstructor(),m=e.objectAllocator.getTypeConstructor(),g=e.objectAllocator.getSignatureConstructor(),h=0,y=0,v=0,b=0,x=e.createSymbolTable(),k=e.identity,S=n.getCompilerOptions(),T=e.getEmitScriptTarget(S),C=e.getEmitModuleKind(S),E=!!S.noUnusedLocals||!!S.noUnusedParameters,D=void 0!==S.allowSyntheticDefaultImports?S.allowSyntheticDefaultImports:C===e.ModuleKind.System,A=void 0===S.strictNullChecks?S.strict:S.strictNullChecks,w=void 0===S.strictFunctionTypes?S.strict:S.strictFunctionTypes,N=void 0===S.noImplicitAny?S.strict:S.noImplicitAny,I=void 0===S.noImplicitThis?S.strict:S.noImplicitThis,P=function(){var t,r=n.getResolvedTypeReferenceDirectives();r&&(t=e.createMap(),r.forEach((function(e,r){if(e){var i=n.getSourceFile(e.resolvedFileName);t.set(i.path,r)}})));return{getReferencedExportContainer:E_,getReferencedImportDeclaration:D_,getReferencedDeclarationWithCollidingName:w_,isDeclarationWithCollidingName:N_,isValueAliasDeclaration:function(t){return!(t=e.getParseTreeNode(t))||I_(t)},hasGlobalName:H_,isReferencedAliasDeclaration:function(t,n){return!(t=e.getParseTreeNode(t))||L_(t,n)},getNodeCheckFlags:function(t){return(t=e.getParseTreeNode(t))?B_(t):void 0},isTopLevelValueImportEqualsWithEntityName:P_,isDeclarationVisible:Lr,isImplementationOfOverload:R_,isRequiredInitializedParameter:M_,isOptionalUninitializedParameterProperty:U_,writeTypeOfDeclaration:J_,writeReturnTypeOfSignatureDeclaration:q_,writeTypeOfExpression:V_,isSymbolAccessible:hr,isEntityNameVisible:br,getConstantValue:function(t){return(t=e.getParseTreeNode(t,$_))?K_(t):void 0},collectLinkedAliases:Rr,getReferencedValueDeclaration:W_,getTypeReferenceSerializationKind:z_,isOptionalParameter:Na,moduleExportsSomeValue:C_,isArgumentsLocalBinding:T_,getExternalModuleFileFromDeclaration:X_,getTypeReferenceDirectivesForEntityName:function(e){if(!t)return;var n=179===e.kind||71===e.kind&&qc(e)?1156031:794600,r=$n(e,n,!0);return r&&r!==q?i(r,n):void 0},getTypeReferenceDirectivesForSymbol:i,isLiteralConstDeclaration:Q_,writeLiteralConstValue:Y_,getJsxFactoryEntity:function(){return It}};function i(n,r){if(t&&function(n){if(!n.declarations)return!1;var r=n;for(;;){var i=tr(r);if(!i)break;r=i}if(r.valueDeclaration&&265===r.valueDeclaration.kind&&512&r.flags)return!1;for(var a=0,o=n.declarations;a<o.length;a++){var s=o[a],c=e.getSourceFileOfNode(s);if(t.has(c.path))return!0}return!1}(n)){for(var i,a=0,o=n.declarations;a<o.length;a++){var s=o[a];if(s.symbol&&s.symbol.flags&r){var c=e.getSourceFileOfNode(s),l=t.get(c.path);if(!l)return;(i||(i=[])).push(l)}}return i}}}(),O=function(){return{typeToTypeNode:function(e,r,i){var a=t(r,i),o=n(e,a);return a.encounteredError?void 0:o},indexInfoToIndexSignatureDeclaration:function(e,n,r,a){var o=t(r,a),s=i(e,n,o);return o.encounteredError?void 0:s},signatureToSignatureDeclaration:function(e,n,r,i){var o=t(r,i),s=a(e,n,o);return o.encounteredError?void 0:s}};function t(e,t){return{enclosingDeclaration:e,flags:t,encounteredError:!1,symbolStack:void 0}}function n(t,s){var l=s.flags&e.NodeBuilderFlags.InTypeAlias;if(s.flags&=~e.NodeBuilderFlags.InTypeAlias,t){if(1&t.flags)return e.createKeywordTypeNode(119);if(2&t.flags)return e.createKeywordTypeNode(136);if(4&t.flags)return e.createKeywordTypeNode(133);if(8&t.flags)return e.createKeywordTypeNode(122);if(256&t.flags&&!(65536&t.flags)){var u=tr(t.symbol),d=c(u,s,793064,!1),p=Pi(u)===t?d:e.createQualifiedName(d,Or(t.symbol,s));return e.createTypeReferenceNode(p,void 0)}if(272&t.flags){var f=c(t.symbol,s,793064,!1);return e.createTypeReferenceNode(f,void 0)}if(32&t.flags)return e.createLiteralTypeNode(e.setEmitFlags(e.createLiteral(t.value),16777216));if(64&t.flags)return e.createLiteralTypeNode(e.createLiteral(t.value));if(128&t.flags)return"true"===t.intrinsicName?e.createTrue():e.createFalse();if(1024&t.flags)return e.createKeywordTypeNode(105);if(2048&t.flags)return e.createKeywordTypeNode(139);if(4096&t.flags)return e.createKeywordTypeNode(95);if(8192&t.flags)return e.createKeywordTypeNode(130);if(512&t.flags)return e.createKeywordTypeNode(137);if(16777216&t.flags)return e.createKeywordTypeNode(134);if(16384&t.flags&&t.isThisType)return s.flags&e.NodeBuilderFlags.InObjectTypeLiteral&&(s.encounteredError||s.flags&e.NodeBuilderFlags.AllowThisInObjectLiteral||(s.encounteredError=!0)),e.createThis();var _=yn(t);if(4&_)return e.Debug.assert(!!(32768&t.flags)),function(t){var i=t.typeArguments||e.emptyArray;if(t.target===Te){if(s.flags&e.NodeBuilderFlags.WriteArrayAsGenericType){var a=n(i[0],s);return e.createTypeReferenceNode("Array",[a])}var o=n(i[0],s);return e.createArrayTypeNode(o)}if(8&t.target.objectFlags){if(i.length>0){var c=r(i.slice(0,Za(t)),s);if(c&&c.length>0)return e.createTupleTypeNode(c)}return s.encounteredError||s.flags&e.NodeBuilderFlags.AllowEmptyTuple?e.createTupleTypeNode([]):void(s.encounteredError=!0)}var l=t.target.outerTypeParameters,u=0,d=void 0;if(l)for(var p=l.length;u<p;){var f=u,_=Ga(l[u]);do{u++}while(u<p&&Ga(l[u])===_);if(!e.rangeEquals(l,i,f,u)){var m=r(i.slice(f,u),s),g=m&&e.createNodeArray(m),h=b(_);(71===h.kind?h:h.right).typeArguments=g,d?(e.Debug.assert(!d.right),d=x(d,h),d=e.createQualifiedName(d,void 0)):d=e.createQualifiedName(h,void 0)}}var y=void 0,v=b(t.symbol);d?(e.Debug.assert(!d.right),y=d=x(d,v)):y=v;var k=void 0;if(i.length>0){var S=(t.target.typeParameters||e.emptyArray).length;k=r(i.slice(u,S),s)}return k&&((71===y.kind?y:y.right).typeArguments=void 0),e.createTypeReferenceNode(y,k)}(t);if(16384&t.flags||3&_){f=t.symbol?c(t.symbol,s,793064,!1):e.createIdentifier("?");return e.createTypeReferenceNode(f,void 0)}if(!l&&t.aliasSymbol&&gr(t.aliasSymbol,s.enclosingDeclaration)){f=b(t.aliasSymbol);var m=r(t.aliasTypeArguments,s);return e.createTypeReferenceNode(f,m)}if(196608&t.flags){var g=r(65536&t.flags?Ar(t.types):t.types,s);return g&&g.length>0?e.createUnionOrIntersectionTypeNode(65536&t.flags?166:167,g):void(s.encounteredError||s.flags&e.NodeBuilderFlags.AllowEmptyUnionOrIntersection||(s.encounteredError=!0))}if(48&_)return e.Debug.assert(!!(32768&t.flags)),function(t){var n=t.symbol;if(n){if(32&n.flags&&!oi(n)||896&n.flags||o())return function(t,n){var r=c(t,s,n,!1);return e.createTypeQueryNode(r)}(n,107455);if(e.contains(s.symbolStack,n)){var r=Nr(t);if(r){var i=c(r,s,793064,!1);return e.createTypeReferenceNode(i,void 0)}return e.createKeywordTypeNode(119)}s.symbolStack||(s.symbolStack=[]),s.symbolStack.push(n);var a=v(t);return s.symbolStack.pop(),a}return v(t);function o(){var t=!!(8192&n.flags)&&e.some(n.declarations,(function(t){return e.hasModifier(t,32)})),r=!!(16&n.flags)&&(n.parent||e.forEach(n.declarations,(function(e){return 265===e.parent.kind||234===e.parent.kind})));if(t||r)return e.contains(s.symbolStack,n)}}(t);if(262144&t.flags){var h=n(t.type,s);return e.createTypeOperatorNode(h)}if(524288&t.flags){var y=n(t.objectType,s);h=n(t.indexType,s);return e.createIndexedAccessTypeNode(y,h)}e.Debug.fail("Should be unreachable.")}else s.encounteredError=!0;function v(t){if(ra(t))return function(t){e.Debug.assert(!!(32768&t.flags));var r=t.declaration&&t.declaration.readonlyToken?e.createToken(131):void 0,i=t.declaration&&t.declaration.questionToken?e.createToken(55):void 0,a=o(ea(t),s),c=n(na(t),s),l=e.createMappedTypeNode(r,a,i,c);return e.setEmitFlags(l,1)}(t);var r=ia(t);if(!r.properties.length&&!r.stringIndexInfo&&!r.numberIndexInfo){if(!r.callSignatures.length&&!r.constructSignatures.length)return e.setEmitFlags(e.createTypeLiteralNode(void 0),1);if(1===r.callSignatures.length&&!r.constructSignatures.length)return a(r.callSignatures[0],160,s);if(1===r.constructSignatures.length&&!r.callSignatures.length)return a(r.constructSignatures[0],161,s)}var l=s.flags;s.flags|=e.NodeBuilderFlags.InObjectTypeLiteral;var u=function(t){for(var r=[],o=0,l=t.callSignatures;o<l.length;o++){var u=l[o];r.push(a(u,155,s))}for(var d=0,p=t.constructSignatures;d<p.length;d++){u=p[d];r.push(a(u,156,s))}t.stringIndexInfo&&r.push(i(t.stringIndexInfo,0,s));t.numberIndexInfo&&r.push(i(t.numberIndexInfo,1,s));var f=t.properties;if(!f)return r;for(var _=0,m=f;_<m.length;_++){var g=m[_],h=ci(g),y=s.enclosingDeclaration;s.enclosingDeclaration=void 0;var v=c(g,s,107455,!0);s.enclosingDeclaration=y;var b=16777216&g.flags?e.createToken(55):void 0;if(8208&g.flags&&!aa(h).length)for(var x=0,k=xa(h,0);x<k.length;x++){var S=a(u=k[x],150,s);S.name=v,S.questionToken=b,r.push(S)}else{var T=h?n(h,s):e.createKeywordTypeNode(119),C=ep(g)?[e.createToken(131)]:void 0,E=e.createPropertySignature(C,v,b,T,void 0);r.push(E)}}return r.length?r:void 0}(r);s.flags=l;var d=e.createTypeLiteralNode(u);return e.setEmitFlags(d,1)}function b(t){return 32&t.flags||!cr(t.escapedName)?c(t,s,793064,!1):e.createIdentifier("")}function x(t,n){if(e.Debug.assert(void 0===t.right),71===n.kind)return t.right=n,t;for(var r=n;71!==r.left.kind;)r=r.left;return t.right=r.left,r.left=t,n}}function r(t,r){if(e.some(t)){for(var i=[],a=0;a<t.length;++a){var o=n(t[a],r);o&&i.push(o)}return i}}function i(t,r,i){var a=e.getNameFromIndexInfo(t)||"x",o=e.createKeywordTypeNode(0===r?136:133),s=e.createParameter(void 0,void 0,void 0,a,void 0,o,void 0),c=n(t.type,i);return e.createIndexSignature(void 0,t.isReadonly?[e.createToken(131)]:void 0,[s],c)}function a(t,r,i){var a,c=t.typeParameters&&t.typeParameters.map((function(e){return o(e,i)})),l=t.parameters.map((function(e){return s(e,i)}));if(t.thisParameter){var u=s(t.thisParameter,i);l.unshift(u)}if(t.typePredicate){var d=t.typePredicate,p=1===d.kind?e.setEmitFlags(e.createIdentifier(d.parameterName),16777216):e.createThisTypeNode(),f=n(d.type,i);a=e.createTypePredicateNode(p,f)}else{var _=Ra(t);a=_&&n(_,i)}return i.flags&e.NodeBuilderFlags.SuppressAnyReturnType?a&&119===a.kind&&(a=void 0):a||(a=e.createKeywordTypeNode(119)),e.createSignatureDeclaration(r,c,l,a)}function o(t,r){var i=c(t.symbol,r,793064,!0),a=Ha(t),o=a&&n(a,r),s=_a(t),l=s&&n(s,r);return e.createTypeParameterDeclaration(i,o,l)}function s(t,r){var i=e.getDeclarationOfKind(t,146);if(un(t)&&t.isRestParameter)return e.createParameter(void 0,void 0,t.isRestParameter?e.createToken(24):void 0,"args",void 0,n(Ie,r),void 0);var a=i.modifiers&&i.modifiers.map(e.getSynthesizedClone),o=e.isRestParameter(i)?e.createToken(24):void 0,s=i.name?71===i.name.kind?e.setEmitFlags(e.getSynthesizedClone(i.name),16777216):function t(n){var r=e.visitEachChild(n,t,e.nullTransformationContext,void 0,t),i=e.nodeIsSynthesized(r)?r:e.getSynthesizedClone(r);return 176===i.kind&&(i.initializer=void 0),e.setEmitFlags(i,16777217)}(i.name):e.symbolName(t),c=Na(i)?e.createToken(55):void 0,l=ci(t);M_(i)&&(l=bc(l,2048));var u=n(l,r);return e.createParameter(void 0,a,o,s,c,u,void 0)}function c(t,n,i,a){var o;return!(262144&t.flags)&&(n.enclosingDeclaration||n.flags&e.NodeBuilderFlags.UseFullyQualifiedType)?(o=function t(r,i,a){var o,s=_r(r,n.enclosingDeclaration,i,!1);if(!s||mr(s[0],n.enclosingDeclaration,1===s.length?i:fr(i))){var c=tr(s?s[0]:r);if(c){var l=t(c,fr(i),!1);l&&(o=c,s=l.concat(s||[r]))}}if(s)return s;if(a||(o||!e.forEach(r.declarations,yr))&&!(6144&r.flags))return[r]}(t,i,!0),e.Debug.assert(o&&o.length>0)):o=[t],!a||1===o.length||n.encounteredError||n.flags&e.NodeBuilderFlags.AllowQualifedNameInPlaceOfIdentifier||(n.encounteredError=!0),function t(i,a){e.Debug.assert(i&&0<=a&&a<i.length);var o,s=i[a];if(n.flags&e.NodeBuilderFlags.WriteTypeParametersInQualifiedName&&a>0){var c=i[a-1],l=void 0;if(1&e.getCheckFlags(s))l=gi(c);else 524384&Vf(c).flags&&(l=mi(s));o=r(l,n)}var u=Or(s,n),d=e.setEmitFlags(e.createIdentifier(u,o),16777216);return a>0?e.createQualifiedName(t(i,a-1),d):d}(o,o.length-1)}}(),F=ln(4,"undefined");F.declarations=[];var L,R,M=ln(4,"arguments"),U={getNodeCount:function(){return e.sum(n.getSourceFiles(),"nodeCount")},getIdentifierCount:function(){return e.sum(n.getSourceFiles(),"identifierCount")},getSymbolCount:function(){return e.sum(n.getSourceFiles(),"symbolCount")+y},getTypeCount:function(){return h},isUndefinedSymbol:function(e){return e===F},isArgumentsSymbol:function(e){return e===M},isUnknownSymbol:function(e){return e===q},getMergedSymbol:Zn,getDiagnostics:d_,getGlobalDiagnostics:function(){return p_(),wt.getGlobalDiagnostics()},getTypeOfSymbolAtLocation:function(t,n){return(n=e.getParseTreeNode(n))?function(t,n){if(t=t.exportSymbol||t,71===n.kind&&(e.isRightSideOfQualifiedNameOrPropertyAccess(n)&&(n=n.parent),e.isPartOfExpression(n)&&!e.isAssignmentTarget(n))){var r=Ep(n);if(nr(hn(n).resolvedSymbol)===t)return r}return ci(t)}(t,n):W},getSymbolsOfParameterPropertyDeclaration:function(t,n){return t=e.getParseTreeNode(t,e.isParameter),e.Debug.assert(void 0!==t,"Cannot get symbols of a synthetic parameter that cannot be resolved to a parse-tree node."),function(t,n){var r=t.parent,i=t.parent.parent,a=bn(r.locals,n,107455),o=bn(i.symbol.members,n,107455);if(a&&o)return[a,o];e.Debug.fail("There should exist two symbols, one as property declaration and one as parameter declaration")}(t,e.escapeLeadingUnderscores(n))},getDeclaredTypeOfSymbol:Pi,getPropertiesOfType:sa,getPropertyOfType:function(t,n){return va(t,e.escapeLeadingUnderscores(n))},getIndexInfoOfType:Ta,getSignaturesOfType:xa,getIndexTypeOfType:Ca,getBaseTypes:Si,getBaseTypeOfLiteralType:pc,getWidenedType:Dc,getTypeFromTypeNode:function(t){return(t=e.getParseTreeNode(t,e.isTypeNode))?ps(t):W},getParameterType:jd,getReturnTypeOfSignature:Ra,getNullableType:bc,getNonNullableType:xc,typeToTypeNode:O.typeToTypeNode,indexInfoToIndexSignatureDeclaration:O.indexInfoToIndexSignatureDeclaration,signatureToSignatureDeclaration:O.signatureToSignatureDeclaration,getSymbolsInScope:function(t,n){return(t=e.getParseTreeNode(t))?function(t,n){if(f_(t))return[];var r=e.createSymbolTable(),i=!1;return a(),Da(r);function a(){for(;t;){switch(t.locals&&!vn(t)&&s(t.locals,n),t.kind){case 233:s(er(t).exports,2623475&n);break;case 232:s(er(t).exports,8&n);break;case 199:t.name&&o(t.symbol,n);case 229:case 230:i||s(er(t).members,793064&n);break;case 186:t.name&&o(t.symbol,n)}e.introducesArgumentsExoticObject(t)&&o(M,n),i=e.hasModifier(t,32),t=t.parent}s(ot,n)}function o(t,n){if(e.getCombinedLocalAndExportSymbolFlags(t)&n){var i=t.escapedName;r.has(i)||r.set(i,t)}}function s(e,t){t&&e.forEach((function(e){o(e,t)}))}}(t,n):[]},getSymbolAtLocation:function(t){return(t=e.getParseTreeNode(t))?b_(t):void 0},getShorthandAssignmentValueSymbol:function(t){return(t=e.getParseTreeNode(t))?function(e){if(e&&262===e.kind)return $n(e.name,2204607);return}(t):void 0},getExportSpecifierLocalTargetSymbol:function(t){return(t=e.getParseTreeNode(t,e.isExportSpecifier))?function(e){return e.parent.parent.moduleSpecifier?In(e.parent.parent,e):$n(e.propertyName||e.name,2998271)}(t):void 0},getExportSymbolOfSymbol:function(e){return Zn(e.exportSymbol||e)},getTypeAtLocation:function(t){return(t=e.getParseTreeNode(t))?x_(t):W},getPropertySymbolOfDestructuringAssignment:function(t){return(t=e.getParseTreeNode(t,e.isIdentifier))?function(e){var t=k_(e.parent.parent);return t&&va(t,e.escapedText)}(t):void 0},signatureToString:function(t,n,r,i){return Cr(t,e.getParseTreeNode(n),r,i)},typeToString:function(t,n,r){return Er(t,e.getParseTreeNode(n),r)},getSymbolDisplayBuilder:Fr,symbolToString:function(t,n,r){return Tr(t,e.getParseTreeNode(n),r)},getAugmentedPropertiesOfType:function(t){t=ma(t);var n=e.createSymbolTable(sa(t));(xa(t,0).length||xa(t,1).length)&&e.forEach(sa(Se),(function(e){n.has(e.escapedName)||n.set(e.escapedName,e)}));return lr(n)},getRootSymbols:function t(n){if(6&e.getCheckFlags(n)){var r=[],i=n.escapedName;return e.forEach(gn(n).containingType.types,(function(e){var t=va(e,i);t&&r.push(t)})),r}if(33554432&n.flags){var a=n;if(a.leftSpread)return t(a.leftSpread).concat(t(a.rightSpread));if(a.syntheticOrigin)return t(a.syntheticOrigin);for(var o=void 0,s=n;s=gn(s).target;)o=s;if(o)return[o]}return[n]},getContextualType:function(t){return(t=e.getParseTreeNode(t,e.isExpression))?lu(t):void 0},getFullyQualifiedName:jn,getResolvedSignature:function(t,n,r){t=e.getParseTreeNode(t,e.isCallLikeExpression),L=r;var i=t?Id(t,n):void 0;return L=void 0,i},getConstantValue:function(t){return(t=e.getParseTreeNode(t,$_))?K_(t):void 0},isValidPropertyAccess:function(t,n){return!!(t=e.getParseTreeNode(t,e.isPropertyAccessOrQualifiedName))&&function(e,t){var n=179===e.kind?e.expression:e.left;return ed(e,n,t,Dc(Dp(n)))}(t,e.escapeLeadingUnderscores(n))},getSignatureFromDeclaration:function(t){return(t=e.getParseTreeNode(t,e.isFunctionLike))?Oa(t):void 0},isImplementationOfOverload:function(t){var n=e.getParseTreeNode(t,e.isFunctionLike);return n?R_(n):void 0},getImmediateAliasedSymbol:function(t){e.Debug.assert(0!=(2097152&t.flags),"Should only get Alias here.");var n=gn(t);if(!n.immediateTarget){var r=Nn(t);e.Debug.assert(!!r),n.immediateTarget=On(r,!0)}return n.immediateTarget},getAliasedSymbol:Rn,getEmitResolver:function(e,t){return d_(e,t),P},getExportsOfModule:Gn,getExportsAndPropertiesOfModule:function(t){var n=Gn(t),r=qn(t);r!==t&&e.addRange(n,sa(ci(r)));return n},getSymbolWalker:e.createGetSymbolWalker(Ma,Ra,Si,ia,ci,Jc,Sa,Ha,e_),getAmbientModules:function(){be||(be=[],ot.forEach((function(e,n){t.test(n)&&be.push(e)})));return be},getAllAttributesTypeFromJsxOpeningLikeElement:function(t){return(t=e.getParseTreeNode(t,e.isJsxOpeningLikeElement))?function(e){return Cu(e.tagName)?Fu(e):Lu(e,!0)}(t):void 0},getJsxIntrinsicTagNames:function(){var t=Du(Vt);return t?sa(t):e.emptyArray},isOptionalParameter:function(t){return!!(t=e.getParseTreeNode(t,e.isParameter))&&Na(t)},tryGetMemberInModuleExports:function(t,n){return Wn(e.escapeLeadingUnderscores(t),n)},tryGetMemberInModuleExportsAndProperties:function(t,n){return function(e,t){var n=Wn(e,t);if(!n){var r=qn(t);if(r!==t)return va(ci(r),e)}return n}(e.escapeLeadingUnderscores(t),n)},tryFindAmbientModuleWithoutAugmentations:function(e){return wa(e,!1)},getApparentType:ma,getUnionType:jo,createAnonymousType:dr,createSignature:Ki,createSymbol:ln,createIndexInfo:qa,getAnyType:function(){return H},getStringType:function(){return ee},getNumberType:function(){return te},createPromiseType:Jd,createArrayType:No,getBooleanType:function(){return ie},getVoidType:function(){return oe},getUndefinedType:function(){return Q},getNullType:function(){return X},getESSymbolType:function(){return ae},getNeverType:function(){return se},isSymbolAccessible:hr,isArrayLikeType:cc,getAllPossiblePropertiesOfTypes:function(t){var n=jo(t);if(!(65536&n.flags))return sa(n);for(var r=e.createSymbolTable(),i=0,a=t;i<a.length;i++)for(var o=a[i],s=0,c=sa(o);s<c.length;s++){var l=c[s].escapedName;r.has(l)||r.set(l,ga(n,l))}return e.arrayFrom(r.values())},getSuggestionForNonexistentProperty:function(e,t){return Qu(e,t)},getSuggestionForNonexistentSymbol:function(t,n,r){return Yu(t,e.escapeLeadingUnderscores(n),r)},getBaseConstraintOfType:ua,resolveName:function(t,n,r){return kn(n,e.escapeLeadingUnderscores(t),r,void 0,void 0,!1)},getJsxNamespace:function(){return e.unescapeLeadingUnderscores(sn())}},B=[],j=e.createMap(),$=e.createMap(),K=e.createMap(),z=e.createMap(),J=[],q=ln(4,"unknown"),V=ln(0,"__resolving__"),H=or(1,"any"),G=or(1,"any"),W=or(1,"unknown"),Q=or(2048,"undefined"),Y=A?Q:or(2099200,"undefined"),X=or(4096,"null"),Z=A?X:or(2101248,"null"),ee=or(2,"string"),te=or(4,"number"),ne=or(128,"true"),re=or(128,"false"),ie=((R=jo([ne,re])).flags|=8,R.intrinsicName="boolean",R),ae=or(512,"symbol"),oe=or(1024,"void"),se=or(8192,"never"),ce=or(8192,"never"),le=or(16777216,"object"),ue=dr(void 0,x,e.emptyArray,e.emptyArray,void 0,void 0),de=ln(2048,"__type");de.members=e.createSymbolTable();var pe=dr(de,x,e.emptyArray,e.emptyArray,void 0,void 0),fe=dr(void 0,x,e.emptyArray,e.emptyArray,void 0,void 0);fe.instantiations=e.createMap();var _e=dr(void 0,x,e.emptyArray,e.emptyArray,void 0,void 0);_e.flags|=8388608;var me=dr(void 0,x,e.emptyArray,e.emptyArray,void 0,void 0),ge=dr(void 0,x,e.emptyArray,e.emptyArray,void 0,void 0),he=dr(void 0,x,e.emptyArray,e.emptyArray,void 0,void 0),ye=ar(16384),ve=ar(16384);ve.constraint=ye;var be,xe,ke,Se,Te,Ce,Ee,De,Ae,we,Ne,Ie,Pe,Oe,Fe,Le,Re,Me,Ue,Be,je,$e,Ke,ze,Je,qe,Ve,He,Ge,We,Qe,Ye,Xe,Ze=ar(16384),et=Ki(void 0,void 0,void 0,e.emptyArray,H,void 0,0,!1,!1),tt=Ki(void 0,void 0,void 0,e.emptyArray,W,void 0,0,!1,!1),nt=Ki(void 0,void 0,void 0,e.emptyArray,H,void 0,0,!1,!1),rt=Ki(void 0,void 0,void 0,e.emptyArray,ce,void 0,0,!1,!1),it=qa(ee,!0),at=qa(H,!1),ot=e.createSymbolTable(),st=0,ct=0,lt=0,ut=!1,dt=us(""),pt=us(0),ft=[],_t=[],mt=[],gt=0,ht=[],yt=[],vt=[],bt=[],xt=[],kt=[],St=[],Tt=[],Ct=[],Et=[],Dt=[],At=[],wt=e.createDiagnosticCollection();!function(e){e[e.None=0]="None",e[e.TypeofEQString=1]="TypeofEQString",e[e.TypeofEQNumber=2]="TypeofEQNumber",e[e.TypeofEQBoolean=4]="TypeofEQBoolean",e[e.TypeofEQSymbol=8]="TypeofEQSymbol",e[e.TypeofEQObject=16]="TypeofEQObject",e[e.TypeofEQFunction=32]="TypeofEQFunction",e[e.TypeofEQHostObject=64]="TypeofEQHostObject",e[e.TypeofNEString=128]="TypeofNEString",e[e.TypeofNENumber=256]="TypeofNENumber",e[e.TypeofNEBoolean=512]="TypeofNEBoolean",e[e.TypeofNESymbol=1024]="TypeofNESymbol",e[e.TypeofNEObject=2048]="TypeofNEObject",e[e.TypeofNEFunction=4096]="TypeofNEFunction",e[e.TypeofNEHostObject=8192]="TypeofNEHostObject",e[e.EQUndefined=16384]="EQUndefined",e[e.EQNull=32768]="EQNull",e[e.EQUndefinedOrNull=65536]="EQUndefinedOrNull",e[e.NEUndefined=131072]="NEUndefined",e[e.NENull=262144]="NENull",e[e.NEUndefinedOrNull=524288]="NEUndefinedOrNull",e[e.Truthy=1048576]="Truthy",e[e.Falsy=2097152]="Falsy",e[e.Discriminatable=4194304]="Discriminatable",e[e.All=8388607]="All",e[e.BaseStringStrictFacts=933633]="BaseStringStrictFacts",e[e.BaseStringFacts=3145473]="BaseStringFacts",e[e.StringStrictFacts=4079361]="StringStrictFacts",e[e.StringFacts=4194049]="StringFacts",e[e.EmptyStringStrictFacts=3030785]="EmptyStringStrictFacts",e[e.EmptyStringFacts=3145473]="EmptyStringFacts",e[e.NonEmptyStringStrictFacts=1982209]="NonEmptyStringStrictFacts",e[e.NonEmptyStringFacts=4194049]="NonEmptyStringFacts",e[e.BaseNumberStrictFacts=933506]="BaseNumberStrictFacts",e[e.BaseNumberFacts=3145346]="BaseNumberFacts",e[e.NumberStrictFacts=4079234]="NumberStrictFacts",e[e.NumberFacts=4193922]="NumberFacts",e[e.ZeroStrictFacts=3030658]="ZeroStrictFacts",e[e.ZeroFacts=3145346]="ZeroFacts",e[e.NonZeroStrictFacts=1982082]="NonZeroStrictFacts",e[e.NonZeroFacts=4193922]="NonZeroFacts",e[e.BaseBooleanStrictFacts=933252]="BaseBooleanStrictFacts",e[e.BaseBooleanFacts=3145092]="BaseBooleanFacts",e[e.BooleanStrictFacts=4078980]="BooleanStrictFacts",e[e.BooleanFacts=4193668]="BooleanFacts",e[e.FalseStrictFacts=3030404]="FalseStrictFacts",e[e.FalseFacts=3145092]="FalseFacts",e[e.TrueStrictFacts=1981828]="TrueStrictFacts",e[e.TrueFacts=4193668]="TrueFacts",e[e.SymbolStrictFacts=1981320]="SymbolStrictFacts",e[e.SymbolFacts=4193160]="SymbolFacts",e[e.ObjectStrictFacts=6166480]="ObjectStrictFacts",e[e.ObjectFacts=8378320]="ObjectFacts",e[e.FunctionStrictFacts=6164448]="FunctionStrictFacts",e[e.FunctionFacts=8376288]="FunctionFacts",e[e.UndefinedFacts=2457472]="UndefinedFacts",e[e.NullFacts=2340752]="NullFacts"}(Xe||(Xe={}));var Nt,It,Pt,Ot,Ft,Lt,Rt,Mt,Ut=e.createMapFromTemplate({string:1,number:2,boolean:4,symbol:8,undefined:16384,object:16,function:32}),Bt=e.createMapFromTemplate({string:128,number:256,boolean:512,symbol:1024,undefined:131072,object:2048,function:4096}),jt=e.createMapFromTemplate({string:ee,number:te,boolean:ie,symbol:ae,undefined:Q}),$t=jo(e.arrayFrom(Ut.keys(),us)),Kt=!1,zt=!1,Jt=e.createUnderscoreEscapedMap(),qt="JSX",Vt="IntrinsicElements",Ht="ElementClass",Gt="ElementAttributesProperty",Wt="ElementChildrenAttribute",Qt="Element",Yt="IntrinsicAttributes",Xt="IntrinsicClassAttributes",Zt=e.createMap(),en=e.createMap(),tn=e.createMap(),nn=e.createMap(),rn=e.createMap();!function(e){e[e.Type=0]="Type",e[e.ResolvedBaseConstructorType=1]="ResolvedBaseConstructorType",e[e.DeclaredType=2]="DeclaredType",e[e.ResolvedReturnType=3]="ResolvedReturnType"}(Lt||(Lt={})),function(e){e[e.Normal=0]="Normal",e[e.SkipContextSensitive=1]="SkipContextSensitive",e[e.Inferential=2]="Inferential"}(Rt||(Rt={})),function(e){e[e.None=0]="None",e[e.Bivariant=1]="Bivariant",e[e.Strict=2]="Strict"}(Mt||(Mt={}));var an=e.createSymbolTable();an.set(F.escapedName,F);var on=e.and(s_,(function(t){return!e.isAccessor(t)}));return function(){for(var t=0,r=n.getSourceFiles();t<r.length;t++){var i=r[t];e.bindSourceFile(i,S)}for(var a,o=0,s=n.getSourceFiles();o<s.length;o++){i=s[o];if(e.isExternalOrCommonJsModule(i)||_n(ot,i.locals),i.patternAmbientModules&&i.patternAmbientModules.length&&(xe=e.concatenate(xe,i.patternAmbientModules)),i.moduleAugmentations.length&&(a||(a=[])).push(i.moduleAugmentations),i.symbol&&i.symbol.globalExports)i.symbol.globalExports.forEach((function(e,t){ot.has(t)||ot.set(t,e)}))}if(a)for(var c=0,l=a;c<l.length;c++)for(var u=l[c],d=0,p=u;d<p.length;d++){mn(p[d])}(function(t,n,r){function i(t,n){return function(r){return wt.add(e.createDiagnosticForNode(r,n,t))}}n.forEach((function(n,a){var o=t.get(a);o?e.forEach(o.declarations,i(e.unescapeLeadingUnderscores(a),r)):t.set(a,n)}))})(ot,an,e.Diagnostics.Declaration_name_conflicts_with_built_in_global_identifier_0),gn(F).type=Y,gn(M).type=fo("IArguments",0,!0),gn(q).type=W,Te=fo("Array",1,!0),ke=fo("Object",0,!0),Se=fo("Function",0,!0),Ee=fo("String",0,!0),De=fo("Number",0,!0),Ae=fo("Boolean",0,!0),we=fo("RegExp",0,!0),Ie=No(H),Pe=No(G),Ce=So("ReadonlyArray",1),Oe=Ce?Co(Ce,[H]):Ie,Ne=So("ThisType",1)}(),U;function sn(){return Nt||(Nt="React",S.jsxFactory?(It=e.parseIsolatedEntityName(S.jsxFactory,T))&&(Nt=e_(It).escapedText):S.reactNamespace&&(Nt=e.escapeLeadingUnderscores(S.reactNamespace))),Nt}function cn(t,n,r,i,a){var o=t?e.createDiagnosticForNode(t,n,r,i,a):e.createCompilerDiagnostic(n,r,i,a);wt.add(o)}function ln(e,t){y++;var n=new _(33554432|e,t);return n.checkFlags=0,n}function un(e){return 0!=(33554432&e.flags)}function dn(e,t){t.mergeId||(t.mergeId=i,i++),ht[t.mergeId]=e}function pn(t){var n=ln(t.flags,t.escapedName);return n.declarations=t.declarations?t.declarations.slice():[],n.parent=t.parent,t.valueDeclaration&&(n.valueDeclaration=t.valueDeclaration),t.constEnumOnlyModule&&(n.constEnumOnlyModule=!0),t.members&&(n.members=e.cloneMap(t.members)),t.exports&&(n.exports=e.cloneMap(t.exports)),dn(n,t),n}function fn(t,n){if(t.flags&(i=n.flags,a=0,2&i&&(a|=107455),1&i&&(a|=107454),4&i&&(a|=0),8&i&&(a|=900095),16&i&&(a|=106927),32&i&&(a|=899519),64&i&&(a|=792968),256&i&&(a|=899327),128&i&&(a|=899967),512&i&&(a|=106639),8192&i&&(a|=99263),32768&i&&(a|=41919),65536&i&&(a|=74687),262144&i&&(a|=530920),524288&i&&(a|=793064),2097152&i&&(a|=2097152),a))if(1024&t.flags)cn(e.getNameOfDeclaration(n.declarations[0]),e.Diagnostics.Cannot_augment_module_0_with_value_exports_because_it_resolves_to_a_non_module_entity,Tr(t));else{var r=2&t.flags||2&n.flags?e.Diagnostics.Cannot_redeclare_block_scoped_variable_0:e.Diagnostics.Duplicate_identifier_0;e.forEach(n.declarations,(function(t){cn(e.getNameOfDeclaration(t)||t,r,Tr(n))})),e.forEach(t.declarations,(function(t){cn(e.getNameOfDeclaration(t)||t,r,Tr(n))}))}else 512&n.flags&&512&t.flags&&t.constEnumOnlyModule&&!n.constEnumOnlyModule&&(t.constEnumOnlyModule=!1),t.flags|=n.flags,n.valueDeclaration&&(!t.valueDeclaration||233===t.valueDeclaration.kind&&233!==n.valueDeclaration.kind)&&(t.valueDeclaration=n.valueDeclaration),e.addRange(t.declarations,n.declarations),n.members&&(t.members||(t.members=e.createSymbolTable()),_n(t.members,n.members)),n.exports&&(t.exports||(t.exports=e.createSymbolTable()),_n(t.exports,n.exports)),dn(t,n);var i,a}function _n(e,t){t.forEach((function(t,n){var r=e.get(n);r?(33554432&r.flags||(r=pn(r),e.set(n,r)),fn(r,t)):e.set(n,t)}))}function mn(t){var n=t.parent;if(n.symbol.declarations[0]===n)if(e.isGlobalScopeAugmentation(n))_n(ot,n.symbol.exports);else{var r=zn(t,t,e.isInAmbientContext(t.parent.parent)?void 0:e.Diagnostics.Invalid_module_name_in_augmentation_module_0_cannot_be_found,!0);if(!r)return;1920&(r=qn(r)).flags?fn(r=33554432&r.flags?r:pn(r),n.symbol):cn(t,e.Diagnostics.Cannot_augment_module_0_because_it_resolves_to_a_non_module_entity,t.text)}else e.Debug.assert(n.symbol.declarations.length>1)}function gn(e){if(33554432&e.flags)return e;var t=s(e);return yt[t]||(yt[t]={})}function hn(e){var t=o(e);return vt[t]||(vt[t]={flags:0})}function yn(e){return 32768&e.flags?e.objectFlags:0}function vn(t){return 265===t.kind&&!e.isExternalOrCommonJsModule(t)}function bn(t,n,r){if(r){var i=t.get(n);if(i){if(e.Debug.assert(0==(1&e.getCheckFlags(i)),"Should never get an instantiated symbol here."),i.flags&r)return i;if(2097152&i.flags){var a=Rn(i);if(a===q||a.flags&r)return i}}}}function xn(t,r){var i=e.getSourceFileOfNode(t),a=e.getSourceFileOfNode(r);if(i!==a){if(C&&(i.externalModuleIndicator||a.externalModuleIndicator)||!S.outFile&&!S.out||qc(r)||e.isInAmbientContext(t))return!0;if(l(r,t))return!0;var o=n.getSourceFiles();return e.indexOf(o,i)<=e.indexOf(o,a)}if(t.pos<=r.pos){if(176===t.kind){var s=e.getAncestor(r,176);return s?e.findAncestor(s,e.isBindingElement)!==e.findAncestor(t,e.isBindingElement)||t.pos<s.pos:xn(e.getAncestor(t,226),r)}return 226!==t.kind||!function(t,n){var r=e.getEnclosingBlockScopeContainer(t);switch(t.parent.parent.kind){case 208:case 214:case 216:if(An(n,t,r))return!0}return e.isForInOrOfStatement(t.parent.parent)&&An(n,t.parent.parent.expression,r)}(t,r)}if(246===r.parent.kind||243===r.parent.kind&&r.parent.isExportEquals)return!0;if(243===r.kind&&r.isExportEquals)return!0;var c=e.getEnclosingBlockScopeContainer(t);return qc(r)||l(r,t,c);function l(t,n,r){return!!e.findAncestor(t,(function(i){if(i===r)return"quit";if(e.isFunctionLike(i))return!0;if(i.parent&&149===i.parent.kind&&i.parent.initializer===i)if(e.hasModifier(i.parent,32)){if(151===n.kind)return!0}else if(!(149===n.kind&&!e.hasModifier(n,32))||e.getContainingClass(t)!==e.getContainingClass(n))return!0}))}}function kn(e,t,n,r,i,a,o){return Sn(e,t,n,r,i,a,bn,o)}function Sn(t,n,r,i,a,o,s,c){var l,u,d,p,f,_=t,m=t,g=!1;e:for(;t;){if(t.locals&&!vn(t)&&(l=s(t.locals,n,r))){var h=!0;if(e.isFunctionLike(t)&&u&&u!==t.body&&(r&l.flags&793064&&275!==u.kind&&(h=!!(262144&l.flags)&&(u===t.type||146===u.kind||145===u.kind)),107455&r&&1&l.flags&&(h=146===u.kind||u===t.type&&146===l.valueDeclaration.kind)),h)break e;l=void 0}switch(t.kind){case 265:if(!e.isExternalOrCommonJsModule(t))break;g=!0;case 233:var y=er(t).exports;if(265===t.kind||e.isAmbientModule(t)){if(l=y.get("default")){var v=e.getLocalSymbolForExportDefault(l);if(v&&l.flags&r&&v.escapedName===n)break e;l=void 0}var b=y.get(n);if(b&&2097152===b.flags&&e.getDeclarationOfKind(b,246))break}if(l=s(y,n,2623475&r))break e;break;case 232:if(l=s(er(t).exports,n,8&r))break e;break;case 149:case 148:if(e.isClassLike(t.parent)&&!e.hasModifier(t,32)){var x=ir(t.parent);x&&x.locals&&s(x.locals,n,107455&r)&&(p=t)}break;case 229:case 199:case 230:if(l=s(er(t).members,n,793064&r)){if(!Cn(l,t)){l=void 0;break}if(u&&e.hasModifier(u,32))return void cn(m,e.Diagnostics.Static_members_cannot_reference_class_type_parameters);break e}if(199===t.kind&&32&r){var k=t.name;if(k&&n===k.escapedText){l=t.symbol;break e}}break;case 201:if(u===t.expression&&85===t.parent.token){var S=t.parent.parent;if(e.isClassLike(S)&&(l=s(er(S).members,n,793064&r)))return void(i&&cn(m,e.Diagnostics.Base_class_expressions_cannot_reference_class_type_parameters))}break;case 144:if(f=t.parent.parent,(e.isClassLike(f)||230===f.kind)&&(l=s(er(f).members,n,793064&r)))return void cn(m,e.Diagnostics.A_computed_property_name_cannot_reference_a_type_parameter_from_its_containing_type);break;case 151:case 150:case 152:case 153:case 154:case 228:case 187:if(3&r&&"arguments"===n){l=M;break e}break;case 186:if(3&r&&"arguments"===n){l=M;break e}if(16&r){var T=t.name;if(T&&n===T.escapedText){l=t.symbol;break e}}break;case 147:t.parent&&146===t.parent.kind&&(t=t.parent),t.parent&&e.isClassElement(t.parent)&&(t=t.parent)}207!==t.kind&&(d=t),u=t,t=t.parent}if(o&&l&&i&&E&&l!==d.symbol&&(l.isReferenced=!0),!l){if(u&&(e.Debug.assert(265===u.kind),u.commonJsModuleIndicator&&"exports"===n))return u.symbol;l=s(ot,n,r)}if(l){if(i){if(p){var C=p.name;return void cn(m,e.Diagnostics.Initializer_of_instance_member_variable_0_cannot_reference_identifier_1_declared_in_the_constructor,e.declarationNameToString(C),Tn(a))}if(m&&(2&r||(32&r||384&r)&&107455==(107455&r))){var D=nr(l);(2&D.flags||32&D.flags||384&D.flags)&&function(t,n){e.Debug.assert(!!(2&t.flags||32&t.flags||384&t.flags));var r=e.forEach(t.declarations,(function(t){return e.isBlockOrCatchScoped(t)||e.isClassLike(t)||232===t.kind?t:void 0}));e.Debug.assert(void 0!==r,"Declaration to checkResolvedBlockScopedVariable is undefined"),e.isInAmbientContext(r)||xn(r,n)||(2&t.flags?cn(n,e.Diagnostics.Block_scoped_variable_0_used_before_its_declaration,e.declarationNameToString(e.getNameOfDeclaration(r))):32&t.flags?cn(n,e.Diagnostics.Class_0_used_before_its_declaration,e.declarationNameToString(e.getNameOfDeclaration(r))):256&t.flags&&cn(n,e.Diagnostics.Enum_0_used_before_its_declaration,e.declarationNameToString(e.getNameOfDeclaration(r))))}(D,m)}if(l&&g&&107455==(107455&r)){var A=l.declarations;A&&1===A.length&&236===A[0].kind&&cn(m,e.Diagnostics._0_refers_to_a_UMD_global_but_the_current_file_is_a_module_Consider_adding_an_import_instead,e.unescapeLeadingUnderscores(n))}}return l}if(i&&!(m&&(function(t,n,r){if(71===t.kind&&m_(t)||qc(t))return!1;var i=e.getThisContainer(t,!0),a=i;for(;a;){if(e.isClassLike(a.parent)){var o=er(a.parent);if(!o)break;if(va(ci(o),n))return cn(t,e.Diagnostics.Cannot_find_name_0_Did_you_mean_the_static_member_1_0,Tn(r),Tr(o)),!0;if(a===i&&!e.hasModifier(a,32))if(va(Pi(o).thisType,n))return cn(t,e.Diagnostics.Cannot_find_name_0_Did_you_mean_the_instance_member_this_0,Tn(r)),!0}a=a.parent}return!1}(m,n,a)||En(m)||function(t,n,r){if(1920===r){var i=Ln(kn(t,n,792640,void 0,void 0,!1)),a=t.parent;if(i){if(e.isQualifiedName(a)){e.Debug.assert(a.left===t,"Should only be resolving left side of qualified name as a namespace");var o=a.right.escapedText;if(va(Pi(i),o))return cn(a,e.Diagnostics.Cannot_access_0_1_because_0_is_a_type_but_not_a_namespace_Did_you_mean_to_retrieve_the_type_of_the_property_1_in_0_with_0_1,e.unescapeLeadingUnderscores(n),e.unescapeLeadingUnderscores(o)),!0}return cn(t,e.Diagnostics._0_only_refers_to_a_type_but_is_being_used_as_a_namespace_here,e.unescapeLeadingUnderscores(n)),!0}}return!1}(m,n,r)||function(t,n,r){if(107455&r){if("any"===n||"string"===n||"number"===n||"boolean"===n||"never"===n)return cn(t,e.Diagnostics._0_only_refers_to_a_type_but_is_being_used_as_a_value_here,e.unescapeLeadingUnderscores(n)),!0;var i=Ln(kn(t,n,792640,void 0,void 0,!1));if(i&&!(1024&i.flags))return cn(t,e.Diagnostics._0_only_refers_to_a_type_but_is_being_used_as_a_value_here,e.unescapeLeadingUnderscores(n)),!0}return!1}(m,n,r)||function(t,n,r){if(107031&r){if(Ln(kn(t,n,1024,void 0,void 0,!1)))return cn(t,e.Diagnostics.Cannot_use_namespace_0_as_a_value,e.unescapeLeadingUnderscores(n)),!0}else if(792640&r){if(Ln(kn(t,n,1024,void 0,void 0,!1)))return cn(t,e.Diagnostics.Cannot_use_namespace_0_as_a_type,e.unescapeLeadingUnderscores(n)),!0}return!1}(m,n,r)))){var w=void 0;c&&gt<10&&(w=Yu(_,n,r))&&cn(m,c,Tn(a),w),w||cn(m,i,Tn(a)),gt++}}function Tn(t){return e.isString(t)?e.unescapeLeadingUnderscores(t):e.declarationNameToString(t)}function Cn(e,t){for(var n=0,r=e.declarations;n<r.length;n++){var i=r[n];if(145===i.kind&&i.parent===t)return!0}return!1}function En(t){var n=Dn(t),r=!(!n||!$n(n,64,!0));return r&&cn(t,e.Diagnostics.Cannot_extend_an_interface_0_Did_you_mean_implements,e.getTextOfNode(n)),r}function Dn(t){switch(t.kind){case 71:case 179:return t.parent?Dn(t.parent):void 0;case 201:if(e.isEntityNameExpression(t.expression))return t.expression;default:return}}function An(t,n,r){return n&&!!e.findAncestor(t,(function(t){return t===r||e.isFunctionLike(t)?"quit":t===n}))}function wn(e){switch(e.kind){case 237:return e;case 239:return e.parent;case 240:return e.parent.parent;case 242:return e.parent.parent.parent;default:return}}function Nn(t){return e.find(t.declarations,e.isAliasSymbolDeclaration)}function In(t,n,r){var i=Kn(t,t.moduleSpecifier),a=Vn(i,t.moduleSpecifier,r);if(a){var o=n.propertyName||n.name;if(o.escapedText){if(e.isShorthandAmbientModuleSymbol(i))return i;var s=void 0;s=i&&i.exports&&i.exports.get("export=")?va(ci(a),o.escapedText):function(e,t){if(3&e.flags){var n=e.valueDeclaration.type;if(n)return Ln(va(ps(n),t))}}(a,o.escapedText),s=Ln(s,r);var c=function(e,t,n){if(1536&e.flags)return Ln(Qn(e).get(t),n)}(a,o.escapedText,r);!c&&D&&"default"===o.escapedText&&(c=qn(i,r)||Ln(i,r));var l=c&&s?function(t,n){if(t===q&&n===q)return q;if(794600&t.flags)return t;var r=ln(t.flags|n.flags,t.escapedName);return r.declarations=e.concatenate(t.declarations,n.declarations),r.parent=t.parent||n.parent,t.valueDeclaration&&(r.valueDeclaration=t.valueDeclaration),n.members&&(r.members=n.members),t.exports&&(r.exports=t.exports),r}(s,c):c||s;return l||cn(o,e.Diagnostics.Module_0_has_no_exported_member_1,jn(i),e.declarationNameToString(o)),l}}}function Pn(e,t,n){return e.parent.parent.moduleSpecifier?In(e.parent.parent,e,n):$n(e.propertyName||e.name,t,!1,n)}function On(t,n){switch(t.kind){case 237:return function(t,n){return 248===t.moduleReference.kind?qn(Kn(t,e.getExternalModuleImportEqualsDeclarationExpression(t))):Bn(t.moduleReference,n)}(t,n);case 239:return function(t,n){var r=Kn(t,t.parent.moduleSpecifier);if(r){var i=void 0;if(e.isShorthandAmbientModuleSymbol(r))i=r;else{var a=r.exports.get("export=");i=a?va(ci(a),"default"):Ln(r.exports.get("default"),n)}if(i||D){if(!i&&D)return qn(r,n)||Ln(r,n)}else cn(t.name,e.Diagnostics.Module_0_has_no_default_export,Tr(r));return i}}(t,n);case 240:return function(e,t){var n=e.parent.parent.moduleSpecifier;return Vn(Kn(e,n),n,t)}(t,n);case 242:return function(e,t){return In(e.parent.parent.parent,e,t)}(t,n);case 246:return Pn(t,901119,n);case 243:return function(e,t){return $n(e.expression,901119,!1,t)}(t,n);case 236:return function(e,t){return qn(e.parent.symbol,t)}(t,n)}}function Fn(e,t){return void 0===t&&(t=901119),e&&2097152==(e.flags&(2097152|t))}function Ln(e,t){return!t&&Fn(e)?Rn(e):e}function Rn(t){e.Debug.assert(0!=(2097152&t.flags),"Should only get Alias here.");var n=gn(t);if(n.target)n.target===V&&(n.target=q);else{n.target=V;var r=Nn(t);e.Debug.assert(!!r);var i=On(r);n.target===V?n.target=i||q:cn(r,e.Diagnostics.Circular_definition_of_import_alias_0,Tr(t))}return n.target}function Mn(e){var t=er(e),n=Rn(t);n&&((n===q||107455&n.flags&&!F_(n))&&Un(t))}function Un(t){var n=gn(t);if(!n.referenced){n.referenced=!0;var r=Nn(t);e.Debug.assert(!!r),243===r.kind?yp(r.expression):246===r.kind?yp(r.propertyName||r.name):e.isInternalModuleImportEqualsDeclaration(r)&&yp(r.moduleReference)}}function Bn(t,n){return 71===t.kind&&e.isRightSideOfQualifiedNameOrPropertyAccess(t)&&(t=t.parent),71===t.kind||143===t.parent.kind?$n(t,1920,!1,n):(e.Debug.assert(237===t.parent.kind),$n(t,901119,!1,n))}function jn(e){return e.parent?jn(e.parent)+"."+Tr(e):Tr(e)}function $n(t,n,r,i,a){if(!e.nodeIsMissing(t)){var o;if(71===t.kind){var s=1920===n?e.Diagnostics.Cannot_find_namespace_0:e.Diagnostics.Cannot_find_name_0;if(!(o=kn(a||t,t.escapedText,n,r?void 0:s,t,!0)))return}else if(143===t.kind||179===t.kind){var c=void 0;if(143===t.kind)c=t.left;else{if(179!==t.kind||185!==t.expression.kind&&!e.isEntityNameExpression(t.expression))return;c=t.expression}var l=143===t.kind?t.right:t.name,u=$n(c,1920,r,!1,a);if(!u||e.nodeIsMissing(l))return;if(u===q)return u;if(!(o=bn(Qn(u),l.escapedText,n)))return void(r||cn(l,e.Diagnostics.Namespace_0_has_no_exported_member_1,jn(u),e.declarationNameToString(l)))}else{if(185===t.kind)return e.isEntityNameExpression(t.expression)?$n(t.expression,n,r,i,a):void 0;e.Debug.assertNever(t,"Unknown entity name kind.")}return e.Debug.assert(0==(1&e.getCheckFlags(o)),"Should never get an instantiated symbol here."),o.flags&n||i?o:Rn(o)}}function Kn(t,n){return zn(t,n,e.Diagnostics.Cannot_find_module_0)}function zn(e,t,n,r){if(void 0===r&&(r=!1),9===t.kind||13===t.kind){var i=t;return Jn(e,i.text,n,i,r)}}function Jn(t,r,i,a,o){if(void 0===o&&(o=!1),void 0!==r){if(e.startsWith(r,"@types/"))cn(a,e.Diagnostics.Cannot_import_type_declaration_files_Consider_importing_0_instead_of_1,e.removePrefix(r,"@types/"),r);var s=wa(r,!0);if(s)return s;var c=e.getResolvedModule(e.getSourceFileOfNode(t),r),l=c&&e.getResolutionDiagnostic(S,c),u=c&&!l&&n.getSourceFile(c.resolvedFileName);if(u)return u.symbol?Zn(u.symbol):void(i&&cn(a,e.Diagnostics.File_0_is_not_a_module,u.fileName));if(xe){var d=e.findBestPatternMatch(xe,(function(e){return e.pattern}),r);if(d)return Zn(d.symbol)}if(c&&!e.extensionIsTypeScript(c.extension)&&void 0===l||l===e.Diagnostics.Could_not_find_a_declaration_file_for_module_0_1_implicitly_has_an_any_type){if(o)cn(a,e.Diagnostics.Invalid_module_name_in_augmentation_Module_0_resolves_to_an_untyped_module_at_1_which_cannot_be_augmented,r,c.resolvedFileName);else if(N&&i){var p=c.isExternalLibraryImport?e.chainDiagnosticMessages(void 0,e.Diagnostics.Try_npm_install_types_Slash_0_if_it_exists_or_add_a_new_declaration_d_ts_file_containing_declare_module_0,r):void 0;p=e.chainDiagnosticMessages(p,e.Diagnostics.Could_not_find_a_declaration_file_for_module_0_1_implicitly_has_an_any_type,r,c.resolvedFileName),wt.add(e.createDiagnosticForNodeFromMessageChain(a,p))}}else if(i)if(l)cn(a,l,r,c.resolvedFileName);else{var f=e.tryExtractTypeScriptExtension(r);if(f)cn(a,e.Diagnostics.An_import_path_cannot_end_with_a_0_extension_Consider_importing_1_instead,f,e.removeExtension(r,f));else cn(a,i,r)}}}function qn(e,t){return e&&Zn(Ln(e.exports.get("export="),t))||e}function Vn(t,n,r){var i=qn(t,r);return r||!i||1539&i.flags||cn(n,e.Diagnostics.Module_0_resolves_to_a_non_module_entity_and_cannot_be_imported_using_this_construct,Tr(t)),i}function Hn(e){return void 0!==e.exports.get("export=")}function Gn(e){return Da(Yn(e))}function Wn(e,t){var n=Yn(t);if(n)return n.get(e)}function Qn(e){return 1536&e.flags?Yn(e):e.exports||x}function Yn(t){var n=gn(t);return n.resolvedExports||(n.resolvedExports=function(t){var n=[];return r(t=qn(t))||x;function r(t){if(t&&1952&t.flags&&e.pushIfUnique(n,t)){var i=e.cloneMap(t.exports),a=t.exports.get("__export");if(a){for(var o=e.createSymbolTable(),s=e.createMap(),c=0,l=a.declarations;c<l.length;c++){var u=l[c];Xn(o,r(Kn(u,u.moduleSpecifier)),s,u)}s.forEach((function(t,n){var r=t.exportsWithDuplicate;if("export="!==n&&r&&r.length&&!i.has(n))for(var a=0,o=r;a<o.length;a++){var c=o[a];wt.add(e.createDiagnosticForNode(c,e.Diagnostics.Module_0_has_already_exported_a_member_named_1_Consider_explicitly_re_exporting_to_resolve_the_ambiguity,s.get(n).specifierText,e.unescapeLeadingUnderscores(n)))}})),Xn(i,o)}return i}}}(t))}function Xn(t,n,r,i){n&&n.forEach((function(n,a){if("default"!==a){var o=t.get(a);if(o){if(r&&i&&o&&Ln(o)!==Ln(n)){var s=r.get(a);s.exportsWithDuplicate?s.exportsWithDuplicate.push(i):s.exportsWithDuplicate=[i]}}else t.set(a,n),r&&i&&r.set(a,{specifierText:e.getTextOfNode(i.moduleSpecifier)})}}))}function Zn(e){var t;return e&&e.mergeId&&(t=ht[e.mergeId])?t:e}function er(e){return Zn(e.symbol)}function tr(e){return Zn(e.parent)}function nr(e){return e&&0!=(1048576&e.flags)?Zn(e.exportSymbol):e}function rr(e){return!!(107455&e.flags||2097152&e.flags&&107455&Rn(e).flags)}function ir(t){for(var n=0,r=t.members;n<r.length;n++){var i=r[n];if(152===i.kind&&e.nodeIsPresent(i.body))return i}}function ar(e){var t=new m(U,e);return h++,t.id=h,t}function or(e,t){var n=ar(e);return n.intrinsicName=t,n}function sr(e,t){var n=ar(32768);return n.objectFlags=e,n.symbol=t,n}function cr(e){return 95===e.charCodeAt(0)&&95===e.charCodeAt(1)&&95!==e.charCodeAt(2)&&64!==e.charCodeAt(2)}function lr(t){var n;return t.forEach((function(e,t){cr(t)||(n||(n=[]),rr(e)&&n.push(e))})),n||e.emptyArray}function ur(e,t,n,r,i,a){return e.members=t,e.properties=lr(t),e.callSignatures=n,e.constructSignatures=r,i&&(e.stringIndexInfo=i),a&&(e.numberIndexInfo=a),e}function dr(e,t,n,r,i,a){return ur(sr(16,e),t,n,r,i,a)}function pr(t,n){for(var r,i=t;i;i=i.parent){if(i.locals&&!vn(i)&&(r=n(i.locals)))return r;switch(i.kind){case 265:if(!e.isExternalOrCommonJsModule(i))break;case 233:if(r=n(er(i).exports))return r}}return n(ot)}function fr(e){return 107455===e?107455:1920}function _r(t,n,r,i){if(t&&!function(e){if(e.declarations&&e.declarations.length){for(var t=0,n=e.declarations;t<n.length;t++){switch(n[t].kind){case 149:case 151:case 153:case 154:continue;default:return!1}}return!0}return!1}(t)){var a=[];return pr(n,o)}function o(l){if(e.pushIfUnique(a,l)){var u=function(a){if(c(a.get(t.escapedName)))return[t];return e.forEachEntry(a,(function(t){if(2097152&t.flags&&"export="!==t.escapedName&&!e.getDeclarationOfKind(t,246)&&!(function(t){return t&&t.declarations&&t.declarations[0]&&e.isNamespaceExportDeclaration(t.declarations[0])}(t)&&n&&e.isExternalModule(e.getSourceFileOfNode(n)))&&(!i||e.some(t.declarations,e.isExternalModuleImportEqualsDeclaration))){var a=Rn(t);if(c(t,a))return[t];var l=a.exports?o(a.exports):void 0;if(l&&s(t,fr(r)))return[t].concat(l)}}))}(l);return a.pop(),u}}function s(e,t){return!mr(e,n,t)||!!_r(e.parent,n,fr(t),i)}function c(n,i){return t===(i||n)&&!e.some(n.declarations,yr)&&s(n,r)}}function mr(t,n,r){var i=!1;return pr(n,(function(n){var a=n.get(t.escapedName);return!!a&&(a===t||!!((a=2097152&a.flags&&!e.getDeclarationOfKind(a,246)?Rn(a):a).flags&r)&&(i=!0,!0))})),i}function gr(e,t){return 0===hr(e,t,793064,!1).accessibility}function hr(t,n,r,i){if(t&&n&&!(262144&t.flags)){for(var a=t,o=r;t;){var s=_r(t,n,o,!1);if(s){var c=vr(s[0],i);return c||{accessibility:1,errorSymbolName:Tr(a,n,r),errorModuleName:t!==a?Tr(t,n,1920):void 0}}o=fr(r),t=tr(t)}var l=e.forEach(a.declarations,u);if(l)if(l!==u(n))return{accessibility:2,errorSymbolName:Tr(a,n,r),errorModuleName:Tr(l)};return{accessibility:1,errorSymbolName:Tr(a,n,r)}}return{accessibility:0};function u(t){var n=e.findAncestor(t,yr);return n&&er(n)}}function yr(t){return e.isAmbientModule(t)||265===t.kind&&e.isExternalOrCommonJsModule(t)}function vr(t,n){var r;if(!e.forEach(t.declarations,(function(t){return!function(t){if(!Lr(t)){var i=wn(t);return!(!i||e.hasModifier(i,1)||!Lr(i.parent))&&(n&&(hn(t).isVisible=!0,r=e.appendIfUnique(r,i)),!0)}return!0}(t)})))return{accessibility:0,aliasesToMakeVisible:r}}function br(t,n){var r;r=162===t.parent.kind||e.isExpressionWithTypeArgumentsInClassExtendsClause(t.parent)?1156031:143===t.kind||179===t.kind||237===t.parent.kind?1920:793064;var i=e_(t),a=kn(n,i.escapedText,r,void 0,void 0,!1);return a&&vr(a,!0)||{accessibility:1,errorSymbolName:e.getTextOfNode(i),errorNode:i}}function xr(t,n){t.writeKeyword(e.tokenToString(n))}function kr(t,n){t.writePunctuation(e.tokenToString(n))}function Sr(e){e.writeSpace(" ")}function Tr(t,n,r){return e.usingSingleLineStringWriter((function(e){Fr().buildSymbolDisplay(t,e,n,r)}))}function Cr(t,n,r,i){return e.usingSingleLineStringWriter((function(e){Fr().buildSignatureDisplay(t,e,n,r,i)}))}function Er(t,n,r){var i=O.typeToTypeNode(t,n,function(t){var n=e.NodeBuilderFlags.None;if(!t)return n;8&t&&(n|=e.NodeBuilderFlags.NoTruncation);256&t&&(n|=e.NodeBuilderFlags.UseFullyQualifiedType);4096&t&&(n|=e.NodeBuilderFlags.SuppressAnyReturnType);1&t&&(n|=e.NodeBuilderFlags.WriteArrayAsGenericType);64&t&&(n|=e.NodeBuilderFlags.WriteTypeArgumentsOfSignature);return n}(r)|e.NodeBuilderFlags.IgnoreErrors|e.NodeBuilderFlags.WriteTypeParametersInQualifiedName);e.Debug.assert(void 0!==i,"should always get typenode");var a=e.createTextWriter(""),o=e.createPrinter({removeComments:!0}),s=n&&e.getSourceFileOfNode(n);o.writeNode(4,i,s,a);var c=a.getText(),l=S.noErrorTruncation||8&r?void 0:100;return l&&c.length>=l?c.substr(0,l-"...".length)+"...":c}function Dr(t,n,r){return e.usingSingleLineStringWriter((function(e){Fr().buildTypePredicateDisplay(t,e,n,r)}))}function Ar(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e[r];if(n|=i.flags,!(6144&i.flags)){if(384&i.flags){var a=128&i.flags?ie:Ai(i);if(65536&a.flags){var o=a.types.length;if(r+o<=e.length&&e[r+o-1]===a.types[o-1]){t.push(a),r+=o-1;continue}}}t.push(i)}}return 4096&n&&t.push(X),2048&n&&t.push(Q),t||e}function wr(e){return 8===e?"private":16===e?"protected":"public"}function Nr(t){if(t.symbol&&2048&t.symbol.flags){var n=e.findAncestor(t.symbol.declarations[0].parent,(function(e){return 168!==e.kind}));if(231===n.kind)return er(n)}}function Ir(t){return t&&t.parent&&234===t.parent.kind&&e.isExternalModuleAugmentation(t.parent.parent)}function Pr(t){return 32&t.flags?'"'+e.escapeString(t.value)+'"':""+t.value}function Or(t,n){if(t.declarations&&t.declarations.length){var r=t.declarations[0],i=e.getNameOfDeclaration(r);if(i)return e.declarationNameToString(i);if(r.parent&&226===r.parent.kind)return e.declarationNameToString(r.parent.name);switch(!n||n.encounteredError||n.flags&e.NodeBuilderFlags.AllowAnonymousIdentifier||(n.encounteredError=!0),r.kind){case 199:return"(Anonymous class)";case 186:case 187:return"(Anonymous function)"}}if(t.syntheticLiteralTypeOrigin){var a=t.syntheticLiteralTypeOrigin.value;if(!e.isIdentifierText(a,S.target))return'"'+e.escapeString(a,34)+'"'}return e.symbolName(t)}function Fr(){function t(e,t){t.writeSymbol(Or(e),e)}function n(n,r,a,o,s,c){var l;function u(n){if(l){if(1&s)if(1&e.getCheckFlags(n))d(gi(2097152&l.flags?Rn(l):l),n.mapper,r,a);else i(l,r,a);!function(t,n){var r=Or(t),i=r.charCodeAt(0);e.isIdentifierStart(i,T)?(kr(n,23),n.writeSymbol(r,t)):(kr(n,21),e.isSingleOrDoubleQuote(i)?n.writeStringLiteral(r):n.writeSymbol(r,t),kr(n,22))}(n,r)}else t(n,r);l=n}r.trackSymbol(n,a,o),262144&n.flags||!a&&!(256&c)?u(n):function t(n,r,i){var o=_r(n,a,r,!!(2&s));if(!o||mr(o[0],a,1===o.length?r:fr(r))){var c=tr(o?o[0]:n);c&&t(c,fr(r),!1)}if(o)for(var d=0,p=o;d<p.length;d++)u(p[d]);else!i&&(!l&&e.forEach(n.declarations,yr)||6144&n.flags)||u(n)}(n,o,!0)}function r(r,i,a,o,s){var c=16416&o,l=!1;return u(r,o);function u(r,s){var c=-1025&s;if(16793231&r.flags)i.writeKeyword(32&o||!zr(r)?r.intrinsicName:"any");else if(16384&r.flags&&r.isThisType)l&&i.reportInaccessibleThisError(),i.writeKeyword("this");else if(4&yn(r))!function(t,n){var r=t.typeArguments||e.emptyArray;if(t.target!==Te||1&n)if(8&t.target.objectFlags)kr(i,21),d(t.typeArguments.slice(0,Za(t)),26),kr(i,22);else if(16384&n&&t.symbol.valueDeclaration&&199===t.symbol.valueDeclaration.kind)f(t,n);else{var a=t.target.outerTypeParameters,o=0;if(a)for(var s=a.length;o<s;){var c=o,l=Ga(a[o]);do{o++}while(o<s&&Ga(a[o])===l);e.rangeEquals(a,r,c,o)||(p(l,r,c,o,n),kr(i,23))}var _=(t.target.typeParameters||e.emptyArray).length;p(t.symbol,r,o,_,n)}else u(r[0],32896),kr(i,21),kr(i,22)}(r,c);else if(256&r.flags&&!(65536&r.flags)){var _=tr(r.symbol);n(_,i,a,793064,0,c),Pi(_)!==r&&(kr(i,23),t(r.symbol,i))}else if(3&yn(r)||16656&r.flags)n(r.symbol,i,a,793064,0,c);else if(1024&s||!r.aliasSymbol||!(65536&s||gr(r.aliasSymbol,a)))196608&r.flags?function(e,t){128&t&&kr(i,19);65536&e.flags?d(Ar(e.types),49):d(e.types,48);128&t&&kr(i,20)}(r,c):48&yn(r)?f(r,c):96&r.flags?i.writeStringLiteral(Pr(r)):262144&r.flags?(128&s&&kr(i,19),i.writeKeyword("keyof"),Sr(i),u(r.type,128),128&s&&kr(i,20)):524288&r.flags?(u(r.objectType,128),kr(i,21),u(r.indexType,0),kr(i,22)):(kr(i,17),Sr(i),kr(i,24),Sr(i),kr(i,18));else{var m=r.aliasTypeArguments;p(r.aliasSymbol,m,0,e.length(m),c)}}function d(e,t){for(var n=0;n<e.length;n++)n>0&&(26!==t&&Sr(i),kr(i,t),Sr(i)),u(e[n],26===t?0:128)}function p(e,t,r,o,s){if((32&e.flags||!cr(e.escapedName))&&n(e,i,a,793064,0,s),r<o){for(kr(i,27),u(t[r],512),r++;r<o;)kr(i,26),Sr(i),u(t[r],0),r++;kr(i,29)}}function f(t,r){var o=t.symbol;if(o)if(32&o.flags&&!oi(o)&&!(199===o.valueDeclaration.kind&&16384&r)||896&o.flags)_(t,r);else if(function(){var t=!!(8192&o.flags)&&e.some(o.declarations,(function(t){return e.hasModifier(t,32)})),n=!!(16&o.flags)&&(o.parent||e.some(o.declarations,(function(e){return 265===e.parent.kind||234===e.parent.kind})));if(t||n)return!!(4&r)||e.contains(s,o)}())_(t,r);else if(e.contains(s,o)){var c=Nr(t);c?n(c,i,a,793064,0,r):xr(i,119)}else{s||(s=[]),16&t.objectFlags&&t.symbol&&32&t.symbol.flags?y(t,r):(s.push(o),y(t,r),s.pop())}else y(t,r)}function _(e,t){32768&t&&kr(i,19),xr(i,103),Sr(i),n(e.symbol,i,a,107455,0,t),32768&t&&kr(i,20)}function h(e){ep(e)&&(xr(i,131),Sr(i)),n(e,i),16777216&e.flags&&kr(i,55)}function y(n,r){if(ra(n))!function(e){kr(i,17),i.writeLine(),i.increaseIndent(),e.declaration.readonlyToken&&(xr(i,131),Sr(i));kr(i,21),t(ea(e).symbol,i),Sr(i),xr(i,92),Sr(i),u(ta(e),0),kr(i,22),e.declaration.questionToken&&kr(i,55);kr(i,56),Sr(i),u(na(e),0),kr(i,25),i.writeLine(),i.decreaseIndent(),kr(i,18)}(n);else{var d=ia(n);if(!d.properties.length&&!d.stringIndexInfo&&!d.numberIndexInfo){if(!d.callSignatures.length&&!d.constructSignatures.length)return kr(i,17),void kr(i,18);if(1===d.callSignatures.length&&!d.constructSignatures.length){var p=function(e,t){if(128&t)return!0;if(512&t){var n=e.target&&64&t?e.target.typeParameters:e.typeParameters;return n&&0!==n.length}return!1}(d.callSignatures[0],r);return p&&kr(i,19),m(d.callSignatures[0],i,a,16|c,void 0,s),void(p&&kr(i,20))}if(1===d.constructSignatures.length&&!d.callSignatures.length)return 128&r&&kr(i,19),xr(i,94),Sr(i),m(d.constructSignatures[0],i,a,16|c,void 0,s),void(128&r&&kr(i,20))}var f=l;l=!0,kr(i,17),i.writeLine(),i.increaseIndent(),function(t){for(var n=0,r=t.callSignatures;n<r.length;n++){m(x=r[n],i,a,c,void 0,s),kr(i,25),i.writeLine()}for(var l=0,d=t.constructSignatures;l<d.length;l++){m(x=d[l],i,a,c,1,s),kr(i,25),i.writeLine()}g(t.stringIndexInfo,i,0,a,o,s),g(t.numberIndexInfo,i,1,a,o,s);for(var p=0,f=t.properties;p<f.length;p++){var _=f[p];if(16384&o){if(4194304&_.flags)continue;24&e.getDeclarationModifierFlagsFromSymbol(_)&&i.reportPrivateInBaseOfClassExpression(e.symbolName(_))}var y=ci(_);if(8208&_.flags&&!aa(y).length)for(var v=0,b=xa(y,0);v<b.length;v++){var x=b[v];h(_),m(x,i,a,c,void 0,s),kr(i,25),i.writeLine()}else h(_),kr(i,56),Sr(i),u(y,16384&o),kr(i,25),i.writeLine()}}(d),i.decreaseIndent(),kr(i,18),l=f}}}function i(e,t,n,r){var i=Vf(e);(32&i.flags||64&i.flags||524288&i.flags)&&l(mi(e),t,n,r)}function a(e,n,i,a,o){t(e.symbol,n);var s=ca(e);s&&(Sr(n),xr(n,85),Sr(n),r(s,n,i,a,o));var c=_a(e);c&&(Sr(n),kr(n,58),Sr(n),r(c,n,i,a,o))}function o(n,i,a,o,c){var l=n.valueDeclaration;(l?e.isRestParameter(l):un(n)&&n.isRestParameter)&&kr(i,24),l&&e.isBindingPattern(l.name)?s(l.name,i,a,o,c):t(n,i),l&&Na(l)&&kr(i,55),kr(i,56),Sr(i);var u=ci(n);l&&M_(l)&&(u=bc(u,2048)),r(u,i,a,o,c)}function s(e,t,n,r,i){if(174===e.kind)kr(t,17),u(e.elements,t,(function(e){return c(e,t,n,r,i)})),kr(t,18);else if(175===e.kind){kr(t,21);var a=e.elements;u(a,t,(function(e){return c(e,t,n,r,i)})),a&&a.hasTrailingComma&&kr(t,26),kr(t,22)}}function c(n,r,i,a,o){e.isOmittedExpression(n)||(e.Debug.assert(176===n.kind),n.propertyName&&(r.writeProperty(e.getTextOfNode(n.propertyName)),kr(r,56),Sr(r)),e.isBindingPattern(n.name)?s(n.name,r,i,a,o):(n.dotDotDotToken&&kr(r,24),t(n.symbol,r)))}function l(e,t,n,r,i){e&&e.length&&(kr(t,27),u(e,t,(function(e){return a(e,t,n,r,i)})),kr(t,29))}function u(e,t,n){for(var r=0;r<e.length;r++)r>0&&(kr(t,26),Sr(t)),n(e[r])}function d(e,t,n,i){if(e&&e.length){kr(n,27);for(var a=512,o=0;o<e.length;o++)o>0&&(kr(n,26),Sr(n),a=0),r(t(e[o]),n,i,a);kr(n,29)}}function p(e,t,n,r,i,a){kr(n,19),e&&o(e,n,r,i,a);for(var s=0;s<t.length;s++)(s>0||e)&&(kr(n,26),Sr(n)),o(t[s],n,r,i,a);kr(n,20)}function f(t,n,i,a,o){e.isIdentifierTypePredicate(t)?n.writeParameter(t.parameterName):xr(n,99),Sr(n),xr(n,126),Sr(n),r(t.type,n,i,a,o)}function _(e,t,n,i,a){var o=Ra(e);4096&i&&zr(o)||(16&i?(Sr(t),kr(t,36)):kr(t,56),Sr(t),e.typePredicate?f(e.typePredicate,t,n,i,a):r(o,t,n,i,a))}function m(e,t,n,r,i,a){1===i&&(xr(t,94),Sr(t)),e.target&&64&r?d(e.target.typeParameters,e.mapper,t,n):l(e.typeParameters,t,n,r,a),p(e.thisParameter,e.parameters,t,n,r,a),_(e,t,n,r,a)}function g(t,n,i,a,o,s){if(t){switch(t.isReadonly&&(xr(n,131),Sr(n)),kr(n,21),n.writeParameter(t.declaration?e.declarationNameToString(t.declaration.parameters[0].name):"x"),kr(n,56),Sr(n),i){case 1:xr(n,133);break;case 0:xr(n,136)}kr(n,22),kr(n,56),Sr(n),r(t.type,n,a,o,s),kr(n,25),n.writeLine()}}return Ft||(Ft={buildSymbolDisplay:n,buildTypeDisplay:r,buildTypeParameterDisplay:a,buildTypePredicateDisplay:f,buildParameterDisplay:o,buildDisplayForParametersAndDelimiters:p,buildDisplayForTypeParametersAndDelimiters:l,buildTypeParameterDisplayFromSymbol:i,buildSignatureDisplay:m,buildIndexSignatureDisplay:g,buildReturnTypeDisplay:_})}function Lr(t){if(t){var n=hn(t);return void 0===n.isVisible&&(n.isVisible=!!function(){switch(t.kind){case 176:return Lr(t.parent.parent);case 226:if(e.isBindingPattern(t.name)&&!t.name.elements.length)return!1;case 233:case 229:case 230:case 231:case 228:case 232:case 237:if(e.isExternalModuleAugmentation(t))return!0;var n=$r(t);return 1&e.getCombinedModifierFlags(t)||237!==t.kind&&265!==n.kind&&e.isInAmbientContext(n)?Lr(n):vn(n);case 149:case 148:case 153:case 154:case 151:case 150:if(e.hasModifier(t,24))return!1;case 152:case 156:case 155:case 157:case 146:case 234:case 160:case 161:case 163:case 159:case 164:case 165:case 166:case 167:case 168:return Lr(t.parent);case 239:case 240:case 242:return!1;case 145:case 265:case 236:return!0;case 243:default:return!1}}()),n.isVisible}return!1}function Rr(t){var n;t.parent&&243===t.parent.kind?n=kn(t.parent,t.escapedText,2998271,e.Diagnostics.Cannot_find_name_0,t,!1):246===t.parent.kind&&(n=Pn(t.parent,2998271));var r=[];return n&&function t(n){e.forEach(n,(function(n){hn(n).isVisible=!0;var i=wn(n)||n;if(e.pushIfUnique(r,i),e.isInternalModuleImportEqualsDeclaration(n)){var a=kn(n,e_(n.moduleReference).escapedText,901119,void 0,void 0,!1);a&&t(a.declarations)}}))}(n.declarations),r}function Mr(e,t){var n=Ur(e,t);if(n>=0){for(var r=ft.length,i=n;i<r;i++)_t[i]=!1;return!1}return ft.push(e),_t.push(!0),mt.push(t),!0}function Ur(e,t){for(var n=ft.length-1;n>=0;n--){if(Br(ft[n],mt[n]))return-1;if(ft[n]===e&&mt[n]===t)return n}return-1}function Br(t,n){return 0===n?gn(t).type:2===n?gn(t).declaredType:1===n?t.resolvedBaseConstructorType:3===n?t.resolvedReturnType:void e.Debug.fail("Unhandled TypeSystemPropertyName "+n)}function jr(){return ft.pop(),mt.pop(),_t.pop()}function $r(t){return(t=e.findAncestor(e.getRootDeclaration(t),(function(e){switch(e.kind){case 226:case 227:case 242:case 241:case 240:case 239:return!1;default:return!0}})))&&t.parent}function Kr(e,t){var n=va(e,t);return n?ci(n):void 0}function zr(e){return e&&0!=(1&e.flags)}function Jr(e){var t=er(e);return t&&gn(t).type||Yr(e,!1)}function qr(t){return 144===t.kind&&!e.isStringOrNumericLiteral(t.expression)}function Vr(t,n,r){if(8192&(t=vl(t,(function(e){return!(6144&e.flags)}))).flags)return ue;if(65536&t.flags)return bl(t,(function(e){return Vr(e,n,r)}));for(var i=e.createSymbolTable(),a=e.createUnderscoreEscapedMap(),o=0,s=n;o<s.length;o++){var c=s[o];a.set(e.getTextOfPropertyName(c),!0)}for(var l=0,u=sa(t);l<u.length;l++){var d=u[l],p=a.has(d.escapedName),f=24&e.getDeclarationModifierFlagsFromSymbol(d),_=65536&d.flags&&!(32768&d.flags);p||f||os(d)||_||i.set(d.escapedName,d)}var m=Ta(t,0),g=Ta(t,1);return dr(r,i,e.emptyArray,e.emptyArray,m,g)}function Hr(t){var n,r=t.parent,i=Jr(r.parent);if(i===W)return W;if(!i)return t.initializer?bp(t):i;if(zr(i))return i;if(174===r.kind)if(t.dotDotDotToken){if(!Su(i))return cn(t,e.Diagnostics.Rest_types_may_only_be_created_from_object_types),W;for(var a=[],o=0,s=r.elements;o<s.length;o++){var c=s[o];c.dotDotDotToken||a.push(c.propertyName||c.name)}n=Vr(i,a,t.symbol)}else{var l=t.propertyName||t.name;if(qr(l))return H;var u=e.getTextOfPropertyName(l),d=Kr(i,u);if(!(n=d&&Fl(t,d)||vu(u)&&Ca(i,1)||Ca(i,0)))return cn(l,e.Diagnostics.Type_0_has_no_property_1_and_no_string_index_signature,Er(i),e.declarationNameToString(l)),W}else{var p=If(i,r,!1,!1);if(t.dotDotDotToken)n=No(p);else{var f=""+e.indexOf(r.elements,t);if(!(n=lc(i)?Kr(i,f):p))return _c(i)?cn(t,e.Diagnostics.Tuple_type_0_with_length_1_cannot_be_assigned_to_tuple_with_length_2,Er(i),Za(i),r.elements.length):cn(t,e.Diagnostics.Type_0_has_no_property_1,Er(i),f),W}}return!A||!t.initializer||2048&gc(yp(t.initializer))||(n=nl(n,131072)),t.initializer?jo([n,yp(t.initializer)],!0):n}function Gr(t){var n=e.getJSDocType(t);if(n)return ps(n)}function Wr(t){var n=e.skipParentheses(t);return 177===n.kind&&0===n.elements.length}function Qr(e,t){return A&&t?bc(e,2048):e}function Yr(t,n){if(215===t.parent.parent.kind){var r=Vo(Ju(t.parent.parent.expression));return 278528&r.flags?r:ee}if(216===t.parent.parent.kind){var i=t.parent.parent;return Nf(i.expression,i.awaitModifier)||H}if(e.isBindingPattern(t.parent))return Hr(t);var a,o,s=e.getEffectiveTypeAnnotationNode(t);if(s)return Qr(ps(s),t.questionToken&&n);if((N||e.isInJavaScriptFile(t))&&226===t.kind&&!e.isBindingPattern(t.name)&&!(1&e.getCombinedModifierFlags(t))&&!e.isInAmbientContext(t)){if(!(2&e.getCombinedNodeFlags(t)||t.initializer&&(a=t.initializer,o=e.skipParentheses(a),95!==o.kind&&(71!==o.kind||Jc(o)!==F))))return G;if(t.initializer&&Wr(t.initializer))return Pe}if(146===t.kind){var c=t.parent;if(154===c.kind&&!e.hasDynamicName(c)){var l=e.getDeclarationOfKind(t.parent.symbol,153);if(l){var u=Oa(l),d=mm(c);return d&&t===d?(e.Debug.assert(!d.type),ci(u.thisParameter)):Ra(u)}}var p=void 0;if(p="this"===t.symbol.escapedName?Zl(c):eu(t))return Qr(p,t.questionToken&&n)}return t.initializer?Qr(p=bp(t),t.questionToken&&n):e.isJsxAttribute(t)?ne:262===t.kind?Kl(t.name):e.isBindingPattern(t.name)?Zr(t.name,!1,!0):void 0}function Xr(t,n,r){return t.initializer?bp(t):e.isBindingPattern(t.name)?Zr(t.name,n,r):(r&&N&&!ti(t)&&wc(t,H),H)}function Zr(t,n,r){return 174===t.kind?function(t,n,r){var i,a=e.createSymbolTable(),o=!1;e.forEach(t.elements,(function(t){var s=t.propertyName||t.name;if(qr(s))o=!0;else if(t.dotDotDotToken)i=qa(H,!1);else{var c=e.getTextOfPropertyName(s),l=ln(4|(t.initializer?16777216:0),c);l.type=Xr(t,n,r),l.bindingElement=t,a.set(l.escapedName,l)}}));var s=dr(void 0,a,e.emptyArray,e.emptyArray,i,void 0);return n&&(s.pattern=t),o&&(s.objectFlags|=512),s}(t,n,r):function(t,n,r){var i=t.elements,a=e.lastOrUndefined(i);if(0===i.length||!e.isOmittedExpression(a)&&a.dotDotDotToken)return T>=2?Ao(H):Ie;var o=Po(e.map(i,(function(t){return e.isOmittedExpression(t)?H:Xr(t,n,r)})));return n&&((o=Xa(o)).pattern=t),o}(t,n,r)}function ei(e,t){var n=Yr(e,!0);return n?(t&&Nc(e,n),261===e.kind?n:Dc(n)):(n=e.dotDotDotToken?Ie:H,t&&N&&(ti(e)||wc(e,n)),n)}function ti(t){var n=e.getRootDeclaration(t);return Kp(146===n.kind?n.parent:n)}function ni(t){var n,r=gn(t);if(!r.type){if(4194304&t.flags)return r.type=(n=Pi(tr(t))).typeParameters?Ya(n,e.map(n.typeParameters,(function(e){return H}))):n;var i=t.valueDeclaration;if(e.isCatchClauseVariableDeclarationOrBindingElement(i))return r.type=H;if(243===i.kind)return r.type=Dp(i.expression);if(e.isInJavaScriptFile(i)&&e.isJSDocPropertyLikeTag(i)&&i.typeExpression)return r.type=ps(i.typeExpression.type);if(!Mr(t,0))return W;var a=void 0;a=194===i.kind||179===i.kind&&194===i.parent.kind?function(t){for(var n,r=[],i=!1,a=!1,o=0,s=t.declarations;o<s.length;o++){var c=s[o],l=194===c.kind?c:179===c.kind?e.getAncestor(c,194):void 0;if(!l)return W;e.isPropertyAccessExpression(l.left)&&99===l.left.expression.kind&&(152===e.getThisContainer(l,!1).kind?i=!0:a=!0);var u=Gr(l.parent);if(u){var d=Dc(u);if(n){if(n!==W&&d!==W&&!ws(n,d)){var p=e.getNameOfDeclaration(c);cn(p,e.Diagnostics.Subsequent_variable_declarations_must_have_the_same_type_Variable_0_must_be_of_type_1_but_here_has_type_2,e.declarationNameToString(p),Er(n),Er(d))}}else n=d}else n||r.push(fc(yp(l.right)))}return Dc(Qr(n||jo(r,!0),a&&!i))}(t):ei(i,!0),jr()||(a=si(t)),r.type=a}return r.type}function ri(t){if(t){if(153===t.kind){var n=e.getEffectiveReturnTypeNode(t);return n&&ps(n)}var r=e.getEffectiveSetAccessorTypeAnnotationNode(t);return r&&ps(r)}}function ii(e){return La(Oa(e))}function ai(t){var n=gn(t);if(!n.type){var r=e.getDeclarationOfKind(t,153),i=e.getDeclarationOfKind(t,154);if(r&&e.isInJavaScriptFile(r)){var a=Gr(r);if(a)return n.type=a}if(!Mr(t,0))return W;var o=void 0,s=ri(r);if(s)o=s;else{var c=ri(i);c?o=c:r&&r.body?o=Vd(r):(N&&(i?cn(i,e.Diagnostics.Property_0_implicitly_has_type_any_because_its_set_accessor_lacks_a_parameter_type_annotation,Tr(t)):(e.Debug.assert(!!r,"there must existed getter as we are current checking either setter or getter in this function"),cn(r,e.Diagnostics.Property_0_implicitly_has_type_any_because_its_get_accessor_lacks_a_return_type_annotation,Tr(t)))),o=H)}if(!jr())if(o=H,N)cn(e.getDeclarationOfKind(t,153),e.Diagnostics._0_implicitly_has_return_type_any_because_it_does_not_have_a_return_type_annotation_and_is_referenced_directly_or_indirectly_in_one_of_its_return_expressions,Tr(t));n.type=o}return n.type}function oi(e){var t=ki(Ci(e));return 540672&t.flags?t:void 0}function si(t){return e.getEffectiveTypeAnnotationNode(t.valueDeclaration)?(cn(t.valueDeclaration,e.Diagnostics._0_is_referenced_directly_or_indirectly_in_its_own_type_annotation,Tr(t)),W):(N&&cn(t.valueDeclaration,e.Diagnostics._0_implicitly_has_type_any_because_it_does_not_have_a_type_annotation_and_is_referenced_directly_or_indirectly_in_its_own_initializer,Tr(t)),H)}function ci(t){return 1&e.getCheckFlags(t)?function(t){var n=gn(t);if(!n.type)if(100===b)cn(t.valueDeclaration,e.Diagnostics.Generic_type_instantiation_is_excessively_deep_and_possibly_infinite),n.type=W;else{if(!Mr(t,0))return W;b++;var r=Ss(ci(n.target),n.mapper);b--,jr()||(r=si(t)),n.type=r}return n.type}(t):7&t.flags?ni(t):9136&t.flags?function(t){var n=gn(t);if(!n.type)if(1536&t.flags&&e.isShorthandAmbientModuleSymbol(t))n.type=H;else{var r=sr(16,t);if(32&t.flags){var i=oi(t);n.type=i?Jo([r,i]):r}else n.type=A&&16777216&t.flags?bc(r,2048):r}return n.type}(t):8&t.flags?function(e){var t=gn(e);return t.type||(t.type=Ni(e)),t.type}(t):98304&t.flags?ai(t):2097152&t.flags?function(e){var t=gn(e);if(!t.type){var n=Rn(e);t.type=107455&n.flags?ci(n):W}return t.type}(t):W}function li(e,t){return void 0!==e&&void 0!==t&&0!=(4&yn(e))&&e.target===t}function ui(e){return 4&yn(e)?e.target:e}function di(t,n){return function t(r){if(7&yn(r)){var i=ui(r);return i===n||e.forEach(Si(i),t)}if(131072&r.flags)return e.forEach(r.types,t)}(t)}function pi(t,n){for(var r=0,i=n;r<i.length;r++){var a=Ii(er(i[r]));t=e.appendIfUnique(t,a)}return t}function fi(t,n){for(;;){if(!(t=t.parent))return;switch(t.kind){case 229:case 199:case 230:case 155:case 156:case 150:case 160:case 161:case 273:case 228:case 151:case 186:case 187:case 231:case 282:case 172:var r=fi(t,n);if(172===t.kind)return e.append(r,Ii(er(t.typeParameter)));var i=pi(r,e.getEffectiveTypeParameterDeclarations(t)||e.emptyArray),a=n&&(229===t.kind||199===t.kind||230===t.kind)&&Ci(er(t)).thisType;return a?e.append(i,a):i}}}function _i(t){return fi(32&t.flags?t.valueDeclaration:e.getDeclarationOfKind(t,230))}function mi(e){for(var t,n=0,r=e.declarations;n<r.length;n++){var i=r[n];if(230===i.kind||229===i.kind||199===i.kind||231===i.kind){var a=i;a.typeParameters&&(t=pi(t,a.typeParameters))}}return t}function gi(t){return e.concatenate(_i(t),mi(t))}function hi(e){var t=xa(e,1);if(1===t.length){var n=t[0];return!n.typeParameters&&1===n.parameters.length&&n.hasRestParameter&&Bd(n.parameters[0])===Ie}return!1}function yi(e){if(Ti(e)&&xa(e,1).length>0)return!0;if(540672&e.flags){var t=ua(e);return t&&Ti(t)&&hi(t)}return!1}function vi(t){var n=t.symbol.valueDeclaration;if(e.isInJavaScriptFile(n)){var r=e.getJSDocAugmentsTag(n);if(r)return r.class}return e.getClassExtendsHeritageClauseElement(n)}function bi(t,n,r){var i=e.length(n),a=e.isInJavaScriptFile(r);return e.filter(xa(t,1),(function(t){return(a||i>=Ia(t.typeParameters))&&i<=e.length(t.typeParameters)}))}function xi(t,n,r){var i=bi(t,n,r),a=e.map(n,ps);return e.sameMap(i,(function(t){return e.some(t.typeParameters)?Ua(t,a,e.isInJavaScriptFile(r)):t}))}function ki(t){if(!t.resolvedBaseConstructorType){var n=t.symbol.valueDeclaration,r=e.getClassExtendsHeritageClauseElement(n),i=vi(t);if(!i)return t.resolvedBaseConstructorType=Q;if(!Mr(t,1))return W;var a=Dp(i.expression);if(r&&i!==r&&(e.Debug.assert(!r.typeArguments),Dp(r.expression)),163840&a.flags&&ia(a),!jr())return cn(t.symbol.valueDeclaration,e.Diagnostics._0_is_referenced_directly_or_indirectly_in_its_own_base_expression,Tr(t.symbol)),t.resolvedBaseConstructorType=W;if(!(1&a.flags||a===Z||yi(a)))return cn(i.expression,e.Diagnostics.Type_0_is_not_a_constructor_function_type,Er(a)),t.resolvedBaseConstructorType=W;t.resolvedBaseConstructorType=a}return t.resolvedBaseConstructorType}function Si(t){return t.resolvedBaseTypes||(8&t.objectFlags?t.resolvedBaseTypes=[No(jo(t.typeParameters))]:96&t.symbol.flags?(32&t.symbol.flags&&function(t){t.resolvedBaseTypes=e.emptyArray;var n=ma(ki(t));if(!(163841&n.flags))return;var r,i=vi(t),a=so(i),o=n&&n.symbol?Pi(n.symbol):void 0;if(n.symbol&&32&n.symbol.flags&&function(e){var t=e.outerTypeParameters;if(t){var n=t.length-1,r=e.typeArguments;return t[n].symbol!==r[n].symbol}return!0}(o))r=eo(i,n.symbol,a);else if(1&n.flags)r=n;else{var s=xi(n,i.typeArguments,i);if(!s.length)return void cn(i.expression,e.Diagnostics.No_base_constructor_has_the_specified_number_of_type_arguments);r=Ra(s[0])}if(r===W)return;if(!Ti(r))return void cn(i.expression,e.Diagnostics.Base_constructor_return_type_0_is_not_a_class_or_interface_type,Er(r));if(t===r||di(r,t))return void cn(t.symbol.valueDeclaration,e.Diagnostics.Type_0_recursively_references_itself_as_a_base_type,Er(t,void 0,1));t.resolvedBaseTypes=[r]}(t),64&t.symbol.flags&&function(t){t.resolvedBaseTypes=t.resolvedBaseTypes||e.emptyArray;for(var n=0,r=t.symbol.declarations;n<r.length;n++){var i=r[n];if(230===i.kind&&e.getInterfaceBaseTypeNodes(i))for(var a=0,o=e.getInterfaceBaseTypeNodes(i);a<o.length;a++){var s=o[a],c=ps(s);c!==W&&(Ti(c)?t===c||di(c,t)?cn(i,e.Diagnostics.Type_0_recursively_references_itself_as_a_base_type,Er(t,void 0,1)):t.resolvedBaseTypes===e.emptyArray?t.resolvedBaseTypes=[c]:t.resolvedBaseTypes.push(c):cn(s,e.Diagnostics.An_interface_may_only_extend_a_class_or_another_interface))}}}(t)):e.Debug.fail("type must be class or interface")),t.resolvedBaseTypes}function Ti(t){return 16809985&t.flags&&!ra(t)||131072&t.flags&&!e.forEach(t.types,(function(e){return!Ti(e)}))}function Ci(t){var n=gn(t);if(!n.declaredType){var r=32&t.flags?1:2,i=n.declaredType=sr(r,t),a=_i(t),o=mi(t);(a||o||1===r||!function(t){for(var n=0,r=t.declarations;n<r.length;n++){var i=r[n];if(230===i.kind){if(64&i.flags)return!1;var a=e.getInterfaceBaseTypeNodes(i);if(a)for(var o=0,s=a;o<s.length;o++){var c=s[o];if(e.isEntityNameExpression(c.expression)){var l=$n(c.expression,793064,!0);if(!l||!(64&l.flags)||Ci(l).thisType)return!1}}}}return!0}(t))&&(i.objectFlags|=4,i.typeParameters=e.concatenate(a,o),i.outerTypeParameters=a,i.localTypeParameters=o,i.instantiations=e.createMap(),i.instantiations.set(Wa(i.typeParameters),i),i.target=i,i.typeArguments=i.typeParameters,i.thisType=ar(16384),i.thisType.isThisType=!0,i.thisType.symbol=t,i.thisType.constraint=i)}return n.declaredType}function Ei(t){var n=t.initializer;if(!n)return!e.isInAmbientContext(t);switch(n.kind){case 9:case 8:return!0;case 192:return 38===n.operator&&8===n.operand.kind;case 71:return e.nodeIsMissing(n)||!!er(t.parent).exports.get(n.escapedText);default:return!1}}function Di(e){var t=gn(e);if(void 0!==t.enumKind)return t.enumKind;for(var n=!1,r=0,i=e.declarations;r<i.length;r++){var a=i[r];if(232===a.kind)for(var o=0,s=a.members;o<s.length;o++){var c=s[o];if(c.initializer&&9===c.initializer.kind)return t.enumKind=1;Ei(c)||(n=!0)}}return t.enumKind=n?0:1}function Ai(e){return 256&e.flags&&!(65536&e.flags)?Pi(tr(e.symbol)):e}function wi(e){var t=gn(e);if(t.declaredType)return t.declaredType;if(1===Di(e)){v++;for(var n=[],r=0,i=e.declarations;r<i.length;r++){var a=i[r];if(232===a.kind)for(var o=0,s=a.members;o<s.length;o++){var c=s[o],l=us(j_(c),v,er(c));gn(er(c)).declaredType=l,n.push(l)}}if(n.length){var u=jo(n,!1,e,void 0);return 65536&u.flags&&(u.flags|=256,u.symbol=e),t.declaredType=u}}var d=ar(16);return d.symbol=e,t.declaredType=d}function Ni(e){var t=gn(e);if(!t.declaredType){var n=wi(tr(e));t.declaredType||(t.declaredType=n)}return t.declaredType}function Ii(e){var t=gn(e);if(!t.declaredType){var n=ar(16384);n.symbol=e,t.declaredType=n}return t.declaredType}function Pi(e){return Oi(e)||W}function Oi(t){return 96&t.flags?Ci(t):524288&t.flags?function(t){var n=gn(t);if(!n.declaredType){if(!Mr(t,2))return W;var r=e.find(t.declarations,(function(e){return 283===e.kind||231===e.kind})),i=283===r.kind?r.typeExpression:r.type,a=i?ps(i):W;if(jr()){var o=mi(t);o&&(n.typeParameters=o,n.instantiations=e.createMap(),n.instantiations.set(Wa(o),a))}else a=W,cn(r.name,e.Diagnostics.Type_alias_0_circularly_references_itself,Tr(t));n.declaredType=a}return n.declaredType}(t):262144&t.flags?Ii(t):384&t.flags?wi(t):8&t.flags?Ni(t):2097152&t.flags?function(e){var t=gn(e);return t.declaredType||(t.declaredType=Pi(Rn(e))),t.declaredType}(t):void 0}function Fi(e){switch(e.kind){case 119:case 136:case 133:case 122:case 137:case 134:case 105:case 139:case 95:case 130:case 173:return!0;case 164:return Fi(e.elementType);case 159:return function(e){if(e.typeArguments)for(var t=0,n=e.typeArguments;t<n.length;t++)if(!Fi(n[t]))return!1;return!0}(e)}return!1}function Li(t){var n=e.getEffectiveTypeAnnotationNode(t);return n?Fi(n):!t.initializer}function Ri(t){if(t.declarations&&1===t.declarations.length){var n=t.declarations[0];if(n)switch(n.kind){case 149:case 148:return Li(n);case 151:case 150:case 152:return function(t){if(152!==t.kind){var n=e.getEffectiveReturnTypeNode(t);if(!n||!Fi(n))return!1}for(var r=0,i=t.parameters;r<i.length;r++)if(!Li(i[r]))return!1;return!0}(n)}}return!1}function Mi(t,n,r){for(var i=e.createSymbolTable(),a=0,o=t;a<o.length;a++){var s=o[a];i.set(s.escapedName,r&&Ri(s)?s:bs(s,n))}return i}function Ui(e,t){for(var n=0,r=t;n<r.length;n++){var i=r[n];e.has(i.escapedName)||e.set(i.escapedName,i)}}function Bi(e){if(!e.declaredProperties){var t=e.symbol;e.declaredProperties=lr(t.members),e.declaredCallSignatures=Fa(t.members.get("__call")),e.declaredConstructSignatures=Fa(t.members.get("__new")),e.declaredStringIndexInfo=Va(t,0),e.declaredNumberIndexInfo=Va(t,1)}return e}function ji(t,n){if(4&yn(t)){var r=t.target,i=t.typeArguments;if(e.length(r.typeParameters)===e.length(i))return Ya(r,e.concatenate(i,[n||r.thisType]))}else if(131072&t.flags)return Jo(e.map(t.types,(function(e){return ji(e,n)})));return t}function $i(t,n,r,i){var a,o,s,c,l,u;e.rangeEquals(r,i,0,r.length)?(a=k,o=n.symbol?n.symbol.members:e.createSymbolTable(n.declaredProperties),s=n.declaredCallSignatures,c=n.declaredConstructSignatures,l=n.declaredStringIndexInfo,u=n.declaredNumberIndexInfo):(a=gs(r,i),o=Mi(n.declaredProperties,a,1===r.length),s=ms(n.declaredCallSignatures,a),c=ms(n.declaredConstructSignatures,a),l=Ts(n.declaredStringIndexInfo,a),u=Ts(n.declaredNumberIndexInfo,a));var d=Si(n);if(d.length){n.symbol&&o===n.symbol.members&&(o=e.createSymbolTable(n.declaredProperties));for(var p=e.lastOrUndefined(i),f=0,_=d;f<_.length;f++){var m=_[f],g=p?ji(Ss(m,a),p):m;Ui(o,sa(g)),s=e.concatenate(s,xa(g,0)),c=e.concatenate(c,xa(g,1)),l||(l=g===H?qa(H,!1):Ta(g,0)),u=u||Ta(g,1)}}ur(t,o,s,c,l,u)}function Ki(e,t,n,r,i,a,o,s,c){var l=new g(U);return l.declaration=e,l.typeParameters=t,l.parameters=r,l.thisParameter=n,l.resolvedReturnType=i,l.typePredicate=a,l.minArgumentCount=o,l.hasRestParameter=s,l.hasLiteralTypes=c,l}function zi(e){return Ki(e.declaration,e.typeParameters,e.thisParameter,e.parameters,e.resolvedReturnType,e.typePredicate,e.minArgumentCount,e.hasRestParameter,e.hasLiteralTypes)}function Ji(e,t,n,r,i){for(var a=0,o=e;a<o.length;a++){var s=o[a];if(ic(s,t,n,r,i,Ns))return s}}function qi(t,n,r){if(n.typeParameters){if(r>0)return;for(var i=1;i<t.length;i++)if(!Ji(t[i],n,!1,!1,!1))return;return[n]}var a=void 0;for(i=0;i<t.length;i++){var o=i===r?n:Ji(t[i],n,!0,!0,!0);if(!o)return;a=e.appendIfUnique(a,o)}return a}function Vi(t,n){for(var r=e.map(t,(function(e){return xa(e,n)})),i=void 0,a=0;a<r.length;a++)for(var o=0,s=r[a];o<s.length;o++){var c=s[o];if(!i||!Ji(i,c,!1,!0,!0)){var l=qi(r,c,a);if(l){var u=c;if(l.length>1){if(u=zi(c),e.forEach(l,(function(e){return e.thisParameter}))){var d=jo(e.map(l,(function(e){return ci(e.thisParameter)||H})),!0);u.thisParameter=Sc(c.thisParameter,d)}u.resolvedReturnType=void 0,u.unionSignatures=l}(i||(i=[])).push(u)}}}return i||e.emptyArray}function Hi(e,t){for(var n=[],r=!1,i=0,a=e;i<a.length;i++){var o=Ta(a[i],t);if(!o)return;n.push(o.type),r=r||o.isReadonly}return qa(jo(n,!0),r)}function Gi(e,t){return e?t?Jo([e,t]):e:t}function Wi(e,t){return e?t?qa(Jo([e.type,t.type]),e.isReadonly&&t.isReadonly):e:t}function Qi(e,t){return e&&t&&qa(jo([e.type,t.type]),e.isReadonly||t.isReadonly)}function Yi(t){for(var n,r,i=e.emptyArray,a=e.emptyArray,o=t.types,s=e.countWhere(o,hi),c=function(c){var l=t.types[c];if(0===s||s===o.length&&0===c||!hi(l)){var u=xa(l,1);u.length&&s>0&&(u=e.map(u,(function(e){var t=zi(e);return t.resolvedReturnType=function(e,t,n){for(var r=[],i=0;i<t.length;i++)i===n?r.push(e):hi(t[i])&&r.push(Ra(xa(t[i],1)[0]));return Jo(r)}(Ra(e),o,c),t}))),a=e.concatenate(a,u)}i=e.concatenate(i,xa(l,0)),n=Wi(n,Ta(l,0)),r=Wi(r,Ta(l,1))},l=0;l<o.length;l++)c(l);ur(t,x,i,a,n,r)}function Xi(t){var n=t.symbol;if(t.target)ur(t,a=Mi(aa(t.target),t.mapper,!1),r=ms(xa(t.target,0),t.mapper),i=ms(xa(t.target,1),t.mapper),o=Ts(Ta(t.target,0),t.mapper),c=Ts(Ta(t.target,1),t.mapper));else if(2048&n.flags){var r=Fa((a=n.members).get("__call")),i=Fa(a.get("__new"));ur(t,a,r,i,o=Va(n,0),c=Va(n,1))}else{var a=x,o=void 0;if(n.exports&&(a=Qn(n)),32&n.flags){var s=ki(l=Ci(n));704512&s.flags?Ui(a=e.createSymbolTable(lr(a)),sa(s)):s===H&&(o=qa(H,!1))}var c=384&n.flags?it:void 0;if(ur(t,a,e.emptyArray,e.emptyArray,o,c),8208&n.flags&&(t.callSignatures=Fa(n)),32&n.flags){var l=Ci(n);(i=Fa(n.members.get("__constructor"))).length||(i=function(t){var n=xa(ki(t),1);if(0===n.length)return[Ki(void 0,t.localTypeParameters,void 0,e.emptyArray,t,void 0,0,!1,!1)];for(var r=vi(t),i=e.isInJavaScriptFile(r),a=so(r),o=e.length(a),s=[],c=0,l=n;c<l.length;c++){var u=l[c],d=Ia(u.typeParameters),p=e.length(u.typeParameters);if((i||o>=d)&&o<=p){var f=p?Ba(u,Pa(a,u.typeParameters,d,i)):zi(u);f.typeParameters=t.localTypeParameters,f.resolvedReturnType=t,s.push(f)}}return s}(l)),t.constructSignatures=i}}}function Zi(t){var n,r=e.createSymbolTable();ur(t,x,e.emptyArray,e.emptyArray,void 0,void 0);var i=ea(t),a=ta(t),o=na(t),s=ma(function(e){if(!e.modifiersType){var t=e.declaration.typeParameter.constraint;if(170===t.kind)e.modifiersType=Ss(ps(t.type),e.mapper||k);else{var n=ta(es(e.declaration)),r=n&&16384&n.flags?ca(n):n;e.modifiersType=r&&262144&r.flags?Ss(r.type,e.mapper||k):ue}}return e.modifiersType}(t)),c=!!t.declaration.readonlyToken,l=!!t.declaration.questionToken;if(170===t.declaration.typeParameter.constraint.kind){for(var u=0,d=sa(s);u<d.length;u++){var p=d[u];_(qo(p),p)}(1&s.flags||Ta(s,0))&&_(ee)}else{var f=540672&a.flags?ma(a):a;yl(262144&f.flags?Vo(ma(f.type)):f,_)}function _(a,u){var d;"object"==typeof u&&(d=u);var p=gs([i],[a]),f=t.mapper?hs(t.mapper,p):p,_=Ss(o,f);if(32&a.flags){var m=e.escapeLeadingUnderscores(a.value),g=va(s,m),h=ln(4|(l||!!(g&&16777216&g.flags)?16777216:0),m);h.checkFlags=c||g&&ep(g)?8:0,h.type=_,d&&(h.syntheticOrigin=d,h.declarations=d.declarations),h.syntheticLiteralTypeOrigin=a,r.set(m,h)}else 3&a.flags&&(n=qa(_,c))}ur(t,r,e.emptyArray,e.emptyArray,n,void 0)}function ea(e){return e.typeParameter||(e.typeParameter=Ii(er(e.declaration.typeParameter)))}function ta(e){return e.constraintType||(e.constraintType=Ss(ca(ea(e)),e.mapper||k)||W)}function na(e){return e.templateType||(e.templateType=e.declaration.type?Ss(Qr(ps(e.declaration.type),!!e.declaration.questionToken),e.mapper||k):W)}function ra(e){return 32&yn(e)&&Wo(ta(e))}function ia(t){return t.members||(32768&t.flags?4&t.objectFlags?function(t){var n=Bi(t.target),r=e.concatenate(n.typeParameters,[n.thisType]);$i(t,n,r,t.typeArguments&&t.typeArguments.length===r.length?t.typeArguments:e.concatenate(t.typeArguments,[t]))}(t):3&t.objectFlags?function(t){$i(t,Bi(t),e.emptyArray,e.emptyArray)}(t):16&t.objectFlags?Xi(t):32&t.objectFlags&&Zi(t):65536&t.flags?function(e){var t=Vi(e.types,0),n=Vi(e.types,1),r=Hi(e.types,0),i=Hi(e.types,1);ur(e,x,t,n,r,i)}(t):131072&t.flags&&Yi(t)),t}function aa(t){return 32768&t.flags?ia(t).properties:e.emptyArray}function oa(e,t){if(32768&e.flags){var n=ia(e).members.get(t);if(n&&rr(n))return n}}function sa(t){return 196608&(t=ma(t)).flags?function(t){if(!t.resolvedProperties){for(var n=e.createSymbolTable(),r=0,i=t.types;r<i.length;r++){for(var a=0,o=sa(i[r]);a<o.length;a++){var s=o[a];if(!n.has(s.escapedName)){var c=ya(t,s.escapedName);c&&n.set(s.escapedName,c)}}if(65536&t.flags)break}t.resolvedProperties=lr(n)}return t.resolvedProperties}(t):aa(t)}function ca(e){return da(e)?Ha(e):void 0}function la(e){var t=Yo(e);if(t)return t;var n=ua(e.objectType),r=ua(e.indexType);return n||r?Xo(n||e.objectType,r||e.indexType):void 0}function ua(e){if(737280&e.flags){var t=pa(e);if(t!==me&&t!==ge)return t}else if(262144&e.flags)return ee}function da(e){return pa(e)!==ge}function pa(t){var n,r;if(!t.resolvedBaseConstraint){n=[];var i=a(t);t.resolvedBaseConstraint=r?ge:ji(i||me,t)}return t.resolvedBaseConstraint;function a(t){if(!e.contains(n,t)){n.push(t);var i=function(e){if(16384&e.flags){var t=Ha(e);return e.isThisType?t:t?a(t):void 0}if(196608&e.flags){for(var n=e.types,r=[],i=0,o=n;i<o.length;i++){var s=a(o[i]);s&&r.push(s)}return 65536&e.flags&&r.length===n.length?jo(r):131072&e.flags&&r.length?Jo(r):void 0}if(262144&e.flags)return ee;if(524288&e.flags){var c=Yo(e);if(c)return a(c);var l=a(e.objectType),u=a(e.indexType),d=l&&u?Xo(l,u):void 0;return d&&d!==W?a(d):void 0}if(ra(e))return ue;return e}(t);return n.pop(),i}r=!0}}function fa(t){if(t.default)t.default===he&&(t.default=ge);else if(t.target){var n=fa(t.target);t.default=n?Ss(n,t.mapper):me}else{t.default=he;var r=t.symbol&&e.forEach(t.symbol.declarations,(function(t){return e.isTypeParameterDeclaration(t)&&t.default})),i=r?ps(r):me;t.default===he&&(t.default=i)}return t.default}function _a(e){var t=fa(e);return t!==me&&t!==ge?t:void 0}function ma(e){var t=540672&e.flags?ua(e)||ue:e;return 131072&t.flags?function(e){return e.resolvedApparentType||(e.resolvedApparentType=ji(e,e))}(t):262178&t.flags?Ee:84&t.flags?De:136&t.flags?Ae:512&t.flags?_o(T>=2):16777216&t.flags?ue:t}function ga(t,n){for(var r,i=t.types,a=65536&t.flags,o=a?24:0,s=a?0:16777216,c=4,l=0,u=0,d=i;u<d.length;u++){if((v=ma(d[u]))!==W){var p=(y=va(v,n))?e.getDeclarationModifierFlagsFromSymbol(y):0;!y||p&o?a&&(l|=16):(s&=y.flags,r=e.appendIfUnique(r,y),l|=(ep(y)?8:0)|(24&p?0:64)|(16&p?128:0)|(8&p?256:0)|(32&p?512:0),Ku(y)||(c=2))}}if(r){if(1===r.length&&!(16&l))return r[0];for(var f=[],_=[],m=void 0,g=0,h=r;g<h.length;g++){var y;(y=h[g]).declarations&&e.addRange(_,y.declarations);var v=ci(y);m?v!==m&&(l|=32):m=v,f.push(v)}var b=ln(4|s,n);return b.checkFlags=c|l,b.containingType=t,b.declarations=_,b.type=a?jo(f):Jo(f),b}}function ha(t,n){var r=t.propertyCache||(t.propertyCache=e.createSymbolTable()),i=r.get(n);return i||(i=ga(t,n))&&r.set(n,i),i}function ya(t,n){var r=ha(t,n);return!r||16&e.getCheckFlags(r)?void 0:r}function va(e,t){if(32768&(e=ma(e)).flags){var n=ia(e),r=n.members.get(t);if(r&&rr(r))return r;if(n===_e||n.callSignatures.length||n.constructSignatures.length){var i=oa(Se,t);if(i)return i}return oa(ke,t)}if(196608&e.flags)return ya(e,t)}function ba(t,n){if(229376&t.flags){var r=ia(t);return 0===n?r.callSignatures:r.constructSignatures}return e.emptyArray}function xa(e,t){return ba(ma(e),t)}function ka(e,t){if(229376&e.flags){var n=ia(e);return 0===t?n.stringIndexInfo:n.numberIndexInfo}}function Sa(e,t){var n=ka(e,t);return n&&n.type}function Ta(e,t){return ka(ma(e),t)}function Ca(e,t){return Sa(ma(e),t)}function Ea(e,t){if(kc(e)){for(var n=[],r=0,i=sa(e);r<i.length;r++){var a=i[r];(0===t||vu(a.escapedName))&&n.push(ci(a))}if(n.length)return jo(n,!0)}}function Da(e){var t=[];return e.forEach((function(e,n){cr(n)||t.push(e)})),t}function Aa(t){if(e.isInJavaScriptFile(t)){if(t.type&&272===t.type.kind)return!0;var n=e.getJSDocParameterTags(t);if(n)for(var r=0,i=n;r<i.length;r++){var a=i[r];if(a.isBracketed)return!0;if(a.typeExpression)return 272===a.typeExpression.type.kind}}}function wa(t,n){if(!e.isExternalModuleNameRelative(t)){var r=bn(ot,'"'+t+'"',512);return r&&n?Zn(r):r}}function Na(t){if(e.hasQuestionToken(t)||Aa(t))return!0;if(t.initializer){var n=t.parent,r=Oa(n),i=e.indexOf(n.parameters,t);return e.Debug.assert(i>=0),i>=r.minArgumentCount}var a=e.getImmediatelyInvokedFunctionExpression(t.parent);return!!a&&(!t.type&&!t.dotDotDotToken&&e.indexOf(t.parent.parameters,t)>=a.arguments.length)}function Ia(t){var n,r=0;if(t)for(var i=0;i<t.length;i++)(n=t[i]).symbol&&e.forEach(n.symbol.declarations,(function(t){return e.isTypeParameterDeclaration(t)&&t.default}))||(r=i+1);return r}function Pa(t,n,r,i){var a=e.length(n);if(a){var o=e.length(t);if((i||o>=r)&&o<=a){t||(t=[]);for(var s=o;s<a;s++)t[s]=Kc(i);for(s=o;s<a;s++){var c=gs(n,t),l=_a(n[s]);t[s]=l?Ss(l,c):Kc(i)}}}return t}function Oa(t){var n,r,i,a=hn(t);if(!a.resolvedSignature){for(var o=[],s=!1,c=0,l=void 0,u=void 0,d=e.getImmediatelyInvokedFunctionExpression(t),p=e.isJSDocConstructSignature(t),f=!d&&!p&&e.isInJavaScriptFile(t)&&!e.hasJSDocParameterTags(t),_=p?1:0;_<t.parameters.length;_++){var m=t.parameters[_],g=m.symbol;if(g&&4&g.flags&&!e.isBindingPattern(m.name))g=kn(m,g.escapedName,107455,void 0,void 0,!1);0===_&&"this"===g.escapedName?(u=!0,l=m.symbol):o.push(g),m.type&&173===m.type.kind&&(s=!0),m.initializer||m.questionToken||m.dotDotDotToken||d&&o.length>d.arguments.length&&!m.type||Aa(m)||f||(c=o.length)}if(!(153!==t.kind&&154!==t.kind||e.hasDynamicName(t)||u&&l)){var h=153===t.kind?154:153,y=e.getDeclarationOfKind(t.symbol,h);y&&(l=(i=mm(y))&&i.symbol)}var v=152===t.kind?Ci(Zn(t.parent.symbol)):void 0,b=v?v.localTypeParameters:function(t){var n;return e.forEach(e.getEffectiveTypeParameterDeclarations(t),(function(t){var r=Ii(t.symbol);n=e.appendIfUnique(n,r)})),n}(t),x=function(t,n,r){if(n)return ps(t.parameters[0].type);if(r)return r;var i=e.getEffectiveReturnTypeNode(t);if(i)return ps(i);if(153===t.kind&&!e.hasDynamicName(t)){return ri(e.getDeclarationOfKind(t.symbol,154))}if(e.nodeIsMissing(t.body))return H}(t,p,v),k=t.type&&158===t.type.kind?(n=t.type,71===(r=n.parameterName).kind?{kind:1,parameterName:r?r.escapedText:void 0,parameterIndex:r?Np(n.parent.parameters,r):void 0,type:ps(n.type)}:{kind:0,type:ps(n.type)}):void 0,S=e.hasRestParameter(t);if(!S&&e.isInJavaScriptFile(t)&&function(t){var n=hn(t);void 0===n.containsArgumentsReference&&(8192&n.flags?n.containsArgumentsReference=!0:n.containsArgumentsReference=r(t.body));return n.containsArgumentsReference;function r(t){if(!t)return!1;switch(t.kind){case 71:return"arguments"===t.escapedText&&e.isPartOfExpression(t);case 149:case 151:case 153:case 154:return 144===t.name.kind&&r(t.name);default:return!e.nodeStartsNewLexicalEnvironment(t)&&!e.isPartOfTypeNode(t)&&e.forEachChild(t,r)}}}(t)){S=!0;var T=ln(3,"args");T.type=Ie,T.isRestParameter=!0,o.push(T)}a.resolvedSignature=Ki(t,b,l,o,x,k,c,S,s)}return a.resolvedSignature}function Fa(t){if(!t)return e.emptyArray;for(var n=[],r=0;r<t.declarations.length;r++){var i=t.declarations[r];switch(i.kind){case 160:case 161:case 228:case 151:case 150:case 152:case 155:case 156:case 157:case 153:case 154:case 186:case 187:case 273:if(r>0&&i.body){var a=t.declarations[r-1];if(i.parent===a.parent&&i.kind===a.kind&&i.pos===a.end)break}n.push(Oa(i))}}return n}function La(e){if(e.thisParameter)return ci(e.thisParameter)}function Ra(t){if(!t.resolvedReturnType){if(!Mr(t,3))return W;var n=void 0;if(n=t.target?Ss(Ra(t.target),t.mapper):t.unionSignatures?jo(e.map(t.unionSignatures,Ra),!0):Vd(t.declaration),!jr()&&(n=H,N)){var r=t.declaration,i=e.getNameOfDeclaration(r);i?cn(i,e.Diagnostics._0_implicitly_has_return_type_any_because_it_does_not_have_a_return_type_annotation_and_is_referenced_directly_or_indirectly_in_one_of_its_return_expressions,e.declarationNameToString(i)):cn(r,e.Diagnostics.Function_implicitly_has_return_type_any_because_it_does_not_have_a_return_type_annotation_and_is_referenced_directly_or_indirectly_in_one_of_its_return_expressions)}t.resolvedReturnType=n}return t.resolvedReturnType}function Ma(t){if(t.hasRestParameter){var n=ci(e.lastOrUndefined(t.parameters));if(4&yn(n)&&n.target===Te)return n.typeArguments[0]}return H}function Ua(t,n,r){n=Pa(n,t.typeParameters,Ia(t.typeParameters),r);var i=t.instantiations||(t.instantiations=e.createMap()),a=Wa(n),o=i.get(a);return o||i.set(a,o=Ba(t,n)),o}function Ba(e,t){return vs(e,gs(e.typeParameters,t),!0)}function ja(e){return e.typeParameters?e.erasedSignatureCache||(e.erasedSignatureCache=function(e){return vs(e,(t=e.typeParameters,gs(t,void 0)),!0);var t}(e)):e}function $a(t){return t.typeParameters?t.canonicalSignatureCache||(t.canonicalSignatureCache=function(t){return Ua(t,e.map(t.typeParameters,(function(e){return e.target&&!ca(e.target)?e.target:e})),e.isInJavaScriptFile(t.declaration))}(t)):t}function Ka(t){if(!t.isolatedSignatureType){var n=152===t.declaration.kind||156===t.declaration.kind,r=sr(16);r.members=x,r.properties=e.emptyArray,r.callSignatures=n?e.emptyArray:[t],r.constructSignatures=n?[t]:e.emptyArray,t.isolatedSignatureType=r}return t.isolatedSignatureType}function za(e){return e.members.get("__index")}function Ja(e,t){var n=1===t?133:136,r=za(e);if(r)for(var i=0,a=r.declarations;i<a.length;i++){var o=a[i];if(1===o.parameters.length){var s=o.parameters[0];if(s&&s.type&&s.type.kind===n)return o}}}function qa(e,t,n){return{type:e,isReadonly:t,declaration:n}}function Va(t,n){var r=Ja(t,n);if(r)return qa(r.type?ps(r.type):H,e.hasModifier(r,64),r)}function Ha(t){if(!t.constraint)if(t.target){var n=ca(t.target);t.constraint=n?Ss(n,t.mapper):me}else{var r=function(t){return t.symbol&&e.getDeclarationOfKind(t.symbol,145).constraint}(t);t.constraint=r?ps(r):me}return t.constraint===me?void 0:t.constraint}function Ga(t){return er(e.getDeclarationOfKind(t.symbol,145).parent)}function Wa(e){var t="";if(e)for(var n=e.length,r=0;r<n;){for(var i=e[r].id,a=1;r+a<n&&e[r+a].id===i+a;)a++;t.length&&(t+=","),t+=i,a>1&&(t+=":"+a),r+=a}return t}function Qa(e,t){for(var n=0,r=0,i=e;r<i.length;r++){var a=i[r];a.flags&t||(n|=a.flags)}return 14680064&n}function Ya(e,t){var n=Wa(t),r=e.instantiations.get(n);return r||(r=sr(4,e.symbol),e.instantiations.set(n,r),r.flags|=t?Qa(t,0):0,r.target=e,r.typeArguments=t),r}function Xa(e){var t=ar(e.flags);return t.symbol=e.symbol,t.objectFlags=e.objectFlags,t.target=e.target,t.typeArguments=e.typeArguments,t}function Za(t){return e.length(t.target.typeParameters)}function eo(t,n,r){var i=Pi(Zn(n)),a=i.localTypeParameters;if(a){var o=e.length(t.typeArguments),s=Ia(a),c=e.isInJavaScriptFile(t);return!c&&(o<s||o>a.length)?(cn(t,s===a.length?e.Diagnostics.Generic_type_0_requires_1_type_argument_s:e.Diagnostics.Generic_type_0_requires_between_1_and_2_type_arguments,Er(i,void 0,1),s,a.length),W):Ya(i,e.concatenate(i.outerTypeParameters,Pa(r,a,s,c)))}return t.typeArguments?(cn(t,e.Diagnostics.Type_0_is_not_generic,Er(i)),W):i}function to(t,n,r){var i=Pi(n),a=gn(n).typeParameters;if(a){var o=e.length(t.typeArguments),s=Ia(a);return o<s||o>a.length?(cn(t,s===a.length?e.Diagnostics.Generic_type_0_requires_1_type_argument_s:e.Diagnostics.Generic_type_0_requires_between_1_and_2_type_arguments,Tr(n),s,a.length),W):function(t,n){var r=Pi(t),i=gn(t),a=i.typeParameters,o=Wa(n),s=i.instantiations.get(o);return s||i.instantiations.set(o,s=Ss(r,gs(a,Pa(n,a,Ia(a),e.isInJavaScriptFile(t.valueDeclaration))))),s}(n,r)}return t.typeArguments?(cn(t,e.Diagnostics.Type_0_is_not_generic,Tr(n)),W):i}function no(t){switch(t.kind){case 159:return t.typeName;case 201:var n=t.expression;if(e.isEntityNameExpression(n))return n}}function ro(e,t){return e&&$n(e,t)||q}function io(t,n,r){return 96&n.flags?eo(t,n,r):524288&n.flags?to(t,n,r):16&n.flags&&ao(t)&&(n.members||e.getJSDocClassTag(n.valueDeclaration))?Od(n):void 0}function ao(e){return 1048576&e.flags&&159===e.kind}function oo(t){var n=hn(t);if(!n.resolvedType){var r=void 0,i=void 0,a=793064;ao(t)&&(i=function(t){if(e.isIdentifier(t.typeName)){if("Object"===t.typeName.escapedText){if(e.isJSDocIndexSignature(t)){var n=ps(t.typeArguments[0]),r=qa(ps(t.typeArguments[1]),!1);return dr(void 0,x,e.emptyArray,e.emptyArray,n===ee&&r,n===te&&r)}return H}switch(t.typeName.escapedText){case"String":return ee;case"Number":return te;case"Boolean":return ie;case"Void":return oe;case"Undefined":return Q;case"Null":return X;case"Function":case"function":return Se;case"Array":case"array":return t.typeArguments&&t.typeArguments.length?void 0:Ie;case"Promise":case"promise":return t.typeArguments&&t.typeArguments.length?void 0:Jd(H)}}}(t),a|=107455),i||(i=function(t,n){var r=so(t);if(n===q)return W;var i=io(t,n,r);if(i)return i;var a=Oi(n);if(void 0!==a)return r?(cn(t,e.Diagnostics.Type_0_is_not_generic,Tr(n)),W):a;if(!(107455&n.flags&&ao(t)))return W;var o=ci(n);if(o.symbol&&!Fd(o)){var s=io(t,o.symbol,r);if(s)return s}return ro(no(t),793064),o}(t,r=ro(no(t),a))),n.resolvedSymbol=r,n.resolvedType=i}return n.resolvedType}function so(t){return e.map(t.typeArguments,ps)}function co(e){var t=hn(e);return t.resolvedType||(t.resolvedType=Dc(Dp(e.exprName))),t.resolvedType}function lo(t,n){function r(e){for(var t=0,n=e.declarations;t<n.length;t++){var r=n[t];switch(r.kind){case 229:case 230:case 232:return r}}}if(!t)return n?fe:ue;var i=Pi(t);return 32768&i.flags?e.length(i.typeParameters)!==n?(cn(r(t),e.Diagnostics.Global_type_0_must_have_1_type_parameter_s,e.symbolName(t),n),n?fe:ue):i:(cn(r(t),e.Diagnostics.Global_type_0_must_be_a_class_or_interface_type,e.symbolName(t)),n?fe:ue)}function uo(t,n){return po(t,107455,n?e.Diagnostics.Cannot_find_global_value_0:void 0)}function po(e,t,n){return kn(void 0,e,t,n,e,!1)}function fo(t,n,r){var i=function(t,n){return po(t,793064,n?e.Diagnostics.Cannot_find_global_type_0:void 0)}(t,r);return i||r?lo(i,n):void 0}function _o(e){return Le||(Le=fo("Symbol",0,e))||ue}function mo(e){return Me||(Me=fo("Promise",1,e))||fe}function go(e){return Ue||(Ue=uo("Promise",e))}function ho(e){return ze||(ze=fo("AsyncIterable",1,e))||fe}function yo(e){return Je||(Je=fo("AsyncIterator",1,e))||fe}function vo(e){return qe||(qe=fo("AsyncIterableIterator",1,e))||fe}function bo(e){return je||(je=fo("Iterable",1,e))||fe}function xo(e){return $e||($e=fo("Iterator",1,e))||fe}function ko(e){return Ke||(Ke=fo("IterableIterator",1,e))||fe}function So(e,t){void 0===t&&(t=0);var n=po(e,793064,void 0);return n&&lo(n,t)}function To(e,t){var n=po(e,1920,void 0),r=n&&bn(n.exports,t,793064);return r&&Pi(r)}function Co(e,t){return e!==fe?Ya(e,t):ue}function Eo(e){return Co(Re||(Re=fo("TypedPropertyDescriptor",1,!0))||fe,[e])}function Do(e){return Co(vo(!0),[e])}function Ao(e){return Co(bo(!0),[e])}function wo(e){return Co(ko(!0),[e])}function No(e){return Co(Te,[e])}function Io(t){return B[t]||(B[t]=function(t){for(var n=[],r=[],i=0;i<t;i++){var a=ar(16384);n.push(a);var o=ln(4,""+i);o.type=a,r.push(o)}var s=sr(12);return s.typeParameters=n,s.outerTypeParameters=void 0,s.localTypeParameters=n,s.instantiations=e.createMap(),s.instantiations.set(Wa(s.typeParameters),s),s.target=s,s.typeArguments=s.typeParameters,s.thisType=ar(16384),s.thisType.isThisType=!0,s.thisType.constraint=s,s.declaredProperties=r,s.declaredCallSignatures=e.emptyArray,s.declaredConstructSignatures=e.emptyArray,s.declaredStringIndexInfo=void 0,s.declaredNumberIndexInfo=void 0,s}(t))}function Po(e){return Ya(Io(e.length),e)}function Oo(e,t){for(var n=0,r=e.length-1,i=t.id;n<=r;){var a=n+(r-n>>1),o=e[a].id;if(o===i)return a;o>i?r=a-1:n=a+1}return~n}function Fo(e,t){return Oo(e,t)>=0}function Lo(e,t){var n=t.flags;if(65536&n)Ro(e,t.types);else if(1&n)e.containsAny=!0;else if(!A&&6144&n)2048&n&&(e.containsUndefined=!0),4096&n&&(e.containsNull=!0),2097152&n||(e.containsNonWideningType=!0);else if(!(8192&n||131072&n&&function(e){for(var t=0,n=0,r=e.types;n<r.length;n++){var i=r[n];if(6368&i.flags&&6368&t)return!0;if(6144&(t|=i.flags)&&16809984&t)return!0}return!1}(t))){2&n&&(e.containsString=!0),4&n&&(e.containsNumber=!0),96&n&&(e.containsStringOrNumberLiteral=!0);var r=e.length,i=r&&t.id>e[r-1].id?~r:Oo(e,t);i<0&&(32768&n&&16&t.objectFlags&&t.symbol&&8208&t.symbol.flags&&Mo(e,t)||e.splice(~i,0,t))}}function Ro(e,t){for(var n=0,r=t;n<r.length;n++){Lo(e,r[n])}}function Mo(e,t){for(var n=0,r=e;n<r.length;n++){if(ws(r[n],t))return!0}return!1}function Uo(e,t){for(var n=0,r=t;n<r.length;n++){var i=r[n];if(e!==i&&Ps(e,i))return!0}return!1}function Bo(t){if(0!==t.length&&!function(e){var t=e[0];if(256&t.flags){for(var n=tr(t.symbol),r=1;r<e.length;r++){var i=e[r];if(!(256&i.flags)||n!==tr(i.symbol))return!1}return!0}return!1}(t))for(var n=t.length;n>0;)Uo(t[--n],t)&&e.orderedRemoveItemAt(t,n)}function jo(t,n,r,i){if(0===t.length)return se;if(1===t.length)return t[0];var a=[];return Ro(a,t),a.containsAny?H:(n?Bo(a):a.containsStringOrNumberLiteral&&function(t){for(var n=t.length;n>0;){var r=t[--n];(32&r.flags&&t.containsString||64&r.flags&&t.containsNumber||96&r.flags&&1048576&r.flags&&Fo(t,r.regularType))&&e.orderedRemoveItemAt(t,n)}}(a),0===a.length?a.containsNull?a.containsNonWideningType?X:Z:a.containsUndefined?a.containsNonWideningType?Q:Y:se:$o(a,r,i))}function $o(e,t,n){if(0===e.length)return se;if(1===e.length)return e[0];var r=Wa(e),i=j.get(r);i||(i=ar(65536|Qa(e,6144)),j.set(r,i),i.types=e,i.aliasSymbol=t,i.aliasTypeArguments=n);return i}function Ko(t,n){131072&n.flags?zo(t,n.types):1&n.flags?t.containsAny=!0:8192&n.flags?t.containsNever=!0:16&yn(n)&&$s(n)?t.containsEmptyObject=!0:!A&&6144&n.flags||e.contains(t,n)||(32768&n.flags&&(t.containsObjectType=!0),65536&n.flags&&void 0===t.unionIndex&&(t.unionIndex=t.length),32768&n.flags&&16&n.objectFlags&&n.symbol&&8208&n.symbol.flags&&Mo(t,n)||t.push(n))}function zo(e,t){for(var n=0,r=t;n<r.length;n++){Ko(e,r[n])}}function Jo(t,n,r){if(0===t.length)return ue;var i=[];if(zo(i,t),i.containsNever)return se;if(i.containsAny)return H;if(i.containsEmptyObject&&!i.containsObjectType&&i.push(ue),1===i.length)return i[0];var a=i.unionIndex;if(void 0!==a){var o=i[a];return jo(e.map(o.types,(function(t){return Jo(e.replaceElement(i,a,t))})),!1,n,r)}var s=Wa(i),c=$.get(s);c||(c=ar(131072|Qa(i,6144)),$.set(s,c),c.types=i,c.aliasSymbol=n,c.aliasTypeArguments=r);return c}function qo(t){return 24&e.getDeclarationModifierFlagsFromSymbol(t)||e.startsWith(t.escapedName,"__@")?se:us(e.symbolName(t))}function Vo(t){return ip(t,540672)?function(e){return e.resolvedIndexType||(e.resolvedIndexType=ar(262144),e.resolvedIndexType.type=e),e.resolvedIndexType}(t):32&yn(t)?ta(t):1&t.flags||Ta(t,0)?ee:function(t){return jo(e.map(sa(t),qo))}(t)}function Ho(t,n,r,i){var a=r&&180===r.kind?r:void 0,o=96&n.flags?e.escapeLeadingUnderscores(""+n.value):a&&id(a.argumentExpression,n,!1)?e.getPropertyNameForKnownSymbolName(e.idText(a.argumentExpression.name)):void 0;if(void 0!==o){var s=va(t,o);if(s){if(a){if(e.isAssignmentTarget(a)&&(tp(a,s)||np(a)))return cn(a.argumentExpression,e.Diagnostics.Cannot_assign_to_0_because_it_is_a_constant_or_a_read_only_property,Tr(s)),W;i&&(hn(r).resolvedSymbol=s)}return ci(s)}}if(!(6144&n.flags)&&ap(n,262774)){if(zr(t))return H;var c=ap(n,84)&&Ta(t,1)||Ta(t,0)||void 0;if(c)return a&&c.isReadonly&&(e.isAssignmentTarget(a)||e.isDeleteTarget(a))&&cn(a,e.Diagnostics.Index_signature_in_type_0_only_permits_reading,Er(t)),c.type;if(a&&!op(t))return N&&!S.suppressImplicitAnyIndexErrors&&(Ca(t,1)?cn(a.argumentExpression,e.Diagnostics.Element_implicitly_has_an_any_type_because_index_expression_is_not_of_type_number):cn(a,e.Diagnostics.Element_implicitly_has_an_any_type_because_type_0_has_no_index_signature,Er(t))),H}if(r){var l=180===r.kind?r.argumentExpression:r.indexType;return 96&n.flags?cn(l,e.Diagnostics.Property_0_does_not_exist_on_type_1,""+n.value,Er(t)):6&n.flags?cn(l,e.Diagnostics.Type_0_has_no_matching_index_signature_for_type_1,Er(t),Er(n)):cn(l,e.Diagnostics.Type_0_cannot_be_used_as_an_index_type,Er(n)),W}return H}function Go(t){return!!(540672&t.flags)||(32&yn(t)?Wo(ta(t)):!!(196608&t.flags)&&e.forEach(t.types,Go))}function Wo(t){return!!(802816&t.flags)||!!(196608&t.flags)&&e.forEach(t.types,Wo)}function Qo(e){if(32768&e.flags&&!ra(e)){var t=ia(e);return 0===t.properties.length&&0===t.callSignatures.length&&0===t.constructSignatures.length&&t.stringIndexInfo&&!t.numberIndexInfo}return!1}function Yo(t){var n=t.objectType;if(131072&n.flags&&Go(n)&&e.some(n.types,Qo)){for(var r=[],i=[],a=0,o=n.types;a<o.length;a++){var s=o[a];Qo(s)?i.push(Ca(s,0)):r.push(s)}return jo([Xo(Jo(r),t.indexType),Jo(i)])}if(ra(n)){var c=gs([ea(n)],[t.indexType]),l=n.mapper,u=l?hs(l,c):c;return Ss(na(n),u)}}function Xo(e,t,n){if(Wo(t)||(!n||180!==n.kind)&&Go(e)){if(1&e.flags)return e;var r=e.id+","+t.id,i=z.get(r);return i||z.set(r,i=function(e,t){var n=ar(524288);return n.objectType=e,n.indexType=t,n}(e,t)),i}var a=ma(e);if(65536&t.flags&&!(8&t.flags)){for(var o=[],s=0,c=t.types;s<c.length;s++){var l=Ho(a,c[s],n,!1);if(l===W)return W;o.push(l)}return jo(o)}return Ho(a,t,n,!0)}function Zo(e){var t=hn(e);return t.resolvedType||(t.resolvedType=Xo(ps(e.objectType),ps(e.indexType),e)),t.resolvedType}function es(e){var t=hn(e);if(!t.resolvedType){var n=sr(32,e.symbol);n.declaration=e,n.aliasSymbol=ns(e),n.aliasTypeArguments=rs(e),t.resolvedType=n,ta(n)}return t.resolvedType}function ts(t){var n=hn(t);if(!n.resolvedType){var r=ns(t);if(0!==t.symbol.members.size||r){var i=sr(16,t.symbol);i.aliasSymbol=r,i.aliasTypeArguments=rs(t),e.isJSDocTypeLiteral(t)&&t.isArrayType&&(i=No(i)),n.resolvedType=i}else n.resolvedType=pe}return n.resolvedType}function ns(e){return 231===e.parent.kind?er(e.parent):void 0}function rs(e){var t=ns(e);return t?mi(t):void 0}function is(t,n,r,i){if(1&t.flags||1&n.flags)return H;if(8192&t.flags)return n;if(8192&n.flags)return t;if(65536&t.flags)return bl(t,(function(e){return is(e,n,r,i)}));if(65536&n.flags)return bl(n,(function(e){return is(t,e,r,i)}));if(16777216&n.flags)return le;if(262654&n.flags)return t;var a,o,s=e.createSymbolTable(),c=e.createUnderscoreEscapedMap();t===ue?(a=Ta(n,0),o=Ta(n,1)):(a=Qi(Ta(t,0),Ta(n,0)),o=Qi(Ta(t,1),Ta(n,1)));for(var l=0,u=sa(n);l<u.length;l++){var d=65536&(m=u[l]).flags&&!(32768&m.flags);24&e.getDeclarationModifierFlagsFromSymbol(m)?c.set(m.escapedName,!0):os(m)||d||s.set(m.escapedName,as(m))}for(var p=0,f=sa(t);p<f.length;p++){var _=f[p];if(!(65536&_.flags&&!(32768&_.flags)||c.has(_.escapedName)||os(_)))if(s.has(_.escapedName)){var m,g=ci(m=s.get(_.escapedName));if(16777216&m.flags){var h=e.concatenate(_.declarations,m.declarations),y=ln(4|16777216&_.flags,_.escapedName);y.type=jo([ci(_),nl(g,131072)]),y.leftSpread=_,y.rightSpread=m,y.declarations=h,s.set(_.escapedName,y)}}else s.set(_.escapedName,as(_))}var v=dr(void 0,s,e.emptyArray,e.emptyArray,a,o);return v.flags|=i,v.flags|=5242880,v.objectFlags|=128,v.symbol=r,v}function as(e){if(!ep(e))return e;var t=ln(4|16777216&e.flags,e.escapedName);return t.type=ci(e),t.declarations=e.declarations,t.syntheticOrigin=e,t}function os(t){return 8192&t.flags&&e.find(t.declarations,(function(t){return e.isClassLike(t.parent)}))}function ss(e,t,n){var r=ar(e);return r.symbol=n,r.value=t,r}function cs(e){if(96&e.flags&&!(1048576&e.flags)){if(!e.freshType){var t=ss(1048576|e.flags,e.value,e.symbol);t.regularType=e,e.freshType=t}return e.freshType}return e}function ls(e){return 96&e.flags&&1048576&e.flags?e.regularType:e}function us(e,t,n){var r="number"==typeof e?"#":"@",i=t?t+r+e:r+e,a=K.get(i);if(!a){var o=("number"==typeof e?64:32)|(t?256:0);K.set(i,a=ss(o,e,n))}return a}function ds(t){var n=hn(t);return n.resolvedType||(n.resolvedType=function(t){var n=e.getThisContainer(t,!1),r=n&&n.parent;return!r||!e.isClassLike(r)&&230!==r.kind||e.hasModifier(n,32)||152===n.kind&&!e.isNodeDescendantOf(t,n.body)?(cn(t,e.Diagnostics.A_this_type_is_available_only_in_a_non_static_member_of_a_class_or_interface),W):Ci(er(r)).thisType}(t)),n.resolvedType}function ps(t){switch(t.kind){case 119:case 268:case 269:return H;case 136:return ee;case 133:return te;case 122:return ie;case 137:return ae;case 105:return oe;case 139:return Q;case 95:return X;case 130:return se;case 134:return 65536&t.flags?H:le;case 169:case 99:return ds(t);case 173:return function(e){var t=hn(e);return t.resolvedType||(t.resolvedType=ls(Dp(e.literal))),t.resolvedType}(t);case 159:return oo(t);case 158:return ie;case 201:return oo(t);case 162:return co(t);case 164:return function(e){var t=hn(e);return t.resolvedType||(t.resolvedType=No(ps(e.elementType))),t.resolvedType}(t);case 165:return function(t){var n=hn(t);return n.resolvedType||(n.resolvedType=Po(e.map(t.elementTypes,ps))),n.resolvedType}(t);case 166:return function(t){var n=hn(t);return n.resolvedType||(n.resolvedType=jo(e.map(t.types,ps),!1,ns(t),rs(t))),n.resolvedType}(t);case 167:return function(t){var n=hn(t);return n.resolvedType||(n.resolvedType=Jo(e.map(t.types,ps),ns(t),rs(t))),n.resolvedType}(t);case 270:return function(e){var t=ps(e.type);return A?jo([t,X]):t}(t);case 168:case 271:case 272:case 267:return ps(t.type);case 160:case 161:case 163:case 285:case 273:return ts(t);case 170:return function(e){var t=hn(e);return t.resolvedType||(t.resolvedType=Vo(ps(e.type))),t.resolvedType}(t);case 171:return Zo(t);case 172:return es(t);case 71:case 143:var n=b_(t);return n&&Pi(n);case 274:return function(e){var t=hn(e);if(!t.resolvedType){var n=ps(e.type);t.resolvedType=n?No(n):W}return t.resolvedType}(t);default:return W}}function fs(e,t,n){if(e&&e.length){for(var r=[],i=0,a=e;i<a.length;i++){var o=a[i];r.push(n(o,t))}return r}return e}function _s(e,t){return fs(e,t,Ss)}function ms(e,t){return fs(e,t,vs)}function gs(t,n){return e.Debug.assert(void 0===n||t.length===n.length),1===t.length?(s=t[0],c=n?n[0]:H,function(e){return e===s?c:e}):2===t.length?(r=t[0],i=n?n[0]:H,a=t[1],o=n?n[1]:H,function(e){return e===r?i:e===a?o:e}):function(e,t){return function(n){for(var r=0;r<e.length;r++)if(n===e[r])return t?t[r]:H;return n}}(t,n);var r,i,a,o,s,c}function hs(e,t){return function(n){return Ss(e(n),t)}}function ys(e){var t=ar(16384);return t.symbol=e.symbol,t.target=e,t}function vs(t,n,r){var i,a;if(t.typeParameters&&!r){i=e.map(t.typeParameters,ys),n=hs(gs(t.typeParameters,i),n);for(var o=0,s=i;o<s.length;o++){s[o].mapper=n}}t.typePredicate&&(a=function(t,n){return e.isIdentifierTypePredicate(t)?{kind:1,parameterName:t.parameterName,parameterIndex:t.parameterIndex,type:Ss(t.type,n)}:{kind:0,type:Ss(t.type,n)}}(t.typePredicate,n));var c=Ki(t.declaration,i,t.thisParameter&&bs(t.thisParameter,n),fs(t.parameters,n,bs),void 0,a,t.minArgumentCount,t.hasRestParameter,t.hasLiteralTypes);return c.target=t,c.mapper=n,c}function bs(t,n){if(1&e.getCheckFlags(t)){var r=gn(t);t=r.target,n=hs(r.mapper,n)}var i=ln(t.flags,t.escapedName);return i.checkFlags=1,i.declarations=t.declarations,i.parent=t.parent,i.target=t,i.mapper=n,t.valueDeclaration&&(i.valueDeclaration=t.valueDeclaration),t.isRestParameter&&(i.isRestParameter=t.isRestParameter),i}function xs(t,n){var r=64&t.objectFlags?t.target:t,i=r.symbol,a=gn(i),o=a.typeParameters;if(!o){var s=i.declarations[0],c=fi(s,!0)||e.emptyArray;o=2048&i.flags&&!r.aliasTypeArguments?e.filter(c,(function(t){return function(t,n){if(t.symbol&&t.symbol.declarations&&1===t.symbol.declarations.length){var r=t.symbol.declarations[0].parent;if(e.findAncestor(n,(function(e){return 207===e.kind?"quit":e===r})))return e.forEachChild(n,i)}return!0;function i(n){switch(n.kind){case 169:return t.isThisType;case 71:return!t.isThisType&&e.isPartOfTypeNode(n)&&ps(n)===t;case 162:return!0}return e.forEachChild(n,i)}}(t,s)})):c,a.typeParameters=o,o.length&&(a.instantiations=e.createMap(),a.instantiations.set(Wa(o),r))}if(o.length){var l=64&t.objectFlags?hs(t.mapper,n):n,u=e.map(o,l),d=Wa(u),p=a.instantiations.get(d);if(!p){var f=gs(o,u);p=32&r.objectFlags?function(e,t){var n=ta(e);if(262144&n.flags){var r=n.type;if(16384&r.flags){var i=Ss(r,t);if(r!==i)return bl(i,(function(n){return function(e){return 704513&e.flags}(n)?ks(e,function(e,t,n){return function(r){return r===e?t:n(r)}}(r,n,t)):n}))}}return ks(e,t)}(r,f):ks(r,f),a.instantiations.set(d,p)}return p}return t}function ks(e,t){var n=sr(64|e.objectFlags,e.symbol);return 32&e.objectFlags&&(n.declaration=e.declaration),n.target=e,n.mapper=t,n.aliasSymbol=e.aliasSymbol,n.aliasTypeArguments=_s(e.aliasTypeArguments,t),n}function Ss(e,t){if(e&&t!==k){if(16384&e.flags)return t(e);if(32768&e.flags){if(16&e.objectFlags)return e.symbol&&14384&e.symbol.flags&&e.symbol.declarations?xs(e,t):e;if(32&e.objectFlags)return xs(e,t);if(4&e.objectFlags)return Ya(e.target,_s(e.typeArguments,t))}if(65536&e.flags&&!(8190&e.flags))return jo(_s(e.types,t),!1,e.aliasSymbol,_s(e.aliasTypeArguments,t));if(131072&e.flags)return Jo(_s(e.types,t),e.aliasSymbol,_s(e.aliasTypeArguments,t));if(262144&e.flags)return Vo(Ss(e.type,t));if(524288&e.flags)return Xo(Ss(e.objectType,t),Ss(e.indexType,t))}return e}function Ts(e,t){return e&&qa(Ss(e.type,t),e.isReadonly,e.declaration)}function Cs(t){switch(e.Debug.assert(151!==t.kind||e.isObjectLiteralMethod(t)),t.kind){case 186:case 187:case 151:return Es(t);case 178:return e.forEach(t.properties,Cs);case 177:return e.forEach(t.elements,Cs);case 195:return Cs(t.whenTrue)||Cs(t.whenFalse);case 194:return 54===t.operatorToken.kind&&(Cs(t.left)||Cs(t.right));case 261:return Cs(t.initializer);case 185:return Cs(t.expression);case 254:return e.forEach(t.properties,Cs);case 253:return t.initializer&&Cs(t.initializer);case 256:return t.expression&&Cs(t.expression)}return!1}function Es(t){if(t.typeParameters)return!1;if(e.forEach(t.parameters,(function(t){return!e.getEffectiveTypeAnnotationNode(t)})))return!0;if(187!==t.kind){var n=e.firstOrUndefined(t.parameters);if(!n||!e.parameterIsThisKeyword(n))return!0}return 207!==t.body.kind&&Cs(t.body)}function Ds(t){return(pu(t)||e.isObjectLiteralMethod(t))&&Es(t)}function As(t){if(32768&t.flags){var n=ia(t);if(n.constructSignatures.length){var r=sr(16,t.symbol);return r.members=n.members,r.properties=n.properties,r.callSignatures=e.emptyArray,r.constructSignatures=e.emptyArray,r}}else if(131072&t.flags)return Jo(e.map(t.types,As));return t}function ws(e,t){return Js(e,t,nn)}function Ns(e,t){return Js(e,t,nn)?-1:0}function Is(e,t){return Js(e,t,en)?-1:0}function Ps(e,t){return Js(e,t,Zt)}function Os(e,t){return Js(e,t,en)}function Fs(e,t){return ui(e)===ui(t)||Ps(e,t)&&!ws(e,t)}function Ls(e,t){return Js(e,t,tn)}function Rs(e,t,n,r,i){return qs(e,t,en,n,r,i)}function Ms(e,t,n,r,i){return qs(e,t,tn,n,r,i)}function Us(t,n,r,i,a,o,s){if(t===n)return-1;if(!n.hasRestParameter&&t.minArgumentCount>n.parameters.length)return 0;t.typeParameters&&t.typeParameters!==n.typeParameters&&(t=dd(t,n=$a(n),void 0,s));var c=n.declaration?n.declaration.kind:0,l=!r&&w&&151!==c&&150!==c&&152!==c,u=-1,d=La(t);if(d&&d!==oe){var p=La(n);if(p){if(!(v=!l&&s(d,p,!1)||s(p,d,a)))return a&&o(e.Diagnostics.The_this_types_of_each_signature_are_incompatible),0;u&=v}}for(var f=js(t),_=js(n),m=function(e,t,n,r){return e.hasRestParameter===n.hasRestParameter?e.hasRestParameter?Math.max(t,r)+1:Math.min(t,r):e.hasRestParameter?r:t}(t,f,n,_),g=t.parameters,h=n.parameters,y=0;y<m;y++){var v,b=y<f?Bd(g[y]):Ma(t),x=y<_?Bd(h[y]):Ma(n),k=r?void 0:ud(xc(b)),S=r?void 0:ud(xc(x));if(!(v=k&&S&&!k.typePredicate&&!S.typePredicate&&(6144&gc(b))==(6144&gc(x))?Us(S,k,l?2:1,!1,a,o,s):!r&&!l&&s(b,x,!1)||s(x,b,a)))return a&&o(e.Diagnostics.Types_of_parameters_0_and_1_are_incompatible,e.symbolName(g[y<f?y:f]),e.symbolName(h[y<_?y:_])),0;u&=v}if(!i){var T=Ra(n);if(T===oe)return u;var C=Ra(t);if(n.typePredicate){if(t.typePredicate)u&=function(t,n,r,i,a,o,s){if(t.kind!==n.kind)return a&&(o(e.Diagnostics.A_this_based_type_guard_is_not_compatible_with_a_parameter_based_type_guard),o(e.Diagnostics.Type_predicate_0_is_not_assignable_to_1,Dr(t),Dr(n))),0;if(1===t.kind){var c=t,l=n;if(c.parameterIndex-(e.getThisParameter(r)?1:0)!==l.parameterIndex-(e.getThisParameter(i)?1:0))return a&&(o(e.Diagnostics.Parameter_0_is_not_in_the_same_position_as_parameter_1,c.parameterName,l.parameterName),o(e.Diagnostics.Type_predicate_0_is_not_assignable_to_1,Dr(t),Dr(n))),0}var u=s(t.type,n.type,a);0===u&&a&&o(e.Diagnostics.Type_predicate_0_is_not_assignable_to_1,Dr(t),Dr(n));return u}(t.typePredicate,n.typePredicate,t.declaration,n.declaration,a,o,s);else if(e.isIdentifierTypePredicate(n.typePredicate))return a&&o(e.Diagnostics.Signature_0_must_be_a_type_predicate,Cr(t)),0}else u&=1===r&&s(T,C,!1)||s(C,T,a)}return u}function Bs(e,t){var n=ja(e),r=ja(t),i=Ra(n),a=Ra(r);return!(a!==oe&&!Js(a,i,en)&&!Js(i,a,en))&&0!==Us(n,r,0,!0,!1,void 0,Is)}function js(e){var t=e.parameters.length;return e.hasRestParameter?t-1:t}function $s(t){return 32768&t.flags?0===(n=ia(t)).properties.length&&0===n.callSignatures.length&&0===n.constructSignatures.length&&!n.stringIndexInfo&&!n.numberIndexInfo:!!(16777216&t.flags)||(65536&t.flags?e.forEach(t.types,$s):!!(131072&t.flags)&&!e.forEach(t.types,(function(e){return!$s(e)})));var n}function Ks(t,n,r){if(t===n)return!0;var i=s(t)+","+s(n),a=rn.get(i);if(void 0!==a)return a;if(!(t.escapedName===n.escapedName&&256&t.flags&&256&n.flags))return rn.set(i,!1),!1;for(var o=ci(n),c=0,l=sa(ci(t));c<l.length;c++){var u=l[c];if(8&u.flags){var d=va(o,u.escapedName);if(!(d&&8&d.flags))return r&&r(e.Diagnostics.Property_0_is_missing_in_type_1,e.symbolName(u),Er(Pi(n),void 0,256)),rn.set(i,!1),!1}}return rn.set(i,!0),!0}function zs(e,t,n,r){var i=e.flags,a=t.flags;if(8192&a)return!1;if(1&a||8192&i)return!0;if(262178&i&&2&a)return!0;if(32&i&&256&i&&32&a&&!(256&a)&&e.value===t.value)return!0;if(84&i&&4&a)return!0;if(64&i&&256&i&&64&a&&!(256&a)&&e.value===t.value)return!0;if(136&i&&8&a)return!0;if(16&i&&16&a&&Ks(e.symbol,t.symbol,r))return!0;if(256&i&&256&a){if(65536&i&&65536&a&&Ks(e.symbol,t.symbol,r))return!0;if(224&i&&224&a&&e.value===t.value&&Ks(tr(e.symbol),tr(t.symbol),r))return!0}if(2048&i&&(!A||3072&a))return!0;if(4096&i&&(!A||4096&a))return!0;if(32768&i&&16777216&a)return!0;if(n===en||n===tn){if(1&i)return!0;if(68&i&&!(256&i)&&(16&a||64&a&&256&a))return!0}return!1}function Js(e,t,n){if(96&e.flags&&1048576&e.flags&&(e=e.regularType),96&t.flags&&1048576&t.flags&&(t=t.regularType),e===t||n!==nn&&zs(e,t,n))return!0;if(32768&e.flags&&32768&t.flags){var r=n.get(Ys(e,t,n));if(void 0!==r)return 1===r}return!!(1032192&e.flags||1032192&t.flags)&&qs(e,t,n,void 0)}function qs(t,n,r,i,a,o){var s,c,l,u,d,p=0,f=0;!function(e){e[e.None=0]="None",e[e.Source=1]="Source",e[e.Target=2]="Target",e[e.Both=3]="Both"}(d||(d={}));var _=0,m=!1,g=!1;e.Debug.assert(r!==nn||!i,"no error reporting in identity checking");var h=b(t,n,!!i,a);return m?cn(i,e.Diagnostics.Excessive_stack_depth_comparing_types_0_and_1,Er(t),Er(n)):s&&(o&&(s=e.concatenateDiagnosticMessageChains(o,s)),wt.add(e.createDiagnosticForNodeFromMessageChain(i,s))),0!==h;function y(t,n,r,a){e.Debug.assert(!!i),s=e.chainDiagnosticMessages(s,t,n,r,a)}function v(t,n,i){var a=Er(n),o=Er(i);a===o&&(a=Er(n,void 0,256),o=Er(i,void 0,256)),t||(t=r===tn?e.Diagnostics.Type_0_is_not_comparable_to_type_1:a===o?e.Diagnostics.Type_0_is_not_assignable_to_type_1_Two_different_types_with_this_name_exist_but_they_are_unrelated:e.Diagnostics.Type_0_is_not_assignable_to_type_1),y(t,a,o)}function b(t,n,i,a){if(96&t.flags&&1048576&t.flags&&(t=t.regularType),96&n.flags&&1048576&n.flags&&(n=n.regularType),t===n)return-1;if(r===nn)return function(e,t){var n;if(32768&e.flags&&32768&t.flags)return D(e,t,!1);if((65536&e.flags&&65536&t.flags||131072&e.flags&&131072&t.flags)&&(n=k(e,t))&&(n&=k(t,e)))return n;return 0}(t,n);if(zs(t,n,r,i?y:void 0))return-1;if(128&yn(t)&&1048576&t.flags){if(x(t,n,i))return i&&v(a,t,n),0;(function(e){if(!(196608&e.flags))return!1;for(var t=!1,n=0,r=e.types;n<r.length;n++)if(!(6144&r[n].flags)){if(t)return!0;t=!0}return!1})(n)&&(t=Tc(t))}if(r!==tn&&!(196608&t.flags)&&!(65536&n.flags)&&!g&&t!==ke&&(sa(t).length>0||xa(t,0).length>0||xa(t,1).length>0)&&A(n)&&!function(e,t){for(var n=!!(33554432&e.flags),r=0,i=sa(e);r<i.length;r++){if(ju(t,i[r].escapedName,n))return!0}return!1}(t,n)){if(i){var o=xa(t,0),c=xa(t,1);o.length>0&&b(Ra(o[0]),n,!1)||c.length>0&&b(Ra(c[0]),n,!1)?y(e.Diagnostics.Value_of_type_0_has_no_properties_in_common_with_type_1_Did_you_mean_to_call_it,Er(t),Er(n)):y(e.Diagnostics.Type_0_has_no_properties_in_common_with_type_1,Er(t),Er(n))}return 0}var l=0,u=s,d=g;return g=!1,65536&t.flags?l=r===tn?E(t,n,i&&!(8190&t.flags)):function(e,t,n){for(var r=-1,i=e.types,a=0,o=i;a<o.length;a++){var s=b(o[a],t,n);if(!s)return 0;r&=s}return r}(t,n,i&&!(8190&t.flags)):(65536&n.flags?l=T(t,n,i&&!(8190&t.flags)&&!(8190&n.flags)):131072&n.flags?(g=!0,l=function(e,t,n){for(var r=-1,i=t.types,a=0,o=i;a<o.length;a++){var s=b(e,o[a],n);if(!s)return 0;r&=s}return r}(t,n,i)):131072&t.flags&&(l=E(t,n,!1)),!l&&(1032192&t.flags||1032192&n.flags)&&(l=D(t,n,i))&&(s=u)),g=d,!l&&i&&(32768&t.flags&&8190&n.flags?function(t,n){var r=Er(t),i=Er(n);(Ee===t&&ee===n||De===t&&te===n||Ae===t&&ie===n||_o(!1)===t&&ae===n)&&y(e.Diagnostics._0_is_a_primitive_but_1_is_a_wrapper_object_Prefer_using_0_when_possible,i,r)}(t,n):t.symbol&&32768&t.flags&&ke===t&&y(e.Diagnostics.The_Object_type_is_assignable_to_very_few_other_types_Did_you_mean_to_use_the_any_type_instead),v(a,t,n)),l}function x(t,n,a){if(ip(n,32768)&&!(512&yn(n))){var o=!!(33554432&t.flags);if((r===en||r===tn)&&(hl(ke,n)||!o&&$s(n)))return!1;if(65536&n.flags){var s=C(t,n);if(s)return x(t,s,a)}for(var c=function(r){if(!ju(n,r.escapedName,o)){if(a)if(e.Debug.assert(!!i),e.isJsxAttributes(i)||e.isJsxOpeningLikeElement(i))y(e.Diagnostics.Property_0_does_not_exist_on_type_1,Tr(r),Er(n));else{var s=t.symbol&&e.firstOrUndefined(t.symbol.declarations),c=void 0;if(r.valueDeclaration&&e.findAncestor(r.valueDeclaration,(function(e){return e===s}))){var l=r.valueDeclaration;e.Debug.assertNode(l,e.isObjectLiteralElementLike),i=l,e.isIdentifier(l.name)&&(c=Qu(l.name,n))}void 0!==c?y(e.Diagnostics.Object_literal_may_only_specify_known_properties_but_0_does_not_exist_in_type_1_Did_you_mean_to_write_2,Tr(r),Er(n),c):y(e.Diagnostics.Object_literal_may_only_specify_known_properties_and_0_does_not_exist_in_type_1,Tr(r),Er(n))}return{value:!0}}},l=0,u=aa(t);l<u.length;l++){var d=c(u[l]);if("object"==typeof d)return d.value}}return!1}function k(e,t){for(var n=-1,r=0,i=e.types;r<i.length;r++){var a=T(i[r],t,!1);if(!a)return 0;n&=a}return n}function T(e,t,n){var r=t.types;if(65536&t.flags&&Fo(r,e))return-1;for(var i=0,a=r;i<a.length;i++){var o=b(e,a[i],!1);if(o)return o}n&&b(e,C(e,t)||r[r.length-1],!0);return 0}function C(e,t){var n,r=aa(e);if(r){var i=function(e,t){for(var n,r=0,i=e;r<i.length;r++){var a=i[r];if(Xc(t,a.escapedName)){if(n)return;n=a}}return n}(r,t);if(i)for(var a=ci(i),o=0,s=t.types;o<s.length;o++){var c=s[o],l=Kr(c,i.escapedName);if(l&&b(a,l)){if(n)return;n=c}}}return n}function E(e,t,n){var r=e.types;if(65536&e.flags&&Fo(r,t))return-1;for(var i=r.length,a=0;a<i;a++){var o=b(r[a],t,n&&a===i-1);if(o)return o}return 0}function D(t,n,i){if(m)return 0;var a=Ys(t,n,r),o=r.get(a);if(void 0!==o){if(!i||2!==o)return 1===o?-1:0;r.set(a,3)}if(c){for(var d=0;d<p;d++)if(a===c[d])return 1;if(100===f)return m=!0,0}else c=[],l=[],u=[];var g=p;c[p]=a,p++,l[f]=t,u[f]=n,f++;var h=_;1&_||!nc(t,l,f)||(_|=1),2&_||!nc(n,u,f)||(_|=2);var v=3!==_?function(t,n,i){var a,o=s;if(16384&n.flags){if(32&yn(t)&&ta(t)===Vo(n))if(!t.declaration.questionToken)if(a=b(na(t),Xo(n,ea(t)),i))return a}else if(262144&n.flags){if(262144&t.flags&&(a=b(n.type,t.type,!1)))return a;if((c=function(e){return 16384&e.flags?ca(e):524288&e.flags?la(e):ua(e)}(n.type))&&(a=b(t,Vo(c),i)))return a}else if(524288&n.flags){if((c=la(n))&&(a=b(t,c,i)))return s=o,a}if(16384&t.flags){if(32&yn(n)&&ta(n)===Vo(t)){if(a=b(Xo(t,ea(n)),na(n),i))return s=o,a}else if((c=ca(t))||!(16777216&n.flags))if((!c||1&c.flags)&&(c=ue),a=b(c,n,i&&c!==ue))return s=o,a}else if(524288&t.flags){var c;if(c=la(t)){if(a=b(c,n,i))return s=o,a}else if(524288&n.flags&&t.indexType===n.indexType&&(a=b(t.objectType,n.objectType,i)))return a}else{if(4&yn(t)&&4&yn(n)&&t.target===n.target&&!(67108864&t.flags||67108864&n.flags)){var l=Hs(t.target);if(a=function(t,n,i,a){var o=t.typeArguments||e.emptyArray,s=n.typeArguments||e.emptyArray;if(o.length!==s.length&&r===nn)return 0;for(var c=o.length<=s.length?o.length:s.length,l=-1,u=0;u<c;u++){var d=u<i.length?i[u]:1;if(4!==d){var p=o[u],f=s[u],_=-1;if(1===d?_=b(p,f,a):2===d?_=b(f,p,a):3===d?(_=b(f,p,!1))||(_=b(p,f,a)):(_=b(p,f,a))&&(_&=b(f,p,a)),!_)return 0;l&=_}}return l}(t,n,l,i))return a;if(l!==e.emptyArray&&!function(e,t){for(var n=0;n<t.length;n++)if(1===t[n]&&1024&e.typeArguments[n].flags)return!0;return!1}(n,l)){if(!i||!e.some(l,(function(e){return 0===e})))return 0;s=o}}var u=!!(8190&t.flags);if(r!==nn&&(t=ma(t)),163840&t.flags&&32768&n.flags){var d=i&&s===o&&!u;if(!function(e){return 32&yn(e)&&!!e.declaration.questionToken}(n)||ra(t)||!$s(t)?ra(n)?a=ra(t)?function(e,t,n){var i,a=!!e.declaration.readonlyToken,o=!!e.declaration.questionToken,s=!!t.declaration.readonlyToken,c=!!t.declaration.questionToken;if((r===nn?a===s&&o===c:r===tn||!o||c)&&(i=b(ta(t),ta(e),n))){var l=gs([ea(e)],[ea(t)]);return i&b(Ss(na(e),l),na(t),n)}return 0}(t,n,d):0:(a=function(t,n,i){if(r===nn)return function(e,t){if(!(32768&e.flags&&32768&t.flags))return 0;var n=aa(e),r=aa(t);if(n.length!==r.length)return 0;for(var i=-1,a=0,o=n;a<o.length;a++){var s=o[a],c=oa(t,s.escapedName);if(!c)return 0;var l=rc(s,c,b);if(!l)return 0;i&=l}return i}(t,n);var a=r===Zt&&!(128&yn(t)),o=Mc(t,n,a);if(o)return i&&y(e.Diagnostics.Property_0_is_missing_in_type_1,Tr(o),Er(t)),0;for(var s=-1,c=aa(n),l=0,u=c;l<u.length;l++){var d=u[l];if(!(4194304&d.flags)){var p=va(t,d.escapedName);if(p&&p!==d){var f=e.getDeclarationModifierFlagsFromSymbol(p),_=e.getDeclarationModifierFlagsFromSymbol(d);if(8&f||8&_){if(256&e.getCheckFlags(p))return i&&y(e.Diagnostics.Property_0_has_conflicting_declarations_and_is_inaccessible_in_type_1,Tr(p),Er(t)),0;if(p.valueDeclaration!==d.valueDeclaration)return i&&(8&f&&8&_?y(e.Diagnostics.Types_have_separate_declarations_of_a_private_property_0,Tr(d)):y(e.Diagnostics.Property_0_is_private_in_type_1_but_not_in_type_2,Tr(d),Er(8&f?t:n),Er(8&f?n:t))),0}else if(16&_){if(!ec(p,d))return i&&y(e.Diagnostics.Property_0_is_protected_but_type_1_is_not_a_class_derived_from_2,Tr(d),Er(Zs(p)||t),Er(Zs(d)||n)),0}else if(16&f)return i&&y(e.Diagnostics.Property_0_is_protected_in_type_1_but_public_in_type_2,Tr(d),Er(t),Er(n)),0;var m=b(ci(p),ci(d),i);if(!m)return i&&y(e.Diagnostics.Types_of_property_0_are_incompatible,Tr(d)),0;if(s&=m,r!==tn&&16777216&p.flags&&!(16777216&d.flags))return i&&y(e.Diagnostics.Property_0_is_optional_in_type_1_but_required_in_type_2,Tr(d),Er(t),Er(n)),0}}}return s}(t,n,d))&&(a&=w(t,n,0,d))&&(a&=w(t,n,1,d))&&(a&=P(t,n,0,u,d))&&(a&=P(t,n,1,u,d)):a=-1,a)return s=o,a}}return 0}(t,n,i):1;if(_=h,f--,v){if(-1===v||0===f){for(d=g;d<p;d++)r.set(c[d],1);p=g}}else r.set(a,i?3:2),p=g;return v}function A(t){if(32768&t.flags){var n=ia(t);return 0===n.callSignatures.length&&0===n.constructSignatures.length&&!n.stringIndexInfo&&!n.numberIndexInfo&&n.properties.length>0&&e.every(n.properties,(function(e){return!!(16777216&e.flags)}))}return!!(131072&t.flags)&&e.every(t.types,A)}function w(t,n,i,a){if(r===nn)return function(e,t,n){var r=xa(e,n),i=xa(t,n);if(r.length!==i.length)return 0;for(var a=-1,o=0;o<r.length;o++){var s=ic(r[o],i[o],!1,!1,!1,b);if(!s)return 0;a&=s}return a}(t,n,i);if(n===_e||t===_e)return-1;var o=xa(t,i),c=xa(n,i);if(1===i&&o.length&&c.length){if(tc(t)&&!tc(n))return a&&y(e.Diagnostics.Cannot_assign_an_abstract_constructor_type_to_a_non_abstract_constructor_type),0;if(!function(t,n,r){if(!t.declaration||!n.declaration)return!0;var i=e.getSelectedModifierFlags(t.declaration,24),a=e.getSelectedModifierFlags(n.declaration,24);if(8===a)return!0;if(16===a&&8!==i)return!0;if(16!==a&&!i)return!0;r&&y(e.Diagnostics.Cannot_assign_a_0_constructor_type_to_a_1_constructor_type,wr(i),wr(a));return!1}(o[0],c[0],a))return 0}var l=-1,u=s;if(64&yn(t)&&64&yn(n)&&t.symbol===n.symbol)for(var d=0;d<c.length;d++){if(!(x=N(o[d],c[d],!0,a)))return 0;l&=x}else if(1===o.length&&1===c.length){var p=r===tn||S.noStrictGenericChecks;l=N(o[0],c[0],p,a)}else e:for(var f=0,_=c;f<_.length;f++){for(var m=_[f],g=a,h=0,v=o;h<v.length;h++){var x;if(x=N(v[h],m,!0,g)){l&=x,s=u;continue e}g=!1}return g&&y(e.Diagnostics.Type_0_provides_no_match_for_the_signature_1,Er(t),Cr(m,void 0,void 0,i)),0}return l}function N(e,t,n,r){return Us(n?ja(e):e,n?ja(t):t,0,!1,r,y,b)}function I(t,n,r){var i=b(t.type,n.type,r);return!i&&r&&y(e.Diagnostics.Index_signatures_are_incompatible),i}function P(t,n,i,a,o){if(r===nn)return function(e,t,n){var r=Ta(t,n),i=Ta(e,n);if(!i&&!r)return-1;if(i&&r&&i.isReadonly===r.isReadonly)return b(i.type,r.type);return 0}(t,n,i);var s=Ta(n,i);if(!s||1&s.type.flags&&!a)return-1;var c=Ta(t,i)||1===i&&Ta(t,0);if(c)return I(c,s,o);if(ra(t))return 0===i&&b(na(t),s.type,o);if(kc(t)){var l=-1;if(0===i){var u=Ta(t,1);u&&(l=I(u,s,o))}return l&&(l&=function(t,n,r,i){for(var a=-1,o=0,s=aa(t);o<s.length;o++){var c=s[o];if(0===r||vu(c.escapedName)){var l=b(ci(c),n,i);if(!l)return i&&y(e.Diagnostics.Property_0_is_incompatible_with_index_signature,Tr(c)),0;a&=l}}return a}(t,s.type,i,o)),l}return o&&y(e.Diagnostics.Index_signature_is_missing_in_type_0,Er(t)),0}}function Vs(t,n,r){var i=Ya(t,e.map(t.typeParameters,(function(e){return e===n?r:e})));return i.flags|=67108864,i}function Hs(t){if(!w)return e.emptyArray;var n=t.typeParameters||e.emptyArray,r=t.variances;if(!r){if(t===Te||t===Ce)r=[1];else{t.variances=e.emptyArray,r=[];for(var i=0,a=n;i<a.length;i++){var o=a[i],s=Vs(t,o,ye),c=Vs(t,o,ve),l=(Os(c,s)?1:0)|(Os(s,c)?2:0);3===l&&Os(Vs(t,o,Ze),s)&&(l=4),r.push(l)}}t.variances=r}return r}function Gs(e){return 16384&e.flags&&!Ha(e)}function Ws(t){return 4&yn(t)&&e.some(t.typeArguments,(function(e){return Gs(e)||Ws(e)}))}function Qs(t,n,r){void 0===r&&(r=0);for(var i=""+t.target.id,a=0,o=t.typeArguments;a<o.length;a++){var s=o[a];if(Gs(s)){var c=e.indexOf(n,s);c<0&&(c=n.length,n.push(s)),i+="="+c}else r<4&&Ws(s)?i+="<"+Qs(s,n,r+1)+">":i+="-"+s.id}return i}function Ys(e,t,n){if(n===nn&&e.id>t.id){var r=e;e=t,t=r}if(Ws(e)&&Ws(t)){var i=[];return Qs(e,i)+","+Qs(t,i)}return e.id+","+t.id}function Xs(t,n){if(!(6&e.getCheckFlags(t)))return n(t);for(var r=0,i=t.containingType.types;r<i.length;r++){var a=va(i[r],t.escapedName),o=a&&Xs(a,n);if(o)return o}}function Zs(e){return e.parent&&32&e.parent.flags?Pi(tr(e)):void 0}function ec(t,n){return!Xs(n,(function(n){return!!(16&e.getDeclarationModifierFlagsFromSymbol(n))&&(r=t,i=Zs(n),!Xs(r,(function(e){var t=Zs(e);return!!t&&di(t,i)})));var r,i}))}function tc(t){if(16&yn(t)){var n=t.symbol;if(n&&32&n.flags){var r=Hf(n);if(r&&e.hasModifier(r,128))return!0}}return!1}function nc(e,t,n){if(n>=5&&32768&e.flags){var r=e.symbol;if(r)for(var i=0,a=0;a<n;a++){var o=t[a];if(32768&o.flags&&o.symbol===r&&++i>=5)return!0}}return!1}function rc(t,n,r){if(t===n)return-1;var i=24&e.getDeclarationModifierFlagsFromSymbol(t);if(i!==(24&e.getDeclarationModifierFlagsFromSymbol(n)))return 0;if(i){if(Vf(t)!==Vf(n))return 0}else if((16777216&t.flags)!=(16777216&n.flags))return 0;return ep(t)!==ep(n)?0:r(ci(t),ci(n))}function ic(t,n,r,i,a,o){if(t===n)return-1;if(!function(e,t,n){if(e.parameters.length===t.parameters.length&&e.minArgumentCount===t.minArgumentCount&&e.hasRestParameter===t.hasRestParameter)return!0;var r=e.hasRestParameter?1:0,i=t.hasRestParameter?1:0;return!!(n&&e.minArgumentCount<=t.minArgumentCount&&(r>i||r===i&&e.parameters.length>=t.parameters.length))}(t,n,r))return 0;if(e.length(t.typeParameters)!==e.length(n.typeParameters))return 0;t=ja(t),n=ja(n);var s=-1;if(!i){var c=La(t);if(c){var l=La(n);if(l){if(!(p=o(c,l)))return 0;s&=p}}}for(var u=n.parameters.length,d=0;d<u;d++){var p;if(!(p=o(ac(t,d)?Ma(t):Bd(t.parameters[d]),ac(n,d)?Ma(n):Bd(n.parameters[d]))))return 0;s&=p}return a||(s&=o(Ra(t),Ra(n))),s}function ac(e,t){return e.hasRestParameter&&t>=e.parameters.length-1}function oc(t){return function(e){for(var t,n=0,r=e;n<r.length;n++){var i=r[n],a=pc(i);if(t||(t=a),a===i||a!==t)return!1}return!0}(t)?jo(t):e.reduceLeft(t,(function(e,t){return Ps(e,t)?t:e}))}function sc(e){return 4&yn(e)&&e.target===Te}function cc(e){return 4&yn(e)&&(e.target===Te||e.target===Ce)||!(6144&e.flags)&&Os(e,Oe)}function lc(e){return!!va(e,"0")}function uc(e){return!!(6368&e.flags)}function dc(t){return!!(8&t.flags)||(65536&t.flags?!!(256&t.flags)||!e.forEach(t.types,(function(e){return!uc(e)})):uc(t))}function pc(t){return 256&t.flags?Ai(t):32&t.flags?ee:64&t.flags?te:128&t.flags?ie:65536&t.flags?jo(e.sameMap(t.types,pc)):t}function fc(t){return 256&t.flags?Ai(t):32&t.flags&&1048576&t.flags?ee:64&t.flags&&1048576&t.flags?te:128&t.flags?ie:65536&t.flags?jo(e.sameMap(t.types,fc)):t}function _c(e){return!!(4&yn(e)&&8&e.target.objectFlags)}function mc(e){for(var t=0,n=0,r=e;n<r.length;n++){t|=gc(r[n])}return t}function gc(e){return 65536&e.flags?mc(e.types):32&e.flags?""===e.value?32:0:64&e.flags?0===e.value?64:0:128&e.flags?e===re?128:0:7406&e.flags}function hc(e){return 7392&gc(e)?vl(e,(function(e){return!(7392&gc(e))})):e}function yc(e){return bl(e,vc)}function vc(e){return 2&e.flags?dt:4&e.flags?pt:8&e.flags||e===re?re:7168&e.flags||32&e.flags&&""===e.value||64&e.flags&&0===e.value?e:se}function bc(e,t){var n=t&~e.flags&6144;return 0===n?e:jo(2048===n?[e,Q]:4096===n?[e,X]:[e,Q,X])}function xc(e){return A?nl(e,524288):e}function kc(e){return e.symbol&&0!=(6656&e.symbol.flags)&&0===xa(e,0).length&&0===xa(e,1).length}function Sc(e,t){var n=ln(e.flags,e.escapedName);return n.declarations=e.declarations,n.parent=e.parent,n.type=t,n.target=e,e.valueDeclaration&&(n.valueDeclaration=e.valueDeclaration),n}function Tc(t){if(!(128&yn(t)&&1048576&t.flags))return t;var n=t.regularType;if(n)return n;var r=t,i=function(t,n){for(var r=e.createSymbolTable(),i=0,a=aa(t);i<a.length;i++){var o=a[i],s=ci(o),c=n(s);r.set(o.escapedName,c===s?o:Sc(o,c))}return r}(t,Tc),a=dr(r.symbol,i,r.callSignatures,r.constructSignatures,r.stringIndexInfo,r.numberIndexInfo);return a.flags=-1048577&r.flags,a.objectFlags|=128,t.regularType=a,a}function Cc(e){var t=ci(e),n=Dc(t);return n===t?e:Sc(e,n)}function Ec(e){return 6144&e.flags?e:Dc(e)}function Dc(t){if(6291456&t.flags){if(6144&t.flags)return H;if(128&yn(t))return function(t){for(var n=e.createSymbolTable(),r=0,i=aa(t);r<i.length;r++){var a=i[r];n.set(a.escapedName,4&a.flags?Cc(a):a)}var o=Ta(t,0),s=Ta(t,1);return dr(t.symbol,n,e.emptyArray,e.emptyArray,o&&qa(Dc(o.type),o.isReadonly),s&&qa(Dc(s.type),s.isReadonly))}(t);if(65536&t.flags)return jo(e.sameMap(t.types,Ec));if(sc(t)||_c(t))return Ya(t.target,e.sameMap(t.typeArguments,Dc))}return t}function Ac(t){var n=!1;if(65536&t.flags)for(var r=0,i=t.types;r<i.length;r++){Ac(l=i[r])&&(n=!0)}if(sc(t)||_c(t))for(var a=0,o=t.typeArguments;a<o.length;a++){Ac(l=o[a])&&(n=!0)}if(128&yn(t))for(var s=0,c=aa(t);s<c.length;s++){var l,u=c[s];2097152&(l=ci(u)).flags&&(Ac(l)||cn(u.valueDeclaration,e.Diagnostics.Object_literal_s_property_0_implicitly_has_an_1_type,e.symbolName(u),Er(Dc(l))),n=!0)}return n}function wc(t,n){var r,i=Er(Dc(n));switch(t.kind){case 149:case 148:r=e.Diagnostics.Member_0_implicitly_has_an_1_type;break;case 146:r=t.dotDotDotToken?e.Diagnostics.Rest_parameter_0_implicitly_has_an_any_type:e.Diagnostics.Parameter_0_implicitly_has_an_1_type;break;case 176:r=e.Diagnostics.Binding_element_0_implicitly_has_an_1_type;break;case 228:case 151:case 150:case 153:case 154:case 186:case 187:if(!t.name)return void cn(t,e.Diagnostics.Function_expression_which_lacks_return_type_annotation_implicitly_has_an_0_return_type,i);r=e.Diagnostics._0_which_lacks_return_type_annotation_implicitly_has_an_1_return_type;break;default:r=e.Diagnostics.Variable_0_implicitly_has_an_1_type}cn(t,r,e.declarationNameToString(e.getNameOfDeclaration(t)),i)}function Nc(e,t){r&&N&&2097152&t.flags&&(Ac(t)||wc(e,t))}function Ic(e,t,n){var r,i=e.parameters.length,a=t.parameters.length;r=e.hasRestParameter&&t.hasRestParameter?Math.max(i,a):e.hasRestParameter?a:t.hasRestParameter?i:Math.min(i,a);for(var o=0;o<r;o++)n(jd(e,o),jd(t,o))}function Pc(t,n,r,i){var a=i?e.map(i,Fc):e.map(t.typeParameters,Oc),o=function(e){for(var t=0;t<a.length;t++)if(e===a[t].typeParameter)return a[t].isFixed=!0,$c(o,t);return e};return o.signature=t,o.inferences=a,o.flags=n,o.compareTypes=r||Is,o}function Oc(e){return{typeParameter:e,candidates:void 0,inferredType:void 0,priority:void 0,topLevel:!0,isFixed:!1}}function Fc(e){return{typeParameter:e.typeParameter,candidates:e.candidates&&e.candidates.slice(),inferredType:e.inferredType,priority:e.priority,topLevel:e.topLevel,isFixed:e.isFixed}}function Lc(t){var n=yn(t);return!!(802816&t.flags||4&n&&e.forEach(t.typeArguments,Lc)||16&n&&t.symbol&&10288&t.symbol.flags||32&n||196608&t.flags&&function(t){void 0===t.couldContainTypeVariables&&(t.couldContainTypeVariables=e.forEach(t.types,Lc));return t.couldContainTypeVariables}(t))}function Rc(t,n){return t===n||196608&t.flags&&e.forEach(t.types,(function(e){return Rc(e,n)}))}function Mc(e,t,n){for(var r=0,i=aa(t);r<i.length;r++){var a=i[r];if(n||!(16777216&a.flags))if(!va(e,a.escapedName))return a}}function Uc(t,n,r,i){var a,o;function s(t,n){if(Lc(n))if(t.aliasSymbol&&t.aliasTypeArguments&&t.aliasSymbol===n.aliasSymbol)for(var d=t.aliasTypeArguments,p=n.aliasTypeArguments,f=0;f<d.length;f++)s(d[f],p[f]);else{if(65536&t.flags&&65536&n.flags&&!(256&t.flags&&256&n.flags)||131072&t.flags&&131072&n.flags){if(t===n){for(var _=0,m=t.types;_<m.length;_++){s(D=m[_],D)}return}for(var g=void 0,h=0,y=t.types;h<y.length;h++){if(Bc(D=y[h],n.types))(g||(g=[])).push(D),s(D,D);else if(96&D.flags){var v=pc(D);Bc(v,n.types)&&(g||(g=[])).push(D,v)}}g&&(t=jc(t,g),n=jc(n,g))}if(540672&n.flags){if(8388608&t.flags||t===ce)return;var b=l(n);if(b)return void(b.isFixed||(!b.candidates||i<b.priority?(b.candidates=[t],b.priority=i):i===b.priority&&b.candidates.push(t),8&i||!(16384&n.flags)||Rc(r,n)||(b.topLevel=!1)))}else if(4&yn(t)&&4&yn(n)&&t.target===n.target){d=t.typeArguments||e.emptyArray,p=n.typeArguments||e.emptyArray;var x=d.length<p.length?d.length:p.length,k=Hs(t.target);for(f=0;f<x;f++)f<k.length&&2===k[f]?c(d[f],p[f]):s(d[f],p[f])}else if(262144&t.flags&&262144&n.flags)s(t.type,n.type);else if(524288&t.flags&&524288&n.flags)s(t.objectType,n.objectType),s(t.indexType,n.indexType);else if(196608&n.flags){for(var S=0,T=void 0,C=0,E=p=n.types;C<E.length;C++){var D;l(D=E[C])?(T=D,S++):s(t,D)}if(1===S){var A=i;i|=2,s(t,T),i=A}}else if(65536&t.flags)for(var w=0,N=d=t.types;w<N.length;w++){s(N[w],n)}else if(163840&(t=ma(t)).flags){var I=t.id+","+n.id;if(o&&o.get(I))return;(o||(o=e.createMap())).set(I,!0);var P=32768&n.flags&&!(16&yn(n)&&n.symbol&&32&n.symbol.flags)?n.symbol:void 0;if(P){if(e.contains(a,P))return;(a||(a=[])).push(P),u(t,n),a.pop()}else u(t,n)}}}function c(e,t){w?(i^=1,s(e,t),i^=1):s(e,t)}function l(e){if(540672&e.flags)for(var n=0,r=t;n<r.length;n++){var i=r[n];if(e===i.typeParameter)return i}}function u(t,n){if(ra(t)&&ra(n)&&(s(ta(t),ta(n)),s(na(t),na(n))),32&yn(n)){var r=ta(n);if(262144&r.flags){var a=l(r.type);if(a&&!a.isFixed){var o=function(t,n){var r=sa(t),i=Ta(t,0);if(0!==r.length||i){for(var a=Oc(Xo(ta(n).type,ea(n))),o=[a],s=na(n),c=!n.declaration.readonlyToken,l=n.declaration.questionToken?0:16777216,u=e.createSymbolTable(),d=0,p=r;d<p.length;d++){var f=p[d],_=h(ci(f));if(!_)return;var m=ln(4|f.flags&l,f.escapedName);m.checkFlags=c&&ep(f)?8:0,m.declarations=f.declarations,m.type=_,u.set(f.escapedName,m)}if(i){var g=h(i.type);if(!g)return;i=qa(g,c&&i.isReadonly)}return dr(void 0,u,e.emptyArray,e.emptyArray,i,void 0)}function h(e){return a.candidates=void 0,Uc(o,e,s),a.candidates&&jo(a.candidates,!0)}}(t,n);if(o){var c=i;i|=4,s(o,a.typeParameter),i=c}}return}if(16384&r.flags)return s(Vo(t),r),void s(jo(e.map(sa(t),ci)),na(n))}Mc(t,n,!1)&&Mc(n,t,!1)||(function(e,t){for(var n=aa(t),r=0,i=n;r<i.length;r++){var a=i[r],o=va(e,a.escapedName);o&&s(ci(o),ci(a))}}(t,n),d(t,n,0),d(t,n,1),function(e,t){var n=Ca(t,0);if(n){(i=Ca(e,0)||Ea(e,0))&&s(i,n)}var r=Ca(t,1);if(r){var i;(i=Ca(e,1)||Ca(e,0)||Ea(e,1))&&s(i,r)}}(t,n))}function d(e,t,n){for(var r=xa(e,n),i=xa(t,n),a=r.length,o=i.length,s=a<o?a:o,c=0;c<s;c++)p(ja(r[a-s+c]),ja(i[o-s+c]))}function p(e,t){Ic(e,t,c),e.typePredicate&&t.typePredicate&&e.typePredicate.kind===t.typePredicate.kind?s(e.typePredicate.type,t.typePredicate.type):s(Ra(e),Ra(t))}void 0===i&&(i=0),s(n,r)}function Bc(e,t){for(var n=0,r=t;n<r.length;n++){if(ws(r[n],e))return!0}return!1}function jc(e,t){for(var n=[],r=0,i=e.types;r<i.length;r++){var a=i[r];Bc(a,t)||n.push(a)}return 65536&e.flags?jo(n):Jo(n)}function $c(t,n){var r,i=t.inferences[n],a=i.inferredType;if(!a){if(i.candidates){var o=t.signature,s=i.topLevel&&!function(e){var t=ca(e);return t&&ip(t,270334)}(i.typeParameter)&&(i.isFixed||!Rc(Ra(o),i.typeParameter))?e.sameMap(i.candidates,fc):i.candidates;a=Dc(1&i.priority?(r=s,e.reduceLeft(r,(function(e,t){return Ps(t,e)?t:e}))):1&t.flags||8&i.priority?jo(s,!0):function(t){if(!A)return oc(t);var n=e.filter(t,(function(e){return!(6144&e.flags)}));return n.length?bc(oc(n),6144&mc(t)):jo(t,!0)}(s))}else if(2&t.flags)a=ce;else{var c=_a(i.typeParameter);a=c?Ss(c,hs(function(t,n){return function(r){return e.indexOf(t,r)>=n?ue:r}}(t.signature.typeParameters,n),t)):Kc(!!(4&t.flags))}i.inferredType=a;var l=ca(t.signature.typeParameters[n]);if(l){var u=Ss(l,t);t.compareTypes(a,ji(u,a))||(i.inferredType=a=u)}}return a}function Kc(e){return e?H:ue}function zc(e){for(var t=[],n=0;n<e.inferences.length;n++)t.push($c(e,n));return t}function Jc(t){var n=hn(t);return n.resolvedSymbol||(n.resolvedSymbol=!e.nodeIsMissing(t)&&kn(t,t.escapedText,1156031,e.Diagnostics.Cannot_find_name_0,t,!e.isWriteOnlyAccess(t),e.Diagnostics.Cannot_find_name_0_Did_you_mean_1)||q),n.resolvedSymbol}function qc(t){return!!e.findAncestor(t,(function(e){return 162===e.kind||71!==e.kind&&143!==e.kind&&"quit"}))}function Vc(t){if(71===t.kind){var n=Jc(t);return n!==q?(Bl(t)?"@":"")+s(n):void 0}if(99===t.kind)return"0";if(179===t.kind)return(i=Vc(t.expression))&&i+"."+e.idText(t.name);if(176===t.kind){var r=t.parent.parent,i=176===r.kind?Vc(r):r.initializer&&Vc(r.initializer),a=Hc(t);return i&&a&&i+"."+a}}function Hc(t){if(174!==t.parent.kind)return""+t.parent.elements.indexOf(t);var n=t.propertyName||t.name;switch(n.kind){case 71:return e.idText(n);case 144:return e.isStringOrNumericLiteral(n.expression)?n.expression.text:void 0;case 9:case 8:return n.text;default:e.Debug.fail("Unexpected name kind for binding element name")}}function Gc(e,t){switch(e.kind){case 71:return 71===t.kind&&Jc(e)===Jc(t)||(226===t.kind||176===t.kind)&&nr(Jc(e))===er(t);case 99:return 99===t.kind;case 97:return 97===t.kind;case 179:return 179===t.kind&&e.name.escapedText===t.name.escapedText&&Gc(e.expression,t.expression);case 176:if(179!==t.kind)return!1;var n=t;if(n.name.escapedText!==Hc(e))return!1;if(176===e.parent.parent.kind&&Gc(e.parent.parent,n.expression))return!0;if(226===e.parent.parent.kind){var r=e.parent.parent.initializer;return r&&Gc(r,n.expression)}}return!1}function Wc(e,t){for(;179===e.kind;)if(Gc(e=e.expression,t))return!0;return!1}function Qc(e,t){return 179===t.kind&&Wc(e,t.expression)&&Xc(Yc(t.expression),t.name.escapedText)}function Yc(e){if(71===e.kind)return ci(Jc(e));if(179===e.kind){var t=Yc(e.expression);return t&&Kr(t,e.name.escapedText)}}function Xc(t,n){if(t&&65536&t.flags){var r=ha(t,n);if(r&&2&e.getCheckFlags(r))return void 0===r.isDiscriminantProperty&&(r.isDiscriminantProperty=32&r.checkFlags&&dc(ci(r))),r.isDiscriminantProperty}return!1}function Zc(e,t){return Gc(e,t)||Wc(e,t)}function el(e,t){if(e!==t){if(8192&t.flags)return t;var n=vl(e,(function(e){return function(e,t){if(!(65536&e.flags))return Os(e,t);for(var n=0,r=e.types;n<r.length;n++)if(Os(r[n],t))return!0;return!1}(t,e)}));if(!(8192&n.flags))return n}return e}function tl(e){var t=e.flags;if(2&t)return A?4079361:4194049;if(32&t){var n=""===e.value;return A?n?3030785:1982209:n?3145473:4194049}if(20&t)return A?4079234:4193922;if(64&t){var r=0===e.value;return A?r?3030658:1982082:r?3145346:4193922}return 8&t?A?4078980:4193668:136&t?A?e===re?3030404:1981828:e===re?3145092:4193668:32768&t?function(e){var t=ia(e);return!!(t.callSignatures.length||t.constructSignatures.length||t.members.get("bind")&&Ps(e,Se))}(e)?A?6164448:8376288:A?6166480:8378320:3072&t?2457472:4096&t?2340752:512&t?A?1981320:4193160:16777216&t?A?6166480:8378320:540672&t?tl(ua(e)||ue):196608&t?function(e){for(var t=0,n=0,r=e;n<r.length;n++)t|=tl(r[n]);return t}(e.types):8388607}function nl(e,t){if(524288&e.flags){var n=ua(e)||ue,r=vl(n,(function(e){return 0!=(tl(e)&t)}));return r!==n?r:e}return vl(e,(function(e){return 0!=(tl(e)&t)}))}function rl(e,t){if(t){var n=Ep(t);return jo([nl(e,131072),n])}return e}function il(t,n){var r=e.getTextOfPropertyName(n);return Kr(t,r)||vu(r)&&Ca(t,1)||Ca(t,0)||W}function al(e,t){return lc(e)&&Kr(e,""+t)||If(e,void 0,!1,!1)||W}function ol(e){return No(If(e,void 0,!1,!1)||W)}function sl(e){return 194===e.parent.kind&&e.parent.left===e||216===e.parent.kind&&e.parent.initializer===e}function cl(e){return il(ll(e.parent),e.name)}function ll(t){var n=t.parent;switch(n.kind){case 215:return ee;case 216:return Nf(n.expression,n.awaitModifier)||W;case 194:return function(e){return 177===e.parent.kind&&sl(e.parent)||261===e.parent.kind&&sl(e.parent.parent)?rl(ll(e),e.right):Ep(e.right)}(n);case 188:return Q;case 177:return function(t,n){return al(ll(t),e.indexOf(t.elements,n))}(n,t);case 198:return function(e){return ol(ll(e.parent))}(n);case 261:return cl(n);case 262:return function(e){return rl(cl(e),e.objectAssignmentInitializer)}(n)}return W}function ul(e){return e.initializer?function(e){return hn(e).resolvedType||Ep(e)}(e.initializer):215===e.parent.parent.kind?ee:216===e.parent.parent.kind&&Nf(e.parent.parent.expression,e.parent.parent.awaitModifier)||W}function dl(t){return 226===t.kind?ul(t):function(t){var n=t.parent,r=dl(n.parent);return rl(174===n.kind?il(r,t.propertyName||t.name):t.dotDotDotToken?ol(r):al(r,e.indexOf(n.elements,t)),t.initializer)}(t)}function pl(e){return 226===e.kind||176===e.kind?dl(e):ll(e)}function fl(e){switch(e.kind){case 185:return fl(e.expression);case 194:switch(e.operatorToken.kind){case 58:return fl(e.left);case 26:return fl(e.right)}}return e}function _l(e){var t=e.parent;return 185===t.kind||194===t.kind&&58===t.operatorToken.kind&&t.left===e||194===t.kind&&26===t.operatorToken.kind&&t.right===e?_l(t):e}function ml(e){if(257===e.kind){var t=ls(Ep(e.expression));return uc(t)?t:void 0}return se}function gl(t){var n=hn(t);if(!n.switchTypes){n.switchTypes=[];for(var r=0,i=t.caseBlock.clauses;r<i.length;r++){var a=ml(i[r]);if(void 0===a)return n.switchTypes=e.emptyArray;n.switchTypes.push(a)}}return n.switchTypes}function hl(e,t){return e===t||65536&t.flags&&function(e,t){if(65536&e.flags){for(var n=0,r=e.types;n<r.length;n++){var i=r[n];if(!Fo(t.types,i))return!1}return!0}if(256&e.flags&&Ai(e)===t)return!0;return Fo(t.types,e)}(e,t)}function yl(t,n){return 65536&t.flags?e.forEach(t.types,n):n(t)}function vl(t,n){if(65536&t.flags){var r=t.types,i=e.filter(r,n);return i===r?t:$o(i)}return n(t)?t:se}function bl(e,t){if(!(65536&e.flags))return t(e);for(var n,r,i=0,a=e.types;i<a.length;i++){var o=t(a[i]);o&&(n?r?r.push(o):r=[n,o]:n=o)}return r?jo(r):n}function xl(e,t){return vl(e,(function(e){return 0!=(e.flags&t)}))}function kl(e,t){return hl(ee,e)&&ip(t,32)||hl(te,e)&&ip(t,64)?bl(e,(function(e){return 2&e.flags?xl(t,34):4&e.flags?xl(t,68):e})):e}function Sl(e){return 0===e.flags}function Tl(e){return 0===e.flags?e.type:e}function Cl(e,t){return t?{flags:0,type:e}:e}function El(e){return J[e.id]||(J[e.id]=function(e){var t=sr(256);return t.elementType=e,t}(e))}function Dl(e,t){var n=pc(function(e){var t=e.contextualType;e.contextualType=H;var n=Ep(e);return e.contextualType=t,n}(t));return hl(n,e.elementType)?e:El(jo([e.elementType,n]))}function Al(e){return e.finalArrayType||(e.finalArrayType=8192&(t=e.elementType).flags?Pe:No(65536&t.flags?jo(t.types,!0):t));var t}function wl(e){return 256&yn(e)?Al(e):e}function Nl(e){return 256&yn(e)?e.elementType:se}function Il(t,n){return function(e){for(var t=!1,n=0,r=e;n<r.length;n++){var i=r[n];if(!(8192&i.flags)){if(!(256&yn(i)))return!1;t=!0}}return t}(t)?El(jo(e.map(t,Nl))):jo(e.sameMap(t,wl),n)}function Pl(t){var n=_l(t),r=n.parent,i=179===r.kind&&("length"===r.name.escapedText||181===r.parent.kind&&e.isPushOrUnshiftIdentifier(r.name)),a=180===r.kind&&r.expression===n&&194===r.parent.kind&&58===r.parent.operatorToken.kind&&r.parent.left===r&&!e.isAssignmentTarget(r.parent)&&ap(Ep(r.argumentExpression),84);return i||a}function Ol(t){var n=hn(t);return void 0===n.maybeTypePredicate&&(n.maybeTypePredicate=function(t){if(97!==t.expression.kind){var n=Ju(t.expression);if(n!==ce){var r=ma(n);if(r!==W){var i=xa(r,0);return!!e.forEach(i,(function(e){return e.typePredicate}))}}}return!1}(t)),n.maybeTypePredicate}function Fl(t,n,r,i,o){var s;void 0===r&&(r=n);var c=0;if(ut)return W;if(!t.flowNode||!o&&!(17810175&n.flags))return n;var l=lt,u=Tl(p(t.flowNode));lt=l;var d=256&yn(u)&&Pl(t)?Ie:wl(u);return 203===t.parent.kind&&8192&nl(d,524288).flags?n:d;function p(a){if(2500===c)return ut=!0,o=t,s=e.findAncestor(o,e.isFunctionOrModuleBlock),u=e.getSourceFileOfNode(o),d=e.getSpanOfTokenAtPosition(u,s.statements.pos),wt.add(e.createFileDiagnostic(u,d.start,d.length,e.Diagnostics.The_containing_function_or_module_body_is_too_large_for_control_flow_analysis)),W;var o,s,u,d;for(c++;;){var v=a.flags;if(1024&v)for(var b=l;b<lt;b++)if(Tt[b]===a)return c--,Ct[b];var x=void 0;if(4096&v)a.locked=!0,x=p(a.antecedent),a.locked=!1;else{if(2048&v){a=a.antecedent;continue}if(16&v){if(!(x=f(a))){a=a.antecedent;continue}}else if(96&v)x=m(a);else if(128&v)x=g(a);else if(12&v){if(1===a.antecedents.length){a=a.antecedents[0];continue}x=4&v?h(a):y(a)}else if(256&v){if(!(x=_(a))){a=a.antecedent;continue}}else if(2&v){var k=a.container;if(k&&k!==i&&179!==t.kind&&99!==t.kind){a=k.flowNode;continue}x=r}else x=Sf(n)}return 1024&v&&(Tt[lt]=a,Ct[lt]=x,lt++),c--,x}}function f(r){var i=r.node;if(Gc(t,i)){if(2===e.getAssignmentTargetKind(i)){var a=p(r.antecedent);return Cl(pc(Tl(a)),Sl(a))}if(n===G||n===Pe){if(function(e){return 226===e.kind&&e.initializer&&Wr(e.initializer)||176!==e.kind&&194===e.parent.kind&&Wr(e.parent.right)}(i))return El(se);var o=pc(pl(i));return Os(o,n)?o:Ie}return 65536&n.flags?el(n,pl(i)):n}if(Wc(t,i))return n}function _(e){if(n===G||n===Pe){var r=e.node,i=181===r.kind?r.expression.expression:r.left.expression;if(Gc(t,fl(i))){var a=p(e.antecedent),o=Tl(a);if(256&yn(o)){var s=o;if(181===r.kind)for(var c=0,l=r.arguments;c<l.length;c++){s=Dl(s,l[c])}else ap(Ep(r.left.argumentExpression),84)&&(s=Dl(s,r.right));return s===o?a:Cl(s,Sl(a))}return a}}}function m(e){var t=p(e.antecedent),n=Tl(t);if(8192&n.flags)return t;var r=0!=(32&e.flags),i=wl(n),a=w(i,e.expression,r);if(a===i)return t;var o=Sl(t);return Cl(o&&8192&a.flags?ce:a,o)}function g(e){var n=p(e.antecedent),r=Tl(n),i=e.switchStatement.expression;return Gc(t,i)?r=C(r,e.switchStatement,e.clauseStart,e.clauseEnd):v(i,r)&&(r=b(r,i,(function(t){return C(t,e.switchStatement,e.clauseStart,e.clauseEnd)}))),Cl(r,Sl(n))}function h(t){for(var i=[],a=!1,o=!1,s=0,c=t.antecedents;s<c.length;s++){var l=c[s];if(!(2048&l.flags&&l.lock.locked)){var u=p(l),d=Tl(u);if(d===n&&n===r)return d;e.pushIfUnique(i,d),hl(d,n)||(a=!0),Sl(u)&&(o=!0)}}return Cl(Il(i,a),o)}function y(r){var i=function(e){return e.id||(e.id=a,a++),e.id}(r),o=bt[i]||(bt[i]=e.createMap());if(!s&&!(s=Vc(t)))return n;var c=o.get(s);if(c)return c;for(var l=st;l<ct;l++)if(xt[l]===r&&kt[l]===s&&St[l].length)return Cl(Il(St[l],!1),!0);var u,d=[],f=!1;xt[ct]=r,kt[ct]=s,St[ct]=d;for(var _=0,m=r.antecedents;_<m.length;_++){var g=m[_];ct++;var h=p(g);ct--,u||(u=h);var y=Tl(h),v=o.get(s);if(v)return v;if(e.pushIfUnique(d,y),hl(y,n)||(f=!0),y===n)break}var b=Il(d,f);return Sl(u)?Cl(b,!0):(o.set(s,b),b)}function v(e,n){return 179===e.kind&&65536&n.flags&&Gc(t,e.expression)&&Xc(n,e.name.escapedText)}function b(e,t,n){var r=t.name.escapedText,i=Kr(e,r),a=i&&n(i);return i===a?e:vl(e,(function(e){return Ls(Kr(e,r),a)}))}function x(e,r,i){return Gc(t,r)?nl(e,i?1048576:2097152):v(r,n)?b(e,r,(function(e){return nl(e,i?1048576:2097152)})):Qc(t,r)?n:e}function k(r,i,a){switch(i.operatorToken.kind){case 58:return x(r,i.left,a);case 32:case 33:case 34:case 35:var o=i.operatorToken.kind,s=fl(i.left),c=fl(i.right);if(189===s.kind&&9===c.kind)return T(r,s,o,c,a);if(189===c.kind&&9===s.kind)return T(r,c,o,s,a);if(Gc(t,s))return S(r,o,c,a);if(Gc(t,c))return S(r,o,s,a);if(v(s,n))return b(r,s,(function(e){return S(e,o,c,a)}));if(v(c,n))return b(r,c,(function(e){return S(e,o,s,a)}));if(Qc(t,s)||Qc(t,c))return n;break;case 93:return function(r,i,a){var o=fl(i.left);if(!Gc(t,o))return Wc(t,o)?n:r;var s,c=Ep(i.right);if(!Ps(c,Se))return r;var l=va(c,"prototype");if(l){var u=ci(l);zr(u)||(s=u)}if(zr(r)&&(s===ke||s===Se))return r;if(!s){var d=void 0;2&yn(c)?d=Bi(c).declaredConstructSignatures:16&yn(c)&&(d=xa(c,1)),d&&d.length&&(s=jo(e.map(d,(function(e){return Ra(ja(e))}))))}if(s)return E(r,s,a,Fs);return r}(r,i,a);case 26:return w(r,i.right,a)}return r}function S(e,t,n,r){if(1&e.flags)return e;33!==t&&35!==t||(r=!r);var i=Ep(n);if(6144&i.flags)return A?nl(e,32===t||33===t?r?65536:524288:95===n.kind?r?32768:262144:r?16384:131072):e;if(16810497&e.flags)return e;if(r){var a=vl(e,(function(e){return Ls(t=e,n=i)||Ls(n,t);var t,n}));return 8192&a.flags?e:kl(a,i)}if(uc(i)){var o=ls(i);return vl(e,(function(e){return ls(e)!==o}))}return e}function T(e,r,i,a,o){var s=fl(r.expression);if(!Gc(t,s))return Wc(t,s)?n:e;if(33!==i&&35!==i||(o=!o),o&&!(65536&e.flags)){var c=jt.get(a.text);if(c){if(Ps(c,e))return c;if(540672&e.flags)if(Ps(c,ua(e)||H))return Jo([e,c])}}return nl(e,o?Ut.get(a.text)||64:Bt.get(a.text)||8192)}function C(t,n,r,i){var a=gl(n);if(!a.length)return t;var o=a.slice(r,i),s=r===i||e.contains(o,se),c=jo(o),l=8192&c.flags?se:kl(vl(t,(function(e){return Ls(c,e)})),c);if(!s)return l;var u=vl(t,(function(t){return!(uc(t)&&e.contains(a,ls(t)))}));return 8192&l.flags?u:jo([l,u])}function E(e,t,n,r){if(!n)return vl(e,(function(e){return!r(e,t)}));if(65536&e.flags){var i=vl(e,(function(e){return r(e,t)}));if(!(8192&i.flags))return i}return Ps(t,e)?t:Os(e,t)?e:Os(t,e)?t:Jo([e,t])}function D(r,i,a){if(!function(e,t){if(e.arguments)for(var n=0,r=e.arguments;n<r.length;n++)if(Zc(t,r[n]))return!0;return!(179!==e.expression.kind||!Zc(t,e.expression.expression))}(i,t)||!Ol(i))return r;var o=Id(i),s=o.typePredicate;if(!s)return r;if(zr(r)&&(s.type===ke||s.type===Se))return r;if(e.isIdentifierTypePredicate(s)){var c=i.arguments[s.parameterIndex-(o.thisParameter?1:0)];if(c){if(Gc(t,c))return E(r,s.type,a,Ps);if(Wc(t,c))return n}}else{var l=e.skipParentheses(i.expression);if(180===l.kind||179===l.kind){var u=l,d=e.skipParentheses(u.expression);if(Gc(t,d))return E(r,s.type,a,Ps);if(Wc(t,d))return n}}return r}function w(e,t,n){switch(t.kind){case 71:case 99:case 97:case 179:return x(e,t,n);case 181:return D(e,t,n);case 185:return w(e,t.expression,n);case 194:return k(e,t,n);case 192:if(51===t.operator)return w(e,t.operand,!n)}return e}}function Ll(t){return e.findAncestor(t.parent,(function(t){return e.isFunctionLike(t)&&!e.getImmediatelyInvokedFunctionExpression(t)||234===t.kind||265===t.kind||149===t.kind}))}function Rl(t){var n,r=e.getRootDeclaration(t.valueDeclaration).parent,i=hn(r);return 4194304&i.flags||(i.flags|=4194304,n=r,e.findAncestor(n.parent,(function(t){return e.isFunctionLike(t)&&!!(4194304&hn(t).flags)}))||Ml(r)),t.isAssigned||!1}function Ml(t){if(71===t.kind){if(e.isAssignmentTarget(t)){var n=Jc(t);n.valueDeclaration&&146===e.getRootDeclaration(n.valueDeclaration).kind&&(n.isAssigned=!0)}}else e.forEachChild(t,Ml)}function Ul(e){return 3&e.flags&&0!=(2&$u(e))&&ci(e)!==Pe}function Bl(e){var t=e.parent;return 179===t.kind||181===t.kind&&t.expression===e||180===t.kind&&t.expression===e}function jl(e){return 540672&e.flags&&ip(ua(e)||ue,6144)}function $l(e,t){var n=ci(e);return Bl(t)&&yl(n,jl)?bl(Dc(n),ma):n}function Kl(t){var n=Jc(t);if(n===q)return W;if(n===M){var r=e.getContainingFunction(t);return T<2&&(187===r.kind?cn(t,e.Diagnostics.The_arguments_object_cannot_be_referenced_in_an_arrow_function_in_ES3_and_ES5_Consider_using_a_standard_function_expression):e.hasModifier(r,256)&&cn(t,e.Diagnostics.The_arguments_object_cannot_be_referenced_in_an_async_function_or_method_in_ES3_and_ES5_Consider_using_a_standard_function_or_method)),hn(r).flags|=8192,ci(n)}!Fn(n,107455)||qc(t)||F_(Rn(n))||Un(n);var i=nr(n),a=i.valueDeclaration;if(32&i.flags)if(229===a.kind&&e.nodeIsDecorated(a))for(r=e.getContainingClass(t);void 0!==r;){if(r===a&&r.name!==t){hn(a).flags|=8388608,hn(t).flags|=16777216;break}r=e.getContainingClass(r)}else if(199===a.kind)for(r=e.getThisContainer(t,!1);void 0!==r;){if(r.parent===a){149===r.kind&&e.hasModifier(r,32)&&(hn(a).flags|=8388608,hn(t).flags|=16777216);break}r=e.getThisContainer(r,!1)}vf(t,t),mf(t,t),gf(t,t),function(t,n){if(T>=2||0==(34&n.flags)||260===n.valueDeclaration.parent.kind)return;var r=e.getEnclosingBlockScopeContainer(n.valueDeclaration),i=function(t,n){return!!e.findAncestor(t,(function(t){return t===n?"quit":e.isFunctionLike(t)}))}(t.parent,r),a=r,o=!1;for(;a&&!e.nodeStartsNewLexicalEnvironment(a);){if(e.isIterationStatement(a,!1)){o=!0;break}a=a.parent}o&&(i&&(hn(a).flags|=65536),214===r.kind&&e.getAncestor(n.valueDeclaration,227).parent===r&&function(t,n){var r=t;for(;185===r.parent.kind;)r=r.parent;var i=!1;if(e.isAssignmentTarget(r))i=!0;else if(192===r.parent.kind||193===r.parent.kind){var a=r.parent;i=43===a.operator||44===a.operator}if(!i)return!1;return!!e.findAncestor(r,(function(e){return e===n?"quit":e===n.statement}))}(t,r)&&(hn(n.valueDeclaration).flags|=2097152),hn(n.valueDeclaration).flags|=262144);i&&(hn(n.valueDeclaration).flags|=131072)}(t,n);var o=$l(i,t),s=e.getAssignmentTargetKind(t);if(s){if(!(3&i.flags))return cn(t,e.Diagnostics.Cannot_assign_to_0_because_it_is_not_a_variable,Tr(n)),W;if(ep(i))return cn(t,e.Diagnostics.Cannot_assign_to_0_because_it_is_a_constant_or_a_read_only_property,Tr(n)),W}var c=2097152&i.flags;if(3&i.flags){if(1===s)return o}else{if(!c)return o;a=e.find(n.declarations,u)}if(!a)return o;for(var l=146===e.getRootDeclaration(a).kind,d=Ll(a),p=Ll(t),f=p!==d;p!==d&&(186===p.kind||187===p.kind||e.isObjectLiteralOrClassExpressionMethod(p))&&(Ul(i)||l&&!Rl(i));)p=Ll(p);var _=l||c||f||o!==G&&o!==Pe&&(!A||0!=(1&o.flags)||qc(t)||246===t.parent.kind)||203===t.parent.kind||e.isInAmbientContext(a),m=Fl(t,o,_?l?function(e,t){return A&&146===t.kind&&t.initializer&&2048&gc(e)&&!(2048&gc(Dp(t.initializer)))?nl(e,131072):e}(o,e.getRootDeclaration(a)):o:o===G||o===Pe?Q:bc(o,2048),p,!_);if(o===G||o===Pe){if(m===G||m===Pe)return N&&(cn(e.getNameOfDeclaration(a),e.Diagnostics.Variable_0_implicitly_has_type_1_in_some_locations_where_its_type_cannot_be_determined,Tr(n),Er(m)),cn(t,e.Diagnostics.Variable_0_implicitly_has_an_1_type,Tr(n),Er(m))),Sf(m)}else if(!_&&!(2048&gc(o))&&2048&gc(m))return cn(t,e.Diagnostics.Variable_0_is_used_before_being_assigned,Tr(n)),o;return s?pc(m):m}function zl(e,t){(hn(e).flags|=2,149===t.kind||152===t.kind)?hn(t.parent).flags|=4:hn(t).flags|=4}function Jl(t){return e.isSuperCall(t)?t:e.isFunctionLike(t)?void 0:e.forEachChild(t,Jl)}function ql(e){var t=hn(e);return void 0===t.hasSuperCall&&(t.superCall=Jl(e.body),t.hasSuperCall=!!t.superCall),t.superCall}function Vl(e){return ki(Pi(er(e)))===Z}function Hl(t,n,r){var i=n.parent;if(e.getClassExtendsHeritageClauseElement(i)&&!Vl(i)){var a=ql(n);(!a||a.end>t.pos)&&cn(t,r)}}function Gl(t){var n=e.getThisContainer(t,!0),r=!1;switch(152===n.kind&&Hl(t,n,e.Diagnostics.super_must_be_called_before_accessing_this_in_the_constructor_of_a_derived_class),187===n.kind&&(n=e.getThisContainer(n,!1),r=T<2),n.kind){case 233:cn(t,e.Diagnostics.this_cannot_be_referenced_in_a_module_or_namespace_body);break;case 232:cn(t,e.Diagnostics.this_cannot_be_referenced_in_current_location);break;case 152:Wl(t,n)&&cn(t,e.Diagnostics.this_cannot_be_referenced_in_constructor_arguments);break;case 149:case 148:e.hasModifier(n,32)&&cn(t,e.Diagnostics.this_cannot_be_referenced_in_a_static_property_initializer);break;case 144:cn(t,e.Diagnostics.this_cannot_be_referenced_in_a_computed_property_name)}if(r&&zl(t,n),e.isFunctionLike(n)&&(!tu(t)||e.getThisParameter(n))){if(186===n.kind&&194===n.parent.kind&&3===e.getSpecialPropertyAssignmentKind(n.parent)){var i=Dp(n.parent.left.expression.expression).symbol;if(i&&i.members&&16&i.flags)return Od(i)}var a=ii(n)||Zl(n);if(a)return a}if(e.isClassLike(n.parent)){var o,s=er(n.parent);return Fl(t,o=e.hasModifier(n,32)?ci(s):Pi(s).thisType)}if(e.isInJavaScriptFile(t)&&((o=function(t){var n=e.getJSDocType(t);if(n&&273===n.kind){var r=n;if(r.parameters.length>0&&r.parameters[0].name&&"this"===r.parameters[0].name.escapedText)return ps(r.parameters[0].type)}}(n))&&o!==W))return o;return I&&cn(t,e.Diagnostics.this_implicitly_has_type_any_because_it_does_not_have_a_type_annotation),H}function Wl(t,n){return!!e.findAncestor(t,(function(e){return e===n?"quit":146===e.kind}))}function Ql(t){var n=181===t.parent.kind&&t.parent.expression===t,r=e.getSuperContainer(t,!0),i=!1;if(!n)for(;r&&187===r.kind;)r=e.getSuperContainer(r,!0),i=T<2;var a=0;if(!function(t){if(!t)return!1;if(n)return 152===t.kind;if(e.isClassLike(t.parent)||178===t.parent.kind)return e.hasModifier(t,32)?151===t.kind||150===t.kind||153===t.kind||154===t.kind:151===t.kind||150===t.kind||153===t.kind||154===t.kind||149===t.kind||148===t.kind||152===t.kind;return!1}(r)){var o=e.findAncestor(t,(function(e){return e===r?"quit":144===e.kind}));return o&&144===o.kind?cn(t,e.Diagnostics.super_cannot_be_referenced_in_a_computed_property_name):n?cn(t,e.Diagnostics.Super_calls_are_not_permitted_outside_constructors_or_in_nested_functions_inside_constructors):r&&r.parent&&(e.isClassLike(r.parent)||178===r.parent.kind)?cn(t,e.Diagnostics.super_property_access_is_permitted_only_in_a_constructor_member_function_or_member_accessor_of_a_derived_class):cn(t,e.Diagnostics.super_can_only_be_referenced_in_members_of_derived_classes_or_object_literal_expressions),W}if(n||152!==r.kind||Hl(t,r,e.Diagnostics.super_must_be_called_before_accessing_a_property_of_super_in_the_constructor_of_a_derived_class),a=e.hasModifier(r,32)||n?512:256,hn(t).flags|=a,151===r.kind&&e.hasModifier(r,256)&&(e.isSuperProperty(t.parent)&&e.isAssignmentTarget(t.parent)?hn(r).flags|=4096:hn(r).flags|=2048),i&&zl(t.parent,r),178===r.parent.kind)return T<2?(cn(t,e.Diagnostics.super_is_only_allowed_in_members_of_object_literal_expressions_when_option_target_is_ES2015_or_higher),W):H;var s=r.parent,c=Pi(er(s)),l=c&&Si(c)[0];return l?152===r.kind&&Wl(t,r)?(cn(t,e.Diagnostics.super_cannot_be_referenced_in_constructor_arguments),W):512===a?ki(c):ji(l,c.thisType):(e.getClassExtendsHeritageClauseElement(s)||cn(t,e.Diagnostics.super_can_only_be_referenced_in_a_derived_class),W)}function Yl(e){return 4&yn(e)&&e.target===Ne?e.typeArguments[0]:void 0}function Xl(t){return bl(t,(function(t){return 131072&t.flags?e.forEach(t.types,Yl):Yl(t)}))}function Zl(t){if(187!==t.kind){if(Ds(t)){var n=mu(t);if(n){var r=n.thisParameter;if(r)return ci(r)}}var i=e.isInJavaScriptFile(t);if(I||i){var a=function(e){return 151!==e.kind&&153!==e.kind&&154!==e.kind||178!==e.parent.kind?186===e.kind&&261===e.parent.kind?e.parent.parent:void 0:e.parent}(t);if(a){for(var o=cu(a),s=a,c=o;c;){var l=Xl(c);if(l)return Ss(l,uu(a));if(261!==s.parent.kind)break;c=cu(s=s.parent.parent)}return o?xc(o):yp(a)}var u=t.parent;if(194===u.kind&&58===u.operatorToken.kind){var d=u.left;if(179===d.kind||180===d.kind){var p=d.expression;if(i&&e.isIdentifier(p)){var f=e.getSourceFileOfNode(u);if(f.commonJsModuleIndicator&&Jc(p)===f.symbol)return}return yp(p)}}}}}function eu(t){var n=t.parent;if(Ds(n)){var r=e.getImmediatelyInvokedFunctionExpression(n);if(r&&r.arguments){var i=e.indexOf(n.parameters,t);if(t.dotDotDotToken){for(var a=[],o=i;o<r.arguments.length;o++)a.push(fc(Dp(r.arguments[o])));return a.length?No(jo(a)):void 0}var s=hn(r),c=s.resolvedSignature;s.resolvedSignature=et;var l=i<r.arguments.length?fc(Dp(r.arguments[i])):t.initializer?void 0:Y;return s.resolvedSignature=c,l}var u=mu(n);if(u){var d=e.hasRestParameter(n),p=n.parameters.length-(d?1:0);i=e.indexOf(n.parameters,t);if(void 0===e.getThisParameter(n)||u.thisParameter||(e.Debug.assert(0!==i),i-=1),i<p)return jd(u,i);if(d&&i===n.parameters.length-1&&ac(u,n.parameters.length-1))return ci(e.lastOrUndefined(u.parameters))}}}function tu(t){for(;t.parent&&!e.isFunctionLike(t.parent);){if(146===t.parent.kind&&t.parent.initializer===t)return!0;t=t.parent}return!1}function nu(t){if(152===t.kind||e.getEffectiveReturnTypeNode(t)||Mf(t))return Ra(Oa(t));var n=fu(t);return n&&!function(e){return!e.resolvedReturnType&&Ur(e,3)>=0}(n)?Ra(n):void 0}function ru(t,n){var r=gd(t),i=e.indexOf(r,n);if(i>=0)return jd(hn(t).resolvedSignature===nt?nt:Id(t),i)}function iu(e,t){return bl(e,(function(e){var n=229376&e.flags?va(e,t):void 0;return n?ci(n):void 0}))}function au(e,t){return bl(e,(function(e){return Sa(e,t)}))}function ou(t){var n=cu(t.parent);if(n){if(!e.hasDynamicName(t)){var r=iu(n,er(t).escapedName);if(r)return r}return yu(t.name)&&au(n,1)||au(n,0)}}function su(e,t){return e&&(iu(e,""+t)||au(e,1)||Pf(e,void 0,!1,!1,!1))}function cu(e){var t=lu(e);return t&&ma(t)}function lu(t){if(!f_(t)){if(t.contextualType)return t.contextualType;var n=t.parent;switch(n.kind){case 226:case 146:case 149:case 148:case 176:return function(t){var n=t.parent;if(t===n.initializer){var r=e.getEffectiveTypeAnnotationNode(n);if(r)return ps(r);if(146===n.kind){var i=eu(n);if(i)return i}if(e.isBindingPattern(n.name))return Zr(n.name,!0,!1);if(e.isBindingPattern(n.parent)){var a=n.parent.parent,o=n.propertyName||n.name;if(176!==a.kind){var s=e.getEffectiveTypeAnnotationNode(a);if(s&&!e.isBindingPattern(o)){var c=e.getTextOfPropertyName(o);if(c)return Kr(ps(s),c)}}}}}(t);case 187:case 219:return function(t){var n=e.getContainingFunction(t);if(n){var r=e.getFunctionFlags(n);if(1&r)return;var i=nu(n);return 2&r?i&&Vp(i):i}}(t);case 197:return function(t){var n=e.getContainingFunction(t);if(n){var r=e.getFunctionFlags(n),i=nu(n);if(i)return t.asteriskToken?i:Lf(i,0!=(2&r))}}(n);case 181:case 182:return ru(n,t);case 184:case 202:return ps(n.type);case 194:return function(t){var n=t.parent,r=n.operatorToken.kind;if(e.isAssignmentOperator(r)){if(t===n.right){switch(e.getSpecialPropertyAssignmentKind(n)){case 0:break;case 5:if(!n.left.symbol)break;case 1:case 2:case 3:case 4:return}return Ep(n.left)}}else{if(54===r){var i=lu(n);return i||t!==n.right||(i=Ep(n.left,!0)),i}if((53===r||26===r)&&t===n.right)return lu(n)}}(t);case 261:case 262:return ou(n);case 263:return cu(n.parent);case 177:var r=n;return su(cu(r),e.indexOfNode(r.elements,t));case 195:return function(e){var t=e.parent;return e===t.whenTrue||e===t.whenFalse?lu(t):void 0}(t);case 205:return e.Debug.assert(196===n.parent.kind),function(e,t){if(183===e.parent.kind)return ru(e.parent,t)}(n.parent,t);case 185:var i=e.isInJavaScriptFile(n)?e.getJSDocTypeTag(n):void 0;return i?ps(i.typeExpression.type):lu(n);case 256:return function(t){var n=lu(e.isJsxAttributeLike(t.parent)?t.parent.parent:t.parent.openingElement.attributes);if(n&&!zr(n)){if(e.isJsxAttribute(t.parent))return iu(n,t.parent.name.escapedText);if(249===t.parent.kind){var r=Iu();return r&&""!==r?iu(n,r):H}return n}}(n);case 253:case 255:return function(t){var n=lu(t.parent);if(e.isJsxAttribute(t)){if(!n||zr(n))return;return iu(n,t.name.escapedText)}return n}(n);case 251:case 250:return Ru(n)}}}function uu(t){return(t=e.findAncestor(t,(function(e){return!!e.contextualMapper})))?t.contextualMapper:k}function du(t,n){var r=ba(t,0);if(1===r.length){var i=r[0];if(!function(t,n){for(var r=0;r<n.parameters.length;r++){var i=n.parameters[r];if(i.initializer||i.questionToken||i.dotDotDotToken||Aa(i))break}n.parameters.length&&e.parameterIsThisKeyword(n.parameters[0])&&r--;return(t.hasRestParameter?Number.MAX_VALUE:t.parameters.length)<r}(i,n))return i}}function pu(e){return 186===e.kind||187===e.kind}function fu(t){return pu(t)||e.isObjectLiteralMethod(t)?mu(t):void 0}function _u(t){return e.isObjectLiteralMethod(t)?function(t){if(e.Debug.assert(e.isObjectLiteralMethod(t)),!f_(t))return ou(t)}(t):cu(t)}function mu(t){e.Debug.assert(151!==t.kind||e.isObjectLiteralMethod(t));var n=_u(t);if(n){if(!(65536&n.flags))return du(n,t);for(var r,i,a=0,o=n.types;a<o.length;a++){var s=du(o[a],t);if(s)if(r){if(!ic(r[0],s,!1,!0,!0,Ns))return;r.push(s)}else r=[s]}return r&&((i=zi(r[0])).resolvedReturnType=void 0,i.unionSignatures=r),i}}function gu(e){return 176===e.kind&&!!e.initializer||194===e.kind&&58===e.operatorToken.kind}function hu(t,n){for(var r=t.elements,i=!1,a=[],o=e.isAssignmentTarget(t),s=cu(t),c=0;c<r.length;c++){var l=r[c];if(o&&198===l.kind){var u=Dp(l.expression,n),d=Ca(u,1)||Pf(u,void 0,!1,!1,!1);d&&a.push(d)}else{var p=kp(l,n,su(s,c));a.push(p)}i=i||198===l.kind}if(!i){if(o&&a.length)return(p=Xa(Po(a))).pattern=t,p;var f=cu(t);if(f&&function(t){return!!(65536&t.flags?e.forEach(t.types,lc):lc(t))}(f)){var _=f.pattern;if(_&&(175===_.kind||177===_.kind))for(var m=_.elements,g=a.length;g<m.length;g++){var h=m[g];gu(h)?a.push(f.typeArguments[g]):(200!==h.kind&&cn(h,e.Diagnostics.Initializer_provides_no_value_for_this_binding_element_and_the_binding_element_has_no_default_value),a.push(W))}if(a.length)return Po(a)}}return No(a.length?jo(a,!0):A?se:Y)}function yu(e){switch(e.kind){case 144:return function(e){return ap(bu(e),84)}(e);case 71:return vu(e.escapedText);case 8:case 9:return vu(e.text);default:return!1}}function vu(e){return(+e).toString()===e}function bu(t){var n=hn(t.expression);return n.resolvedType||(n.resolvedType=Dp(t.expression),6144&n.resolvedType.flags||!ap(n.resolvedType,262774)&&!Os(n.resolvedType,jo([ee,te,ae]))?cn(t,e.Diagnostics.A_computed_property_name_must_be_of_type_string_number_symbol_or_any):id(t.expression,n.resolvedType,!0)),n.resolvedType}function xu(e,t,n,r){for(var i=[],a=0;a<n.length;a++)(0===r||yu(e[a+t].name))&&i.push(ci(n[a]));return qa(i.length?jo(i,!0):Q,!1)}function ku(t,n){var r=e.isAssignmentTarget(t);!function(t,n){for(var r=e.createUnderscoreEscapedMap(),i=1,a=2,o=4,s=a|o,c=0,l=t.properties;c<l.length;c++){var u=l[c];if(263!==u.kind){var d=u.name;if(144===d.kind&&dm(d),262===u.kind&&!n&&u.objectAssignmentInitializer)return Em(u.equalsToken,e.Diagnostics.can_only_be_used_in_an_object_literal_property_inside_a_destructuring_assignment);if(u.modifiers)for(var p=0,f=u.modifiers;p<f.length;p++){var _=f[p];120===_.kind&&151===u.kind||Em(_,e.Diagnostics._0_modifier_cannot_be_used_here,e.getTextOfNode(_))}var m=void 0;261===u.kind||262===u.kind?(fm(u.questionToken,e.Diagnostics.An_object_member_cannot_be_declared_optional),8===d.kind&&wm(d),m=i):151===u.kind?m=i:153===u.kind?m=a:154===u.kind?m=o:e.Debug.assertNever(u,"Unexpected syntax kind:"+u.kind);var g=e.getPropertyNameForPropertyNameNode(d);if(void 0!==g){var h=r.get(g);if(h)if(m===i&&h===i)Em(d,e.Diagnostics.Duplicate_identifier_0,e.getTextOfNode(d));else{if(!(m&s&&h&s))return Em(d,e.Diagnostics.An_object_literal_cannot_have_property_and_accessor_with_the_same_name);if(h===s||m===h)return Em(d,e.Diagnostics.An_object_literal_cannot_have_multiple_get_Slashset_accessors_with_the_same_name);r.set(g,m|h)}else r.set(g,m)}}}}(t,r);for(var i=e.createSymbolTable(),a=[],o=ue,s=0,c=cu(t),l=c&&c.pattern&&(174===c.pattern.kind||178===c.pattern.kind),u=!c&&e.isInJavaScriptFile(t),d=0,p=!1,f=!1,_=!1,m=e.isInJavaScriptFile(t),g=0,h=0;h<t.properties.length;h++){var y=t.properties[h],v=y.symbol,b=void 0;if(261===y.kind||262===y.kind||e.isObjectLiteralMethod(y)){var x=void 0;m&&(x=Gr(y));var k=void 0;if(261===y.kind){if(144===y.name.kind){var C=bu(y.name);224&C.flags&&(b=e.escapeLeadingUnderscores(""+C.value))}k=Sp(y,n)}else 151===y.kind?k=Tp(y,n):(e.Debug.assert(262===y.kind),k=kp(y.name,n));x&&(Rs(k,x,y),k=x),d|=k.flags;var E=ln(4|v.flags,b||v.escapedName);if(r)(261===y.kind&&gu(y.initializer)||262===y.kind&&y.objectAssignmentInitializer)&&(E.flags|=16777216),!b&&e.hasDynamicName(y)&&(p=!0);else if(l&&!(512&yn(c))){var D=va(c,v.escapedName);D?E.flags|=16777216&D.flags:S.suppressExcessPropertyErrors||Ta(c,0)||cn(y.name,e.Diagnostics.Object_literal_may_only_specify_known_properties_and_0_does_not_exist_in_type_1,Tr(v),Er(c))}E.declarations=v.declarations,E.parent=v.parent,v.valueDeclaration&&(E.valueDeclaration=v.valueDeclaration),E.type=k,E.target=v,v=E}else{if(263===y.kind){if(T<2&&Z_(y,2),a.length>0&&(o=is(o,N(),t.symbol,s),a=[],i=e.createSymbolTable(),f=!1,_=!1,d=0),!Su(k=Dp(y.expression)))return cn(y,e.Diagnostics.Spread_types_may_only_be_created_from_object_types),W;o=is(o,k,t.symbol,s),g=h+1;continue}e.Debug.assert(153===y.kind||154===y.kind),l_(y)}!b&&e.hasDynamicName(y)?yu(y.name)?_=!0:f=!0:i.set(v.escapedName,v),a.push(v)}if(l)for(var A=0,w=sa(c);A<w.length;A++){E=w[A];i.get(E.escapedName)||(16777216&E.flags||cn(E.valueDeclaration||E.bindingElement,e.Diagnostics.Initializer_provides_no_value_for_this_binding_element_and_the_binding_element_has_no_default_value),i.set(E.escapedName,E),a.push(E))}return o!==ue?(a.length>0&&(o=is(o,N(),t.symbol,s)),o):N();function N(){var n=u?at:f?xu(t.properties,g,a,0):void 0,o=_&&!u?xu(t.properties,g,a,1):void 0,c=dr(t.symbol,i,e.emptyArray,e.emptyArray,n,o),l=S.suppressExcessPropertyErrors?0:1048576;return c.flags|=4194304|l|14680064&d,c.objectFlags|=128,p&&(c.objectFlags|=512),r&&(c.pattern=t),6144&c.flags||(s|=14680064&c.flags),c}}function Su(t){return!!(16777217&t.flags||7392&gc(t)&&Su(hc(t))||32768&t.flags&&!ra(t)||196608&t.flags&&!e.forEach(t.types,(function(e){return!Su(e)})))}function Tu(t){return!e.stringContains(t,"-")}function Cu(t){switch(t.kind){case 179:case 99:return!1;case 71:return e.isIntrinsicJsxName(t.escapedText);default:e.Debug.fail()}}function Eu(t,n,r){for(var i,a=t.attributes,o=e.createSymbolTable(),s=ue,c=[],l=!1,u=!1,d=Iu(),p=0,f=a.properties;p<f.length;p++){var _=f[p],m=_.symbol;if(e.isJsxAttribute(_)){var g=_.initializer?Dp(_.initializer,r):ne,h=ln(33554436|m.flags,m.escapedName);h.declarations=m.declarations,h.parent=m.parent,m.valueDeclaration&&(h.valueDeclaration=m.valueDeclaration),h.type=g,h.target=m,o.set(h.escapedName,h),c.push(h),_.name.escapedText===d&&(u=!0)}else{e.Debug.assert(255===_.kind),c.length>0&&(s=is(s,A(a.symbol,o),t.symbol,0),c=[],o=e.createSymbolTable()),zr(g=Dp(_.expression))&&(l=!0),Su(g)?s=is(s,g,t.symbol,0):i=i?Jo([i,g]):g}}if(!l){s!==ue&&(c.length>0&&(s=is(s,A(a.symbol,o),t.symbol,0)),c=sa(s)),o=e.createSymbolTable();for(var y=0,v=c;y<v.length;y++){var b=v[y];n&&!n(b)||o.set(b.escapedName,b)}}var x=249===t.parent.kind?t.parent:void 0;if(x&&x.openingElement===t&&x.children.length>0){for(var k=[],S=0,T=x.children;S<T.length;S++){var C=T[S];10===C.kind?C.containsOnlyWhiteSpaces||k.push(ee):k.push(Dp(C,r))}if(!l&&d&&""!==d){u&&cn(a,e.Diagnostics._0_are_specified_twice_The_attribute_named_0_will_be_overwritten,e.unescapeLeadingUnderscores(d));var E=ln(33554436,d);E.type=1===k.length?k[0]:No(jo(k,!1)),o.set(d,E)}}if(l)return H;var D=A(a.symbol,o);return i&&o.size?Jo([i,D]):i||D;function A(t,n){var r=dr(t,n,e.emptyArray,e.emptyArray,void 0,void 0);return r.flags|=37748736,r.objectFlags|=128,r}}function Du(e){var t=Jt.get(e);return void 0===t&&Jt.set(e,t=To(qt,e)||W),t}function Au(t){var n=hn(t);if(!n.resolvedSymbol){var r=Du(Vt);if(r!==W){if(!e.isIdentifier(t.tagName))throw e.Debug.fail();var i=va(r,t.tagName.escapedText);return i?(n.jsxFlags|=1,n.resolvedSymbol=i):Ca(r,0)?(n.jsxFlags|=2,n.resolvedSymbol=r.symbol):(cn(t,e.Diagnostics.Property_0_does_not_exist_on_type_1,e.idText(t.tagName),"JSX."+Vt),n.resolvedSymbol=q)}return N&&cn(t,e.Diagnostics.JSX_element_implicitly_has_type_any_because_no_interface_JSX_0_exists,e.unescapeLeadingUnderscores(Vt)),n.resolvedSymbol=q}return n.resolvedSymbol}function wu(t){var n=po(qt,1920,void 0),r=n&&bn(n.exports,t,793064),i=r&&Pi(r),a=i&&sa(i);if(a){if(0===a.length)return"";if(1===a.length)return a[0].escapedName;a.length>1&&cn(r.declarations[0],e.Diagnostics.The_global_type_JSX_0_may_not_have_more_than_one_property,e.unescapeLeadingUnderscores(t))}}function Nu(){return Kt||(Kt=!0,Pt=wu(Gt)),Pt}function Iu(){return zt||(zt=!0,Ot=wu(Wt)),Ot}function Pu(e){if(e){if(131072&e.flags){for(var t=[],n=0,r=e.types;n<r.length;n++){var i=r[n];t.push(ma(i))}return Jo(t)}return ma(e)}}function Ou(t,n,r,i){if(void 0===r&&(r=Dp(t.tagName)),65536&r.flags)return jo(r.types.map((function(e){return Ou(t,n,e,i)})),!0);if(2&r.flags)return H;if(32&r.flags){var a=Du(Vt);if(a!==W){var o=r.value,s=va(a,e.escapeLeadingUnderscores(o));if(s)return ci(s);var c=Ca(a,0);if(c)return c;cn(t,e.Diagnostics.Property_0_does_not_exist_on_type_1,o,"JSX."+Vt)}return H}var l=function(t,n){if(e.Debug.assert(!(65536&n.flags)),zr(n))return H;var r=xa(n,1);if(0===r.length&&0===(r=xa(n,0)).length)return cn(t.tagName,e.Diagnostics.JSX_element_type_0_does_not_have_any_construct_or_call_signatures,e.getTextOfNode(t.tagName)),W;for(var i=[],a=0,o=r;a<o.length;a++){var s=o[a];if(s.typeParameters){var c=e.isInJavaScriptFile(t),l=Pa(void 0,s.typeParameters,0,c);i.push(Ua(s,l,c))}else i.push(s)}return jo(e.map(i,Ra),!0)}(t,r),u=n?function(t,n,r,i){if(e.Debug.assert(!(65536&n.flags)),!i||!Os(r,i)){var a=Uu();if(a){var o=[];Ad(t,n,o);for(var s=void 0,c=void 0,l=0,u=o;l<u.length;l++){var d=u[l],p=Ra(d),f=p&&(0===d.parameters.length?ue:ci(d.parameters[0]));if(f=Pu(f),p&&Os(p,a)){for(var _=!0,m=0,g=t.attributes.properties;m<g.length;m++){var h=g[m];if(e.isJsxAttribute(h)&&Tu(h.name.escapedText)&&!va(f,h.name.escapedText)){_=!1;break}}_&&(s=Gi(s,f)),c=Gi(c,f)}}s||(s=c);var y=Du(Yt);return y!==W&&(s=Gi(y,s)),s}}}(t,r,l,i):function(t,n,r,i){if(e.Debug.assert(!(65536&n.flags)),!i||!Os(r,i)){var a=Uu();if(a){var o=Ad(t,n,void 0);if(o!==tt){var s=o&&Ra(o),c=s&&(0===o.parameters.length?ue:ci(o.parameters[0]));if(c=Pu(c),s&&Os(s,a)){var l=Du(Yt);return l!==W&&(c=Gi(l,c)),c}}}}}(t,r,l,i);if(u)return u;if(i&&qs(l,i,en,t,e.Diagnostics.JSX_element_type_0_is_not_a_constructor_function_for_JSX_elements),zr(l))return l;var d=Nu();if(void 0===d)return H;if(""===d)return l;var p=Kr(l,d);if(p){if(zr(p)||p===W)return p;var f=p,_=Du(Xt);if(_!==W){var m=mi(_.symbol);m?1===m.length&&(f=Gi(Ya(_,[l]),f)):f=Gi(p,_)}var g=Du(Yt);return g!==W&&(f=Gi(g,f)),f}return ue}function Fu(t){e.Debug.assert(Cu(t.tagName));var n=hn(t);if(!n.resolvedJsxElementAttributesType){var r=Au(t);return 1&n.jsxFlags?n.resolvedJsxElementAttributesType=ci(r):2&n.jsxFlags?n.resolvedJsxElementAttributesType=Va(r,0).type:n.resolvedJsxElementAttributesType=W}return n.resolvedJsxElementAttributesType}function Lu(e,t){var n=hn(e),r=t?"resolvedJsxElementAllAttributesType":"resolvedJsxElementAttributesType";if(!n[r]){var i=function(){He||(He=To(qt,Ht));return He}();return n[r]=Ou(e,t,void 0,i)}return n[r]}function Ru(e){return Cu(e.tagName)?Fu(e):Lu(e,!1)}function Mu(){return Ge||(Ge=To(qt,Qt)),Ge}function Uu(){if(!We){var e=Mu();e&&(We=jo([e,X]))}return We}function Bu(t){var n;!function(t){for(var n=e.createUnderscoreEscapedMap(),r=0,i=t.attributes.properties;r<i.length;r++){var a=i[r];if(255!==a.kind){var o=a,s=o.name;if(n.get(s.escapedText))return Em(s,e.Diagnostics.JSX_elements_cannot_have_multiple_attributes_with_the_same_name);n.set(s.escapedText,!0);var c=o.initializer;if(c&&256===c.kind&&!c.expression)return Em(o.initializer,e.Diagnostics.JSX_attributes_must_only_be_assigned_a_non_empty_expression)}}}(t),n=t,0===(S.jsx||0)&&cn(n,e.Diagnostics.Cannot_use_JSX_unless_the_jsx_flag_is_provided),void 0===Mu()&&N&&cn(n,e.Diagnostics.JSX_element_implicitly_has_type_any_because_the_global_type_JSX_Element_does_not_exist);var r=wt&&2===S.jsx?e.Diagnostics.Cannot_find_name_0:void 0,i=sn(),a=kn(t.tagName,i,107455,r,i,!0);a&&(a.isReferenced=!0,2097152&a.flags&&!F_(Rn(a))&&Un(a)),function(t){var n=Cu(t.tagName)?Fu(t):Lu(t,!1),r=Eu(t,(function(e){return Tu(e.escapedName)||!!va(n,e.escapedName)}));if(n===ue&&(zr(r)||r.properties.length>0))cn(t,e.Diagnostics.JSX_element_class_does_not_support_attributes_because_it_does_not_have_a_0_property,e.unescapeLeadingUnderscores(Nu()));else{if(Rs(r,n,t.attributes.properties.length>0?t.attributes:t)&&!zr(r)&&!zr(n))for(var i=0,a=t.attributes.properties;i<a.length;i++){var o=a[i];if(e.isJsxAttribute(o)&&!ju(n,o.name.escapedText,!0)){cn(o,e.Diagnostics.Property_0_does_not_exist_on_type_1,e.idText(o.name),Er(n));break}}}}(t)}function ju(e,t,n){if(32768&e.flags){var r=ia(e);if(r.stringIndexInfo||r.numberIndexInfo&&vu(t)||oa(e,t)||n&&!Tu(t))return!0}else if(196608&e.flags)for(var i=0,a=e.types;i<a.length;i++){if(ju(a[i],t,n))return!0}return!1}function $u(t){return t.valueDeclaration?e.getCombinedNodeFlags(t.valueDeclaration):0}function Ku(t){return!!(8192&t.flags||4&e.getCheckFlags(t))}function zu(t,n,r,i){var a=e.getDeclarationModifierFlagsFromSymbol(i),o=179===t.kind||226===t.kind?t.name:t.right;if(256&e.getCheckFlags(i))return cn(o,e.Diagnostics.Property_0_has_conflicting_declarations_and_is_inaccessible_in_type_1,Tr(i),Er(r)),!1;if(97===n.kind){if(T<2)if(Xs(i,(function(e){var t,n=(t=e).valueDeclaration?t.valueDeclaration.kind:149;return 151!==n&&150!==n})))return cn(o,e.Diagnostics.Only_public_and_protected_methods_of_the_base_class_are_accessible_via_the_super_keyword),!1;if(128&a)return cn(o,e.Diagnostics.Abstract_method_0_in_class_1_cannot_be_accessed_via_super_expression,Tr(i),Er(Zs(i))),!1}if(!(24&a))return!0;if(8&a)return!!h_(t,Hf(tr(i)))||(cn(o,e.Diagnostics.Property_0_is_private_and_only_accessible_within_class_1,Tr(i),Er(Zs(i))),!1);if(97===n.kind)return!0;var s=g_(t,(function(t){var n=Pi(er(t));return function(t,n){return Xs(n,(function(n){return!!(16&e.getDeclarationModifierFlagsFromSymbol(n))&&!di(t,Zs(n))}))?void 0:t}(n,i)?n:void 0}));return s?!!(32&a)||(16384&r.flags&&r.isThisType&&(r=ca(r)),!!(3&yn(ui(r))&&di(r,s))||(cn(o,e.Diagnostics.Property_0_is_protected_and_only_accessible_through_an_instance_of_class_1,Tr(i),Er(s)),!1)):(cn(o,e.Diagnostics.Property_0_is_protected_and_only_accessible_within_class_1_and_its_subclasses,Tr(i),Er(Zs(i)||r)),!1)}function Ju(e){return qu(Dp(e),e)}function qu(t,n){var r=6144&(A?gc(t):t.flags);if(r){cn(n,2048&r?4096&r?e.Diagnostics.Object_is_possibly_null_or_undefined:e.Diagnostics.Object_is_possibly_undefined:e.Diagnostics.Object_is_possibly_null);var i=xc(t);return 14336&i.flags?W:i}return t}function Vu(e){return Gu(e,e.expression,e.name)}function Hu(e){return Gu(e,e.left,e.right)}function Gu(t,n,r){var i=Ju(n);if(zr(i)||i===ce)return i;var a=ma(Dc(i));if(a===W||16384&i.flags&&zr(a))return a;var o=va(a,r.escapedText);if(!o){var s=Ta(a,0);return s&&s.type?(s.isReadonly&&(e.isAssignmentTarget(t)||e.isDeleteTarget(t))&&cn(t,e.Diagnostics.Index_signature_in_type_0_only_permits_reading,Er(a)),s.type):(r.escapedText&&!En(t)&&function(t,n){var r;if(65536&n.flags&&!(8190&n.flags))for(var i=0,a=n.types;i<a.length;i++){var o=a[i];if(!va(o,t.escapedText)){r=e.chainDiagnosticMessages(r,e.Diagnostics.Property_0_does_not_exist_on_type_1,e.declarationNameToString(t),Er(o));break}}var s=Qu(t,n);r=void 0!==s?e.chainDiagnosticMessages(r,e.Diagnostics.Property_0_does_not_exist_on_type_1_Did_you_mean_2,e.declarationNameToString(t),Er(n),s):e.chainDiagnosticMessages(r,e.Diagnostics.Property_0_does_not_exist_on_type_1,e.declarationNameToString(t),Er(n));wt.add(e.createDiagnosticForNodeFromMessageChain(t,r))}(r,16384&i.flags&&i.isThisType?a:i),W)}!function(t,n,r){var i=t.valueDeclaration;if(!i)return;!function(t){return!!e.findAncestor(t,(function(t){switch(t.kind){case 149:return!0;case 261:return!1;default:return!e.isPartOfExpression(t)&&"quit"}}))}(n)||xn(i,r)||function(e){var t=ci(e.parent);for(;;){if(!(t=Wu(t)))return!1;var n=oa(t,e.escapedName);if(n&&n.valueDeclaration)return!0}}(t)?229!==i.kind||159===n.parent.kind||e.isInAmbientContext(i)||xn(i,r)||cn(r,e.Diagnostics.Class_0_used_before_its_declaration,e.idText(r)):cn(r,e.Diagnostics.Block_scoped_variable_0_used_before_its_declaration,e.idText(r))}(o,t,r),Zu(o,t,99===n.kind),hn(t).resolvedSymbol=o,zu(t,n,a,o);var c=$l(o,t),l=e.getAssignmentTargetKind(t);if(l&&(tp(t,o)||np(t)))return cn(r,e.Diagnostics.Cannot_assign_to_0_because_it_is_a_constant_or_a_read_only_property,e.idText(r)),W;if(!(179===t.kind&&1!==l&&(98311&o.flags||8192&o.flags&&65536&c.flags)))return c;var u=Fl(t,c);return l?pc(u):u}function Wu(t){var n=Si(t);if(0!==n.length)return e.Debug.assert(1===n.length),n[0]}function Qu(t,n){var r=Xu(e.idText(t),sa(n),107455);return r&&e.symbolName(r)}function Yu(t,n,r){var i=Sn(t,n,r,void 0,n,!1,(function(t,n,r){return bn(t,n,r)||Xu(e.unescapeLeadingUnderscores(n),e.arrayFrom(t.values()),r)}));return i&&e.symbolName(i)}function Xu(t,n,r){var i=.4*t.length,a=Math.min(3,.34*t.length),o=Number.MAX_VALUE,s=void 0,c=!1;if(!(t.length>30)){t=t.toLowerCase();for(var l=0,u=n;l<u.length;l++){var d=u[l],p=e.symbolName(d);if(d.flags&r&&p&&Math.abs(p.length-t.length)<a){if((p=p.toLowerCase())===t)return d;if(c)continue;if(p.length<3||t.length<3||"eval"===p||"intl"===p||"undefined"===p||"map"===p||"nan"===p||"set"===p)continue;var f=e.levenshtein(t,p);if(f>i)continue;f<3?(c=!0,s=d):f<o&&(o=f,s=d)}}return s}}function Zu(t,n,r){if(t&&E&&106500&t.flags&&t.valueDeclaration&&e.hasModifier(t.valueDeclaration,8)&&(!n||!e.isWriteOnlyAccess(n))){if(r){var i=e.findAncestor(n,e.isFunctionLikeDeclaration);if(i&&i.symbol===t)return}1&e.getCheckFlags(t)?gn(t).target.isReferenced=!0:t.isReferenced=!0}}function ed(t,n,r,i){if(i!==W&&!zr(i)){var a=va(i,r);if(a)return zu(t,n,i,a);if(e.isInJavaScriptFile(n)&&65536&i.flags)for(var o=0,s=i.types;o<s.length;o++){if(ed(t,n,r,s[o]))return!0}return!1}return!0}function td(t){var n=t.initializer;if(227===n.kind){var r=n.declarations[0];if(r&&!e.isBindingPattern(r.name))return er(r)}else if(71===n.kind)return Jc(n)}function nd(e){return Ca(e,1)&&!Ca(e,0)}function rd(t){var n=Ju(t.expression),r=t.argumentExpression;if(!r){var i,a=e.getSourceFileOfNode(t);if(182===t.parent.kind&&t.parent.expression===t)Cm(a,i=e.skipTrivia(a.text,t.expression.end),t.end-i,e.Diagnostics.new_T_cannot_be_used_to_create_an_array_Use_new_Array_T_instead);else Cm(a,i=t.end-"]".length,t.end-i,e.Diagnostics.Expression_expected);return W}var o=function(t){var n=e.skipParentheses(t);if(71===n.kind){var r=Jc(n);if(3&r.flags)for(var i=t,a=t.parent;a;){if(215===a.kind&&i===a.statement&&td(a)===r&&nd(Ep(a.expression)))return!0;i=a,a=a.parent}}return!1}(r)?te:Dp(r);return n===W||n===ce?n:op(n)&&9!==r.kind?(cn(r,e.Diagnostics.A_const_enum_member_can_only_be_accessed_using_a_string_literal),W):$p(Xo(n,o,t),t)}function id(t,n,r){if(n===W)return!1;if(!e.isWellKnownSymbolSyntactically(t))return!1;if(0==(512&n.flags))return r&&cn(t,e.Diagnostics.A_computed_property_name_of_the_form_0_must_be_of_type_symbol,e.getTextOfNode(t)),!1;var i=t.expression,a=Jc(i);if(!a)return!1;var o,s=(o=!0,Fe||(Fe=uo("Symbol",o)));return!!s&&(a===s||(r&&cn(i,e.Diagnostics.Symbol_reference_does_not_refer_to_the_global_Symbol_constructor_object),!1))}function ad(t){return e.isCallOrNewExpression(t)}function od(t){return ad(t)&&e.forEach(t.typeArguments,c_),183===t.kind?Dp(t.template):147!==t.kind&&e.forEach(t.arguments,(function(e){Dp(e)})),et}function sd(e){return od(e),tt}function cd(e){for(var t=0;t<e.length;t++){var n=e[t];if(n&&198===n.kind)return t}return-1}function ld(t,n,r,i){var a,o,s;void 0===i&&(i=!1);var c=-1;if(e.isJsxOpeningLikeElement(t))return!0;if(183===t.kind){var l=t;if(a=n.length,o=void 0,196===l.template.kind){var u=l.template,d=e.lastOrUndefined(u.templateSpans);e.Debug.assert(void 0!==d),s=e.nodeIsMissing(d.literal)||!!d.literal.isUnterminated}else{var p=l.template;e.Debug.assert(13===p.kind),s=!!p.isUnterminated}}else if(147===t.kind)o=void 0,a=hd(t,void 0,r);else{var f=t;if(!f.arguments)return e.Debug.assert(182===f.kind),0===r.minArgumentCount;a=i?n.length+1:n.length,s=f.arguments.end===f.end,o=f.typeArguments,c=cd(n)}var _=e.length(r.typeParameters),m=Ia(r.typeParameters);if(!(!o||o.length>=m&&o.length<=_))return!1;if(c>=0)return ac(r,c)||c>=r.minArgumentCount;if(!r.hasRestParameter&&a>r.parameters.length)return!1;var g=a>=r.minArgumentCount;return s||g}function ud(e){if(32768&e.flags){var t=ia(e);if(1===t.callSignatures.length&&0===t.constructSignatures.length&&0===t.properties.length&&!t.stringIndexInfo&&!t.numberIndexInfo)return t.callSignatures[0]}}function dd(t,n,r,i){var a=Pc(t,1,i);return Ic(n,t,(function(e,t){Uc(a.inferences,Ss(e,r||k),t)})),r||Uc(a.inferences,Ra(n),Ra(t),8),Ua(t,zc(a),e.isInJavaScriptFile(n.declaration))}function pd(t,n,r,i,a){for(var o=0,s=a.inferences;o<s.length;o++){var c=s[o];c.isFixed||(c.inferredType=void 0)}if(147!==t.kind){var l=lu(t);if(l){var u=Ss(l,function(e){return e&&function(e){return!!e.signature}(e)?Pc(e.signature,2|e.flags,e.compareTypes,e.inferences):e}(uu(t))),d=ud(u),p=d&&d.typeParameters?Ka(Ua(d,d.typeParameters,e.isInJavaScriptFile(t))):u,f=Ra(n);Uc(a.inferences,p,f,8)}}var _=La(n);if(_){var m=md(t),g=m?Dp(m):oe;Uc(a.inferences,g,_)}for(var h=hd(t,r,n),y=0;y<h;y++){if(void 0===(x=xd(t,r,y))||200!==x.kind){var v=jd(n,y),b=bd(t,y);if(void 0===b)b=hp(x,v,i&&void 0!==i[y]?k:a);Uc(a.inferences,b,v)}}if(i)for(y=0;y<h;y++)if(!1===i[y]){var x=r[y];v=jd(n,y);Uc(a.inferences,hp(x,v,a),v)}return zc(a)}function fd(t,n,r,i){for(var a,o=e.isInJavaScriptFile(t.declaration),s=t.typeParameters,c=Pa(e.map(n,ps),s,Ia(s),o),l=0;l<n.length;l++){e.Debug.assert(void 0!==s[l],"Should not call checkTypeArguments with too many type arguments");var u=ca(s[l]);if(u){var d=r&&i&&e.chainDiagnosticMessages(void 0,e.Diagnostics.Type_0_does_not_satisfy_the_constraint_1),p=i||e.Diagnostics.Type_0_does_not_satisfy_the_constraint_1;a||(a=gs(s,c));var f=c[l];if(!Rs(f,ji(Ss(u,a),f),r?n[l]:void 0,p,d))return!1}}return c}function _d(t,n,r,i,a,o){if(e.isJsxOpeningLikeElement(t))return function(t,n,r){if(t.attributes.end===t.end)return!0;for(var i=e.Diagnostics.Argument_of_type_0_is_not_assignable_to_parameter_of_type_1,a=jd(n,0),o=hp(t.attributes,a,void 0),s=0,c=sa(o);s<c.length;s++){var l=c[s];if(!va(a,l.escapedName)&&Tu(l.escapedName))return!1}return qs(o,a,r,void 0,i)}(t,r,i);var s=La(r);if(s&&s!==oe&&182!==t.kind){var c=md(t),l=c?Dp(c):oe,u=o?c||t:void 0,d=e.Diagnostics.The_this_context_of_type_0_is_not_assignable_to_method_s_this_of_type_1;if(!qs(l,La(r),i,u,d))return!1}for(var p=e.Diagnostics.Argument_of_type_0_is_not_assignable_to_parameter_of_type_1,f=hd(t,n,r),_=0;_<f;_++){var m=xd(t,n,_);if(void 0===m||200!==m.kind){var g=jd(r,_),h=bd(t,_)||hp(m,g,a&&a[_]?k:void 0);if(!qs(a?Tc(h):h,g,i,u=o?kd(t,_,m):void 0,p))return!1}}return!0}function md(e){if(181===e.kind){var t=e.expression;if(179===t.kind)return t.expression;if(180===t.kind)return t.expression}}function gd(t){if(183===t.kind){var n=t.template,r=[void 0];return 196===n.kind&&e.forEach(n.templateSpans,(function(e){r.push(e.expression)})),r}return 147===t.kind?void 0:e.isJsxOpeningLikeElement(t)?t.attributes.properties.length>0?[t.attributes]:e.emptyArray:t.arguments||e.emptyArray}function hd(e,t,n){if(147!==e.kind)return t.length;switch(e.parent.kind){case 229:case 199:return 1;case 149:return 2;case 151:case 153:case 154:return 0===T?2:n.parameters.length>=3?3:2;case 146:return 3}}function yd(t){if(229===t.kind)return ci(er(t));if(146===t.kind&&152===(t=t.parent).kind)return ci(er(t));return 149===t.kind||151===t.kind||153===t.kind||154===t.kind?function(t){var n=er(t.parent);return e.hasModifier(t,32)?ci(n):Pi(n)}(t):(e.Debug.fail("Unsupported decorator target."),W)}function vd(t,n){return 0===n?yd(t.parent):1===n?function(t){if(229===t.kind)return e.Debug.fail("Class decorators should not have a second synthetic argument."),W;if(146===t.kind&&152===(t=t.parent).kind)return H;if(149===t.kind||151===t.kind||153===t.kind||154===t.kind){var n=t;switch(n.name.kind){case 71:return us(e.idText(n.name));case 8:case 9:return us(n.name.text);case 144:var r=bu(n.name);return ap(r,512)?r:ee;default:return e.Debug.fail("Unsupported property name."),W}}return e.Debug.fail("Unsupported decorator target."),W}(t.parent):2===n?function(t){return 229===t.kind?(e.Debug.fail("Class decorators should not have a third synthetic argument."),W):146===t.kind?te:149===t.kind?(e.Debug.fail("Property decorators should not have a third synthetic argument."),W):151===t.kind||153===t.kind||154===t.kind?Eo(x_(t)):(e.Debug.fail("Unsupported decorator target."),W)}(t.parent):(e.Debug.fail("Decorators should not have a fourth synthetic argument."),W)}function bd(e,t){return 147===e.kind?vd(e,t):0===t&&183===e.kind?Ve||(Ve=fo("TemplateStringsArray",0,!0))||ue:void 0}function xd(e,t,n){if(147!==e.kind&&(0!==n||183!==e.kind))return t[n]}function kd(e,t,n){return 147===e.kind?e.expression:0===t&&183===e.kind?e.template:n}function Sd(t,n,i,a){var o,s=183===t.kind,c=147===t.kind,l=e.isJsxOpeningLikeElement(t);s||c||l||(o=t.typeArguments,97!==t.expression.kind&&e.forEach(o,c_));var u=i||[];if(function(t,n){var r,i,a,o,s=0,c=-1;e.Debug.assert(!n.length);for(var l=0,u=t;l<u.length;l++){var d=u[l],p=d.declaration&&er(d.declaration),f=d.declaration&&d.declaration.parent;i&&p!==i?(a=s=n.length,r=f):r&&f===r?a++:(r=f,a=s),i=p,d.hasLiteralTypes?(o=++c,s++):o=a,n.splice(o,0,d)}}(n,u),!u.length)return wt.add(e.createDiagnosticForNode(t,e.Diagnostics.Call_target_does_not_contain_any_signatures)),sd(t);var d,p,f,_,m=gd(t),g=1===u.length&&!u[0].typeParameters,h=0;if(!c&&!g)for(var y=s?1:0;y<m.length;y++)Cs(m[y])&&(d||(d=new Array(m.length)),d[y]=!0,h++);var v=i&&181===t.kind&&t.arguments.hasTrailingComma;if(u.length>1&&(_=U(u,Zt,v)),_||(_=U(u,en,v)),_)return _;if(p){if(l)return p;_d(t,m,p,en,void 0,!0)}else if(f)fd(f,t.typeArguments,!0,a);else if(o&&e.every(n,(function(t){return e.length(t.typeParameters)!==o.length}))){for(var b=Number.POSITIVE_INFINITY,x=Number.NEGATIVE_INFINITY,k=0,S=n;k<S.length;k++){var T=S[k];b=Math.min(b,Ia(T.typeParameters)),x=Math.max(x,e.length(T.typeParameters))}var C=b<x?b+"-"+x:b;wt.add(e.createDiagnosticForNode(t,e.Diagnostics.Expected_0_type_arguments_but_got_1,C,o.length))}else if(m){b=Number.POSITIVE_INFINITY,x=Number.NEGATIVE_INFINITY;for(var E=0,D=n;E<D.length;E++){T=D[E];b=Math.min(b,T.minArgumentCount),x=Math.max(x,T.parameters.length)}var A=e.some(n,(function(e){return e.hasRestParameter})),w=cd(m)>-1,N=(C=A?b:b<x?b+"-"+x:b,m.length-(w?1:0)),I=A&&w?e.Diagnostics.Expected_at_least_0_arguments_but_got_a_minimum_of_1:A?e.Diagnostics.Expected_at_least_0_arguments_but_got_1:w?e.Diagnostics.Expected_0_arguments_but_got_a_minimum_of_1:e.Diagnostics.Expected_0_arguments_but_got_1;wt.add(e.createDiagnosticForNode(t,I,C,N))}else a&&wt.add(e.createDiagnosticForNode(t,a));if(!r){e.Debug.assert(u.length>0);var P=function(e,t){for(var n=-1,r=-1,i=0;i<e.length;i++){var a=e[i];if(a.hasRestParameter||a.parameters.length>=t)return i;a.parameters.length>r&&(r=a.parameters.length,n=i)}return n}(u,void 0===L?m.length:L),O=u[P],F=O.typeParameters;if(F&&ad(t)&&t.typeArguments){for(var R=t.typeArguments.map(x_);R.length>F.length;)R.pop();for(;R.length<F.length;)R.push(Kc(e.isInJavaScriptFile(t)));var M=Ba(O,R);return u[P]=M,M}return O}return sd(t);function U(n,r,i){if(void 0===i&&(i=!1),p=void 0,f=void 0,g){var a=n[0];if(!ld(t,m,a,i))return;return _d(t,m,a,r,d,!1)?a:void(p=a)}for(var s=0;s<n.length;s++){var c=n[s];if(ld(t,m,c,i)){a=void 0;for(var l=c.typeParameters?Pc(c,e.isInJavaScriptFile(t)?4:0):void 0;;){if((a=c).typeParameters){var u=void 0;if(o){var _=fd(a,o,!1);if(!_){f=c;break}u=_}else u=pd(t,a,m,d,l);a=Ua(a,u,e.isInJavaScriptFile(a.declaration))}if(!_d(t,m,a,r,d,!1)){p=a;break}if(0===h)return n[s]=a,a;--h>0?d[e.indexOf(d,!0)]=!1:d=void 0}}}}}function Td(e,t,n,r){return!!zr(e)||(!!(zr(t)&&16384&e.flags)||!n&&!r&&(!(65536&e.flags)&&Os(e,Se)))}function Cd(t,n){if(t.arguments&&T<1){var r=cd(t.arguments);r>=0&&cn(t.arguments[r],e.Diagnostics.Spread_operator_in_new_expressions_is_only_available_when_targeting_ECMAScript_5_and_higher)}var i=Ju(t.expression);if(i===ce)return rt;if((i=ma(i))===W)return sd(t);if(zr(i))return t.typeArguments&&cn(t,e.Diagnostics.Untyped_function_calls_may_not_accept_type_arguments),od(t);var a=xa(i,1);if(a.length){if(!function(t,n){if(!n||!n.declaration)return!0;var r=n.declaration,i=e.getSelectedModifierFlags(r,24);if(!i)return!0;var a=Hf(r.parent.symbol),o=Pi(r.parent.symbol);if(!h_(t,a)){var s=e.getContainingClass(t);if(s)for(var c=Si(x_(s));c.length;){var l=c[0];if(16&i&&l.symbol===r.parent.symbol)return!0;c=Si(l)}return 8&i&&cn(t,e.Diagnostics.Constructor_of_class_0_is_private_and_only_accessible_within_the_class_declaration,Er(o)),16&i&&cn(t,e.Diagnostics.Constructor_of_class_0_is_protected_and_only_accessible_within_the_class_declaration,Er(o)),!1}return!0}(t,a[0]))return sd(t);var o=i.symbol&&Hf(i.symbol);return o&&e.hasModifier(o,128)?(cn(t,e.Diagnostics.Cannot_create_an_instance_of_the_abstract_class_0,e.declarationNameToString(e.getNameOfDeclaration(o))),sd(t)):Sd(t,a,n)}var s=xa(i,0);if(s.length){var c=Sd(t,s,n);return Pd(c.declaration)||Ra(c)===oe||cn(t,e.Diagnostics.Only_a_void_function_can_be_called_with_the_new_keyword),La(c)===oe&&cn(t,e.Diagnostics.A_function_that_is_called_with_the_new_keyword_cannot_have_a_this_type_that_is_void),c}return cn(t,e.Diagnostics.Cannot_use_new_with_an_expression_whose_type_lacks_a_call_or_construct_signature),sd(t)}function Ed(t){switch(t.parent.kind){case 229:case 199:return e.Diagnostics.Unable_to_resolve_signature_of_class_decorator_when_called_as_an_expression;case 146:return e.Diagnostics.Unable_to_resolve_signature_of_parameter_decorator_when_called_as_an_expression;case 149:return e.Diagnostics.Unable_to_resolve_signature_of_property_decorator_when_called_as_an_expression;case 151:case 153:case 154:return e.Diagnostics.Unable_to_resolve_signature_of_method_decorator_when_called_as_an_expression}}function Dd(t,n){var r=Dp(t.expression),i=ma(r);if(i===W)return sd(t);var a,o,s=xa(i,0),c=xa(i,1);if(Td(r,i,s.length,c.length))return od(t);if(a=t,(o=s).length&&e.every(o,(function(e){return 0===e.minArgumentCount&&!e.hasRestParameter&&e.parameters.length<hd(a,void 0,e)}))){var l=e.getTextOfNode(t.expression,!1);return cn(t,e.Diagnostics._0_accepts_too_few_arguments_to_be_used_as_a_decorator_here_Did_you_mean_to_call_it_first_and_write_0,l),sd(t)}var u=Ed(t);if(!s.length){var d=void 0;return d=e.chainDiagnosticMessages(d,e.Diagnostics.Cannot_invoke_an_expression_whose_type_lacks_a_call_signature_Type_0_has_no_compatible_call_signatures,Er(i)),d=e.chainDiagnosticMessages(d,u),wt.add(e.createDiagnosticForNodeFromMessageChain(t,d)),sd(t)}return Sd(t,s,n,u)}function Ad(t,n,r){return e.Debug.assert(!(65536&n.flags)),wd(t,n,r)}function wd(e,t,n){if(65536&t.flags){for(var r=void 0,i=0,a=t.types;i<a.length;i++){var o=a[i];r=r||wd(e,o,n)}return r}var s=t&&xa(t,0);if(s&&s.length>0)return Sd(e,s,n)}function Nd(t,n){switch(t.kind){case 181:return function(t,n){if(97===t.expression.kind){var r=Ql(t.expression);if(r!==W){var i=e.getClassExtendsHeritageClauseElement(e.getContainingClass(t));if(i)return Sd(t,xi(r,i.typeArguments,i),n)}return od(t)}var a=Ju(t.expression);if(a===ce)return rt;var o=ma(a);if(o===W)return sd(t);var s=xa(o,0),c=xa(o,1);return Td(a,o,s.length,c.length)?(a!==W&&t.typeArguments&&cn(t,e.Diagnostics.Untyped_function_calls_may_not_accept_type_arguments),od(t)):s.length?Sd(t,s,n):(c.length?cn(t,e.Diagnostics.Value_of_type_0_is_not_callable_Did_you_mean_to_include_new,Er(a)):cn(t,e.Diagnostics.Cannot_invoke_an_expression_whose_type_lacks_a_call_signature_Type_0_has_no_compatible_call_signatures,Er(o)),sd(t))}(t,n);case 182:return Cd(t,n);case 183:return function(t,n){var r=Dp(t.tag),i=ma(r);if(i===W)return sd(t);var a=xa(i,0),o=xa(i,1);return Td(r,i,a.length,o.length)?od(t):a.length?Sd(t,a,n):(cn(t,e.Diagnostics.Cannot_invoke_an_expression_whose_type_lacks_a_call_signature_Type_0_has_no_compatible_call_signatures,Er(i)),sd(t))}(t,n);case 147:return Dd(t,n);case 251:case 250:return wd(t,Dp(t.tagName),n)||tt}e.Debug.assertNever(t,"Branch in 'resolveSignature' should be unreachable.")}function Id(e,t){var n=hn(e),r=n.resolvedSignature;if(r&&r!==nt&&!t)return r;n.resolvedSignature=nt;var i=Nd(e,t);return n.resolvedSignature=st===ct?i:r,i}function Pd(t){if(t&&e.isInJavaScriptFile(t)){if(e.getJSDocClassTag(t))return!0;var n=e.isFunctionDeclaration(t)||e.isFunctionExpression(t)?er(t):e.isVariableDeclaration(t)&&t.initializer&&e.isFunctionExpression(t.initializer)?er(t.initializer):void 0;return n&&void 0!==n.members}return!1}function Od(t){var n=gn(t);return n.inferredClassType||(n.inferredClassType=dr(t,t.members||x,e.emptyArray,e.emptyArray,void 0,void 0)),n.inferredClassType}function Fd(e){return e.symbol&&16&yn(e)&&gn(e.symbol).inferredClassType===e}function Ld(t){sm(t,t.typeArguments)||cm(t.arguments);var n=Id(t);if(97===t.expression.kind)return oe;if(182===t.kind){var r=n.declaration;if(r&&152!==r.kind&&156!==r.kind&&161!==r.kind&&!e.isJSDocConstructSignature(r)){var i=Dp(t.expression).symbol;i||71!==t.expression.kind||(i=Jc(t.expression));var a=i&&function(t){if(e.isDeclarationOfFunctionOrClassExpression(t)&&(t=er(t.valueDeclaration.initializer)),Pd(t.valueDeclaration))return Od(t);if(3&t.flags){var n=ci(t);if(n.symbol&&!Fd(n)&&Pd(n.symbol.valueDeclaration))return Od(n.symbol)}}(i);return a||(N&&cn(t,e.Diagnostics.new_expression_whose_target_lacks_a_construct_signature_implicitly_has_an_any_type),H)}}return e.isInJavaScriptFile(t)&&function(t){if(!e.isRequireCall(t,!0))return!1;if(!e.isIdentifier(t.expression))throw e.Debug.fail();var n=kn(t.expression,t.expression.escapedText,107455,void 0,void 0,!0);if(!n)return!0;if(2097152&n.flags)return!1;var r=16&n.flags?228:3&n.flags?226:0;if(0!==r){var i=e.getDeclarationOfKind(n,r);return e.isInAmbientContext(i)}return!1}(t)?function(e){var t=Kn(e,e);if(t){var n=qn(t);if(n)return ci(n)}return H}(t.arguments[0]):Ra(n)}function Rd(t){if(cm(t.arguments)||function(t){if(C===e.ModuleKind.ES2015)return Em(t,e.Diagnostics.Dynamic_import_cannot_be_used_when_targeting_ECMAScript_2015_modules);if(t.typeArguments)return Em(t,e.Diagnostics.Dynamic_import_cannot_have_type_arguments);var n=t.arguments;if(1!==n.length)return Em(t,e.Diagnostics.Dynamic_import_must_have_one_specifier_as_an_argument);if(e.isSpreadElement(n[0]))Em(n[0],e.Diagnostics.Specifier_of_dynamic_import_cannot_be_spread_element)}(t),0===t.arguments.length)return qd(t,H);for(var n=t.arguments[0],r=yp(n),i=1;i<t.arguments.length;++i)yp(t.arguments[i]);(2048&r.flags||4096&r.flags||!Os(r,ee))&&cn(n,e.Diagnostics.Dynamic_import_s_specifier_must_be_of_type_string_but_here_has_type_0,Er(r));var a=Kn(t,n);if(a){var o=Vn(a,n,!0);if(o)return qd(t,function(t,n){if(D&&t&&t!==W){var r=t;if(!r.syntheticType)if(va(t,"default"))r.syntheticType=t;else{var i=e.createSymbolTable(),a=ln(2097152,"default");a.target=Ln(n),i.set("default",a);var o=ln(2048,"__type"),s=dr(o,i,e.emptyArray,e.emptyArray,void 0,void 0);o.type=s,r.syntheticType=Jo([t,s])}return r.syntheticType}return t}(ci(o),o))}return qd(t,H)}function Md(t,n,i,a){var o=Tc(pc(Dp(i,a)));c_(n);var s=ps(n);r&&s!==W&&(Ls(s,Dc(o))||Ms(o,s,t,e.Diagnostics.Type_0_cannot_be_converted_to_type_1));return s}function Ud(t){!function(t){if(94===t.keywordToken&&"target"!==t.name.escapedText)Em(t.name,e.Diagnostics._0_is_not_a_valid_meta_property_for_keyword_1_Did_you_mean_2,t.name.escapedText,e.tokenToString(t.keywordToken),"target")}(t);var n=e.getNewTargetContainer(t);return n?152===n.kind?ci(er(n.parent)):ci(er(n)):(cn(t,e.Diagnostics.Meta_property_0_is_only_allowed_in_the_body_of_a_function_declaration_function_expression_or_constructor,"new.target"),W)}function Bd(e){var t=ci(e);if(A){var n=e.valueDeclaration;if(n&&n.initializer)return bc(t,2048)}return t}function jd(e,t){return e.hasRestParameter?t<e.parameters.length-1?Bd(e.parameters[t]):Ma(e):t<e.parameters.length?Bd(e.parameters[t]):H}function $d(e){return e.parameters.length>0?jd(e,0):se}function Kd(t){for(var n=0,r=t.elements;n<r.length;n++){var i=r[n];e.isOmittedExpression(i)||(71===i.name.kind?gn(er(i)).type=Hr(i):Kd(i.name))}}function zd(e,t){var n=gn(e);if(!n.type){n.type=t;var r=e.valueDeclaration;71!==r.name.kind&&(n.type===ue&&(n.type=Zr(r.name)),Kd(r.name))}}function Jd(e){var t=mo(!0);return t!==fe?Ya(t,[e=Wp(e)||ue]):ue}function qd(t,n){var r=Jd(n);return r===ue?(cn(t,e.isImportCall(t)?e.Diagnostics.A_dynamic_import_call_returns_a_Promise_Make_sure_you_have_a_declaration_for_Promise_or_include_ES2015_in_your_lib_option:e.Diagnostics.An_async_function_or_method_must_return_a_Promise_Make_sure_you_have_a_declaration_for_Promise_or_include_ES2015_in_your_lib_option),W):(go(!0)||cn(t,e.isImportCall(t)?e.Diagnostics.A_dynamic_import_call_in_ES5_SlashES3_requires_the_Promise_constructor_Make_sure_you_have_a_declaration_for_the_Promise_constructor_or_include_ES2015_in_your_lib_option:e.Diagnostics.An_async_function_or_method_in_ES5_SlashES3_requires_the_Promise_constructor_Make_sure_you_have_a_declaration_for_the_Promise_constructor_or_include_ES2015_in_your_lib_option),r)}function Vd(t,n){var r=fu(t);if(!t.body)return W;var i,a=e.getFunctionFlags(t);if(207!==t.body.kind)i=yp(t.body,n),2&a&&(i=Gp(i,t,e.Diagnostics.The_return_type_of_an_async_function_must_either_be_a_valid_promise_or_must_not_contain_a_callable_then_member));else{var o=void 0;if(1&a){if(!(o=e.concatenate(function(t,n){var r=[],i=e.getFunctionFlags(t);return e.forEachYieldExpression(t.body,(function(t){var a=t.expression;if(a){var o=yp(a,n);t.asteriskToken&&(o=If(o,t.expression,!1,0!=(2&i))),2&i&&(o=Gp(o,a,t.asteriskToken?e.Diagnostics.Type_of_iterated_elements_of_a_yield_Asterisk_operand_must_either_be_a_valid_promise_or_must_not_contain_a_callable_then_member:e.Diagnostics.Type_of_yield_operand_in_an_async_generator_must_either_be_a_valid_promise_or_must_not_contain_a_callable_then_member)),e.pushIfUnique(r,o)}})),r}(t,n),Wd(t,n)))||0===o.length){var s=2&a?Do(H):wo(H);return N&&cn(t.asteriskToken,e.Diagnostics.Generator_implicitly_has_type_0_because_it_does_not_yield_any_values_Consider_supplying_a_return_type,Er(s)),s}}else{if(!(o=Wd(t,n)))return 2&a?qd(t,se):se;if(0===o.length)return 2&a?qd(t,oe):oe}i=jo(o,!0),1&a&&(i=2&a?Do(i):wo(i))}r||Nc(t,i),!uc(i)||r&&xp(r===Oa(t)?i:Ra(r))||(i=fc(i));var c=Dc(i);return 2==(3&a)?qd(t,c):c}function Hd(t){if(!t.possiblyExhaustive)return!1;var n=Ep(t.expression);if(!dc(n))return!1;var r,i,a=gl(t);return!!a.length&&(r=bl(n,ls),i=a,65536&r.flags?!e.forEach(r.types,(function(t){return!e.contains(i,t)})):e.contains(i,r))}function Gd(t){if(!(128&t.flags))return!1;var n=e.lastOrUndefined(t.body.statements);return!n||221!==n.kind||!Hd(n)}function Wd(t,n){var r=e.getFunctionFlags(t),i=[],a=Gd(t),o=!1;if(e.forEachReturnStatement(t.body,(function(s){var c=s.expression;if(c){var l=yp(c,n);2&r&&(l=Gp(l,t,e.Diagnostics.The_return_type_of_an_async_function_must_either_be_a_valid_promise_or_must_not_contain_a_callable_then_member)),8192&l.flags&&(o=!0),e.pushIfUnique(i,l)}else a=!0})),0!==i.length||a||!o&&186!==t.kind&&187!==t.kind)return A&&i.length&&a&&e.pushIfUnique(i,Q),i}function Qd(t,n){if(r&&(!n||!ip(n,1025))&&!e.nodeIsMissing(t.body)&&207===t.body.kind&&Gd(t)){var i=256&t.flags;if(n&&8192&n.flags)cn(e.getEffectiveReturnTypeNode(t),e.Diagnostics.A_function_returning_never_cannot_have_a_reachable_end_point);else if(n&&!i)cn(e.getEffectiveReturnTypeNode(t),e.Diagnostics.A_function_whose_declared_type_is_neither_void_nor_any_must_return_a_value);else if(n&&A&&!Os(Q,n))cn(e.getEffectiveReturnTypeNode(t),e.Diagnostics.Function_lacks_ending_return_statement_and_return_type_does_not_include_undefined);else if(S.noImplicitReturns){if(!n){if(!i)return;if(Uf(t,Ra(Oa(t))))return}cn(e.getEffectiveReturnTypeNode(t)||t,e.Diagnostics.Not_all_code_paths_return_a_value)}}}function Yd(t,n){if(e.Debug.assert(151!==t.kind||e.isObjectLiteralMethod(t)),1===n&&Cs(t))return l_(t),_e;om(t)||186!==t.kind||pm(t);var i=hn(t),a=ci(t.symbol);if(!(1024&i.flags)){var o=mu(t);if(!(1024&i.flags)){if(i.flags|=1024,o){var s=xa(a,0)[0];if(Cs(t)){var c=uu(t);2===n&&function(t,n,r){for(var i=t.parameters.length-(t.hasRestParameter?1:0),a=0;a<i;a++){var o=t.parameters[a].valueDeclaration;if(o.type){var s=e.getEffectiveTypeAnnotationNode(o);s&&Uc(r.inferences,ps(s),jd(n,a))}}}(s,o,c),function(t,n){t.typeParameters=n.typeParameters,n.thisParameter&&(!(a=t.thisParameter)||a.valueDeclaration&&!a.valueDeclaration.type)&&(a||(t.thisParameter=Sc(n.thisParameter,void 0)),zd(t.thisParameter,ci(n.thisParameter)));for(var r=t.parameters.length-(t.hasRestParameter?1:0),i=0;i<r;i++){var a=t.parameters[i];e.getEffectiveTypeAnnotationNode(a.valueDeclaration)||zd(a,jd(n,i))}t.hasRestParameter&&ac(n,t.parameters.length-1)&&(!un(a=e.lastOrUndefined(t.parameters))&&e.getEffectiveTypeAnnotationNode(a.valueDeclaration)||zd(a,ci(e.lastOrUndefined(n.parameters))))}(s,c===k?o:vs(o,c))}if(!e.getEffectiveReturnTypeNode(t)&&!s.resolvedReturnType){var l=Vd(t,n);s.resolvedReturnType||(s.resolvedReturnType=l)}}Pp(t),l_(t)}}return r&&151!==t.kind&&(vf(t,t.name),mf(t,t.name),gf(t,t.name)),a}function Xd(t){e.Debug.assert(151!==t.kind||e.isObjectLiteralMethod(t));var n=e.getFunctionFlags(t),r=e.getEffectiveReturnTypeNode(t),i=r&&(2==(3&n)?Qp(t):ps(r));if(0==(1&n)&&Qd(t,i),t.body){if(r||Ra(Oa(t)),207===t.body.kind)c_(t.body);else{var a=Dp(t.body);if(i)if(2==(3&n))Rs(Gp(a,t.body,e.Diagnostics.The_return_type_of_an_async_function_must_either_be_a_valid_promise_or_must_not_contain_a_callable_then_member),i,t.body);else Rs(a,i,t.body)}of(t)}}function Zd(e,t,n){return!!ap(t,84)||(cn(e,n),!1)}function ep(t){return!!(8&e.getCheckFlags(t)||4&t.flags&&64&e.getDeclarationModifierFlagsFromSymbol(t)||3&t.flags&&2&$u(t)||98304&t.flags&&!(65536&t.flags)||8&t.flags)}function tp(t,n){if(ep(n)){if(4&n.flags&&(179===t.kind||180===t.kind)&&99===t.expression.kind){var r=e.getContainingFunction(t);return!r||152!==r.kind||!(r.parent===n.valueDeclaration.parent||r===n.valueDeclaration.parent)}return!0}return!1}function np(t){if(179===t.kind||180===t.kind){var n=e.skipParentheses(t.expression);if(71===n.kind){var r=hn(n).resolvedSymbol;if(2097152&r.flags){var i=Nn(r);return i&&240===i.kind}}}return!1}function rp(t,n){var r=e.skipOuterExpressions(t,3);return 71===r.kind||179===r.kind||180===r.kind||(cn(t,n),!1)}function ip(e,t){if(e.flags&t)return!0;if(196608&e.flags)for(var n=0,r=e.types;n<r.length;n++){if(ip(r[n],t))return!0}return!1}function ap(e,t,n){return!!(e.flags&t)||!(n&&7169&e.flags)&&(84&t&&Os(e,te)||262178&t&&Os(e,ee)||136&t&&Os(e,ie)||1024&t&&Os(e,oe)||8192&t&&Os(e,se)||4096&t&&Os(e,X)||2048&t&&Os(e,Q)||512&t&&Os(e,ae)||16777216&t&&Os(e,le))}function op(e){return 16&yn(e)&&e.symbol&&sp(e.symbol)}function sp(e){return 0!=(128&e.flags)}function cp(t,n,r){if(261===n.kind||262===n.kind){var i=n.name;if(144===i.kind&&bu(i),qr(i))return;var a=e.getTextOfPropertyName(i);if(c=zr(t)?t:Kr(t,a)||vu(a)&&Ca(t,1)||Ca(t,0))return 262===n.kind?up(n,c):up(n.initializer,c);cn(i,e.Diagnostics.Type_0_has_no_property_1_and_no_string_index_signature,Er(t),e.declarationNameToString(i))}else{if(263===n.kind){T<5&&Z_(n,4);var o=[];if(r)for(var s=0;s<r.length-1;s++)o.push(r[s].name);var c=Vr(t,o,t.symbol);return up(n.expression,c)}cn(n,e.Diagnostics.Property_assignment_expected)}}function lp(t,n,r,i,a){var o=t.elements,s=o[r];if(200!==s.kind)if(198!==s.kind){var c=""+r,l=zr(n)?n:lc(n)?Kr(n,c):i;if(l)return up(s,l,a);Dp(s),_c(n)?cn(s,e.Diagnostics.Tuple_type_0_with_length_1_cannot_be_assigned_to_tuple_with_length_2,Er(n),Za(n),o.length):cn(s,e.Diagnostics.Type_0_has_no_property_1,Er(n),c)}else if(r<o.length-1)cn(s,e.Diagnostics.A_rest_element_must_be_last_in_a_destructuring_pattern);else{var u=s.expression;if(194!==u.kind||58!==u.operatorToken.kind)return up(u,No(i),a);cn(u.operatorToken,e.Diagnostics.A_rest_element_cannot_have_an_initializer)}}function up(t,n,r){var i;if(262===t.kind){var a=t;a.objectAssignmentInitializer&&(!A||2048&gc(Dp(a.objectAssignmentInitializer))||(n=nl(n,131072)),mp(a.name,a.equalsToken,a.objectAssignmentInitializer,r)),i=t.name}else i=t;return 194===i.kind&&58===i.operatorToken.kind&&(_p(i,r),i=i.left),178===i.kind?function(e,t){for(var n=e.properties,r=0,i=n;r<i.length;r++)cp(t,i[r],n);return t}(i,n):177===i.kind?function(e,t,n){T<2&&S.downlevelIteration&&Z_(e,512);for(var r=If(t,e,!1,!1)||W,i=e.elements,a=0;a<i.length;a++)lp(e,t,a,r,n);return t}(i,n,r):function(t,n,r){var i=Dp(t,r),a=263===t.parent.kind?e.Diagnostics.The_target_of_an_object_rest_assignment_must_be_a_variable_or_a_property_access:e.Diagnostics.The_left_hand_side_of_an_assignment_expression_must_be_a_variable_or_a_property_access;rp(t,a)&&Rs(n,i,t,void 0);return n}(i,n,r)}function dp(t){switch((t=e.skipParentheses(t)).kind){case 71:case 9:case 12:case 183:case 196:case 13:case 8:case 101:case 86:case 95:case 139:case 186:case 199:case 187:case 177:case 178:case 189:case 203:case 250:case 249:return!0;case 195:return dp(t.whenTrue)&&dp(t.whenFalse);case 194:return!e.isAssignmentOperator(t.operatorToken.kind)&&(dp(t.left)&&dp(t.right));case 192:case 193:switch(t.operator){case 51:case 37:case 38:case 52:return!0}return!1;case 190:case 184:case 202:default:return!1}}function pp(e,t){return 0!=(6144&t.flags)||Ls(e,t)}function fp(e,t){var n=Os(e,t),r=Os(t,e);return r&&!n?e:n&&!r?t:jo([e,t],!0)}function _p(e,t){return mp(e.left,e.operatorToken,e.right,t,e)}function mp(t,n,i,a,o){var s=n.kind;if(58===s&&(178===t.kind||177===t.kind))return up(t,Dp(i,a),a);var c,l=Dp(t,a),u=Dp(i,a);switch(s){case 39:case 40:case 61:case 62:case 41:case 63:case 42:case 64:case 38:case 60:case 45:case 65:case 46:case 66:case 47:case 67:case 49:case 69:case 50:case 70:case 48:case 68:if(l===ce||u===ce)return ce;l=qu(l,t),u=qu(u,i);var d=void 0;if(136&l.flags&&136&u.flags&&void 0!==(d=function(e){switch(e){case 49:case 69:return 54;case 50:case 70:return 35;case 48:case 68:return 53;default:return}}(n.kind)))cn(o||n,e.Diagnostics.The_0_operator_is_not_allowed_for_boolean_types_Consider_using_1_instead,e.tokenToString(n.kind),e.tokenToString(d));else{var p=Zd(t,l,e.Diagnostics.The_left_hand_side_of_an_arithmetic_operation_must_be_of_type_any_number_or_an_enum_type),f=Zd(i,u,e.Diagnostics.The_right_hand_side_of_an_arithmetic_operation_must_be_of_type_any_number_or_an_enum_type);p&&f&&y(te)}return te;case 37:case 59:if(l===ce||u===ce)return ce;ap(l,262178)||ap(u,262178)||(l=qu(l,t),u=qu(u,i));var _=void 0;return ap(l,84,!0)&&ap(u,84,!0)?_=te:ap(l,262178,!0)||ap(u,262178,!0)?_=ee:(zr(l)||zr(u))&&(_=l===W||u===W?W:H),_&&!h(s)?_:_?(59===s&&y(_),_):(v(),H);case 27:case 29:case 30:case 31:return h(s)&&(l=pc(qu(l,t)),u=pc(qu(u,i)),Ls(l,u)||Ls(u,l)||v()),ie;case 32:case 33:case 34:case 35:var m=dc(l),g=dc(u);return m&&g||(l=m?pc(l):l,u=g?pc(u):u),pp(l,u)||pp(u,l)||v(),ie;case 93:return function(t,n,r,i){return r===ce||i===ce?ce:(!zr(r)&&ap(r,8190)&&cn(t,e.Diagnostics.The_left_hand_side_of_an_instanceof_expression_must_be_of_type_any_an_object_type_or_a_type_parameter),zr(i)||xa(i,0).length||xa(i,1).length||Ps(i,Se)||cn(n,e.Diagnostics.The_right_hand_side_of_an_instanceof_expression_must_be_of_type_any_or_of_a_type_assignable_to_the_Function_interface_type),ie)}(t,i,l,u);case 92:return function(t,n,r,i){return r===ce||i===ce?ce:(r=qu(r,t),i=qu(i,n),Ls(r,ee)||ap(r,596)||cn(t,e.Diagnostics.The_left_hand_side_of_an_in_expression_must_be_of_type_any_string_number_or_symbol),ap(i,17317888)||cn(n,e.Diagnostics.The_right_hand_side_of_an_in_expression_must_be_of_type_any_an_object_type_or_a_type_parameter),ie)}(t,i,l,u);case 53:return 1048576&tl(l)?jo([yc(A?l:pc(u)),u]):l;case 54:return 2097152&tl(l)?fp(hc(l),u):l;case 58:return y(u),Tc(u);case 26:return!S.allowUnreachableCode&&dp(t)&&(71!==(c=i).kind||"eval"!==c.escapedText)&&cn(t,e.Diagnostics.Left_side_of_comma_operator_is_unused_and_has_no_side_effects),u}function h(n){var r=ip(l,512)?t:ip(u,512)?i:void 0;return!r||(cn(r,e.Diagnostics.The_0_operator_cannot_be_applied_to_type_symbol,e.tokenToString(n)),!1)}function y(n){r&&e.isAssignmentOperator(s)&&rp(t,e.Diagnostics.The_left_hand_side_of_an_assignment_expression_must_be_a_variable_or_a_property_access)&&Rs(n,l,t,void 0)}function v(){cn(o||n,e.Diagnostics.Operator_0_cannot_be_applied_to_types_1_and_2,e.tokenToString(n.kind),Er(l),Er(u))}}function gp(t){if(r&&(4096&t.flags&&!function(t){for(var n=t,r=t.parent;r;){if(e.isFunctionLike(r)&&n===r.body)return!1;if(e.isClassLike(n))return!0;n=r,r=r.parent}return!1}(t)||Tm(t,e.Diagnostics.A_yield_expression_is_only_allowed_in_a_generator_body),tu(t)&&cn(t,e.Diagnostics.yield_expressions_cannot_be_used_in_a_parameter_initializer)),t.expression){var n=e.getContainingFunction(t),i=n&&e.getFunctionFlags(n);if(t.asteriskToken&&(3==(3&i)&&T<5&&Z_(t,26624),1==(3&i)&&T<2&&S.downlevelIteration&&Z_(t,256)),1&i){var a=yp(t.expression),o=void 0,s=!!t.asteriskToken;s&&(o=If(a,t.expression,!1,0!=(2&i)));var c=e.getEffectiveReturnTypeNode(n);if(c){var l=Lf(ps(c),0!=(2&i))||H;Rs(s?2&i?Wp(o,t.expression,e.Diagnostics.Type_of_iterated_elements_of_a_yield_Asterisk_operand_must_either_be_a_valid_promise_or_must_not_contain_a_callable_then_member):o:2&i?Wp(a,t.expression,e.Diagnostics.Type_of_yield_operand_in_an_async_generator_must_either_be_a_valid_promise_or_must_not_contain_a_callable_then_member):a,l,t.expression,void 0)}}}return H}function hp(e,t,n){var r=e.contextualType,i=e.contextualMapper;e.contextualType=t,e.contextualMapper=n;var a=Dp(e,n===k?1:n?2:0);return e.contextualType=r,e.contextualMapper=i,a}function yp(e,t){var n=hn(e);if(!n.resolvedType){var r=st;st=ct,n.resolvedType=Dp(e,t),st=r}return n.resolvedType}function vp(t){return 184===(t=e.skipParentheses(t)).kind||202===t.kind}function bp(t){var n=Ep(t.initializer,!0);return 2&e.getCombinedNodeFlags(t)||64&e.getCombinedModifierFlags(t)&&!e.isParameterPropertyDeclaration(t)||vp(t.initializer)?n:fc(n)}function xp(e){if(e){if(540672&e.flags){var t=ua(e)||ue;if(30&t.flags)return!0;e=t}return ip(e,262368)}return!1}function kp(e,t,n){2===arguments.length&&(n=lu(e));var r=Dp(e,t),i=vp(e)||xp(n);return i?r:fc(r)}function Sp(e,t){return 144===e.name.kind&&bu(e.name),kp(e.initializer,t)}function Tp(e,t){return hm(e),144===e.name.kind&&bu(e.name),Cp(e,Yd(e,t),t)}function Cp(e,t,n){if(2===n){var r=ud(t);if(r&&r.typeParameters){var i=cu(e);if(i){var a=ud(xc(i));if(a&&!a.typeParameters)return Ka(dd(r,a,uu(e)))}}}return t}function Ep(t,n){if(181===t.kind&&97!==t.expression.kind&&!e.isRequireCall(t,!0)){var r=ud(Ju(t.expression));if(r&&!r.typeParameters)return Ra(r)}return n?yp(t):Dp(t)}function Dp(t,n){var i;143===t.kind?i=Hu(t):i=Cp(t,function(t,n){switch(t.kind){case 71:return Kl(t);case 99:return Gl(t);case 97:return Ql(t);case 95:return Z;case 13:case 9:return cs(us(t.text));case 8:return wm(t),cs(us(+t.text));case 101:return ne;case 86:return re;case 196:return function(t){return e.forEach(t.templateSpans,(function(e){Dp(e.expression)})),ee}(t);case 12:return we;case 177:return hu(t,n);case 178:return ku(t,n);case 179:return Vu(t);case 180:return rd(t);case 181:if(91===t.expression.kind)return Rd(t);case 182:return Ld(t);case 183:return function(e){return T<2&&Z_(e,65536),Ra(Id(e))}(t);case 185:return function(t,n){var r=e.isInJavaScriptFile(t)?e.getJSDocTypeTag(t):void 0;if(r)return Md(r,r.typeExpression.type,t.expression,n);return Dp(t.expression,n)}(t,n);case 199:return function(e){return qf(e),l_(e),ci(er(e))}(t);case 186:case 187:return Yd(t,n);case 189:return function(e){return Dp(e.expression),$t}(t);case 184:case 202:return function(e){return Md(e,e.type,e.expression)}(t);case 203:return function(e){return xc(Dp(e.expression))}(t);case 204:return Ud(t);case 188:return function(t){Dp(t.expression);var n=e.skipParentheses(t.expression);if(179!==n.kind&&180!==n.kind)return cn(n,e.Diagnostics.The_operand_of_a_delete_operator_must_be_a_property_reference),ie;var r=nr(hn(n).resolvedSymbol);return r&&ep(r)&&cn(n,e.Diagnostics.The_operand_of_a_delete_operator_cannot_be_a_read_only_property),ie}(t);case 190:return function(e){return Dp(e.expression),Y}(t);case 191:return function(t){return r&&(16384&t.flags||Tm(t,e.Diagnostics.await_expression_is_only_allowed_within_an_async_function),tu(t)&&cn(t,e.Diagnostics.await_expressions_cannot_be_used_in_a_parameter_initializer)),Gp(Dp(t.expression),t,e.Diagnostics.Type_of_await_operand_must_either_be_a_valid_promise_or_must_not_contain_a_callable_then_member)}(t);case 192:return function(t){var n=Dp(t.operand);if(n===ce)return ce;if(8===t.operand.kind){if(38===t.operator)return cs(us(-t.operand.text));if(37===t.operator)return cs(us(+t.operand.text))}switch(t.operator){case 37:case 38:case 52:return qu(n,t.operand),ip(n,512)&&cn(t.operand,e.Diagnostics.The_0_operator_cannot_be_applied_to_type_symbol,e.tokenToString(t.operator)),te;case 51:var r=3145728&tl(n);return 1048576===r?re:2097152===r?ne:ie;case 43:case 44:return Zd(t.operand,qu(n,t.operand),e.Diagnostics.An_arithmetic_operand_must_be_of_type_any_number_or_an_enum_type)&&rp(t.operand,e.Diagnostics.The_operand_of_an_increment_or_decrement_operator_must_be_a_variable_or_a_property_access),te}return W}(t);case 193:return function(t){var n=Dp(t.operand);return n===ce?ce:(Zd(t.operand,qu(n,t.operand),e.Diagnostics.An_arithmetic_operand_must_be_of_type_any_number_or_an_enum_type)&&rp(t.operand,e.Diagnostics.The_operand_of_an_increment_or_decrement_operator_must_be_a_variable_or_a_property_access),te)}(t);case 194:return _p(t,n);case 195:return function(e,t){return Dp(e.condition),fp(Dp(e.whenTrue,t),Dp(e.whenFalse,t))}(t,n);case 198:return function(e,t){return T<2&&S.downlevelIteration&&Z_(e,1536),If(Dp(e.expression,t),e.expression,!1,!1)}(t,n);case 200:return Y;case 197:return gp(t);case 256:return function(t,n){if(t.expression){var r=Dp(t.expression,n);return t.dotDotDotToken&&r!==H&&!sc(r)&&cn(t,e.Diagnostics.JSX_spread_child_must_be_an_array_type),r}return W}(t,n);case 249:return function(e){return Bu(e.openingElement),Cu(e.closingElement.tagName)?Au(e.closingElement):Dp(e.closingElement.tagName),Mu()||H}(t);case 250:return function(e){return Bu(e),Mu()||H}(t);case 254:return function(e,t){return Eu(e.parent,void 0,t)}(t,n);case 251:e.Debug.fail("Shouldn't ever directly check a JsxOpeningElement")}return W}(t,n),n);op(i)&&(179===t.parent.kind&&t.parent.expression===t||180===t.parent.kind&&t.parent.expression===t||(71===t.kind||143===t.kind)&&y_(t)||cn(t,e.Diagnostics.const_enums_can_only_be_used_in_property_or_index_access_expressions_or_the_right_hand_side_of_an_import_declaration_or_export_assignment));return i}function Ap(t){t.expression&&Tm(t.expression,e.Diagnostics.Type_expected),c_(t.constraint),c_(t.default);var n=Ii(er(t));da(n)||cn(t.constraint,e.Diagnostics.Type_parameter_0_has_a_circular_constraint,Er(n)),function(e){return fa(e)!==ge}(n)||cn(t.default,e.Diagnostics.Type_parameter_0_has_a_circular_default,Er(n));var i=ca(n),a=_a(n);i&&a&&Rs(a,ji(i,a),t.default,e.Diagnostics.Type_0_does_not_satisfy_the_constraint_1),r&&$f(t.name,e.Diagnostics.Type_parameter_name_cannot_be_0)}function wp(t){tm(t)||nm(t),Tf(t);var n=e.getContainingFunction(t);e.hasModifier(t,92)&&(152===n.kind&&e.nodeIsPresent(n.body)||cn(t,e.Diagnostics.A_parameter_property_is_only_allowed_in_a_constructor_implementation)),t.questionToken&&e.isBindingPattern(t.name)&&n.body&&cn(t,e.Diagnostics.A_binding_pattern_parameter_cannot_be_optional_in_an_implementation_signature),t.name&&e.isIdentifier(t.name)&&("this"===t.name.escapedText||"new"===t.name.escapedText)&&(0!==e.indexOf(n.parameters,t)&&cn(t,e.Diagnostics.A_0_parameter_must_be_the_first_parameter,t.name.escapedText),152!==n.kind&&156!==n.kind&&161!==n.kind||cn(t,e.Diagnostics.A_constructor_cannot_have_a_this_parameter)),!t.dotDotDotToken||e.isBindingPattern(t.name)||sc(ci(t.symbol))||cn(t,e.Diagnostics.A_rest_parameter_must_be_of_an_array_type)}function Np(e,t){if(e)for(var n=0;n<e.length;n++){var r=e[n];if(71===r.name.kind&&r.name.escapedText===t.escapedText)return n}return-1}function Ip(t,n,r){for(var i=0,a=t.elements;i<a.length;i++){var o=a[i];if(!e.isOmittedExpression(o)){var s=o.name;if(71===s.kind&&s.escapedText===r)return cn(n,e.Diagnostics.A_type_predicate_cannot_reference_element_0_in_a_binding_pattern,r),!0;if((175===s.kind||174===s.kind)&&Ip(s,n,r))return!0}}}function Pp(t){157===t.kind?function(t){tm(t)||nm(t)||function(t){var n=t.parameters[0];if(1!==t.parameters.length)return Em(n?n.name:t,e.Diagnostics.An_index_signature_must_have_exactly_one_parameter);if(n.dotDotDotToken)return Em(n.dotDotDotToken,e.Diagnostics.An_index_signature_cannot_have_a_rest_parameter);if(e.hasModifiers(n))return Em(n.name,e.Diagnostics.An_index_signature_parameter_cannot_have_an_accessibility_modifier);if(n.questionToken)return Em(n.questionToken,e.Diagnostics.An_index_signature_parameter_cannot_have_a_question_mark);if(n.initializer)return Em(n.name,e.Diagnostics.An_index_signature_parameter_cannot_have_an_initializer);if(!n.type)return Em(n.name,e.Diagnostics.An_index_signature_parameter_must_have_a_type_annotation);if(136!==n.type.kind&&133!==n.type.kind)return Em(n.name,e.Diagnostics.An_index_signature_parameter_type_must_be_string_or_number);if(!t.type)Em(t,e.Diagnostics.An_index_signature_must_have_a_type_annotation)}(t)}(t):160!==t.kind&&228!==t.kind&&161!==t.kind&&155!==t.kind&&152!==t.kind&&156!==t.kind||om(t);var n=e.getFunctionFlags(t);if(4&n||(3==(3&n)&&T<5&&Z_(t,6144),2==(3&n)&&T<4&&Z_(t,64),0!=(3&n)&&T<2&&Z_(t,128)),Kf(t.typeParameters),e.forEach(t.parameters,wp),t.type&&c_(t.type),r){!function(t){if(!e.hasRestParameter(t)||e.isInAmbientContext(t)||e.nodeIsMissing(t.body))return;e.forEach(t.parameters,(function(t){t.name&&!e.isBindingPattern(t.name)&&t.name.escapedText===M.escapedName&&cn(t,e.Diagnostics.Duplicate_identifier_arguments_Compiler_uses_arguments_to_initialize_rest_parameters)}))}(t);var i=e.getEffectiveReturnTypeNode(t);if(N&&!i)switch(t.kind){case 156:cn(t,e.Diagnostics.Construct_signature_which_lacks_return_type_annotation_implicitly_has_an_any_return_type);break;case 155:cn(t,e.Diagnostics.Call_signature_which_lacks_return_type_annotation_implicitly_has_an_any_return_type)}if(i){var a=e.getFunctionFlags(t);if(1==(5&a)){var o=ps(i);if(o===oe)cn(i,e.Diagnostics.A_generator_cannot_have_a_void_type_annotation);else{var s=Lf(o,0!=(2&a))||H;Rs(2&a?Do(s):wo(s),o,i)}}else 2==(3&a)&&Qp(t)}E&&!t.body&&df(t)}}function Op(t){for(var n=e.createMap(),r=0,i=t.members;r<i.length;r++){var a=i[r];if(148===a.kind){var o=void 0;switch(a.name.kind){case 9:case 8:o=a.name.text;break;case 71:o=e.idText(a.name);break;default:continue}n.get(o)?(cn(e.getNameOfDeclaration(a.symbol.valueDeclaration),e.Diagnostics.Duplicate_identifier_0,o),cn(a.name,e.Diagnostics.Duplicate_identifier_0,o)):n.set(o,!0)}}}function Fp(t){if(230===t.kind){var n=er(t);if(n.declarations.length>0&&n.declarations[0]!==t)return}var r=za(er(t));if(r)for(var i=!1,a=!1,o=0,s=r.declarations;o<s.length;o++){var c=s[o];if(1===c.parameters.length&&c.parameters[0].type)switch(c.parameters[0].type.kind){case 136:a?cn(c,e.Diagnostics.Duplicate_string_index_signature):a=!0;break;case 133:i?cn(c,e.Diagnostics.Duplicate_number_index_signature):i=!0}}}function Lp(t){tm(t)||nm(t)||function(t){if(e.isClassLike(t.parent)){if(gm(t.name,e.Diagnostics.A_computed_property_name_in_a_class_property_declaration_must_directly_refer_to_a_built_in_symbol))return!0}else if(230===t.parent.kind){if(gm(t.name,e.Diagnostics.A_computed_property_name_in_an_interface_must_directly_refer_to_a_built_in_symbol))return!0;if(t.initializer)return Em(t.initializer,e.Diagnostics.An_interface_property_cannot_have_an_initializer)}else if(163===t.parent.kind){if(gm(t.name,e.Diagnostics.A_computed_property_name_in_a_type_literal_must_directly_refer_to_a_built_in_symbol))return!0;if(t.initializer)return Em(t.initializer,e.Diagnostics.A_type_literal_property_cannot_have_an_initializer)}if(e.isInAmbientContext(t)&&t.initializer)return Tm(t.initializer,e.Diagnostics.Initializers_are_not_allowed_in_ambient_contexts)}(t)||dm(t.name),Tf(t)}function Rp(t){Pp(t),function(t){if(t.typeParameters)return Cm(t,t.typeParameters.pos,t.typeParameters.end-t.typeParameters.pos,e.Diagnostics.Type_parameters_cannot_appear_on_a_constructor_declaration)}(t)||function(t){if(t.type)Em(t.type,e.Diagnostics.Type_annotation_cannot_appear_on_a_constructor_declaration)}(t),c_(t.body),of(t);var n=er(t);if(t===e.getDeclarationOfKind(n,t.kind)&&Jp(n),!e.nodeIsMissing(t.body)&&r){var i=t.parent;if(e.getClassExtendsHeritageClauseElement(i)){zl(t.parent,i);var a=Vl(i),o=ql(t);if(o){if(a&&cn(o,e.Diagnostics.A_constructor_cannot_contain_a_super_call_when_its_class_extends_null),e.some(t.parent.members,(function(t){return 149===t.kind&&!e.hasModifier(t,32)&&!!t.initializer}))||e.some(t.parameters,(function(t){return e.hasModifier(t,92)}))){for(var s=void 0,c=0,l=t.body.statements;c<l.length;c++){var u=l[c];if(210===u.kind&&e.isSuperCall(u.expression)){s=u;break}if(!e.isPrologueDirective(u))break}s||cn(t,e.Diagnostics.A_super_call_must_be_the_first_statement_in_the_constructor_when_a_class_contains_initialized_properties_or_has_parameter_properties)}}else a||cn(t,e.Diagnostics.Constructors_for_derived_classes_must_contain_a_super_call)}}}function Mp(t){if(r){if(om(t)||function(t){var n=t.kind;if(T<1)return Em(t.name,e.Diagnostics.Accessors_are_only_available_when_targeting_ECMAScript_5_and_higher);if(e.isInAmbientContext(t))return Em(t.name,e.Diagnostics.An_accessor_cannot_be_declared_in_an_ambient_context);if(void 0===t.body&&!e.hasModifier(t,128))return Cm(t,t.end-1,";".length,e.Diagnostics._0_expected,"{");if(t.body&&e.hasModifier(t,128))return Em(t,e.Diagnostics.An_abstract_accessor_cannot_have_an_implementation);if(t.typeParameters)return Em(t.name,e.Diagnostics.An_accessor_cannot_have_type_parameters);if(!function(e){return mm(e)||e.parameters.length===(153===e.kind?0:1)}(t))return Em(t.name,153===n?e.Diagnostics.A_get_accessor_cannot_have_parameters:e.Diagnostics.A_set_accessor_must_have_exactly_one_parameter);if(154===n){if(t.type)return Em(t.name,e.Diagnostics.A_set_accessor_cannot_have_a_return_type_annotation);var r=t.parameters[0];if(r.dotDotDotToken)return Em(r.dotDotDotToken,e.Diagnostics.A_set_accessor_cannot_have_rest_parameter);if(r.questionToken)return Em(r.questionToken,e.Diagnostics.A_set_accessor_cannot_have_an_optional_parameter);if(r.initializer)return Em(t.name,e.Diagnostics.A_set_accessor_parameter_cannot_have_an_initializer)}}(t)||dm(t.name),nf(t),Pp(t),153===t.kind&&!e.isInAmbientContext(t)&&e.nodeIsPresent(t.body)&&128&t.flags&&(256&t.flags||cn(t.name,e.Diagnostics.A_get_accessor_must_return_a_value)),144===t.name.kind&&bu(t.name),!e.hasDynamicName(t)){var n=153===t.kind?154:153,i=e.getDeclarationOfKind(t.symbol,n);if(i){var a=e.getModifierFlags(t),o=e.getModifierFlags(i);(28&a)!=(28&o)&&cn(t.name,e.Diagnostics.Getter_and_setter_accessors_do_not_agree_in_visibility),(128&a)!=(128&o)&&cn(t.name,e.Diagnostics.Accessors_must_both_be_abstract_or_non_abstract),Up(t,i,ri,e.Diagnostics.get_and_set_accessor_must_have_the_same_type),Up(t,i,ii,e.Diagnostics.get_and_set_accessor_must_have_the_same_this_type)}}var s=ai(er(t));153===t.kind&&Qd(t,s)}c_(t.body),of(t)}function Up(e,t,n,r){var i=n(e),a=n(t);i&&a&&!ws(i,a)&&cn(e,r)}function Bp(t,n){for(var r,i,a=Ia(t),o=!0,s=0;s<t.length;s++){var c=ca(t[s]);if(c){r||(i=gs(t,r=Pa(e.map(n,ps),t,a,e.isInJavaScriptFile(n[s]))));var l=r[s];o=o&&Rs(l,Ss(c,i),n[s],e.Diagnostics.Type_0_does_not_satisfy_the_constraint_1)}}return o}function jp(t){sm(t,t.typeArguments),159!==t.kind||void 0===t.typeName.jsdocDotPos||e.isInJavaScriptFile(t)||e.isInJSDoc(t)||Cm(t,t.typeName.jsdocDotPos,1,e.Diagnostics.JSDoc_types_can_only_be_used_inside_documentation_comments);var n=oo(t);if(n!==W){if(t.typeArguments&&(e.forEach(t.typeArguments,c_),r)){var i=hn(t).resolvedSymbol;if(!i)return void(e.isJSDocIndexSignature(t)||cn(t,e.Diagnostics.Type_0_is_not_generic,Er(n)));var a=524288&i.flags&&gn(i).typeParameters;!a&&4&yn(n)&&(a=n.target.localTypeParameters),Bp(a,t.typeArguments)}16&n.flags&&8&hn(t).resolvedSymbol.flags&&cn(t,e.Diagnostics.Enum_type_0_has_members_with_initializers_that_are_not_literals,Er(n))}}function $p(t,n){if(!(524288&t.flags))return t;var r=t.objectType,i=t.indexType;return Os(i,Vo(r))?(180===n.kind&&e.isAssignmentTarget(n)&&32&yn(r)&&r.declaration.readonlyToken&&cn(n,e.Diagnostics.Index_signature_in_type_0_only_permits_reading,Er(r)),t):(Ta(ma(r),1)&&ap(i,84)||cn(n,e.Diagnostics.Type_0_cannot_be_used_to_index_type_1,Er(i),Er(r)),t)}function Kp(t){return e.hasModifier(t,8)&&e.isInAmbientContext(t)}function zp(t,n){var r=e.getCombinedModifierFlags(t);return 230!==t.parent.kind&&229!==t.parent.kind&&199!==t.parent.kind&&e.isInAmbientContext(t)&&(2&r||(r|=1),r|=2),r&n}function Jp(t){if(r){for(var n,i,a,o=0,s=155,c=!1,l=!0,u=!1,d=t.declarations,p=0!=(16384&t.flags),f=!1,_=!1,m=0,g=d;m<g.length;m++){var h=g[m],y=e.isInAmbientContext(h),v=230===h.parent.kind||163===h.parent.kind||y;if(v&&(a=void 0),228===h.kind||151===h.kind||150===h.kind||152===h.kind){var b=zp(h,155);o|=b,s&=b,c=c||e.hasQuestionToken(h),l=l&&e.hasQuestionToken(h),e.nodeIsPresent(h.body)&&n?p?_=!0:f=!0:a&&a.parent===h.parent&&a.end!==h.pos&&D(a),e.nodeIsPresent(h.body)?n||(n=h):u=!0,a=h,v||(i=h)}}if(_&&e.forEach(d,(function(t){cn(t,e.Diagnostics.Multiple_constructor_implementations_are_not_allowed)})),f&&e.forEach(d,(function(t){cn(e.getNameOfDeclaration(t),e.Diagnostics.Duplicate_function_implementation)})),!i||i.body||e.hasModifier(i,128)||i.questionToken||D(i),u&&(function(t,n,r,i,a){if(0!=(i^a)){var o=zp(E(t,n),r);e.forEach(t,(function(t){var n=zp(t,r)^o;1&n?cn(e.getNameOfDeclaration(t),e.Diagnostics.Overload_signatures_must_all_be_exported_or_non_exported):2&n?cn(e.getNameOfDeclaration(t),e.Diagnostics.Overload_signatures_must_all_be_ambient_or_non_ambient):24&n?cn(e.getNameOfDeclaration(t)||t,e.Diagnostics.Overload_signatures_must_all_be_public_private_or_protected):128&n&&cn(e.getNameOfDeclaration(t),e.Diagnostics.Overload_signatures_must_all_be_abstract_or_non_abstract)}))}}(d,n,155,o,s),function(t,n,r,i){if(r!==i){var a=e.hasQuestionToken(E(t,n));e.forEach(t,(function(t){e.hasQuestionToken(t)!==a&&cn(e.getNameOfDeclaration(t),e.Diagnostics.Overload_signatures_must_all_be_optional_or_required)}))}}(d,n,c,l),n))for(var x=Fa(t),k=Oa(n),S=0,T=x;S<T.length;S++){var C=T[S];if(!Bs(k,C)){cn(C.declaration,e.Diagnostics.Overload_signature_is_not_compatible_with_function_implementation);break}}}function E(e,t){return void 0!==t&&t.parent===e[0].parent?t:e[0]}function D(t){if(!t.name||!e.nodeIsMissing(t.name)){var n=!1,r=e.forEachChild(t.parent,(function(e){if(n)return e;n=e===t}));if(r&&r.pos===t.end&&r.kind===t.kind){var i=r.name||r,a=r.name;if(t.name&&a&&(e.isComputedPropertyName(t.name)&&e.isComputedPropertyName(a)||!e.isComputedPropertyName(t.name)&&!e.isComputedPropertyName(a)&&e.getEscapedTextOfIdentifierOrLiteral(t.name)===e.getEscapedTextOfIdentifierOrLiteral(a))){if((151===t.kind||150===t.kind)&&e.hasModifier(t,32)!==e.hasModifier(r,32))cn(i,e.hasModifier(t,32)?e.Diagnostics.Function_overload_must_be_static:e.Diagnostics.Function_overload_must_not_be_static);return}if(e.nodeIsPresent(r.body))return void cn(i,e.Diagnostics.Function_implementation_name_must_be_0,e.declarationNameToString(t.name))}var o=t.name||t;p?cn(o,e.Diagnostics.Constructor_implementation_is_missing):e.hasModifier(t,128)?cn(o,e.Diagnostics.All_declarations_of_an_abstract_method_must_be_consecutive):cn(o,e.Diagnostics.Function_implementation_is_missing_or_not_immediately_following_the_declaration)}}}function qp(t){if(r){var n=t.localSymbol;if((n||(n=er(t)).exportSymbol)&&e.getDeclarationOfKind(n,t.kind)===t){for(var i=0,a=0,o=0,s=0,c=n.declarations;s<c.length;s++){var l=y(g=c[s]),u=zp(g,513);1&u?512&u?o|=l:i|=l:a|=l}var d,p=i&a,f=o&(i|a);if(p||f)for(var _=0,m=n.declarations;_<m.length;_++){l=y(g=m[_]);var g,h=e.getNameOfDeclaration(g);l&f?cn(h,e.Diagnostics.Merged_declaration_0_cannot_include_a_default_export_declaration_Consider_adding_a_separate_export_default_0_declaration_instead,e.declarationNameToString(h)):l&p&&cn(h,e.Diagnostics.Individual_declarations_in_merged_declaration_0_must_be_all_exported_or_all_local,e.declarationNameToString(h))}!function(e){e[e.None=0]="None",e[e.ExportValue=1]="ExportValue",e[e.ExportType=2]="ExportType",e[e.ExportNamespace=4]="ExportNamespace"}(d||(d={}))}}function y(t){switch(t.kind){case 230:case 231:case 283:return 2;case 233:return e.isAmbientModule(t)||0!==e.getModuleInstanceState(t)?5:4;case 229:case 232:return 3;case 237:case 240:case 239:var n=0,r=Rn(er(t));return e.forEach(r.declarations,(function(e){n|=y(e)})),n;case 226:case 176:case 228:case 242:return 1;default:e.Debug.fail(e.SyntaxKind[t.kind])}}}function Vp(e,t,n){var r=Hp(e,t);return r&&Wp(r,t,n)}function Hp(t,n){if(!zr(t)){var r=t;if(r.promisedTypeOfPromise)return r.promisedTypeOfPromise;if(li(t,mo(!1)))return r.promisedTypeOfPromise=t.typeArguments[0];var i=Kr(t,"then");if(!zr(i)){var a=i?xa(i,0):e.emptyArray;if(0!==a.length){var o=nl(jo(e.map(a,$d)),524288);if(!zr(o)){var s=xa(o,0);if(0!==s.length)return r.promisedTypeOfPromise=jo(e.map(s,$d),!0);n&&cn(n,e.Diagnostics.The_first_parameter_of_the_then_method_of_a_promise_must_be_a_callback)}}else n&&cn(n,e.Diagnostics.A_promise_must_have_a_then_method)}}}function Gp(e,t,n){return Wp(e,t,n)||W}function Wp(t,n,r){var i=t;if(i.awaitedTypeOfType)return i.awaitedTypeOfType;if(zr(t))return i.awaitedTypeOfType=t;if(65536&t.flags){for(var a=void 0,o=0,s=t.types;o<s.length;o++){var c=s[o];a=e.append(a,Wp(c,n,r))}if(!a)return;return i.awaitedTypeOfType=jo(a)}var l=Hp(t);if(l){if(t.id===l.id||e.indexOf(At,l.id)>=0)return void(n&&cn(n,e.Diagnostics.Type_is_referenced_directly_or_indirectly_in_the_fulfillment_callback_of_its_own_then_method));At.push(t.id);var u=Wp(l,n,r);if(At.pop(),!u)return;return i.awaitedTypeOfType=u}var d=Kr(t,"then");if(!(d&&xa(d,0).length>0))return i.awaitedTypeOfType=t;n&&(e.Debug.assert(!!r),cn(n,r))}function Qp(t){var n,r=e.getEffectiveReturnTypeNode(t),i=ps(r);if(T>=2){if(i===W)return W;var a=mo(!0);if(a!==fe&&!li(i,a))return cn(r,e.Diagnostics.The_return_type_of_an_async_function_or_method_must_be_the_global_Promise_T_type),W}else{if(function(t){Xp(t&&e.getEntityNameFromTypeNode(t))}(r),i===W)return W;var o=e.getEntityNameFromTypeNode(r);if(void 0===o)return cn(r,e.Diagnostics.Type_0_is_not_a_valid_async_function_return_type_in_ES5_SlashES3_because_it_does_not_refer_to_a_Promise_compatible_constructor_value,Er(i)),W;var s=$n(o,107455,!0),c=s?ci(s):W;if(c===W)return 71===o.kind&&"Promise"===o.escapedText&&ui(i)===mo(!1)?cn(r,e.Diagnostics.An_async_function_or_method_in_ES5_SlashES3_requires_the_Promise_constructor_Make_sure_you_have_a_declaration_for_the_Promise_constructor_or_include_ES2015_in_your_lib_option):cn(r,e.Diagnostics.Type_0_is_not_a_valid_async_function_return_type_in_ES5_SlashES3_because_it_does_not_refer_to_a_Promise_compatible_constructor_value,e.entityNameToString(o)),W;var l=(n=!0,Be||(Be=fo("PromiseConstructorLike",0,n))||ue);if(l===ue)return cn(r,e.Diagnostics.Type_0_is_not_a_valid_async_function_return_type_in_ES5_SlashES3_because_it_does_not_refer_to_a_Promise_compatible_constructor_value,e.entityNameToString(o)),W;if(!Rs(c,l,r,e.Diagnostics.Type_0_is_not_a_valid_async_function_return_type_in_ES5_SlashES3_because_it_does_not_refer_to_a_Promise_compatible_constructor_value))return W;var u=o&&e_(o),d=bn(t.locals,u.escapedText,107455);if(d)return cn(d.valueDeclaration,e.Diagnostics.Duplicate_identifier_0_Compiler_uses_declaration_1_to_support_async_functions,e.idText(u),e.entityNameToString(o)),W}return Gp(i,t,e.Diagnostics.The_return_type_of_an_async_function_must_either_be_a_valid_promise_or_must_not_contain_a_callable_then_member)}function Yp(t){var n=Ra(Id(t));if(!(1&n.flags)){var r,i,a=Ed(t);switch(t.parent.kind){case 229:r=jo([ci(er(t.parent)),oe]);break;case 146:r=oe,i=e.chainDiagnosticMessages(i,e.Diagnostics.The_return_type_of_a_parameter_decorator_function_must_be_either_void_or_any);break;case 149:r=oe,i=e.chainDiagnosticMessages(i,e.Diagnostics.The_return_type_of_a_property_decorator_function_must_be_either_void_or_any);break;case 151:case 153:case 154:r=jo([Eo(x_(t.parent)),oe])}Rs(n,r,t,a,i)}}function Xp(e){if(e){var t=e_(e),n=2097152|(71===e.kind?793064:1920),r=kn(t,t.escapedText,n,void 0,void 0,!0);r&&2097152&r.flags&&rr(r)&&!F_(Rn(r))&&Un(r)}}function Zp(t){var n=ef(t);n&&e.isEntityName(n)&&Xp(n)}function ef(t){if(t)switch(t.kind){case 167:case 166:for(var n=void 0,r=0,i=t.types;r<i.length;r++){var a=ef(i[r]);if(!a)return;if(n){if(!e.isIdentifier(n)||!e.isIdentifier(a)||n.escapedText!==a.escapedText)return}else n=a}return n;case 168:return ef(t.type);case 159:return t.typeName}}function tf(t){var n=e.getEffectiveTypeAnnotationNode(t);return e.isRestParameter(t)?e.getRestParameterElementType(n):n}function nf(t){if(t.decorators&&e.nodeCanBeDecorated(t)){S.experimentalDecorators||cn(t,e.Diagnostics.Experimental_support_for_decorators_is_a_feature_that_is_subject_to_change_in_a_future_release_Set_the_experimentalDecorators_option_to_remove_this_warning);var n=t.decorators[0];if(Z_(n,8),146===t.kind&&Z_(n,32),S.emitDecoratorMetadata)switch(Z_(n,16),t.kind){case 229:var r=e.getFirstConstructorWithBody(t);if(r)for(var i=0,a=r.parameters;i<a.length;i++){Zp(tf(a[i]))}break;case 151:case 153:case 154:for(var o=0,s=t.parameters;o<s.length;o++){Zp(tf(s[o]))}Zp(e.getEffectiveReturnTypeNode(t));break;case 149:Zp(e.getEffectiveTypeAnnotationNode(t));break;case 146:Zp(tf(t))}e.forEach(t.decorators,Yp)}}function rf(e){switch(e.kind){case 71:return e;case 179:return e.name;default:return}}function af(t){nf(t),Pp(t);var n=e.getFunctionFlags(t);if(t.name&&144===t.name.kind&&bu(t.name),!e.hasDynamicName(t)){var i=er(t),a=t.localSymbol||i,o=e.find(a.declarations,(function(e){return e.kind===t.kind&&!(65536&e.flags)}));t===o&&Jp(a),i.parent&&e.getDeclarationOfKind(i,t.kind)===t&&Jp(i)}c_(t.body);var s=e.getEffectiveReturnTypeNode(t);if(0==(1&n)){var c=s&&(2&n?Qp(t):ps(s));Qd(t,c)}r&&!s&&(N&&e.nodeIsMissing(t.body)&&!Kp(t)&&wc(t,H),1&n&&e.nodeIsPresent(t.body)&&Ra(Oa(t))),of(t)}function of(e){Ye&&Ye.push(e)}function sf(t){230!==t.parent.kind&&E&&!e.isInAmbientContext(t)&&t.locals.forEach((function(t){if(!t.isReferenced)if(t.valueDeclaration&&146===e.getRootDeclaration(t.valueDeclaration).kind){var n=e.getRootDeclaration(t.valueDeclaration),r=e.getNameOfDeclaration(t.valueDeclaration);!S.noUnusedParameters||e.isParameterPropertyDeclaration(n)||e.parameterIsThisKeyword(n)||(i=r)&&lf(i)||cn(r,e.Diagnostics._0_is_declared_but_its_value_is_never_read,e.symbolName(t))}else S.noUnusedLocals&&e.forEach(t.declarations,(function(n){return cf(n,e.symbolName(t))}));var i}))}function cf(t,n){var r=e.getNameOfDeclaration(t)||t;if(lf(r)){var i=e.getRootDeclaration(r.parent);if(226===i.kind&&e.isForInOrOfStatement(i.parent.parent)||145===i.kind)return}(function(t){if(e.isBindingElement(t)&&e.isObjectBindingPattern(t.parent)){var n=e.lastOrUndefined(t.parent.elements);return n!==t&&!!n.dotDotDotToken}return!1})(71===r.kind?r.parent:r)||cn(r,e.Diagnostics._0_is_declared_but_its_value_is_never_read,n)}function lf(t){return 71===t.kind&&95===e.idText(t).charCodeAt(0)}function uf(t){if(S.noUnusedLocals&&!e.isInAmbientContext(t)&&t.members)for(var n=0,r=t.members;n<r.length;n++){var i=r[n];if(151===i.kind||149===i.kind)!i.symbol.isReferenced&&e.hasModifier(i,8)&&cn(i.name,e.Diagnostics._0_is_declared_but_its_value_is_never_read,e.symbolName(i.symbol));else if(152===i.kind)for(var a=0,o=i.parameters;a<o.length;a++){var s=o[a];!s.symbol.isReferenced&&e.hasModifier(s,8)&&cn(s.name,e.Diagnostics.Property_0_is_declared_but_its_value_is_never_read,e.symbolName(s.symbol))}}}function df(t){if(S.noUnusedLocals&&!e.isInAmbientContext(t)&&t.typeParameters){var n=er(t);if((n&&n.declarations&&e.lastOrUndefined(n.declarations))!==t)return;for(var r=0,i=t.typeParameters;r<i.length;r++){var a=i[r];Zn(a.symbol).isReferenced||lf(a.name)||cn(a.name,e.Diagnostics._0_is_declared_but_its_value_is_never_read,e.symbolName(a.symbol))}}}function pf(t){S.noUnusedLocals&&!e.isInAmbientContext(t)&&t.locals.forEach((function(t){if(!t.isReferenced&&!t.exportSymbol)for(var n=0,r=t.declarations;n<r.length;n++){var i=r[n];e.isAmbientModule(i)||cf(i,e.symbolName(t))}}))}function ff(t){if(207===t.kind&&Am(t),e.isFunctionOrModuleBlock(t)){var n=ut;e.forEach(t.statements,c_),ut=n}else e.forEach(t.statements,c_);t.locals&&of(t)}function _f(t,n,r){if(!n||n.escapedText!==r)return!1;if(149===t.kind||148===t.kind||151===t.kind||150===t.kind||153===t.kind||154===t.kind)return!1;if(e.isInAmbientContext(t))return!1;var i=e.getRootDeclaration(t);return 146!==i.kind||!e.nodeIsMissing(i.parent.body)}function mf(e,t){_f(e,t,"_this")&&Et.push(e)}function gf(e,t){_f(e,t,"_newTarget")&&Dt.push(e)}function hf(t){e.findAncestor(t,(function(n){if(4&B_(n))return 71!==t.kind?cn(e.getNameOfDeclaration(t),e.Diagnostics.Duplicate_identifier_this_Compiler_uses_variable_declaration_this_to_capture_this_reference):cn(t,e.Diagnostics.Expression_resolves_to_variable_declaration_this_that_compiler_uses_to_capture_this_reference),!0}))}function yf(t){e.findAncestor(t,(function(n){if(8&B_(n))return 71!==t.kind?cn(e.getNameOfDeclaration(t),e.Diagnostics.Duplicate_identifier_newTarget_Compiler_uses_variable_declaration_newTarget_to_capture_new_target_meta_property_reference):cn(t,e.Diagnostics.Expression_resolves_to_variable_declaration_newTarget_that_compiler_uses_to_capture_new_target_meta_property_reference),!0}))}function vf(t,n){if(_f(t,n,"_super")){var r=e.getContainingClass(t);if(r&&!e.isInAmbientContext(r))if(e.getClassExtendsHeritageClauseElement(r))cn(t,71!==t.kind?e.Diagnostics.Duplicate_identifier_super_Compiler_uses_super_to_capture_base_class_reference:e.Diagnostics.Expression_resolves_to_super_that_compiler_uses_to_capture_base_class_reference)}}function bf(t,n){if(!(C>=e.ModuleKind.ES2015)&&(_f(t,n,"require")||_f(t,n,"exports"))&&(233!==t.kind||1===e.getModuleInstanceState(t))){var r=$r(t);265===r.kind&&e.isExternalOrCommonJsModule(r)&&cn(n,e.Diagnostics.Duplicate_identifier_0_Compiler_reserves_name_1_in_top_level_scope_of_a_module,e.declarationNameToString(n),e.declarationNameToString(n))}}function xf(t,n){if(!(T>=4)&&_f(t,n,"Promise")&&(233!==t.kind||1===e.getModuleInstanceState(t))){var r=$r(t);265===r.kind&&e.isExternalOrCommonJsModule(r)&&1024&r.flags&&cn(n,e.Diagnostics.Duplicate_identifier_0_Compiler_reserves_name_1_in_top_level_scope_of_a_module_containing_async_functions,e.declarationNameToString(n),e.declarationNameToString(n))}}function kf(t){if(146===e.getRootDeclaration(t).kind){var n=e.getContainingFunction(t);!function r(i){if(e.isTypeNode(i)||e.isDeclarationName(i))return;if(179===i.kind)return r(i.expression);if(71!==i.kind)return e.forEachChild(i,r);var a=kn(i,i.escapedText,2204607,void 0,void 0,!1);if(!a||a===q||!a.valueDeclaration)return;if(a.valueDeclaration===t)return void cn(i,e.Diagnostics.Parameter_0_cannot_be_referenced_in_its_initializer,e.declarationNameToString(t.name));if(e.getEnclosingBlockScopeContainer(a.valueDeclaration)===n){if(146===a.valueDeclaration.kind||176===a.valueDeclaration.kind){if(a.valueDeclaration.pos<t.pos)return;if(e.findAncestor(i,(function(n){return n===t.initializer?"quit":e.isFunctionLike(n.parent)||149===n.parent.kind&&!e.hasModifier(n.parent,32)&&e.isClassLike(n.parent.parent)})))return}cn(i,e.Diagnostics.Initializer_of_parameter_0_cannot_reference_identifier_1_declared_after_it,e.declarationNameToString(t.name),e.declarationNameToString(i))}}(t.initializer)}}function Sf(e){return e===G?H:e===Pe?Ie:e}function Tf(t){if(nf(t),c_(t.type),t.name){if(144===t.name.kind&&(bu(t.name),t.initializer&&yp(t.initializer)),176===t.kind){174===t.parent.kind&&T<5&&Z_(t,4),t.propertyName&&144===t.propertyName.kind&&bu(t.propertyName);var n=t.parent.parent,r=Jr(n),i=t.propertyName||t.name,a=va(r,e.getTextOfPropertyName(i));Zu(a,void 0,!1),n.initializer&&a&&zu(n,n.initializer,r,a)}if(e.isBindingPattern(t.name)&&(175===t.name.kind&&T<2&&S.downlevelIteration&&Z_(t,512),e.forEach(t.name.elements,c_)),t.initializer&&146===e.getRootDeclaration(t).kind&&e.nodeIsMissing(e.getContainingFunction(t).body))cn(t,e.Diagnostics.A_parameter_initializer_is_only_allowed_in_a_function_or_constructor_implementation);else if(e.isBindingPattern(t.name))t.initializer&&215!==t.parent.parent.kind&&(Rs(yp(t.initializer),ei(t),t,void 0),kf(t));else{var o=er(t),s=Sf(ni(o));if(t===o.valueDeclaration)t.initializer&&215!==t.parent.parent.kind&&(Rs(yp(t.initializer),s,t,void 0),kf(t));else{var c=Sf(ei(t));s===W||c===W||ws(s,c)||cn(t.name,e.Diagnostics.Subsequent_variable_declarations_must_have_the_same_type_Variable_0_must_be_of_type_1_but_here_has_type_2,e.declarationNameToString(t.name),Er(s),Er(c)),t.initializer&&Rs(yp(t.initializer),c,t,void 0),function(t,n){if(146===t.kind&&226===n.kind||226===t.kind&&146===n.kind)return!0;if(e.hasQuestionToken(t)!==e.hasQuestionToken(n))return!1;var r=504;return e.getSelectedModifierFlags(t,r)===e.getSelectedModifierFlags(n,r)}(t,o.valueDeclaration)||(cn(e.getNameOfDeclaration(o.valueDeclaration),e.Diagnostics.All_declarations_of_0_must_have_identical_modifiers,e.declarationNameToString(t.name)),cn(t.name,e.Diagnostics.All_declarations_of_0_must_have_identical_modifiers,e.declarationNameToString(t.name)))}149!==t.kind&&148!==t.kind&&(qp(t),226!==t.kind&&176!==t.kind||function(t){if(0==(3&e.getCombinedNodeFlags(t))&&!e.isParameterDeclaration(t)&&(226!==t.kind||t.initializer)){var n=er(t);if(1&n.flags){if(!e.isIdentifier(t.name))throw e.Debug.fail();var r=kn(t,t.name.escapedText,3,void 0,void 0,!1);if(r&&r!==n&&2&r.flags&&3&$u(r)){var i=e.getAncestor(r.valueDeclaration,227),a=208===i.parent.kind&&i.parent.parent?i.parent.parent:void 0;if(!a||!(207===a.kind&&e.isFunctionLike(a.parent)||234===a.kind||233===a.kind||265===a.kind)){var o=Tr(r);cn(t,e.Diagnostics.Cannot_initialize_outer_scoped_variable_0_in_the_same_scope_as_block_scoped_declaration_1,o,o)}}}}}(t),vf(t,t.name),mf(t,t.name),gf(t,t.name),bf(t,t.name),xf(t,t.name))}}}function Cf(t){return function(t){if(215!==t.parent.parent.kind&&216!==t.parent.parent.kind)if(e.isInAmbientContext(t)){if(t.initializer){if(!e.isConst(t)||t.type){var n="=".length;return Cm(t,t.initializer.pos-n,n,e.Diagnostics.Initializers_are_not_allowed_in_ambient_contexts)}if(!ym(t.initializer))return Em(t.initializer,e.Diagnostics.A_const_initializer_in_an_ambient_context_must_be_a_string_or_numeric_literal)}if(t.initializer&&(!e.isConst(t)||!ym(t.initializer))){n="=".length;return Cm(t,t.initializer.pos-n,n,e.Diagnostics.Initializers_are_not_allowed_in_ambient_contexts)}}else if(!t.initializer){if(e.isBindingPattern(t.name)&&!e.isBindingPattern(t.parent))return Em(t,e.Diagnostics.A_destructuring_declaration_must_have_an_initializer);if(e.isConst(t))return Em(t,e.Diagnostics.const_declarations_must_be_initialized)}S.module===e.ModuleKind.ES2015||S.module===e.ModuleKind.ESNext||S.module===e.ModuleKind.System||S.noEmit||e.isInAmbientContext(t.parent.parent)||!e.hasModifier(t.parent.parent,1)||vm(t.name);(e.isLet(t)||e.isConst(t))&&bm(t.name)}(t),Tf(t)}function Ef(t){return function(t){if(t.dotDotDotToken){var n=t.parent.elements;if(t!==e.lastOrUndefined(n))return Em(t,e.Diagnostics.A_rest_element_must_be_last_in_a_destructuring_pattern);if(175===t.name.kind||174===t.name.kind)return Em(t.name,e.Diagnostics.A_rest_element_cannot_contain_a_binding_pattern);if(t.initializer)Cm(t,t.initializer.pos-1,1,e.Diagnostics.A_rest_element_cannot_have_an_initializer)}}(t),Tf(t)}function Df(t){tm(t)||nm(t)||xm(t.declarationList)||function(t){if(!km(t.parent)){if(e.isLet(t.declarationList))return Em(t,e.Diagnostics.let_declarations_can_only_be_declared_inside_a_block);if(e.isConst(t.declarationList))Em(t,e.Diagnostics.const_declarations_can_only_be_declared_inside_a_block)}}(t),e.forEach(t.declarationList.declarations,c_)}function Af(t){_m(t);var n=Ju(t.expression);if(227===t.initializer.kind){var r=t.initializer.declarations[0];r&&e.isBindingPattern(r.name)&&cn(r.name,e.Diagnostics.The_left_hand_side_of_a_for_in_statement_cannot_be_a_destructuring_pattern),wf(t)}else{var i=t.initializer,a=Dp(i);177===i.kind||178===i.kind?cn(i,e.Diagnostics.The_left_hand_side_of_a_for_in_statement_cannot_be_a_destructuring_pattern):Os(function(e){var t=Vo(e);return t!==se?t:ee}(n),a)?rp(i,e.Diagnostics.The_left_hand_side_of_a_for_in_statement_must_be_a_variable_or_a_property_access):cn(i,e.Diagnostics.The_left_hand_side_of_a_for_in_statement_must_be_of_type_string_or_any)}ap(n,17317888)||cn(t.expression,e.Diagnostics.The_right_hand_side_of_a_for_in_statement_must_be_of_type_any_an_object_type_or_a_type_parameter),c_(t.statement),t.locals&&of(t)}function wf(e){var t=e.initializer;t.declarations.length>=1&&Cf(t.declarations[0])}function Nf(e,t){return If(Ju(e),e,!0,void 0!==t)}function If(e,t,n,r){return zr(e)?e:Pf(e,t,n,r,!0)||H}function Pf(t,n,r,i,a){var o=T>=2,s=!o&&S.downlevelIteration;if(o||s||i){var c=Of(t,o?n:void 0,i,!0,a);if(c||o)return c}var l=t,u=!1,d=!1;if(r){if(65536&l.flags){var p=t.types,f=e.filter(p,(function(e){return!(262178&e.flags)}));f!==p&&(l=jo(f,!0))}else 262178&l.flags&&(l=se);if((d=l!==t)&&(T<1&&n&&(cn(n,e.Diagnostics.Using_a_string_in_a_for_of_statement_is_only_supported_in_ECMAScript_5_and_higher),u=!0),8192&l.flags))return ee}if(!cc(l)){if(n&&!u)cn(n,!r||d?s?e.Diagnostics.Type_0_is_not_an_array_type_or_does_not_have_a_Symbol_iterator_method_that_returns_an_iterator:e.Diagnostics.Type_0_is_not_an_array_type:s?e.Diagnostics.Type_0_is_not_an_array_type_or_a_string_type_or_does_not_have_a_Symbol_iterator_method_that_returns_an_iterator:e.Diagnostics.Type_0_is_not_an_array_type_or_a_string_type,Er(l));return d?ee:void 0}var _=Ca(l,1);return d&&_?262178&_.flags?ee:jo([_,ee],!0):_}function Of(t,n,r,i,a){if(!zr(t))return bl(t,(function(t){var o=t;if(r){if(o.iteratedTypeOfAsyncIterable)return o.iteratedTypeOfAsyncIterable;if(li(t,ho(!1))||li(t,vo(!1)))return o.iteratedTypeOfAsyncIterable=t.typeArguments[0]}if(i){if(o.iteratedTypeOfIterable)return o.iteratedTypeOfIterable;if(li(t,bo(!1))||li(t,ko(!1)))return o.iteratedTypeOfIterable=t.typeArguments[0]}var s=r&&Kr(t,e.getPropertyNameForKnownSymbolName("asyncIterator")),c=s||i&&Kr(t,e.getPropertyNameForKnownSymbolName("iterator"));if(zr(c))return;var l=c&&xa(c,0);if(!e.some(l))return void(n&&(cn(n,r?e.Diagnostics.Type_must_have_a_Symbol_asyncIterator_method_that_returns_an_async_iterator:e.Diagnostics.Type_must_have_a_Symbol_iterator_method_that_returns_an_iterator),n=void 0));var u=Ff(jo(e.map(l,Ra),!0),n,!!s);a&&n&&u&&Rs(t,s?function(e){return Co(ho(!0),[e])}(u):Ao(u),n);return s?o.iteratedTypeOfAsyncIterable=u:o.iteratedTypeOfIterable=u}))}function Ff(t,n,r){if(!zr(t)){var i=t;if(r?i.iteratedTypeOfAsyncIterator:i.iteratedTypeOfIterator)return r?i.iteratedTypeOfAsyncIterator:i.iteratedTypeOfIterator;if(li(t,(r?yo:xo)(!1)))return r?i.iteratedTypeOfAsyncIterator=t.typeArguments[0]:i.iteratedTypeOfIterator=t.typeArguments[0];var a=Kr(t,"next");if(!zr(a)){var o=a?xa(a,0):e.emptyArray;if(0!==o.length){var s=jo(e.map(o,Ra),!0);if(!(zr(s)||r&&zr(s=Vp(s,n,e.Diagnostics.The_type_returned_by_the_next_method_of_an_async_iterator_must_be_a_promise_for_a_type_with_a_value_property)))){var c=s&&Kr(s,"value");if(c)return r?i.iteratedTypeOfAsyncIterator=c:i.iteratedTypeOfIterator=c;n&&cn(n,r?e.Diagnostics.The_type_returned_by_the_next_method_of_an_async_iterator_must_be_a_promise_for_a_type_with_a_value_property:e.Diagnostics.The_type_returned_by_the_next_method_of_an_iterator_must_have_a_value_property)}}else n&&cn(n,r?e.Diagnostics.An_async_iterator_must_have_a_next_method:e.Diagnostics.An_iterator_must_have_a_next_method)}}}function Lf(e,t){if(!zr(e))return Of(e,void 0,t,!t,!1)||Ff(e,void 0,t)}function Rf(t){Am(t)||function(t){var n=t;for(;n;){if(e.isFunctionLike(n))return Em(t,e.Diagnostics.Jump_target_cannot_cross_function_boundary);switch(n.kind){case 222:if(t.label&&n.label.escapedText===t.label.escapedText)return!!(217===t.kind&&!e.isIterationStatement(n.statement,!0))&&Em(t,e.Diagnostics.A_continue_statement_can_only_jump_to_a_label_of_an_enclosing_iteration_statement);break;case 221:if(218===t.kind&&!t.label)return!1;break;default:if(e.isIterationStatement(n,!1)&&!t.label)return!1}n=n.parent}t.label?Em(t,218===t.kind?e.Diagnostics.A_break_statement_can_only_jump_to_a_label_of_an_enclosing_statement:e.Diagnostics.A_continue_statement_can_only_jump_to_a_label_of_an_enclosing_iteration_statement):Em(t,218===t.kind?e.Diagnostics.A_break_statement_can_only_be_used_within_an_enclosing_iteration_or_switch_statement:e.Diagnostics.A_continue_statement_can_only_be_used_within_an_enclosing_iteration_statement)}(t)}function Mf(t){return 153===t.kind&&void 0!==e.getEffectiveSetAccessorTypeAnnotationNode(e.getDeclarationOfKind(t.symbol,154))}function Uf(t,n){var r=2==(3&e.getFunctionFlags(t))?Hp(n):n;return r&&ip(r,1025)}function Bf(t){Am(t)||void 0===t.expression&&function(t,n,r,i,a){var o=e.getSourceFileOfNode(t);if(!Sm(o)){var s=e.getSpanOfTokenAtPosition(o,t.pos);wt.add(e.createFileDiagnostic(o,e.textSpanEnd(s),0,n,r,i,a))}}(t,e.Diagnostics.Line_break_not_permitted_here),t.expression&&Dp(t.expression)}function jf(t){var n,r=Ja(t.symbol,1),i=Ja(t.symbol,0),a=Ca(t,0),o=Ca(t,1);if((a||o)&&(e.forEach(aa(t),(function(e){var n=ci(e);d(e,n,t,i,a,0),d(e,n,t,r,o,1)})),1&yn(t)&&e.isClassLike(t.symbol.valueDeclaration)))for(var s=0,c=t.symbol.valueDeclaration.members;s<c.length;s++){var l=c[s];if(!e.hasModifier(l,32)&&e.hasDynamicName(l)){var u=ci(l.symbol);d(l.symbol,u,t,i,a,0),d(l.symbol,u,t,r,o,1)}}a&&o&&(!(n=r||i)&&2&yn(t)&&(n=e.forEach(Si(t),(function(e){return Ca(e,0)&&Ca(e,1)}))?void 0:t.symbol.declarations[0]));function d(t,n,r,i,a,o){if(a){var s=t.valueDeclaration;if(1!==o||(s?yu(e.getNameOfDeclaration(s)):vu(t.escapedName))){var c;if(!s||194!==s.kind&&144!==e.getNameOfDeclaration(s).kind&&t.parent!==r.symbol){if(i)c=i;else if(2&yn(r)){c=e.forEach(Si(r),(function(e){return oa(e,t.escapedName)&&Ca(e,o)}))?void 0:r.symbol.declarations[0]}}else c=s;if(c&&!Os(n,a))cn(c,0===o?e.Diagnostics.Property_0_of_type_1_is_not_assignable_to_string_index_type_2:e.Diagnostics.Property_0_of_type_1_is_not_assignable_to_numeric_index_type_2,Tr(t),Er(n),Er(a))}}}n&&!Os(o,a)&&cn(n,e.Diagnostics.Numeric_index_type_0_is_not_assignable_to_string_index_type_1,Er(o),Er(a))}function $f(e,t){switch(e.escapedText){case"any":case"number":case"boolean":case"string":case"symbol":case"void":case"object":cn(e,t,e.escapedText)}}function Kf(t){if(t)for(var n=!1,i=0;i<t.length;i++){var a=t[i];if(Ap(a),r){a.default?n=!0:n&&cn(a,e.Diagnostics.Required_type_parameters_may_not_follow_optional_type_parameters);for(var o=0;o<i;o++)t[o].symbol===a.symbol&&cn(a.name,e.Diagnostics.Duplicate_identifier_0,e.declarationNameToString(a.name))}}}function zf(t){if(1!==t.declarations.length){var n=gn(t);if(!n.typeParametersChecked){n.typeParametersChecked=!0;var r=function(t){return e.filter(t.declarations,(function(e){return 229===e.kind||230===e.kind}))}(t);if(r.length<=1)return;if(!function(t,n){for(var r=e.length(n),i=Ia(n),a=0,o=t;a<o.length;a++){var s=o[a],c=e.length(s.typeParameters);if(c<i||c>r)return!1;for(var l=0;l<c;l++){var u=s.typeParameters[l],d=n[l];if(u.name.escapedText!==d.symbol.escapedName)return!1;var p=u.constraint&&ps(u.constraint),f=Ha(d);if((p||f)&&(!p||!f||!ws(p,f)))return!1;var _=u.default&&ps(u.default),m=_a(d);if(_&&m&&!ws(_,m))return!1}}return!0}(r,Pi(t).localTypeParameters))for(var i=Tr(t),a=0,o=r;a<o.length;a++){cn(o[a].name,e.Diagnostics.All_declarations_of_0_must_have_identical_type_parameters,i)}}}}function Jf(t){e.forEach(t.members,c_),of(t)}function qf(t){!function(t){var n=e.getSourceFileOfNode(t);(function(t){var n=!1,r=!1;if(!tm(t)&&!nm(t)&&t.heritageClauses)for(var i=0,a=t.heritageClauses;i<a.length;i++){var o=a[i];if(85===o.token){if(n)return Tm(o,e.Diagnostics.extends_clause_already_seen);if(r)return Tm(o,e.Diagnostics.extends_clause_must_precede_implements_clause);if(o.types.length>1)return Tm(o.types[1],e.Diagnostics.Classes_can_only_extend_a_single_class);n=!0}else{if(e.Debug.assert(108===o.token),r)return Tm(o,e.Diagnostics.implements_clause_already_seen);r=!0}lm(o)}})(t)||am(t.typeParameters,n)}(t),nf(t),t.name&&($f(t.name,e.Diagnostics.Class_name_cannot_be_0),mf(t,t.name),gf(t,t.name),bf(t,t.name),xf(t,t.name)),Kf(t.typeParameters),qp(t);var n=er(t),i=Pi(n),a=ji(i),o=ci(n);zf(n),function(t){var n;!function(e){e[e.Getter=1]="Getter",e[e.Setter=2]="Setter",e[e.Method=4]="Method",e[e.Property=3]="Property"}(n||(n={}));for(var r=e.createUnderscoreEscapedMap(),i=e.createUnderscoreEscapedMap(),a=0,o=t.members;a<o.length;a++){var s=o[a];if(152===s.kind)for(var c=0,l=s.parameters;c<l.length;c++){var u=l[c];e.isParameterPropertyDeclaration(u)&&!e.isBindingPattern(u.name)&&f(r,u.name,u.name.escapedText,3)}else{var d=e.hasModifier(s,32)?i:r,p=s.name&&e.getPropertyNameForPropertyNameNode(s.name);if(p)switch(s.kind){case 153:f(d,s.name,p,1);break;case 154:f(d,s.name,p,2);break;case 149:f(d,s.name,p,3);break;case 151:f(d,s.name,p,4)}}}function f(t,n,r,i){var a=t.get(r);a?4&a?4!==i&&cn(n,e.Diagnostics.Duplicate_identifier_0,e.getTextOfNode(n)):a&i?cn(n,e.Diagnostics.Duplicate_identifier_0,e.getTextOfNode(n)):t.set(r,a|i):t.set(r,i)}}(t),e.isInAmbientContext(t)||function(t){for(var n=0,r=t.members;n<r.length;n++){var i=r[n],a=i.name;if(e.hasModifier(i,32)&&a){var o=e.getPropertyNameForPropertyNameNode(a);switch(o){case"name":case"length":case"caller":case"arguments":case"prototype":cn(a,e.Diagnostics.Static_property_0_conflicts_with_built_in_property_Function_0_of_constructor_function_1,o,Or(er(t)))}}}}(t);var s=e.getClassExtendsHeritageClauseElement(t);if(s){T<2&&Z_(s.parent,1);var c=Si(i);if(c.length&&r){var l=c[0],u=ki(i),d=ma(u);if(function(t,n){var r=xa(t,1);if(r.length){var i=r[0].declaration;if(i&&e.hasModifier(i,8))h_(n,Hf(t.symbol))||cn(n,e.Diagnostics.Cannot_extend_a_class_0_Class_constructor_is_marked_as_private,jn(t.symbol))}}(d,s),c_(s.expression),e.some(s.typeArguments)){e.forEach(s.typeArguments,c_);for(var p=0,f=bi(d,s.typeArguments,s);p<f.length;p++){if(!Bp(f[p].typeParameters,s.typeArguments))break}}if(Rs(a,ji(l,i.thisType),t.name||t,e.Diagnostics.Class_0_incorrectly_extends_base_class_1),Rs(o,As(d),t.name||t,e.Diagnostics.Class_static_side_0_incorrectly_extends_base_class_static_side_1),540672&u.flags&&!hi(o)&&cn(t.name||t,e.Diagnostics.A_mixin_class_must_have_a_constructor_with_a_single_rest_parameter_of_type_any),!(d.symbol&&32&d.symbol.flags||540672&u.flags)){var _=xi(d,s.typeArguments,s);e.forEach(_,(function(e){return Ra(e)!==l}))&&cn(s.expression,e.Diagnostics.Base_constructors_must_all_have_the_same_return_type)}!function(t,n){for(var r=sa(n),i=0,a=r;i<a.length;i++){var o=a[i],s=Vf(o);if(!(4194304&s.flags)){var c=Vf(oa(t,s.escapedName)),l=e.getDeclarationModifierFlagsFromSymbol(s);if(e.Debug.assert(!!c,"derived should point to something, even if it is the base class' declaration."),c)if(c===s){var u=Hf(t.symbol);!(128&l)||u&&e.hasModifier(u,128)||(199===u.kind?cn(u,e.Diagnostics.Non_abstract_class_expression_does_not_implement_inherited_abstract_member_0_from_class_1,Tr(o),Er(n)):cn(u,e.Diagnostics.Non_abstract_class_0_does_not_implement_inherited_abstract_member_1_from_class_2,Er(t),Tr(o),Er(n)))}else{var d=e.getDeclarationModifierFlagsFromSymbol(c);if(8&l||8&d)continue;if(Ku(s)&&Ku(c)||98308&s.flags&&98308&c.flags)continue;var p=void 0;p=Ku(s)?98304&c.flags?e.Diagnostics.Class_0_defines_instance_member_function_1_but_extended_class_2_defines_it_as_instance_member_accessor:e.Diagnostics.Class_0_defines_instance_member_function_1_but_extended_class_2_defines_it_as_instance_member_property:4&s.flags?e.Diagnostics.Class_0_defines_instance_member_property_1_but_extended_class_2_defines_it_as_instance_member_function:e.Diagnostics.Class_0_defines_instance_member_accessor_1_but_extended_class_2_defines_it_as_instance_member_function,cn(e.getNameOfDeclaration(c.valueDeclaration)||c.valueDeclaration,p,Er(n),Tr(s),Er(t))}}}}(i,l)}}var m=e.getClassImplementsHeritageClauseElements(t);if(m)for(var g=0,h=m;g<h.length;g++){var y=h[g];if(e.isEntityNameExpression(y.expression)||cn(y.expression,e.Diagnostics.A_class_can_only_implement_an_identifier_Slashqualified_name_with_optional_type_arguments),jp(y),r){var v=ps(y);v!==W&&(Ti(v)?Rs(a,ji(v,i.thisType),t.name||t,e.Diagnostics.Class_0_incorrectly_implements_interface_1):cn(y,e.Diagnostics.A_class_may_only_implement_another_class_or_interface))}}r&&(jf(i),Fp(t))}function Vf(t){return 1&e.getCheckFlags(t)?t.target:t}function Hf(t){return e.forEach(t.declarations,(function(t){return e.isClassLike(t)?t:void 0}))}function Gf(t){if(tm(t)||nm(t)||function(t){var n=!1;if(t.heritageClauses)for(var r=0,i=t.heritageClauses;r<i.length;r++){var a=i[r];if(85!==a.token)return e.Debug.assert(108===a.token),Tm(a,e.Diagnostics.Interface_declaration_cannot_have_implements_clause);if(n)return Tm(a,e.Diagnostics.extends_clause_already_seen);n=!0,lm(a)}}(t),Kf(t.typeParameters),r){$f(t.name,e.Diagnostics.Interface_name_cannot_be_0),qp(t);var n=er(t);if(zf(n),t===e.getDeclarationOfKind(n,230)){var i=Pi(n),a=ji(i);if(function(t,n){var r=Si(t);if(r.length<2)return!0;var i=e.createUnderscoreEscapedMap();e.forEach(Bi(t).declaredProperties,(function(e){i.set(e.escapedName,{prop:e,containingType:t})}));for(var a=!0,o=0,s=r;o<s.length;o++)for(var c=s[o],l=0,u=sa(ji(c,t.thisType));l<u.length;l++){var d=u[l],p=i.get(d.escapedName);if(p){if(p.containingType!==t&&0===rc(p.prop,d,Ns)){a=!1;var f=Er(p.containingType),_=Er(c),m=e.chainDiagnosticMessages(void 0,e.Diagnostics.Named_property_0_of_types_1_and_2_are_not_identical,Tr(d),f,_);m=e.chainDiagnosticMessages(m,e.Diagnostics.Interface_0_cannot_simultaneously_extend_types_1_and_2,Er(t),f,_),wt.add(e.createDiagnosticForNodeFromMessageChain(n,m))}}else i.set(d.escapedName,{prop:d,containingType:c})}return a}(i,t.name)){for(var o=0,s=Si(i);o<s.length;o++){Rs(a,ji(s[o],i.thisType),t.name,e.Diagnostics.Interface_0_incorrectly_extends_interface_1)}jf(i)}}Op(t)}e.forEach(e.getInterfaceBaseTypeNodes(t),(function(t){e.isEntityNameExpression(t.expression)||cn(t.expression,e.Diagnostics.An_interface_can_only_extend_an_identifier_Slashqualified_name_with_optional_type_arguments),jp(t)})),e.forEach(t.members,c_),r&&(Fp(t),of(t))}function Wf(e){var t=hn(e);if(!(16384&t.flags)){t.flags|=16384;for(var n=0,r=0,i=e.members;r<i.length;r++){var a=i[r],o=Qf(a,n);hn(a).enumMemberValue=o,n="number"==typeof o?o+1:void 0}}}function Qf(t,n){if(qr(t.name))cn(t.name,e.Diagnostics.Computed_property_names_are_not_allowed_in_enums);else{var r=e.getTextOfPropertyName(t.name);vu(r)&&("Infinity"!==(i=r)&&"-Infinity"!==i&&"NaN"!==i)&&cn(t.name,e.Diagnostics.An_enum_member_cannot_have_a_numeric_name)}var i;return t.initializer?function(t){var n=Di(er(t.parent)),r=e.isConst(t.parent),i=t.initializer,a=1!==n||Ei(t)?o(i):void 0;if(void 0!==a)r&&"number"==typeof a&&!isFinite(a)&&cn(i,isNaN(a)?e.Diagnostics.const_enum_member_initializer_was_evaluated_to_disallowed_value_NaN:e.Diagnostics.const_enum_member_initializer_was_evaluated_to_a_non_finite_value);else{if(1===n)return cn(i,e.Diagnostics.Computed_values_are_not_permitted_in_an_enum_with_string_valued_members),0;r?cn(i,e.Diagnostics.In_const_enum_declarations_member_initializer_must_be_constant_expression):e.isInAmbientContext(t.parent)?cn(i,e.Diagnostics.In_ambient_enum_declarations_member_initializer_must_be_constant_expression):Rs(Dp(i),Pi(er(t.parent)),i,void 0)}return a;function o(n){switch(n.kind){case 192:var r=o(n.operand);if("number"==typeof r)switch(n.operator){case 37:return r;case 38:return-r;case 52:return~r}break;case 194:var i=o(n.left),a=o(n.right);if("number"==typeof i&&"number"==typeof a)switch(n.operatorToken.kind){case 49:return i|a;case 48:return i&a;case 46:return i>>a;case 47:return i>>>a;case 45:return i<<a;case 50:return i^a;case 39:return i*a;case 41:return i/a;case 37:return i+a;case 38:return i-a;case 42:return i%a}break;case 9:return n.text;case 8:return wm(n),+n.text;case 185:return o(n.expression);case 71:return e.nodeIsMissing(n)?0:s(n,er(t.parent),n.escapedText);case 180:case 179:var c=n;if(Yf(c)){var l=Ep(c.expression);if(l.symbol&&384&l.symbol.flags){var u=void 0;if(179===c.kind)u=c.name.escapedText;else{var d=c.argumentExpression;e.Debug.assert(e.isLiteralExpression(d)),u=e.escapeLeadingUnderscores(d.text)}return s(n,l.symbol,u)}}}}function s(n,r,i){var a=r.exports.get(i);if(a){var o=a.valueDeclaration;if(o!==t)return xn(o,t)?hn(o).enumMemberValue:(cn(n,e.Diagnostics.A_member_initializer_in_a_enum_declaration_cannot_reference_members_declared_after_it_including_members_defined_in_other_enums),0)}}}(t):!e.isInAmbientContext(t.parent)||e.isConst(t.parent)?void 0!==n?n:void cn(t.name,e.Diagnostics.Enum_member_must_have_initializer):void 0}function Yf(e){return 71===e.kind||179===e.kind&&Yf(e.expression)||180===e.kind&&Yf(e.expression)&&9===e.argumentExpression.kind}function Xf(t){if(r){var n=e.isGlobalScopeAugmentation(t),i=e.isInAmbientContext(t);n&&!i&&cn(t.name,e.Diagnostics.Augmentations_for_the_global_scope_should_have_declare_modifier_unless_they_appear_in_already_ambient_context);var a=e.isAmbientModule(t);if(i_(t,a?e.Diagnostics.An_ambient_module_declaration_is_only_allowed_at_the_top_level_in_a_file:e.Diagnostics.A_namespace_declaration_is_only_allowed_in_a_namespace_or_module))return;tm(t)||nm(t)||i||9!==t.name.kind||Em(t.name,e.Diagnostics.Only_ambient_modules_can_use_quoted_names),e.isIdentifier(t.name)&&(mf(t,t.name),bf(t,t.name),xf(t,t.name)),qp(t);var o=er(t);if(512&o.flags&&o.declarations.length>1&&!i&&c(t,S.preserveConstEnums||S.isolatedModules)){var s=function(t){for(var n=0,r=t.declarations;n<r.length;n++){var i=r[n];if((229===i.kind||228===i.kind&&e.nodeIsPresent(i.body))&&!e.isInAmbientContext(i))return i}}(o);s&&(e.getSourceFileOfNode(t)!==e.getSourceFileOfNode(s)?cn(t.name,e.Diagnostics.A_namespace_declaration_cannot_be_in_a_different_file_from_a_class_or_function_with_which_it_is_merged):t.pos<s.pos&&cn(t.name,e.Diagnostics.A_namespace_declaration_cannot_be_located_prior_to_a_class_or_function_with_which_it_is_merged));var l=e.getDeclarationOfKind(o,229);l&&(p=t,f=l,_=e.getEnclosingBlockScopeContainer(p),m=e.getEnclosingBlockScopeContainer(f),vn(_)?vn(m):!vn(m)&&_===m)&&(hn(t).flags|=32768)}if(a)if(e.isExternalModuleAugmentation(t)){if((n||33554432&er(t).flags)&&t.body)for(var u=0,d=t.body.statements;u<d.length;u++){Zf(d[u],n)}}else vn(t.parent)?n?cn(t.name,e.Diagnostics.Augmentations_for_the_global_scope_can_only_be_directly_nested_in_external_modules_or_ambient_module_declarations):e.isExternalModuleNameRelative(e.getTextOfIdentifierOrLiteral(t.name))&&cn(t.name,e.Diagnostics.Ambient_module_declaration_cannot_specify_relative_module_name):cn(t.name,n?e.Diagnostics.Augmentations_for_the_global_scope_can_only_be_directly_nested_in_external_modules_or_ambient_module_declarations:e.Diagnostics.Ambient_modules_cannot_be_nested_in_other_modules_or_namespaces)}var p,f,_,m;t.body&&(c_(t.body),e.isGlobalScopeAugmentation(t)||of(t))}function Zf(t,n){switch(t.kind){case 208:for(var r=0,i=t.declarationList.declarations;r<i.length;r++){Zf(i[r],n)}break;case 243:case 244:Tm(t,e.Diagnostics.Exports_and_export_assignments_are_not_permitted_in_module_augmentations);break;case 237:case 238:Tm(t,e.Diagnostics.Imports_are_not_permitted_in_module_augmentations_Consider_moving_them_to_the_enclosing_external_module);break;case 176:case 226:var a=t.name;if(e.isBindingPattern(a)){for(var o=0,s=a.elements;o<s.length;o++){Zf(s[o],n)}break}case 229:case 232:case 228:case 230:case 233:case 231:if(n)return;var c=er(t);if(c){var l=!(33554432&c.flags);l||(l=e.isExternalModuleAugmentation(c.parent.declarations[0]))}}}function e_(e){switch(e.kind){case 71:return e;case 143:do{e=e.left}while(71!==e.kind);return e;case 179:do{e=e.expression}while(71!==e.kind);return e}}function t_(t){var n=e.getExternalModuleName(t);if(!e.nodeIsMissing(n)&&9!==n.kind)return cn(n,e.Diagnostics.String_literal_expected),!1;var r=234===t.parent.kind&&e.isAmbientModule(t.parent.parent);return 265===t.parent.kind||r?!(r&&e.isExternalModuleNameRelative(e.getTextOfIdentifierOrLiteral(n))&&!Ir(t))||(cn(t,e.Diagnostics.Import_or_export_declaration_in_an_ambient_module_declaration_cannot_reference_module_through_relative_module_name),!1):(cn(n,244===t.kind?e.Diagnostics.Export_declarations_are_not_permitted_in_a_namespace:e.Diagnostics.Import_declarations_in_a_namespace_cannot_reference_a_module),!1)}function n_(t){var n=er(t),r=Rn(n);if(r!==q){var i=(1156031&n.flags?107455:0)|(793064&n.flags?793064:0)|(1920&n.flags?1920:0);if(r.flags&i)cn(t,246===t.kind?e.Diagnostics.Export_declaration_conflicts_with_exported_declaration_of_0:e.Diagnostics.Import_declaration_conflicts_with_local_declaration_of_0,Tr(n));!S.isolatedModules||246!==t.kind||107455&r.flags||e.isInAmbientContext(t)||cn(t,e.Diagnostics.Cannot_re_export_a_type_when_the_isolatedModules_flag_is_provided)}}function r_(e){mf(e,e.name),bf(e,e.name),xf(e,e.name),n_(e)}function i_(e,t){var n=265===e.parent.kind||234===e.parent.kind||233===e.parent.kind;return n||Tm(e,t),!n}function a_(t){if(n_(t),!t.parent.parent.moduleSpecifier){var n=t.propertyName||t.name,r=kn(n,n.escapedText,2998271,void 0,void 0,!0);r&&(r===F||vn($r(r.declarations[0])))?cn(n,e.Diagnostics.Cannot_export_0_Only_local_declarations_can_be_exported_from_a_module,e.idText(n)):Mn(t)}}function o_(t){var n=er(t),r=gn(n);if(!r.exportsChecked){var i=n.exports.get("export=");if(i&&function(t){return e.forEachEntry(t.exports,(function(e,t){return"export="!==t}))}(n)){var a=Nn(i)||i.valueDeclaration;Ir(a)||cn(a,e.Diagnostics.An_export_assignment_cannot_be_used_in_a_module_with_other_exported_elements)}var o=Yn(n);o&&o.forEach((function(t,n){var r=t.declarations,i=t.flags;if("__export"!==n&&!(1984&i)){var a=e.countWhere(r,on);if(!(524288&i&&a<=2)&&a>1)for(var o=0,s=r;o<s.length;o++){var c=s[o];s_(c)&&wt.add(e.createDiagnosticForNode(c,e.Diagnostics.Cannot_redeclare_exported_variable_0,e.unescapeLeadingUnderscores(n)))}}})),r.exportsChecked=!0}}function s_(e){return 228!==e.kind&&151!==e.kind||!!e.body}function c_(t){if(t){if(e.isInJavaScriptFile(t)&&t.jsDoc)for(var n=0,i=t.jsDoc;n<i.length;n++){var a=i[n].tags;e.forEach(a,c_)}var o=t.kind;if(d)switch(o){case 233:case 229:case 230:case 228:d.throwIfCancellationRequested()}switch(o){case 145:return Ap(t);case 146:return wp(t);case 149:case 148:return Lp(t);case 160:case 161:case 155:case 156:case 157:return Pp(t);case 151:case 150:return function(t){hm(t)||dm(t.name),af(t),e.hasModifier(t,128)&&t.body&&cn(t,e.Diagnostics.Method_0_cannot_have_an_implementation_because_it_is_marked_abstract,e.declarationNameToString(t.name))}(t);case 152:return Rp(t);case 153:case 154:return Mp(t);case 159:return jp(t);case 158:return function(t){var n=function(e){switch(e.parent.kind){case 187:case 155:case 228:case 186:case 160:case 151:case 150:var t=e.parent;if(e===t.type)return t}}(t);if(n){var r=Oa(n).typePredicate;if(r){c_(t.type);var i=t.parameterName;if(e.isThisTypePredicate(r))ds(i);else if(r.parameterIndex>=0)if(n.parameters[r.parameterIndex].dotDotDotToken)cn(i,e.Diagnostics.A_type_predicate_cannot_reference_a_rest_parameter);else{var a=e.chainDiagnosticMessages(void 0,e.Diagnostics.A_type_predicate_s_type_must_be_assignable_to_its_parameter_s_type);Rs(r.type,x_(n.parameters[r.parameterIndex]),t.type,void 0,a)}else if(i){for(var o=!1,s=0,c=n.parameters;s<c.length;s++){var l=c[s].name;if(e.isBindingPattern(l)&&Ip(l,i,r.parameterName)){o=!0;break}}o||cn(t.parameterName,e.Diagnostics.Cannot_find_parameter_0,r.parameterName)}}}else cn(t,e.Diagnostics.A_type_predicate_is_only_allowed_in_return_type_position_for_functions_and_methods)}(t);case 162:return function(e){co(e)}(t);case 163:return function(t){e.forEach(t.members,c_),r&&(jf(ts(t)),Fp(t),Op(t))}(t);case 164:return function(e){c_(e.elementType)}(t);case 165:return function(t){im(t.elementTypes)||0!==t.elementTypes.length||Em(t,e.Diagnostics.A_tuple_type_element_list_cannot_be_empty),e.forEach(t.elementTypes,c_)}(t);case 166:case 167:return function(t){e.forEach(t.types,c_)}(t);case 168:case 170:return c_(t.type);case 277:return function(t){var n=e.getJSDocHost(t);if(e.isClassDeclaration(n)||e.isClassExpression(n)){var r=e.getAllJSDocTagsOfKind(n,277);e.Debug.assert(r.length>0),r.length>1&&cn(r[1],e.Diagnostics.Class_declarations_cannot_have_more_than_one_augments_or_extends_tag);var i=rf(t.class.expression),a=e.getClassExtendsHeritageClauseElement(n);if(a){var o=rf(a.expression);o&&i.escapedText!==o.escapedText&&cn(i,e.Diagnostics.JSDoc_0_1_does_not_match_the_extends_2_clause,e.idText(t.tagName),e.idText(i),e.idText(o))}}else cn(n,e.Diagnostics.JSDoc_0_is_not_attached_to_a_class,e.idText(t.tagName))}(t);case 283:return function(t){t.typeExpression||cn(t.name,e.Diagnostics.JSDoc_typedef_tag_should_either_have_a_type_annotation_or_be_followed_by_property_or_member_tags)}(t);case 279:return function(t){c_(t.typeExpression),e.getParameterSymbolFromJSDoc(t)||cn(t.name,e.Diagnostics.JSDoc_param_tag_has_name_0_but_there_is_no_parameter_with_that_name,e.idText(143===t.name.kind?t.name.right:t.name))}(t);case 273:Pp(t);case 274:case 271:case 270:case 268:case 269:return void(e.isInJavaScriptFile(t)||e.isInJSDoc(t)||Em(t,e.Diagnostics.JSDoc_types_can_only_be_used_inside_documentation_comments));case 267:return c_(t.type);case 171:return function(e){c_(e.objectType),c_(e.indexType),$p(Zo(e),e)}(t);case 172:return function(e){c_(e.typeParameter),c_(e.type),Rs(ta(es(e)),ee,e.typeParameter.constraint)}(t);case 228:return function(e){r&&(af(e),pm(e),vf(e,e.name),mf(e,e.name),gf(e,e.name),bf(e,e.name),xf(e,e.name))}(t);case 207:case 234:return ff(t);case 208:return Df(t);case 210:return function(e){Am(e),Dp(e.expression)}(t);case 211:return function(t){Am(t),Dp(t.expression),c_(t.thenStatement),209===t.thenStatement.kind&&cn(t.thenStatement,e.Diagnostics.The_body_of_an_if_statement_cannot_be_the_empty_statement),c_(t.elseStatement)}(t);case 212:return function(e){Am(e),c_(e.statement),Dp(e.expression)}(t);case 213:return function(e){Am(e),Dp(e.expression),c_(e.statement)}(t);case 214:return function(t){Am(t)||t.initializer&&227===t.initializer.kind&&xm(t.initializer),t.initializer&&(227===t.initializer.kind?e.forEach(t.initializer.declarations,Cf):Dp(t.initializer)),t.condition&&Dp(t.condition),t.incrementor&&Dp(t.incrementor),c_(t.statement),t.locals&&of(t)}(t);case 215:return Af(t);case 216:return function(t){if(_m(t),216===t.kind&&(t.awaitModifier?2==(6&e.getFunctionFlags(e.getContainingFunction(t)))&&T<5&&Z_(t,16384):S.downlevelIteration&&T<2&&Z_(t,256)),227===t.initializer.kind)wf(t);else{var n=t.initializer,r=Nf(t.expression,t.awaitModifier);if(177===n.kind||178===n.kind)up(n,r||W);else{var i=Dp(n);rp(n,e.Diagnostics.The_left_hand_side_of_a_for_of_statement_must_be_a_variable_or_a_property_access),r&&Rs(r,i,n,void 0)}}c_(t.statement),t.locals&&of(t)}(t);case 217:case 218:return Rf(t);case 219:return function(t){Am(t)||e.getContainingFunction(t)||Tm(t,e.Diagnostics.A_return_statement_can_only_be_used_within_a_function_body);var n=e.getContainingFunction(t);if(n){var r=Ra(Oa(n));if(A||t.expression||8192&r.flags){var i=t.expression?yp(t.expression):Q,a=e.getFunctionFlags(n);if(1&a)return;if(154===n.kind)t.expression&&cn(t,e.Diagnostics.Setters_cannot_return_a_value);else if(152===n.kind)t.expression&&!Rs(i,r,t)&&cn(t,e.Diagnostics.Return_type_of_constructor_signature_must_be_assignable_to_the_instance_type_of_the_class);else if(e.getEffectiveReturnTypeNode(n)||Mf(n))if(2&a){var o=Hp(r),s=Gp(i,t,e.Diagnostics.The_return_type_of_an_async_function_must_either_be_a_valid_promise_or_must_not_contain_a_callable_then_member);o&&Rs(s,o,t)}else Rs(i,r,t)}else 152!==n.kind&&S.noImplicitReturns&&!Uf(n,r)&&cn(t,e.Diagnostics.Not_all_code_paths_return_a_value)}}(t);case 220:return function(t){Am(t)||16384&t.flags&&Tm(t,e.Diagnostics.with_statements_are_not_allowed_in_an_async_function_block),Dp(t.expression);var n=e.getSourceFileOfNode(t);if(!Sm(n)){var r=e.getSpanOfTokenAtPosition(n,t.pos).start;Cm(n,r,t.statement.pos-r,e.Diagnostics.The_with_statement_is_not_supported_All_symbols_in_a_with_block_will_have_type_any)}}(t);case 221:return function(t){var n;Am(t);var i=!1,a=Dp(t.expression),o=dc(a);e.forEach(t.caseBlock.clauses,(function(s){if(258===s.kind&&!i)if(void 0===n)n=s;else{var c=e.getSourceFileOfNode(t),l=e.skipTrivia(c.text,s.pos);Cm(c,l,(s.statements.length>0?s.statements[0].pos:s.end)-l,e.Diagnostics.A_default_clause_cannot_appear_more_than_once_in_a_switch_statement),i=!0}if(r&&257===s.kind){var u=s,d=Dp(u.expression),p=dc(d),f=a;p&&o||(d=p?pc(d):d,f=pc(a)),pp(f,d)||Ms(d,f,u.expression,void 0)}e.forEach(s.statements,c_)})),t.caseBlock.locals&&of(t.caseBlock)}(t);case 222:return function(t){Am(t)||e.findAncestor(t.parent,(function(n){if(e.isFunctionLike(n))return"quit";if(222===n.kind&&n.label.escapedText===t.label.escapedText){var r=e.getSourceFileOfNode(t);return Em(t.label,e.Diagnostics.Duplicate_label_0,e.getTextOfNodeFromSourceText(r.text,t.label)),!0}})),c_(t.statement)}(t);case 223:return Bf(t);case 224:return function(t){Am(t),ff(t.tryBlock);var n=t.catchClause;if(n){if(n.variableDeclaration)if(n.variableDeclaration.type)Tm(n.variableDeclaration.type,e.Diagnostics.Catch_clause_variable_cannot_have_a_type_annotation);else if(n.variableDeclaration.initializer)Tm(n.variableDeclaration.initializer,e.Diagnostics.Catch_clause_variable_cannot_have_an_initializer);else{var r=n.block.locals;r&&e.forEachKey(n.locals,(function(t){var n=r.get(t);n&&0!=(2&n.flags)&&Em(n.valueDeclaration,e.Diagnostics.Cannot_redeclare_identifier_0_in_catch_clause,t)}))}ff(n.block)}t.finallyBlock&&ff(t.finallyBlock)}(t);case 226:return Cf(t);case 176:return Ef(t);case 229:return function(t){t.name||e.hasModifier(t,512)||Tm(t,e.Diagnostics.A_class_declaration_without_the_default_modifier_must_have_a_name),qf(t),e.forEach(t.members,c_),of(t)}(t);case 230:return Gf(t);case 231:return function(t){tm(t)||nm(t),$f(t.name,e.Diagnostics.Type_alias_name_cannot_be_0),Kf(t.typeParameters),c_(t.type),of(t)}(t);case 232:return function(t){if(r){tm(t)||nm(t),$f(t.name,e.Diagnostics.Enum_name_cannot_be_0),mf(t,t.name),gf(t,t.name),bf(t,t.name),xf(t,t.name),qp(t),Wf(t);var n=e.isConst(t);S.isolatedModules&&n&&e.isInAmbientContext(t)&&cn(t.name,e.Diagnostics.Ambient_const_enums_are_not_allowed_when_the_isolatedModules_flag_is_provided);var i=er(t);if(t===e.getDeclarationOfKind(i,t.kind)){i.declarations.length>1&&e.forEach(i.declarations,(function(t){e.isConstEnumDeclaration(t)!==n&&cn(e.getNameOfDeclaration(t),e.Diagnostics.Enum_declarations_must_all_be_const_or_non_const)}));var a=!1;e.forEach(i.declarations,(function(t){if(232!==t.kind)return!1;var n=t;if(!n.members.length)return!1;var r=n.members[0];r.initializer||(a?cn(r.name,e.Diagnostics.In_an_enum_with_multiple_declarations_only_one_declaration_can_omit_an_initializer_for_its_first_enum_element):a=!0)}))}}}(t);case 233:return Xf(t);case 238:return function(t){if(!i_(t,e.Diagnostics.An_import_declaration_can_only_be_used_in_a_namespace_or_module)&&(tm(t)||nm(t)||!e.hasModifiers(t)||Tm(t,e.Diagnostics.An_import_declaration_cannot_have_modifiers),t_(t))){var n=t.importClause;n&&(n.name&&r_(n),n.namedBindings&&(240===n.namedBindings.kind?r_(n.namedBindings):e.forEach(n.namedBindings.elements,r_)))}}(t);case 237:return function(t){if(!i_(t,e.Diagnostics.An_import_declaration_can_only_be_used_in_a_namespace_or_module)&&(tm(t)||nm(t),e.isInternalModuleImportEqualsDeclaration(t)||t_(t)))if(r_(t),e.hasModifier(t,1)&&Mn(t),e.isInternalModuleImportEqualsDeclaration(t)){var n=Rn(er(t));if(n!==q){if(107455&n.flags){var r=e_(t.moduleReference);1920&$n(r,108479).flags||cn(r,e.Diagnostics.Module_0_is_hidden_by_a_local_declaration_with_the_same_name,e.declarationNameToString(r))}793064&n.flags&&$f(t.name,e.Diagnostics.Import_name_cannot_be_0)}}else C>=e.ModuleKind.ES2015&&!e.isInAmbientContext(t)&&Em(t,e.Diagnostics.Import_assignment_cannot_be_used_when_targeting_ECMAScript_modules_Consider_using_import_Asterisk_as_ns_from_mod_import_a_from_mod_import_d_from_mod_or_another_module_format_instead)}(t);case 244:return function(t){if(!i_(t,e.Diagnostics.An_export_declaration_can_only_be_used_in_a_module)&&(tm(t)||nm(t)||!e.hasModifiers(t)||Tm(t,e.Diagnostics.An_export_declaration_cannot_have_modifiers),!t.moduleSpecifier||t_(t)))if(t.exportClause){e.forEach(t.exportClause.elements,a_);var n=234===t.parent.kind&&e.isAmbientModule(t.parent.parent),r=!n&&234===t.parent.kind&&!t.moduleSpecifier&&e.isInAmbientContext(t);265===t.parent.kind||n||r||cn(t,e.Diagnostics.Export_declarations_are_not_permitted_in_a_namespace)}else{var i=Kn(t,t.moduleSpecifier);i&&Hn(i)&&cn(t.moduleSpecifier,e.Diagnostics.Module_0_uses_export_and_cannot_be_used_with_export_Asterisk,Tr(i)),C!==e.ModuleKind.System&&C!==e.ModuleKind.ES2015&&C!==e.ModuleKind.ESNext&&Z_(t,32768)}}(t);case 243:return function(t){if(!i_(t,e.Diagnostics.An_export_assignment_can_only_be_used_in_a_module)){var n=265===t.parent.kind?t.parent:t.parent.parent;233!==n.kind||e.isAmbientModule(n)?(tm(t)||nm(t)||!e.hasModifiers(t)||Tm(t,e.Diagnostics.An_export_assignment_cannot_have_modifiers),71===t.expression.kind?Mn(t):yp(t.expression),o_(n),e.isInAmbientContext(t)&&!e.isEntityNameExpression(t.expression)&&Em(t.expression,e.Diagnostics.The_expression_of_an_export_assignment_must_be_an_identifier_or_qualified_name_in_an_ambient_context),t.isExportEquals&&!e.isInAmbientContext(t)&&(C>=e.ModuleKind.ES2015?Em(t,e.Diagnostics.Export_assignment_cannot_be_used_when_targeting_ECMAScript_modules_Consider_using_export_default_or_another_module_format_instead):C===e.ModuleKind.System&&Em(t,e.Diagnostics.Export_assignment_is_not_supported_when_module_flag_is_system))):t.isExportEquals?cn(t,e.Diagnostics.An_export_assignment_cannot_be_used_in_a_namespace):cn(t,e.Diagnostics.A_default_export_can_only_be_used_in_an_ECMAScript_style_module)}}(t);case 209:case 225:return void Am(t);case 247:return function(e){nf(e)}(t)}}}function l_(e){Qe&&Qe.push(e)}function u_(t){e.performance.mark("beforeCheck"),function(t){var n=hn(t);if(!(1&n.flags)){if(S.skipLibCheck&&t.isDeclarationFile||S.skipDefaultLibCheck&&t.hasNoDefaultLib)return;!function(t){e.isInAmbientContext(t)&&function(t){for(var n=0,r=t.statements;n<r.length;n++){var i=r[n];if((e.isDeclaration(i)||208===i.kind)&&Dm(i))return!0}}(t)}(t),e.clear(Et),e.clear(Dt),Qe=[],Ye=r&&E?[]:void 0,ut=!1,e.forEach(t.statements,c_),function(){for(var e=0,t=Qe;e<t.length;e++){var n=t[e];switch(n.kind){case 186:case 187:case 151:case 150:Xd(n);break;case 153:case 154:Mp(n);break;case 199:Jf(n)}}}(),e.isExternalModule(t)&&of(t),t.isDeclarationFile||function(){if(Ye)for(var e=0,t=Ye;e<t.length;e++){var n=t[e];switch(n.kind){case 265:case 233:pf(n);break;case 229:case 199:uf(n),df(n);break;case 230:df(n);break;case 207:case 235:case 214:case 215:case 216:sf(n);break;case 152:case 186:case 228:case 187:case 151:case 153:case 154:n.body&&sf(n),df(n);break;case 150:case 155:case 156:case 157:case 160:case 161:case 231:df(n)}}}(),Qe=void 0,Ye=void 0,e.isExternalOrCommonJsModule(t)&&o_(t),Et.length&&(e.forEach(Et,hf),e.clear(Et)),Dt.length&&(e.forEach(Dt,yf),e.clear(Dt)),n.flags|=1}}(t),e.performance.mark("afterCheck"),e.performance.measure("Check","beforeCheck","afterCheck")}function d_(t,r){try{return d=r,function(t){if(p_(),t){var r=wt.getGlobalDiagnostics(),i=r.length;u_(t);var a=wt.getDiagnostics(t.fileName),o=wt.getGlobalDiagnostics();if(o!==r){var s=e.relativeComplement(r,o,e.compareDiagnostics);return e.concatenate(s,a)}return 0===i&&o.length>0?e.concatenate(o,a):a}return e.forEach(n.getSourceFiles(),u_),wt.getDiagnostics()}(t)}finally{d=void 0}}function p_(){if(!r)throw new Error("Trying to get diagnostics from a type checker that does not produce them.")}function f_(e){if(e)for(;e.parent;){if(220===e.parent.kind&&e.parent.statement===e)return!0;e=e.parent}return!1}function __(e){switch(e.kind){case 145:case 229:case 230:case 231:case 232:return!0}}function m_(e){for(var t=e;t.parent&&143===t.parent.kind;)t=t.parent;return t.parent&&159===t.parent.kind}function g_(t,n){for(var r;(t=e.getContainingClass(t))&&!(r=n(t)););return r}function h_(e,t){return!!g_(e,(function(e){return e===t}))}function y_(e){return void 0!==function(e){for(;143===e.parent.kind;)e=e.parent;return 237===e.parent.kind?e.parent.moduleReference===e&&e.parent:243===e.parent.kind?e.parent.expression===e&&e.parent:void 0}(e)}function v_(t){if(e.isDeclarationName(t))return er(t.parent);if(e.isInJavaScriptFile(t)&&179===t.parent.kind&&t.parent===t.parent.parent.left){var n=function(t){switch(e.getSpecialPropertyAssignmentKind(t.parent.parent)){case 1:case 3:return er(t.parent);case 4:case 2:case 5:return er(t.parent.parent)}}(t);if(n)return n}if(243===t.parent.kind&&e.isEntityNameExpression(t))return $n(t,2998271);if(179!==t.kind&&y_(t)){var r=e.getAncestor(t,237);return e.Debug.assert(void 0!==r),Bn(t,!0)}if(e.isRightSideOfQualifiedNameOrPropertyAccess(t)&&(t=t.parent),function(e){for(var t=e;t.parent&&179===t.parent.kind;)t=t.parent;return t.parent&&201===t.parent.kind}(t)){var i=0;201===t.parent.kind?(i=793064,e.isExpressionWithTypeArgumentsInClassExtendsClause(t.parent)&&(i|=107455)):i=1920;var a=$n(t,i|=2097152);if(a)return a}if(279===t.parent.kind)return e.getParameterSymbolFromJSDoc(t.parent);if(145===t.parent.kind&&282===t.parent.parent.kind){e.Debug.assert(!e.isInJavaScriptFile(t));var o=e.getTypeParameterFromJsDoc(t.parent);return o&&o.symbol}if(e.isPartOfExpression(t)){if(e.nodeIsMissing(t))return;if(71===t.kind)return e.isJSXTagName(t)&&Cu(t)?Au(t.parent):$n(t,107455,!1,!0);if(179===t.kind||143===t.kind){var s=hn(t);return s.resolvedSymbol||(179===t.kind?Vu(t):Hu(t)),s.resolvedSymbol}}else{if(m_(t))return $n(t,i=159===t.parent.kind?793064:1920,!1,!0);if(253===t.parent.kind)return va(Ru((c=t.parent).parent.parent),c.name.escapedText)||q}var c;return 158===t.parent.kind?$n(t,1):void 0}function b_(t){if(265===t.kind)return e.isExternalModule(t)?Zn(t.symbol):void 0;if(!f_(t)){if(l(t))return er(t.parent);if(e.isLiteralComputedPropertyDeclarationName(t))return er(t.parent.parent);if(71===t.kind){if(y_(t))return v_(t);if(176===t.parent.kind&&174===t.parent.parent.kind&&t===t.parent.propertyName){var n=x_(t.parent.parent),r=n&&va(n,t.escapedText);if(r)return r}}switch(t.kind){case 71:case 179:case 143:return v_(t);case 99:var i=e.getThisContainer(t,!1);if(e.isFunctionLike(i)){var a=Oa(i);if(a.thisParameter)return a.thisParameter}if(e.isInExpressionContext(t))return Dp(t).symbol;case 169:return ds(t).symbol;case 97:return Dp(t).symbol;case 123:var o=t.parent;return o&&152===o.kind?o.parent.symbol:void 0;case 9:if(e.isExternalModuleImportEqualsDeclaration(t.parent.parent)&&e.getExternalModuleImportEqualsDeclarationExpression(t.parent.parent)===t||(238===t.parent.kind||244===t.parent.kind)&&t.parent.moduleSpecifier===t||e.isInJavaScriptFile(t)&&e.isRequireCall(t.parent,!1)||e.isImportCall(t.parent))return Kn(t,t);case 8:var s=e.isElementAccessExpression(t.parent)?t.parent.argumentExpression===t?Ep(t.parent.expression):void 0:e.isLiteralTypeNode(t.parent)&&e.isIndexedAccessTypeNode(t.parent.parent)?ps(t.parent.parent.objectType):void 0;return s&&va(s,e.escapeLeadingUnderscores(t.text));case 79:return er(t.parent);default:return}}}function x_(t){if(f_(t))return W;if(e.isPartOfTypeNode(t)){var n=ps(t);if(n&&e.isExpressionWithTypeArgumentsInClassImplementsClause(t))n=ji(n,(r=x_(e.getContainingClass(t))).thisType);return n}if(e.isPartOfExpression(t))return S_(t);if(e.isExpressionWithTypeArgumentsInClassExtendsClause(t)){var r,i=Si(r=Pi(er(e.getContainingClass(t))))[0];return i&&ji(i,r.thisType)}var a;if(__(t))return Pi(o=er(t));if(71===(a=t).kind&&__(a.parent)&&a.parent.name===a)return(o=b_(t))&&Pi(o);if(e.isDeclaration(t))return ci(o=er(t));if(l(t))return(o=b_(t))&&ci(o);if(e.isBindingPattern(t))return Yr(t.parent,!0);if(y_(t)){var o,s=(o=b_(t))&&Pi(o);return s!==W?s:ci(o)}return W}function k_(t){if(e.Debug.assert(178===t.kind||177===t.kind),216===t.parent.kind)return up(t,Nf(t.parent.expression,t.parent.awaitModifier)||W);if(194===t.parent.kind)return up(t,Ep(t.parent.right)||W);if(261===t.parent.kind)return cp(k_(t.parent.parent)||W,t.parent);e.Debug.assert(177===t.parent.kind);var n=k_(t.parent),r=If(n||W,t.parent,!1,!1)||W;return lp(t.parent,n,e.indexOf(t.parent.elements,t),r||W)}function S_(t){return e.isRightSideOfQualifiedNameOrPropertyAccess(t)&&(t=t.parent),ls(Ep(t))}function T_(t){if(!e.isGeneratedIdentifier(t)&&(t=e.getParseTreeNode(t,e.isIdentifier)))return!(179===t.parent.kind&&t.parent.name===t)&&G_(t)===M;return!1}function C_(t){var n=Kn(t.parent,t);if(!n||e.isShorthandAmbientModuleSymbol(n))return!0;var r=Hn(n),i=gn(n=qn(n));return void 0===i.exportsSomeValue&&(i.exportsSomeValue=r?!!(107455&n.flags):e.forEachEntry(Yn(n),(function(e){return(e=Ln(e))&&!!(107455&e.flags)}))),i.exportsSomeValue}function E_(t,n){if(t=e.getParseTreeNode(t,e.isIdentifier)){var r=G_(t,function(t){var n=t.parent;return n&&e.isModuleOrEnumDeclaration(n)&&t===n.name}(t));if(r){if(1048576&r.flags){var i=Zn(r.exportSymbol);if(!n&&944&i.flags)return;r=i}var a=tr(r);if(a){if(512&a.flags&&265===a.valueDeclaration.kind){var o=a.valueDeclaration;return o!==e.getSourceFileOfNode(t)?void 0:o}return e.findAncestor(t.parent,(function(t){return e.isModuleOrEnumDeclaration(t)&&er(t)===a}))}}}}function D_(t){if(t=e.getParseTreeNode(t,e.isIdentifier)){var n=G_(t);if(Fn(n,107455))return Nn(n)}}function A_(t){if(418&t.flags){var n=gn(t);if(void 0===n.isDeclarationWithCollidingName){var r=e.getEnclosingBlockScopeContainer(t.valueDeclaration);if(e.isStatementWithLocals(r)){var i=hn(t.valueDeclaration);if(kn(r.parent,t.escapedName,107455,void 0,void 0,!1))n.isDeclarationWithCollidingName=!0;else if(131072&i.flags){var a=262144&i.flags,o=e.isIterationStatement(r,!1),s=207===r.kind&&e.isIterationStatement(r.parent,!1);n.isDeclarationWithCollidingName=!(e.isBlockScopedContainerTopLevel(r)||a&&(o||s))}else n.isDeclarationWithCollidingName=!1}}return n.isDeclarationWithCollidingName}return!1}function w_(t){if(!e.isGeneratedIdentifier(t)&&(t=e.getParseTreeNode(t,e.isIdentifier))){var n=G_(t);if(n&&A_(n))return n.valueDeclaration}}function N_(t){if(t=e.getParseTreeNode(t,e.isDeclaration)){var n=er(t);if(n)return A_(n)}return!1}function I_(t){switch(t.kind){case 237:case 239:case 240:case 242:case 246:return O_(er(t)||q);case 244:var n=t.exportClause;return n&&e.forEach(n.elements,I_);case 243:return!t.expression||71!==t.expression.kind||O_(er(t)||q)}return!1}function P_(t){return!(void 0===(t=e.getParseTreeNode(t,e.isImportEqualsDeclaration))||265!==t.parent.kind||!e.isInternalModuleImportEqualsDeclaration(t))&&(O_(er(t))&&t.moduleReference&&!e.nodeIsMissing(t.moduleReference))}function O_(e){var t=Rn(e);return t===q||107455&t.flags&&(S.preserveConstEnums||!F_(t))}function F_(e){return sp(e)||e.constEnumOnlyModule}function L_(t,n){if(e.isAliasSymbolDeclaration(t)){var r=er(t);if(r&&gn(r).referenced)return!0}return!!n&&e.forEachChild(t,(function(e){return L_(e,n)}))}function R_(t){if(e.nodeIsPresent(t.body)){var n=Fa(er(t));return n.length>1||1===n.length&&n[0].declaration!==t}return!1}function M_(t){return A&&!Na(t)&&t.initializer&&!e.hasModifier(t,92)}function U_(t){return A&&Na(t)&&!t.initializer&&e.hasModifier(t,92)}function B_(e){return hn(e).flags}function j_(e){return Wf(e.parent),hn(e).enumMemberValue}function $_(e){switch(e.kind){case 264:case 179:case 180:return!0}return!1}function K_(t){if(264===t.kind)return j_(t);var n=hn(t).resolvedSymbol;return n&&8&n.flags&&e.isConstEnumDeclaration(n.valueDeclaration.parent)?j_(n.valueDeclaration):void 0}function z_(t,n){if(!(t=e.getParseTreeNode(t,e.isEntityName)))return e.TypeReferenceSerializationKind.Unknown;if(n&&!(n=e.getParseTreeNode(n)))return e.TypeReferenceSerializationKind.Unknown;var r=$n(t,107455,!0,!1,n),i=$n(t,793064,!0,!1,n);if(r&&r===i){var a=go(!1);if(a&&r===a)return e.TypeReferenceSerializationKind.Promise;var o=ci(r);if(o&&yi(o))return e.TypeReferenceSerializationKind.TypeWithConstructSignatureAndValue}if(!i)return e.TypeReferenceSerializationKind.ObjectType;var s=Pi(i);return s===W?e.TypeReferenceSerializationKind.Unknown:1&s.flags?e.TypeReferenceSerializationKind.ObjectType:ap(s,15360)?e.TypeReferenceSerializationKind.VoidNullableOrNeverType:ap(s,136)?e.TypeReferenceSerializationKind.BooleanType:ap(s,84)?e.TypeReferenceSerializationKind.NumberLikeType:ap(s,262178)?e.TypeReferenceSerializationKind.StringLikeType:_c(s)?e.TypeReferenceSerializationKind.ArrayLikeType:ap(s,512)?e.TypeReferenceSerializationKind.ESSymbolType:function(e){return 32768&e.flags&&xa(e,0).length>0}(s)?e.TypeReferenceSerializationKind.TypeWithCallSignature:sc(s)?e.TypeReferenceSerializationKind.ArrayLikeType:e.TypeReferenceSerializationKind.ObjectType}function J_(e,t,n,r){var i=er(e),a=!i||133120&i.flags?W:fc(ci(i));8192&n&&(a=bc(a,2048)),Fr().buildTypeDisplay(a,r,t,n)}function q_(e,t,n,r){var i=Oa(e);Fr().buildTypeDisplay(Ra(i),r,t,n)}function V_(e,t,n,r){var i=Dc(S_(e));Fr().buildTypeDisplay(i,r,t,n)}function H_(t){return ot.has(e.escapeLeadingUnderscores(t))}function G_(t,n){var r=hn(t).resolvedSymbol;if(r)return r;var i=t;if(n){var a=t.parent;e.isDeclaration(a)&&t===a.name&&(i=$r(a))}return kn(i,t.escapedText,3253183,void 0,void 0,!0)}function W_(t){if(!e.isGeneratedIdentifier(t)&&(t=e.getParseTreeNode(t,e.isIdentifier))){var n=G_(t);if(n)return nr(n).valueDeclaration}}function Q_(t){if(e.isConst(t)){var n=ci(er(t));return!!(96&n.flags&&1048576&n.flags)}return!1}function Y_(e,t){var n=ci(er(e));t.writeStringLiteral(Pr(n))}function X_(t){var n=e.getExternalModuleName(t),r=zn(n,n,void 0);if(r)return e.getDeclarationOfKind(r,265)}function Z_(t,n){if((p&n)!==n&&S.importHelpers){var r=e.getSourceFileOfNode(t);if(e.isEffectiveExternalModule(r,S)&&!e.isInAmbientContext(t)){var i=function(t,n){f||(f=Jn(t,e.externalHelpersModuleNameText,e.Diagnostics.This_syntax_requires_an_imported_helper_but_module_0_cannot_be_found,n)||q);return f}(r,t);if(i!==q)for(var a=n&~p,o=1;o<=65536;o<<=1)if(a&o){var s=em(o);bn(i.exports,e.escapeLeadingUnderscores(s),107455)||cn(t,e.Diagnostics.This_syntax_requires_an_imported_helper_named_1_but_module_0_has_no_exported_member_1,e.externalHelpersModuleNameText,s)}p|=n}}}function em(t){switch(t){case 1:return"__extends";case 2:return"__assign";case 4:return"__rest";case 8:return"__decorate";case 16:return"__metadata";case 32:return"__param";case 64:return"__awaiter";case 128:return"__generator";case 256:return"__values";case 512:return"__read";case 1024:return"__spread";case 2048:return"__await";case 4096:return"__asyncGenerator";case 8192:return"__asyncDelegator";case 16384:return"__asyncValues";case 32768:return"__exportStar";case 65536:return"__makeTemplateObject";default:e.Debug.fail("Unrecognized helper")}}function tm(t){if(!t.decorators)return!1;if(!e.nodeCanBeDecorated(t))return 151!==t.kind||e.nodeIsPresent(t.body)?Tm(t,e.Diagnostics.Decorators_are_not_valid_here):Tm(t,e.Diagnostics.A_decorator_can_only_decorate_a_method_implementation_not_an_overload);if(153===t.kind||154===t.kind){var n=e.getAllAccessorDeclarations(t.parent.members,t);if(n.firstAccessor.decorators&&t===n.secondAccessor)return Tm(t,e.Diagnostics.Decorators_cannot_be_applied_to_multiple_get_Slashset_accessors_of_the_same_name)}return!1}function nm(t){var n,r,i,a,o=function(t){return!!t.modifiers&&(function(t){switch(t.kind){case 153:case 154:case 152:case 149:case 148:case 151:case 150:case 157:case 233:case 238:case 237:case 244:case 243:case 186:case 187:case 146:return!1;default:if(234===t.parent.kind||265===t.parent.kind)return!1;switch(t.kind){case 228:return rm(t,120);case 229:return rm(t,117);case 230:case 208:case 231:return!0;case 232:return rm(t,76);default:return e.Debug.fail(),!1}}}(t)?Tm(t,e.Diagnostics.Modifiers_cannot_appear_here):void 0)}(t);if(void 0!==o)return o;for(var s=0,c=0,l=t.modifiers;c<l.length;c++){var u=l[c];if(131!==u.kind){if(148===t.kind||150===t.kind)return Em(u,e.Diagnostics._0_modifier_cannot_appear_on_a_type_member,e.tokenToString(u.kind));if(157===t.kind)return Em(u,e.Diagnostics._0_modifier_cannot_appear_on_an_index_signature,e.tokenToString(u.kind))}switch(u.kind){case 76:if(232!==t.kind&&229===t.parent.kind)return Em(t,e.Diagnostics.A_class_member_cannot_have_the_0_keyword,e.tokenToString(76));break;case 114:case 113:case 112:var d=wr(e.modifierToFlag(u.kind));if(28&s)return Em(u,e.Diagnostics.Accessibility_modifier_already_seen);if(32&s)return Em(u,e.Diagnostics._0_modifier_must_precede_1_modifier,d,"static");if(64&s)return Em(u,e.Diagnostics._0_modifier_must_precede_1_modifier,d,"readonly");if(256&s)return Em(u,e.Diagnostics._0_modifier_must_precede_1_modifier,d,"async");if(234===t.parent.kind||265===t.parent.kind)return Em(u,e.Diagnostics._0_modifier_cannot_appear_on_a_module_or_namespace_element,d);if(128&s)return 112===u.kind?Em(u,e.Diagnostics._0_modifier_cannot_be_used_with_1_modifier,d,"abstract"):Em(u,e.Diagnostics._0_modifier_must_precede_1_modifier,d,"abstract");s|=e.modifierToFlag(u.kind);break;case 115:if(32&s)return Em(u,e.Diagnostics._0_modifier_already_seen,"static");if(64&s)return Em(u,e.Diagnostics._0_modifier_must_precede_1_modifier,"static","readonly");if(256&s)return Em(u,e.Diagnostics._0_modifier_must_precede_1_modifier,"static","async");if(234===t.parent.kind||265===t.parent.kind)return Em(u,e.Diagnostics._0_modifier_cannot_appear_on_a_module_or_namespace_element,"static");if(146===t.kind)return Em(u,e.Diagnostics._0_modifier_cannot_appear_on_a_parameter,"static");if(128&s)return Em(u,e.Diagnostics._0_modifier_cannot_be_used_with_1_modifier,"static","abstract");s|=32,n=u;break;case 131:if(64&s)return Em(u,e.Diagnostics._0_modifier_already_seen,"readonly");if(149!==t.kind&&148!==t.kind&&157!==t.kind&&146!==t.kind)return Em(u,e.Diagnostics.readonly_modifier_can_only_appear_on_a_property_declaration_or_index_signature);s|=64,a=u;break;case 84:if(1&s)return Em(u,e.Diagnostics._0_modifier_already_seen,"export");if(2&s)return Em(u,e.Diagnostics._0_modifier_must_precede_1_modifier,"export","declare");if(128&s)return Em(u,e.Diagnostics._0_modifier_must_precede_1_modifier,"export","abstract");if(256&s)return Em(u,e.Diagnostics._0_modifier_must_precede_1_modifier,"export","async");if(229===t.parent.kind)return Em(u,e.Diagnostics._0_modifier_cannot_appear_on_a_class_element,"export");if(146===t.kind)return Em(u,e.Diagnostics._0_modifier_cannot_appear_on_a_parameter,"export");s|=1;break;case 79:var p=265===t.parent.kind?t.parent:t.parent.parent;if(233===p.kind&&!e.isAmbientModule(p))return Em(u,e.Diagnostics.A_default_export_can_only_be_used_in_an_ECMAScript_style_module);s|=512;break;case 124:if(2&s)return Em(u,e.Diagnostics._0_modifier_already_seen,"declare");if(256&s)return Em(u,e.Diagnostics._0_modifier_cannot_be_used_in_an_ambient_context,"async");if(229===t.parent.kind)return Em(u,e.Diagnostics._0_modifier_cannot_appear_on_a_class_element,"declare");if(146===t.kind)return Em(u,e.Diagnostics._0_modifier_cannot_appear_on_a_parameter,"declare");if(e.isInAmbientContext(t.parent)&&234===t.parent.kind)return Em(u,e.Diagnostics.A_declare_modifier_cannot_be_used_in_an_already_ambient_context);s|=2,r=u;break;case 117:if(128&s)return Em(u,e.Diagnostics._0_modifier_already_seen,"abstract");if(229!==t.kind){if(151!==t.kind&&149!==t.kind&&153!==t.kind&&154!==t.kind)return Em(u,e.Diagnostics.abstract_modifier_can_only_appear_on_a_class_method_or_property_declaration);if(229!==t.parent.kind||!e.hasModifier(t.parent,128))return Em(u,e.Diagnostics.Abstract_methods_can_only_appear_within_an_abstract_class);if(32&s)return Em(u,e.Diagnostics._0_modifier_cannot_be_used_with_1_modifier,"static","abstract");if(8&s)return Em(u,e.Diagnostics._0_modifier_cannot_be_used_with_1_modifier,"private","abstract")}s|=128;break;case 120:if(256&s)return Em(u,e.Diagnostics._0_modifier_already_seen,"async");if(2&s||e.isInAmbientContext(t.parent))return Em(u,e.Diagnostics._0_modifier_cannot_be_used_in_an_ambient_context,"async");if(146===t.kind)return Em(u,e.Diagnostics._0_modifier_cannot_appear_on_a_parameter,"async");s|=256,i=u}}return 152===t.kind?32&s?Em(n,e.Diagnostics._0_modifier_cannot_appear_on_a_constructor_declaration,"static"):128&s?Em(n,e.Diagnostics._0_modifier_cannot_appear_on_a_constructor_declaration,"abstract"):256&s?Em(i,e.Diagnostics._0_modifier_cannot_appear_on_a_constructor_declaration,"async"):64&s?Em(a,e.Diagnostics._0_modifier_cannot_appear_on_a_constructor_declaration,"readonly"):void 0:(238===t.kind||237===t.kind)&&2&s?Em(r,e.Diagnostics.A_0_modifier_cannot_be_used_with_an_import_declaration,"declare"):146===t.kind&&92&s&&e.isBindingPattern(t.name)?Em(t,e.Diagnostics.A_parameter_property_may_not_be_declared_using_a_binding_pattern):146===t.kind&&92&s&&t.dotDotDotToken?Em(t,e.Diagnostics.A_parameter_property_cannot_be_declared_using_a_rest_parameter):256&s?function(t,n){switch(t.kind){case 151:case 228:case 186:case 187:return!1}return Em(n,e.Diagnostics._0_modifier_cannot_be_used_here,"async")}(t,i):void 0}function rm(e,t){return e.modifiers.length>1||e.modifiers[0].kind!==t}function im(t){if(t&&t.hasTrailingComma){var n=t.end-",".length,r=t.end;return Cm(t[0],n,r-n,e.Diagnostics.Trailing_comma_not_allowed)}}function am(t,n){if(im(t))return!0;if(t&&0===t.length){var r=t.pos-"<".length;return Cm(n,r,e.skipTrivia(n.text,t.end)+">".length-r,e.Diagnostics.Type_parameter_list_cannot_be_empty)}}function om(t){var n=e.getSourceFileOfNode(t);return tm(t)||nm(t)||am(t.typeParameters,n)||function(t){for(var n=!1,r=t.length,i=0;i<r;i++){var a=t[i];if(a.dotDotDotToken){if(i!==r-1)return Em(a.dotDotDotToken,e.Diagnostics.A_rest_parameter_must_be_last_in_a_parameter_list);if(e.isBindingPattern(a.name))return Em(a.name,e.Diagnostics.A_rest_element_cannot_contain_a_binding_pattern);if(a.questionToken)return Em(a.questionToken,e.Diagnostics.A_rest_parameter_cannot_be_optional);if(a.initializer)return Em(a.name,e.Diagnostics.A_rest_parameter_cannot_have_an_initializer)}else if(a.questionToken){if(n=!0,a.initializer)return Em(a.name,e.Diagnostics.Parameter_cannot_have_question_mark_and_initializer)}else if(n&&!a.initializer)return Em(a.name,e.Diagnostics.A_required_parameter_cannot_follow_an_optional_parameter)}}(t.parameters)||function(t,n){if(187===t.kind){var r=t;if(e.getLineAndCharacterOfPosition(n,r.equalsGreaterThanToken.pos).line!==e.getLineAndCharacterOfPosition(n,r.equalsGreaterThanToken.end).line)return Em(r.equalsGreaterThanToken,e.Diagnostics.Line_terminator_not_permitted_before_arrow)}return!1}(t,n)}function sm(t,n){return im(n)||function(t,n){if(n&&0===n.length){var r=e.getSourceFileOfNode(t),i=n.pos-"<".length;return Cm(r,i,e.skipTrivia(r.text,n.end)+">".length-i,e.Diagnostics.Type_argument_list_cannot_be_empty)}}(t,n)}function cm(t){return function(t){if(t)for(var n=0,r=t;n<r.length;n++){var i=r[n];if(200===i.kind)return Cm(i,i.pos,0,e.Diagnostics.Argument_expression_expected)}}(t)}function lm(t){var n=t.types;if(im(n))return!0;if(n&&0===n.length){var r=e.tokenToString(t.token);return Cm(t,n.pos,0,e.Diagnostics._0_list_cannot_be_empty,r)}return e.forEach(n,um)}function um(e){return sm(e,e.typeArguments)}function dm(t){if(144!==t.kind)return!1;var n=t;return 194===n.expression.kind&&26===n.expression.operatorToken.kind?Em(n.expression,e.Diagnostics.A_comma_expression_is_not_allowed_in_a_computed_property_name):void 0}function pm(t){if(t.asteriskToken){if(e.Debug.assert(228===t.kind||186===t.kind||151===t.kind),e.isInAmbientContext(t))return Em(t.asteriskToken,e.Diagnostics.Generators_are_not_allowed_in_an_ambient_context);if(!t.body)return Em(t.asteriskToken,e.Diagnostics.An_overload_signature_cannot_be_declared_as_a_generator)}}function fm(e,t){if(e)return Em(e,t)}function _m(t){if(Am(t))return!0;if(216===t.kind&&t.awaitModifier&&0==(16384&t.flags))return Em(t.awaitModifier,e.Diagnostics.A_for_await_of_statement_is_only_allowed_within_an_async_function_or_async_generator);if(227===t.initializer.kind){var n=t.initializer;if(!xm(n)){var r=n.declarations;if(!r.length)return!1;if(r.length>1){var i=215===t.kind?e.Diagnostics.Only_a_single_variable_declaration_is_allowed_in_a_for_in_statement:e.Diagnostics.Only_a_single_variable_declaration_is_allowed_in_a_for_of_statement;return Tm(n.declarations[1],i)}var a=r[0];if(a.initializer){var i=215===t.kind?e.Diagnostics.The_variable_declaration_of_a_for_in_statement_cannot_have_an_initializer:e.Diagnostics.The_variable_declaration_of_a_for_of_statement_cannot_have_an_initializer;return Em(a.name,i)}if(a.type)return Em(a,i=215===t.kind?e.Diagnostics.The_left_hand_side_of_a_for_in_statement_cannot_use_a_type_annotation:e.Diagnostics.The_left_hand_side_of_a_for_of_statement_cannot_use_a_type_annotation)}}return!1}function mm(t){if(t.parameters.length===(153===t.kind?1:2))return e.getThisParameter(t)}function gm(t,n){if(e.isDynamicName(t))return Em(t,n)}function hm(t){if(function(t){if(t.modifiers&&178===t.parent.kind){if(!(2&e.getFunctionFlags(t)))return Tm(t,e.Diagnostics.Modifiers_cannot_appear_here);if(t.modifiers.length>1)return Tm(t,e.Diagnostics.Modifiers_cannot_appear_here)}}(t)||om(t)||pm(t))return!0;if(178===t.parent.kind){if(fm(t.questionToken,e.Diagnostics.An_object_member_cannot_be_declared_optional))return!0;if(void 0===t.body)return Cm(t,t.end-1,";".length,e.Diagnostics._0_expected,"{")}if(e.isClassLike(t.parent)){if(e.isInAmbientContext(t))return gm(t.name,e.Diagnostics.A_computed_property_name_in_an_ambient_context_must_directly_refer_to_a_built_in_symbol);if(!t.body)return gm(t.name,e.Diagnostics.A_computed_property_name_in_a_method_overload_must_directly_refer_to_a_built_in_symbol)}else{if(230===t.parent.kind)return gm(t.name,e.Diagnostics.A_computed_property_name_in_an_interface_must_directly_refer_to_a_built_in_symbol);if(163===t.parent.kind)return gm(t.name,e.Diagnostics.A_computed_property_name_in_a_type_literal_must_directly_refer_to_a_built_in_symbol)}}function ym(e){return 9===e.kind||8===e.kind||192===e.kind&&38===e.operator&&8===e.operand.kind}function vm(t){if(71===t.kind){if("__esModule"===e.idText(t))return Em(t,e.Diagnostics.Identifier_expected_esModule_is_reserved_as_an_exported_marker_when_transforming_ECMAScript_modules)}else for(var n=0,r=t.elements;n<r.length;n++){var i=r[n];if(!e.isOmittedExpression(i))return vm(i.name)}}function bm(t){if(71===t.kind){if(110===t.originalKeywordKind)return Em(t,e.Diagnostics.let_is_not_allowed_to_be_used_as_a_name_in_let_or_const_declarations)}else for(var n=0,r=t.elements;n<r.length;n++){var i=r[n];e.isOmittedExpression(i)||bm(i.name)}}function xm(t){var n=t.declarations;return!!im(t.declarations)||(t.declarations.length?void 0:Cm(t,n.pos,n.end-n.pos,e.Diagnostics.Variable_declaration_list_cannot_be_empty))}function km(e){switch(e.kind){case 211:case 212:case 213:case 220:case 214:case 215:case 216:return!1;case 222:return km(e.parent)}return!0}function Sm(e){return e.parseDiagnostics.length>0}function Tm(t,n,r,i,a){var o=e.getSourceFileOfNode(t);if(!Sm(o)){var s=e.getSpanOfTokenAtPosition(o,t.pos);return wt.add(e.createFileDiagnostic(o,s.start,s.length,n,r,i,a)),!0}}function Cm(t,n,r,i,a,o,s){var c=e.getSourceFileOfNode(t);if(!Sm(c))return wt.add(e.createFileDiagnostic(c,n,r,i,a,o,s)),!0}function Em(t,n,r,i,a){if(!Sm(e.getSourceFileOfNode(t)))return wt.add(e.createDiagnosticForNode(t,n,r,i,a)),!0}function Dm(t){return 230!==t.kind&&231!==t.kind&&238!==t.kind&&237!==t.kind&&244!==t.kind&&243!==t.kind&&236!==t.kind&&!e.hasModifier(t,515)&&Tm(t,e.Diagnostics.A_declare_modifier_is_required_for_a_top_level_declaration_in_a_d_ts_file)}function Am(t){if(e.isInAmbientContext(t)){if(e.isAccessor(t.parent))return hn(t).hasReportedStatementInAmbientContext=!0;if(!hn(t).hasReportedStatementInAmbientContext&&e.isFunctionLike(t.parent))return hn(t).hasReportedStatementInAmbientContext=Tm(t,e.Diagnostics.An_implementation_cannot_be_declared_in_ambient_contexts);if(207===t.parent.kind||234===t.parent.kind||265===t.parent.kind){var n=hn(t.parent);if(!n.hasReportedStatementInAmbientContext)return n.hasReportedStatementInAmbientContext=Tm(t,e.Diagnostics.Statements_are_not_allowed_in_ambient_contexts)}}}function wm(t){if(4&t.numericLiteralFlags){var n=void 0;if(T>=1?n=e.Diagnostics.Octal_literals_are_not_available_when_targeting_ECMAScript_5_and_higher_Use_the_syntax_0:e.isChildOfNodeWithKind(t,173)?n=e.Diagnostics.Octal_literal_types_must_use_ES2015_syntax_Use_the_syntax_0:e.isChildOfNodeWithKind(t,264)&&(n=e.Diagnostics.Octal_literals_are_not_allowed_in_enums_members_initializer_Use_the_syntax_0),n){var r=e.isPrefixUnaryExpression(t.parent)&&38===t.parent.operator,i=(r?"-":"")+"0o"+t.text;return Em(r?t.parent:t,n,i)}}}}}(ts||(ts={})),function(e){function t(t){var n=e.createNode(t,-1,-1);return n.flags|=8,n}function n(t,n){return t!==n&&(Ot(t,n),Dt(t,n),n.startsOnNewLine&&(t.startsOnNewLine=!0),e.aggregateTransformFlags(t)),t}function r(t,n){if(t){if(e.isNodeArray(t))return t}else t=[];var r=t;return r.pos=-1,r.end=-1,r.hasTrailingComma=n,r}function i(e){if(void 0!==e){var n=t(e.kind);for(var r in n.flags|=e.flags,Ot(n,e),e)!n.hasOwnProperty(r)&&e.hasOwnProperty(r)&&(n[r]=e[r]);return n}}function a(t){return"number"==typeof t?o(t+""):"boolean"==typeof t?t?p():f():e.isString(t)?s(t):(n=t,(r=s(e.getTextOfIdentifierOrLiteral(n))).textSourceNode=n,r);var n,r}function o(e){var n=t(8);return n.text=e,n.numericLiteralFlags=0,n}function s(e){var n=t(9);return n.text=e,n}function c(n,i){var a=t(71);return a.escapedText=e.escapeLeadingUnderscores(n),a.originalKeywordKind=n?e.stringToToken(n):0,a.autoGenerateKind=0,a.autoGenerateId=0,i&&(a.typeArguments=r(i)),a}e.updateNode=n,e.createNodeArray=r,e.getSynthesizedClone=i,e.createLiteral=a,e.createNumericLiteral=o,e.createIdentifier=c,e.updateIdentifier=function(t,r){return t.typeArguments!==r?n(c(e.idText(t),r),t):t};var l,u=0;function d(e){return t(e)}function p(){return t(101)}function f(){return t(86)}function _(e,n){var r=t(143);return r.left=e,r.right=Tt(n),r}function m(e){var n=t(144);return n.expression=e,n}function g(e,n,r){var i=t(145);return i.name=Tt(e),i.constraint=n,i.default=r,i}function h(n,r,i,a,o,s,c){var l=t(146);return l.decorators=Ct(n),l.modifiers=Ct(r),l.dotDotDotToken=i,l.name=Tt(a),l.questionToken=o,l.type=s,l.initializer=c?e.parenthesizeExpressionForList(c):void 0,l}function y(n){var r=t(147);return r.expression=e.parenthesizeForAccess(n),r}function v(e,n,r,i,a){var o=t(148);return o.modifiers=Ct(e),o.name=Tt(n),o.questionToken=r,o.type=i,o.initializer=a,o}function b(e,n,r,i,a,o){var s=t(149);return s.decorators=Ct(e),s.modifiers=Ct(n),s.name=Tt(r),s.questionToken=i,s.type=a,s.initializer=o,s}function x(e,t,n,r,i){var a=D(150,e,t,n);return a.name=Tt(r),a.questionToken=i,a}function k(e,n,i,a,o,s,c,l,u){var d=t(151);return d.decorators=Ct(e),d.modifiers=Ct(n),d.asteriskToken=i,d.name=Tt(a),d.questionToken=o,d.typeParameters=Ct(s),d.parameters=r(c),d.type=l,d.body=u,d}function S(e,n,i,a){var o=t(152);return o.decorators=Ct(e),o.modifiers=Ct(n),o.typeParameters=void 0,o.parameters=r(i),o.type=void 0,o.body=a,o}function T(e,n,i,a,o,s){var c=t(153);return c.decorators=Ct(e),c.modifiers=Ct(n),c.name=Tt(i),c.typeParameters=void 0,c.parameters=r(a),c.type=o,c.body=s,c}function C(e,n,i,a,o){var s=t(154);return s.decorators=Ct(e),s.modifiers=Ct(n),s.name=Tt(i),s.typeParameters=void 0,s.parameters=r(a),s.body=o,s}function E(e,n,i,a){var o=t(157);return o.decorators=Ct(e),o.modifiers=Ct(n),o.parameters=r(i),o.type=a,o}function D(e,n,r,i){var a=t(e);return a.typeParameters=Ct(n),a.parameters=Ct(r),a.type=i,a}function A(e,t,r,i){return e.typeParameters!==t||e.parameters!==r||e.type!==i?n(D(e.kind,t,r,i),e):e}function w(e,n){var r=t(158);return r.parameterName=Tt(e),r.type=n,r}function N(n,r){var i=t(159);return i.typeName=Tt(n),i.typeArguments=r&&e.parenthesizeTypeParameters(r),i}function I(e){var n=t(162);return n.exprName=e,n}function P(e){var n=t(163);return n.members=r(e),n}function O(n){var r=t(164);return r.elementType=e.parenthesizeArrayTypeMember(n),r}function F(e){var n=t(165);return n.elementTypes=r(e),n}function L(n,r){var i=t(n);return i.types=e.parenthesizeElementTypeMembers(r),i}function R(e,t){return e.types!==t?n(L(e.kind,t),e):e}function M(e){var n=t(168);return n.type=e,n}function U(n){var r=t(170);return r.operator=127,r.type=e.parenthesizeElementTypeMember(n),r}function B(n,r){var i=t(171);return i.objectType=e.parenthesizeElementTypeMember(n),i.indexType=r,i}function j(e,n,r,i){var a=t(172);return a.readonlyToken=e,a.typeParameter=n,a.questionToken=r,a.type=i,a}function $(e){var n=t(173);return n.literal=e,n}function K(e){var n=t(174);return n.elements=r(e),n}function z(e){var n=t(175);return n.elements=r(e),n}function J(e,n,r,i){var a=t(176);return a.dotDotDotToken=e,a.propertyName=Tt(n),a.name=Tt(r),a.initializer=i,a}function q(n,i){var a=t(177);return a.elements=e.parenthesizeListElements(r(n)),i&&(a.multiLine=!0),a}function V(e,n){var i=t(178);return i.properties=r(e),n&&(i.multiLine=!0),i}function H(n,r){var i=t(179);return i.expression=e.parenthesizeForAccess(n),i.name=Tt(r),At(i,131072),i}function G(n,r){var i,o=t(180);return o.expression=e.parenthesizeForAccess(n),o.argumentExpression=(i=r,e.isString(i)||"number"==typeof i?a(i):i),o}function W(n,i,a){var o=t(181);return o.expression=e.parenthesizeForAccess(n),o.typeArguments=Ct(i),o.arguments=e.parenthesizeListElements(r(a)),o}function Q(n,i,a){var o=t(182);return o.expression=e.parenthesizeForNew(n),o.typeArguments=Ct(i),o.arguments=a?e.parenthesizeListElements(r(a)):void 0,o}function Y(n,r){var i=t(183);return i.tag=e.parenthesizeForAccess(n),i.template=r,i}function X(n,r){var i=t(184);return i.type=n,i.expression=e.parenthesizePrefixOperand(r),i}function Z(e){var n=t(185);return n.expression=e,n}function ee(e,n,i,a,o,s,c){var l=t(186);return l.modifiers=Ct(e),l.asteriskToken=n,l.name=Tt(i),l.typeParameters=Ct(a),l.parameters=r(o),l.type=s,l.body=c,l}function te(n,i,a,o,s,c){var l=t(187);return l.modifiers=Ct(n),l.typeParameters=Ct(i),l.parameters=r(a),l.type=o,l.equalsGreaterThanToken=s||d(36),l.body=e.parenthesizeConciseBody(c),l}function ne(n){var r=t(188);return r.expression=e.parenthesizePrefixOperand(n),r}function re(n){var r=t(189);return r.expression=e.parenthesizePrefixOperand(n),r}function ie(n){var r=t(190);return r.expression=e.parenthesizePrefixOperand(n),r}function ae(n){var r=t(191);return r.expression=e.parenthesizePrefixOperand(n),r}function oe(n,r){var i=t(192);return i.operator=n,i.operand=e.parenthesizePrefixOperand(r),i}function se(n,r){var i=t(193);return i.operand=e.parenthesizePostfixOperand(n),i.operator=r,i}function ce(n,r,i){var a,o=t(194),s="number"==typeof(a=r)?d(a):a,c=s.kind;return o.left=e.parenthesizeBinaryOperand(c,n,!0,void 0),o.operatorToken=s,o.right=e.parenthesizeBinaryOperand(c,i,!1,o.left),o}function le(n,r,i,a,o){var s=t(195);return s.condition=e.parenthesizeForConditionalHead(n),s.questionToken=o?r:d(55),s.whenTrue=e.parenthesizeSubexpressionOfConditionalExpression(o?i:r),s.colonToken=o?a:d(56),s.whenFalse=e.parenthesizeSubexpressionOfConditionalExpression(o||i),s}function ue(e,n){var i=t(196);return i.head=e,i.templateSpans=r(n),i}function de(e,n){var r=t(197);return r.asteriskToken=e&&39===e.kind?e:void 0,r.expression=e&&39!==e.kind?e:n,r}function pe(n){var r=t(198);return r.expression=e.parenthesizeExpressionForList(n),r}function fe(e,n,i,a,o){var s=t(199);return s.decorators=void 0,s.modifiers=Ct(e),s.name=Tt(n),s.typeParameters=Ct(i),s.heritageClauses=Ct(a),s.members=r(o),s}function _e(n,r){var i=t(201);return i.expression=e.parenthesizeForAccess(r),i.typeArguments=Ct(n),i}function me(e,n){var r=t(202);return r.expression=e,r.type=n,r}function ge(n){var r=t(203);return r.expression=e.parenthesizeForAccess(n),r}function he(e,n){var r=t(204);return r.keywordToken=e,r.name=n,r}function ye(e,n){var r=t(205);return r.expression=e,r.literal=n,r}function ve(e,n){var i=t(207);return i.statements=r(e),n&&(i.multiLine=n),i}function be(n,r){var i=t(208);return i.decorators=void 0,i.modifiers=Ct(n),i.declarationList=e.isArray(r)?Me(r):r,i}function xe(n){var r=t(210);return r.expression=e.parenthesizeExpressionForExpressionStatement(n),r}function ke(e,n,r){var i=t(211);return i.expression=e,i.thenStatement=n,i.elseStatement=r,i}function Se(e,n){var r=t(212);return r.statement=e,r.expression=n,r}function Te(e,n){var r=t(213);return r.expression=e,r.statement=n,r}function Ce(e,n,r,i){var a=t(214);return a.initializer=e,a.condition=n,a.incrementor=r,a.statement=i,a}function Ee(e,n,r){var i=t(215);return i.initializer=e,i.expression=n,i.statement=r,i}function De(e,n,r,i){var a=t(216);return a.awaitModifier=e,a.initializer=n,a.expression=r,a.statement=i,a}function Ae(e){var n=t(217);return n.label=Tt(e),n}function we(e){var n=t(218);return n.label=Tt(e),n}function Ne(e){var n=t(219);return n.expression=e,n}function Ie(e,n){var r=t(220);return r.expression=e,r.statement=n,r}function Pe(n,r){var i=t(221);return i.expression=e.parenthesizeExpressionForList(n),i.caseBlock=r,i}function Oe(e,n){var r=t(222);return r.label=Tt(e),r.statement=n,r}function Fe(e){var n=t(223);return n.expression=e,n}function Le(e,n,r){var i=t(224);return i.tryBlock=e,i.catchClause=n,i.finallyBlock=r,i}function Re(n,r,i){var a=t(226);return a.name=Tt(n),a.type=r,a.initializer=void 0!==i?e.parenthesizeExpressionForList(i):void 0,a}function Me(e,n){var i=t(227);return i.flags|=3&n,i.declarations=r(e),i}function Ue(e,n,i,a,o,s,c,l){var u=t(228);return u.decorators=Ct(e),u.modifiers=Ct(n),u.asteriskToken=i,u.name=Tt(a),u.typeParameters=Ct(o),u.parameters=r(s),u.type=c,u.body=l,u}function Be(e,n,i,a,o,s){var c=t(229);return c.decorators=Ct(e),c.modifiers=Ct(n),c.name=Tt(i),c.typeParameters=Ct(a),c.heritageClauses=Ct(o),c.members=r(s),c}function je(e,n,i,a,o,s){var c=t(230);return c.decorators=Ct(e),c.modifiers=Ct(n),c.name=Tt(i),c.typeParameters=Ct(a),c.heritageClauses=Ct(o),c.members=r(s),c}function $e(e,n,r,i,a){var o=t(231);return o.decorators=Ct(e),o.modifiers=Ct(n),o.name=Tt(r),o.typeParameters=Ct(i),o.type=a,o}function Ke(e,n,i,a){var o=t(232);return o.decorators=Ct(e),o.modifiers=Ct(n),o.name=Tt(i),o.members=r(a),o}function ze(e,n,r,i,a){var o=t(233);return o.flags|=532&a,o.decorators=Ct(e),o.modifiers=Ct(n),o.name=r,o.body=i,o}function Je(e){var n=t(234);return n.statements=r(e),n}function qe(e){var n=t(235);return n.clauses=r(e),n}function Ve(e){var n=t(236);return n.name=Tt(e),n}function He(e,n,r,i){var a=t(237);return a.decorators=Ct(e),a.modifiers=Ct(n),a.name=Tt(r),a.moduleReference=i,a}function Ge(e,n,r,i){var a=t(238);return a.decorators=Ct(e),a.modifiers=Ct(n),a.importClause=r,a.moduleSpecifier=i,a}function We(e,n){var r=t(239);return r.name=e,r.namedBindings=n,r}function Qe(e){var n=t(240);return n.name=e,n}function Ye(e){var n=t(241);return n.elements=r(e),n}function Xe(e,n){var r=t(242);return r.propertyName=e,r.name=n,r}function Ze(e,n,r,i){var a=t(243);return a.decorators=Ct(e),a.modifiers=Ct(n),a.isExportEquals=r,a.expression=i,a}function et(e,n,r,i){var a=t(244);return a.decorators=Ct(e),a.modifiers=Ct(n),a.exportClause=r,a.moduleSpecifier=i,a}function tt(e){var n=t(245);return n.elements=r(e),n}function nt(e,n){var r=t(246);return r.propertyName=Tt(e),r.name=Tt(n),r}function rt(e){var n=t(248);return n.expression=e,n}function it(e,n,i){var a=t(249);return a.openingElement=e,a.children=r(n),a.closingElement=i,a}function at(e,n){var r=t(250);return r.tagName=e,r.attributes=n,r}function ot(e,n){var r=t(251);return r.tagName=e,r.attributes=n,r}function st(e){var n=t(252);return n.tagName=e,n}function ct(e,n){var r=t(253);return r.name=e,r.initializer=n,r}function lt(e){var n=t(254);return n.properties=r(e),n}function ut(e){var n=t(255);return n.expression=e,n}function dt(e,n){var r=t(256);return r.dotDotDotToken=e,r.expression=n,r}function pt(n,i){var a=t(257);return a.expression=e.parenthesizeExpressionForList(n),a.statements=r(i),a}function ft(e){var n=t(258);return n.statements=r(e),n}function _t(e,n){var i=t(259);return i.token=e,i.types=r(n),i}function mt(n,r){var i=t(260);return i.variableDeclaration=e.isString(n)?Re(n):n,i.block=r,i}function gt(n,r){var i=t(261);return i.name=Tt(n),i.questionToken=void 0,i.initializer=void 0!==r?e.parenthesizeExpressionForList(r):void 0,i}function ht(n,r){var i=t(262);return i.name=Tt(n),i.objectAssignmentInitializer=void 0!==r?e.parenthesizeExpressionForList(r):void 0,i}function yt(n){var r=t(263);return r.expression=void 0!==n?e.parenthesizeExpressionForList(n):void 0,r}function vt(n,r){var i=t(264);return i.name=Tt(n),i.initializer=r&&e.parenthesizeExpressionForList(r),i}function bt(e,n){var r=t(288);return r.expression=e,r.original=n,Dt(r,n),r}function xt(t){if(e.nodeIsSynthesized(t)&&!e.isParseTreeNode(t)&&!t.original&&!t.emitNode&&!t.id){if(289===t.kind)return t.elements;if(e.isBinaryExpression(t)&&26===t.operatorToken.kind)return[t.left,t.right]}return t}function kt(n){var i=t(289);return i.elements=r(e.sameFlatMap(n,xt)),i}function St(t){var n=e.createNode(266);return n.sourceFiles=t,n}function Tt(t){return e.isString(t)?c(t):t}function Ct(e){return e?r(e):void 0}function Et(t){if(!t.emitNode){if(e.isParseTreeNode(t)){if(265===t.kind)return t.emitNode={annotatedNodes:[t]};Et(e.getSourceFileOfNode(t)).annotatedNodes.push(t)}t.emitNode={}}return t.emitNode}function Dt(e,t){return t&&(e.pos=t.pos,e.end=t.end),e}function At(e,t){return Et(e).flags=t,e}function wt(e){var t=e.emitNode;return t&&t.leadingComments}function Nt(e,t){return Et(e).leadingComments=t,e}function It(e){var t=e.emitNode;return t&&t.trailingComments}function Pt(e,t){return Et(e).trailingComments=t,e}function Ot(t,n){if(t.original=n,n){var r=n.emitNode;r&&(t.emitNode=function(t,n){var r=t.flags,i=t.leadingComments,a=t.trailingComments,o=t.commentRange,s=t.sourceMapRange,c=t.tokenSourceMapRanges,l=t.constantValue,u=t.helpers;n||(n={});i&&(n.leadingComments=e.addRange(i.slice(),n.leadingComments));a&&(n.trailingComments=e.addRange(a.slice(),n.trailingComments));r&&(n.flags=r);o&&(n.commentRange=o);s&&(n.sourceMapRange=s);c&&(n.tokenSourceMapRanges=function(e,t){t||(t=[]);for(var n in e)t[n]=e[n];return t}(c,n.tokenSourceMapRanges));void 0!==l&&(n.constantValue=l);u&&(n.helpers=e.addRange(n.helpers,u));return n}(r,t.emitNode))}return t}e.createTempVariable=function(e){var t=c("");return t.autoGenerateKind=1,t.autoGenerateId=u,u++,e&&e(t),t},e.createLoopVariable=function(){var e=c("");return e.autoGenerateKind=2,e.autoGenerateId=u,u++,e},e.createUniqueName=function(e){var t=c(e);return t.autoGenerateKind=3,t.autoGenerateId=u,u++,t},e.getGeneratedNameForNode=function(e){var t=c("");return t.autoGenerateKind=4,t.autoGenerateId=u,t.original=e,u++,t},e.createToken=d,e.createSuper=function(){return t(97)},e.createThis=function(){return t(99)},e.createNull=function(){return t(95)},e.createTrue=p,e.createFalse=f,e.createQualifiedName=_,e.updateQualifiedName=function(e,t,r){return e.left!==t||e.right!==r?n(_(t,r),e):e},e.createComputedPropertyName=m,e.updateComputedPropertyName=function(e,t){return e.expression!==t?n(m(t),e):e},e.createTypeParameterDeclaration=g,e.updateTypeParameterDeclaration=function(e,t,r,i){return e.name!==t||e.constraint!==r||e.default!==i?n(g(t,r,i),e):e},e.createParameter=h,e.updateParameter=function(e,t,r,i,a,o,s,c){return e.decorators!==t||e.modifiers!==r||e.dotDotDotToken!==i||e.name!==a||e.questionToken!==o||e.type!==s||e.initializer!==c?n(h(t,r,i,a,o,s,c),e):e},e.createDecorator=y,e.updateDecorator=function(e,t){return e.expression!==t?n(y(t),e):e},e.createPropertySignature=v,e.updatePropertySignature=function(e,t,r,i,a,o){return e.modifiers!==t||e.name!==r||e.questionToken!==i||e.type!==a||e.initializer!==o?n(v(t,r,i,a,o),e):e},e.createProperty=b,e.updateProperty=function(e,t,r,i,a,o,s){return e.decorators!==t||e.modifiers!==r||e.name!==i||e.questionToken!==a||e.type!==o||e.initializer!==s?n(b(t,r,i,a,o,s),e):e},e.createMethodSignature=x,e.updateMethodSignature=function(e,t,r,i,a,o){return e.typeParameters!==t||e.parameters!==r||e.type!==i||e.name!==a||e.questionToken!==o?n(x(t,r,i,a,o),e):e},e.createMethod=k,e.updateMethod=function(e,t,r,i,a,o,s,c,l,u){return e.decorators!==t||e.modifiers!==r||e.asteriskToken!==i||e.name!==a||e.questionToken!==o||e.typeParameters!==s||e.parameters!==c||e.type!==l||e.body!==u?n(k(t,r,i,a,o,s,c,l,u),e):e},e.createConstructor=S,e.updateConstructor=function(e,t,r,i,a){return e.decorators!==t||e.modifiers!==r||e.parameters!==i||e.body!==a?n(S(t,r,i,a),e):e},e.createGetAccessor=T,e.updateGetAccessor=function(e,t,r,i,a,o,s){return e.decorators!==t||e.modifiers!==r||e.name!==i||e.parameters!==a||e.type!==o||e.body!==s?n(T(t,r,i,a,o,s),e):e},e.createSetAccessor=C,e.updateSetAccessor=function(e,t,r,i,a,o){return e.decorators!==t||e.modifiers!==r||e.name!==i||e.parameters!==a||e.body!==o?n(C(t,r,i,a,o),e):e},e.createCallSignature=function(e,t,n){return D(155,e,t,n)},e.updateCallSignature=function(e,t,n,r){return A(e,t,n,r)},e.createConstructSignature=function(e,t,n){return D(156,e,t,n)},e.updateConstructSignature=function(e,t,n,r){return A(e,t,n,r)},e.createIndexSignature=E,e.updateIndexSignature=function(e,t,r,i,a){return e.parameters!==i||e.type!==a||e.decorators!==t||e.modifiers!==r?n(E(t,r,i,a),e):e},e.createSignatureDeclaration=D,e.createKeywordTypeNode=function(e){return t(e)},e.createTypePredicateNode=w,e.updateTypePredicateNode=function(e,t,r){return e.parameterName!==t||e.type!==r?n(w(t,r),e):e},e.createTypeReferenceNode=N,e.updateTypeReferenceNode=function(e,t,r){return e.typeName!==t||e.typeArguments!==r?n(N(t,r),e):e},e.createFunctionTypeNode=function(e,t,n){return D(160,e,t,n)},e.updateFunctionTypeNode=function(e,t,n,r){return A(e,t,n,r)},e.createConstructorTypeNode=function(e,t,n){return D(161,e,t,n)},e.updateConstructorTypeNode=function(e,t,n,r){return A(e,t,n,r)},e.createTypeQueryNode=I,e.updateTypeQueryNode=function(e,t){return e.exprName!==t?n(I(t),e):e},e.createTypeLiteralNode=P,e.updateTypeLiteralNode=function(e,t){return e.members!==t?n(P(t),e):e},e.createArrayTypeNode=O,e.updateArrayTypeNode=function(e,t){return e.elementType!==t?n(O(t),e):e},e.createTupleTypeNode=F,e.updateTypleTypeNode=function(e,t){return e.elementTypes!==t?n(F(t),e):e},e.createUnionTypeNode=function(e){return L(166,e)},e.updateUnionTypeNode=function(e,t){return R(e,t)},e.createIntersectionTypeNode=function(e){return L(167,e)},e.updateIntersectionTypeNode=function(e,t){return R(e,t)},e.createUnionOrIntersectionTypeNode=L,e.createParenthesizedType=M,e.updateParenthesizedType=function(e,t){return e.type!==t?n(M(t),e):e},e.createThisTypeNode=function(){return t(169)},e.createTypeOperatorNode=U,e.updateTypeOperatorNode=function(e,t){return e.type!==t?n(U(t),e):e},e.createIndexedAccessTypeNode=B,e.updateIndexedAccessTypeNode=function(e,t,r){return e.objectType!==t||e.indexType!==r?n(B(t,r),e):e},e.createMappedTypeNode=j,e.updateMappedTypeNode=function(e,t,r,i,a){return e.readonlyToken!==t||e.typeParameter!==r||e.questionToken!==i||e.type!==a?n(j(t,r,i,a),e):e},e.createLiteralTypeNode=$,e.updateLiteralTypeNode=function(e,t){return e.literal!==t?n($(t),e):e},e.createObjectBindingPattern=K,e.updateObjectBindingPattern=function(e,t){return e.elements!==t?n(K(t),e):e},e.createArrayBindingPattern=z,e.updateArrayBindingPattern=function(e,t){return e.elements!==t?n(z(t),e):e},e.createBindingElement=J,e.updateBindingElement=function(e,t,r,i,a){return e.propertyName!==r||e.dotDotDotToken!==t||e.name!==i||e.initializer!==a?n(J(t,r,i,a),e):e},e.createArrayLiteral=q,e.updateArrayLiteral=function(e,t){return e.elements!==t?n(q(t,e.multiLine),e):e},e.createObjectLiteral=V,e.updateObjectLiteral=function(e,t){return e.properties!==t?n(V(t,e.multiLine),e):e},e.createPropertyAccess=H,e.updatePropertyAccess=function(t,r,i){return t.expression!==r||t.name!==i?n(At(H(r,i),e.getEmitFlags(t)),t):t},e.createElementAccess=G,e.updateElementAccess=function(e,t,r){return e.expression!==t||e.argumentExpression!==r?n(G(t,r),e):e},e.createCall=W,e.updateCall=function(e,t,r,i){return e.expression!==t||e.typeArguments!==r||e.arguments!==i?n(W(t,r,i),e):e},e.createNew=Q,e.updateNew=function(e,t,r,i){return e.expression!==t||e.typeArguments!==r||e.arguments!==i?n(Q(t,r,i),e):e},e.createTaggedTemplate=Y,e.updateTaggedTemplate=function(e,t,r){return e.tag!==t||e.template!==r?n(Y(t,r),e):e},e.createTypeAssertion=X,e.updateTypeAssertion=function(e,t,r){return e.type!==t||e.expression!==r?n(X(t,r),e):e},e.createParen=Z,e.updateParen=function(e,t){return e.expression!==t?n(Z(t),e):e},e.createFunctionExpression=ee,e.updateFunctionExpression=function(e,t,r,i,a,o,s,c){return e.name!==i||e.modifiers!==t||e.asteriskToken!==r||e.typeParameters!==a||e.parameters!==o||e.type!==s||e.body!==c?n(ee(t,r,i,a,o,s,c),e):e},e.createArrowFunction=te,e.updateArrowFunction=function(t,r,i,a,o,s,c){var l,u;return void 0===c?(l=t.equalsGreaterThanToken,u=e.cast(s,e.isConciseBody)):(l=e.cast(s,(function(e){return 36===e.kind})),u=c),t.modifiers!==r||t.typeParameters!==i||t.parameters!==a||t.type!==o||t.equalsGreaterThanToken!==l||t.body!==u?n(te(r,i,a,o,l,u),t):t},e.createDelete=ne,e.updateDelete=function(e,t){return e.expression!==t?n(ne(t),e):e},e.createTypeOf=re,e.updateTypeOf=function(e,t){return e.expression!==t?n(re(t),e):e},e.createVoid=ie,e.updateVoid=function(e,t){return e.expression!==t?n(ie(t),e):e},e.createAwait=ae,e.updateAwait=function(e,t){return e.expression!==t?n(ae(t),e):e},e.createPrefix=oe,e.updatePrefix=function(e,t){return e.operand!==t?n(oe(e.operator,t),e):e},e.createPostfix=se,e.updatePostfix=function(e,t){return e.operand!==t?n(se(t,e.operator),e):e},e.createBinary=ce,e.updateBinary=function(e,t,r,i){return e.left!==t||e.right!==r?n(ce(t,i||e.operatorToken,r),e):e},e.createConditional=le,e.updateConditional=function t(r,i){for(var a=[],o=2;o<arguments.length;o++)a[o-2]=arguments[o];if(2===a.length){var s=a[0],c=a[1];return t(r,i,r.questionToken,s,r.colonToken,c)}e.Debug.assert(4===a.length);var l=a[0],u=a[1],d=a[2],p=a[3];return r.condition!==i||r.questionToken!==l||r.whenTrue!==u||r.colonToken!==d||r.whenFalse!==p?n(le(i,l,u,d,p),r):r},e.createTemplateExpression=ue,e.updateTemplateExpression=function(e,t,r){return e.head!==t||e.templateSpans!==r?n(ue(t,r),e):e},e.createTemplateHead=function(e){var n=t(14);return n.text=e,n},e.createTemplateMiddle=function(e){var n=t(15);return n.text=e,n},e.createTemplateTail=function(e){var n=t(16);return n.text=e,n},e.createNoSubstitutionTemplateLiteral=function(e){var n=t(13);return n.text=e,n},e.createYield=de,e.updateYield=function(e,t,r){return e.expression!==r||e.asteriskToken!==t?n(de(t,r),e):e},e.createSpread=pe,e.updateSpread=function(e,t){return e.expression!==t?n(pe(t),e):e},e.createClassExpression=fe,e.updateClassExpression=function(e,t,r,i,a,o){return e.modifiers!==t||e.name!==r||e.typeParameters!==i||e.heritageClauses!==a||e.members!==o?n(fe(t,r,i,a,o),e):e},e.createOmittedExpression=function(){return t(200)},e.createExpressionWithTypeArguments=_e,e.updateExpressionWithTypeArguments=function(e,t,r){return e.typeArguments!==t||e.expression!==r?n(_e(t,r),e):e},e.createAsExpression=me,e.updateAsExpression=function(e,t,r){return e.expression!==t||e.type!==r?n(me(t,r),e):e},e.createNonNullExpression=ge,e.updateNonNullExpression=function(e,t){return e.expression!==t?n(ge(t),e):e},e.createMetaProperty=he,e.updateMetaProperty=function(e,t){return e.name!==t?n(he(e.keywordToken,t),e):e},e.createTemplateSpan=ye,e.updateTemplateSpan=function(e,t,r){return e.expression!==t||e.literal!==r?n(ye(t,r),e):e},e.createSemicolonClassElement=function(){return t(206)},e.createBlock=ve,e.updateBlock=function(e,t){return e.statements!==t?n(ve(t,e.multiLine),e):e},e.createVariableStatement=be,e.updateVariableStatement=function(e,t,r){return e.modifiers!==t||e.declarationList!==r?n(be(t,r),e):e},e.createEmptyStatement=function(){return t(209)},e.createStatement=xe,e.updateStatement=function(e,t){return e.expression!==t?n(xe(t),e):e},e.createIf=ke,e.updateIf=function(e,t,r,i){return e.expression!==t||e.thenStatement!==r||e.elseStatement!==i?n(ke(t,r,i),e):e},e.createDo=Se,e.updateDo=function(e,t,r){return e.statement!==t||e.expression!==r?n(Se(t,r),e):e},e.createWhile=Te,e.updateWhile=function(e,t,r){return e.expression!==t||e.statement!==r?n(Te(t,r),e):e},e.createFor=Ce,e.updateFor=function(e,t,r,i,a){return e.initializer!==t||e.condition!==r||e.incrementor!==i||e.statement!==a?n(Ce(t,r,i,a),e):e},e.createForIn=Ee,e.updateForIn=function(e,t,r,i){return e.initializer!==t||e.expression!==r||e.statement!==i?n(Ee(t,r,i),e):e},e.createForOf=De,e.updateForOf=function(e,t,r,i,a){return e.awaitModifier!==t||e.initializer!==r||e.expression!==i||e.statement!==a?n(De(t,r,i,a),e):e},e.createContinue=Ae,e.updateContinue=function(e,t){return e.label!==t?n(Ae(t),e):e},e.createBreak=we,e.updateBreak=function(e,t){return e.label!==t?n(we(t),e):e},e.createReturn=Ne,e.updateReturn=function(e,t){return e.expression!==t?n(Ne(t),e):e},e.createWith=Ie,e.updateWith=function(e,t,r){return e.expression!==t||e.statement!==r?n(Ie(t,r),e):e},e.createSwitch=Pe,e.updateSwitch=function(e,t,r){return e.expression!==t||e.caseBlock!==r?n(Pe(t,r),e):e},e.createLabel=Oe,e.updateLabel=function(e,t,r){return e.label!==t||e.statement!==r?n(Oe(t,r),e):e},e.createThrow=Fe,e.updateThrow=function(e,t){return e.expression!==t?n(Fe(t),e):e},e.createTry=Le,e.updateTry=function(e,t,r,i){return e.tryBlock!==t||e.catchClause!==r||e.finallyBlock!==i?n(Le(t,r,i),e):e},e.createDebuggerStatement=function(){return t(225)},e.createVariableDeclaration=Re,e.updateVariableDeclaration=function(e,t,r,i){return e.name!==t||e.type!==r||e.initializer!==i?n(Re(t,r,i),e):e},e.createVariableDeclarationList=Me,e.updateVariableDeclarationList=function(e,t){return e.declarations!==t?n(Me(t,e.flags),e):e},e.createFunctionDeclaration=Ue,e.updateFunctionDeclaration=function(e,t,r,i,a,o,s,c,l){return e.decorators!==t||e.modifiers!==r||e.asteriskToken!==i||e.name!==a||e.typeParameters!==o||e.parameters!==s||e.type!==c||e.body!==l?n(Ue(t,r,i,a,o,s,c,l),e):e},e.createClassDeclaration=Be,e.updateClassDeclaration=function(e,t,r,i,a,o,s){return e.decorators!==t||e.modifiers!==r||e.name!==i||e.typeParameters!==a||e.heritageClauses!==o||e.members!==s?n(Be(t,r,i,a,o,s),e):e},e.createInterfaceDeclaration=je,e.updateInterfaceDeclaration=function(e,t,r,i,a,o,s){return e.decorators!==t||e.modifiers!==r||e.name!==i||e.typeParameters!==a||e.heritageClauses!==o||e.members!==s?n(je(t,r,i,a,o,s),e):e},e.createTypeAliasDeclaration=$e,e.updateTypeAliasDeclaration=function(e,t,r,i,a,o){return e.decorators!==t||e.modifiers!==r||e.name!==i||e.typeParameters!==a||e.type!==o?n($e(t,r,i,a,o),e):e},e.createEnumDeclaration=Ke,e.updateEnumDeclaration=function(e,t,r,i,a){return e.decorators!==t||e.modifiers!==r||e.name!==i||e.members!==a?n(Ke(t,r,i,a),e):e},e.createModuleDeclaration=ze,e.updateModuleDeclaration=function(e,t,r,i,a){return e.decorators!==t||e.modifiers!==r||e.name!==i||e.body!==a?n(ze(t,r,i,a,e.flags),e):e},e.createModuleBlock=Je,e.updateModuleBlock=function(e,t){return e.statements!==t?n(Je(t),e):e},e.createCaseBlock=qe,e.updateCaseBlock=function(e,t){return e.clauses!==t?n(qe(t),e):e},e.createNamespaceExportDeclaration=Ve,e.updateNamespaceExportDeclaration=function(e,t){return e.name!==t?n(Ve(t),e):e},e.createImportEqualsDeclaration=He,e.updateImportEqualsDeclaration=function(e,t,r,i,a){return e.decorators!==t||e.modifiers!==r||e.name!==i||e.moduleReference!==a?n(He(t,r,i,a),e):e},e.createImportDeclaration=Ge,e.updateImportDeclaration=function(e,t,r,i,a){return e.decorators!==t||e.modifiers!==r||e.importClause!==i||e.moduleSpecifier!==a?n(Ge(t,r,i,a),e):e},e.createImportClause=We,e.updateImportClause=function(e,t,r){return e.name!==t||e.namedBindings!==r?n(We(t,r),e):e},e.createNamespaceImport=Qe,e.updateNamespaceImport=function(e,t){return e.name!==t?n(Qe(t),e):e},e.createNamedImports=Ye,e.updateNamedImports=function(e,t){return e.elements!==t?n(Ye(t),e):e},e.createImportSpecifier=Xe,e.updateImportSpecifier=function(e,t,r){return e.propertyName!==t||e.name!==r?n(Xe(t,r),e):e},e.createExportAssignment=Ze,e.updateExportAssignment=function(e,t,r,i){return e.decorators!==t||e.modifiers!==r||e.expression!==i?n(Ze(t,r,e.isExportEquals,i),e):e},e.createExportDeclaration=et,e.updateExportDeclaration=function(e,t,r,i,a){return e.decorators!==t||e.modifiers!==r||e.exportClause!==i||e.moduleSpecifier!==a?n(et(t,r,i,a),e):e},e.createNamedExports=tt,e.updateNamedExports=function(e,t){return e.elements!==t?n(tt(t),e):e},e.createExportSpecifier=nt,e.updateExportSpecifier=function(e,t,r){return e.propertyName!==t||e.name!==r?n(nt(t,r),e):e},e.createExternalModuleReference=rt,e.updateExternalModuleReference=function(e,t){return e.expression!==t?n(rt(t),e):e},e.createJsxElement=it,e.updateJsxElement=function(e,t,r,i){return e.openingElement!==t||e.children!==r||e.closingElement!==i?n(it(t,r,i),e):e},e.createJsxSelfClosingElement=at,e.updateJsxSelfClosingElement=function(e,t,r){return e.tagName!==t||e.attributes!==r?n(at(t,r),e):e},e.createJsxOpeningElement=ot,e.updateJsxOpeningElement=function(e,t,r){return e.tagName!==t||e.attributes!==r?n(ot(t,r),e):e},e.createJsxClosingElement=st,e.updateJsxClosingElement=function(e,t){return e.tagName!==t?n(st(t),e):e},e.createJsxAttribute=ct,e.updateJsxAttribute=function(e,t,r){return e.name!==t||e.initializer!==r?n(ct(t,r),e):e},e.createJsxAttributes=lt,e.updateJsxAttributes=function(e,t){return e.properties!==t?n(lt(t),e):e},e.createJsxSpreadAttribute=ut,e.updateJsxSpreadAttribute=function(e,t){return e.expression!==t?n(ut(t),e):e},e.createJsxExpression=dt,e.updateJsxExpression=function(e,t){return e.expression!==t?n(dt(e.dotDotDotToken,t),e):e},e.createCaseClause=pt,e.updateCaseClause=function(e,t,r){return e.expression!==t||e.statements!==r?n(pt(t,r),e):e},e.createDefaultClause=ft,e.updateDefaultClause=function(e,t){return e.statements!==t?n(ft(t),e):e},e.createHeritageClause=_t,e.updateHeritageClause=function(e,t){return e.types!==t?n(_t(e.token,t),e):e},e.createCatchClause=mt,e.updateCatchClause=function(e,t,r){return e.variableDeclaration!==t||e.block!==r?n(mt(t,r),e):e},e.createPropertyAssignment=gt,e.updatePropertyAssignment=function(e,t,r){return e.name!==t||e.initializer!==r?n(gt(t,r),e):e},e.createShorthandPropertyAssignment=ht,e.updateShorthandPropertyAssignment=function(e,t,r){return e.name!==t||e.objectAssignmentInitializer!==r?n(ht(t,r),e):e},e.createSpreadAssignment=yt,e.updateSpreadAssignment=function(e,t){return e.expression!==t?n(yt(t),e):e},e.createEnumMember=vt,e.updateEnumMember=function(e,t,r){return e.name!==t||e.initializer!==r?n(vt(t,r),e):e},e.updateSourceFileNode=function(e,i){if(e.statements!==i){var a=t(265);return a.flags|=e.flags,a.statements=r(i),a.endOfFileToken=e.endOfFileToken,a.fileName=e.fileName,a.path=e.path,a.text=e.text,void 0!==e.amdDependencies&&(a.amdDependencies=e.amdDependencies),void 0!==e.moduleName&&(a.moduleName=e.moduleName),void 0!==e.referencedFiles&&(a.referencedFiles=e.referencedFiles),void 0!==e.typeReferenceDirectives&&(a.typeReferenceDirectives=e.typeReferenceDirectives),void 0!==e.languageVariant&&(a.languageVariant=e.languageVariant),void 0!==e.isDeclarationFile&&(a.isDeclarationFile=e.isDeclarationFile),void 0!==e.renamedDependencies&&(a.renamedDependencies=e.renamedDependencies),void 0!==e.hasNoDefaultLib&&(a.hasNoDefaultLib=e.hasNoDefaultLib),void 0!==e.languageVersion&&(a.languageVersion=e.languageVersion),void 0!==e.scriptKind&&(a.scriptKind=e.scriptKind),void 0!==e.externalModuleIndicator&&(a.externalModuleIndicator=e.externalModuleIndicator),void 0!==e.commonJsModuleIndicator&&(a.commonJsModuleIndicator=e.commonJsModuleIndicator),void 0!==e.identifiers&&(a.identifiers=e.identifiers),void 0!==e.nodeCount&&(a.nodeCount=e.nodeCount),void 0!==e.identifierCount&&(a.identifierCount=e.identifierCount),void 0!==e.symbolCount&&(a.symbolCount=e.symbolCount),void 0!==e.parseDiagnostics&&(a.parseDiagnostics=e.parseDiagnostics),void 0!==e.bindDiagnostics&&(a.bindDiagnostics=e.bindDiagnostics),void 0!==e.lineMap&&(a.lineMap=e.lineMap),void 0!==e.classifiableNames&&(a.classifiableNames=e.classifiableNames),void 0!==e.resolvedModules&&(a.resolvedModules=e.resolvedModules),void 0!==e.resolvedTypeReferenceDirectiveNames&&(a.resolvedTypeReferenceDirectiveNames=e.resolvedTypeReferenceDirectiveNames),void 0!==e.imports&&(a.imports=e.imports),void 0!==e.moduleAugmentations&&(a.moduleAugmentations=e.moduleAugmentations),n(a,e)}return e},e.getMutableClone=function(e){var t=i(e);return t.pos=e.pos,t.end=e.end,t.parent=e.parent,t},e.createNotEmittedStatement=function(e){var n=t(287);return n.original=e,Dt(n,e),n},e.createEndOfDeclarationMarker=function(e){var n=t(291);return n.emitNode={},n.original=e,n},e.createMergeDeclarationMarker=function(e){var n=t(290);return n.emitNode={},n.original=e,n},e.createPartiallyEmittedExpression=bt,e.updatePartiallyEmittedExpression=function(e,t){return e.expression!==t?n(bt(t,e.original),e):e},e.createCommaList=kt,e.updateCommaList=function(e,t){return e.elements!==t?n(kt(t),e):e},e.createBundle=St,e.updateBundle=function(e,t){return e.sourceFiles!==t?St(t):e},e.createImmediatelyInvokedFunctionExpression=function(e,t,n){return W(ee(void 0,void 0,void 0,void 0,t?[t]:[],void 0,ve(e,!0)),void 0,n?[n]:[])},e.createImmediatelyInvokedArrowFunction=function(e,t,n){return W(te(void 0,void 0,t?[t]:[],void 0,void 0,ve(e,!0)),void 0,n?[n]:[])},e.createComma=function(e,t){return ce(e,26,t)},e.createLessThan=function(e,t){return ce(e,27,t)},e.createAssignment=function(e,t){return ce(e,58,t)},e.createStrictEquality=function(e,t){return ce(e,34,t)},e.createStrictInequality=function(e,t){return ce(e,35,t)},e.createAdd=function(e,t){return ce(e,37,t)},e.createSubtract=function(e,t){return ce(e,38,t)},e.createPostfixIncrement=function(e){return se(e,43)},e.createLogicalAnd=function(e,t){return ce(e,53,t)},e.createLogicalOr=function(e,t){return ce(e,54,t)},e.createLogicalNot=function(e){return oe(51,e)},e.createVoidZero=function(){return ie(a(0))},e.createExportDefault=function(e){return Ze(void 0,void 0,!1,e)},e.createExternalModuleExport=function(e){return et(void 0,void 0,tt([nt(void 0,e)]))},e.disposeEmitNodes=function(t){var n=(t=e.getSourceFileOfNode(e.getParseTreeNode(t)))&&t.emitNode,r=n&&n.annotatedNodes;if(r)for(var i=0,a=r;i<a.length;i++){a[i].emitNode=void 0}},e.getOrCreateEmitNode=Et,e.setTextRange=Dt,e.setEmitFlags=At,e.addEmitFlags=function(e,t){var n=Et(e);return n.flags=n.flags|t,e},e.getSourceMapRange=function(e){var t=e.emitNode;return t&&t.sourceMapRange||e},e.setSourceMapRange=function(e,t){return Et(e).sourceMapRange=t,e},e.createSourceMapSource=function(t,n,r){return new(l||(l=e.objectAllocator.getSourceMapSourceConstructor()))(t,n,r)},e.getTokenSourceMapRange=function(e,t){var n=e.emitNode,r=n&&n.tokenSourceMapRanges;return r&&r[t]},e.setTokenSourceMapRange=function(e,t,n){var r=Et(e);return(r.tokenSourceMapRanges||(r.tokenSourceMapRanges=[]))[t]=n,e},e.getCommentRange=function(e){var t=e.emitNode;return t&&t.commentRange||e},e.setCommentRange=function(e,t){return Et(e).commentRange=t,e},e.getSyntheticLeadingComments=wt,e.setSyntheticLeadingComments=Nt,e.addSyntheticLeadingComment=function(t,n,r,i){return Nt(t,e.append(wt(t),{kind:n,pos:-1,end:-1,hasTrailingNewLine:i,text:r}))},e.getSyntheticTrailingComments=It,e.setSyntheticTrailingComments=Pt,e.addSyntheticTrailingComment=function(t,n,r,i){return Pt(t,e.append(It(t),{kind:n,pos:-1,end:-1,hasTrailingNewLine:i,text:r}))},e.getConstantValue=function(e){var t=e.emitNode;return t&&t.constantValue},e.setConstantValue=function(e,t){return Et(e).constantValue=t,e},e.addEmitHelper=function(t,n){var r=Et(t);return r.helpers=e.append(r.helpers,n),t},e.addEmitHelpers=function(t,n){if(e.some(n))for(var r=Et(t),i=0,a=n;i<a.length;i++){var o=a[i];r.helpers=e.appendIfUnique(r.helpers,o)}return t},e.removeEmitHelper=function(t,n){var r=t.emitNode;if(r){var i=r.helpers;if(i)return e.orderedRemoveItem(i,n)}return!1},e.getEmitHelpers=function(e){var t=e.emitNode;return t&&t.helpers},e.moveEmitHelpers=function(t,n,r){var i=t.emitNode,a=i&&i.helpers;if(e.some(a)){for(var o=Et(n),s=0,c=0;c<a.length;c++){var l=a[c];r(l)?(s++,o.helpers=e.appendIfUnique(o.helpers,l)):s>0&&(a[c-s]=l)}s>0&&(a.length-=s)}},e.compareEmitHelpers=function(t,n){return t===n||t.priority===n.priority?0:void 0===t.priority?1:void 0===n.priority?-1:e.compareValues(t.priority,n.priority)},e.setOriginalNode=Ot}(ts||(ts={})),function(e){function t(t,n,r){if(e.isComputedPropertyName(n))return e.setTextRange(e.createElementAccess(t,n.expression),r);var i=e.setTextRange(e.isIdentifier(n)?e.createPropertyAccess(t,n):e.createElementAccess(t,n),n);return e.getOrCreateEmitNode(i).flags|=64,i}function n(t,n){var r=e.createIdentifier(t||"React");return r.flags&=-9,r.parent=e.getParseTreeNode(n),r}function r(t,i){if(e.isQualifiedName(t)){var a=r(t.left,i),o=e.createIdentifier(e.idText(t.right));return o.escapedText=t.right.escapedText,e.createPropertyAccess(a,o)}return n(e.idText(t),i)}function i(t,i,a){return t?r(t,a):e.createPropertyAccess(n(i,a),"createElement")}function a(t){return e.setEmitFlags(e.createIdentifier(t),4098)}e.nullTransformationContext={enableEmitNotification:e.noop,enableSubstitution:e.noop,endLexicalEnvironment:function(){},getCompilerOptions:e.notImplemented,getEmitHost:e.notImplemented,getEmitResolver:e.notImplemented,hoistFunctionDeclaration:e.noop,hoistVariableDeclaration:e.noop,isEmitNotificationEnabled:e.notImplemented,isSubstitutionEnabled:e.notImplemented,onEmitNode:e.noop,onSubstituteNode:e.notImplemented,readEmitHelpers:e.notImplemented,requestEmitHelper:e.noop,resumeLexicalEnvironment:e.noop,startLexicalEnvironment:e.noop,suspendLexicalEnvironment:e.noop},e.createTypeCheck=function(t,n){return"undefined"===n?e.createStrictEquality(t,e.createVoidZero()):e.createStrictEquality(e.createTypeOf(t),e.createLiteral(n))},e.createMemberAccessForPropertyName=t,e.createFunctionCall=function(t,n,r,i){return e.setTextRange(e.createCall(e.createPropertyAccess(t,"call"),void 0,[n].concat(r)),i)},e.createFunctionApply=function(t,n,r,i){return e.setTextRange(e.createCall(e.createPropertyAccess(t,"apply"),void 0,[n,r]),i)},e.createArraySlice=function(t,n){var r=[];return void 0!==n&&r.push("number"==typeof n?e.createLiteral(n):n),e.createCall(e.createPropertyAccess(t,"slice"),void 0,r)},e.createArrayConcat=function(t,n){return e.createCall(e.createPropertyAccess(t,"concat"),void 0,n)},e.createMathPow=function(t,n,r){return e.setTextRange(e.createCall(e.createPropertyAccess(e.createIdentifier("Math"),"pow"),void 0,[t,n]),r)},e.createExpressionForJsxElement=function(t,n,r,a,o,s,c){var l=[r];if(a&&l.push(a),o&&o.length>0)if(a||l.push(e.createNull()),o.length>1)for(var u=0,d=o;u<d.length;u++){var p=d[u];p.startsOnNewLine=!0,l.push(p)}else l.push(o[0]);return e.setTextRange(e.createCall(i(t,n,s),void 0,l),c)},e.getHelperName=a;var o={name:"typescript:values",scoped:!1,text:'\n            var __values = (this && this.__values) || function (o) {\n                var m = typeof Symbol === "function" && o[Symbol.iterator], i = 0;\n                if (m) return m.call(o);\n                return {\n                    next: function () {\n                        if (o && i >= o.length) o = void 0;\n                        return { value: o && o[i++], done: !o };\n                    }\n                };\n            };\n        '};e.createValuesHelper=function(t,n,r){return t.requestEmitHelper(o),e.setTextRange(e.createCall(a("__values"),void 0,[n]),r)};var s={name:"typescript:read",scoped:!1,text:'\n            var __read = (this && this.__read) || function (o, n) {\n                var m = typeof Symbol === "function" && o[Symbol.iterator];\n                if (!m) return o;\n                var i = m.call(o), r, ar = [], e;\n                try {\n                    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n                }\n                catch (error) { e = { error: error }; }\n                finally {\n                    try {\n                        if (r && !r.done && (m = i["return"])) m.call(i);\n                    }\n                    finally { if (e) throw e.error; }\n                }\n                return ar;\n            };\n        '};e.createReadHelper=function(t,n,r,i){return t.requestEmitHelper(s),e.setTextRange(e.createCall(a("__read"),void 0,void 0!==r?[n,e.createLiteral(r)]:[n]),i)};var c={name:"typescript:spread",scoped:!1,text:"\n            var __spread = (this && this.__spread) || function () {\n                for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read(arguments[i]));\n                return ar;\n            };"};function l(e,t){var n=T(e);switch(n.kind){case 71:return t;case 99:case 8:case 9:return!1;case 177:return 0!==n.elements.length;case 178:return n.properties.length>0;default:return!0}}function u(t){return e.isIdentifier(t)?e.createLiteral(t):e.isComputedPropertyName(t)?e.getMutableClone(t.expression):e.getMutableClone(t)}function d(e,t,n){return p(e,t,n,8192)}function p(t,n,r,i){var a=e.getNameOfDeclaration(t);if(a&&e.isIdentifier(a)&&!e.isGeneratedIdentifier(a)){var o=e.getMutableClone(a);return i|=e.getEmitFlags(a),r||(i|=48),n||(i|=1536),i&&e.setEmitFlags(o,i),o}return e.getGeneratedNameForNode(t)}function f(t,n,r,i){var a,o=e.createPropertyAccess(t,e.nodeIsSynthesized(n)?n:e.getSynthesizedClone(n));return e.setTextRange(o,n),i||(a|=48),r||(a|=1536),a&&e.setEmitFlags(o,a),o}function _(t){return e.isStringLiteral(t.expression)&&"use strict"===t.expression.text}function m(t,n,r){e.Debug.assert(0===t.length,"Prologue directives should be at the first statement in the target statements array");for(var i=!1,a=0,o=n.length;a<o;){var s=n[a];if(!e.isPrologueDirective(s))break;_(s)&&(i=!0),t.push(s),a++}return r&&!i&&t.push(D(e.createStatement(e.createLiteral("use strict")))),a}function g(t,n,r,i){for(var a=n.length;r<a;){var o=n[r];if(!(1048576&e.getEmitFlags(o)))break;t.push(i?e.visitNode(o,i,e.isStatement):o),r++}return r}function h(t){if(t=e.skipPartiallyEmittedExpressions(t),e.isLiteralKind(t.kind))return t.kind;if(194===t.kind&&37===t.operatorToken.kind){if(void 0!==t.cachedLiteralKind)return t.cachedLiteralKind;var n=h(t.left),r=e.isLiteralKind(n)&&n===h(t.right)?n:0;return t.cachedLiteralKind=r,r}return 0}function y(t){var n=e.skipPartiallyEmittedExpressions(t);return e.isLeftHandSideExpression(n)&&(182!==n.kind||n.arguments)?t:e.setTextRange(e.createParen(t),t)}function v(t){var n=e.skipPartiallyEmittedExpressions(t);return e.getExpressionPrecedence(n)>e.getOperatorPrecedence(194,26)?t:e.setTextRange(e.createParen(t),t)}function b(t){switch(t.kind){case 166:case 167:case 160:case 161:return e.createParenthesizedType(t)}return t}function x(e,t){for(;;){switch(e.kind){case 193:e=e.operand;continue;case 194:e=e.left;continue;case 195:e=e.condition;continue;case 181:if(t)return e;case 180:case 179:case 288:e=e.expression;continue}return e}}function k(e,t){switch(void 0===t&&(t=7),e.kind){case 185:return 0!=(1&t);case 184:case 202:case 203:return 0!=(2&t);case 288:return 0!=(4&t)}return!1}function S(t,n){var r;void 0===n&&(n=7);do{r=t,1&n&&(t=T(t)),2&n&&(t=C(t)),4&n&&(t=e.skipPartiallyEmittedExpressions(t))}while(r!==t);return t}function T(e){for(;185===e.kind;)e=e.expression;return e}function C(t){for(;e.isAssertionExpression(t)||203===t.kind;)t=t.expression;return t}function E(t,n,r){return void 0===r&&(r=7),t&&k(t,r)&&(!(185===(i=t).kind&&e.nodeIsSynthesized(i)&&e.nodeIsSynthesized(e.getSourceMapRange(i))&&e.nodeIsSynthesized(e.getCommentRange(i)))||e.some(e.getSyntheticLeadingComments(i))||e.some(e.getSyntheticTrailingComments(i)))?function(t,n){switch(t.kind){case 185:return e.updateParen(t,n);case 184:return e.updateTypeAssertion(t,t.type,n);case 202:return e.updateAsExpression(t,n,t.type);case 203:return e.updateNonNullExpression(t,n);case 288:return e.updatePartiallyEmittedExpression(t,n)}}(t,E(t.expression,n)):n;var i}function D(e){return e.startsOnNewLine=!0,e}function A(t){var n=e.getOriginalNode(t,e.isSourceFile),r=n&&n.emitNode;return r&&r.externalHelpersModuleName}function w(t,n,r){if(t)return t.moduleName?e.createLiteral(t.moduleName):t.isDeclarationFile||!r.out&&!r.outFile?void 0:e.createLiteral(e.getExternalModuleNameFromPath(n,t.fileName))}function N(t){if(e.isDeclarationBindingElement(t))return t.name;if(!e.isObjectLiteralElementLike(t))return e.isAssignmentExpression(t,!0)?N(t.left):e.isSpreadElement(t)?N(t.expression):t;switch(t.kind){case 261:return N(t.initializer);case 262:return t.name;case 263:return N(t.expression)}}function I(t){if(e.isBindingElement(t)){if(t.dotDotDotToken)return e.Debug.assertNode(t.name,e.isIdentifier),e.setOriginalNode(e.setTextRange(e.createSpread(t.name),t),t);var n=R(t.name);return t.initializer?e.setOriginalNode(e.setTextRange(e.createAssignment(n,t.initializer),t),t):n}return e.Debug.assertNode(t,e.isExpression),t}function P(t){if(e.isBindingElement(t)){if(t.dotDotDotToken)return e.Debug.assertNode(t.name,e.isIdentifier),e.setOriginalNode(e.setTextRange(e.createSpreadAssignment(t.name),t),t);if(t.propertyName){var n=R(t.name);return e.setOriginalNode(e.setTextRange(e.createPropertyAssignment(t.propertyName,t.initializer?e.createAssignment(n,t.initializer):n),t),t)}return e.Debug.assertNode(t.name,e.isIdentifier),e.setOriginalNode(e.setTextRange(e.createShorthandPropertyAssignment(t.name,t.initializer),t),t)}return e.Debug.assertNode(t,e.isObjectLiteralElementLike),t}function O(e){switch(e.kind){case 175:case 177:return L(e);case 174:case 178:return F(e)}}function F(t){return e.isObjectBindingPattern(t)?e.setOriginalNode(e.setTextRange(e.createObjectLiteral(e.map(t.elements,P)),t),t):(e.Debug.assertNode(t,e.isObjectLiteralExpression),t)}function L(t){return e.isArrayBindingPattern(t)?e.setOriginalNode(e.setTextRange(e.createArrayLiteral(e.map(t.elements,I)),t),t):(e.Debug.assertNode(t,e.isArrayLiteralExpression),t)}function R(t){return e.isBindingPattern(t)?O(t):(e.Debug.assertNode(t,e.isExpression),t)}e.createSpreadHelper=function(t,n,r){return t.requestEmitHelper(s),t.requestEmitHelper(c),e.setTextRange(e.createCall(a("__spread"),void 0,n),r)},e.createForOfBindingStatement=function(t,n){if(e.isVariableDeclarationList(t)){var r=e.firstOrUndefined(t.declarations),i=e.updateVariableDeclaration(r,r.name,void 0,n);return e.setTextRange(e.createVariableStatement(void 0,e.updateVariableDeclarationList(t,[i])),t)}var a=e.setTextRange(e.createAssignment(t,n),t);return e.setTextRange(e.createStatement(a),t)},e.insertLeadingStatement=function(t,n){return e.isBlock(t)?e.updateBlock(t,e.setTextRange(e.createNodeArray([n].concat(t.statements)),t.statements)):e.createBlock(e.createNodeArray([t,n]),!0)},e.restoreEnclosingLabel=function t(n,r,i){if(!r)return n;var a=e.updateLabel(r,r.label,222===r.statement.kind?t(n,r.statement):n);return i&&i(r),a},e.createCallBinding=function(t,n,r,i){var a,o,s=S(t,7);if(e.isSuperProperty(s))a=e.createThis(),o=s;else if(97===s.kind)a=e.createThis(),o=r<2?e.setTextRange(e.createIdentifier("_super"),s):s;else if(4096&e.getEmitFlags(s))a=e.createVoidZero(),o=y(s);else switch(s.kind){case 179:l(s.expression,i)?(a=e.createTempVariable(n),o=e.createPropertyAccess(e.setTextRange(e.createAssignment(a,s.expression),s.expression),s.name),e.setTextRange(o,s)):(a=s.expression,o=s);break;case 180:l(s.expression,i)?(a=e.createTempVariable(n),o=e.createElementAccess(e.setTextRange(e.createAssignment(a,s.expression),s.expression),s.argumentExpression),e.setTextRange(o,s)):(a=s.expression,o=s);break;default:a=e.createVoidZero(),o=y(t)}return{target:o,thisArg:a}},e.inlineExpressions=function(t){return t.length>10?e.createCommaList(t):e.reduceLeft(t,e.createComma)},e.createExpressionFromEntityName=function t(n){if(e.isQualifiedName(n)){var r=t(n.left),i=e.getMutableClone(n.right);return e.setTextRange(e.createPropertyAccess(r,i),n)}return e.getMutableClone(n)},e.createExpressionForPropertyName=u,e.createExpressionForObjectLiteralElementLike=function(n,r,i){switch(r.kind){case 153:case 154:return function(t,n,r,i){var a=e.getAllAccessorDeclarations(t,n),o=a.firstAccessor,s=a.getAccessor,c=a.setAccessor;if(n===o){var l=[];if(s){var d=e.createFunctionExpression(s.modifiers,void 0,void 0,void 0,s.parameters,void 0,s.body);e.setTextRange(d,s),e.setOriginalNode(d,s);var p=e.createPropertyAssignment("get",d);l.push(p)}if(c){var f=e.createFunctionExpression(c.modifiers,void 0,void 0,void 0,c.parameters,void 0,c.body);e.setTextRange(f,c),e.setOriginalNode(f,c);var _=e.createPropertyAssignment("set",f);l.push(_)}l.push(e.createPropertyAssignment("enumerable",e.createTrue())),l.push(e.createPropertyAssignment("configurable",e.createTrue()));var m=e.setTextRange(e.createCall(e.createPropertyAccess(e.createIdentifier("Object"),"defineProperty"),void 0,[r,u(n.name),e.createObjectLiteral(l,i)]),o);return e.aggregateTransformFlags(m)}return}(n.properties,r,i,n.multiLine);case 261:return function(n,r){return e.aggregateTransformFlags(e.setOriginalNode(e.setTextRange(e.createAssignment(t(r,n.name,n.name),n.initializer),n),n))}(r,i);case 262:return function(n,r){return e.aggregateTransformFlags(e.setOriginalNode(e.setTextRange(e.createAssignment(t(r,n.name,n.name),e.getSynthesizedClone(n.name)),n),n))}(r,i);case 151:return function(n,r){return e.aggregateTransformFlags(e.setOriginalNode(e.setTextRange(e.createAssignment(t(r,n.name,n.name),e.setOriginalNode(e.setTextRange(e.createFunctionExpression(n.modifiers,n.asteriskToken,void 0,void 0,n.parameters,void 0,n.body),n),n)),n),n))}(r,i)}},e.getInternalName=function(e,t,n){return p(e,t,n,49152)},e.isInternalName=function(t){return 0!=(32768&e.getEmitFlags(t))},e.getLocalName=function(e,t,n){return p(e,t,n,16384)},e.isLocalName=function(t){return 0!=(16384&e.getEmitFlags(t))},e.getExportName=d,e.isExportName=function(t){return 0!=(8192&e.getEmitFlags(t))},e.getDeclarationName=function(e,t,n){return p(e,t,n)},e.getExternalModuleOrNamespaceExportName=function(t,n,r,i){return t&&e.hasModifier(n,1)?f(t,p(n),r,i):d(n,r,i)},e.getNamespaceMemberName=f,e.convertToFunctionBody=function(t,n){return e.isBlock(t)?t:e.setTextRange(e.createBlock([e.setTextRange(e.createReturn(t),t)],n),t)},e.convertFunctionDeclarationToExpression=function(t){e.Debug.assert(!!t.body);var n=e.createFunctionExpression(t.modifiers,t.asteriskToken,t.name,t.typeParameters,t.parameters,t.type,t.body);return e.setOriginalNode(n,t),e.setTextRange(n,t),t.startsOnNewLine&&(n.startsOnNewLine=!0),e.aggregateTransformFlags(n),n},e.addPrologue=function(e,t,n,r){return g(e,t,m(e,t,n),r)},e.addStandardPrologue=m,e.addCustomPrologue=g,e.startsWithUseStrict=function(t){var n=e.firstOrUndefined(t);return void 0!==n&&e.isPrologueDirective(n)&&_(n)},e.ensureUseStrict=function(t){for(var n=!1,r=0,i=t;r<i.length;r++){var a=i[r];if(!e.isPrologueDirective(a))break;if(_(a)){n=!0;break}}return n?t:e.setTextRange(e.createNodeArray([D(e.createStatement(e.createLiteral("use strict")))].concat(t)),t)},e.parenthesizeBinaryOperand=function(t,n,r,i){return 185===e.skipPartiallyEmittedExpressions(n).kind?n:function(t,n,r,i){var a=e.getOperatorPrecedence(194,t),o=e.getOperatorAssociativity(194,t),s=e.skipPartiallyEmittedExpressions(n),c=e.getExpressionPrecedence(s);switch(e.compareValues(c,a)){case-1:return!(!r&&1===o&&197===n.kind);case 1:return!1;case 0:if(r)return 1===o;if(e.isBinaryExpression(s)&&s.operatorToken.kind===t){if(function(e){return 39===e||49===e||48===e||50===e}(t))return!1;if(37===t){var l=i?h(i):0;if(e.isLiteralKind(l)&&l===h(s))return!1}}return 0===e.getExpressionAssociativity(s)}}(t,n,r,i)?e.createParen(n):n},e.parenthesizeForConditionalHead=function(t){var n=e.getOperatorPrecedence(195,55),r=e.skipPartiallyEmittedExpressions(t),i=e.getExpressionPrecedence(r);return-1===e.compareValues(i,n)?e.createParen(t):t},e.parenthesizeSubexpressionOfConditionalExpression=function(t){return 194===t.kind&&26===t.operatorToken.kind?e.createParen(t):t},e.parenthesizeForNew=function(t){var n=x(t,!0);switch(n.kind){case 181:return e.createParen(t);case 182:return n.arguments?t:e.createParen(t)}return y(t)},e.parenthesizeForAccess=y,e.parenthesizePostfixOperand=function(t){return e.isLeftHandSideExpression(t)?t:e.setTextRange(e.createParen(t),t)},e.parenthesizePrefixOperand=function(t){return e.isUnaryExpression(t)?t:e.setTextRange(e.createParen(t),t)},e.parenthesizeListElements=function(t){for(var n,r=0;r<t.length;r++){var i=v(t[r]);void 0===n&&i===t[r]||(void 0===n&&(n=t.slice(0,r)),n.push(i))}return void 0!==n?e.setTextRange(e.createNodeArray(n,t.hasTrailingComma),t):t},e.parenthesizeExpressionForList=v,e.parenthesizeExpressionForExpressionStatement=function(t){var n=e.skipPartiallyEmittedExpressions(t);if(e.isCallExpression(n)){var r=n.expression,i=e.skipPartiallyEmittedExpressions(r).kind;if(186===i||187===i){var a=e.getMutableClone(n);return a.expression=e.setTextRange(e.createParen(r),r),E(t,a,4)}}var o=x(n,!1).kind;return 178===o||186===o?e.setTextRange(e.createParen(t),t):t},e.parenthesizeElementTypeMember=b,e.parenthesizeArrayTypeMember=function(t){switch(t.kind){case 162:case 170:return e.createParenthesizedType(t)}return b(t)},e.parenthesizeElementTypeMembers=function(t){return e.createNodeArray(e.sameMap(t,b))},e.parenthesizeTypeParameters=function(t){if(e.some(t)){for(var n=[],r=0;r<t.length;++r){var i=t[r];n.push(0===r&&e.isFunctionOrConstructorTypeNode(i)&&i.typeParameters?e.createParenthesizedType(i):i)}return e.createNodeArray(n)}},e.parenthesizeConciseBody=function(t){return e.isBlock(t)||178!==x(t,!1).kind?t:e.setTextRange(e.createParen(t),t)},function(e){e[e.Parentheses=1]="Parentheses",e[e.Assertions=2]="Assertions",e[e.PartiallyEmittedExpressions=4]="PartiallyEmittedExpressions",e[e.All=7]="All"}(e.OuterExpressionKinds||(e.OuterExpressionKinds={})),e.isOuterExpression=k,e.skipOuterExpressions=S,e.skipParentheses=T,e.skipAssertions=C,e.recreateOuterExpressions=E,e.startOnNewLine=D,e.getExternalHelpersModuleName=A,e.getOrCreateExternalHelpersModuleNameIfNeeded=function(t,n,r){if(n.importHelpers&&e.isEffectiveExternalModule(t,n)){var i=A(t);if(i)return i;var a=e.getEmitModuleKind(n),o=r&&a!==e.ModuleKind.System&&a!==e.ModuleKind.ES2015&&a!==e.ModuleKind.ESNext;if(!o){var s=e.getEmitHelpers(t);if(s)for(var c=0,l=s;c<l.length;c++){if(!l[c].scoped){o=!0;break}}}if(o){var u=e.getOriginalNode(t,e.isSourceFile),d=e.getOrCreateEmitNode(u);return d.externalHelpersModuleName||(d.externalHelpersModuleName=e.createUniqueName(e.externalHelpersModuleNameText))}}},e.getLocalNameForExternalImport=function(t,n){var r=e.getNamespaceDeclarationNode(t);if(r&&!e.isDefaultImport(t)){var i=r.name;return e.isGeneratedIdentifier(i)?i:e.createIdentifier(e.getSourceTextOfNodeFromSourceFile(n,r.name))}return 238===t.kind&&t.importClause||244===t.kind&&t.moduleSpecifier?e.getGeneratedNameForNode(t):void 0},e.getExternalModuleNameLiteral=function(t,n,r,i,a){var o=e.getExternalModuleName(t);if(9===o.kind)return function(e,t,n,r){return w(n.getExternalModuleFileFromDeclaration(e),t,r)}(t,r,i,a)||function(t,n){var r=n.renamedDependencies&&n.renamedDependencies.get(t.text);return r&&e.createLiteral(r)}(o,n)||e.getSynthesizedClone(o)},e.tryGetModuleNameFromFile=w,e.getInitializerOfBindingOrAssignmentElement=function t(n){return e.isDeclarationBindingElement(n)?n.initializer:e.isPropertyAssignment(n)?e.isAssignmentExpression(n.initializer,!0)?n.initializer.right:void 0:e.isShorthandPropertyAssignment(n)?n.objectAssignmentInitializer:e.isAssignmentExpression(n,!0)?n.right:e.isSpreadElement(n)?t(n.expression):void 0},e.getTargetOfBindingOrAssignmentElement=N,e.getRestIndicatorOfBindingOrAssignmentElement=function(e){switch(e.kind){case 146:case 176:return e.dotDotDotToken;case 198:case 263:return e}},e.getPropertyNameOfBindingOrAssignmentElement=function(t){switch(t.kind){case 176:if(t.propertyName){var n=t.propertyName;return e.isComputedPropertyName(n)&&e.isStringOrNumericLiteral(n.expression)?n.expression:n}break;case 261:if(t.name){n=t.name;return e.isComputedPropertyName(n)&&e.isStringOrNumericLiteral(n.expression)?n.expression:n}break;case 263:return t.name}var r=N(t);if(r&&e.isPropertyName(r))return e.isComputedPropertyName(r)&&e.isStringOrNumericLiteral(r.expression)?r.expression:r;e.Debug.fail("Invalid property name for binding element.")},e.getElementsOfBindingOrAssignmentPattern=function(e){switch(e.kind){case 174:case 175:case 177:return e.elements;case 178:return e.properties}},e.convertToArrayAssignmentElement=I,e.convertToObjectAssignmentElement=P,e.convertToAssignmentPattern=O,e.convertToObjectAssignmentPattern=F,e.convertToArrayAssignmentPattern=L,e.convertToAssignmentElementTarget=R}(ts||(ts={})),function(e){function t(t,n,r,i){if(void 0===t||void 0===n)return t;e.aggregateTransformFlags(t);var a,s=n(t);return s===t?t:void 0!==s?(a=e.isArray(s)?(i||o)(s):s,e.Debug.assertNode(a,r),e.aggregateTransformFlags(a),a):void 0}function n(t,n,r,i,a){if(void 0===t||void 0===n)return t;var o,s=t.length;(void 0===i||i<0)&&(i=0),(void 0===a||a>s-i)&&(a=s-i),(i>0||a<s)&&(o=e.createNodeArray([],t.hasTrailingComma&&i+a===s));for(var c=0;c<a;c++){var l=t[c+i];e.aggregateTransformFlags(l);var u=void 0!==l?n(l):void 0;if((void 0!==o||void 0===u||u!==l)&&(void 0===o&&(o=e.createNodeArray(t.slice(0,c),t.hasTrailingComma),e.setTextRange(o,t)),u))if(e.isArray(u))for(var d=0,p=u;d<p.length;d++){var f=p[d];e.Debug.assertNode(f,r),e.aggregateTransformFlags(f),o.push(f)}else e.Debug.assertNode(u,r),e.aggregateTransformFlags(u),o.push(u)}return o||t}function r(t,r,i,a,o){i.startLexicalEnvironment(),t=n(t,r,e.isStatement,a),o&&!e.startsWithUseStrict(t)&&(t=e.setTextRange(e.createNodeArray([e.createStatement(e.createLiteral("use strict"))].concat(t)),t));var s=i.endLexicalEnvironment();return e.setTextRange(e.createNodeArray(e.concatenate(t,s)),t)}function i(t,r,i,a){void 0===a&&(a=n),i.startLexicalEnvironment();var o=a(t,r,e.isParameterDeclaration);return i.suspendLexicalEnvironment(),o}function a(n,r,i){i.resumeLexicalEnvironment();var a=t(n,r,e.isConciseBody),o=i.endLexicalEnvironment();if(e.some(o)){var s=e.convertToFunctionBody(a),c=e.mergeLexicalEnvironment(s.statements,o);return e.updateBlock(s,c)}return a}function o(t){return e.Debug.assert(t.length<=1,"Too many nodes written to output."),e.singleOrUndefined(t)}e.visitNode=t,e.visitNodes=n,e.visitLexicalEnvironment=r,e.visitParameterList=i,e.visitFunctionBody=a,e.visitEachChild=function(o,s,c,l,u){if(void 0===l&&(l=n),void 0!==o){var d=o.kind;if(d>0&&d<=142||169===d)return o;switch(d){case 71:return e.updateIdentifier(o,l(o.typeArguments,s,e.isTypeNode));case 143:return e.updateQualifiedName(o,t(o.left,s,e.isEntityName),t(o.right,s,e.isIdentifier));case 144:return e.updateComputedPropertyName(o,t(o.expression,s,e.isExpression));case 145:return e.updateTypeParameterDeclaration(o,t(o.name,s,e.isIdentifier),t(o.constraint,s,e.isTypeNode),t(o.default,s,e.isTypeNode));case 146:return e.updateParameter(o,l(o.decorators,s,e.isDecorator),l(o.modifiers,s,e.isModifier),t(o.dotDotDotToken,u,e.isToken),t(o.name,s,e.isBindingName),t(o.questionToken,u,e.isToken),t(o.type,s,e.isTypeNode),t(o.initializer,s,e.isExpression));case 147:return e.updateDecorator(o,t(o.expression,s,e.isExpression));case 148:return e.updatePropertySignature(o,l(o.modifiers,s,e.isToken),t(o.name,s,e.isPropertyName),t(o.questionToken,u,e.isToken),t(o.type,s,e.isTypeNode),t(o.initializer,s,e.isExpression));case 149:return e.updateProperty(o,l(o.decorators,s,e.isDecorator),l(o.modifiers,s,e.isModifier),t(o.name,s,e.isPropertyName),t(o.questionToken,u,e.isToken),t(o.type,s,e.isTypeNode),t(o.initializer,s,e.isExpression));case 150:return e.updateMethodSignature(o,l(o.typeParameters,s,e.isTypeParameterDeclaration),l(o.parameters,s,e.isParameterDeclaration),t(o.type,s,e.isTypeNode),t(o.name,s,e.isPropertyName),t(o.questionToken,u,e.isToken));case 151:return e.updateMethod(o,l(o.decorators,s,e.isDecorator),l(o.modifiers,s,e.isModifier),t(o.asteriskToken,u,e.isToken),t(o.name,s,e.isPropertyName),t(o.questionToken,u,e.isToken),l(o.typeParameters,s,e.isTypeParameterDeclaration),i(o.parameters,s,c,l),t(o.type,s,e.isTypeNode),a(o.body,s,c));case 152:return e.updateConstructor(o,l(o.decorators,s,e.isDecorator),l(o.modifiers,s,e.isModifier),i(o.parameters,s,c,l),a(o.body,s,c));case 153:return e.updateGetAccessor(o,l(o.decorators,s,e.isDecorator),l(o.modifiers,s,e.isModifier),t(o.name,s,e.isPropertyName),i(o.parameters,s,c,l),t(o.type,s,e.isTypeNode),a(o.body,s,c));case 154:return e.updateSetAccessor(o,l(o.decorators,s,e.isDecorator),l(o.modifiers,s,e.isModifier),t(o.name,s,e.isPropertyName),i(o.parameters,s,c,l),a(o.body,s,c));case 155:return e.updateCallSignature(o,l(o.typeParameters,s,e.isTypeParameterDeclaration),l(o.parameters,s,e.isParameterDeclaration),t(o.type,s,e.isTypeNode));case 156:return e.updateConstructSignature(o,l(o.typeParameters,s,e.isTypeParameterDeclaration),l(o.parameters,s,e.isParameterDeclaration),t(o.type,s,e.isTypeNode));case 157:return e.updateIndexSignature(o,l(o.decorators,s,e.isDecorator),l(o.modifiers,s,e.isModifier),l(o.parameters,s,e.isParameterDeclaration),t(o.type,s,e.isTypeNode));case 158:return e.updateTypePredicateNode(o,t(o.parameterName,s),t(o.type,s,e.isTypeNode));case 159:return e.updateTypeReferenceNode(o,t(o.typeName,s,e.isEntityName),l(o.typeArguments,s,e.isTypeNode));case 160:return e.updateFunctionTypeNode(o,l(o.typeParameters,s,e.isTypeParameterDeclaration),l(o.parameters,s,e.isParameterDeclaration),t(o.type,s,e.isTypeNode));case 161:return e.updateConstructorTypeNode(o,l(o.typeParameters,s,e.isTypeParameterDeclaration),l(o.parameters,s,e.isParameterDeclaration),t(o.type,s,e.isTypeNode));case 162:return e.updateTypeQueryNode(o,t(o.exprName,s,e.isEntityName));case 163:return e.updateTypeLiteralNode(o,l(o.members,s,e.isTypeElement));case 164:return e.updateArrayTypeNode(o,t(o.elementType,s,e.isTypeNode));case 165:return e.updateTypleTypeNode(o,l(o.elementTypes,s,e.isTypeNode));case 166:return e.updateUnionTypeNode(o,l(o.types,s,e.isTypeNode));case 167:return e.updateIntersectionTypeNode(o,l(o.types,s,e.isTypeNode));case 168:return e.updateParenthesizedType(o,t(o.type,s,e.isTypeNode));case 170:return e.updateTypeOperatorNode(o,t(o.type,s,e.isTypeNode));case 171:return e.updateIndexedAccessTypeNode(o,t(o.objectType,s,e.isTypeNode),t(o.indexType,s,e.isTypeNode));case 172:return e.updateMappedTypeNode(o,t(o.readonlyToken,u,e.isToken),t(o.typeParameter,s,e.isTypeParameterDeclaration),t(o.questionToken,u,e.isToken),t(o.type,s,e.isTypeNode));case 173:return e.updateLiteralTypeNode(o,t(o.literal,s,e.isExpression));case 174:return e.updateObjectBindingPattern(o,l(o.elements,s,e.isBindingElement));case 175:return e.updateArrayBindingPattern(o,l(o.elements,s,e.isArrayBindingElement));case 176:return e.updateBindingElement(o,t(o.dotDotDotToken,u,e.isToken),t(o.propertyName,s,e.isPropertyName),t(o.name,s,e.isBindingName),t(o.initializer,s,e.isExpression));case 177:return e.updateArrayLiteral(o,l(o.elements,s,e.isExpression));case 178:return e.updateObjectLiteral(o,l(o.properties,s,e.isObjectLiteralElementLike));case 179:return e.updatePropertyAccess(o,t(o.expression,s,e.isExpression),t(o.name,s,e.isIdentifier));case 180:return e.updateElementAccess(o,t(o.expression,s,e.isExpression),t(o.argumentExpression,s,e.isExpression));case 181:return e.updateCall(o,t(o.expression,s,e.isExpression),l(o.typeArguments,s,e.isTypeNode),l(o.arguments,s,e.isExpression));case 182:return e.updateNew(o,t(o.expression,s,e.isExpression),l(o.typeArguments,s,e.isTypeNode),l(o.arguments,s,e.isExpression));case 183:return e.updateTaggedTemplate(o,t(o.tag,s,e.isExpression),t(o.template,s,e.isTemplateLiteral));case 184:return e.updateTypeAssertion(o,t(o.type,s,e.isTypeNode),t(o.expression,s,e.isExpression));case 185:return e.updateParen(o,t(o.expression,s,e.isExpression));case 186:return e.updateFunctionExpression(o,l(o.modifiers,s,e.isModifier),t(o.asteriskToken,u,e.isToken),t(o.name,s,e.isIdentifier),l(o.typeParameters,s,e.isTypeParameterDeclaration),i(o.parameters,s,c,l),t(o.type,s,e.isTypeNode),a(o.body,s,c));case 187:return e.updateArrowFunction(o,l(o.modifiers,s,e.isModifier),l(o.typeParameters,s,e.isTypeParameterDeclaration),i(o.parameters,s,c,l),t(o.type,s,e.isTypeNode),t(o.equalsGreaterThanToken,s,e.isToken),a(o.body,s,c));case 188:return e.updateDelete(o,t(o.expression,s,e.isExpression));case 189:return e.updateTypeOf(o,t(o.expression,s,e.isExpression));case 190:return e.updateVoid(o,t(o.expression,s,e.isExpression));case 191:return e.updateAwait(o,t(o.expression,s,e.isExpression));case 192:return e.updatePrefix(o,t(o.operand,s,e.isExpression));case 193:return e.updatePostfix(o,t(o.operand,s,e.isExpression));case 194:return e.updateBinary(o,t(o.left,s,e.isExpression),t(o.right,s,e.isExpression),t(o.operatorToken,s,e.isToken));case 195:return e.updateConditional(o,t(o.condition,s,e.isExpression),t(o.questionToken,s,e.isToken),t(o.whenTrue,s,e.isExpression),t(o.colonToken,s,e.isToken),t(o.whenFalse,s,e.isExpression));case 196:return e.updateTemplateExpression(o,t(o.head,s,e.isTemplateHead),l(o.templateSpans,s,e.isTemplateSpan));case 197:return e.updateYield(o,t(o.asteriskToken,u,e.isToken),t(o.expression,s,e.isExpression));case 198:return e.updateSpread(o,t(o.expression,s,e.isExpression));case 199:return e.updateClassExpression(o,l(o.modifiers,s,e.isModifier),t(o.name,s,e.isIdentifier),l(o.typeParameters,s,e.isTypeParameterDeclaration),l(o.heritageClauses,s,e.isHeritageClause),l(o.members,s,e.isClassElement));case 201:return e.updateExpressionWithTypeArguments(o,l(o.typeArguments,s,e.isTypeNode),t(o.expression,s,e.isExpression));case 202:return e.updateAsExpression(o,t(o.expression,s,e.isExpression),t(o.type,s,e.isTypeNode));case 203:return e.updateNonNullExpression(o,t(o.expression,s,e.isExpression));case 204:return e.updateMetaProperty(o,t(o.name,s,e.isIdentifier));case 205:return e.updateTemplateSpan(o,t(o.expression,s,e.isExpression),t(o.literal,s,e.isTemplateMiddleOrTemplateTail));case 207:return e.updateBlock(o,l(o.statements,s,e.isStatement));case 208:return e.updateVariableStatement(o,l(o.modifiers,s,e.isModifier),t(o.declarationList,s,e.isVariableDeclarationList));case 210:return e.updateStatement(o,t(o.expression,s,e.isExpression));case 211:return e.updateIf(o,t(o.expression,s,e.isExpression),t(o.thenStatement,s,e.isStatement,e.liftToBlock),t(o.elseStatement,s,e.isStatement,e.liftToBlock));case 212:return e.updateDo(o,t(o.statement,s,e.isStatement,e.liftToBlock),t(o.expression,s,e.isExpression));case 213:return e.updateWhile(o,t(o.expression,s,e.isExpression),t(o.statement,s,e.isStatement,e.liftToBlock));case 214:return e.updateFor(o,t(o.initializer,s,e.isForInitializer),t(o.condition,s,e.isExpression),t(o.incrementor,s,e.isExpression),t(o.statement,s,e.isStatement,e.liftToBlock));case 215:return e.updateForIn(o,t(o.initializer,s,e.isForInitializer),t(o.expression,s,e.isExpression),t(o.statement,s,e.isStatement,e.liftToBlock));case 216:return e.updateForOf(o,o.awaitModifier,t(o.initializer,s,e.isForInitializer),t(o.expression,s,e.isExpression),t(o.statement,s,e.isStatement,e.liftToBlock));case 217:return e.updateContinue(o,t(o.label,s,e.isIdentifier));case 218:return e.updateBreak(o,t(o.label,s,e.isIdentifier));case 219:return e.updateReturn(o,t(o.expression,s,e.isExpression));case 220:return e.updateWith(o,t(o.expression,s,e.isExpression),t(o.statement,s,e.isStatement,e.liftToBlock));case 221:return e.updateSwitch(o,t(o.expression,s,e.isExpression),t(o.caseBlock,s,e.isCaseBlock));case 222:return e.updateLabel(o,t(o.label,s,e.isIdentifier),t(o.statement,s,e.isStatement,e.liftToBlock));case 223:return e.updateThrow(o,t(o.expression,s,e.isExpression));case 224:return e.updateTry(o,t(o.tryBlock,s,e.isBlock),t(o.catchClause,s,e.isCatchClause),t(o.finallyBlock,s,e.isBlock));case 226:return e.updateVariableDeclaration(o,t(o.name,s,e.isBindingName),t(o.type,s,e.isTypeNode),t(o.initializer,s,e.isExpression));case 227:return e.updateVariableDeclarationList(o,l(o.declarations,s,e.isVariableDeclaration));case 228:return e.updateFunctionDeclaration(o,l(o.decorators,s,e.isDecorator),l(o.modifiers,s,e.isModifier),t(o.asteriskToken,u,e.isToken),t(o.name,s,e.isIdentifier),l(o.typeParameters,s,e.isTypeParameterDeclaration),i(o.parameters,s,c,l),t(o.type,s,e.isTypeNode),a(o.body,s,c));case 229:return e.updateClassDeclaration(o,l(o.decorators,s,e.isDecorator),l(o.modifiers,s,e.isModifier),t(o.name,s,e.isIdentifier),l(o.typeParameters,s,e.isTypeParameterDeclaration),l(o.heritageClauses,s,e.isHeritageClause),l(o.members,s,e.isClassElement));case 230:return e.updateInterfaceDeclaration(o,l(o.decorators,s,e.isDecorator),l(o.modifiers,s,e.isModifier),t(o.name,s,e.isIdentifier),l(o.typeParameters,s,e.isTypeParameterDeclaration),l(o.heritageClauses,s,e.isHeritageClause),l(o.members,s,e.isTypeElement));case 231:return e.updateTypeAliasDeclaration(o,l(o.decorators,s,e.isDecorator),l(o.modifiers,s,e.isModifier),t(o.name,s,e.isIdentifier),l(o.typeParameters,s,e.isTypeParameterDeclaration),t(o.type,s,e.isTypeNode));case 232:return e.updateEnumDeclaration(o,l(o.decorators,s,e.isDecorator),l(o.modifiers,s,e.isModifier),t(o.name,s,e.isIdentifier),l(o.members,s,e.isEnumMember));case 233:return e.updateModuleDeclaration(o,l(o.decorators,s,e.isDecorator),l(o.modifiers,s,e.isModifier),t(o.name,s,e.isIdentifier),t(o.body,s,e.isModuleBody));case 234:return e.updateModuleBlock(o,l(o.statements,s,e.isStatement));case 235:return e.updateCaseBlock(o,l(o.clauses,s,e.isCaseOrDefaultClause));case 236:return e.updateNamespaceExportDeclaration(o,t(o.name,s,e.isIdentifier));case 237:return e.updateImportEqualsDeclaration(o,l(o.decorators,s,e.isDecorator),l(o.modifiers,s,e.isModifier),t(o.name,s,e.isIdentifier),t(o.moduleReference,s,e.isModuleReference));case 238:return e.updateImportDeclaration(o,l(o.decorators,s,e.isDecorator),l(o.modifiers,s,e.isModifier),t(o.importClause,s,e.isImportClause),t(o.moduleSpecifier,s,e.isExpression));case 239:return e.updateImportClause(o,t(o.name,s,e.isIdentifier),t(o.namedBindings,s,e.isNamedImportBindings));case 240:return e.updateNamespaceImport(o,t(o.name,s,e.isIdentifier));case 241:return e.updateNamedImports(o,l(o.elements,s,e.isImportSpecifier));case 242:return e.updateImportSpecifier(o,t(o.propertyName,s,e.isIdentifier),t(o.name,s,e.isIdentifier));case 243:return e.updateExportAssignment(o,l(o.decorators,s,e.isDecorator),l(o.modifiers,s,e.isModifier),t(o.expression,s,e.isExpression));case 244:return e.updateExportDeclaration(o,l(o.decorators,s,e.isDecorator),l(o.modifiers,s,e.isModifier),t(o.exportClause,s,e.isNamedExports),t(o.moduleSpecifier,s,e.isExpression));case 245:return e.updateNamedExports(o,l(o.elements,s,e.isExportSpecifier));case 246:return e.updateExportSpecifier(o,t(o.propertyName,s,e.isIdentifier),t(o.name,s,e.isIdentifier));case 248:return e.updateExternalModuleReference(o,t(o.expression,s,e.isExpression));case 249:return e.updateJsxElement(o,t(o.openingElement,s,e.isJsxOpeningElement),l(o.children,s,e.isJsxChild),t(o.closingElement,s,e.isJsxClosingElement));case 250:return e.updateJsxSelfClosingElement(o,t(o.tagName,s,e.isJsxTagNameExpression),t(o.attributes,s,e.isJsxAttributes));case 251:return e.updateJsxOpeningElement(o,t(o.tagName,s,e.isJsxTagNameExpression),t(o.attributes,s,e.isJsxAttributes));case 252:return e.updateJsxClosingElement(o,t(o.tagName,s,e.isJsxTagNameExpression));case 253:return e.updateJsxAttribute(o,t(o.name,s,e.isIdentifier),t(o.initializer,s,e.isStringLiteralOrJsxExpression));case 254:return e.updateJsxAttributes(o,l(o.properties,s,e.isJsxAttributeLike));case 255:return e.updateJsxSpreadAttribute(o,t(o.expression,s,e.isExpression));case 256:return e.updateJsxExpression(o,t(o.expression,s,e.isExpression));case 257:return e.updateCaseClause(o,t(o.expression,s,e.isExpression),l(o.statements,s,e.isStatement));case 258:return e.updateDefaultClause(o,l(o.statements,s,e.isStatement));case 259:return e.updateHeritageClause(o,l(o.types,s,e.isExpressionWithTypeArguments));case 260:return e.updateCatchClause(o,t(o.variableDeclaration,s,e.isVariableDeclaration),t(o.block,s,e.isBlock));case 261:return e.updatePropertyAssignment(o,t(o.name,s,e.isPropertyName),t(o.initializer,s,e.isExpression));case 262:return e.updateShorthandPropertyAssignment(o,t(o.name,s,e.isIdentifier),t(o.objectAssignmentInitializer,s,e.isExpression));case 263:return e.updateSpreadAssignment(o,t(o.expression,s,e.isExpression));case 264:return e.updateEnumMember(o,t(o.name,s,e.isPropertyName),t(o.initializer,s,e.isExpression));case 265:return e.updateSourceFileNode(o,r(o.statements,s,c));case 288:return e.updatePartiallyEmittedExpression(o,t(o.expression,s,e.isExpression));case 289:return e.updateCommaList(o,l(o.elements,s,e.isExpression));default:return o}}}}(ts||(ts={})),function(e){function t(e,t,n){return e?t(n,e):n}function n(e,t,n){return e?t(n,e):n}function r(r,i,a,o){if(void 0===r)return i;var s=o?n:e.reduceLeft,c=o||a,l=r.kind;if(l>0&&l<=142)return i;if(l>=158&&l<=173)return i;var u=i;switch(r.kind){case 206:case 209:case 200:case 225:case 287:break;case 143:u=t(r.left,a,u),u=t(r.right,a,u);break;case 144:u=t(r.expression,a,u);break;case 146:u=s(r.decorators,c,u),u=s(r.modifiers,c,u),u=t(r.name,a,u),u=t(r.type,a,u),u=t(r.initializer,a,u);break;case 147:u=t(r.expression,a,u);break;case 148:u=s(r.modifiers,c,u),u=t(r.name,a,u),u=t(r.questionToken,a,u),u=t(r.type,a,u),u=t(r.initializer,a,u);break;case 149:u=s(r.decorators,c,u),u=s(r.modifiers,c,u),u=t(r.name,a,u),u=t(r.type,a,u),u=t(r.initializer,a,u);break;case 151:u=s(r.decorators,c,u),u=s(r.modifiers,c,u),u=t(r.name,a,u),u=s(r.typeParameters,c,u),u=s(r.parameters,c,u),u=t(r.type,a,u),u=t(r.body,a,u);break;case 152:u=s(r.modifiers,c,u),u=s(r.parameters,c,u),u=t(r.body,a,u);break;case 153:u=s(r.decorators,c,u),u=s(r.modifiers,c,u),u=t(r.name,a,u),u=s(r.parameters,c,u),u=t(r.type,a,u),u=t(r.body,a,u);break;case 154:u=s(r.decorators,c,u),u=s(r.modifiers,c,u),u=t(r.name,a,u),u=s(r.parameters,c,u),u=t(r.body,a,u);break;case 174:case 175:u=s(r.elements,c,u);break;case 176:u=t(r.propertyName,a,u),u=t(r.name,a,u),u=t(r.initializer,a,u);break;case 177:u=s(r.elements,c,u);break;case 178:u=s(r.properties,c,u);break;case 179:u=t(r.expression,a,u),u=t(r.name,a,u);break;case 180:u=t(r.expression,a,u),u=t(r.argumentExpression,a,u);break;case 181:case 182:u=t(r.expression,a,u),u=s(r.typeArguments,c,u),u=s(r.arguments,c,u);break;case 183:u=t(r.tag,a,u),u=t(r.template,a,u);break;case 184:u=t(r.type,a,u),u=t(r.expression,a,u);break;case 186:u=s(r.modifiers,c,u),u=t(r.name,a,u),u=s(r.typeParameters,c,u),u=s(r.parameters,c,u),u=t(r.type,a,u),u=t(r.body,a,u);break;case 187:u=s(r.modifiers,c,u),u=s(r.typeParameters,c,u),u=s(r.parameters,c,u),u=t(r.type,a,u),u=t(r.body,a,u);break;case 185:case 188:case 189:case 190:case 191:case 197:case 198:case 203:u=t(r.expression,a,u);break;case 192:case 193:u=t(r.operand,a,u);break;case 194:u=t(r.left,a,u),u=t(r.right,a,u);break;case 195:u=t(r.condition,a,u),u=t(r.whenTrue,a,u),u=t(r.whenFalse,a,u);break;case 196:u=t(r.head,a,u),u=s(r.templateSpans,c,u);break;case 199:u=s(r.modifiers,c,u),u=t(r.name,a,u),u=s(r.typeParameters,c,u),u=s(r.heritageClauses,c,u),u=s(r.members,c,u);break;case 201:u=t(r.expression,a,u),u=s(r.typeArguments,c,u);break;case 202:u=t(r.expression,a,u),u=t(r.type,a,u);break;case 205:u=t(r.expression,a,u),u=t(r.literal,a,u);break;case 207:u=s(r.statements,c,u);break;case 208:u=s(r.modifiers,c,u),u=t(r.declarationList,a,u);break;case 210:u=t(r.expression,a,u);break;case 211:u=t(r.expression,a,u),u=t(r.thenStatement,a,u),u=t(r.elseStatement,a,u);break;case 212:u=t(r.statement,a,u),u=t(r.expression,a,u);break;case 213:case 220:u=t(r.expression,a,u),u=t(r.statement,a,u);break;case 214:u=t(r.initializer,a,u),u=t(r.condition,a,u),u=t(r.incrementor,a,u),u=t(r.statement,a,u);break;case 215:case 216:u=t(r.initializer,a,u),u=t(r.expression,a,u),u=t(r.statement,a,u);break;case 219:case 223:u=t(r.expression,a,u);break;case 221:u=t(r.expression,a,u),u=t(r.caseBlock,a,u);break;case 222:u=t(r.label,a,u),u=t(r.statement,a,u);break;case 224:u=t(r.tryBlock,a,u),u=t(r.catchClause,a,u),u=t(r.finallyBlock,a,u);break;case 226:u=t(r.name,a,u),u=t(r.type,a,u),u=t(r.initializer,a,u);break;case 227:u=s(r.declarations,c,u);break;case 228:u=s(r.decorators,c,u),u=s(r.modifiers,c,u),u=t(r.name,a,u),u=s(r.typeParameters,c,u),u=s(r.parameters,c,u),u=t(r.type,a,u),u=t(r.body,a,u);break;case 229:u=s(r.decorators,c,u),u=s(r.modifiers,c,u),u=t(r.name,a,u),u=s(r.typeParameters,c,u),u=s(r.heritageClauses,c,u),u=s(r.members,c,u);break;case 232:u=s(r.decorators,c,u),u=s(r.modifiers,c,u),u=t(r.name,a,u),u=s(r.members,c,u);break;case 233:u=s(r.decorators,c,u),u=s(r.modifiers,c,u),u=t(r.name,a,u),u=t(r.body,a,u);break;case 234:u=s(r.statements,c,u);break;case 235:u=s(r.clauses,c,u);break;case 237:u=s(r.decorators,c,u),u=s(r.modifiers,c,u),u=t(r.name,a,u),u=t(r.moduleReference,a,u);break;case 238:u=s(r.decorators,c,u),u=s(r.modifiers,c,u),u=t(r.importClause,a,u),u=t(r.moduleSpecifier,a,u);break;case 239:u=t(r.name,a,u),u=t(r.namedBindings,a,u);break;case 240:u=t(r.name,a,u);break;case 241:case 245:u=s(r.elements,c,u);break;case 242:case 246:u=t(r.propertyName,a,u),u=t(r.name,a,u);break;case 243:u=e.reduceLeft(r.decorators,a,u),u=e.reduceLeft(r.modifiers,a,u),u=t(r.expression,a,u);break;case 244:u=e.reduceLeft(r.decorators,a,u),u=e.reduceLeft(r.modifiers,a,u),u=t(r.exportClause,a,u),u=t(r.moduleSpecifier,a,u);break;case 248:u=t(r.expression,a,u);break;case 249:u=t(r.openingElement,a,u),u=e.reduceLeft(r.children,a,u),u=t(r.closingElement,a,u);break;case 250:case 251:u=t(r.tagName,a,u),u=t(r.attributes,a,u);break;case 254:u=s(r.properties,c,u);break;case 252:u=t(r.tagName,a,u);break;case 253:u=t(r.name,a,u),u=t(r.initializer,a,u);break;case 255:case 256:u=t(r.expression,a,u);break;case 257:u=t(r.expression,a,u);case 258:u=s(r.statements,c,u);break;case 259:u=s(r.types,c,u);break;case 260:u=t(r.variableDeclaration,a,u),u=t(r.block,a,u);break;case 261:u=t(r.name,a,u),u=t(r.initializer,a,u);break;case 262:u=t(r.name,a,u),u=t(r.objectAssignmentInitializer,a,u);break;case 263:u=t(r.expression,a,u);break;case 264:u=t(r.name,a,u),u=t(r.initializer,a,u);break;case 265:u=s(r.statements,c,u);break;case 288:u=t(r.expression,a,u);break;case 289:u=s(r.elements,c,u)}return u}function i(t){if(void 0===t)return 0;if(536870912&t.transformFlags)return t.transformFlags&~e.getTransformFlagsSubtreeExclusions(t.kind);var n=function(t){if(e.hasModifier(t,2)||e.isTypeNode(t)&&201!==t.kind)return 0;return r(t,0,a,o)}(t);return e.computeTransformFlagsForNode(t,n)}function a(e,t){return e|i(t)}function o(e,t){return e|function(e){if(void 0===e)return 0;for(var t=0,n=0,r=0,a=e;r<a.length;r++){var o=a[r];t|=i(o),n|=-536870913&o.transformFlags}return e.transformFlags=536870912|n,t}(t)}var s;e.reduceEachChild=r,e.mergeLexicalEnvironment=function(t,n){return e.some(n)?e.isNodeArray(t)?e.setTextRange(e.createNodeArray(e.concatenate(t,n)),t):e.addRange(t,n):t},e.liftToBlock=function(t){return s.assert(e.every(t,e.isStatement),"Cannot lift nodes to a Block."),e.singleOrUndefined(t)||e.createBlock(t)},e.aggregateTransformFlags=function(e){return i(e),e},function(t){var n=!1;t.failBadSyntaxKind=t.shouldAssert(1)?function(n,r){return t.fail((r||"Unexpected node.")+"\r\nNode "+e.formatSyntaxKind(n.kind)+" was unexpected.",t.failBadSyntaxKind)}:e.noop,t.assertEachNode=t.shouldAssert(1)?function(n,r,i){return t.assert(void 0===r||e.every(n,r),i||"Unexpected node.",(function(){return"Node array did not pass test '"+t.getFunctionName(r)+"'."}),t.assertEachNode)}:e.noop,t.assertNode=t.shouldAssert(1)?function(n,r,i){return t.assert(void 0===r||r(n),i||"Unexpected node.",(function(){return"Node "+e.formatSyntaxKind(n.kind)+" did not pass test '"+t.getFunctionName(r)+"'."}),t.assertNode)}:e.noop,t.assertOptionalNode=t.shouldAssert(1)?function(n,r,i){return t.assert(void 0===r||void 0===n||r(n),i||"Unexpected node.",(function(){return"Node "+e.formatSyntaxKind(n.kind)+" did not pass test '"+t.getFunctionName(r)+"'."}),t.assertOptionalNode)}:e.noop,t.assertOptionalToken=t.shouldAssert(1)?function(n,r,i){return t.assert(void 0===r||void 0===n||n.kind===r,i||"Unexpected node.",(function(){return"Node "+e.formatSyntaxKind(n.kind)+" was not a '"+e.formatSyntaxKind(r)+"' token."}),t.assertOptionalToken)}:e.noop,t.assertMissingNode=t.shouldAssert(1)?function(n,r){return t.assert(void 0===n,r||"Unexpected node.",(function(){return"Node "+e.formatSyntaxKind(n.kind)+" was unexpected'."}),t.assertMissingNode)}:e.noop,t.enableDebugInfo=function(){if(!n){Object.defineProperties(e.objectAllocator.getSymbolConstructor().prototype,{__debugFlags:{get:function(){return e.formatSymbolFlags(this.flags)}}}),Object.defineProperties(e.objectAllocator.getTypeConstructor().prototype,{__debugFlags:{get:function(){return e.formatTypeFlags(this.flags)}},__debugObjectFlags:{get:function(){return 32768&this.flags?e.formatObjectFlags(this.objectFlags):""}},__debugTypeToString:{value:function(){return this.checker.typeToString(this)}}});for(var t=0,r=[e.objectAllocator.getNodeConstructor(),e.objectAllocator.getIdentifierConstructor(),e.objectAllocator.getTokenConstructor(),e.objectAllocator.getSourceFileConstructor()];t<r.length;t++){var i=r[t];i.prototype.hasOwnProperty("__debugKind")||Object.defineProperties(i.prototype,{__debugKind:{get:function(){return e.formatSyntaxKind(this.kind)}},__debugModifierFlags:{get:function(){return e.formatModifierFlags(e.getModifierFlagsNoCache(this))}},__debugTransformFlags:{get:function(){return e.formatTransformFlags(this.transformFlags)}},__debugEmitFlags:{get:function(){return e.formatEmitFlags(e.getEmitFlags(this))}},__debugGetText:{value:function(t){if(e.nodeIsSynthesized(this))return"";var n=e.getParseTreeNode(this),r=n&&e.getSourceFileOfNode(n);return r?e.getSourceTextOfNodeFromSourceFile(r,n,t):""}}})}n=!0}}}(s=e.Debug||(e.Debug={}))}(ts||(ts={})),function(e){function t(t){return(t=e.getOriginalNode(t))?e.getNodeId(t):0}function n(t,r,i){if(e.isBindingPattern(t.name))for(var a=0,o=t.name.elements;a<o.length;a++){var s=o[a];e.isOmittedExpression(s)||(i=n(s,r,i))}else if(!e.isGeneratedIdentifier(t.name)){var c=e.idText(t.name);r.get(c)||(r.set(c,!0),i=e.append(i,t.name))}return i}function r(e,t,n){var r=e[t];return r?r.push(n):e[t]=r=[n],r}e.getOriginalNodeId=t,e.collectExternalModuleInfo=function(i,a,o){for(var s,c=[],l=e.createMultiMap(),u=[],d=e.createMap(),p=!1,f=void 0,_=!1,m=0,g=i.statements;m<g.length;m++){var h=g[m];switch(h.kind){case 238:c.push(h);break;case 237:248===h.moduleReference.kind&&c.push(h);break;case 244:if(h.moduleSpecifier)h.exportClause?c.push(h):(c.push(h),_=!0);else for(var y=0,v=h.exportClause.elements;y<v.length;y++){var b=v[y];if(!d.get(e.idText(b.name))){var x=b.propertyName||b.name;l.add(e.idText(x),b),(T=a.getReferencedImportDeclaration(x)||a.getReferencedValueDeclaration(x))&&r(u,t(T),b.name),d.set(e.idText(b.name),!0),s=e.append(s,b.name)}}break;case 243:h.isExportEquals&&!f&&(f=h);break;case 208:if(e.hasModifier(h,1))for(var k=0,S=h.declarationList.declarations;k<S.length;k++){var T;s=n(T=S[k],d,s)}break;case 228:if(e.hasModifier(h,1))if(e.hasModifier(h,512))p||(r(u,t(h),e.getDeclarationName(h)),p=!0);else{x=h.name;d.get(e.idText(x))||(r(u,t(h),x),d.set(e.idText(x),!0),s=e.append(s,x))}break;case 229:if(e.hasModifier(h,1))if(e.hasModifier(h,512))p||(r(u,t(h),e.getDeclarationName(h)),p=!0);else(x=h.name)&&!d.get(e.idText(x))&&(r(u,t(h),x),d.set(e.idText(x),!0),s=e.append(s,x))}}var C=e.getOrCreateExternalHelpersModuleNameIfNeeded(i,o,_),E=C&&e.createImportDeclaration(void 0,void 0,e.createImportClause(void 0,e.createNamespaceImport(C)),e.createLiteral(e.externalHelpersModuleNameText));return E&&c.unshift(E),{externalImports:c,exportSpecifiers:l,exportEquals:f,hasExportStarsToExportValues:_,exportedBindings:u,exportedNames:s,externalHelpersImportDeclaration:E}},e.isSimpleCopiableExpression=function(t){return 9===t.kind||8===t.kind||13===t.kind||e.isKeyword(t.kind)||e.isIdentifier(t)}}(ts||(ts={})),function(e){function t(i,a,o,s,c){if(!c){var l=e.visitNode(e.getInitializerOfBindingOrAssignmentElement(a),i.visitor,e.isExpression);l?o=o?function(t,n,i,a){return n=r(t,n,!0,a),e.createConditional(e.createTypeCheck(n,"undefined"),i,n)}(i,o,l,s):l:o||(o=e.createVoidZero())}var u=e.getTargetOfBindingOrAssignmentElement(a);e.isObjectBindingOrAssignmentPattern(u)?function(i,a,o,s,c){var l,u,p=e.getElementsOfBindingOrAssignmentPattern(o),f=p.length;if(1!==f){s=r(i,s,!e.isDeclarationBindingElement(a)||0!==f,c)}for(var _=0;_<f;_++){var m=p[_];if(e.getRestIndicatorOfBindingOrAssignmentElement(m)){if(_===f-1){l&&(i.emitBindingOrAssignment(i.createObjectBindingOrAssignmentPattern(l),s,c,o),l=void 0),t(i,m,h=d(i.context,s,p,u,o),m)}}else{var g=e.getPropertyNameOfBindingOrAssignmentElement(m);if(!(i.level>=1)||1572864&m.transformFlags||1572864&e.getTargetOfBindingOrAssignmentElement(m).transformFlags||e.isComputedPropertyName(g)){l&&(i.emitBindingOrAssignment(i.createObjectBindingOrAssignmentPattern(l),s,c,o),l=void 0);var h=n(i,s,g);e.isComputedPropertyName(g)&&(u=e.append(u,h.argumentExpression)),t(i,m,h,m)}else l=e.append(l,m)}}l&&i.emitBindingOrAssignment(i.createObjectBindingOrAssignmentPattern(l),s,c,o)}(i,a,u,o,s):e.isArrayBindingOrAssignmentPattern(u)?function(n,i,a,o,s){var c,l,u=e.getElementsOfBindingOrAssignmentPattern(a),d=u.length;if(n.level<1&&n.downlevelIteration)o=r(n,e.createReadHelper(n.context,o,d>0&&e.getRestIndicatorOfBindingOrAssignmentElement(u[d-1])?void 0:d,s),!1,s);else if(1!==d&&(n.level<1||0===d)||e.every(u,e.isOmittedExpression)){o=r(n,o,!e.isDeclarationBindingElement(i)||0!==d,s)}for(var p=0;p<d;p++){var f=u[p];if(n.level>=1)if(1048576&f.transformFlags){var _=e.createTempVariable(void 0);n.hoistTempVariables&&n.context.hoistVariableDeclaration(_),l=e.append(l,[_,f]),c=e.append(c,n.createArrayBindingOrAssignmentElement(_))}else c=e.append(c,f);else{if(e.isOmittedExpression(f))continue;if(e.getRestIndicatorOfBindingOrAssignmentElement(f)){if(p===d-1){t(n,f,e.createArraySlice(o,p),f)}}else t(n,f,e.createElementAccess(o,p),f)}}c&&n.emitBindingOrAssignment(n.createArrayBindingOrAssignmentPattern(c),o,s,a);if(l)for(var m=0,g=l;m<g.length;m++){var h=g[m],y=h[0];t(n,f=h[1],y,f)}}(i,a,u,o,s):i.emitBindingOrAssignment(u,o,s,a)}function n(t,n,i){if(e.isComputedPropertyName(i)){var a=r(t,e.visitNode(i.expression,t.visitor),!1,i);return e.createElementAccess(n,a)}if(e.isStringOrNumericLiteral(i))return(a=e.getSynthesizedClone(i)).text=a.text,e.createElementAccess(n,a);var o=e.createIdentifier(e.idText(i));return e.createPropertyAccess(n,o)}function r(t,n,r,i){if(e.isIdentifier(n)&&r)return n;var a=e.createTempVariable(void 0);return t.hoistTempVariables?(t.context.hoistVariableDeclaration(a),t.emitExpression(e.setTextRange(e.createAssignment(a,n),i))):t.emitBindingOrAssignment(a,n,i,void 0),a}function i(t){return e.Debug.assertEachNode(t,e.isArrayBindingElement),e.createArrayBindingPattern(t)}function a(t){return e.createArrayLiteral(e.map(t,e.convertToArrayAssignmentElement))}function o(t){return e.Debug.assertEachNode(t,e.isBindingElement),e.createObjectBindingPattern(t)}function s(t){return e.createObjectLiteral(e.map(t,e.convertToObjectAssignmentElement))}function c(t){return e.createBindingElement(void 0,void 0,t)}function l(e){return e}!function(e){e[e.All=0]="All",e[e.ObjectRest=1]="ObjectRest"}(e.FlattenLevel||(e.FlattenLevel={})),e.flattenDestructuringAssignment=function(n,i,o,c,u,d){var p,f,_=n;if(e.isDestructuringAssignment(n))for(p=n.right;e.isEmptyArrayLiteral(n.left)||e.isEmptyObjectLiteral(n.left);){if(!e.isDestructuringAssignment(p))return p;_=n=p,p=n.right}var m={context:o,level:c,downlevelIteration:o.getCompilerOptions().downlevelIteration,hoistTempVariables:!0,emitExpression:g,emitBindingOrAssignment:function(t,n,r,a){e.Debug.assertNode(t,d?e.isIdentifier:e.isExpression);var o=d?d(t,n,r):e.setTextRange(e.createAssignment(e.visitNode(t,i,e.isExpression),n),r);o.original=a,g(o)},createArrayBindingOrAssignmentPattern:a,createObjectBindingOrAssignmentPattern:s,createArrayBindingOrAssignmentElement:l,visitor:i};if(p&&(p=e.visitNode(p,i,e.isExpression),u?p=r(m,p,!0,_):e.nodeIsSynthesized(n)&&(_=p)),t(m,n,p,_,e.isDestructuringAssignment(n)),p&&u){if(!e.some(f))return p;f.push(p)}return e.aggregateTransformFlags(e.inlineExpressions(f))||e.createOmittedExpression();function g(t){e.setEmitFlags(t,64),e.aggregateTransformFlags(t),f=e.append(f,t)}},e.flattenDestructuringBinding=function(n,r,a,s,l,u,d){var p,f=[],_=[];if(t({context:a,level:s,downlevelIteration:a.getCompilerOptions().downlevelIteration,hoistTempVariables:u,emitExpression:function(t){p=e.append(p,t)},emitBindingOrAssignment:E,createArrayBindingOrAssignmentPattern:i,createObjectBindingOrAssignmentPattern:o,createArrayBindingOrAssignmentElement:c,visitor:r},n,l,n,d),p){var m=e.createTempVariable(void 0);if(u){var g=e.inlineExpressions(p);p=void 0,E(m,g,void 0,void 0)}else{a.hoistVariableDeclaration(m);var h=e.lastOrUndefined(f);h.pendingExpressions=e.append(h.pendingExpressions,e.createAssignment(m,h.value)),e.addRange(h.pendingExpressions,p),h.value=m}}for(var y=0,v=f;y<v.length;y++){var b=v[y],x=b.pendingExpressions,k=b.name,S=(g=b.value,b.location),T=b.original,C=e.createVariableDeclaration(k,void 0,x?e.inlineExpressions(e.append(x,g)):g);C.original=T,e.setTextRange(C,S),e.isIdentifier(k)&&e.setEmitFlags(C,64),e.aggregateTransformFlags(C),_.push(C)}return _;function E(t,n,r,i){e.Debug.assertNode(t,e.isBindingName),p&&(n=e.inlineExpressions(e.append(p,n)),p=void 0),f.push({pendingExpressions:p,name:t,value:n,location:r,original:i})}};var u={name:"typescript:rest",scoped:!1,text:'\n            var __rest = (this && this.__rest) || function (s, e) {\n                var t = {};\n                for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n                    t[p] = s[p];\n                if (s != null && typeof Object.getOwnPropertySymbols === "function")\n                    for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\n                        t[p[i]] = s[p[i]];\n                return t;\n            };'};function d(t,n,r,i,a){t.requestEmitHelper(u);for(var o=[],s=0,c=0;c<r.length-1;c++){var l=e.getPropertyNameOfBindingOrAssignmentElement(r[c]);if(l)if(e.isComputedPropertyName(l)){var d=i[s];s++,o.push(e.createConditional(e.createTypeCheck(d,"symbol"),d,e.createAdd(d,e.createLiteral(""))))}else o.push(e.createLiteral(l))}return e.createCall(e.getHelperName("__rest"),void 0,[n,e.setTextRange(e.createArrayLiteral(o),a)])}}(ts||(ts={})),function(e){var t,n;function r(t,n,r,a,o,s){var c=[];return c.push(e.createArrayLiteral(n,!0)),c.push(r),a&&(c.push(a),o&&c.push(o)),t.requestEmitHelper(i),e.setTextRange(e.createCall(e.getHelperName("__decorate"),void 0,c),s)}!function(e){e[e.ClassAliases=1]="ClassAliases",e[e.NamespaceExports=2]="NamespaceExports",e[e.NonQualifiedEnumMembers=8]="NonQualifiedEnumMembers"}(t||(t={})),function(e){e[e.None=0]="None",e[e.HasStaticInitializedProperties=1]="HasStaticInitializedProperties",e[e.HasConstructorDecorators=2]="HasConstructorDecorators",e[e.HasMemberDecorators=4]="HasMemberDecorators",e[e.IsExportOfNamespace=8]="IsExportOfNamespace",e[e.IsNamedExternalExport=16]="IsNamedExternalExport",e[e.IsDefaultExternalExport=32]="IsDefaultExternalExport",e[e.IsDerivedClass=64]="IsDerivedClass",e[e.UseImmediatelyInvokedFunctionExpression=128]="UseImmediatelyInvokedFunctionExpression",e[e.HasAnyDecorators=6]="HasAnyDecorators",e[e.NeedsName=5]="NeedsName",e[e.MayNeedImmediatelyInvokedFunctionExpression=7]="MayNeedImmediatelyInvokedFunctionExpression",e[e.IsExported=56]="IsExported"}(n||(n={})),e.transformTypeScript=function(t){var n,i,o,c,l,u,d,p,f=t.startLexicalEnvironment,_=t.resumeLexicalEnvironment,m=t.endLexicalEnvironment,g=t.hoistVariableDeclaration,h=t.getEmitResolver(),y=t.getCompilerOptions(),v=void 0===y.strictNullChecks?y.strict:y.strictNullChecks,b=e.getEmitScriptTarget(y),x=e.getEmitModuleKind(y),k=t.onEmitNode,S=t.onSubstituteNode;return t.onEmitNode=function(t,r,i){var a=p,o=n;e.isSourceFile(r)&&(n=r);2&u&&function(t){return 233===e.getOriginalNode(t).kind}(r)&&(p|=2);8&u&&function(t){return 232===e.getOriginalNode(t).kind}(r)&&(p|=8);k(t,r,i),p=a,n=o},t.onSubstituteNode=function(t,n){if(n=S(t,n),1===t)return function(t){switch(t.kind){case 71:return function(t){return function(t){if(1&u&&16777216&h.getNodeCheckFlags(t)){var n=h.getReferencedValueDeclaration(t);if(n){var r=d[n.id];if(r){var i=e.getSynthesizedClone(r);return e.setSourceMapRange(i,t),e.setCommentRange(i,t),i}}}return}(t)||Be(t)||t}(t);case 179:case 180:return function(e){return je(e)}(t)}return t}(n);if(e.isShorthandPropertyAssignment(n))return function(t){if(2&u){var n=t.name,r=Be(n);if(r){if(t.objectAssignmentInitializer){var i=e.createAssignment(r,t.objectAssignmentInitializer);return e.setTextRange(e.createPropertyAssignment(n,i),t)}return e.setTextRange(e.createPropertyAssignment(n,r),t)}}return t}(n);return n},t.enableSubstitution(179),t.enableSubstitution(180),function(r){if(r.isDeclarationFile)return r;n=r;var i=T(r,L);return e.addEmitHelpers(i,t.readEmitHelpers()),n=void 0,i};function T(t,n){var r=c,i=l;!function(t){switch(t.kind){case 265:case 235:case 234:case 207:c=t,l=void 0;break;case 229:case 228:if(e.hasModifier(t,2))break;t.name?ye(t):e.Debug.assert(229===t.kind||e.hasModifier(t,512))}}(t);var a=n(t);return c!==r&&(l=i),c=r,a}function C(e){return T(e,E)}function E(n){return 1&n.transformFlags?F(n):2&n.transformFlags?e.visitEachChild(n,C,t):n}function D(e){return T(e,A)}function A(n){switch(n.kind){case 238:case 237:case 243:case 244:return function(n){if(e.getParseTreeNode(n)!==n)return n;switch(n.kind){case 238:return function(t){if(!t.importClause)return t;var n=e.visitNode(t.importClause,Se,e.isImportClause);return n?e.updateImportDeclaration(t,void 0,void 0,n,t.moduleSpecifier):void 0}(n);case 237:return Ae(n);case 243:return function(n){return h.isValueAliasDeclaration(n)?e.visitEachChild(n,C,t):void 0}(n);case 244:return function(t){if(!t.exportClause)return y.isolatedModules||h.moduleExportsSomeValue(t.moduleSpecifier)?t:void 0;if(!h.isValueAliasDeclaration(t))return;var n=e.visitNode(t.exportClause,Ee,e.isNamedExports);return n?e.updateExportDeclaration(t,void 0,void 0,n,t.moduleSpecifier):void 0}(n);default:e.Debug.fail("Unhandled ellided statement")}}(n);default:return E(n)}}function w(e){return T(e,N)}function N(n){if(244!==n.kind&&238!==n.kind&&239!==n.kind&&(237!==n.kind||248!==n.moduleReference.kind))return 1&n.transformFlags||e.hasModifier(n,1)?F(n):2&n.transformFlags?e.visitEachChild(n,C,t):n}function I(e){return T(e,P)}function P(t){switch(t.kind){case 152:return;case 149:case 157:case 153:case 154:case 151:return E(t);case 206:return t;default:return void e.Debug.failBadSyntaxKind(t)}}function O(t){if(!(2270&e.modifierToFlag(t.kind)||i&&84===t.kind))return t}function F(a){if(e.hasModifier(a,2)&&e.isStatement(a))return e.createNotEmittedStatement(a);switch(a.kind){case 84:case 79:return i?void 0:a;case 114:case 112:case 113:case 117:case 76:case 124:case 131:case 164:case 165:case 163:case 158:case 145:case 119:case 122:case 136:case 133:case 130:case 105:case 137:case 161:case 160:case 162:case 159:case 166:case 167:case 168:case 169:case 170:case 171:case 172:case 173:case 157:case 147:case 231:case 149:case 236:return;case 152:return function(n){if(!fe(n))return;return e.updateConstructor(n,e.visitNodes(n.decorators,C,e.isDecorator),e.visitNodes(n.modifiers,C,e.isModifier),e.visitParameterList(n.parameters,C,t),e.visitFunctionBody(n.body,C,t))}(a);case 230:return e.createNotEmittedStatement(a);case 229:return function(i){var a=j(i,!0),o=function(t,n){var r=0;e.some(n)&&(r|=1);var i=e.getClassExtendsHeritageClauseElement(t);i&&95!==e.skipOuterExpressions(i.expression).kind&&(r|=64);(function(t){if(t.decorators&&t.decorators.length>0)return!0;var n=e.getFirstConstructorWithBody(t);if(n)return e.forEach(n.parameters,R);return!1})(t)&&(r|=2);e.childIsDecorated(t)&&(r|=4);we(t)?r|=8:!function(t){return Ne(t)&&e.hasModifier(t,512)}(t)?Ie(t)&&(r|=16):r|=32;b<=1&&7&r&&(r|=128);return r}(i,a);128&o&&t.startLexicalEnvironment();var s=i.name||(5&o?e.getGeneratedNameForNode(i):void 0),c=2&o?function(t,n,r){var i=e.moveRangePastDecorators(t),a=function(t){if(8388608&h.getNodeCheckFlags(t)){Ue();var n=e.createUniqueName(t.name&&!e.isGeneratedIdentifier(t.name)?e.idText(t.name):"default");return d[e.getOriginalNodeId(t)]=n,g(n),n}}(t),o=e.getLocalName(t,!1,!0),s=e.visitNodes(t.heritageClauses,C,e.isHeritageClause),c=M(t,0!=(64&r)),l=e.createClassExpression(void 0,n,void 0,s,c);e.setOriginalNode(l,t),e.setTextRange(l,i);var u=e.createVariableStatement(void 0,e.createVariableDeclarationList([e.createVariableDeclaration(o,void 0,a?e.createAssignment(a,l):l)],1));return e.setOriginalNode(u,t),e.setTextRange(u,i),e.setCommentRange(u,t),u}(i,s,o):function(t,n,r){var i=128&r?void 0:e.visitNodes(t.modifiers,O,e.isModifier),a=e.createClassDeclaration(void 0,i,n,void 0,e.visitNodes(t.heritageClauses,C,e.isHeritageClause),M(t,0!=(64&r))),o=e.getEmitFlags(t);1&r&&(o|=32);return e.setTextRange(a,t),e.setOriginalNode(a,t),e.setEmitFlags(a,o),a}(i,s,o),l=[c];1&o&&J(l,a,128&o?e.getInternalName(i):e.getLocalName(i));if(X(l,i,!1),X(l,i,!0),function(n,i){var a=function(n){var i=function(t){var n=t.decorators,r=W(e.getFirstConstructorWithBody(t));if(!n&&!r)return;return{decorators:n,parameters:r}}(n),a=Y(n,n,i);if(!a)return;var o=d&&d[e.getOriginalNodeId(n)],s=e.getLocalName(n,!1,!0),c=r(t,a,s),l=e.createAssignment(s,o?e.createAssignment(o,c):c);return e.setEmitFlags(l,1536),e.setSourceMapRange(l,e.moveRangePastDecorators(n)),l}(i);a&&n.push(e.setOriginalNode(e.createStatement(a),i))}(l,i),128&o){var u=e.createTokenRange(e.skipTrivia(n.text,i.members.end),18),p=e.getInternalName(i),f=e.createPartiallyEmittedExpression(p);f.end=u.end,e.setEmitFlags(f,1536);var _=e.createReturn(f);_.pos=u.pos,e.setEmitFlags(_,1920),l.push(_),e.addRange(l,t.endLexicalEnvironment());var m=e.createImmediatelyInvokedArrowFunction(l);e.setEmitFlags(m,33554432);var y=e.createVariableStatement(void 0,e.createVariableDeclarationList([e.createVariableDeclaration(e.getLocalName(i,!1,!1),void 0,m)]));e.setOriginalNode(y,i),e.setCommentRange(y,i),e.setSourceMapRange(y,e.moveRangePastDecorators(i)),e.startOnNewLine(y),l=[y]}8&o?Oe(l,i):(128&o||2&o)&&(32&o?l.push(e.createExportDefault(e.getLocalName(i,!1,!0))):16&o&&l.push(e.createExternalModuleExport(e.getLocalName(i,!1,!0))));l.length>1&&(l.push(e.createEndOfDeclarationMarker(i)),e.setEmitFlags(c,4194304|e.getEmitFlags(c)));return e.singleOrMany(l)}(a);case 199:return function(t){var n=j(t,!0),r=e.visitNodes(t.heritageClauses,C,e.isHeritageClause),i=M(t,e.some(r,(function(e){return 85===e.token}))),a=e.createClassExpression(void 0,t.name,void 0,r,i);if(e.setOriginalNode(a,t),e.setTextRange(a,t),n.length>0){var o=[],s=e.createTempVariable(g);return 8388608&h.getNodeCheckFlags(t)&&(Ue(),d[e.getOriginalNodeId(t)]=e.getSynthesizedClone(s)),e.setEmitFlags(a,65536|e.getEmitFlags(a)),o.push(e.startOnNewLine(e.createAssignment(s,a))),e.addRange(o,function(t,n){for(var r=[],i=0,a=t;i<a.length;i++){var o=a[i],s=q(o,n);s.startsOnNewLine=!0,e.setSourceMapRange(s,e.moveRangePastModifiers(o)),e.setCommentRange(s,o),r.push(s)}return r}(n,s)),o.push(e.startOnNewLine(s)),e.inlineExpressions(o)}return a}(a);case 259:return function(t){if(85===t.token){var n=e.visitNodes(t.types,C,e.isExpressionWithTypeArguments,0,1);return e.setTextRange(e.createHeritageClause(85,n),t)}return}(a);case 201:return function(t){return e.updateExpressionWithTypeArguments(t,void 0,e.visitNode(t.expression,C,e.isLeftHandSideExpression))}(a);case 151:return function(n){if(!fe(n))return;var r=e.updateMethod(n,void 0,e.visitNodes(n.modifiers,O,e.isModifier),n.asteriskToken,pe(n),void 0,void 0,e.visitParameterList(n.parameters,C,t),void 0,e.visitFunctionBody(n.body,C,t));r!==n&&(e.setCommentRange(r,n),e.setSourceMapRange(r,e.moveRangePastDecorators(n)));return r}(a);case 153:return function(n){if(!_e(n))return;var r=e.updateGetAccessor(n,void 0,e.visitNodes(n.modifiers,O,e.isModifier),pe(n),e.visitParameterList(n.parameters,C,t),void 0,e.visitFunctionBody(n.body,C,t)||e.createBlock([]));r!==n&&(e.setCommentRange(r,n),e.setSourceMapRange(r,e.moveRangePastDecorators(n)));return r}(a);case 154:return function(n){if(!_e(n))return;var r=e.updateSetAccessor(n,void 0,e.visitNodes(n.modifiers,O,e.isModifier),pe(n),e.visitParameterList(n.parameters,C,t),e.visitFunctionBody(n.body,C,t)||e.createBlock([]));r!==n&&(e.setCommentRange(r,n),e.setSourceMapRange(r,e.moveRangePastDecorators(n)));return r}(a);case 228:return function(n){if(!fe(n))return e.createNotEmittedStatement(n);var r=e.updateFunctionDeclaration(n,void 0,e.visitNodes(n.modifiers,O,e.isModifier),n.asteriskToken,n.name,void 0,e.visitParameterList(n.parameters,C,t),void 0,e.visitFunctionBody(n.body,C,t)||e.createBlock([]));if(we(n)){var i=[r];return Oe(i,n),i}return r}(a);case 186:return function(n){if(!fe(n))return e.createOmittedExpression();return e.updateFunctionExpression(n,e.visitNodes(n.modifiers,O,e.isModifier),n.asteriskToken,n.name,void 0,e.visitParameterList(n.parameters,C,t),void 0,e.visitFunctionBody(n.body,C,t)||e.createBlock([]))}(a);case 187:return function(n){return e.updateArrowFunction(n,e.visitNodes(n.modifiers,O,e.isModifier),void 0,e.visitParameterList(n.parameters,C,t),void 0,n.equalsGreaterThanToken,e.visitFunctionBody(n.body,C,t))}(a);case 146:return function(t){if(e.parameterIsThisKeyword(t))return;var n=e.createParameter(void 0,void 0,t.dotDotDotToken,e.visitNode(t.name,C,e.isBindingName),void 0,void 0,e.visitNode(t.initializer,C,e.isExpression));return e.setOriginalNode(n,t),e.setTextRange(n,e.moveRangePastModifiers(t)),e.setCommentRange(n,t),e.setSourceMapRange(n,e.moveRangePastModifiers(t)),e.setEmitFlags(n.name,32),n}(a);case 185:return function(n){var r=e.skipOuterExpressions(n.expression,-3);if(e.isAssertionExpression(r)){var i=e.visitNode(n.expression,C,e.isExpression);return e.createPartiallyEmittedExpression(i,n)}return e.visitEachChild(n,C,t)}(a);case 184:case 202:return function(t){var n=e.visitNode(t.expression,C,e.isExpression);return e.createPartiallyEmittedExpression(n,t)}(a);case 181:return function(t){return e.updateCall(t,e.visitNode(t.expression,C,e.isExpression),void 0,e.visitNodes(t.arguments,C,e.isExpression))}(a);case 182:return function(t){return e.updateNew(t,e.visitNode(t.expression,C,e.isExpression),void 0,e.visitNodes(t.arguments,C,e.isExpression))}(a);case 203:return function(t){var n=e.visitNode(t.expression,C,e.isLeftHandSideExpression);return e.createPartiallyEmittedExpression(n,t)}(a);case 232:return function(t){if(!function(t){return!e.isConst(t)||y.preserveConstEnums||y.isolatedModules}(t))return;var r=[],i=2;be(r,t)&&(x===e.ModuleKind.System&&c===n||(i|=512));var a=Re(t),s=Me(t),l=e.hasModifier(t,1)?e.getExternalModuleOrNamespaceExportName(o,t,!1,!0):e.getLocalName(t,!1,!0),u=e.createLogicalOr(l,e.createAssignment(l,e.createObjectLiteral()));if(he(t)){var d=e.getLocalName(t,!1,!0);u=e.createAssignment(d,u)}var p=e.createStatement(e.createCall(e.createFunctionExpression(void 0,void 0,void 0,void 0,[e.createParameter(void 0,void 0,void 0,a)],void 0,function(t,n){var r=o;o=n;var i=[];return f(),e.addRange(i,e.map(t.members,ge)),e.addRange(i,m()),o=r,e.createBlock(e.setTextRange(e.createNodeArray(i),t.members),!0)}(t,s)),void 0,[u]));return e.setOriginalNode(p,t),e.setTextRange(p,t),e.setEmitFlags(p,i),r.push(p),r.push(e.createEndOfDeclarationMarker(t)),r}(a);case 208:return function(n){if(we(n)){var r=e.getInitializedVariables(n.declarationList);if(0===r.length)return;return e.setTextRange(e.createStatement(e.inlineExpressions(e.map(r,me))),n)}return e.visitEachChild(n,C,t)}(a);case 226:return function(t){return e.updateVariableDeclaration(t,e.visitNode(t.name,C,e.isBindingName),void 0,e.visitNode(t.initializer,C,e.isExpression))}(a);case 233:return xe(a);case 237:return Ae(a);default:return e.Debug.failBadSyntaxKind(a),e.visitEachChild(a,C,t)}}function L(n){var r=(void 0===y.alwaysStrict?y.strict:y.alwaysStrict)&&!(e.isExternalModule(n)&&x>=e.ModuleKind.ES2015);return e.updateSourceFileNode(n,e.visitLexicalEnvironment(n.statements,D,t,0,r))}function R(e){return void 0!==e.decorators&&e.decorators.length>0}function M(n,r){var i=[],a=function(n,r){var i=e.forEach(n.members,K),a=262144&n.transformFlags,o=e.getFirstConstructorWithBody(n);if(!i&&!a)return e.visitEachChild(o,C,t);var s=function(n){return e.visitParameterList(n&&n.parameters,C,t)||[]}(o),c=function(t,n,r){var i=[],a=0;if(_(),n){a=function(t,n){if(t.body){var r=t.body.statements,i=e.addPrologue(n,r,!1,C);if(i===r.length)return i;var a=r[i];return 210===a.kind&&e.isSuperCall(a.expression)?(n.push(e.visitNode(a,C,e.isStatement)),i+1):i}return 0}(n,i);var o=function(t){return e.filter(t.parameters,U)}(n);e.addRange(i,e.map(o,B))}else r&&i.push(e.createStatement(e.createCall(e.createSuper(),void 0,[e.createSpread(e.createIdentifier("arguments"))])));var s=j(t,!1);J(i,s,e.createThis()),n&&e.addRange(i,e.visitNodes(n.body.statements,C,e.isStatement,a));return i=e.mergeLexicalEnvironment(i,m()),e.setTextRange(e.createBlock(e.setTextRange(e.createNodeArray(i),n?n.body.statements:t.members),!0),n?n.body:void 0)}(n,o,r);return e.startOnNewLine(e.setOriginalNode(e.setTextRange(e.createConstructor(void 0,void 0,s,c),o||n),o))}(n,r);return a&&i.push(a),e.addRange(i,e.visitNodes(n.members,I,e.isClassElement)),e.setTextRange(e.createNodeArray(i),n.members)}function U(t){return e.hasModifier(t,92)&&e.isIdentifier(t.name)}function B(t){e.Debug.assert(e.isIdentifier(t.name));var n=t.name,r=e.getMutableClone(n);e.setEmitFlags(r,1584);var i=e.getMutableClone(n);return e.setEmitFlags(i,1536),e.startOnNewLine(e.setTextRange(e.createStatement(e.createAssignment(e.setTextRange(e.createPropertyAccess(e.createThis(),r),t.name),i)),e.moveRangePos(t,-1)))}function j(t,n){return e.filter(t.members,n?$:K)}function $(e){return z(e,!0)}function K(e){return z(e,!1)}function z(t,n){return 149===t.kind&&n===e.hasModifier(t,32)&&void 0!==t.initializer}function J(t,n,r){for(var i=0,a=n;i<a.length;i++){var o=a[i],s=e.createStatement(q(o,r));e.setSourceMapRange(s,e.moveRangePastModifiers(o)),e.setCommentRange(s,o),t.push(s)}}function q(t,n){var r=pe(t),i=e.visitNode(t.initializer,C,e.isExpression),a=e.createMemberAccessForPropertyName(n,r,r);return e.createAssignment(a,i)}function V(e){return G(e,!0)}function H(e){return G(e,!1)}function G(t,n){return e.nodeOrChildIsDecorated(t)&&n===e.hasModifier(t,32)}function W(e){var t;if(e)for(var n=e.parameters,r=0;r<n.length;r++){var i=n[r];(t||i.decorators)&&(t||(t=new Array(n.length)),t[r]=i.decorators)}return t}function Q(t,n){switch(n.kind){case 153:case 154:return function(t,n){if(!n.body)return;var r=e.getAllAccessorDeclarations(t.members,n),i=r.firstAccessor,a=r.secondAccessor,o=r.setAccessor,s=i.decorators?i:a&&a.decorators?a:void 0;if(!s||n!==s)return;var c=s.decorators,l=W(o);if(!c&&!l)return;return{decorators:c,parameters:l}}(t,n);case 151:return function(e){if(!e.body)return;var t=e.decorators,n=W(e);if(!t&&!n)return;return{decorators:t,parameters:n}}(n);case 149:return function(e){var t=e.decorators;if(!t)return;return{decorators:t}}(n);default:return}}function Y(n,r,i){if(i){var o=[];return e.addRange(o,e.map(i.decorators,ee)),e.addRange(o,e.flatMap(i.parameters,te)),function(e,n,r){(function(e,n,r){y.emitDecoratorMetadata&&(ne(e)&&r.push(a(t,"design:type",ae(e))),ie(e)&&r.push(a(t,"design:paramtypes",oe(e,n))),re(e)&&r.push(a(t,"design:returntype",se(e))))})(e,n,r)}(n,r,o),o}}function X(t,n,r){e.addRange(t,e.map(function(t,n){for(var r,i=function(t,n){return e.filter(t.members,n?V:H)}(t,n),a=0,o=i;a<o.length;a++){var s=Z(t,o[a]);s&&(r?r.push(s):r=[s])}return r}(n,r),Pe))}function Z(n,i){var a=Y(i,n,Q(n,i));if(a){var o=function(t,n){return e.hasModifier(n,32)?e.getDeclarationName(t):function(t){return e.createPropertyAccess(e.getDeclarationName(t),"prototype")}(t)}(n,i),s=de(i,!0),c=b>0?149===i.kind?e.createVoidZero():e.createNull():void 0,l=r(t,a,o,s,c,e.moveRangePastDecorators(i));return e.setEmitFlags(l,1536),l}}function ee(t){return e.visitNode(t.expression,C,e.isExpression)}function te(n,r){var i;if(n){i=[];for(var a=0,o=n;a<o.length;a++){var c=o[a],l=s(t,ee(c),r,c.expression);e.setEmitFlags(l,1536),i.push(l)}}return i}function ne(e){var t=e.kind;return 151===t||153===t||154===t||149===t}function re(e){return 151===e.kind}function ie(t){switch(t.kind){case 229:case 199:return void 0!==e.getFirstConstructorWithBody(t);case 151:case 153:case 154:return!0}return!1}function ae(t){switch(t.kind){case 149:case 146:case 153:return ce(t.type);case 154:return ce(e.getSetAccessorTypeAnnotationNode(t));case 229:case 199:case 151:return e.createIdentifier("Function");default:return e.createVoidZero()}}function oe(t,n){var r=e.isClassLike(t)?e.getFirstConstructorWithBody(t):e.isFunctionLike(t)&&e.nodeIsPresent(t.body)?t:void 0,i=[];if(r)for(var a=function(t,n){if(n&&153===t.kind){var r=e.getAllAccessorDeclarations(n.members,t).setAccessor;if(r)return r.parameters}return t.parameters}(r,n),o=a.length,s=0;s<o;s++){var c=a[s];0===s&&e.isIdentifier(c.name)&&"this"===c.name.escapedText||(c.dotDotDotToken?i.push(ce(e.getRestParameterElementType(c.type))):i.push(ae(c)))}return e.createArrayLiteral(i)}function se(t){return e.isFunctionLike(t)&&t.type?ce(t.type):e.isAsyncFunction(t)?e.createIdentifier("Promise"):e.createVoidZero()}function ce(t){if(void 0===t)return e.createIdentifier("Object");switch(t.kind){case 105:case 139:case 95:case 130:return e.createVoidZero();case 168:return ce(t.type);case 160:case 161:return e.createIdentifier("Function");case 164:case 165:return e.createIdentifier("Array");case 158:case 122:return e.createIdentifier("Boolean");case 136:return e.createIdentifier("String");case 134:return e.createIdentifier("Object");case 173:switch(t.literal.kind){case 9:return e.createIdentifier("String");case 8:return e.createIdentifier("Number");case 101:case 86:return e.createIdentifier("Boolean");default:e.Debug.failBadSyntaxKind(t.literal)}break;case 133:return e.createIdentifier("Number");case 137:return b<2?ue():e.createIdentifier("Symbol");case 159:return function(t){switch(h.getTypeReferenceSerializationKind(t.typeName,c)){case e.TypeReferenceSerializationKind.Unknown:var n=le(t.typeName,!0),r=e.createTempVariable(g);return e.createLogicalOr(e.createLogicalAnd(e.createTypeCheck(e.createAssignment(r,n),"function"),r),e.createIdentifier("Object"));case e.TypeReferenceSerializationKind.TypeWithConstructSignatureAndValue:return le(t.typeName,!1);case e.TypeReferenceSerializationKind.VoidNullableOrNeverType:return e.createVoidZero();case e.TypeReferenceSerializationKind.BooleanType:return e.createIdentifier("Boolean");case e.TypeReferenceSerializationKind.NumberLikeType:return e.createIdentifier("Number");case e.TypeReferenceSerializationKind.StringLikeType:return e.createIdentifier("String");case e.TypeReferenceSerializationKind.ArrayLikeType:return e.createIdentifier("Array");case e.TypeReferenceSerializationKind.ESSymbolType:return b<2?ue():e.createIdentifier("Symbol");case e.TypeReferenceSerializationKind.TypeWithCallSignature:return e.createIdentifier("Function");case e.TypeReferenceSerializationKind.Promise:return e.createIdentifier("Promise");case e.TypeReferenceSerializationKind.ObjectType:default:return e.createIdentifier("Object")}}(t);case 167:case 166:return function(t){for(var n,r=0,i=t.types;r<i.length;r++){for(var a=i[r];168===a.kind;)a=a.type;if(130!==a.kind&&(v||95!==a.kind&&139!==a.kind)){var o=ce(a);if(e.isIdentifier(o)&&"Object"===o.escapedText)return o;if(n){if(!e.isIdentifier(n)||!e.isIdentifier(o)||n.escapedText!==o.escapedText)return e.createIdentifier("Object")}else n=o}}return n||e.createVoidZero()}(t);case 162:case 170:case 171:case 172:case 163:case 119:case 169:break;default:e.Debug.failBadSyntaxKind(t)}return e.createIdentifier("Object")}function le(t,n){switch(t.kind){case 71:var r=e.getMutableClone(t);return r.flags&=-9,r.original=void 0,r.parent=e.getParseTreeNode(c),n?e.createLogicalAnd(e.createStrictInequality(e.createTypeOf(r),e.createLiteral("undefined")),r):r;case 143:return function(t,n){var r;if(71===t.left.kind)r=le(t.left,n);else if(n){var i=e.createTempVariable(g);r=e.createLogicalAnd(e.createAssignment(i,le(t.left,!0)),i)}else r=le(t.left,!1);return e.createPropertyAccess(r,t.right)}(t,n)}}function ue(){return e.createConditional(e.createTypeCheck(e.createIdentifier("Symbol"),"function"),e.createIdentifier("Symbol"),e.createIdentifier("Object"))}function de(t,n){var r=t.name;return e.isComputedPropertyName(r)?n?e.getGeneratedNameForNode(r):r.expression:e.isIdentifier(r)?e.createLiteral(e.idText(r)):e.getSynthesizedClone(r)}function pe(t){var n=t.name;if(e.isComputedPropertyName(n)){var r=e.visitNode(n.expression,C,e.isExpression);if(t.decorators){var i=e.getGeneratedNameForNode(n);g(i),r=e.createAssignment(i,r)}return e.updateComputedPropertyName(n,r)}return n}function fe(t){return!e.nodeIsMissing(t.body)}function _e(t){return!(e.nodeIsMissing(t.body)&&e.hasModifier(t,128))}function me(n){var r=n.name;return e.isBindingPattern(r)?e.flattenDestructuringAssignment(n,C,t,0,!1,Fe):e.setTextRange(e.createAssignment(Le(r),e.visitNode(n.initializer,C,e.isExpression)),n)}function ge(n){var r=de(n,!1),i=function(n){var r=h.getConstantValue(n);return void 0!==r?e.createLiteral(r):(0==(8&u)&&(u|=8,t.enableSubstitution(71)),n.initializer?e.visitNode(n.initializer,C,e.isExpression):e.createVoidZero())}(n),a=e.createAssignment(e.createElementAccess(o,r),i),s=9===i.kind?a:e.createAssignment(e.createElementAccess(o,a),r);return e.setTextRange(e.createStatement(e.setTextRange(s,n)),n)}function he(t){return we(t)||Ne(t)&&x!==e.ModuleKind.ES2015&&x!==e.ModuleKind.ESNext&&x!==e.ModuleKind.System}function ye(t){l||(l=e.createUnderscoreEscapedMap());var n=ve(t);l.has(n)||l.set(n,t)}function ve(t){return e.Debug.assertNode(t.name,e.isIdentifier),t.name.escapedText}function be(t,n){var r=e.createVariableStatement(e.visitNodes(n.modifiers,O,e.isModifier),e.createVariableDeclarationList([e.createVariableDeclaration(e.getLocalName(n,!1,!0))],265===c.kind?0:1));if(e.setOriginalNode(r,n),ye(n),function(e){if(l){var t=ve(e);return l.get(t)===e}return!0}(n))return 232===n.kind?e.setSourceMapRange(r.declarationList,n):e.setSourceMapRange(r,n),e.setCommentRange(r,n),e.setEmitFlags(r,4195328),t.push(r),!0;var i=e.createMergeDeclarationMarker(r);return e.setEmitFlags(i,4195840),t.push(i),!1}function xe(r){if(!function(t){return e.isInstantiatedModule(t,y.preserveConstEnums||y.isolatedModules)}(r))return e.createNotEmittedStatement(r);e.Debug.assertNode(r.name,e.isIdentifier,"A TypeScript namespace should have an Identifier name."),0==(2&u)&&(u|=2,t.enableSubstitution(71),t.enableSubstitution(262),t.enableEmitNotification(233));var a=[],s=2;be(a,r)&&(x===e.ModuleKind.System&&c===n||(s|=512));var d=Re(r),p=Me(r),_=e.hasModifier(r,1)?e.getExternalModuleOrNamespaceExportName(o,r,!1,!0):e.getLocalName(r,!1,!0),g=e.createLogicalOr(_,e.createAssignment(_,e.createObjectLiteral()));if(he(r)){var h=e.getLocalName(r,!1,!0);g=e.createAssignment(h,g)}var v=e.createStatement(e.createCall(e.createFunctionExpression(void 0,void 0,void 0,void 0,[e.createParameter(void 0,void 0,void 0,d)],void 0,function(t,n){var r=o,a=i,s=l;o=n,i=t,l=void 0;var c,u,d=[];f();var p=t.body;if(234===p.kind)T(p,(function(t){return e.addRange(d,e.visitNodes(t.statements,w,e.isStatement))})),c=p.statements,u=p;else{var _=xe(p);_&&(e.isArray(_)?e.addRange(d,_):d.push(_));var g=ke(t).body;c=e.moveRangePos(g.statements,-1)}e.addRange(d,m()),o=r,i=a,l=s;var h=e.createBlock(e.setTextRange(e.createNodeArray(d),c),!0);e.setTextRange(h,u),234!==p.kind&&e.setEmitFlags(h,1536|e.getEmitFlags(h));return h}(r,p)),void 0,[g]));return e.setOriginalNode(v,r),e.setTextRange(v,r),e.setEmitFlags(v,s),a.push(v),a.push(e.createEndOfDeclarationMarker(r)),a}function ke(e){if(233===e.body.kind)return ke(e.body)||e.body}function Se(t){var n=h.isReferencedAliasDeclaration(t)?t.name:void 0,r=e.visitNode(t.namedBindings,Te,e.isNamedImportBindings);return n||r?e.updateImportClause(t,n,r):void 0}function Te(t){if(240===t.kind)return h.isReferencedAliasDeclaration(t)?t:void 0;var n=e.visitNodes(t.elements,Ce,e.isImportSpecifier);return e.some(n)?e.updateNamedImports(t,n):void 0}function Ce(e){return h.isReferencedAliasDeclaration(e)?e:void 0}function Ee(t){var n=e.visitNodes(t.elements,De,e.isExportSpecifier);return e.some(n)?e.updateNamedExports(t,n):void 0}function De(e){return h.isValueAliasDeclaration(e)?e:void 0}function Ae(r){if(e.isExternalModuleImportEqualsDeclaration(r))return h.isReferencedAliasDeclaration(r)?e.visitEachChild(r,C,t):void 0;if(function(t){return h.isReferencedAliasDeclaration(t)||!e.isExternalModule(n)&&h.isTopLevelValueImportEqualsWithEntityName(t)}(r)){var i=e.createExpressionFromEntityName(r.moduleReference);return e.setEmitFlags(i,3584),Ie(r)||!we(r)?e.setOriginalNode(e.setTextRange(e.createVariableStatement(e.visitNodes(r.modifiers,O,e.isModifier),e.createVariableDeclarationList([e.setOriginalNode(e.createVariableDeclaration(r.name,void 0,i),r)])),r),r):e.setOriginalNode(function(t,n,r){return e.setTextRange(e.createStatement(e.createAssignment(e.getNamespaceMemberName(o,t,!1,!0),n)),r)}(r.name,i,r),r)}}function we(t){return void 0!==i&&e.hasModifier(t,1)}function Ne(t){return void 0===i&&e.hasModifier(t,1)}function Ie(t){return Ne(t)&&!e.hasModifier(t,512)}function Pe(t){return e.createStatement(t)}function Oe(t,n){var r=e.createAssignment(e.getExternalModuleOrNamespaceExportName(o,n,!1,!0),e.getLocalName(n));e.setSourceMapRange(r,e.createRange(n.name?n.name.pos:n.pos,n.end));var i=e.createStatement(r);e.setSourceMapRange(i,e.createRange(-1,n.end)),t.push(i)}function Fe(t,n,r){return e.setTextRange(e.createAssignment(Le(t),n),r)}function Le(t){return e.getNamespaceMemberName(o,t,!1,!0)}function Re(t){var n=e.getGeneratedNameForNode(t);return e.setSourceMapRange(n,t.name),n}function Me(t){return e.getGeneratedNameForNode(t)}function Ue(){0==(1&u)&&(u|=1,t.enableSubstitution(71),d=[])}function Be(t){if(u&p&&!e.isGeneratedIdentifier(t)&&!e.isLocalName(t)){var n=h.getReferencedExportContainer(t,!1);if(n&&265!==n.kind)if(2&p&&233===n.kind||8&p&&232===n.kind)return e.setTextRange(e.createPropertyAccess(e.getGeneratedNameForNode(n),t),t)}}function je(t){var n=function(t){if(y.isolatedModules)return;return e.isPropertyAccessExpression(t)||e.isElementAccessExpression(t)?h.getConstantValue(t):void 0}(t);if(void 0!==n){e.setConstantValue(t,n);var r=e.createLiteral(n);if(!y.removeComments){var i=e.isPropertyAccessExpression(t)?e.declarationNameToString(t.name):e.getTextOfNode(t.argumentExpression);e.addSyntheticTrailingComment(r,3," "+i+" ")}return r}return t}};var i={name:"typescript:decorate",scoped:!1,priority:2,text:'\n            var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n                var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n                if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);\n                else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n                return c > 3 && r && Object.defineProperty(target, key, r), r;\n            };'};function a(t,n,r){return t.requestEmitHelper(o),e.createCall(e.getHelperName("__metadata"),void 0,[e.createLiteral(n),r])}var o={name:"typescript:metadata",scoped:!1,priority:3,text:'\n            var __metadata = (this && this.__metadata) || function (k, v) {\n                if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);\n            };'};function s(t,n,r,i){return t.requestEmitHelper(c),e.setTextRange(e.createCall(e.getHelperName("__param"),void 0,[e.createLiteral(r),n]),i)}var c={name:"typescript:param",scoped:!1,priority:4,text:"\n            var __param = (this && this.__param) || function (paramIndex, decorator) {\n                return function (target, key) { decorator(target, key, paramIndex); }\n            };"}}(ts||(ts={})),function(e){var t;!function(e){e[e.AsyncMethodsWithSuper=1]="AsyncMethodsWithSuper"}(t||(t={})),e.transformES2017=function(t){var n,i=t.startLexicalEnvironment,a=t.resumeLexicalEnvironment,o=t.endLexicalEnvironment,s=t.getEmitResolver(),c=t.getCompilerOptions(),l=e.getEmitScriptTarget(c),u=0,d=t.onEmitNode,p=t.onSubstituteNode;return t.onEmitNode=function(e,t,r){if(1&n&&function(e){var t=e.kind;return 229===t||152===t||151===t||153===t||154===t}(t)){var i=6144&s.getNodeCheckFlags(t);if(i!==u){var a=u;return u=i,d(e,t,r),void(u=a)}}d(e,t,r)},t.onSubstituteNode=function(t,n){if(n=p(t,n),1===t&&u)return function(t){switch(t.kind){case 179:return h(t);case 180:return y(t);case 181:return function(t){var n=t.expression;if(e.isSuperProperty(n)){var r=e.isPropertyAccessExpression(n)?h(n):y(n);return e.createCall(e.createPropertyAccess(r,"call"),void 0,[e.createThis()].concat(t.arguments))}return t}(t)}return t}(n);return n},function(n){if(n.isDeclarationFile)return n;var r=e.visitEachChild(n,f,t);return e.addEmitHelpers(r,t.readEmitHelpers()),r};function f(n){if(0==(16&n.transformFlags))return n;switch(n.kind){case 120:return;case 191:return function(t){return e.setOriginalNode(e.setTextRange(e.createYield(void 0,e.visitNode(t.expression,f,e.isExpression)),t),t)}(n);case 151:return function(n){return e.updateMethod(n,void 0,e.visitNodes(n.modifiers,f,e.isModifier),n.asteriskToken,n.name,void 0,void 0,e.visitParameterList(n.parameters,f,t),void 0,2&e.getFunctionFlags(n)?_(n):e.visitFunctionBody(n.body,f,t))}(n);case 228:return function(n){return e.updateFunctionDeclaration(n,void 0,e.visitNodes(n.modifiers,f,e.isModifier),n.asteriskToken,n.name,void 0,e.visitParameterList(n.parameters,f,t),void 0,2&e.getFunctionFlags(n)?_(n):e.visitFunctionBody(n.body,f,t))}(n);case 186:return function(n){return e.updateFunctionExpression(n,e.visitNodes(n.modifiers,f,e.isModifier),n.asteriskToken,n.name,void 0,e.visitParameterList(n.parameters,f,t),void 0,2&e.getFunctionFlags(n)?_(n):e.visitFunctionBody(n.body,f,t))}(n);case 187:return function(n){return e.updateArrowFunction(n,e.visitNodes(n.modifiers,f,e.isModifier),void 0,e.visitParameterList(n.parameters,f,t),void 0,n.equalsGreaterThanToken,2&e.getFunctionFlags(n)?_(n):e.visitFunctionBody(n.body,f,t))}(n);default:return e.visitEachChild(n,f,t)}}function _(n){a();var i=e.getOriginalNode(n,e.isFunctionLike).type,c=l<2?function(t){var n=t&&e.getEntityNameFromTypeNode(t);if(n&&e.isEntityName(n)){var r=s.getTypeReferenceSerializationKind(n);if(r===e.TypeReferenceSerializationKind.TypeWithConstructSignatureAndValue||r===e.TypeReferenceSerializationKind.Unknown)return n}return}(i):void 0,u=187===n.kind,d=0!=(8192&s.getNodeCheckFlags(n));if(u){var p=r(t,d,c,m(n.body)),_=o();if(e.some(_)){v=e.convertToFunctionBody(p);return e.updateBlock(v,e.setTextRange(e.createNodeArray(e.concatenate(v.statements,_)),v.statements))}return p}var h=[],y=e.addPrologue(h,n.body.statements,!1,f);h.push(e.createReturn(r(t,d,c,m(n.body,y)))),e.addRange(h,o());var v=e.createBlock(h,!0);return e.setTextRange(v,n.body),l>=2&&(4096&s.getNodeCheckFlags(n)?(g(),e.addEmitHelper(v,e.advancedAsyncSuperHelper)):2048&s.getNodeCheckFlags(n)&&(g(),e.addEmitHelper(v,e.asyncSuperHelper))),v}function m(n,r){if(e.isBlock(n))return e.updateBlock(n,e.visitLexicalEnvironment(n.statements,f,t,r));i();var a=e.convertToFunctionBody(e.visitNode(n,f,e.isConciseBody)),s=o();return e.updateBlock(a,e.setTextRange(e.createNodeArray(e.concatenate(a.statements,s)),a.statements))}function g(){0==(1&n)&&(n|=1,t.enableSubstitution(181),t.enableSubstitution(179),t.enableSubstitution(180),t.enableEmitNotification(229),t.enableEmitNotification(151),t.enableEmitNotification(153),t.enableEmitNotification(154),t.enableEmitNotification(152))}function h(t){return 97===t.expression.kind?v(e.createLiteral(e.idText(t.name)),t):t}function y(e){return 97===e.expression.kind?v(e.argumentExpression,e):e}function v(t,n){return 4096&u?e.setTextRange(e.createPropertyAccess(e.createCall(e.createIdentifier("_super"),void 0,[t]),"value"),n):e.setTextRange(e.createCall(e.createIdentifier("_super"),void 0,[t]),n)}};var n={name:"typescript:awaiter",scoped:!1,priority:5,text:'\n            var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n                return new (P || (P = Promise))(function (resolve, reject) {\n                    function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n                    function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }\n                    function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n                    step((generator = generator.apply(thisArg, _arguments || [])).next());\n                });\n            };'};function r(t,r,i,a){t.requestEmitHelper(n);var o=e.createFunctionExpression(void 0,e.createToken(39),void 0,void 0,[],void 0,a);return(o.emitNode||(o.emitNode={})).flags|=786432,e.createCall(e.getHelperName("__awaiter"),void 0,[e.createThis(),r?e.createIdentifier("arguments"):e.createVoidZero(),i?e.createExpressionFromEntityName(i):e.createVoidZero(),o])}e.asyncSuperHelper={name:"typescript:async-super",scoped:!0,text:"\n            const _super = name => super[name];\n        "},e.advancedAsyncSuperHelper={name:"typescript:advanced-async-super",scoped:!0,text:"\n            const _super = (function (geti, seti) {\n                const cache = Object.create(null);\n                return name => cache[name] || (cache[name] = { get value() { return geti(name); }, set value(v) { seti(name, v); } });\n            })(name => super[name], (name, value) => super[name] = value);\n        "}}(ts||(ts={})),function(e){var t;!function(e){e[e.AsyncMethodsWithSuper=1]="AsyncMethodsWithSuper"}(t||(t={})),e.transformESNext=function(t){var n=t.resumeLexicalEnvironment,c=t.endLexicalEnvironment,u=t.hoistVariableDeclaration,d=t.getEmitResolver(),p=t.getCompilerOptions(),f=e.getEmitScriptTarget(p),_=t.onEmitNode;t.onEmitNode=function(e,t,n){if(1&m&&function(e){var t=e.kind;return 229===t||152===t||151===t||153===t||154===t}(t)){var r=6144&d.getNodeCheckFlags(t);if(r!==y){var i=y;return y=r,_(e,t,n),void(y=i)}}_(e,t,n)};var m,g,h=t.onSubstituteNode;t.onSubstituteNode=function(t,n){if(n=h(t,n),1===t&&y)return function(t){switch(t.kind){case 179:return w(t);case 180:return N(t);case 181:return function(t){var n=t.expression;if(e.isSuperProperty(n)){var r=e.isPropertyAccessExpression(n)?w(n):N(n);return e.createCall(e.createPropertyAccess(r,"call"),void 0,[e.createThis()].concat(t.arguments))}return t}(t)}return t}(n);return n};var y=0;return function(n){if(n.isDeclarationFile)return n;var r=e.visitEachChild(n,v,t);return e.addEmitHelpers(r,t.readEmitHelpers()),r};function v(e){return k(e,!1)}function b(e){return k(e,!0)}function x(e){if(120!==e.kind)return e}function k(n,o){if(0==(8&n.transformFlags))return n;switch(n.kind){case 191:return function(n){if(2&g&&1&g)return e.setOriginalNode(e.setTextRange(e.createYield(a(t,e.visitNode(n.expression,v,e.isExpression))),n),n);return e.visitEachChild(n,v,t)}(n);case 197:return function(n){if(2&g&&1&g&&n.asteriskToken){var r=e.visitNode(n.expression,v,e.isExpression);return e.setOriginalNode(e.setTextRange(e.createYield(a(t,e.updateYield(n,n.asteriskToken,function(t,n,r){return t.requestEmitHelper(i),t.requestEmitHelper(s),e.setTextRange(e.createCall(e.getHelperName("__asyncDelegator"),void 0,[n]),r)}(t,l(t,r,r),r)))),n),n)}return e.visitEachChild(n,v,t)}(n);case 222:return function(n){if(2&g&&1&g){var r=e.unwrapInnermostStatementOfLabel(n);return 216===r.kind&&r.awaitModifier?S(r,n):e.restoreEnclosingLabel(e.visitEachChild(n,v,t),n)}return e.visitEachChild(n,v,t)}(n);case 178:return function(n){if(1048576&n.transformFlags){var i=function(t){for(var n,r=[],i=0,a=t;i<a.length;i++){var o=a[i];if(263===o.kind){n&&(r.push(e.createObjectLiteral(n)),n=void 0);var s=o.expression;r.push(e.visitNode(s,v,e.isExpression))}else if(n||(n=[]),261===o.kind){var c=o;n.push(e.createPropertyAssignment(c.name,e.visitNode(c.initializer,v,e.isExpression)))}else n.push(e.visitNode(o,v,e.isObjectLiteralElementLike))}n&&r.push(e.createObjectLiteral(n));return r}(n.properties);return i.length&&178!==i[0].kind&&i.unshift(e.createObjectLiteral()),r(t,i)}return e.visitEachChild(n,v,t)}(n);case 194:return function(n,r){if(e.isDestructuringAssignment(n)&&1048576&n.left.transformFlags)return e.flattenDestructuringAssignment(n,v,t,1,!r);if(26===n.operatorToken.kind)return e.updateBinary(n,e.visitNode(n.left,b,e.isExpression),e.visitNode(n.right,r?b:v,e.isExpression));return e.visitEachChild(n,v,t)}(n,o);case 226:return function(n){if(e.isBindingPattern(n.name)&&1048576&n.name.transformFlags)return e.flattenDestructuringBinding(n,v,t,1);return e.visitEachChild(n,v,t)}(n);case 216:return S(n,void 0);case 214:return function(t){return e.updateFor(t,e.visitNode(t.initializer,b,e.isForInitializer),e.visitNode(t.condition,v,e.isExpression),e.visitNode(t.incrementor,v,e.isExpression),e.visitNode(t.statement,v,e.isStatement))}(n);case 190:return function(n){return e.visitEachChild(n,b,t)}(n);case 152:return function(n){var r=g;g=0;var i=e.updateConstructor(n,void 0,n.modifiers,e.visitParameterList(n.parameters,v,t),E(n));return g=r,i}(n);case 151:return function(n){var r=g;g=e.getFunctionFlags(n);var i=e.updateMethod(n,void 0,1&g?e.visitNodes(n.modifiers,x,e.isModifier):n.modifiers,2&g?void 0:n.asteriskToken,e.visitNode(n.name,v,e.isPropertyName),e.visitNode(void 0,v,e.isToken),void 0,e.visitParameterList(n.parameters,v,t),void 0,2&g&&1&g?C(n):E(n));return g=r,i}(n);case 153:return function(n){var r=g;g=0;var i=e.updateGetAccessor(n,void 0,n.modifiers,e.visitNode(n.name,v,e.isPropertyName),e.visitParameterList(n.parameters,v,t),void 0,E(n));return g=r,i}(n);case 154:return function(n){var r=g;g=0;var i=e.updateSetAccessor(n,void 0,n.modifiers,e.visitNode(n.name,v,e.isPropertyName),e.visitParameterList(n.parameters,v,t),E(n));return g=r,i}(n);case 228:return function(n){var r=g;g=e.getFunctionFlags(n);var i=e.updateFunctionDeclaration(n,void 0,1&g?e.visitNodes(n.modifiers,x,e.isModifier):n.modifiers,2&g?void 0:n.asteriskToken,n.name,void 0,e.visitParameterList(n.parameters,v,t),void 0,2&g&&1&g?C(n):E(n));return g=r,i}(n);case 186:return function(n){var r=g;g=e.getFunctionFlags(n);var i=e.updateFunctionExpression(n,1&g?e.visitNodes(n.modifiers,x,e.isModifier):n.modifiers,2&g?void 0:n.asteriskToken,n.name,void 0,e.visitParameterList(n.parameters,v,t),void 0,2&g&&1&g?C(n):E(n));return g=r,i}(n);case 187:return function(n){var r=g;g=e.getFunctionFlags(n);var i=e.updateArrowFunction(n,n.modifiers,void 0,e.visitParameterList(n.parameters,v,t),void 0,n.equalsGreaterThanToken,E(n));return g=r,i}(n);case 146:return function(n){if(1048576&n.transformFlags)return e.updateParameter(n,void 0,void 0,n.dotDotDotToken,e.getGeneratedNameForNode(n),void 0,void 0,e.visitNode(n.initializer,v,e.isExpression));return e.visitEachChild(n,v,t)}(n);case 210:return function(n){return e.visitEachChild(n,b,t)}(n);case 185:return function(n,r){return e.visitEachChild(n,r?b:v,t)}(n,o);case 260:return function(n){if(!n.variableDeclaration)return e.updateCatchClause(n,e.createVariableDeclaration(e.createTempVariable(void 0)),e.visitNode(n.block,v,e.isBlock));return e.visitEachChild(n,v,t)}(n);default:return e.visitEachChild(n,v,t)}}function S(n,r){return 1048576&n.initializer.transformFlags&&(n=function(t){var n=e.skipParentheses(t.initializer);if(e.isVariableDeclarationList(n)||e.isAssignmentPattern(n)){var r=void 0,i=void 0,a=e.createTempVariable(void 0),o=[e.createForOfBindingStatement(n,a)];return e.isBlock(t.statement)&&(e.addRange(o,t.statement.statements),r=t.statement,i=t.statement.statements),e.updateForOf(t,t.awaitModifier,e.setTextRange(e.createVariableDeclarationList([e.setTextRange(e.createVariableDeclaration(a),t.initializer)],1),t.initializer),t.expression,e.setTextRange(e.createBlock(e.setTextRange(e.createNodeArray(o),i),!0),r))}return t}(n)),n.awaitModifier?function(n,r){var i=e.visitNode(n.expression,v,e.isExpression),a=e.isIdentifier(i)?e.getGeneratedNameForNode(i):e.createTempVariable(void 0),o=e.isIdentifier(i)?e.getGeneratedNameForNode(a):e.createTempVariable(void 0),s=e.createUniqueName("e"),c=e.getGeneratedNameForNode(s),d=e.createTempVariable(void 0),p=l(t,i,n.expression),f=e.createCall(e.createPropertyAccess(a,"next"),void 0,[]),_=e.createPropertyAccess(o,"done"),m=e.createPropertyAccess(o,"value"),g=e.createFunctionCall(d,a,[]);u(s),u(d);var h=e.setEmitFlags(e.setTextRange(e.createFor(e.setEmitFlags(e.setTextRange(e.createVariableDeclarationList([e.setTextRange(e.createVariableDeclaration(a,void 0,p),n.expression),e.createVariableDeclaration(o)]),n.expression),2097152),e.createComma(e.createAssignment(o,T(f)),e.createLogicalNot(_)),void 0,function(t,n){var r,i,a=e.createForOfBindingStatement(t.initializer,n),o=[e.visitNode(a,v,e.isStatement)],s=e.visitNode(t.statement,v,e.isStatement);e.isBlock(s)?(e.addRange(o,s.statements),r=s,i=s.statements):o.push(s);return e.setEmitFlags(e.setTextRange(e.createBlock(e.setTextRange(e.createNodeArray(o),i),!0),r),432)}(n,T(m))),n),256);return e.createTry(e.createBlock([e.restoreEnclosingLabel(h,r)]),e.createCatchClause(e.createVariableDeclaration(c),e.setEmitFlags(e.createBlock([e.createStatement(e.createAssignment(s,e.createObjectLiteral([e.createPropertyAssignment("error",c)])))]),1)),e.createBlock([e.createTry(e.createBlock([e.setEmitFlags(e.createIf(e.createLogicalAnd(e.createLogicalAnd(o,e.createLogicalNot(_)),e.createAssignment(d,e.createPropertyAccess(a,"return"))),e.createStatement(T(g))),1)]),void 0,e.setEmitFlags(e.createBlock([e.setEmitFlags(e.createIf(s,e.createThrow(e.createPropertyAccess(s,"error"))),1)]),1))]))}(n,r):e.restoreEnclosingLabel(e.visitEachChild(n,v,t),r)}function T(n){return 1&g?e.createYield(void 0,a(t,n)):e.createAwait(n)}function C(r){n();var a=[],s=e.addPrologue(a,r.body.statements,!1,v);D(a,r),a.push(e.createReturn(function(t,n){return t.requestEmitHelper(i),t.requestEmitHelper(o),(n.emitNode||(n.emitNode={})).flags|=262144,e.createCall(e.getHelperName("__asyncGenerator"),void 0,[e.createThis(),e.createIdentifier("arguments"),n])}(t,e.createFunctionExpression(void 0,e.createToken(39),r.name&&e.getGeneratedNameForNode(r.name),void 0,[],void 0,e.updateBlock(r.body,e.visitLexicalEnvironment(r.body.statements,v,t,s)))))),e.addRange(a,c());var l=e.updateBlock(r.body,a);return f>=2&&(4096&d.getNodeCheckFlags(r)?(A(),e.addEmitHelper(l,e.advancedAsyncSuperHelper)):2048&d.getNodeCheckFlags(r)&&(A(),e.addEmitHelper(l,e.asyncSuperHelper))),l}function E(t){n();var r=0,i=[],a=e.visitNode(t.body,v,e.isConciseBody);e.isBlock(a)&&(r=e.addPrologue(i,a.statements,!1,v)),e.addRange(i,D(void 0,t));var o=c();if(r>0||e.some(i)||e.some(o)){var s=e.convertToFunctionBody(a,!0);return e.addRange(i,s.statements.slice(r)),e.addRange(i,o),e.updateBlock(s,e.setTextRange(e.createNodeArray(i),s.statements))}return a}function D(n,r){for(var i=0,a=r.parameters;i<a.length;i++){var o=a[i];if(1048576&o.transformFlags){var s=e.getGeneratedNameForNode(o),c=e.flattenDestructuringBinding(o,v,t,1,s,!1,!0);if(e.some(c)){var l=e.createVariableStatement(void 0,e.createVariableDeclarationList(c));e.setEmitFlags(l,1048576),n=e.append(n,l)}}}return n}function A(){0==(1&m)&&(m|=1,t.enableSubstitution(181),t.enableSubstitution(179),t.enableSubstitution(180),t.enableEmitNotification(229),t.enableEmitNotification(151),t.enableEmitNotification(153),t.enableEmitNotification(154),t.enableEmitNotification(152))}function w(t){return 97===t.expression.kind?I(e.createLiteral(e.idText(t.name)),t):t}function N(e){return 97===e.expression.kind?I(e.argumentExpression,e):e}function I(t,n){return 4096&y?e.setTextRange(e.createPropertyAccess(e.createCall(e.createIdentifier("_super"),void 0,[t]),"value"),n):e.setTextRange(e.createCall(e.createIdentifier("_super"),void 0,[t]),n)}};var n={name:"typescript:assign",scoped:!1,priority:1,text:"\n            var __assign = (this && this.__assign) || Object.assign || function(t) {\n                for (var s, i = 1, n = arguments.length; i < n; i++) {\n                    s = arguments[i];\n                    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                        t[p] = s[p];\n                }\n                return t;\n            };"};function r(t,r){return t.getCompilerOptions().target>=2?e.createCall(e.createPropertyAccess(e.createIdentifier("Object"),"assign"),void 0,r):(t.requestEmitHelper(n),e.createCall(e.getHelperName("__assign"),void 0,r))}e.createAssignHelper=r;var i={name:"typescript:await",scoped:!1,text:"\n            var __await = (this && this.__await) || function (v) { return this instanceof __await ? (this.v = v, this) : new __await(v); }\n        "};function a(t,n){return t.requestEmitHelper(i),e.createCall(e.getHelperName("__await"),void 0,[n])}var o={name:"typescript:asyncGenerator",scoped:!1,text:'\n            var __asyncGenerator = (this && this.__asyncGenerator) || function (thisArg, _arguments, generator) {\n                if (!Symbol.asyncIterator) throw new TypeError("Symbol.asyncIterator is not defined.");\n                var g = generator.apply(thisArg, _arguments || []), i, q = [];\n                return i = {}, verb("next"), verb("throw"), verb("return"), i[Symbol.asyncIterator] = function () { return this; }, i;\n                function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\n                function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\n                function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r);  }\n                function fulfill(value) { resume("next", value); }\n                function reject(value) { resume("throw", value); }\n                function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\n            };\n        '};var s={name:"typescript:asyncDelegator",scoped:!1,text:'\n            var __asyncDelegator = (this && this.__asyncDelegator) || function (o) {\n                var i, p;\n                return i = {}, verb("next"), verb("throw", function (e) { throw e; }), verb("return"), i[Symbol.iterator] = function () { return this; }, i;\n                function verb(n, f) { if (o[n]) i[n] = function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === "return" } : f ? f(v) : v; }; }\n            };\n        '};var c={name:"typescript:asyncValues",scoped:!1,text:'\n            var __asyncValues = (this && this.__asyncIterator) || function (o) {\n                if (!Symbol.asyncIterator) throw new TypeError("Symbol.asyncIterator is not defined.");\n                var m = o[Symbol.asyncIterator];\n                return m ? m.call(o) : typeof __values === "function" ? __values(o) : o[Symbol.iterator]();\n            };\n        '};function l(t,n,r){return t.requestEmitHelper(c),e.setTextRange(e.createCall(e.getHelperName("__asyncValues"),void 0,[n]),r)}}(ts||(ts={})),function(e){e.transformJsx=function(n){var r=n.getCompilerOptions();return function(t){if(t.isDeclarationFile)return t;var r=e.visitEachChild(t,i,n);return e.addEmitHelpers(r,n.readEmitHelpers()),r};function i(t){return 4&t.transformFlags?function(t){switch(t.kind){case 249:return o(t,!1);case 250:return s(t,!1);case 256:return _(t);default:return e.visitEachChild(t,i,n)}}(t):t}function a(t){switch(t.kind){case 10:return function(t){var n=function(t){for(var n,r=0,i=-1,a=0;a<t.length;a++){var o=t.charCodeAt(a);e.isLineBreak(o)?(-1!==r&&-1!==i&&(n=d(n,t.substr(r,i-r+1))),r=-1):e.isWhiteSpaceSingleLine(o)||(i=a,-1===r&&(r=a))}return-1!==r?d(n,t.substr(r)):n}(e.getTextOfNode(t,!0));return void 0===n?void 0:e.createLiteral(n)}(t);case 256:return _(t);case 249:return o(t,!0);case 250:return s(t,!0);default:return void e.Debug.failBadSyntaxKind(t)}}function o(e,t){return c(e.openingElement,e.children,t,e)}function s(e,t){return c(e,void 0,t,e)}function c(t,i,o,s){var c,d=f(t),p=t.attributes.properties;if(0===p.length)c=e.createNull();else{var _=e.flatten(e.spanMap(p,e.isJsxSpreadAttribute,(function(t,n){return n?e.map(t,l):e.createObjectLiteral(e.map(t,u))})));e.isJsxSpreadAttribute(p[0])&&_.unshift(e.createObjectLiteral()),(c=e.singleOrUndefined(_))||(c=e.createAssignHelper(n,_))}var m=e.createExpressionForJsxElement(n.getEmitResolver().getJsxFactoryEntity(),r.reactNamespace,d,c,e.mapDefined(i,a),t,s);return o&&e.startOnNewLine(m),m}function l(t){return e.visitNode(t.expression,i,e.isExpression)}function u(t){var n=function(t){var n=t.name,r=e.idText(n);return/^[A-Za-z_]\w*$/.test(r)?n:e.createLiteral(r)}(t),r=function(t){if(void 0===t)return e.createTrue();if(9===t.kind){var n=function(e){var t=p(e);return t===e?void 0:t}(t.text);return n?e.setTextRange(e.createLiteral(n),t):t}if(256===t.kind)return void 0===t.expression?e.createTrue():_(t);e.Debug.failBadSyntaxKind(t)}(t.initializer);return e.createPropertyAssignment(n,r)}function d(e,t){var n=p(t);return void 0===e?n:e+" "+n}function p(e){return e.replace(/&((#((\d+)|x([\da-fA-F]+)))|(\w+));/g,(function(e,n,r,i,a,o,s){if(a)return String.fromCharCode(parseInt(a,10));if(o)return String.fromCharCode(parseInt(o,16));var c=t.get(s);return c?String.fromCharCode(c):e}))}function f(t){if(249===t.kind)return f(t.openingElement);var n=t.tagName;return e.isIdentifier(n)&&e.isIntrinsicJsxName(n.escapedText)?e.createLiteral(e.idText(n)):e.createExpressionFromEntityName(n)}function _(t){return e.visitNode(t.expression,i,e.isExpression)}};var t=e.createMapFromTemplate({quot:34,amp:38,apos:39,lt:60,gt:62,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,copy:169,ordf:170,laquo:171,not:172,shy:173,reg:174,macr:175,deg:176,plusmn:177,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,sup1:185,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,Agrave:192,Aacute:193,Acirc:194,Atilde:195,Auml:196,Aring:197,AElig:198,Ccedil:199,Egrave:200,Eacute:201,Ecirc:202,Euml:203,Igrave:204,Iacute:205,Icirc:206,Iuml:207,ETH:208,Ntilde:209,Ograve:210,Oacute:211,Ocirc:212,Otilde:213,Ouml:214,times:215,Oslash:216,Ugrave:217,Uacute:218,Ucirc:219,Uuml:220,Yacute:221,THORN:222,szlig:223,agrave:224,aacute:225,acirc:226,atilde:227,auml:228,aring:229,aelig:230,ccedil:231,egrave:232,eacute:233,ecirc:234,euml:235,igrave:236,iacute:237,icirc:238,iuml:239,eth:240,ntilde:241,ograve:242,oacute:243,ocirc:244,otilde:245,ouml:246,divide:247,oslash:248,ugrave:249,uacute:250,ucirc:251,uuml:252,yacute:253,thorn:254,yuml:255,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830})}(ts||(ts={})),function(e){e.transformES2016=function(t){var n=t.hoistVariableDeclaration;return function(n){if(n.isDeclarationFile)return n;return e.visitEachChild(n,r,t)};function r(i){if(0==(32&i.transformFlags))return i;switch(i.kind){case 194:return function(i){switch(i.operatorToken.kind){case 62:return function(t){var i,a,o=e.visitNode(t.left,r,e.isExpression),s=e.visitNode(t.right,r,e.isExpression);if(e.isElementAccessExpression(o)){var c=e.createTempVariable(n),l=e.createTempVariable(n);i=e.setTextRange(e.createElementAccess(e.setTextRange(e.createAssignment(c,o.expression),o.expression),e.setTextRange(e.createAssignment(l,o.argumentExpression),o.argumentExpression)),o),a=e.setTextRange(e.createElementAccess(c,l),o)}else if(e.isPropertyAccessExpression(o)){c=e.createTempVariable(n);i=e.setTextRange(e.createPropertyAccess(e.setTextRange(e.createAssignment(c,o.expression),o.expression),o.name),o),a=e.setTextRange(e.createPropertyAccess(c,o.name),o)}else i=o,a=o;return e.setTextRange(e.createAssignment(i,e.createMathPow(a,s,t)),t)}(i);case 40:return function(t){var n=e.visitNode(t.left,r,e.isExpression),i=e.visitNode(t.right,r,e.isExpression);return e.createMathPow(n,i,t)}(i);default:return e.visitEachChild(i,r,t)}}(i);default:return e.visitEachChild(i,r,t)}}}}(ts||(ts={})),function(e){var t,n,r,i,a;!function(e){e[e.CapturedThis=1]="CapturedThis",e[e.BlockScopedBindings=2]="BlockScopedBindings"}(t||(t={})),function(e){e[e.ToOriginal=0]="ToOriginal",e[e.ToOutParameter=1]="ToOutParameter"}(n||(n={})),function(e){e[e.Break=2]="Break",e[e.Continue=4]="Continue",e[e.Return=8]="Return"}(r||(r={})),function(e){e[e.NoReplacement=0]="NoReplacement",e[e.ReplaceSuperCapture=1]="ReplaceSuperCapture",e[e.ReplaceWithReturn=2]="ReplaceWithReturn"}(i||(i={})),function(e){e[e.None=0]="None",e[e.Function=1]="Function",e[e.ArrowFunction=2]="ArrowFunction",e[e.AsyncFunctionBody=4]="AsyncFunctionBody",e[e.NonStaticClassElement=8]="NonStaticClassElement",e[e.CapturesThis=16]="CapturesThis",e[e.ExportedVariableStatement=32]="ExportedVariableStatement",e[e.TopLevel=64]="TopLevel",e[e.Block=128]="Block",e[e.IterationStatement=256]="IterationStatement",e[e.IterationStatementBlock=512]="IterationStatementBlock",e[e.ForStatement=1024]="ForStatement",e[e.ForInOrForOfStatement=2048]="ForInOrForOfStatement",e[e.ConstructorWithCapturedSuper=4096]="ConstructorWithCapturedSuper",e[e.ComputedPropertyName=8192]="ComputedPropertyName",e[e.AncestorFactsMask=16383]="AncestorFactsMask",e[e.BlockScopeIncludes=0]="BlockScopeIncludes",e[e.BlockScopeExcludes=4032]="BlockScopeExcludes",e[e.SourceFileIncludes=64]="SourceFileIncludes",e[e.SourceFileExcludes=3968]="SourceFileExcludes",e[e.FunctionIncludes=65]="FunctionIncludes",e[e.FunctionExcludes=16286]="FunctionExcludes",e[e.AsyncFunctionBodyIncludes=69]="AsyncFunctionBodyIncludes",e[e.AsyncFunctionBodyExcludes=16278]="AsyncFunctionBodyExcludes",e[e.ArrowFunctionIncludes=66]="ArrowFunctionIncludes",e[e.ArrowFunctionExcludes=16256]="ArrowFunctionExcludes",e[e.ConstructorIncludes=73]="ConstructorIncludes",e[e.ConstructorExcludes=16278]="ConstructorExcludes",e[e.DoOrWhileStatementIncludes=256]="DoOrWhileStatementIncludes",e[e.DoOrWhileStatementExcludes=0]="DoOrWhileStatementExcludes",e[e.ForStatementIncludes=1280]="ForStatementIncludes",e[e.ForStatementExcludes=3008]="ForStatementExcludes",e[e.ForInOrForOfStatementIncludes=2304]="ForInOrForOfStatementIncludes",e[e.ForInOrForOfStatementExcludes=1984]="ForInOrForOfStatementExcludes",e[e.BlockIncludes=128]="BlockIncludes",e[e.BlockExcludes=3904]="BlockExcludes",e[e.IterationStatementBlockIncludes=512]="IterationStatementBlockIncludes",e[e.IterationStatementBlockExcludes=4032]="IterationStatementBlockExcludes",e[e.ComputedPropertyNameIncludes=8192]="ComputedPropertyNameIncludes",e[e.ComputedPropertyNameExcludes=0]="ComputedPropertyNameExcludes",e[e.NewTarget=16384]="NewTarget",e[e.NewTargetInComputedPropertyName=32768]="NewTargetInComputedPropertyName",e[e.SubtreeFactsMask=-16384]="SubtreeFactsMask",e[e.PropagateNewTargetMask=49152]="PropagateNewTargetMask"}(a||(a={})),e.transformES2015=function(t){var n,r,i,a,c,l,u=t.startLexicalEnvironment,d=t.resumeLexicalEnvironment,p=t.endLexicalEnvironment,f=t.hoistVariableDeclaration,_=t.getCompilerOptions(),m=t.getEmitResolver(),g=t.onSubstituteNode,h=t.onEmitNode;return t.onEmitNode=function(t,n,r){if(1&l&&e.isFunctionLike(n)){var i=y(16286,8&e.getEmitFlags(n)?81:65);return h(t,n,r),void v(i,0,0)}h(t,n,r)},t.onSubstituteNode=function(t,n){if(n=g(t,n),1===t)return function(t){switch(t.kind){case 71:return function(t){if(2&l&&!e.isInternalName(t)){var n=m.getReferencedDeclarationWithCollidingName(t);if(n&&(!e.isClassLike(n)||!function(t,n){var r=e.getParseTreeNode(n);if(!r||r===t||r.end<=t.pos||r.pos>=t.end)return!1;var i=e.getEnclosingBlockScopeContainer(t);for(;r;){if(r===i||r===t)return!1;if(e.isClassElement(r)&&r.parent===t)return!0;r=r.parent}return!1}(n,t)))return e.setTextRange(e.getGeneratedNameForNode(e.getNameOfDeclaration(n)),t)}return t}(t);case 99:return function(t){if(1&l&&16&i)return e.setTextRange(e.createIdentifier("_this"),t);return t}(t)}return t}(n);if(e.isIdentifier(n))return function(t){if(2&l&&!e.isInternalName(t)){var n=e.getParseTreeNode(t,e.isIdentifier);if(n&&function(e){var t=e.parent;switch(t.kind){case 176:case 229:case 232:case 226:return t.name===e&&m.isDeclarationWithCollidingName(t)}return!1}(n))return e.setTextRange(e.getGeneratedNameForNode(n),t)}return t}(n);return n},function(o){if(o.isDeclarationFile)return o;n=o,r=o.text;var s=function(t){var n=y(3968,64),r=[];u();var i=e.addStandardPrologue(r,t.statements,!1);F(r,t),i=e.addCustomPrologue(r,t.statements,i,k),e.addRange(r,e.visitNodes(t.statements,k,e.isStatement,i)),a&&r.push(e.createVariableStatement(void 0,e.createVariableDeclarationList(a)));return e.addRange(r,p()),v(n,0,0),e.updateSourceFileNode(t,e.setTextRange(e.createNodeArray(r),t.statements))}(o);return e.addEmitHelpers(s,t.readEmitHelpers()),n=void 0,r=void 0,a=void 0,i=0,s};function y(e,t){var n=i;return i=16383&(i&~e|t),n}function v(e,t,n){i=-16384&(i&~t|n)|e}function b(e){return 4096&i&&219===e.kind&&!e.expression}function x(t){return 0!=(128&t.transformFlags)||void 0!==c||4096&i&&(e.isStatement(t)||207===t.kind)||e.isIterationStatement(t,!1)&&ae(t)||0!=(33554432&e.getEmitFlags(t))}function k(r){return x(r)?function(r){switch(r.kind){case 115:return;case 229:return function(t){var n=e.createVariableDeclaration(e.getLocalName(t,!0),void 0,E(t));e.setOriginalNode(n,t);var r=[],i=e.createVariableStatement(void 0,e.createVariableDeclarationList([n]));if(e.setOriginalNode(i,t),e.setTextRange(i,t),e.startOnNewLine(i),r.push(i),e.hasModifier(t,1)){var a=e.hasModifier(t,512)?e.createExportDefault(e.getLocalName(t)):e.createExternalModuleExport(e.getLocalName(t));e.setOriginalNode(a,i),r.push(a)}var o=e.getEmitFlags(t);0==(4194304&o)&&(r.push(e.createEndOfDeclarationMarker(t)),e.setEmitFlags(i,4194304|o));return e.singleOrMany(r)}(r);case 199:return function(e){return E(e)}(r);case 146:return function(t){return t.dotDotDotToken?void 0:e.isBindingPattern(t.name)?e.setOriginalNode(e.setTextRange(e.createParameter(void 0,void 0,void 0,e.getGeneratedNameForNode(t),void 0,void 0,void 0),t),t):t.initializer?e.setOriginalNode(e.setTextRange(e.createParameter(void 0,void 0,void 0,t.name,void 0,void 0,void 0),t),t):t}(r);case 228:return function(n){var r=c;c=void 0;var a=y(16286,65),o=e.visitParameterList(n.parameters,k,t),s=64&n.transformFlags?K(n):z(n),l=16384&i?e.getLocalName(n):n.name;return v(a,49152,0),c=r,e.updateFunctionDeclaration(n,void 0,e.visitNodes(n.modifiers,k,e.isModifier),n.asteriskToken,l,void 0,o,void 0,s)}(r);case 187:return function(n){16384&n.transformFlags&&Te();var r=c;c=void 0;var i=y(16256,66),a=e.createFunctionExpression(void 0,void 0,void 0,void 0,e.visitParameterList(n.parameters,k,t),void 0,K(n));return e.setTextRange(a,n),e.setOriginalNode(a,n),e.setEmitFlags(a,8),v(i,0,0),c=r,a}(r);case 186:return function(n){var r=262144&e.getEmitFlags(n)?y(16278,69):y(16286,65),a=c;c=void 0;var o=e.visitParameterList(n.parameters,k,t),s=64&n.transformFlags?K(n):z(n),l=16384&i?e.getLocalName(n):n.name;return v(r,49152,0),c=a,e.updateFunctionExpression(n,void 0,n.asteriskToken,l,void 0,o,void 0,s)}(r);case 226:return G(r);case 71:return function(t){if(!c)return t;if(e.isGeneratedIdentifier(t))return t;if("arguments"!==t.escapedText||!m.isArgumentsLocalBinding(t))return t;return c.argumentsName||(c.argumentsName=e.createUniqueName("arguments"))}(r);case 227:return function(n){if(64&n.transformFlags){3&n.flags&&Se();var r=e.flatMap(n.declarations,1&n.flags?H:G),i=e.createVariableDeclarationList(r);if(e.setOriginalNode(i,n),e.setTextRange(i,n),e.setCommentRange(i,n),8388608&n.transformFlags&&(e.isBindingPattern(n.declarations[0].name)||e.isBindingPattern(e.lastOrUndefined(n.declarations).name))){var a=e.firstOrUndefined(r);if(a){var o=e.lastOrUndefined(r);e.setSourceMapRange(i,e.createRange(a.pos,o.end))}}return i}return e.visitEachChild(n,k,t)}(r);case 221:return function(n){if(void 0!==c){var r=c.allowedNonLabeledJumps;c.allowedNonLabeledJumps|=2;var i=e.visitEachChild(n,k,t);return c.allowedNonLabeledJumps=r,i}return e.visitEachChild(n,k,t)}(r);case 235:return function(n){var r=y(4032,0),i=e.visitEachChild(n,k,t);return v(r,0,0),i}(r);case 207:return J(r,!1);case 218:case 217:return function(n){if(c){var r=218===n.kind?2:4;if(!(n.label&&c.labels&&c.labels.get(e.idText(n.label))||!n.label&&c.allowedNonLabeledJumps&r)){var i=void 0;n.label?218===n.kind?(i="break-"+n.label.escapedText,le(c,!0,e.idText(n.label),i)):(i="continue-"+n.label.escapedText,le(c,!1,e.idText(n.label),i)):218===n.kind?(c.nonLocalJumps|=2,i="break"):(c.nonLocalJumps|=4,i="continue");var a=e.createLiteral(i);if(c.loopOutParameters.length){for(var o=c.loopOutParameters,s=void 0,l=0;l<o.length;l++){var u=se(o[l],1);s=0===l?u:e.createBinary(s,26,u)}a=e.createBinary(s,26,a)}return e.createReturn(a)}}return e.visitEachChild(n,k,t)}(r);case 222:return function(t){c&&!c.labels&&(c.labels=e.createMap());var n=e.unwrapInnermostStatementOfLabel(t,c&&W);return e.isIterationStatement(n,!1)?function(e,t){switch(e.kind){case 212:case 213:return X(e,t);case 214:return Z(e,t);case 215:return ee(e,t);case 216:return te(e,t)}}(n,t):e.restoreEnclosingLabel(e.visitNode(n,k,e.isStatement),t,c&&Q)}(r);case 212:case 213:return X(r,void 0);case 214:return Z(r,void 0);case 215:return ee(r,void 0);case 216:return te(r,void 0);case 210:return function(n){switch(n.expression.kind){case 185:return e.updateStatement(n,q(n.expression,!1));case 194:return e.updateStatement(n,V(n.expression,!1))}return e.visitEachChild(n,k,t)}(r);case 178:return function(n){for(var r=n.properties,a=r.length,o=a,s=a,c=0;c<a;c++){var l=r[c];if(16777216&l.transformFlags&&4&i&&c<s&&(s=c),144===l.name.kind){o=c;break}}if(o!==a){s<o&&(o=s);var u=e.createTempVariable(f),d=[],p=e.createAssignment(u,e.setEmitFlags(e.createObjectLiteral(e.visitNodes(r,k,e.isObjectLiteralElementLike,0,o),n.multiLine),65536));return n.multiLine&&(p.startsOnNewLine=!0),d.push(p),function(t,n,r,i){for(var a=n.properties,o=a.length,s=i;s<o;s++){var c=a[s];switch(c.kind){case 153:case 154:var l=e.getAllAccessorDeclarations(n.properties,c);c===l.firstAccessor&&t.push(j(r,l,n,n.multiLine));break;case 151:t.push(_e(c,r,n,n.multiLine));break;case 261:t.push(pe(c,r,n.multiLine));break;case 262:t.push(fe(c,r,n.multiLine));break;default:e.Debug.failBadSyntaxKind(n)}}}(d,n,u,o),d.push(n.multiLine?e.startOnNewLine(e.getMutableClone(u)):u),e.inlineExpressions(d)}return e.visitEachChild(n,k,t)}(r);case 260:return function(n){var r,i=y(4032,0);if(e.Debug.assert(!!n.variableDeclaration,"Catch clause variable should always be present when downleveling ES2015."),e.isBindingPattern(n.variableDeclaration.name)){var a=e.createTempVariable(void 0),o=e.createVariableDeclaration(a);e.setTextRange(o,n.variableDeclaration);var s=e.flattenDestructuringBinding(n.variableDeclaration,k,t,0,a),c=e.createVariableDeclarationList(s);e.setTextRange(c,n.variableDeclaration);var l=e.createVariableStatement(void 0,c);r=e.updateCatchClause(n,o,(u=n.block,d=l,p=e.visitNodes(u.statements,k,e.isStatement),e.updateBlock(u,[d].concat(p))))}else r=e.visitEachChild(n,k,t);var u,d,p;return v(i,0,0),r}(r);case 262:return function(t){return e.setTextRange(e.createPropertyAssignment(t.name,e.getSynthesizedClone(t.name)),t)}(r);case 144:return function(n){var r=y(0,8192),a=e.visitEachChild(n,k,t);return v(r,49152,49152&i?32768:0),a}(r);case 177:return function(n){if(64&n.transformFlags)return ge(n.elements,!0,n.multiLine,n.elements.hasTrailingComma);return e.visitEachChild(n,k,t)}(r);case 181:return function(t){if(33554432&e.getEmitFlags(t))return function(t){var n=e.cast(e.cast(e.skipOuterExpressions(t.expression),e.isArrowFunction).body,e.isBlock),r=e.visitNodes(n.statements,k,e.isStatement,0,1),i=e.visitNodes(n.statements,k,e.isStatement,1,n.statements.length-1),a=e.cast(e.firstOrUndefined(r),e.isVariableStatement).declarationList.declarations[0],o=e.skipOuterExpressions(a.initializer),s=e.tryCast(o,e.isAssignmentExpression),c=e.cast(s?e.skipOuterExpressions(s.right):o,e.isCallExpression),l=e.cast(e.skipOuterExpressions(c.expression),e.isFunctionExpression),u=l.body.statements,d=0,p=-1,f=[];if(s){var _=e.tryCast(u[d],e.isExpressionStatement);_&&(f.push(_),d++),f.push(u[d]),d++,f.push(e.createStatement(e.createAssignment(s.left,e.cast(a.name,e.isIdentifier))))}for(;!e.isReturnStatement(e.elementAt(u,p));)p--;e.addRange(f,u,d,p),p<-1&&e.addRange(f,u,p+1);return e.addRange(f,i),e.addRange(f,r,1),e.recreateOuterExpressions(t.expression,e.recreateOuterExpressions(a.initializer,e.recreateOuterExpressions(s&&s.right,e.updateCall(c,e.recreateOuterExpressions(c.expression,e.updateFunctionExpression(l,void 0,void 0,void 0,void 0,l.parameters,void 0,e.updateBlock(l.body,f))),void 0,c.arguments))))}(t);if(64&t.transformFlags)return me(t,!0);return e.updateCall(t,e.visitNode(t.expression,T,e.isExpression),void 0,e.visitNodes(t.arguments,k,e.isExpression))}(r);case 182:return function(n){if(524288&n.transformFlags){var r=e.createCallBinding(e.createPropertyAccess(n.expression,"bind"),f),i=r.target,a=r.thisArg;return e.createNew(e.createFunctionApply(e.visitNode(i,k,e.isExpression),a,ge(e.createNodeArray([e.createVoidZero()].concat(n.arguments)),!1,!1,!1)),void 0,[])}return e.visitEachChild(n,k,t)}(r);case 185:return q(r,!0);case 194:return V(r,!0);case 13:case 14:case 15:case 16:return function(t){return e.setTextRange(e.createLiteral(t.text),t)}(r);case 9:return function(t){if(t.hasExtendedUnicodeEscape)return e.setTextRange(e.createLiteral(t.text),t);return t}(r);case 8:return function(t){if(48&t.numericLiteralFlags)return e.setTextRange(e.createNumericLiteral(t.text),t);return t}(r);case 183:return function(r){var i=e.visitNode(r.tag,k,e.isExpression),o=[void 0],c=[],l=[],u=r.template;if(e.isNoSubstitutionTemplateLiteral(u))c.push(e.createLiteral(u.text)),l.push(xe(u));else{c.push(e.createLiteral(u.head.text)),l.push(xe(u.head));for(var d=0,p=u.templateSpans;d<p.length;d++){var f=p[d];c.push(e.createLiteral(f.literal.text)),l.push(xe(f.literal)),o.push(e.visitNode(f.expression,k,e.isExpression))}}var _=function(t,n,r){return t.requestEmitHelper(s),e.createCall(e.getHelperName("__makeTemplateObject"),void 0,[n,r])}(t,e.createArrayLiteral(c),e.createArrayLiteral(l));if(e.isExternalModule(n)){var m=e.createUniqueName("templateObject");g=m,a=e.append(a,e.createVariableDeclaration(g)),o[0]=e.createLogicalOr(m,e.createAssignment(m,_))}else o[0]=_;var g;return e.createCall(i,void 0,o)}(r);case 196:return function(t){var n=[];(function(t,n){if(!function(t){return e.Debug.assert(0!==t.templateSpans.length),0!==t.head.text.length||0===t.templateSpans[0].literal.text.length}(n))return;t.push(e.createLiteral(n.head.text))})(n,t),function(t,n){for(var r=0,i=n.templateSpans;r<i.length;r++){var a=i[r];t.push(e.visitNode(a.expression,k,e.isExpression)),0!==a.literal.text.length&&t.push(e.createLiteral(a.literal.text))}}(n,t);var r=e.reduceLeft(n,e.createAdd);e.nodeIsSynthesized(r)&&(r.pos=t.pos,r.end=t.end);return r}(r);case 197:return function(n){return e.visitEachChild(n,k,t)}(r);case 198:return function(t){return e.visitNode(t.expression,k,e.isExpression)}(r);case 97:return ke(!1);case 99:return function(t){if(c)return 2&i?(c.containsLexicalThis=!0,t):c.thisName||(c.thisName=e.createUniqueName("this"));return t}(r);case 204:return function(t){if(94===t.keywordToken&&"target"===t.name.escapedText)return i|=8192&i?32768:16384,e.createIdentifier("_newTarget");return t}(r);case 151:return function(t){e.Debug.assert(!e.isComputedPropertyName(t.name));var n=$(t,e.moveRangePos(t,-1),void 0,void 0);return e.setEmitFlags(n,512|e.getEmitFlags(n)),e.setTextRange(e.createPropertyAssignment(t.name,n),t)}(r);case 153:case 154:return function(n){e.Debug.assert(!e.isComputedPropertyName(n.name));var r=c;c=void 0;var i,a=y(16286,65);if(32768&n.transformFlags){var o=e.visitParameterList(n.parameters,k,t),s=K(n);i=153===n.kind?e.updateGetAccessor(n,n.decorators,n.modifiers,n.name,o,n.type,s):e.updateSetAccessor(n,n.decorators,n.modifiers,n.name,o,s)}else i=e.visitEachChild(n,k,t);return v(a,49152,0),c=r,i}(r);case 208:return function(n){var r,i=y(0,e.hasModifier(n,1)?32:0);if(c&&0==(3&n.declarationList.flags)){for(var a=void 0,o=0,s=n.declarationList.declarations;o<s.length;o++){var l=s[o];if(oe(c,l),l.initializer){var u=void 0;e.isBindingPattern(l.name)?u=e.flattenDestructuringAssignment(l,k,t,0):(u=e.createBinary(l.name,58,e.visitNode(l.initializer,k,e.isExpression)),e.setTextRange(u,l)),a=e.append(a,u)}}r=a?e.setTextRange(e.createStatement(e.inlineExpressions(a)),n):void 0}else r=e.visitEachChild(n,k,t);return v(i,0,0),r}(r);case 219:return function(n){if(c)return c.nonLocalJumps|=8,b(n)&&(n=C(n)),e.createReturn(e.createObjectLiteral([e.createPropertyAssignment(e.createIdentifier("value"),n.expression?e.visitNode(n.expression,k,e.isExpression):e.createVoidZero())]));if(b(n))return C(n);return e.visitEachChild(n,k,t)}(r);default:return e.visitEachChild(r,k,t)}}(r):r}function S(e){return x(e)?J(e,!0):e}function T(e){return 97===e.kind?ke(!0):k(e)}function C(t){return e.setOriginalNode(e.createReturn(e.createIdentifier("_this")),t)}function E(n){n.name&&Se();var a=e.getClassExtendsHeritageClauseElement(n),s=e.createFunctionExpression(void 0,void 0,void 0,void 0,a?[e.createParameter(void 0,void 0,void 0,"_super")]:[],void 0,function(n,a){var s=[];u(),function(n,r,i){i&&n.push(e.setTextRange(e.createStatement(function(t,n){return t.requestEmitHelper(o),e.createCall(e.getHelperName("__extends"),void 0,[n,e.createIdentifier("_super")])}(t,e.getLocalName(r))),i))}(s,n,a),function(n,r,a){var o=c;c=void 0;var s=y(16278,73),l=e.getFirstConstructorWithBody(r),u=function(t,n){if(!t||!n)return!1;if(e.some(t.parameters))return!1;var r=e.firstOrUndefined(t.body.statements);if(!r||!e.nodeIsSynthesized(r)||210!==r.kind)return!1;var i=r.expression;if(!e.nodeIsSynthesized(i)||181!==i.kind)return!1;var a=i.expression;if(!e.nodeIsSynthesized(a)||97!==a.kind)return!1;var o=e.singleOrUndefined(i.arguments);if(!o||!e.nodeIsSynthesized(o)||198!==o.kind)return!1;var s=o.expression;return e.isIdentifier(s)&&"arguments"===s.escapedText}(l,void 0!==a),f=e.createFunctionDeclaration(void 0,void 0,void 0,e.getInternalName(r),void 0,function(n,r){return e.visitParameterList(n&&!r&&n.parameters,k,t)||[]}(l,u),void 0,function(t,n,r,a){var o=[];d();var s=-1;a?s=0:t&&(s=e.addStandardPrologue(o,t.body.statements,!1));t&&(N(o,t),O(o,t,a),a||(s=e.addCustomPrologue(o,t.body.statements,s,k)),e.Debug.assert(s>=0,"statementOffset not initialized correctly!"));var c=r&&95!==e.skipOuterExpressions(r.expression).kind,l=function(t,n,r,i,a){if(!r)return n&&F(t,n),0;if(!n)return t.push(e.createReturn(w())),2;if(i)return L(t,n,w()),Te(),1;var o,s,c=n.body.statements;a<c.length&&210===(o=c[a]).kind&&e.isSuperCall(o.expression)&&(s=function(e){return me(e,!1)}(o.expression));if(s&&a===c.length-1&&!(49152&n.transformFlags)){var l=e.createReturn(s);return 194===s.kind&&181===s.left.kind||e.Debug.fail("Assumed generated super call would have form 'super.call(...) || this'."),e.setCommentRange(l,e.getCommentRange(e.setEmitFlags(s.left,1536))),t.push(l),2}if(L(t,n,s||A(),o),s)return 1;return 0}(o,t,c,a,s);1!==l&&2!==l||s++;t&&(1===l&&(i|=4096),e.addRange(o,e.visitNodes(t.body.statements,k,e.isStatement,s)));!c||2===l||t&&D(t.body)||o.push(e.createReturn(e.createIdentifier("_this")));e.addRange(o,p()),t&&R(o,t,!1);var u=e.createBlock(e.setTextRange(e.createNodeArray(o),t?t.body.statements:n.members),!0);e.setTextRange(u,t?t.body:n),t||e.setEmitFlags(u,1536);return u}(l,r,a,u));e.setTextRange(f,l||r),a&&e.setEmitFlags(f,8);n.push(f),v(s,49152,0),c=o}(s,n,a),function(t,n){for(var r=0,i=n.members;r<i.length;r++){var a=i[r];switch(a.kind){case 206:t.push(M(a));break;case 151:t.push(U(Ce(n,a),a,n));break;case 153:case 154:var o=e.getAllAccessorDeclarations(n.members,a);a===o.firstAccessor&&t.push(B(Ce(n,a),o,n));break;case 152:break;default:e.Debug.failBadSyntaxKind(n)}}}(s,n);var l=e.createTokenRange(e.skipTrivia(r,n.members.end),18),f=e.getInternalName(n),_=e.createPartiallyEmittedExpression(f);_.end=l.end,e.setEmitFlags(_,1536);var m=e.createReturn(_);m.pos=l.pos,e.setEmitFlags(m,1920),s.push(m),e.addRange(s,p());var g=e.createBlock(e.setTextRange(e.createNodeArray(s),n.members),!0);return e.setEmitFlags(g,1536),g}(n,a));65536&e.getEmitFlags(n)&&e.setEmitFlags(s,65536);var l=e.createPartiallyEmittedExpression(s);l.end=n.end,e.setEmitFlags(l,1536);var f=e.createPartiallyEmittedExpression(l);f.end=e.skipTrivia(r,n.pos),e.setEmitFlags(f,1536);var _=e.createParen(e.createCall(f,void 0,a?[e.visitNode(a.expression,k,e.isExpression)]:[]));return e.addSyntheticLeadingComment(_,3,"* @class "),_}function D(t){if(219===t.kind)return!0;if(211===t.kind){var n=t;if(n.elseStatement)return D(n.thenStatement)&&D(n.elseStatement)}else if(207===t.kind){var r=e.lastOrUndefined(t.statements);if(r&&D(r))return!0}return!1}function A(){return e.setEmitFlags(e.createThis(),4)}function w(){return e.createLogicalOr(e.createLogicalAnd(e.createStrictInequality(e.createIdentifier("_super"),e.createNull()),e.createFunctionApply(e.createIdentifier("_super"),A(),e.createIdentifier("arguments"))),A())}function N(t,n){if(function(e){return 0!=(131072&e.transformFlags)}(n))for(var r=0,i=n.parameters;r<i.length;r++){var a=i[r],o=a.name,s=a.initializer;a.dotDotDotToken||(e.isBindingPattern(o)?I(t,a,o,s):s&&P(t,a,o,s))}}function I(n,r,i,a){var o=e.getGeneratedNameForNode(r);i.elements.length>0?n.push(e.setEmitFlags(e.createVariableStatement(void 0,e.createVariableDeclarationList(e.flattenDestructuringBinding(r,k,t,0,o))),1048576)):a&&n.push(e.setEmitFlags(e.createStatement(e.createAssignment(o,e.visitNode(a,k,e.isExpression))),1048576))}function P(t,n,r,i){i=e.visitNode(i,k,e.isExpression);var a=e.createIf(e.createTypeCheck(e.getSynthesizedClone(r),"undefined"),e.setEmitFlags(e.setTextRange(e.createBlock([e.createStatement(e.setTextRange(e.createAssignment(e.setEmitFlags(e.getMutableClone(r),48),e.setEmitFlags(i,48|e.getEmitFlags(i))),n))]),n),417));a.startsOnNewLine=!0,e.setTextRange(a,n),e.setEmitFlags(a,1048992),t.push(a)}function O(t,n,r){var i=e.lastOrUndefined(n.parameters);if(function(e,t){return e&&e.dotDotDotToken&&71===e.name.kind&&!t}(i,r)){var a=e.getMutableClone(i.name);e.setEmitFlags(a,48);var o=e.getSynthesizedClone(i.name),s=n.parameters.length-1,c=e.createLoopVariable();t.push(e.setEmitFlags(e.setTextRange(e.createVariableStatement(void 0,e.createVariableDeclarationList([e.createVariableDeclaration(a,void 0,e.createArrayLiteral([]))])),i),1048576));var l=e.createFor(e.setTextRange(e.createVariableDeclarationList([e.createVariableDeclaration(c,void 0,e.createLiteral(s))]),i),e.setTextRange(e.createLessThan(c,e.createPropertyAccess(e.createIdentifier("arguments"),"length")),i),e.setTextRange(e.createPostfixIncrement(c),i),e.createBlock([e.startOnNewLine(e.setTextRange(e.createStatement(e.createAssignment(e.createElementAccess(o,0===s?c:e.createSubtract(c,e.createLiteral(s))),e.createElementAccess(e.createIdentifier("arguments"),c))),i))]));e.setEmitFlags(l,1048576),e.startOnNewLine(l),t.push(l)}}function F(t,n){32768&n.transformFlags&&187!==n.kind&&L(t,n,e.createThis())}function L(t,n,r,i){Te();var a=e.createVariableStatement(void 0,e.createVariableDeclarationList([e.createVariableDeclaration("_this",void 0,r)]));e.setEmitFlags(a,1050112),e.setTextRange(a,i),e.setSourceMapRange(a,n),t.push(a)}function R(t,n,r){if(16384&i){var a=void 0;switch(n.kind){case 187:return t;case 151:case 153:case 154:a=e.createVoidZero();break;case 152:a=e.createPropertyAccess(e.setEmitFlags(e.createThis(),4),"constructor");break;case 228:case 186:a=e.createConditional(e.createLogicalAnd(e.setEmitFlags(e.createThis(),4),e.createBinary(e.setEmitFlags(e.createThis(),4),93,e.getLocalName(n))),e.createPropertyAccess(e.setEmitFlags(e.createThis(),4),"constructor"),e.createVoidZero());break;default:e.Debug.failBadSyntaxKind(n)}var o=e.createVariableStatement(void 0,e.createVariableDeclarationList([e.createVariableDeclaration("_newTarget",void 0,a)]));if(r)return[o].concat(t);t.unshift(o)}return t}function M(t){return e.setTextRange(e.createEmptyStatement(),t)}function U(t,n,r){var a=y(0,0),o=e.getCommentRange(n),s=e.getSourceMapRange(n),c=e.createMemberAccessForPropertyName(t,e.visitNode(n.name,k,e.isPropertyName),n.name),l=$(n,n,void 0,r);e.setEmitFlags(l,1536),e.setSourceMapRange(l,s);var u=e.setTextRange(e.createStatement(e.createAssignment(c,l)),n);return e.setOriginalNode(u,n),e.setCommentRange(u,o),e.setEmitFlags(u,48),v(a,49152,49152&i?16384:0),u}function B(t,n,r){var i=e.createStatement(j(t,n,r,!1));return e.setEmitFlags(i,1536),e.setSourceMapRange(i,e.getSourceMapRange(n.firstAccessor)),i}function j(t,n,r,a){var o=n.firstAccessor,s=n.getAccessor,c=n.setAccessor,l=y(0,0),u=e.getMutableClone(t);e.setEmitFlags(u,1568),e.setSourceMapRange(u,o.name);var d=e.createExpressionForPropertyName(e.visitNode(o.name,k,e.isPropertyName));e.setEmitFlags(d,1552),e.setSourceMapRange(d,o.name);var p=[];if(s){var f=$(s,void 0,void 0,r);e.setSourceMapRange(f,e.getSourceMapRange(s)),e.setEmitFlags(f,512);var _=e.createPropertyAssignment("get",f);e.setCommentRange(_,e.getCommentRange(s)),p.push(_)}if(c){var m=$(c,void 0,void 0,r);e.setSourceMapRange(m,e.getSourceMapRange(c)),e.setEmitFlags(m,512);var g=e.createPropertyAssignment("set",m);e.setCommentRange(g,e.getCommentRange(c)),p.push(g)}p.push(e.createPropertyAssignment("enumerable",e.createTrue()),e.createPropertyAssignment("configurable",e.createTrue()));var h=e.createCall(e.createPropertyAccess(e.createIdentifier("Object"),"defineProperty"),void 0,[u,d,e.createObjectLiteral(p,!0)]);return a&&(h.startsOnNewLine=!0),v(l,49152,49152&i?16384:0),h}function $(n,r,a,o){var s=c;c=void 0;var l=o&&e.isClassLike(o)&&!e.hasModifier(n,32)?y(16286,73):y(16286,65),u=e.visitParameterList(n.parameters,k,t),d=K(n);return 16384&i&&!a&&(228===n.kind||186===n.kind)&&(a=e.getGeneratedNameForNode(n)),v(l,49152,0),c=s,e.setOriginalNode(e.setTextRange(e.createFunctionExpression(void 0,n.asteriskToken,a,void 0,u,void 0,d),r),n)}function K(r){var i,a,o,s=!1,c=!1,l=[],u=r.body;if(d(),e.isBlock(u)&&(o=e.addStandardPrologue(l,u.statements,!1)),F(l,r),N(l,r),O(l,r,!1),!s&&l.length>0&&(s=!0),e.isBlock(u))o=e.addCustomPrologue(l,u.statements,o,k),i=u.statements,e.addRange(l,e.visitNodes(u.statements,k,e.isStatement,o)),!s&&u.multiLine&&(s=!0);else{e.Debug.assert(187===r.kind),i=e.moveRangeEnd(u,-1);var p=r.equalsGreaterThanToken;e.nodeIsSynthesized(p)||e.nodeIsSynthesized(u)||(e.rangeEndIsOnSameLineAsRangeStart(p,u,n)?c=!0:s=!0);var f=e.visitNode(u,k,e.isExpression),_=e.createReturn(f);e.setTextRange(_,u),e.setEmitFlags(_,1440),l.push(_),a=u}var m=t.endLexicalEnvironment();e.addRange(l,m),R(l,r,!1),!s&&m&&m.length&&(s=!0);var g=e.createBlock(e.setTextRange(e.createNodeArray(l),i),s);return e.setTextRange(g,r.body),!s&&c&&e.setEmitFlags(g,1),a&&e.setTokenSourceMapRange(g,18,a),e.setOriginalNode(g,r.body),g}function z(n){var r=e.visitFunctionBody(n.body,S,t);return e.updateBlock(r,e.setTextRange(e.createNodeArray(R(r.statements,n,!0)),r.statements))}function J(n,r){if(r)return e.visitEachChild(n,k,t);var a=256&i?y(4032,512):y(3904,128),o=e.visitEachChild(n,k,t);return v(a,0,0),o}function q(n,r){if(!r)switch(n.expression.kind){case 185:return e.updateParen(n,q(n.expression,!1));case 194:return e.updateParen(n,V(n.expression,!1))}return e.visitEachChild(n,k,t)}function V(n,r){return e.isDestructuringAssignment(n)?e.flattenDestructuringAssignment(n,k,t,0,r):e.visitEachChild(n,k,t)}function H(n){var r=n.name;if(e.isBindingPattern(r))return G(n);if(!n.initializer&&function(e){var t=m.getNodeCheckFlags(e),n=131072&t,r=262144&t;return!(0!=(64&i)||n&&r&&0!=(512&i))&&0==(2048&i)&&(!m.isDeclarationWithCollidingName(e)||r&&!n&&0==(3072&i))}(n)){var a=e.getMutableClone(n);return a.initializer=e.createVoidZero(),a}return e.visitEachChild(n,k,t)}function G(n){var r,i=y(32,0);return r=e.isBindingPattern(n.name)?e.flattenDestructuringBinding(n,k,t,0,void 0,0!=(32&i)):e.visitEachChild(n,k,t),v(i,0,0),r}function W(t){c.labels.set(e.idText(t.label),!0)}function Q(t){c.labels.set(e.idText(t.label),!1)}function Y(n,r,a,o,s){var l=y(n,r),d=function(n,r,a){if(!ae(n)){var o=void 0;c&&(o=c.allowedNonLabeledJumps,c.allowedNonLabeledJumps=6);var s=a?a(n,r,void 0):e.restoreEnclosingLabel(e.visitEachChild(n,k,t),r,c&&Q);return c&&(c.allowedNonLabeledJumps=o),s}var l,d=e.createUniqueName("_loop");switch(n.kind){case 214:case 215:case 216:var f=n.initializer;f&&227===f.kind&&(l=f)}var _=[],m=[];if(l&&3&e.getCombinedNodeFlags(l))for(var g=0,h=l.declarations;g<h.length;g++){de(h[g],_,m)}var y=c;c={loopOutParameters:m},y&&(y.argumentsName&&(c.argumentsName=y.argumentsName),y.thisName&&(c.thisName=y.thisName),y.hoistedLocalVariables&&(c.hoistedLocalVariables=y.hoistedLocalVariables));u();var v=e.visitNode(n.statement,k,e.isStatement,e.liftToBlock),b=p(),x=c;if(c=y,m.length||b){var S=e.isBlock(v)?v.statements.slice():[v];m.length&&ce(m,1,S),e.addRange(S,b),v=e.createBlock(S,!0)}e.isBlock(v)?v.multiLine=!0:v=e.createBlock([v],!0);var T=0!=(16777216&n.statement.transformFlags),C=T&&0!=(4&i),E=0;x.containsLexicalThis&&(E|=8);C&&(E|=262144);var D,A=[e.createVariableStatement(void 0,e.setEmitFlags(e.createVariableDeclarationList([e.createVariableDeclaration(d,void 0,e.setEmitFlags(e.createFunctionExpression(void 0,T?e.createToken(39):void 0,void 0,void 0,_,void 0,v),E))]),2097152))];x.argumentsName&&(y?y.argumentsName=x.argumentsName:(D||(D=[])).push(e.createVariableDeclaration(x.argumentsName,void 0,e.createIdentifier("arguments"))));x.thisName&&(y?y.thisName=x.thisName:(D||(D=[])).push(e.createVariableDeclaration(x.thisName,void 0,e.createIdentifier("this"))));if(x.hoistedLocalVariables)if(y)y.hoistedLocalVariables=x.hoistedLocalVariables;else{D||(D=[]);for(var w=0,N=x.hoistedLocalVariables;w<N.length;w++){var I=N[w];D.push(e.createVariableDeclaration(I))}}if(m.length){D||(D=[]);for(var P=0,O=m;P<O.length;P++){var F=O[P];D.push(e.createVariableDeclaration(F.outParamName))}}D&&A.push(e.createVariableStatement(void 0,e.createVariableDeclarationList(D)));var L,R=function(t,n,r,i){var a=c,o=[],s=!(-5&r.nonLocalJumps||r.labeledNonLocalBreaks||r.labeledNonLocalContinues),l=e.createCall(t,void 0,e.map(n,(function(e){return e.name}))),u=i?e.createYield(e.createToken(39),e.setEmitFlags(l,8388608)):l;if(s)o.push(e.createStatement(u)),ce(r.loopOutParameters,0,o);else{var d=e.createUniqueName("state"),p=e.createVariableStatement(void 0,e.createVariableDeclarationList([e.createVariableDeclaration(d,void 0,u)]));if(o.push(p),ce(r.loopOutParameters,0,o),8&r.nonLocalJumps){var f=void 0;a?(a.nonLocalJumps|=8,f=e.createReturn(d)):f=e.createReturn(e.createPropertyAccess(d,"value")),o.push(e.createIf(e.createBinary(e.createTypeOf(d),34,e.createLiteral("object")),f))}if(2&r.nonLocalJumps&&o.push(e.createIf(e.createBinary(d,34,e.createLiteral("break")),e.createBreak())),r.labeledNonLocalBreaks||r.labeledNonLocalContinues){var _=[];ue(r.labeledNonLocalBreaks,!0,d,a,_),ue(r.labeledNonLocalContinues,!1,d,a,_),o.push(e.createSwitch(d,e.createCaseBlock(_)))}}return o}(d,_,x,T);if(a)L=a(n,r,R);else{var M=e.getMutableClone(n);M.statement=void 0,(M=e.visitEachChild(M,k,t)).statement=e.createBlock(R,!0),M.transformFlags=0,e.aggregateTransformFlags(M),L=e.restoreEnclosingLabel(M,r,c&&Q)}return A.push(L),A}(a,o,s);return v(l,0,0),d}function X(e,t){return Y(0,256,e,t)}function Z(e,t){return Y(3008,1280,e,t)}function ee(e,t){return Y(1984,2304,e,t)}function te(e,t){return Y(1984,2304,e,t,_.downlevelIteration?ie:re)}function ne(n,r,i){var a,o,s=[];if(e.isVariableDeclarationList(n.initializer)){3&n.initializer.flags&&Se();var c=e.firstOrUndefined(n.initializer.declarations);if(c&&e.isBindingPattern(c.name)){var l=e.flattenDestructuringBinding(c,k,t,0,r),u=e.setTextRange(e.createVariableDeclarationList(l),n.initializer);e.setOriginalNode(u,n.initializer);var d=l[0],p=e.lastOrUndefined(l);e.setSourceMapRange(u,e.createRange(d.pos,p.end)),s.push(e.createVariableStatement(void 0,u))}else s.push(e.setTextRange(e.createVariableStatement(void 0,e.setOriginalNode(e.setTextRange(e.createVariableDeclarationList([e.createVariableDeclaration(c?c.name:e.createTempVariable(void 0),void 0,r)]),e.moveRangePos(n.initializer,-1)),n.initializer)),e.moveRangeEnd(n.initializer,-1)))}else{var f=e.createAssignment(n.initializer,r);e.isDestructuringAssignment(f)?(e.aggregateTransformFlags(f),s.push(e.createStatement(V(f,!1)))):(f.end=n.initializer.end,s.push(e.setTextRange(e.createStatement(e.visitNode(f,k,e.isExpression)),e.moveRangeEnd(n.initializer,-1))))}if(i)e.addRange(s,i);else{var _=e.visitNode(n.statement,k,e.isStatement,e.liftToBlock);e.isBlock(_)?(e.addRange(s,_.statements),a=_,o=_.statements):s.push(_)}return e.setEmitFlags(e.setTextRange(e.createBlock(e.setTextRange(e.createNodeArray(s),o),!0),a),432)}function re(t,n,r){var i=e.visitNode(t.expression,k,e.isExpression),a=e.createLoopVariable(),o=e.isIdentifier(i)?e.getGeneratedNameForNode(i):e.createTempVariable(void 0);e.setEmitFlags(i,48|e.getEmitFlags(i));var s=e.setTextRange(e.createFor(e.setEmitFlags(e.setTextRange(e.createVariableDeclarationList([e.setTextRange(e.createVariableDeclaration(a,void 0,e.createLiteral(0)),e.moveRangePos(t.expression,-1)),e.setTextRange(e.createVariableDeclaration(o,void 0,i),t.expression)]),t.expression),2097152),e.setTextRange(e.createLessThan(a,e.createPropertyAccess(o,"length")),t.expression),e.setTextRange(e.createPostfixIncrement(a),t.expression),ne(t,e.createElementAccess(o,a),r)),t);return e.setEmitFlags(s,256),e.setTextRange(s,t),e.restoreEnclosingLabel(s,n,c&&Q)}function ie(n,r,i){var a=e.visitNode(n.expression,k,e.isExpression),o=e.isIdentifier(a)?e.getGeneratedNameForNode(a):e.createTempVariable(void 0),s=e.isIdentifier(a)?e.getGeneratedNameForNode(o):e.createTempVariable(void 0),l=e.createUniqueName("e"),u=e.getGeneratedNameForNode(l),d=e.createTempVariable(void 0),p=e.createValuesHelper(t,a,n.expression),_=e.createCall(e.createPropertyAccess(o,"next"),void 0,[]);f(l),f(d);var m=e.setEmitFlags(e.setTextRange(e.createFor(e.setEmitFlags(e.setTextRange(e.createVariableDeclarationList([e.setTextRange(e.createVariableDeclaration(o,void 0,p),n.expression),e.createVariableDeclaration(s,void 0,_)]),n.expression),2097152),e.createLogicalNot(e.createPropertyAccess(s,"done")),e.createAssignment(s,_),ne(n,e.createPropertyAccess(s,"value"),i)),n),256);return e.createTry(e.createBlock([e.restoreEnclosingLabel(m,r,c&&Q)]),e.createCatchClause(e.createVariableDeclaration(u),e.setEmitFlags(e.createBlock([e.createStatement(e.createAssignment(l,e.createObjectLiteral([e.createPropertyAssignment("error",u)])))]),1)),e.createBlock([e.createTry(e.createBlock([e.setEmitFlags(e.createIf(e.createLogicalAnd(e.createLogicalAnd(s,e.createLogicalNot(e.createPropertyAccess(s,"done"))),e.createAssignment(d,e.createPropertyAccess(o,"return"))),e.createStatement(e.createFunctionCall(d,o,[]))),1)]),void 0,e.setEmitFlags(e.createBlock([e.setEmitFlags(e.createIf(l,e.createThrow(e.createPropertyAccess(l,"error"))),1)]),1))]))}function ae(e){return 0!=(65536&m.getNodeCheckFlags(e))}function oe(t,n){t.hoistedLocalVariables||(t.hoistedLocalVariables=[]),function n(r){if(71===r.kind)t.hoistedLocalVariables.push(r);else for(var i=0,a=r.elements;i<a.length;i++){var o=a[i];e.isOmittedExpression(o)||n(o.name)}}(n.name)}function se(t,n){var r=0===n?t.outParamName:t.originalName,i=0===n?t.originalName:t.outParamName;return e.createBinary(i,58,r)}function ce(t,n,r){for(var i=0,a=t;i<a.length;i++){var o=a[i];r.push(e.createStatement(se(o,n)))}}function le(t,n,r,i){n?(t.labeledNonLocalBreaks||(t.labeledNonLocalBreaks=e.createMap()),t.labeledNonLocalBreaks.set(r,i)):(t.labeledNonLocalContinues||(t.labeledNonLocalContinues=e.createMap()),t.labeledNonLocalContinues.set(r,i))}function ue(t,n,r,i,a){t&&t.forEach((function(t,o){var s=[];if(!i||i.labels&&i.labels.get(o)){var c=e.createIdentifier(o);s.push(n?e.createBreak(c):e.createContinue(c))}else le(i,n,o,t),s.push(e.createReturn(r));a.push(e.createCaseClause(e.createLiteral(t),s))}))}function de(t,n,r){var i=t.name;if(e.isBindingPattern(i))for(var a=0,o=i.elements;a<o.length;a++){var s=o[a];e.isOmittedExpression(s)||de(s,n,r)}else if(n.push(e.createParameter(void 0,void 0,void 0,i)),2097152&m.getNodeCheckFlags(t)){var c=e.createUniqueName("out_"+e.idText(i));r.push({originalName:i,outParamName:c})}}function pe(t,n,r){var i=e.createAssignment(e.createMemberAccessForPropertyName(n,e.visitNode(t.name,k,e.isPropertyName)),e.visitNode(t.initializer,k,e.isExpression));return e.setTextRange(i,t),r&&(i.startsOnNewLine=!0),i}function fe(t,n,r){var i=e.createAssignment(e.createMemberAccessForPropertyName(n,e.visitNode(t.name,k,e.isPropertyName)),e.getSynthesizedClone(t.name));return e.setTextRange(i,t),r&&(i.startsOnNewLine=!0),i}function _e(t,n,r,a){var o=y(0,0),s=e.createAssignment(e.createMemberAccessForPropertyName(n,e.visitNode(t.name,k,e.isPropertyName)),$(t,t,void 0,r));return e.setTextRange(s,t),a&&(s.startsOnNewLine=!0),v(o,49152,49152&i?16384:0),s}function me(t,n){var r,i=e.createCallBinding(t.expression,f),a=i.target,o=i.thisArg;if(97===t.expression.kind&&e.setEmitFlags(o,4),r=524288&t.transformFlags?e.createFunctionApply(e.visitNode(a,T,e.isExpression),e.visitNode(o,k,e.isExpression),ge(t.arguments,!1,!1,!1)):e.createFunctionCall(e.visitNode(a,T,e.isExpression),e.visitNode(o,k,e.isExpression),e.visitNodes(t.arguments,k,e.isExpression),t),97===t.expression.kind){var s=e.createThis();e.setEmitFlags(s,4);var c=e.createLogicalOr(r,s);r=n?e.createAssignment(e.createIdentifier("_this"),c):c}return e.setOriginalNode(r,t)}function ge(n,r,i,a){var o=n.length,s=e.flatten(e.spanMap(n,he,(function(e,t,n,r){return t(e,i,a&&r===o)})));if(_.downlevelIteration){if(1===s.length){var c=s[0];if(e.isCallExpression(c)&&e.isIdentifier(c.expression)&&4096&e.getEmitFlags(c.expression)&&"___spread"===c.expression.escapedText)return s[0]}return e.createSpreadHelper(t,s)}if(1===s.length){var l=n[0];return r&&e.isSpreadElement(l)&&177!==l.expression.kind?e.createArraySlice(s[0]):s[0]}return e.createArrayConcat(s.shift(),s)}function he(t){return e.isSpreadElement(t)?ye:ve}function ye(t){return e.map(t,be)}function ve(t,n,r){return e.createArrayLiteral(e.visitNodes(e.createNodeArray(t,r),k,e.isExpression),n)}function be(t){return e.visitNode(t.expression,k,e.isExpression)}function xe(t){var r=e.getSourceTextOfNodeFromSourceFile(n,t),i=13===t.kind||16===t.kind;return r=(r=r.substring(1,r.length-(i?1:2))).replace(/\r\n?/g,"\n"),e.setTextRange(e.createLiteral(r),t)}function ke(t){return 8&i&&!t?e.createPropertyAccess(e.createIdentifier("_super"),"prototype"):e.createIdentifier("_super")}function Se(){0==(2&l)&&(l|=2,t.enableSubstitution(71))}function Te(){0==(1&l)&&(l|=1,t.enableSubstitution(99),t.enableEmitNotification(152),t.enableEmitNotification(151),t.enableEmitNotification(153),t.enableEmitNotification(154),t.enableEmitNotification(187),t.enableEmitNotification(186),t.enableEmitNotification(228))}function Ce(t,n){return e.hasModifier(n,32)?e.getInternalName(t):e.createPropertyAccess(e.getInternalName(t),"prototype")}};var o={name:"typescript:extends",scoped:!1,priority:0,text:"\n            var __extends = (this && this.__extends) || (function () {\n                var extendStatics = Object.setPrototypeOf ||\n                    ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n                    function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n                return function (d, b) {\n                    extendStatics(d, b);\n                    function __() { this.constructor = d; }\n                    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n                };\n            })();"},s={name:"typescript:makeTemplateObject",scoped:!1,priority:0,text:'\n            var __makeTemplateObject = (this && this.__makeTemplateObject) || function (cooked, raw) {\n                if (Object.defineProperty) { Object.defineProperty(cooked, "raw", { value: raw }); } else { cooked.raw = raw; }\n                return cooked;\n            };'}}(ts||(ts={})),function(e){e.transformES5=function(t){var n,r,i=t.getCompilerOptions();1!==i.jsx&&3!==i.jsx||(n=t.onEmitNode,t.onEmitNode=function(t,i,a){switch(i.kind){case 251:case 252:case 250:var o=i.tagName;r[e.getOriginalNodeId(o)]=!0}n(t,i,a)},t.enableEmitNotification(251),t.enableEmitNotification(252),t.enableEmitNotification(250),r=[]);var a=t.onSubstituteNode;return t.onSubstituteNode=function(t,n){if(n.id&&r&&r[n.id])return a(t,n);if(n=a(t,n),e.isPropertyAccessExpression(n))return function(t){var n=o(t.name);if(n)return e.setTextRange(e.createElementAccess(t.expression,n),t);return t}(n);if(e.isPropertyAssignment(n))return function(t){var n=e.isIdentifier(t.name)&&o(t.name);if(n)return e.updatePropertyAssignment(t,n,t.initializer);return t}(n);return n},t.enableSubstitution(179),t.enableSubstitution(261),function(e){return e};function o(t){var n=t.originalKeywordKind||(e.nodeIsSynthesized(t)?e.stringToToken(e.idText(t)):void 0);if(n>=72&&n<=107)return e.setTextRange(e.createLiteral(t),t)}}}(ts||(ts={})),function(e){var t,n,r,i,a;!function(e){e[e.Nop=0]="Nop",e[e.Statement=1]="Statement",e[e.Assign=2]="Assign",e[e.Break=3]="Break",e[e.BreakWhenTrue=4]="BreakWhenTrue",e[e.BreakWhenFalse=5]="BreakWhenFalse",e[e.Yield=6]="Yield",e[e.YieldStar=7]="YieldStar",e[e.Return=8]="Return",e[e.Throw=9]="Throw",e[e.Endfinally=10]="Endfinally"}(t||(t={})),function(e){e[e.Open=0]="Open",e[e.Close=1]="Close"}(n||(n={})),function(e){e[e.Exception=0]="Exception",e[e.With=1]="With",e[e.Switch=2]="Switch",e[e.Loop=3]="Loop",e[e.Labeled=4]="Labeled"}(r||(r={})),function(e){e[e.Try=0]="Try",e[e.Catch=1]="Catch",e[e.Finally=2]="Finally",e[e.Done=3]="Done"}(i||(i={})),function(e){e[e.Next=0]="Next",e[e.Throw=1]="Throw",e[e.Return=2]="Return",e[e.Break=3]="Break",e[e.Yield=4]="Yield",e[e.YieldStar=5]="YieldStar",e[e.Catch=6]="Catch",e[e.Endfinally=7]="Endfinally"}(a||(a={})),e.transformGenerators=function(t){var n,r,i,a,s,c,l,u,d,p,f=t.resumeLexicalEnvironment,_=t.endLexicalEnvironment,m=t.hoistFunctionDeclaration,g=t.hoistVariableDeclaration,h=t.getCompilerOptions(),y=e.getEmitScriptTarget(h),v=t.getEmitResolver(),b=t.onSubstituteNode;t.onSubstituteNode=function(t,i){if(i=b(t,i),1===t)return function(t){if(e.isIdentifier(t))return function(t){if(!e.isGeneratedIdentifier(t)&&n&&n.has(e.idText(t))){var i=e.getOriginalNode(t);if(e.isIdentifier(i)&&i.parent){var a=v.getReferencedValueDeclaration(i);if(a){var o=r[e.getOriginalNodeId(a)];if(o){var s=e.getMutableClone(o);return e.setSourceMapRange(s,t),e.setCommentRange(s,t),s}}}}return t}(t);return t}(i);return i};var x,k,S,T,C,E,D,A,w,N,I,P,O=1,F=0,L=0;return function(n){if(n.isDeclarationFile||0==(512&n.transformFlags))return n;var r=e.visitEachChild(n,R,t);return e.addEmitHelpers(r,t.readEmitHelpers()),r};function R(n){var r=n.transformFlags;return a?function(n){switch(n.kind){case 212:case 213:return function(n){return a?(re(),n=e.visitEachChild(n,R,t),ae(),n):e.visitEachChild(n,R,t)}(n);case 221:return function(n){a&&Z({kind:2,isScript:!0,breakLabel:-1});n=e.visitEachChild(n,R,t),a&&oe();return n}(n);case 222:return function(n){a&&Z({kind:4,isScript:!0,labelText:e.idText(n.label),breakLabel:-1});n=e.visitEachChild(n,R,t),a&&se();return n}(n);default:return M(n)}}(n):i?M(n):256&r?function(n){switch(n.kind){case 228:return U(n);case 186:return B(n);default:return e.Debug.failBadSyntaxKind(n),e.visitEachChild(n,R,t)}}(n):512&r?e.visitEachChild(n,R,t):n}function M(n){switch(n.kind){case 228:return U(n);case 186:return B(n);case 153:case 154:return function(n){var r=i,o=a;return i=!1,a=!1,n=e.visitEachChild(n,R,t),i=r,a=o,n}(n);case 208:return function(t){if(16777216&t.transformFlags)return void q(t.declarationList);if(1048576&e.getEmitFlags(t))return t;for(var n=0,r=t.declarationList.declarations;n<r.length;n++){var i=r[n];g(i.name)}var a=e.getInitializedVariables(t.declarationList);if(0===a.length)return;return e.setSourceMapRange(e.createStatement(e.inlineExpressions(e.map(a,V))),t)}(n);case 214:return function(n){a&&re();var r=n.initializer;if(r&&e.isVariableDeclarationList(r)){for(var i=0,o=r.declarations;i<o.length;i++){var s=o[i];g(s.name)}var c=e.getInitializedVariables(r);n=e.updateFor(n,c.length>0?e.inlineExpressions(e.map(c,V)):void 0,e.visitNode(n.condition,R,e.isExpression),e.visitNode(n.incrementor,R,e.isExpression),e.visitNode(n.statement,R,e.isStatement,e.liftToBlock))}else n=e.visitEachChild(n,R,t);a&&ae();return n}(n);case 215:return function(n){a&&re();var r=n.initializer;if(e.isVariableDeclarationList(r)){for(var i=0,o=r.declarations;i<o.length;i++){var s=o[i];g(s.name)}n=e.updateForIn(n,r.declarations[0].name,e.visitNode(n.expression,R,e.isExpression),e.visitNode(n.statement,R,e.isStatement,e.liftToBlock))}else n=e.visitEachChild(n,R,t);a&&ae();return n}(n);case 218:return function(n){if(a){var r=pe(n.label&&e.idText(n.label));if(r>0)return ge(r,n)}return e.visitEachChild(n,R,t)}(n);case 217:return function(n){if(a){var r=fe(n.label&&e.idText(n.label));if(r>0)return ge(r,n)}return e.visitEachChild(n,R,t)}(n);case 219:return function(t){return function(t,n){return e.setTextRange(e.createReturn(e.createArrayLiteral(t?[me(2),t]:[me(2)])),n)}(e.visitNode(t.expression,R,e.isExpression),t)}(n);default:return 16777216&n.transformFlags?function(n){switch(n.kind){case 194:return function(n){switch(e.getExpressionAssociativity(n)){case 0:return function(n){if(H(n.right)){if(e.isLogicalOperator(n.operatorToken.kind))return function(t){var n=Y(),r=Q();ve(r,e.visitNode(t.left,R,e.isExpression),t.left),53===t.operatorToken.kind?ke(n,r,t.left):xe(n,r,t.left);return ve(r,e.visitNode(t.right,R,e.isExpression),t.right),X(n),r}(n);if(26===n.operatorToken.kind)return function(t){var n=[];return r(t.left),r(t.right),e.inlineExpressions(n);function r(t){e.isBinaryExpression(t)&&26===t.operatorToken.kind?(r(t.left),r(t.right)):(H(t)&&n.length>0&&(Se(1,[e.createStatement(e.inlineExpressions(n))]),n=[]),n.push(e.visitNode(t,R,e.isExpression)))}}(n);var r=e.getMutableClone(n);return r.left=W(e.visitNode(n.left,R,e.isExpression)),r.right=e.visitNode(n.right,R,e.isExpression),r}return e.visitEachChild(n,R,t)}(n);case 1:return function(n){var r=n.left,i=n.right;if(H(i)){var a=void 0;switch(r.kind){case 179:a=e.updatePropertyAccess(r,W(e.visitNode(r.expression,R,e.isLeftHandSideExpression)),r.name);break;case 180:a=e.updateElementAccess(r,W(e.visitNode(r.expression,R,e.isLeftHandSideExpression)),W(e.visitNode(r.argumentExpression,R,e.isExpression)));break;default:a=e.visitNode(r,R,e.isExpression)}var o=n.operatorToken.kind;return(s=o)>=59&&s<=70?e.setTextRange(e.createAssignment(a,e.setTextRange(e.createBinary(W(a),function(e){switch(e){case 59:return 37;case 60:return 38;case 61:return 39;case 62:return 40;case 63:return 41;case 64:return 42;case 65:return 45;case 66:return 46;case 67:return 47;case 68:return 48;case 69:return 49;case 70:return 50}}(o),e.visitNode(i,R,e.isExpression)),n)),n):e.updateBinary(n,a,e.visitNode(i,R,e.isExpression))}var s;return e.visitEachChild(n,R,t)}(n);default:e.Debug.fail("Unknown associativity.")}}(n);case 195:return function(n){if(H(n.whenTrue)||H(n.whenFalse)){var r=Y(),i=Y(),a=Q();return ke(r,e.visitNode(n.condition,R,e.isExpression),n.condition),ve(a,e.visitNode(n.whenTrue,R,e.isExpression),n.whenTrue),be(i),X(r),ve(a,e.visitNode(n.whenFalse,R,e.isExpression),n.whenFalse),X(i),a}return e.visitEachChild(n,R,t)}(n);case 197:return function(n){var r=Y(),i=e.visitNode(n.expression,R,e.isExpression);if(n.asteriskToken){!function(e,t){Se(7,[e],t)}(0==(8388608&e.getEmitFlags(n.expression))?e.createValuesHelper(t,i,n):i,n)}else!function(e,t){Se(6,[e],t)}(i,n);return X(r),function(t){return e.setTextRange(e.createCall(e.createPropertyAccess(T,"sent"),void 0,[]),t)}(n)}(n);case 177:return function(e){return $(e.elements,void 0,void 0,e.multiLine)}(n);case 178:return function(t){var n=t.properties,r=t.multiLine,i=G(n),a=Q();ve(a,e.createObjectLiteral(e.visitNodes(n,R,e.isObjectLiteralElementLike,0,i),r));var o=e.reduceLeft(n,s,[],i);return o.push(r?e.startOnNewLine(e.getMutableClone(a)):a),e.inlineExpressions(o);function s(n,i){H(i)&&n.length>0&&(ye(e.createStatement(e.inlineExpressions(n))),n=[]);var o=e.createExpressionForObjectLiteralElementLike(t,i,a),s=e.visitNode(o,R,e.isExpression);return s&&(r&&(s.startsOnNewLine=!0),n.push(s)),n}}(n);case 180:return function(n){if(H(n.argumentExpression)){var r=e.getMutableClone(n);return r.expression=W(e.visitNode(n.expression,R,e.isLeftHandSideExpression)),r.argumentExpression=e.visitNode(n.argumentExpression,R,e.isExpression),r}return e.visitEachChild(n,R,t)}(n);case 181:return function(n){if(!e.isImportCall(n)&&e.forEach(n.arguments,H)){var r=e.createCallBinding(n.expression,g,y,!0),i=r.target,a=r.thisArg;return e.setOriginalNode(e.createFunctionApply(W(e.visitNode(i,R,e.isLeftHandSideExpression)),a,$(n.arguments),n),n)}return e.visitEachChild(n,R,t)}(n);case 182:return function(n){if(e.forEach(n.arguments,H)){var r=e.createCallBinding(e.createPropertyAccess(n.expression,"bind"),g),i=r.target,a=r.thisArg;return e.setOriginalNode(e.setTextRange(e.createNew(e.createFunctionApply(W(e.visitNode(i,R,e.isExpression)),a,$(n.arguments,e.createVoidZero())),void 0,[]),n),n)}return e.visitEachChild(n,R,t)}(n);default:return e.visitEachChild(n,R,t)}}(n):33554944&n.transformFlags?e.visitEachChild(n,R,t):n}}function U(n){if(n.asteriskToken)n=e.setOriginalNode(e.setTextRange(e.createFunctionDeclaration(void 0,n.modifiers,void 0,n.name,void 0,e.visitParameterList(n.parameters,R,t),void 0,j(n.body)),n),n);else{var r=i,o=a;i=!1,a=!1,n=e.visitEachChild(n,R,t),i=r,a=o}return i?void m(n):n}function B(n){if(n.asteriskToken)n=e.setOriginalNode(e.setTextRange(e.createFunctionExpression(void 0,void 0,n.name,void 0,e.visitParameterList(n.parameters,R,t),void 0,j(n.body)),n),n);else{var r=i,o=a;i=!1,a=!1,n=e.visitEachChild(n,R,t),i=r,a=o}return n}function j(t){var n=[],r=i,o=a,m=s,g=c,h=l,y=u,v=d,b=p,C=O,E=x,D=k,A=S,w=T;i=!0,a=!1,s=void 0,c=void 0,l=void 0,u=void 0,d=void 0,p=void 0,O=1,x=void 0,k=void 0,S=void 0,T=e.createTempVariable(void 0),f();var N=e.addPrologue(n,t.statements,!1,R);K(t.statements,N);var I=Te();return e.addRange(n,_()),n.push(e.createReturn(I)),i=r,a=o,s=m,c=g,l=h,u=y,d=v,p=b,O=C,x=E,k=D,S=A,T=w,e.setTextRange(e.createBlock(n,t.multiLine),t)}function $(t,n,r,i){var a,o=G(t);if(o>0){a=Q();var s=e.visitNodes(t,R,e.isExpression,0,o);ve(a,e.createArrayLiteral(n?[n].concat(s):s)),n=void 0}var c=e.reduceLeft(t,(function(t,r){if(H(r)&&t.length>0){var o=void 0!==a;a||(a=Q()),ve(a,o?e.createArrayConcat(a,[e.createArrayLiteral(t,i)]):e.createArrayLiteral(n?[n].concat(t):t,i)),n=void 0,t=[]}return t.push(e.visitNode(r,R,e.isExpression)),t}),[],o);return a?e.createArrayConcat(a,[e.createArrayLiteral(c,i)]):e.setTextRange(e.createArrayLiteral(n?[n].concat(c):c,i),r)}function K(e,t){void 0===t&&(t=0);for(var n=e.length,r=t;r<n;r++)J(e[r])}function z(t){e.isBlock(t)?K(t.statements):J(t)}function J(i){var o=a;a||(a=H(i)),function(i){switch(i.kind){case 207:return function(t){H(t)?K(t.statements):ye(e.visitNode(t,R,e.isStatement))}(i);case 210:return function(t){ye(e.visitNode(t,R,e.isStatement))}(i);case 211:return function(t){if(H(t))if(H(t.thenStatement)||H(t.elseStatement)){var n=Y(),r=t.elseStatement?Y():void 0;ke(t.elseStatement?r:n,e.visitNode(t.expression,R,e.isExpression),t.expression),z(t.thenStatement),t.elseStatement&&(be(n),X(r),z(t.elseStatement)),X(n)}else ye(e.visitNode(t,R,e.isStatement));else ye(e.visitNode(t,R,e.isStatement))}(i);case 212:return function(t){if(H(t)){var n=Y(),r=Y();ie(n),X(r),z(t.statement),X(n),xe(r,e.visitNode(t.expression,R,e.isExpression)),ae()}else ye(e.visitNode(t,R,e.isStatement))}(i);case 213:return function(t){if(H(t)){var n=Y(),r=ie(n);X(n),ke(r,e.visitNode(t.expression,R,e.isExpression)),z(t.statement),be(n),ae()}else ye(e.visitNode(t,R,e.isStatement))}(i);case 214:return function(t){if(H(t)){var n=Y(),r=Y(),i=ie(r);if(t.initializer){var a=t.initializer;e.isVariableDeclarationList(a)?q(a):ye(e.setTextRange(e.createStatement(e.visitNode(a,R,e.isExpression)),a))}X(n),t.condition&&ke(i,e.visitNode(t.condition,R,e.isExpression)),z(t.statement),X(r),t.incrementor&&ye(e.setTextRange(e.createStatement(e.visitNode(t.incrementor,R,e.isExpression)),t.incrementor)),be(n),ae()}else ye(e.visitNode(t,R,e.isStatement))}(i);case 215:return function(t){if(H(t)){var n=Q(),r=Q(),i=e.createLoopVariable(),a=t.initializer;g(i),ve(n,e.createArrayLiteral()),ye(e.createForIn(r,e.visitNode(t.expression,R,e.isExpression),e.createStatement(e.createCall(e.createPropertyAccess(n,"push"),void 0,[r])))),ve(i,e.createLiteral(0));var o=Y(),s=Y(),c=ie(s);X(o),ke(c,e.createLessThan(i,e.createPropertyAccess(n,"length")));var l=void 0;if(e.isVariableDeclarationList(a)){for(var u=0,d=a.declarations;u<d.length;u++){var p=d[u];g(p.name)}l=e.getSynthesizedClone(a.declarations[0].name)}else l=e.visitNode(a,R,e.isExpression),e.Debug.assert(e.isLeftHandSideExpression(l));ve(l,e.createElementAccess(n,i)),z(t.statement),X(s),ye(e.createStatement(e.createPostfixIncrement(i))),be(o),ae()}else ye(e.visitNode(t,R,e.isStatement))}(i);case 217:return function(t){var n=fe(t.label?e.idText(t.label):void 0);n>0?be(n,t):ye(t)}(i);case 218:return function(t){var n=pe(t.label?e.idText(t.label):void 0);n>0?be(n,t):ye(t)}(i);case 219:return function(t){!function(e,t){Se(8,[e],t)}(e.visitNode(t.expression,R,e.isExpression),t)}(i);case 220:return function(t){H(t)?(n=W(e.visitNode(t.expression,R,e.isExpression)),r=Y(),i=Y(),X(r),Z({kind:1,expression:n,startLabel:r,endLabel:i}),z(t.statement),e.Debug.assert(1===ne()),X(ee().endLabel)):ye(e.visitNode(t,R,e.isStatement));var n,r,i}(i);case 221:return function(t){if(H(t.caseBlock)){for(var n=t.caseBlock,r=n.clauses.length,i=(Z({kind:2,isScript:!1,breakLabel:_=Y()}),_),a=W(e.visitNode(t.expression,R,e.isExpression)),o=[],s=-1,c=0;c<r;c++){var l=n.clauses[c];o.push(Y()),258===l.kind&&-1===s&&(s=c)}for(var u=0,d=[];u<r;){var p=0;for(c=u;c<r;c++){if(257===(l=n.clauses[c]).kind){var f=l;if(H(f.expression)&&d.length>0)break;d.push(e.createCaseClause(e.visitNode(f.expression,R,e.isExpression),[ge(o[c],f.expression)]))}else p++}d.length&&(ye(e.createSwitch(a,e.createCaseBlock(d))),u+=d.length,d=[]),p>0&&(u+=p,p=0)}be(s>=0?o[s]:i);for(c=0;c<r;c++)X(o[c]),K(n.clauses[c].statements);oe()}else ye(e.visitNode(t,R,e.isStatement));var _}(i);case 222:return function(t){H(t)?(n=e.idText(t.label),r=Y(),Z({kind:4,isScript:!1,labelText:n,breakLabel:r}),z(t.statement),se()):ye(e.visitNode(t,R,e.isStatement));var n,r}(i);case 223:return function(t){!function(e,t){Se(9,[e],t)}(e.visitNode(t.expression,R,e.isExpression),t)}(i);case 224:return function(i){H(i)?(a=Y(),o=Y(),X(a),Z({kind:0,state:0,startLabel:a,endLabel:o}),he(),z(i.tryBlock),i.catchClause&&(!function(i){var a;if(e.Debug.assert(0===ne()),e.isGeneratedIdentifier(i.name))a=i.name,g(i.name);else{var o=e.idText(i.name);a=Q(o),n||(n=e.createMap(),r=[],t.enableSubstitution(71)),n.set(o,!0),r[e.getOriginalNodeId(i)]=a}var s=te();e.Debug.assert(s.state<1),be(s.endLabel);var c=Y();X(c),s.state=1,s.catchVariable=a,s.catchLabel=c,ve(a,e.createCall(e.createPropertyAccess(T,"sent"),void 0,[])),he()}(i.catchClause.variableDeclaration),z(i.catchClause.block)),i.finallyBlock&&(!function(){e.Debug.assert(0===ne());var t=te();e.Debug.assert(t.state<2),be(t.endLabel);var n=Y();X(n),t.state=2,t.finallyLabel=n}(),z(i.finallyBlock)),function(){e.Debug.assert(0===ne());var t=ee();t.state<2?be(t.endLabel):Se(10);X(t.endLabel),he(),t.state=3}()):ye(e.visitEachChild(i,R,t));var a,o}(i);default:ye(e.visitNode(i,R,e.isStatement))}}(i),a=o}function q(t){for(var n=0,r=t.declarations;n<r.length;n++){var i=r[n],a=e.getSynthesizedClone(i.name);e.setCommentRange(a,i.name),g(a)}for(var o=e.getInitializedVariables(t),s=o.length,c=0,l=[];c<s;){for(var u=c;u<s;u++){if(H((i=o[u]).initializer)&&l.length>0)break;l.push(V(i))}l.length&&(ye(e.createStatement(e.inlineExpressions(l))),c+=l.length,l=[])}}function V(t){return e.setSourceMapRange(e.createAssignment(e.setSourceMapRange(e.getSynthesizedClone(t.name),t.name),e.visitNode(t.initializer,R,e.isExpression)),t)}function H(e){return e&&0!=(16777216&e.transformFlags)}function G(e){for(var t=e.length,n=0;n<t;n++)if(H(e[n]))return n;return-1}function W(t){var n;return e.isGeneratedIdentifier(t)||4096&e.getEmitFlags(t)?t:(ve(n=e.createTempVariable(g),t,t),n)}function Q(t){var n=t?e.createUniqueName(t):e.createTempVariable(void 0);return g(n),n}function Y(){d||(d=[]);var e=O;return O++,d[e]=-1,e}function X(t){e.Debug.assert(void 0!==d,"No labels were defined."),d[t]=x?x.length:0}function Z(e){s||(s=[],l=[],c=[],u=[]);var t=l.length;return l[t]=0,c[t]=x?x.length:0,s[t]=e,u.push(e),t}function ee(){var t=te();e.Debug.assert(void 0!==t,"beginBlock was never called.");var n=l.length;return l[n]=1,c[n]=x?x.length:0,s[n]=t,u.pop(),t}function te(){return e.lastOrUndefined(u)}function ne(){var e=te();return e&&e.kind}function re(){Z({kind:3,isScript:!0,breakLabel:-1,continueLabel:-1})}function ie(e){var t=Y();return Z({kind:3,isScript:!1,breakLabel:t,continueLabel:e}),t}function ae(){e.Debug.assert(3===ne());var t=ee(),n=t.breakLabel;t.isScript||X(n)}function oe(){e.Debug.assert(2===ne());var t=ee(),n=t.breakLabel;t.isScript||X(n)}function se(){e.Debug.assert(4===ne());var t=ee();t.isScript||X(t.breakLabel)}function ce(e){return 2===e.kind||3===e.kind}function le(e){return 4===e.kind}function ue(e){return 3===e.kind}function de(e,t){for(var n=t;n>=0;n--){var r=u[n];if(!le(r))break;if(r.labelText===e)return!0}return!1}function pe(e){if(u)if(e)for(var t=u.length-1;t>=0;t--){if(le(n=u[t])&&n.labelText===e)return n.breakLabel;if(ce(n)&&de(e,t-1))return n.breakLabel}else for(t=u.length-1;t>=0;t--){var n;if(ce(n=u[t]))return n.breakLabel}return 0}function fe(e){if(u)if(e)for(var t=u.length-1;t>=0;t--){if(ue(n=u[t])&&de(e,t-1))return n.continueLabel}else for(t=u.length-1;t>=0;t--){var n;if(ue(n=u[t]))return n.continueLabel}return 0}function _e(t){if(t>0){void 0===p&&(p=[]);var n=e.createLiteral(-1);return void 0===p[t]?p[t]=[n]:p[t].push(n),n}return e.createOmittedExpression()}function me(t){var n=e.createLiteral(t);return e.addSyntheticTrailingComment(n,3,function(e){switch(e){case 2:return"return";case 3:return"break";case 4:return"yield";case 5:return"yield*";case 7:return"endfinally"}}(t)),n}function ge(t,n){return e.Debug.assertLessThan(0,t,"Invalid label"),e.setTextRange(e.createReturn(e.createArrayLiteral([me(3),_e(t)])),n)}function he(){Se(0)}function ye(e){e?Se(1,[e]):he()}function ve(e,t,n){Se(2,[e,t],n)}function be(e,t){Se(3,[e],t)}function xe(e,t,n){Se(4,[e,t],n)}function ke(e,t,n){Se(5,[e,t],n)}function Se(e,t,n){void 0===x&&(x=[],k=[],S=[]),void 0===d&&X(Y());var r=x.length;x[r]=e,k[r]=t,S[r]=n}function Te(){F=0,L=0,C=void 0,E=!1,D=!1,A=void 0,w=void 0,N=void 0,I=void 0,P=void 0;var n=function(){if(x){for(var t=0;t<x.length;t++)Ae(t);Ce(x.length)}else Ce(0);if(A){var n=e.createPropertyAccess(T,"label"),r=e.createSwitch(n,e.createCaseBlock(A));return r.startsOnNewLine=!0,[r]}if(w)return w;return[]}();return function(t,n){return t.requestEmitHelper(o),e.createCall(e.getHelperName("__generator"),void 0,[e.createThis(),n])}(t,e.setEmitFlags(e.createFunctionExpression(void 0,void 0,void 0,void 0,[e.createParameter(void 0,void 0,void 0,T)],void 0,e.createBlock(n,n.length>0)),524288))}function Ce(e){(function(e){if(!D)return!0;if(!d||!p)return!1;for(var t=0;t<d.length;t++)if(d[t]===e&&p[t])return!0;return!1})(e)&&(De(e),P=void 0,Ne(void 0,void 0)),w&&A&&Ee(!1),function(){if(void 0!==p&&void 0!==C)for(var e=0;e<C.length;e++){var t=C[e];if(void 0!==t)for(var n=0,r=t;n<r.length;n++){var i=r[n],a=p[i];if(void 0!==a)for(var o=0,s=a;o<s.length;o++){s[o].text=String(e)}}}}()}function Ee(t){if(A||(A=[]),w){if(P)for(var n=P.length-1;n>=0;n--){var r=P[n];w=[e.createWith(r.expression,e.createBlock(w))]}if(I){var i=I.startLabel,a=I.catchLabel,o=I.finallyLabel,s=I.endLabel;w.unshift(e.createStatement(e.createCall(e.createPropertyAccess(e.createPropertyAccess(T,"trys"),"push"),void 0,[e.createArrayLiteral([_e(i),_e(a),_e(o),_e(s)])]))),I=void 0}t&&w.push(e.createStatement(e.createAssignment(e.createPropertyAccess(T,"label"),e.createLiteral(L+1))))}A.push(e.createCaseClause(e.createLiteral(L),w||[])),w=void 0}function De(e){if(d)for(var t=0;t<d.length;t++)d[t]===e&&(w&&(Ee(!E),E=!1,D=!1,L++),void 0===C&&(C=[]),void 0===C[L]?C[L]=[t]:C[L].push(t))}function Ae(t){if(De(t),function(e){if(s)for(;F<l.length&&c[F]<=e;F++){var t=s[F],n=l[F];switch(t.kind){case 0:0===n?(N||(N=[]),w||(w=[]),N.push(I),I=t):1===n&&(I=N.pop());break;case 1:0===n?(P||(P=[]),P.push(t)):1===n&&P.pop()}}}(t),!E){E=!1,D=!1;var n=x[t];if(0!==n){if(10===n)return E=!0,void we(e.createReturn(e.createArrayLiteral([me(7)])));var r=k[t];if(1===n)return we(r[0]);var i,a,o,u=S[t];switch(n){case 2:return i=r[0],a=r[1],o=u,void we(e.setTextRange(e.createStatement(e.createAssignment(i,a)),o));case 3:return function(t,n){E=!0,we(e.setEmitFlags(e.setTextRange(e.createReturn(e.createArrayLiteral([me(3),_e(t)])),n),384))}(r[0],u);case 4:return function(t,n,r){we(e.setEmitFlags(e.createIf(n,e.setEmitFlags(e.setTextRange(e.createReturn(e.createArrayLiteral([me(3),_e(t)])),r),384)),1))}(r[0],r[1],u);case 5:return function(t,n,r){we(e.setEmitFlags(e.createIf(e.createLogicalNot(n),e.setEmitFlags(e.setTextRange(e.createReturn(e.createArrayLiteral([me(3),_e(t)])),r),384)),1))}(r[0],r[1],u);case 6:return function(t,n){E=!0,we(e.setEmitFlags(e.setTextRange(e.createReturn(e.createArrayLiteral(t?[me(4),t]:[me(4)])),n),384))}(r[0],u);case 7:return function(t,n){E=!0,we(e.setEmitFlags(e.setTextRange(e.createReturn(e.createArrayLiteral([me(5),t])),n),384))}(r[0],u);case 8:return Ne(r[0],u);case 9:return function(t,n){E=!0,D=!0,we(e.setTextRange(e.createThrow(t),n))}(r[0],u)}}}}function we(e){e&&(w?w.push(e):w=[e])}function Ne(t,n){E=!0,D=!0,we(e.setEmitFlags(e.setTextRange(e.createReturn(e.createArrayLiteral(t?[me(2),t]:[me(2)])),n),384))}};var o={name:"typescript:generator",scoped:!1,priority:6,text:'\n            var __generator = (this && this.__generator) || function (thisArg, body) {\n                var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n                return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;\n                function verb(n) { return function (v) { return step([n, v]); }; }\n                function step(op) {\n                    if (f) throw new TypeError("Generator is already executing.");\n                    while (_) try {\n                        if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;\n                        if (y = 0, t) op = [0, t.value];\n                        switch (op[0]) {\n                            case 0: case 1: t = op; break;\n                            case 4: _.label++; return { value: op[1], done: false };\n                            case 5: _.label++; y = op[1]; op = [0]; continue;\n                            case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                            default:\n                                if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                                if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                                if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                                if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                                if (t[2]) _.ops.pop();\n                                _.trys.pop(); continue;\n                        }\n                        op = body.call(thisArg, _);\n                    } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n                    if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n                }\n            };'}}(ts||(ts={})),function(e){e.transformModule=function(r){var i=r.startLexicalEnvironment,a=r.endLexicalEnvironment,o=r.hoistVariableDeclaration,s=r.getCompilerOptions(),c=r.getEmitResolver(),l=r.getEmitHost(),u=e.getEmitScriptTarget(s),d=e.getEmitModuleKind(s),p=r.onSubstituteNode,f=r.onEmitNode;r.onSubstituteNode=function(t,n){if((n=p(t,n)).id&&g[n.id])return n;if(1===t)return function(t){switch(t.kind){case 71:return J(t);case 194:return function(t){if(e.isAssignmentOperator(t.operatorToken.kind)&&e.isIdentifier(t.left)&&!e.isGeneratedIdentifier(t.left)&&!e.isLocalName(t.left)&&!e.isDeclarationNameOfEnumOrNamespace(t.left)){var n=q(t.left);if(n){for(var r=t,i=0,a=n;i<a.length;i++){var o=a[i];g[e.getNodeId(r)]=!0,r=K(o,r,t)}return r}}return t}(t);case 193:case 192:return function(t){if((43===t.operator||44===t.operator)&&e.isIdentifier(t.operand)&&!e.isGeneratedIdentifier(t.operand)&&!e.isLocalName(t.operand)&&!e.isDeclarationNameOfEnumOrNamespace(t.operand)){var n=q(t.operand);if(n){for(var r=193===t.kind?e.setTextRange(e.createBinary(t.operand,e.createToken(43===t.operator?59:60),e.createLiteral(1)),t):t,i=0,a=n;i<a.length;i++){var o=a[i];g[e.getNodeId(r)]=!0,r=K(o,r)}return r}}return t}(t)}return t}(n);if(e.isShorthandPropertyAssignment(n))return function(t){var n=t.name,r=J(n);if(r!==n){if(t.objectAssignmentInitializer){var i=e.createAssignment(r,t.objectAssignmentInitializer);return e.setTextRange(e.createPropertyAssignment(n,i),t)}return e.setTextRange(e.createPropertyAssignment(n,r),t)}return t}(n);return n},r.onEmitNode=function(t,n,r){265===n.kind?(_=n,m=y[e.getOriginalNodeId(_)],g=[],f(t,n,r),_=void 0,m=void 0,g=void 0):f(t,n,r)},r.enableSubstitution(71),r.enableSubstitution(194),r.enableSubstitution(192),r.enableSubstitution(193),r.enableSubstitution(262),r.enableEmitNotification(265);var _,m,g,h,y=[],v=[];return function(t){if(t.isDeclarationFile||!(e.isExternalModule(t)||s.isolatedModules||67108864&t.transformFlags))return t;_=t,m=e.collectExternalModuleInfo(t,c,s),y[e.getOriginalNodeId(t)]=m;var n=function(t){switch(t){case e.ModuleKind.AMD:return k;case e.ModuleKind.UMD:return S;default:return x}}(d)(t);return _=void 0,m=void 0,h=!1,e.aggregateTransformFlags(n)};function b(){return!(m.exportEquals||!e.isExternalModule(_))}function x(n){i();var o=[],c=s.alwaysStrict||!s.noImplicitUseStrict&&e.isExternalModule(_),l=e.addPrologue(o,n.statements,c,D);b()&&e.append(o,$()),e.append(o,e.visitNode(m.externalHelpersImportDeclaration,D,e.isStatement)),e.addRange(o,e.visitNodes(n.statements,D,e.isStatement,l)),E(o,!1),e.addRange(o,a());var u=e.updateSourceFileNode(n,e.setTextRange(e.createNodeArray(o),n.statements));return m.hasExportStarsToExportValues&&!s.importHelpers&&e.addEmitHelper(u,t),e.addEmitHelpers(u,r.readEmitHelpers()),u}function k(t){var n=e.createIdentifier("define"),r=e.tryGetModuleNameFromFile(t,l,s),i=T(t,!0),a=i.aliasedModuleNames,o=i.unaliasedModuleNames,c=i.importAliasNames;return e.updateSourceFileNode(t,e.setTextRange(e.createNodeArray([e.createStatement(e.createCall(n,void 0,(r?[r]:[]).concat([e.createArrayLiteral([e.createLiteral("require"),e.createLiteral("exports")].concat(a,o)),e.createFunctionExpression(void 0,void 0,void 0,void 0,[e.createParameter(void 0,void 0,void 0,"require"),e.createParameter(void 0,void 0,void 0,"exports")].concat(c),void 0,C(t))])))]),t.statements))}function S(t){var n=T(t,!1),r=n.aliasedModuleNames,i=n.unaliasedModuleNames,a=n.importAliasNames,o=e.tryGetModuleNameFromFile(t,l,s),c=e.createFunctionExpression(void 0,void 0,void 0,void 0,[e.createParameter(void 0,void 0,void 0,"factory")],void 0,e.setTextRange(e.createBlock([e.createIf(e.createLogicalAnd(e.createTypeCheck(e.createIdentifier("module"),"object"),e.createTypeCheck(e.createPropertyAccess(e.createIdentifier("module"),"exports"),"object")),e.createBlock([e.createVariableStatement(void 0,[e.createVariableDeclaration("v",void 0,e.createCall(e.createIdentifier("factory"),void 0,[e.createIdentifier("require"),e.createIdentifier("exports")]))]),e.setEmitFlags(e.createIf(e.createStrictInequality(e.createIdentifier("v"),e.createIdentifier("undefined")),e.createStatement(e.createAssignment(e.createPropertyAccess(e.createIdentifier("module"),"exports"),e.createIdentifier("v")))),1)]),e.createIf(e.createLogicalAnd(e.createTypeCheck(e.createIdentifier("define"),"function"),e.createPropertyAccess(e.createIdentifier("define"),"amd")),e.createBlock([e.createStatement(e.createCall(e.createIdentifier("define"),void 0,(o?[o]:[]).concat([e.createArrayLiteral([e.createLiteral("require"),e.createLiteral("exports")].concat(r,i)),e.createIdentifier("factory")])))])))],!0),void 0));return e.updateSourceFileNode(t,e.setTextRange(e.createNodeArray([e.createStatement(e.createCall(c,void 0,[e.createFunctionExpression(void 0,void 0,void 0,void 0,[e.createParameter(void 0,void 0,void 0,"require"),e.createParameter(void 0,void 0,void 0,"exports")].concat(a),void 0,C(t))]))]),t.statements))}function T(t,n){for(var r=[],i=[],a=[],o=0,u=t.amdDependencies;o<u.length;o++){var d=u[o];d.name?(r.push(e.createLiteral(d.path)),a.push(e.createParameter(void 0,void 0,void 0,d.name))):i.push(e.createLiteral(d.path))}for(var p=0,f=m.externalImports;p<f.length;p++){var g=f[p],h=e.getExternalModuleNameLiteral(g,_,l,c,s),y=e.getLocalNameForExternalImport(g,_);h&&(n&&y?(e.setEmitFlags(y,4),r.push(h),a.push(e.createParameter(void 0,void 0,void 0,y))):i.push(h))}return{aliasedModuleNames:r,unaliasedModuleNames:i,importAliasNames:a}}function C(r){i();var o=[],c=e.addPrologue(o,r.statements,!s.noImplicitUseStrict,D);b()&&e.append(o,$()),e.append(o,e.visitNode(m.externalHelpersImportDeclaration,D,e.isStatement)),e.addRange(o,e.visitNodes(r.statements,D,e.isStatement,c)),E(o,!0),e.addRange(o,a());var l=e.createBlock(o,!0);return m.hasExportStarsToExportValues&&!s.importHelpers&&e.addEmitHelper(l,t),h&&e.addEmitHelper(l,n),l}function E(t,n){if(m.exportEquals){var r=e.visitNode(m.exportEquals.expression,A);if(r)if(n){var i=e.createReturn(r);e.setTextRange(i,m.exportEquals),e.setEmitFlags(i,1920),t.push(i)}else{i=e.createStatement(e.createAssignment(e.createPropertyAccess(e.createIdentifier("module"),"exports"),r));e.setTextRange(i,m.exportEquals),e.setEmitFlags(i,1536),t.push(i)}}}function D(t){switch(t.kind){case 238:return function(t){var n,r=e.getNamespaceDeclarationNode(t);if(d!==e.ModuleKind.AMD){if(!t.importClause)return e.setTextRange(e.createStatement(I(t)),t);var i=[];r&&!e.isDefaultImport(t)?i.push(e.createVariableDeclaration(e.getSynthesizedClone(r.name),void 0,I(t))):(i.push(e.createVariableDeclaration(e.getGeneratedNameForNode(t),void 0,I(t))),r&&e.isDefaultImport(t)&&i.push(e.createVariableDeclaration(e.getSynthesizedClone(r.name),void 0,e.getGeneratedNameForNode(t)))),n=e.append(n,e.setTextRange(e.createVariableStatement(void 0,e.createVariableDeclarationList(i,u>=2?2:0)),t))}else r&&e.isDefaultImport(t)&&(n=e.append(n,e.createVariableStatement(void 0,e.createVariableDeclarationList([e.setTextRange(e.createVariableDeclaration(e.getSynthesizedClone(r.name),void 0,e.getGeneratedNameForNode(t)),t)],u>=2?2:0))));if(O(t)){var a=e.getOriginalNodeId(t);v[a]=F(v[a],t)}else n=F(n,t);return e.singleOrMany(n)}(t);case 237:return function(t){var n;e.Debug.assert(e.isExternalModuleImportEqualsDeclaration(t),"import= for internal module references should be handled in an earlier transformer."),d!==e.ModuleKind.AMD?n=e.hasModifier(t,1)?e.append(n,e.setTextRange(e.createStatement(K(t.name,I(t))),t)):e.append(n,e.setTextRange(e.createVariableStatement(void 0,e.createVariableDeclarationList([e.createVariableDeclaration(e.getSynthesizedClone(t.name),void 0,I(t))],u>=2?2:0)),t)):e.hasModifier(t,1)&&(n=e.append(n,e.setTextRange(e.createStatement(K(e.getExportName(t),e.getLocalName(t))),t)));if(O(t)){var r=e.getOriginalNodeId(t);v[r]=L(v[r],t)}else n=L(n,t);return e.singleOrMany(n)}(t);case 244:return function(t){if(!t.moduleSpecifier)return;var n=e.getGeneratedNameForNode(t);if(t.exportClause){var i=[];d!==e.ModuleKind.AMD&&i.push(e.setTextRange(e.createVariableStatement(void 0,e.createVariableDeclarationList([e.createVariableDeclaration(n,void 0,I(t))])),t));for(var a=0,o=t.exportClause.elements;a<o.length;a++){var s=o[a],c=e.createPropertyAccess(n,s.propertyName||s.name);i.push(e.setTextRange(e.createStatement(K(e.getExportName(s),c)),s))}return e.singleOrMany(i)}return e.setTextRange(e.createStatement(function(t,n){return t.getCompilerOptions().importHelpers?e.createCall(e.getHelperName("__exportStar"),void 0,[n,e.createIdentifier("exports")]):e.createCall(e.createIdentifier("__export"),void 0,[n])}(r,d!==e.ModuleKind.AMD?I(t):n)),t)}(t);case 243:return function(t){if(t.isExportEquals)return;var n,r=t.original;if(r&&O(r)){var i=e.getOriginalNodeId(t);v[i]=j(v[i],e.createIdentifier("default"),e.visitNode(t.expression,A),t,!0)}else n=j(n,e.createIdentifier("default"),e.visitNode(t.expression,A),t,!0);return e.singleOrMany(n)}(t);case 208:return function(t){var n,i,a;if(e.hasModifier(t,1)){for(var o=void 0,s=0,c=t.declarationList.declarations;s<c.length;s++){var l=c[s];e.isIdentifier(l.name)&&e.isLocalName(l.name)?(o||(o=e.visitNodes(t.modifiers,z,e.isModifier)),i=e.append(i,l)):l.initializer&&(a=e.append(a,P(l)))}i&&(n=e.append(n,e.updateVariableStatement(t,o,e.updateVariableDeclarationList(t.declarationList,i)))),a&&(n=e.append(n,e.setTextRange(e.createStatement(e.inlineExpressions(a)),t)))}else n=e.append(n,e.visitEachChild(t,A,r));if(O(t)){var u=e.getOriginalNodeId(t);v[u]=R(v[u],t)}else n=R(n,t);return e.singleOrMany(n)}(t);case 228:return function(t){var n;n=e.hasModifier(t,1)?e.append(n,e.setOriginalNode(e.setTextRange(e.createFunctionDeclaration(void 0,e.visitNodes(t.modifiers,z,e.isModifier),t.asteriskToken,e.getDeclarationName(t,!0,!0),void 0,e.visitNodes(t.parameters,A),void 0,e.visitEachChild(t.body,A,r)),t),t)):e.append(n,e.visitEachChild(t,A,r));if(O(t)){var i=e.getOriginalNodeId(t);v[i]=U(v[i],t)}else n=U(n,t);return e.singleOrMany(n)}(t);case 229:return function(t){var n;n=e.hasModifier(t,1)?e.append(n,e.setOriginalNode(e.setTextRange(e.createClassDeclaration(void 0,e.visitNodes(t.modifiers,z,e.isModifier),e.getDeclarationName(t,!0,!0),void 0,e.visitNodes(t.heritageClauses,A),e.visitNodes(t.members,A)),t),t)):e.append(n,e.visitEachChild(t,A,r));if(O(t)){var i=e.getOriginalNodeId(t);v[i]=U(v[i],t)}else n=U(n,t);return e.singleOrMany(n)}(t);case 290:return function(t){if(O(t)&&208===t.original.kind){var n=e.getOriginalNodeId(t);v[n]=R(v[n],t.original)}return t}(t);case 291:return function(t){var n=e.getOriginalNodeId(t),r=v[n];if(r)return delete v[n],e.append(r,t);return t}(t);default:return e.visitEachChild(t,A,r)}}function A(t){return 67108864&t.transformFlags?e.isImportCall(t)?function(t){var n=e.visitNode(e.firstOrUndefined(t.arguments),A),r=!!(16384&t.transformFlags);switch(s.module){case e.ModuleKind.AMD:return w(n,r);case e.ModuleKind.UMD:return function(t,n){if(h=!0,e.isSimpleCopiableExpression(t)){var r=e.isGeneratedIdentifier(t)?t:e.isStringLiteral(t)?e.createLiteral(t):e.setEmitFlags(e.setTextRange(e.getSynthesizedClone(t),t),1536);return e.createConditional(e.createIdentifier("__syncRequire"),N(t,n),w(r,n))}var i=e.createTempVariable(o);return e.createComma(e.createAssignment(i,t),e.createConditional(e.createIdentifier("__syncRequire"),N(i,n),w(i,n)))}(n,r);case e.ModuleKind.CommonJS:default:return N(n,r)}}(t):e.visitEachChild(t,A,r):t}function w(t,n){var r,i=e.createUniqueName("resolve"),a=e.createUniqueName("reject"),o=[e.createParameter(void 0,void 0,void 0,i),e.createParameter(void 0,void 0,void 0,a)],s=e.createBlock([e.createStatement(e.createCall(e.createIdentifier("require"),void 0,[e.createArrayLiteral([t||e.createOmittedExpression()]),i,a]))]);return u>=2?r=e.createArrowFunction(void 0,void 0,o,void 0,void 0,s):(r=e.createFunctionExpression(void 0,void 0,void 0,void 0,o,void 0,s),n&&e.setEmitFlags(r,8)),e.createNew(e.createIdentifier("Promise"),void 0,[r])}function N(t,n){var r,i=e.createCall(e.createPropertyAccess(e.createIdentifier("Promise"),"resolve"),void 0,[]),a=e.createCall(e.createIdentifier("require"),void 0,t?[t]:[]);return u>=2?r=e.createArrowFunction(void 0,void 0,[],void 0,void 0,a):(r=e.createFunctionExpression(void 0,void 0,void 0,void 0,[],void 0,e.createBlock([e.createReturn(a)])),n&&e.setEmitFlags(r,8)),e.createCall(e.createPropertyAccess(i,"then"),void 0,[r])}function I(t){var n=e.getExternalModuleNameLiteral(t,_,l,c,s),r=[];return n&&r.push(n),e.createCall(e.createIdentifier("require"),void 0,r)}function P(t){return e.isBindingPattern(t.name)?e.flattenDestructuringAssignment(e.visitNode(t,A),void 0,r,0,!1,K):e.createAssignment(e.setTextRange(e.createPropertyAccess(e.createIdentifier("exports"),t.name),t.name),e.visitNode(t.initializer,A))}function O(t){return 0!=(4194304&e.getEmitFlags(t))}function F(e,t){if(m.exportEquals)return e;var n=t.importClause;if(!n)return e;n.name&&(e=B(e,n));var r=n.namedBindings;if(r)switch(r.kind){case 240:e=B(e,r);break;case 241:for(var i=0,a=r.elements;i<a.length;i++){e=B(e,a[i])}}return e}function L(e,t){return m.exportEquals?e:B(e,t)}function R(e,t){if(m.exportEquals)return e;for(var n=0,r=t.declarationList.declarations;n<r.length;n++){e=M(e,r[n])}return e}function M(t,n){if(m.exportEquals)return t;if(e.isBindingPattern(n.name))for(var r=0,i=n.name.elements;r<i.length;r++){var a=i[r];e.isOmittedExpression(a)||(t=M(t,a))}else e.isGeneratedIdentifier(n.name)||(t=B(t,n));return t}function U(t,n){if(m.exportEquals)return t;e.hasModifier(n,1)&&(t=j(t,e.hasModifier(n,512)?e.createIdentifier("default"):e.getDeclarationName(n),e.getLocalName(n),n));return n.name&&(t=B(t,n)),t}function B(t,n){var r=e.getDeclarationName(n),i=m.exportSpecifiers.get(e.idText(r));if(i)for(var a=0,o=i;a<o.length;a++){var s=o[a];t=j(t,s.name,r,s.name)}return t}function j(t,n,r,i,a){return t=e.append(t,function(t,n,r,i){var a=e.setTextRange(e.createStatement(K(t,n)),r);e.startOnNewLine(a),i||e.setEmitFlags(a,1536);return a}(n,r,i,a))}function $(){var t;return t=0===u?e.createStatement(K(e.createIdentifier("__esModule"),e.createLiteral(!0))):e.createStatement(e.createCall(e.createPropertyAccess(e.createIdentifier("Object"),"defineProperty"),void 0,[e.createIdentifier("exports"),e.createLiteral("__esModule"),e.createObjectLiteral([e.createPropertyAssignment("value",e.createLiteral(!0))])])),e.setEmitFlags(t,1048576),t}function K(t,n,r){return e.setTextRange(e.createAssignment(e.createPropertyAccess(e.createIdentifier("exports"),e.getSynthesizedClone(t)),n),r)}function z(e){switch(e.kind){case 84:case 79:return}return e}function J(t){if(4096&e.getEmitFlags(t)){var n=e.getExternalHelpersModuleName(_);return n?e.createPropertyAccess(n,t):t}if(!e.isGeneratedIdentifier(t)&&!e.isLocalName(t)){var r=c.getReferencedExportContainer(t,e.isExportName(t));if(r&&265===r.kind)return e.setTextRange(e.createPropertyAccess(e.createIdentifier("exports"),e.getSynthesizedClone(t)),t);var i=c.getReferencedImportDeclaration(t);if(i){if(e.isImportClause(i))return e.setTextRange(e.createPropertyAccess(e.getGeneratedNameForNode(i.parent),e.createIdentifier("default")),t);if(e.isImportSpecifier(i)){var a=i.propertyName||i.name;return e.setTextRange(e.createPropertyAccess(e.getGeneratedNameForNode(i.parent.parent.parent),e.getSynthesizedClone(a)),t)}}}return t}function q(t){if(!e.isGeneratedIdentifier(t)){var n=c.getReferencedImportDeclaration(t)||c.getReferencedValueDeclaration(t);if(n)return m&&m.exportedBindings[e.getOriginalNodeId(n)]}}};var t={name:"typescript:export-star",scoped:!0,text:"\n            function __export(m) {\n                for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n            }\n        "};var n={name:"typescript:dynamicimport-sync-require",scoped:!0,text:'\n            var __syncRequire = typeof module === "object" && typeof module.exports === "object";'}}(ts||(ts={})),function(e){e.transformSystemModule=function(t){var n=t.startLexicalEnvironment,r=t.endLexicalEnvironment,i=t.hoistVariableDeclaration,a=t.getCompilerOptions(),o=t.getEmitResolver(),s=t.getEmitHost(),c=t.onSubstituteNode,l=t.onEmitNode;t.onSubstituteNode=function(t,n){if(function(e){return g&&e.id&&g[e.id]}(n=c(t,n)))return n;if(1===t)return function(t){switch(t.kind){case 71:return function(t){if(4096&e.getEmitFlags(t)){var n=e.getExternalHelpersModuleName(u);return n?e.createPropertyAccess(n,t):t}if(!e.isGeneratedIdentifier(t)&&!e.isLocalName(t)){var r=o.getReferencedImportDeclaration(t);if(r){if(e.isImportClause(r))return e.setTextRange(e.createPropertyAccess(e.getGeneratedNameForNode(r.parent),e.createIdentifier("default")),t);if(e.isImportSpecifier(r))return e.setTextRange(e.createPropertyAccess(e.getGeneratedNameForNode(r.parent.parent.parent),e.getSynthesizedClone(r.propertyName||r.name)),t)}}return t}(t);case 194:return function(t){if(e.isAssignmentOperator(t.operatorToken.kind)&&e.isIdentifier(t.left)&&!e.isGeneratedIdentifier(t.left)&&!e.isLocalName(t.left)&&!e.isDeclarationNameOfEnumOrNamespace(t.left)){var n=q(t.left);if(n){for(var r=t,i=0,a=n;i<a.length;i++){r=B(a[i],V(r))}return r}}return t}(t);case 192:case 193:return function(t){if((43===t.operator||44===t.operator)&&e.isIdentifier(t.operand)&&!e.isGeneratedIdentifier(t.operand)&&!e.isLocalName(t.operand)&&!e.isDeclarationNameOfEnumOrNamespace(t.operand)){var n=q(t.operand);if(n){for(var r=193===t.kind?e.setTextRange(e.createPrefix(t.operator,t.operand),t):t,i=0,a=n;i<a.length;i++){r=B(a[i],V(r))}return 193===t.kind&&(r=43===t.operator?e.createSubtract(V(r),e.createLiteral(1)):e.createAdd(V(r),e.createLiteral(1))),r}}return t}(t)}return t}(n);return n},t.onEmitNode=function(t,n,r){if(265===n.kind){var i=e.getOriginalNodeId(n);u=n,d=h[i],p=v[i],(g=b[i])&&delete b[i],l(t,n,r),u=void 0,d=void 0,p=void 0,g=void 0}else l(t,n,r)},t.enableSubstitution(71),t.enableSubstitution(194),t.enableSubstitution(192),t.enableSubstitution(193),t.enableEmitNotification(265);var u,d,p,f,_,m,g,h=[],y=[],v=[],b=[];return function(t){if(t.isDeclarationFile||!(e.isEffectiveExternalModule(t,a)||67108864&t.transformFlags))return t;var i=e.getOriginalNodeId(t);u=t,m=t,d=h[i]=e.collectExternalModuleInfo(t,o,a),p=e.createUniqueName("exports"),v[i]=p,f=e.createUniqueName("context");var c=function(t){for(var n=e.createMap(),r=[],i=0;i<t.length;i++){var c=t[i],l=e.getExternalModuleNameLiteral(c,u,s,o,a);if(l){var d=l.text,p=n.get(d);void 0!==p?r[p].externalImports.push(c):(n.set(d,r.length),r.push({name:l,externalImports:[c]}))}}return r}(d.externalImports),l=function(t,i){var o=[];n();var s=a.alwaysStrict||!a.noImplicitUseStrict&&e.isExternalModule(u),c=e.addPrologue(o,t.statements,s,S);o.push(e.createVariableStatement(void 0,e.createVariableDeclarationList([e.createVariableDeclaration("__moduleName",void 0,e.createLogicalAnd(f,e.createPropertyAccess(f,"id")))]))),e.visitNode(d.externalHelpersImportDeclaration,S,e.isStatement);var l=e.visitNodes(t.statements,S,e.isStatement,c);e.addRange(o,_),e.addRange(o,r());var p=function(t){if(!d.hasExportStarsToExportValues)return;if(!d.exportedNames&&0===d.exportSpecifiers.size){for(var n=!1,r=0,i=d.externalImports;r<i.length;r++){if(244===(f=i[r]).kind&&f.exportClause){n=!0;break}}if(!n){var a=x(void 0);return t.push(a),a.name}}var o=[];if(d.exportedNames)for(var s=0,c=d.exportedNames;s<c.length;s++){var l=c[s];"default"!==l.escapedText&&o.push(e.createPropertyAssignment(e.createLiteral(l),e.createTrue()))}for(var u=0,p=d.externalImports;u<p.length;u++){var f;if(244===(f=p[u]).kind){var _=f;if(_.exportClause)for(var m=0,g=_.exportClause.elements;m<g.length;m++){var h=g[m];o.push(e.createPropertyAssignment(e.createLiteral(e.idText(h.name||h.propertyName)),e.createTrue()))}}}var y=e.createUniqueName("exportedNames");t.push(e.createVariableStatement(void 0,e.createVariableDeclarationList([e.createVariableDeclaration(y,void 0,e.createObjectLiteral(o,!0))])));var v=x(y);return t.push(v),v.name}(o),m=e.createObjectLiteral([e.createPropertyAssignment("setters",k(p,i)),e.createPropertyAssignment("execute",e.createFunctionExpression(void 0,void 0,void 0,void 0,[],void 0,e.createBlock(l,!0)))]);return m.multiLine=!0,o.push(e.createReturn(m)),e.createBlock(o,!0)}(t,c),y=e.createFunctionExpression(void 0,void 0,void 0,void 0,[e.createParameter(void 0,void 0,void 0,p),e.createParameter(void 0,void 0,void 0,f)],void 0,l),T=e.tryGetModuleNameFromFile(t,s,a),C=e.createArrayLiteral(e.map(c,(function(e){return e.name}))),E=e.setEmitFlags(e.updateSourceFileNode(t,e.setTextRange(e.createNodeArray([e.createStatement(e.createCall(e.createPropertyAccess(e.createIdentifier("System"),"register"),void 0,T?[T,C,y]:[C,y]))]),t.statements)),1024);a.outFile||a.out||e.moveEmitHelpers(E,l,(function(e){return!e.scoped}));g&&(b[i]=g,g=void 0);return u=void 0,d=void 0,p=void 0,f=void 0,_=void 0,m=void 0,e.aggregateTransformFlags(E)};function x(t){var n=e.createUniqueName("exportStar"),r=e.createIdentifier("m"),i=e.createIdentifier("n"),a=e.createIdentifier("exports"),o=e.createStrictInequality(i,e.createLiteral("default"));return t&&(o=e.createLogicalAnd(o,e.createLogicalNot(e.createCall(e.createPropertyAccess(t,"hasOwnProperty"),void 0,[i])))),e.createFunctionDeclaration(void 0,void 0,void 0,n,void 0,[e.createParameter(void 0,void 0,void 0,r)],void 0,e.createBlock([e.createVariableStatement(void 0,e.createVariableDeclarationList([e.createVariableDeclaration(a,void 0,e.createObjectLiteral([]))])),e.createForIn(e.createVariableDeclarationList([e.createVariableDeclaration(i,void 0)]),r,e.createBlock([e.setEmitFlags(e.createIf(o,e.createStatement(e.createAssignment(e.createElementAccess(a,i),e.createElementAccess(r,i)))),1)])),e.createStatement(e.createCall(p,void 0,[a]))],!0))}function k(t,n){for(var r=[],i=0,a=n;i<a.length;i++){for(var o=a[i],s=e.forEach(o.externalImports,(function(t){return e.getLocalNameForExternalImport(t,u)})),c=s?e.getGeneratedNameForNode(s):e.createUniqueName(""),l=[],d=0,f=o.externalImports;d<f.length;d++){var _=f[d],m=e.getLocalNameForExternalImport(_,u);switch(_.kind){case 238:if(!_.importClause)break;case 237:e.Debug.assert(void 0!==m),l.push(e.createStatement(e.createAssignment(m,c)));break;case 244:if(e.Debug.assert(void 0!==m),_.exportClause){for(var g=[],h=0,y=_.exportClause.elements;h<y.length;h++){var v=y[h];g.push(e.createPropertyAssignment(e.createLiteral(e.idText(v.name)),e.createElementAccess(c,e.createLiteral(e.idText(v.propertyName||v.name)))))}l.push(e.createStatement(e.createCall(p,void 0,[e.createObjectLiteral(g,!0)])))}else l.push(e.createStatement(e.createCall(t,void 0,[c])))}}r.push(e.createFunctionExpression(void 0,void 0,void 0,void 0,[e.createParameter(void 0,void 0,void 0,c)],void 0,e.createBlock(l,!0)))}return e.createArrayLiteral(r,!0)}function S(t){switch(t.kind){case 238:return function(t){var n;t.importClause&&i(e.getLocalNameForExternalImport(t,u));if(N(t)){var r=e.getOriginalNodeId(t);y[r]=I(y[r],t)}else n=I(n,t);return e.singleOrMany(n)}(t);case 237:return function(t){var n;if(e.Debug.assert(e.isExternalModuleImportEqualsDeclaration(t),"import= for internal module references should be handled in an earlier transformer."),i(e.getLocalNameForExternalImport(t,u)),N(t)){var r=e.getOriginalNodeId(t);y[r]=P(y[r],t)}else n=P(n,t);return e.singleOrMany(n)}(t);case 244:return;case 243:return function(t){if(t.isExportEquals)return;var n=e.visitNode(t.expression,K,e.isExpression),r=t.original;if(!r||!N(r))return U(e.createIdentifier("default"),n,!0);var i=e.getOriginalNodeId(t);y[i]=M(y[i],e.createIdentifier("default"),n,!0)}(t);default:return j(t)}}function T(t){if(e.isBindingPattern(t.name))for(var n=0,r=t.name.elements;n<r.length;n++){var a=r[n];e.isOmittedExpression(a)||T(a)}else i(e.getSynthesizedClone(t.name))}function C(t){return 0==(2097152&e.getEmitFlags(t))&&(265===m.kind||0==(3&e.getOriginalNode(t).flags))}function E(n,r){var i=r?D:A;return e.isBindingPattern(n.name)?e.flattenDestructuringAssignment(n,K,t,0,!1,i):n.initializer?i(n.name,e.visitNode(n.initializer,K,e.isExpression)):n.name}function D(e,t,n){return w(e,t,n,!0)}function A(e,t,n){return w(e,t,n,!1)}function w(t,n,r,a){return i(e.getSynthesizedClone(t)),a?B(t,V(e.setTextRange(e.createAssignment(t,n),r))):V(e.setTextRange(e.createAssignment(t,n),r))}function N(t){return 0!=(4194304&e.getEmitFlags(t))}function I(e,t){if(d.exportEquals)return e;var n=t.importClause;if(!n)return e;n.name&&(e=R(e,n));var r=n.namedBindings;if(r)switch(r.kind){case 240:e=R(e,r);break;case 241:for(var i=0,a=r.elements;i<a.length;i++){e=R(e,a[i])}}return e}function P(e,t){return d.exportEquals?e:R(e,t)}function O(e,t,n){if(d.exportEquals)return e;for(var r=0,i=t.declarationList.declarations;r<i.length;r++){var a=i[r];(a.initializer||n)&&(e=F(e,a,n))}return e}function F(t,n,r){if(d.exportEquals)return t;if(e.isBindingPattern(n.name))for(var i=0,a=n.name.elements;i<a.length;i++){var o=a[i];e.isOmittedExpression(o)||(t=F(t,o,r))}else if(!e.isGeneratedIdentifier(n.name)){var s=void 0;r&&(t=M(t,n.name,e.getLocalName(n)),s=e.idText(n.name)),t=R(t,n,s)}return t}function L(t,n){if(d.exportEquals)return t;var r;if(e.hasModifier(n,1)){var i=e.hasModifier(n,512)?e.createLiteral("default"):n.name;t=M(t,i,e.getLocalName(n)),r=e.getTextOfIdentifierOrLiteral(i)}return n.name&&(t=R(t,n,r)),t}function R(t,n,r){if(d.exportEquals)return t;var i=e.getDeclarationName(n),a=d.exportSpecifiers.get(e.idText(i));if(a)for(var o=0,s=a;o<s.length;o++){var c=s[o];c.name.escapedText!==r&&(t=M(t,c.name,i))}return t}function M(t,n,r,i){return t=e.append(t,U(n,r,i))}function U(t,n,r){var i=e.createStatement(B(t,n));return e.startOnNewLine(i),r||e.setEmitFlags(i,1536),i}function B(t,n){var r=e.isIdentifier(t)?e.createLiteral(t):t;return e.setEmitFlags(n,1536|e.getEmitFlags(n)),e.setCommentRange(e.createCall(p,void 0,[r,n]),n)}function j(n){switch(n.kind){case 208:return function(t){if(!C(t.declarationList))return e.visitNode(t,K,e.isStatement);for(var n,r,i=e.hasModifier(t,1),a=N(t),o=0,s=t.declarationList.declarations;o<s.length;o++){var c=s[o];c.initializer?n=e.append(n,E(c,i&&!a)):T(c)}if(n&&(r=e.append(r,e.setTextRange(e.createStatement(e.inlineExpressions(n)),t))),a){var l=e.getOriginalNodeId(t);y[l]=O(y[l],t,i)}else r=O(r,t,!1);return e.singleOrMany(r)}(n);case 228:return function(n){if(_=e.hasModifier(n,1)?e.append(_,e.updateFunctionDeclaration(n,n.decorators,e.visitNodes(n.modifiers,J,e.isModifier),n.asteriskToken,e.getDeclarationName(n,!0,!0),void 0,e.visitNodes(n.parameters,K,e.isParameterDeclaration),void 0,e.visitNode(n.body,K,e.isBlock))):e.append(_,e.visitEachChild(n,K,t)),N(n)){var r=e.getOriginalNodeId(n);y[r]=L(y[r],n)}else _=L(_,n)}(n);case 229:return function(t){var n,r=e.getLocalName(t);if(i(r),n=e.append(n,e.setTextRange(e.createStatement(e.createAssignment(r,e.setTextRange(e.createClassExpression(void 0,t.name,void 0,e.visitNodes(t.heritageClauses,K,e.isHeritageClause),e.visitNodes(t.members,K,e.isClassElement)),t))),t)),N(t)){var a=e.getOriginalNodeId(t);y[a]=L(y[a],t)}else n=L(n,t);return e.singleOrMany(n)}(n);case 214:return function(t){var n=m;return m=t,t=e.updateFor(t,$(t.initializer),e.visitNode(t.condition,K,e.isExpression),e.visitNode(t.incrementor,K,e.isExpression),e.visitNode(t.statement,j,e.isStatement)),m=n,t}(n);case 215:return function(t){var n=m;return m=t,t=e.updateForIn(t,$(t.initializer),e.visitNode(t.expression,K,e.isExpression),e.visitNode(t.statement,j,e.isStatement,e.liftToBlock)),m=n,t}(n);case 216:return function(t){var n=m;return m=t,t=e.updateForOf(t,t.awaitModifier,$(t.initializer),e.visitNode(t.expression,K,e.isExpression),e.visitNode(t.statement,j,e.isStatement,e.liftToBlock)),m=n,t}(n);case 212:return function(t){return e.updateDo(t,e.visitNode(t.statement,j,e.isStatement,e.liftToBlock),e.visitNode(t.expression,K,e.isExpression))}(n);case 213:return function(t){return e.updateWhile(t,e.visitNode(t.expression,K,e.isExpression),e.visitNode(t.statement,j,e.isStatement,e.liftToBlock))}(n);case 222:return function(t){return e.updateLabel(t,t.label,e.visitNode(t.statement,j,e.isStatement,e.liftToBlock))}(n);case 220:return function(t){return e.updateWith(t,e.visitNode(t.expression,K,e.isExpression),e.visitNode(t.statement,j,e.isStatement,e.liftToBlock))}(n);case 221:return function(t){return e.updateSwitch(t,e.visitNode(t.expression,K,e.isExpression),e.visitNode(t.caseBlock,j,e.isCaseBlock))}(n);case 235:return function(t){var n=m;return m=t,t=e.updateCaseBlock(t,e.visitNodes(t.clauses,j,e.isCaseOrDefaultClause)),m=n,t}(n);case 257:return function(t){return e.updateCaseClause(t,e.visitNode(t.expression,K,e.isExpression),e.visitNodes(t.statements,j,e.isStatement))}(n);case 258:case 224:return function(n){return e.visitEachChild(n,j,t)}(n);case 260:return function(t){var n=m;return m=t,t=e.updateCatchClause(t,t.variableDeclaration,e.visitNode(t.block,j,e.isBlock)),m=n,t}(n);case 207:return function(n){var r=m;return m=n,n=e.visitEachChild(n,j,t),m=r,n}(n);case 290:return function(t){if(N(t)&&208===t.original.kind){var n=e.getOriginalNodeId(t),r=e.hasModifier(t.original,1);y[n]=O(y[n],t.original,r)}return t}(n);case 291:return function(t){var n=e.getOriginalNodeId(t),r=y[n];return r?(delete y[n],e.append(r,t)):t}(n);default:return K(n)}}function $(n){if(!n)return n;if(function(t){return e.isVariableDeclarationList(t)&&C(t)}(n)){for(var r=void 0,i=0,a=n.declarations;i<a.length;i++){var o=a[i];r=e.append(r,E(o,!1)),o.initializer||T(o)}return r?e.inlineExpressions(r):e.createOmittedExpression()}return e.visitEachChild(n,j,t)}function K(n){return 1024&n.transformFlags&&194===n.kind?function(n){if(z(n.left))return e.flattenDestructuringAssignment(n,K,t,0,!0);return e.visitEachChild(n,K,t)}(n):e.isImportCall(n)?function(t){return e.createCall(e.createPropertyAccess(f,e.createIdentifier("import")),void 0,e.some(t.arguments)?[e.visitNode(t.arguments[0],K)]:[])}(n):2048&n.transformFlags||67108864&n.transformFlags?e.visitEachChild(n,K,t):n}function z(t){if(e.isAssignmentExpression(t,!0))return z(t.left);if(e.isSpreadElement(t))return z(t.expression);if(e.isObjectLiteralExpression(t))return e.some(t.properties,z);if(e.isArrayLiteralExpression(t))return e.some(t.elements,z);if(e.isShorthandPropertyAssignment(t))return z(t.name);if(e.isPropertyAssignment(t))return z(t.initializer);if(e.isIdentifier(t)){var n=o.getReferencedExportContainer(t);return void 0!==n&&265===n.kind}return!1}function J(e){switch(e.kind){case 84:case 79:return}return e}function q(t){var n;if(!e.isGeneratedIdentifier(t)){var r=o.getReferencedImportDeclaration(t)||o.getReferencedValueDeclaration(t);if(r){var i=o.getReferencedExportContainer(t,!1);i&&265===i.kind&&(n=e.append(n,e.getDeclarationName(r))),n=e.addRange(n,d&&d.exportedBindings[e.getOriginalNodeId(r)])}}return n}function V(t){return void 0===g&&(g=[]),g[e.getNodeId(t)]=!0,t}}}(ts||(ts={})),function(e){e.transformES2015Module=function(t){var n,r=t.getCompilerOptions(),i=t.onEmitNode,a=t.onSubstituteNode;return t.onEmitNode=function(t,r,a){e.isSourceFile(r)?(n=r,i(t,r,a),n=void 0):i(t,r,a)},t.onSubstituteNode=function(t,r){if(r=a(t,r),e.isIdentifier(r)&&1===t)return function(t){if(4096&e.getEmitFlags(t)){var r=e.getExternalHelpersModuleName(n);if(r)return e.createPropertyAccess(r,t)}return t}(r);return r},t.enableEmitNotification(265),t.enableSubstitution(71),function(n){if(n.isDeclarationFile)return n;if(e.isExternalModule(n)||r.isolatedModules){var i=e.getOrCreateExternalHelpersModuleNameIfNeeded(n,r);if(i){var a=[],s=e.addPrologue(a,n.statements);return e.append(a,e.createImportDeclaration(void 0,void 0,e.createImportClause(void 0,e.createNamespaceImport(i)),e.createLiteral(e.externalHelpersModuleNameText))),e.addRange(a,e.visitNodes(n.statements,o,e.isStatement,s)),e.updateSourceFileNode(n,e.setTextRange(e.createNodeArray(a),n.statements))}return e.visitEachChild(n,o,t)}return n};function o(e){switch(e.kind){case 237:return;case 243:return function(e){return e.isExportEquals?void 0:e}(e)}return e}}}(ts||(ts={})),function(e){var t,n;!function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initialized=1]="Initialized",e[e.Completed=2]="Completed",e[e.Disposed=3]="Disposed"}(t||(t={})),function(e){e[e.Substitution=1]="Substitution",e[e.EmitNotifications=2]="EmitNotifications"}(n||(n={})),e.getTransformers=function(t,n){var r=t.jsx,i=e.getEmitScriptTarget(t),a=e.getEmitModuleKind(t),o=[];return e.addRange(o,n&&n.before),o.push(e.transformTypeScript),2===r&&o.push(e.transformJsx),i<5&&o.push(e.transformESNext),i<4&&o.push(e.transformES2017),i<3&&o.push(e.transformES2016),i<2&&(o.push(e.transformES2015),o.push(e.transformGenerators)),o.push(function(t){switch(t){case e.ModuleKind.ESNext:case e.ModuleKind.ES2015:return e.transformES2015Module;case e.ModuleKind.System:return e.transformSystemModule;default:return e.transformModule}}(a)),i<1&&o.push(e.transformES5),e.addRange(o,n&&n.after),o},e.transformNodes=function(t,n,r,i,a,o){for(var s,c,l,u=new Array(292),d=[],p=[],f=0,_=!1,m=function(e,t){return t},g=function(e,t,n){return n(e,t)},h=0,y={getCompilerOptions:function(){return r},getEmitResolver:function(){return t},getEmitHost:function(){return n},startLexicalEnvironment:function(){e.Debug.assert(h>0,"Cannot modify the lexical environment during initialization."),e.Debug.assert(h<2,"Cannot modify the lexical environment after transformation has completed."),e.Debug.assert(!_,"Lexical environment is suspended."),d[f]=s,p[f]=c,f++,s=void 0,c=void 0},suspendLexicalEnvironment:function(){e.Debug.assert(h>0,"Cannot modify the lexical environment during initialization."),e.Debug.assert(h<2,"Cannot modify the lexical environment after transformation has completed."),e.Debug.assert(!_,"Lexical environment is already suspended."),_=!0},resumeLexicalEnvironment:function(){e.Debug.assert(h>0,"Cannot modify the lexical environment during initialization."),e.Debug.assert(h<2,"Cannot modify the lexical environment after transformation has completed."),e.Debug.assert(_,"Lexical environment is not suspended."),_=!1},endLexicalEnvironment:function(){var t;if(e.Debug.assert(h>0,"Cannot modify the lexical environment during initialization."),e.Debug.assert(h<2,"Cannot modify the lexical environment after transformation has completed."),e.Debug.assert(!_,"Lexical environment is suspended."),(s||c)&&(c&&(t=c.slice()),s)){var n=e.createVariableStatement(void 0,e.createVariableDeclarationList(s));t?t.push(n):t=[n]}f--,s=d[f],c=p[f],0===f&&(d=[],p=[]);return t},hoistVariableDeclaration:function(t){e.Debug.assert(h>0,"Cannot modify the lexical environment during initialization."),e.Debug.assert(h<2,"Cannot modify the lexical environment after transformation has completed.");var n=e.setEmitFlags(e.createVariableDeclaration(t),64);s?s.push(n):s=[n]},hoistFunctionDeclaration:function(t){e.Debug.assert(h>0,"Cannot modify the lexical environment during initialization."),e.Debug.assert(h<2,"Cannot modify the lexical environment after transformation has completed."),c?c.push(t):c=[t]},requestEmitHelper:function(t){e.Debug.assert(h>0,"Cannot modify the transformation context during initialization."),e.Debug.assert(h<2,"Cannot modify the transformation context after transformation has completed."),e.Debug.assert(!t.scoped,"Cannot request a scoped emit helper."),l=e.append(l,t)},readEmitHelpers:function(){e.Debug.assert(h>0,"Cannot modify the transformation context during initialization."),e.Debug.assert(h<2,"Cannot modify the transformation context after transformation has completed.");var t=l;return l=void 0,t},enableSubstitution:function(t){e.Debug.assert(h<2,"Cannot modify the transformation context after transformation has completed."),u[t]|=1},enableEmitNotification:function(t){e.Debug.assert(h<2,"Cannot modify the transformation context after transformation has completed."),u[t]|=2},isSubstitutionEnabled:T,isEmitNotificationEnabled:C,get onSubstituteNode(){return m},set onSubstituteNode(t){e.Debug.assert(h<1,"Cannot modify transformation hooks after initialization has completed."),e.Debug.assert(void 0!==t,"Value must not be 'undefined'"),m=t},get onEmitNode(){return g},set onEmitNode(t){e.Debug.assert(h<1,"Cannot modify transformation hooks after initialization has completed."),e.Debug.assert(void 0!==t,"Value must not be 'undefined'"),g=t}},v=0,b=i;v<b.length;v++){var x=b[v];e.disposeEmitNodes(e.getSourceFileOfNode(e.getParseTreeNode(x)))}e.performance.mark("beforeTransform");var k=e.chain.apply(void 0,a)(y);h=1;var S=e.map(i,o?k:function(t){return!t||e.isSourceFile(t)&&t.isDeclarationFile?t:k(t)});return h=2,e.performance.mark("afterTransform"),e.performance.measure("transformTime","beforeTransform","afterTransform"),{transformed:S,substituteNode:function(t,n){return e.Debug.assert(h<3,"Cannot substitute a node after the result is disposed."),n&&T(n)&&m(t,n)||n},emitNodeWithNotification:function(t,n,r){e.Debug.assert(h<3,"Cannot invoke TransformationResult callbacks after the result is disposed."),n&&(C(n)?g(t,n,r):r(t,n))},dispose:function(){if(h<3){for(var t=0,n=i;t<n.length;t++){var r=n[t];e.disposeEmitNodes(e.getSourceFileOfNode(e.getParseTreeNode(r)))}s=void 0,d=void 0,c=void 0,p=void 0,m=void 0,g=void 0,l=void 0,h=3}}};function T(t){return 0!=(1&u[t.kind])&&0==(4&e.getEmitFlags(t))}function C(t){return 0!=(2&u[t.kind])||0!=(2&e.getEmitFlags(t))}}}(ts||(ts={})),function(e){var t={emittedLine:1,emittedColumn:1,sourceLine:1,sourceColumn:1,sourceIndex:0};e.createSourceMapWriter=function(n,i){var a,o,s,c,l,u,d,p,f=n.getCompilerOptions(),_=f.extendedDiagnostics,m=!(f.sourceMap||f.inlineSourceMap);return{initialize:function(r,i,_){if(m)return;p&&h();a=void 0,o=void 0,c=-1,l=void 0,u=t,d=0,(p={sourceMapFilePath:i,jsSourceMappingURL:f.inlineSourceMap?void 0:e.getBaseFileName(e.normalizeSlashes(i)),sourceMapFile:e.getBaseFileName(e.normalizeSlashes(r)),sourceMapSourceRoot:f.sourceRoot||"",sourceMapSources:[],inputSourceFileNames:[],sourceMapNames:[],sourceMapMappings:"",sourceMapSourcesContent:f.inlineSources?[]:void 0,sourceMapDecodedMappings:[]}).sourceMapSourceRoot=e.normalizeSlashes(p.sourceMapSourceRoot),p.sourceMapSourceRoot.length&&47!==p.sourceMapSourceRoot.charCodeAt(p.sourceMapSourceRoot.length-1)&&(p.sourceMapSourceRoot+=e.directorySeparator);f.mapRoot?(s=e.normalizeSlashes(f.mapRoot),265===_.kind&&(s=e.getDirectoryPath(e.getSourceFilePathInNewDir(_,n,s))),e.isRootedDiskPath(s)||e.isUrl(s)?p.jsSourceMappingURL=e.combinePaths(s,p.jsSourceMappingURL):(s=e.combinePaths(n.getCommonSourceDirectory(),s),p.jsSourceMappingURL=e.getRelativePathToDirectoryOrUrl(e.getDirectoryPath(e.normalizePath(r)),e.combinePaths(s,p.jsSourceMappingURL),n.getCurrentDirectory(),n.getCanonicalFileName,!0))):s=e.getDirectoryPath(e.normalizePath(r))},reset:h,getSourceMapData:function(){return p},setSourceFile:b,emitPos:v,emitNodeWithSourceMap:function(e,t,n){if(m)return n(e,t);if(t){var r=t.emitNode,i=r&&r.flags,o=r&&r.sourceMapRange,s=o||t,c=s.pos,l=s.end,u=o&&o.source,d=a;u===d&&(u=void 0),u&&b(u),287!==t.kind&&0==(16&i)&&c>=0&&v(g(c)),u&&b(d),64&i?(m=!0,n(e,t),m=!1):n(e,t),u&&b(u),287!==t.kind&&0==(32&i)&&l>=0&&v(l),u&&b(d)}},emitTokenWithSourceMap:function(e,t,n,r){if(m)return r(t,n);var i=e&&e.emitNode,a=i&&i.flags,o=i&&i.tokenSourceMapRanges&&i.tokenSourceMapRanges[t];n=g(o?o.pos:n),0==(128&a)&&n>=0&&v(n);n=r(t,n),o&&(n=o.end);0==(256&a)&&n>=0&&v(n);return n},getText:x,getSourceMappingURL:function(){if(m)return;if(f.inlineSourceMap){var t=e.convertToBase64(x());return p.jsSourceMappingURL="data:application/json;base64,"+t}return p.jsSourceMappingURL}};function g(t){return a.skipTrivia?a.skipTrivia(t):e.skipTrivia(o,t)}function h(){m||(a=void 0,s=void 0,c=void 0,l=void 0,u=void 0,d=void 0,p=void 0)}function y(){if(l&&l!==u){var t=u.emittedColumn;if(u.emittedLine===l.emittedLine)p.sourceMapMappings&&(p.sourceMapMappings+=",");else{for(var n=u.emittedLine;n<l.emittedLine;n++)p.sourceMapMappings+=";";t=1}p.sourceMapMappings+=r(l.emittedColumn-t),p.sourceMapMappings+=r(l.sourceIndex-u.sourceIndex),p.sourceMapMappings+=r(l.sourceLine-u.sourceLine),p.sourceMapMappings+=r(l.sourceColumn-u.sourceColumn),l.nameIndex>=0&&(e.Debug.assert(!1,"We do not support name index right now, Make sure to update updateLastEncodedAndRecordedSpans when we start using this"),p.sourceMapMappings+=r(l.nameIndex-d),d=l.nameIndex),u=l,p.sourceMapDecodedMappings.push(u)}}function v(t){if(!m&&!e.positionIsSynthesized(t)){_&&e.performance.mark("beforeSourcemap");var n=e.getLineAndCharacterOfPosition(a,t);n.line++,n.character++;var r=i.getLine(),o=i.getColumn();!l||l.emittedLine!==r||l.emittedColumn!==o||l.sourceIndex===c&&(l.sourceLine>n.line||l.sourceLine===n.line&&l.sourceColumn>n.character)?(y(),l={emittedLine:r,emittedColumn:o,sourceLine:n.line,sourceColumn:n.character,sourceIndex:c}):(l.sourceLine=n.line,l.sourceColumn=n.character,l.sourceIndex=c),_&&(e.performance.mark("afterSourcemap"),e.performance.measure("Source Map","beforeSourcemap","afterSourcemap"))}}function b(t){if(!m){o=(a=t).text;var r=f.sourceRoot?n.getCommonSourceDirectory():s,i=e.getRelativePathToDirectoryOrUrl(r,a.fileName,n.getCurrentDirectory(),n.getCanonicalFileName,!0);-1===(c=e.indexOf(p.sourceMapSources,i))&&(c=p.sourceMapSources.length,p.sourceMapSources.push(i),p.inputSourceFileNames.push(a.fileName),f.inlineSources&&p.sourceMapSourcesContent.push(a.text))}}function x(){if(!m)return y(),JSON.stringify({version:3,file:p.sourceMapFile,sourceRoot:p.sourceMapSourceRoot,sources:p.sourceMapSources,names:p.sourceMapNames,mappings:p.sourceMapMappings,sourcesContent:p.sourceMapSourcesContent})}};function n(e){if(e<64)return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(e);throw TypeError(e+": not a 64 based value")}function r(e){e<0?e=1+(-e<<1):e<<=1;var t="";do{var r=31&e;(e>>=5)>0&&(r|=32),t+=n(r)}while(e>0);return t}}(ts||(ts={})),function(e){e.createCommentWriter=function(t,n){var r,i,a,o,s,c=t.extendedDiagnostics,l=e.getNewLineCharacter(t),u=-1,d=-1,p=-1,f=!1,_=t.removeComments;return{reset:function(){i=void 0,a=void 0,o=void 0,s=void 0},setWriter:function(e){r=e},setSourceFile:function(t){a=(i=t).text,o=e.getLineStarts(i),s=void 0},emitNodeWithComments:function(t,n,r){if(_)return void r(t,n);if(n){f=!1;var i=n.emitNode,a=i&&i.flags,o=i&&i.commentRange||n,s=o.pos,l=o.end;if(s<0&&l<0||s===l)m(t,n,i,a,r);else{c&&e.performance.mark("preEmitNodeWithComment");var g=287!==n.kind,h=s<0||0!=(512&a)||10===n.kind,y=l<0||0!=(1024&a)||10===n.kind;h||v(s,g);var b=u,x=d,S=p;h||(u=s),y||(d=l,227===n.kind&&(p=l)),c&&e.performance.measure("commentTime","preEmitNodeWithComment"),m(t,n,i,a,r),c&&e.performance.mark("postEmitNodeWithComment"),u=b,d=x,p=S,!y&&g&&function(e){C(e,k)}(l),c&&e.performance.measure("commentTime","postEmitNodeWithComment")}}},emitBodyWithDetachedComments:function(t,n,i){c&&e.performance.mark("preEmitBodyWithDetachedComments");var u=n.pos,d=n.end,p=e.getEmitFlags(t),m=_||d<0||0!=(1024&p);u<0||0!=(512&p)||(g=n,(h=e.emitDetachedComments(a,o,r,E,g,l,_))&&(s?s.push(h):s=[h]));var g,h;c&&e.performance.measure("commentTime","preEmitBodyWithDetachedComments");2048&p&&!_?(_=!0,i(t),_=!1):i(t);c&&e.performance.mark("beginEmitBodyWithDetachedCommetns");m||(v(n.end,!0),f&&!r.isAtStartOfLine()&&r.writeLine());c&&e.performance.measure("commentTime","beginEmitBodyWithDetachedCommetns")},emitTrailingCommentsOfPosition:function(t,n){if(_)return;c&&e.performance.mark("beforeEmitTrailingCommentsOfPosition");C(t,n?k:S),c&&e.performance.measure("commentTime","beforeEmitTrailingCommentsOfPosition")},emitLeadingCommentsOfPosition:function(e){if(_||-1===e)return;v(e,!0)}};function m(t,n,r,i,a){var o=r&&r.leadingComments;e.some(o)&&(c&&e.performance.mark("preEmitNodeWithSynthesizedComments"),e.forEach(o,g),c&&e.performance.measure("commentTime","preEmitNodeWithSynthesizedComments")),function(e,t,n,r){2048&n?(_=!0,r(e,t),_=!1):r(e,t)}(t,n,i,a);var s=r&&r.trailingComments;e.some(s)&&(c&&e.performance.mark("postEmitNodeWithSynthesizedComments"),e.forEach(s,h),c&&e.performance.measure("commentTime","postEmitNodeWithSynthesizedComments"))}function g(e){2===e.kind&&r.writeLine(),y(e),e.hasTrailingNewLine||2===e.kind?r.writeLine():r.write(" ")}function h(e){r.isAtStartOfLine()||r.write(" "),y(e),e.hasTrailingNewLine&&r.writeLine()}function y(t){var n=function(e){return 3===e.kind?"/*"+e.text+"*/":"//"+e.text}(t),i=3===t.kind?e.computeLineStarts(n):void 0;e.writeCommentRange(n,i,r,0,n.length,l)}function v(e,t){f=!1,t?T(e,x):0===e&&T(e,b)}function b(t,n,r,i,o){(function(t,n){return e.isRecognizedTripleSlashComment(a,t,n)})(t,n)&&x(t,n,r,i,o)}function x(t,i,s,c,u){f||(e.emitNewLineBeforeLeadingCommentOfPosition(o,r,u,t),f=!0),n&&n(t),e.writeCommentRange(a,o,r,t,i,l),n&&n(i),c?r.writeLine():r.write(" ")}function k(t,i,s,c){r.isAtStartOfLine()||r.write(" "),n&&n(t),e.writeCommentRange(a,o,r,t,i,l),n&&n(i),c&&r.writeLine()}function S(t,i,s,c){n&&n(t),e.writeCommentRange(a,o,r,t,i,l),n&&n(i),c?r.writeLine():r.write(" ")}function T(t,n){-1!==u&&t===u||(function(t){return void 0!==s&&e.lastOrUndefined(s).nodePos===t}(t)?function(t){var n=e.lastOrUndefined(s).detachedCommentEndPos;s.length-1?s.pop():s=void 0;e.forEachLeadingCommentRange(a,n,t,n)}(n):e.forEachLeadingCommentRange(a,t,n,t))}function C(t,n){(-1===d||t!==d&&t!==p)&&e.forEachTrailingCommentRange(a,t,n)}function E(t,r,i,a,o,s){n&&n(a),e.writeCommentRange(t,r,i,a,o,s),n&&n(o)}}}(ts||(ts={})),function(e){function t(t,n,r,i,a,o){var s,c,l,u,d,p,f,_,m,g,h,y,v=266===a.kind?a.sourceFiles:[a],b=266===a.kind,x=t.getNewLine(),k=t.getCompilerOptions();R();var S,T,C,E=!1,D=k.removeComments?e.noop:function(t){if(t){var n=e.getJSDocCommentRanges(t,m);e.emitNewLineBeforeLeadingComments(g,p,t,n),e.emitComments(m,g,p,n,!1,!0,x,e.writeCommentRange)}},A=k.stripInternal?function(t){if(t){var n=e.getLeadingCommentRanges(m,t.pos);if(e.forEach(n,L))return;he(t)}}:he,w=!0,N=[],I="",P=[],O=!1,F=[];return e.forEach(v,(function(n){if(!e.isSourceFileJavaScript(n)){if(k.noResolve||e.forEach(n.referencedFiles,(function(r){var a=e.tryResolveScriptReference(t,n,r);a&&!e.contains(P,a)&&(function(n,r,a){var o,s=!1;n.isDeclarationFile?o=n.fileName:e.forEachEmittedFile(t,c,n,a);o&&(o=e.getRelativePathToDirectoryOrUrl(e.getDirectoryPath(e.normalizeSlashes(i)),o,t.getCurrentDirectory(),t.getCanonicalFileName,!1),I+='/// <reference path="'+o+'" />'+x);return s;function c(t,i){var a=266===i.kind;a&&!r||(e.Debug.assert(!!t.declarationFilePath||e.isSourceFileJavaScript(n),"Declaration file is not present only for javascript files"),o=t.declarationFilePath||t.jsFilePath,s=a)}}(a,!b&&!O,o)&&(O=!0),P.push(a))})),_=!1,b&&e.isExternalModule(n)?e.isExternalModule(n)&&(w=!1,s('declare module "'+e.getResolvedExternalModuleName(t,n)+'" {'),c(),l(),Q(n),u(),s("}"),c()):(w=!0,Q(n)),N.length){var r=p;e.forEach(N,(function(t){if(t.isVisible&&!t.asynchronousOutput){e.Debug.assert(238===t.node.kind),R(),e.Debug.assert(0===t.indent||1===t.indent&&b);for(var n=0;n<t.indent;n++)l();re(t.node),t.asynchronousOutput=p.getText();for(n=0;n<t.indent;n++)u()}})),M(r),F=F.concat(N),N=[]}!b&&e.isExternalModule(n)&&n.moduleAugmentations.length&&!_&&(s("export {};"),c())}})),C&&e.forEachKey(C,(function(e){I+='/// <reference types="'+e+'" />'+x})),{reportedDeclarationError:E,moduleElementDeclarationEmitInfo:F,synchronousDeclarationOutput:p.getText(),referencesOutput:I};function L(t){var n=m.substring(t.pos,t.end);return e.stringContains(n,"@internal")}function R(){var t=e.createTextWriter(x);t.trackSymbol=$,t.reportInaccessibleThisError=z,t.reportPrivateInBaseOfClassExpression=K,t.writeKeyword=t.write,t.writeOperator=t.write,t.writePunctuation=t.write,t.writeSpace=t.write,t.writeStringLiteral=t.writeLiteral,t.writeParameter=t.write,t.writeProperty=t.write,t.writeSymbol=t.write,M(t)}function M(e){p=e,s=e.write,d=e.writeTextOfNode,c=e.writeLine,l=e.increaseIndent,u=e.decreaseIndent}function U(t){var n=p;e.forEach(t,(function(t){var n;226===t.kind?n=t.parent.parent:241===t.kind||242===t.kind||239===t.kind?e.Debug.fail("We should be getting ImportDeclaration instead to write"):n=t;var r=e.forEach(N,(function(e){return e.node===n?e:void 0}));if(!r&&T&&(r=e.forEach(T,(function(e){return e.node===n?e:void 0}))),r)if(238===r.node.kind)r.isVisible=!0;else{R();for(var i=r.indent;i;i--)l();233===n.kind&&(e.Debug.assert(void 0===T),T=[]),Z(n),233===n.kind&&(r.subModuleElementDeclarationEmitInfo=T,T=void 0),r.asynchronousOutput=p.getText()}})),M(n)}function B(t){if(t){C||(C=e.createMap());for(var n=0,r=t;n<r.length;n++){var i=r[n];C.has(i)||C.set(i,i)}}}function j(t){if(0===t.accessibility)t&&t.aliasesToMakeVisible&&U(t.aliasesToMakeVisible);else{E=!0;var n=p.getSymbolAccessibilityDiagnostic(t);n&&(n.typeName?r.add(e.createDiagnosticForNode(t.errorNode||n.errorNode,n.diagnosticMessage,e.getTextOfNodeFromSourceText(m,n.typeName),t.errorSymbolName,t.errorModuleName)):r.add(e.createDiagnosticForNode(t.errorNode||n.errorNode,n.diagnosticMessage,t.errorSymbolName,t.errorModuleName)))}}function $(e,t,r){j(n.isSymbolAccessible(e,t,r,!0)),B(n.getTypeReferenceDirectivesForSymbol(e,r))}function K(t){S&&(E=!0,r.add(e.createDiagnosticForNode(S,e.Diagnostics.Property_0_of_exported_class_expression_may_not_be_private_or_protected,t)))}function z(){S&&(E=!0,r.add(e.createDiagnosticForNode(S,e.Diagnostics.The_inferred_type_of_0_references_an_inaccessible_this_type_A_type_annotation_is_necessary,e.declarationNameToString(S))))}function J(e,t,r){p.getSymbolAccessibilityDiagnostic=r,s(": ");var i=146===e.kind&&(n.isRequiredInitializedParameter(e)||n.isOptionalUninitializedParameterProperty(e));if(t&&!i)W(t);else{S=e.name;var a=16388|(i?8192:0);n.writeTypeOfDeclaration(e,f,a,p),S=void 0}}function q(e){for(var t=0,n=e;t<n.length;t++){var r=n[t];A(r)}}function V(e,t,n,r){for(var i=p.getTextPos(),a=0,o=e;a<o.length;a++){var c=o[a];r&&!r(c)||(i!==p.getTextPos()&&s(t),i=p.getTextPos(),n(c))}}function H(e,t,n){V(e,", ",t,n)}function G(e,t){p.getSymbolAccessibilityDiagnostic=t,W(e)}function W(t){switch(t.kind){case 119:case 136:case 133:case 122:case 134:case 137:case 105:case 139:case 95:case 130:case 169:case 173:return d(m,t);case 201:return r=t,void(e.isEntityNameExpression(r.expression)&&(e.Debug.assert(71===r.expression.kind||179===r.expression.kind),a(r.expression),r.typeArguments&&(s("<"),H(r.typeArguments,W),s(">"))));case 159:return function(e){a(e.typeName),e.typeArguments&&(s("<"),H(e.typeArguments,W),s(">"))}(t);case 162:return function(e){s("typeof "),a(e.exprName)}(t);case 164:return function(e){W(e.elementType),s("[]")}(t);case 165:return function(e){s("["),H(e.elementTypes,W),s("]")}(t);case 166:return function(e){V(e.types," | ",W)}(t);case 167:return function(e){V(e.types," & ",W)}(t);case 168:return function(e){s("("),W(e.type),s(")")}(t);case 170:return function(t){s(e.tokenToString(t.operator)),s(" "),W(t.type)}(t);case 171:return function(e){W(e.objectType),s("["),W(e.indexType),s("]")}(t);case 172:return function(e){var t=f;f=e,s("{"),c(),l(),e.readonlyToken&&s("readonly ");s("["),i(e.typeParameter.name),s(" in "),W(e.typeParameter.constraint),s("]"),e.questionToken&&s("?");s(": "),W(e.type),s(";"),c(),u(),s("}"),f=t}(t);case 160:case 161:return _e(t);case 163:return function(e){s("{"),e.members.length&&(c(),l(),q(e.members),u());s("}")}(t);case 71:case 143:return a(t);case 158:return function(e){d(m,e.parameterName),s(" is "),W(e.type)}(t)}var r;function i(e){if(71===e.kind)d(m,e);else{var t=143===e.kind?e.left:e.expression,n=143===e.kind?e.right:e.name;i(t),s("."),d(m,n)}}function a(e){j(n.isEntityNameVisible(e,237===e.parent.kind?e.parent:f)),B(n.getTypeReferenceDirectivesForEntityName(e)),i(e)}}function Q(t){m=t.text,g=e.getLineStarts(t),h=t.identifiers,y=e.isExternalModule(t),f=t,e.emitDetachedComments(m,g,p,e.writeCommentRange,t,x,!0),q(t.statements)}function Y(e,t,r,i){var a=function(e){if(!h.has(e))return e;for(var t=0;;){var n=e+"_"+ ++t;if(!h.has(n))return n}}(t);return i&&s("declare "),s("const "),s(a),s(": "),p.getSymbolAccessibilityDiagnostic=function(){return r},n.writeTypeOfExpression(e,f,16388,p),s(";"),c(),a}function X(e,t){if(t)Z(e);else if(237===e.kind||265===e.parent.kind&&y){var r=void 0;if(T&&265!==e.parent.kind)T.push({node:e,outputPos:p.getTextPos(),indent:p.getIndent(),isVisible:r});else{if(238===e.kind){var i=e;i.importClause&&(r=i.importClause.name&&n.isDeclarationVisible(i.importClause)||ne(i.importClause.namedBindings))}N.push({node:e,outputPos:p.getTextPos(),indent:p.getIndent(),isVisible:r})}}}function Z(t){switch(t.kind){case 228:return fe(t);case 208:return function(t){if(e.every(t.declarationList&&t.declarationList.declarations,(function(t){return t.name&&e.isEmptyBindingPattern(t.name)})))return;D(t),ee(t),e.isLet(t.declarationList)?s("let "):e.isConst(t.declarationList)?s("const "):s("var ");H(t.declarationList.declarations,de,n.isDeclarationVisible),s(";"),c()}(t);case 230:return function(t){D(t),ee(t),s("interface "),d(m,t.name);var n=f;f=t,ce(t.typeParameters);var r=e.filter(e.getInterfaceBaseTypeNodes(t),(function(t){return e.isEntityNameExpression(t.expression)}));r&&r.length&&le(r,!1);s(" {"),c(),l(),q(t.members),u(),s("}"),c(),f=n}(t);case 229:return function(t){function n(t){t&&e.forEach(t.parameters,(function(t){e.hasModifier(t,92)&&ue(t)}))}var r=f;f=t;var i,a=e.getClassExtendsHeritageClauseElement(t);a&&!e.isEntityNameExpression(a.expression)&&(i=95===a.expression.kind?"null":Y(a.expression,t.name.escapedText+"_base",{diagnosticMessage:e.Diagnostics.extends_clause_of_exported_class_0_has_or_is_using_private_name_1,errorNode:a,typeName:t.name},!e.findAncestor(t,(function(e){return 233===e.kind}))));D(t),ee(t),e.hasModifier(t,128)&&s("abstract ");s("class "),d(m,t.name),ce(t.typeParameters),a&&(e.isEntityNameExpression(a.expression)?le([a],!1):(s(" extends "),s(i),a.typeArguments&&(s("<"),H(a.typeArguments,W),s(">"))));le(e.getClassImplementsHeritageClauseElements(t),!0),s(" {"),c(),l(),n(e.getFirstConstructorWithBody(t)),q(t.members),u(),s("}"),c(),f=r}(t);case 231:return function(t){var n=f;function r(){return{diagnosticMessage:e.Diagnostics.Exported_type_alias_0_has_or_is_using_private_name_1,errorNode:t.type,typeName:t.name}}f=t,D(t),ee(t),s("type "),d(m,t.name),ce(t.typeParameters),s(" = "),G(t.type,r),s(";"),c(),f=n}(t);case 232:return function(t){D(t),ee(t),e.isConst(t)&&s("const ");s("enum "),d(m,t.name),s(" {"),c(),l(),q(t.members),u(),s("}"),c()}(t);case 233:return function(t){D(t),ee(t),e.isGlobalScopeAugmentation(t)?s("global "):(16&t.flags?s("namespace "):s("module "),e.isExternalModuleAugmentation(t)?ie(t):d(m,t.name));for(;t.body&&234!==t.body.kind;)t=t.body,s("."),d(m,t.name);var n=f;t.body?(f=t,s(" {"),c(),l(),q(t.body.statements),u(),s("}"),c(),f=n):s(";")}(t);case 237:return function(t){D(t),e.hasModifier(t,1)&&s("export ");s("import "),d(m,t.name),s(" = "),e.isInternalModuleImportEqualsDeclaration(t)?(G(t.moduleReference,n),s(";")):(s("require("),ie(t),s(");"));function n(){return{diagnosticMessage:e.Diagnostics.Import_declaration_0_is_using_private_name_1,errorNode:t,typeName:t.name}}p.writeLine()}(t);case 238:return re(t);default:e.Debug.fail("Unknown symbol kind")}}function ee(t){if(265===t.parent.kind){var n=e.getModifierFlags(t);1&n&&s("export "),512&n?s("default "):230!==t.kind&&w&&s("declare ")}}function te(e){8&e?s("private "):16&e&&s("protected "),32&e&&s("static "),64&e&&s("readonly "),128&e&&s("abstract ")}function ne(t){if(t)return 240===t.kind?n.isDeclarationVisible(t):e.forEach(t.elements,(function(e){return n.isDeclarationVisible(e)}))}function re(t){if(D(t),e.hasModifier(t,1)&&s("export "),s("import "),t.importClause){var r=p.getTextPos();t.importClause.name&&n.isDeclarationVisible(t.importClause)&&d(m,t.importClause.name),t.importClause.namedBindings&&ne(t.importClause.namedBindings)&&(r!==p.getTextPos()&&s(", "),240===t.importClause.namedBindings.kind?(s("* as "),d(m,t.importClause.namedBindings.name)):(s("{ "),H(t.importClause.namedBindings.elements,ae,n.isDeclarationVisible),s(" }"))),s(" from ")}ie(t),s(";"),p.writeLine()}function ie(r){var i;if(_=_||233!==r.kind,237===r.kind){var a=r;i=e.getExternalModuleImportEqualsDeclarationExpression(a)}else if(233===r.kind)i=r.name;else{i=(a=r).moduleSpecifier}if(9===i.kind&&b&&(k.out||k.outFile)){var o=e.getExternalModuleNameFromDeclaration(t,n,r);if(o)return s('"'),s(o),void s('"')}d(m,i)}function ae(e){e.propertyName&&(d(m,e.propertyName),s(" as ")),d(m,e.name)}function oe(e){ae(e),U(n.collectLinkedAliases(e.propertyName||e.name))}function se(t){return 151===t.parent.kind&&e.hasModifier(t.parent,8)}function ce(t){t&&(s("<"),H(t,(function(t){function n(){var n;switch(t.parent.kind){case 229:n=e.Diagnostics.Type_parameter_0_of_exported_class_has_or_is_using_private_name_1;break;case 230:n=e.Diagnostics.Type_parameter_0_of_exported_interface_has_or_is_using_private_name_1;break;case 156:n=e.Diagnostics.Type_parameter_0_of_constructor_signature_from_exported_interface_has_or_is_using_private_name_1;break;case 155:n=e.Diagnostics.Type_parameter_0_of_call_signature_from_exported_interface_has_or_is_using_private_name_1;break;case 151:case 150:n=e.hasModifier(t.parent,32)?e.Diagnostics.Type_parameter_0_of_public_static_method_from_exported_class_has_or_is_using_private_name_1:229===t.parent.parent.kind?e.Diagnostics.Type_parameter_0_of_public_method_from_exported_class_has_or_is_using_private_name_1:e.Diagnostics.Type_parameter_0_of_method_from_exported_interface_has_or_is_using_private_name_1;break;case 228:n=e.Diagnostics.Type_parameter_0_of_exported_function_has_or_is_using_private_name_1;break;case 231:n=e.Diagnostics.Type_parameter_0_of_exported_type_alias_has_or_is_using_private_name_1;break;default:e.Debug.fail("This is unknown parent for type parameter: "+t.parent.kind)}return{diagnosticMessage:n,errorNode:t,typeName:t.name}}l(),D(t),u(),d(m,t.name),t.constraint&&!se(t)&&(s(" extends "),160===t.parent.kind||161===t.parent.kind||t.parent.parent&&163===t.parent.parent.kind?(e.Debug.assert(151===t.parent.kind||150===t.parent.kind||160===t.parent.kind||161===t.parent.kind||155===t.parent.kind||156===t.parent.kind),W(t.constraint)):G(t.constraint,n)),t.default&&!se(t)&&(s(" = "),160===t.parent.kind||161===t.parent.kind||t.parent.parent&&163===t.parent.parent.kind?(e.Debug.assert(151===t.parent.kind||150===t.parent.kind||160===t.parent.kind||161===t.parent.kind||155===t.parent.kind||156===t.parent.kind),W(t.default)):G(t.default,n))})),s(">"))}function le(t,n){t&&(s(n?" implements ":" extends "),H(t,(function(t){e.isEntityNameExpression(t.expression)?G(t,r):n||95!==t.expression.kind||s("null");function r(){return{diagnosticMessage:229===t.parent.parent.kind?n?e.Diagnostics.Implements_clause_of_exported_class_0_has_or_is_using_private_name_1:e.Diagnostics.extends_clause_of_exported_class_0_has_or_is_using_private_name_1:e.Diagnostics.extends_clause_of_exported_interface_0_has_or_is_using_private_name_1,errorNode:t,typeName:e.getNameOfDeclaration(t.parent.parent)}}})))}function ue(t){e.hasDynamicName(t)||(D(t),te(e.getModifierFlags(t)),de(t),s(";"),c())}function de(t){function r(n){return 226===t.kind?n.errorModuleName?2===n.accessibility?e.Diagnostics.Exported_variable_0_has_or_is_using_name_1_from_external_module_2_but_cannot_be_named:e.Diagnostics.Exported_variable_0_has_or_is_using_name_1_from_private_module_2:e.Diagnostics.Exported_variable_0_has_or_is_using_private_name_1:149===t.kind||148===t.kind||146===t.kind&&e.hasModifier(t.parent,8)?e.hasModifier(t,32)?n.errorModuleName?2===n.accessibility?e.Diagnostics.Public_static_property_0_of_exported_class_has_or_is_using_name_1_from_external_module_2_but_cannot_be_named:e.Diagnostics.Public_static_property_0_of_exported_class_has_or_is_using_name_1_from_private_module_2:e.Diagnostics.Public_static_property_0_of_exported_class_has_or_is_using_private_name_1:229===t.parent.kind||146===t.kind?n.errorModuleName?2===n.accessibility?e.Diagnostics.Public_property_0_of_exported_class_has_or_is_using_name_1_from_external_module_2_but_cannot_be_named:e.Diagnostics.Public_property_0_of_exported_class_has_or_is_using_name_1_from_private_module_2:e.Diagnostics.Public_property_0_of_exported_class_has_or_is_using_private_name_1:n.errorModuleName?e.Diagnostics.Property_0_of_exported_interface_has_or_is_using_name_1_from_private_module_2:e.Diagnostics.Property_0_of_exported_interface_has_or_is_using_private_name_1:void 0}function i(e){for(var t=[],n=0,r=e.elements;n<r.length;n++){var i=r[n];200!==i.kind&&t.push(i)}H(t,a)}function a(t){t.name&&(e.isBindingPattern(t.name)?i(t.name):(d(m,t.name),J(t,void 0,(function(e){var n=r(e);return void 0!==n?{diagnosticMessage:n,errorNode:t,typeName:t.name}:void 0}))))}(226!==t.kind||n.isDeclarationVisible(t))&&(e.isBindingPattern(t.name)?i(t.name):(d(m,t.name),(149===t.kind||148===t.kind||146===t.kind&&!e.isParameterPropertyDeclaration(t))&&e.hasQuestionToken(t)&&s("?"),149!==t.kind&&148!==t.kind||163!==t.parent.kind?n.isLiteralConstDeclaration(t)?(s(" = "),n.writeLiteralConstValue(t,p)):e.hasModifier(t,8)||J(t,t.type,(function(e){var n=r(e);return void 0!==n?{diagnosticMessage:n,errorNode:t,typeName:t.name}:void 0})):pe(t)))}function pe(e){e.type&&(s(": "),W(e.type))}function fe(t){e.hasDynamicName(t)||n.isImplementationOfOverload(t)||(D(t),228===t.kind?ee(t):151!==t.kind&&152!==t.kind||te(e.getModifierFlags(t)),228===t.kind?(s("function "),d(m,t.name)):152===t.kind?s("constructor"):(d(m,t.name),e.hasQuestionToken(t)&&s("?")),me(t))}function _e(e){D(e),me(e)}function me(t){var r=f;f=t;var i=!1;if(157===t.kind)te(e.getModifierFlags(t)),s("[");else{if(152===t.kind&&e.hasModifier(t,8))return s("();"),void c();if(156===t.kind||161===t.kind)s("new ");else if(160===t.kind){var a=p.getText();t.typeParameters&&"<"===a.charAt(a.length-1)&&(i=!0,s("("))}ce(t.typeParameters),s("(")}H(t.parameters,ge),157===t.kind?s("]"):s(")");var o,l,u=160===t.kind||161===t.kind;u||163===t.parent.kind?t.type&&(s(u?" => ":": "),W(t.type)):152===t.kind||e.hasModifier(t,8)||(o=t,l=function(n){var r;switch(t.kind){case 156:r=n.errorModuleName?e.Diagnostics.Return_type_of_constructor_signature_from_exported_interface_has_or_is_using_name_0_from_private_module_1:e.Diagnostics.Return_type_of_constructor_signature_from_exported_interface_has_or_is_using_private_name_0;break;case 155:r=n.errorModuleName?e.Diagnostics.Return_type_of_call_signature_from_exported_interface_has_or_is_using_name_0_from_private_module_1:e.Diagnostics.Return_type_of_call_signature_from_exported_interface_has_or_is_using_private_name_0;break;case 157:r=n.errorModuleName?e.Diagnostics.Return_type_of_index_signature_from_exported_interface_has_or_is_using_name_0_from_private_module_1:e.Diagnostics.Return_type_of_index_signature_from_exported_interface_has_or_is_using_private_name_0;break;case 151:case 150:r=e.hasModifier(t,32)?n.errorModuleName?2===n.accessibility?e.Diagnostics.Return_type_of_public_static_method_from_exported_class_has_or_is_using_name_0_from_external_module_1_but_cannot_be_named:e.Diagnostics.Return_type_of_public_static_method_from_exported_class_has_or_is_using_name_0_from_private_module_1:e.Diagnostics.Return_type_of_public_static_method_from_exported_class_has_or_is_using_private_name_0:229===t.parent.kind?n.errorModuleName?2===n.accessibility?e.Diagnostics.Return_type_of_public_method_from_exported_class_has_or_is_using_name_0_from_external_module_1_but_cannot_be_named:e.Diagnostics.Return_type_of_public_method_from_exported_class_has_or_is_using_name_0_from_private_module_1:e.Diagnostics.Return_type_of_public_method_from_exported_class_has_or_is_using_private_name_0:n.errorModuleName?e.Diagnostics.Return_type_of_method_from_exported_interface_has_or_is_using_name_0_from_private_module_1:e.Diagnostics.Return_type_of_method_from_exported_interface_has_or_is_using_private_name_0;break;case 228:r=n.errorModuleName?2===n.accessibility?e.Diagnostics.Return_type_of_exported_function_has_or_is_using_name_0_from_external_module_1_but_cannot_be_named:e.Diagnostics.Return_type_of_exported_function_has_or_is_using_name_0_from_private_module_1:e.Diagnostics.Return_type_of_exported_function_has_or_is_using_private_name_0;break;default:e.Debug.fail("This is unknown kind for signature: "+t.kind)}return{diagnosticMessage:r,errorNode:t.name||t}},p.getSymbolAccessibilityDiagnostic=l,s(": "),o.type?W(o.type):(S=o.name,n.writeReturnTypeOfSignatureDeclaration(o,f,16388,p),S=void 0)),f=r,u?i&&s(")"):(s(";"),c())}function ge(t){function r(e){if(174===e.kind)s("{"),H(e.elements,i),s("}");else if(175===e.kind){s("[");var t=e.elements;H(t,i),t&&t.hasTrailingComma&&s(", "),s("]")}}function i(t){200===t.kind?s(" "):176===t.kind&&(t.propertyName&&(d(m,t.propertyName),s(": ")),t.name&&(e.isBindingPattern(t.name)?r(t.name):(e.Debug.assert(71===t.name.kind),t.dotDotDotToken&&s("..."),d(m,t.name))))}l(),D(t),t.dotDotDotToken&&s("..."),e.isBindingPattern(t.name)?r(t.name):d(m,t.name),n.isOptionalParameter(t)&&s("?"),u(),160===t.parent.kind||161===t.parent.kind||163===t.parent.parent.kind?pe(t):e.hasModifier(t.parent,8)||J(t,t.type,(function(n){var r=function(n){switch(t.parent.kind){case 152:return n.errorModuleName?2===n.accessibility?e.Diagnostics.Parameter_0_of_constructor_from_exported_class_has_or_is_using_name_1_from_external_module_2_but_cannot_be_named:e.Diagnostics.Parameter_0_of_constructor_from_exported_class_has_or_is_using_name_1_from_private_module_2:e.Diagnostics.Parameter_0_of_constructor_from_exported_class_has_or_is_using_private_name_1;case 156:return n.errorModuleName?e.Diagnostics.Parameter_0_of_constructor_signature_from_exported_interface_has_or_is_using_name_1_from_private_module_2:e.Diagnostics.Parameter_0_of_constructor_signature_from_exported_interface_has_or_is_using_private_name_1;case 155:return n.errorModuleName?e.Diagnostics.Parameter_0_of_call_signature_from_exported_interface_has_or_is_using_name_1_from_private_module_2:e.Diagnostics.Parameter_0_of_call_signature_from_exported_interface_has_or_is_using_private_name_1;case 157:return n.errorModuleName?e.Diagnostics.Parameter_0_of_index_signature_from_exported_interface_has_or_is_using_name_1_from_private_module_2:e.Diagnostics.Parameter_0_of_index_signature_from_exported_interface_has_or_is_using_private_name_1;case 151:case 150:return e.hasModifier(t.parent,32)?n.errorModuleName?2===n.accessibility?e.Diagnostics.Parameter_0_of_public_static_method_from_exported_class_has_or_is_using_name_1_from_external_module_2_but_cannot_be_named:e.Diagnostics.Parameter_0_of_public_static_method_from_exported_class_has_or_is_using_name_1_from_private_module_2:e.Diagnostics.Parameter_0_of_public_static_method_from_exported_class_has_or_is_using_private_name_1:229===t.parent.parent.kind?n.errorModuleName?2===n.accessibility?e.Diagnostics.Parameter_0_of_public_method_from_exported_class_has_or_is_using_name_1_from_external_module_2_but_cannot_be_named:e.Diagnostics.Parameter_0_of_public_method_from_exported_class_has_or_is_using_name_1_from_private_module_2:e.Diagnostics.Parameter_0_of_public_method_from_exported_class_has_or_is_using_private_name_1:n.errorModuleName?e.Diagnostics.Parameter_0_of_method_from_exported_interface_has_or_is_using_name_1_from_private_module_2:e.Diagnostics.Parameter_0_of_method_from_exported_interface_has_or_is_using_private_name_1;case 228:return n.errorModuleName?2===n.accessibility?e.Diagnostics.Parameter_0_of_exported_function_has_or_is_using_name_1_from_external_module_2_but_cannot_be_named:e.Diagnostics.Parameter_0_of_exported_function_has_or_is_using_name_1_from_private_module_2:e.Diagnostics.Parameter_0_of_exported_function_has_or_is_using_private_name_1;default:e.Debug.fail("This is unknown parent for parameter: "+t.parent.kind)}}(n);return void 0!==r?{diagnosticMessage:r,errorNode:t,typeName:t.name}:void 0}))}function he(t){switch(t.kind){case 228:case 233:case 237:case 230:case 229:case 231:case 232:return X(t,function(e){return n.isDeclarationVisible(e)}(t));case 208:return X(t,function(t){return e.forEach(t.declarationList.declarations,(function(e){return n.isDeclarationVisible(e)}))}(t));case 238:return X(t,!t.importClause);case 244:return function(e){D(e),s("export "),e.exportClause?(s("{ "),H(e.exportClause.elements,oe),s(" }")):s("*"),e.moduleSpecifier&&(s(" from "),ie(e)),s(";"),p.writeLine()}(t);case 152:case 151:case 150:return fe(t);case 156:case 155:case 157:return _e(t);case 153:case 154:return function(t){if(!e.hasDynamicName(t)){var n,r=e.getAllAccessorDeclarations(t.parent.members,t);if(t===r.firstAccessor){if(D(r.getAccessor),D(r.setAccessor),te(e.getModifierFlags(t)|(r.setAccessor?0:64)),d(m,t.name),!e.hasModifier(t,8)){n=t;var i=o(t);if(!i){var a=153===t.kind?r.setAccessor:r.getAccessor;(i=o(a))&&(n=a)}J(t,i,(function(t){return 154===n.kind?{diagnosticMessage:e.hasModifier(n.parent,32)?t.errorModuleName?e.Diagnostics.Parameter_0_of_public_static_property_setter_from_exported_class_has_or_is_using_name_1_from_private_module_2:e.Diagnostics.Parameter_0_of_public_static_property_setter_from_exported_class_has_or_is_using_private_name_1:t.errorModuleName?e.Diagnostics.Parameter_0_of_public_property_setter_from_exported_class_has_or_is_using_name_1_from_private_module_2:e.Diagnostics.Parameter_0_of_public_property_setter_from_exported_class_has_or_is_using_private_name_1,errorNode:n.parameters[0],typeName:n.name}:{diagnosticMessage:e.hasModifier(n,32)?t.errorModuleName?2===t.accessibility?e.Diagnostics.Return_type_of_public_static_property_getter_from_exported_class_has_or_is_using_name_0_from_external_module_1_but_cannot_be_named:e.Diagnostics.Return_type_of_public_static_property_getter_from_exported_class_has_or_is_using_name_0_from_private_module_1:e.Diagnostics.Return_type_of_public_static_property_getter_from_exported_class_has_or_is_using_private_name_0:t.errorModuleName?2===t.accessibility?e.Diagnostics.Return_type_of_public_property_getter_from_exported_class_has_or_is_using_name_0_from_external_module_1_but_cannot_be_named:e.Diagnostics.Return_type_of_public_property_getter_from_exported_class_has_or_is_using_name_0_from_private_module_1:e.Diagnostics.Return_type_of_public_property_getter_from_exported_class_has_or_is_using_private_name_0,errorNode:n.name,typeName:void 0}}))}s(";"),c()}}function o(e){if(e)return 153===e.kind?e.type:e.parameters.length>0?e.parameters[0].type:void 0}}(t);case 149:case 148:return ue(t);case 264:return function(t){D(t),d(m,t.name);var r=n.getConstantValue(t);void 0!==r&&(s(" = "),s(e.getTextOfConstantValue(r))),s(","),c()}(t);case 243:return function(t){if(71===t.expression.kind)s(t.isExportEquals?"export = ":"export default "),d(m,t.expression);else{var r=Y(t.expression,"_default",{diagnosticMessage:e.Diagnostics.Default_export_of_the_module_has_or_is_using_private_name_0,errorNode:t},w);s(t.isExportEquals?"export = ":"export default "),s(r)}s(";"),c(),71===t.expression.kind&&U(n.collectLinkedAliases(t.expression))}(t);case 265:return Q(t)}}}e.getDeclarationDiagnostics=function(n,r,i){var a=e.createDiagnosticCollection();return e.forEachEmittedFile(n,(function(e,i){var o=e.declarationFilePath;t(n,r,a,o,i,!1)}),i),a.getDiagnostics(i?i.fileName:void 0)},e.writeDeclarationFile=function(n,r,i,a,o,s){var c=t(i,a,o,n,r,s),l=c.reportedDeclarationError||i.isEmitBlocked(n)||i.getCompilerOptions().noEmit;if(!l){var u=266===r.kind?r.sourceFiles:[r],d=c.referencesOutput+function t(n,r){var i=0,a="";return e.forEach(r,(function(e){e.asynchronousOutput&&(a+=n.substring(i,e.outputPos),a+=t(e.asynchronousOutput,e.subModuleElementDeclarationEmitInfo),i=e.outputPos)})),a+=n.substring(i)}(c.synchronousDeclarationOutput,c.moduleElementDeclarationEmitInfo);e.writeFile(i,o,n,d,i.getCompilerOptions().emitBOM,u)}return l}}(ts||(ts={})),function(e){var t,n,r=function(){var e=[];return e[0]="",e[16]=",",e[4]=" |",e[8]=" &",e}(),i=function(){var e=[];return e[512]=["{","}"],e[1024]=["(",")"],e[2048]=["<",">"],e[4096]=["[","]"],e}();function a(t,n,r,i){var a=e.isArray(r)?r:e.getSourceFilesToEmit(t,r),c=t.getCompilerOptions();if(c.outFile||c.out)a.length&&n({jsFilePath:d=c.outFile||c.out,sourceMapFilePath:o(d,c),declarationFilePath:c.declaration?e.removeFileExtension(d)+".d.ts":""},e.createBundle(a),i);else for(var l=0,u=a;l<u.length;l++){var d,p=u[l];n({jsFilePath:d=e.getOwnEmitOutputFilePath(p,t,s(p,c)),sourceMapFilePath:o(d,c),declarationFilePath:e.isSourceFileJavaScript(p)||!i&&!c.declaration?void 0:e.getDeclarationEmitOutputFilePath(p,t)},p,i)}}function o(e,t){return t.sourceMap?e+".map":void 0}function s(t,n){if(1===n.jsx)if(e.isSourceFileJavaScript(t)){if(e.fileExtensionIs(t.fileName,".jsx"))return".jsx"}else if(1===t.languageVariant)return".jsx";return".js"}function c(t,n){void 0===t&&(t={}),void 0===n&&(n={});var a,o,s,c,l,u,d,p,f=n.hasGlobalName,_=n.onEmitSourceMapOfNode,m=n.onEmitSourceMapOfToken,g=n.onEmitSourceMapOfPosition,h=n.onEmitNode,y=n.onEmitHelpers,v=n.onSetSourceFile,b=n.substituteNode,x=n.onBeforeEmitNodeArray,k=n.onAfterEmitNodeArray,S=n.onBeforeEmitToken,T=n.onAfterEmitToken,C=e.getNewLineCharacter(t),E=e.createCommentWriter(t,g),D=E.emitNodeWithComments,A=E.emitBodyWithDetachedComments,w=E.emitTrailingCommentsOfPosition,N=E.emitLeadingCommentsOfPosition;return $(),{printNode:function(t,n,r){switch(t){case 0:e.Debug.assert(e.isSourceFile(n),"Expected a SourceFile node.");break;case 2:e.Debug.assert(e.isIdentifier(n),"Expected an Identifier node.");break;case 1:e.Debug.assert(e.isExpression(n),"Expected an Expression node.")}switch(n.kind){case 265:return P(n);case 266:return I(n)}return O(t,n,r,R()),M()},printFile:P,printBundle:I,writeNode:O,writeFile:L,writeBundle:F};function I(e){return F(e,R()),M()}function P(e){return L(e,R()),M()}function O(e,t,n,r){var i=d;j(r),U(e,t,n),$(),d=i}function F(e,t){var n=d;j(t),ve(e),ye(e),X(e);for(var r=0,i=e.sourceFiles;r<i.length;r++){var a=i[r];U(0,a,a)}$(),d=n}function L(e,t){var n=d;j(t),ve(e),ye(e),U(0,e,e),$(),d=n}function R(){return p||(p=e.createTextWriter(C))}function M(){var e=p.getText();return p.reset(),e}function U(e,t,n){n&&B(n),V(e,t)}function B(e){a=e,E.setSourceFile(e),v&&v(e)}function j(e){d=e,E.setWriter(e)}function $(){o=[],s=[],c=e.createMap(),l=[],u=0,E.reset(),j(void 0)}function K(e){e&&z(e)}function z(e){V(4,e)}function J(e){V(2,e)}function q(e){V(1,e)}function V(e,t){h?h(e,t,H):H(e,t)}function H(e,t){t=Y(e,t),D&&0!==e?D(e,t,G):G(e,t)}function G(e,t){_&&0!==e&&2!==e?_(e,t,W):W(e,t)}function W(t,n){switch(t){case 0:return function(t){e.Debug.assertNode(t,e.isSourceFile),function(t){Le();var n=t.statements;if(A){if(0===n.length||!e.isPrologueDirective(n[0])||e.nodeIsSynthesized(n[0]))return void A(t,n,ge)}ge(t)}(t)}(n);case 2:return function(t){e.Debug.assertNode(t,e.isIdentifier),ee(t)}(n);case 1:return Q(n);case 3:return function(e){z(e.name),Fe(" in "),z(e.constraint)}(e.cast(n,e.isTypeParameterDeclaration));case 4:return function(t){var n=t.kind;if(e.isKeyword(n))return void Be(t);switch(n){case 14:case 15:case 16:return Z(t);case 71:return ee(t);case 143:return function(e){(function(e){71===e.kind?q(e):z(e)})(e.left),Fe("."),z(e.right)}(t);case 144:return function(e){Fe("["),q(e.expression),Fe("]")}(t);case 145:return function(e){z(e.name),xe(" extends ",e.constraint),xe(" = ",e.default)}(t);case 146:return function(e){Ee(e,e.decorators),be(e,e.modifiers),K(e.dotDotDotToken),e.name&&z(e.name);K(e.questionToken),e.parent&&273===e.parent.kind&&!e.name?z(e.type):xe(": ",e.type);ke(" = ",e.initializer)}(t);case 147:return r=t,Fe("@"),void q(r.expression);case 148:return function(e){Ee(e,e.decorators),be(e,e.modifiers),z(e.name),K(e.questionToken),xe(": ",e.type),Fe(";")}(t);case 149:return function(e){Ee(e,e.decorators),be(e,e.modifiers),z(e.name),K(e.questionToken),xe(": ",e.type),ke(" = ",e.initializer),Fe(";")}(t);case 150:return function(e){Ee(e,e.decorators),be(e,e.modifiers),z(e.name),K(e.questionToken),Ae(e,e.typeParameters),we(e,e.parameters),xe(": ",e.type),Fe(";")}(t);case 151:return function(e){Ee(e,e.decorators),be(e,e.modifiers),K(e.asteriskToken),z(e.name),K(e.questionToken),oe(e,se)}(t);case 152:return function(e){be(e,e.modifiers),Fe("constructor"),oe(e,se)}(t);case 153:case 154:return function(e){Ee(e,e.decorators),be(e,e.modifiers),Fe(153===e.kind?"get ":"set "),z(e.name),oe(e,se)}(t);case 155:return function(e){Ee(e,e.decorators),be(e,e.modifiers),Ae(e,e.typeParameters),we(e,e.parameters),xe(": ",e.type),Fe(";")}(t);case 156:return function(e){Ee(e,e.decorators),be(e,e.modifiers),Fe("new "),Ae(e,e.typeParameters),we(e,e.parameters),xe(": ",e.type),Fe(";")}(t);case 157:return function(e){Ee(e,e.decorators),be(e,e.modifiers),t=e,n=e.parameters,Ie(t,n,4432),xe(": ",e.type),Fe(";");var t,n}(t);case 158:return function(e){z(e.parameterName),Fe(" is "),z(e.type)}(t);case 159:return function(e){z(e.typeName),De(e,e.typeArguments)}(t);case 160:return function(e){Ae(e,e.typeParameters),Ne(e,e.parameters),Fe(" => "),z(e.type)}(t);case 273:return function(e){Fe("function"),we(e,e.parameters),Fe(":"),z(e.type)}(t);case 161:return function(e){Fe("new "),Ae(e,e.typeParameters),we(e,e.parameters),Fe(" => "),z(e.type)}(t);case 162:return function(e){Fe("typeof "),z(e.exprName)}(t);case 163:return function(t){Fe("{");var n=1&e.getEmitFlags(t)?448:65;Ie(t,t.members,262144|n),Fe("}")}(t);case 164:return function(e){z(e.elementType),Fe("[]")}(t);case 165:return function(e){Fe("["),Ie(e,e.elementTypes,336),Fe("]")}(t);case 166:return function(e){Ie(e,e.types,260)}(t);case 167:return function(e){Ie(e,e.types,264)}(t);case 168:return function(e){Fe("("),z(e.type),Fe(")")}(t);case 201:return function(e){q(e.expression),De(e,e.typeArguments)}(t);case 169:return void Fe("this");case 170:return function(e){je(e.operator),Fe(" "),z(e.type)}(t);case 171:return function(e){z(e.objectType),Fe("["),z(e.indexType),Fe("]")}(t);case 172:return function(t){var n=e.getEmitFlags(t);Fe("{"),1&n?Fe(" "):(Le(),Re());t.readonlyToken&&(z(t.readonlyToken),Fe(" "));Fe("["),V(3,t.typeParameter),Fe("]"),K(t.questionToken),Fe(": "),z(t.type),Fe(";"),1&n?Fe(" "):(Le(),Me());Fe("}")}(t);case 173:return function(e){q(e.literal)}(t);case 268:return void Fe("*");case 269:return void Fe("?");case 270:return function(e){Fe("?"),z(e.type)}(t);case 271:return function(e){Fe("!"),z(e.type)}(t);case 272:return function(e){z(e.type),Fe("=")}(t);case 274:return function(e){Fe("..."),z(e.type)}(t);case 174:return function(e){var t=e.elements;0===t.length?Fe("{}"):(Fe("{"),Ie(e,t,432),Fe("}"))}(t);case 175:return function(e){0===e.elements.length?Fe("[]"):(Fe("["),Ie(e,e.elements,304),Fe("]"))}(t);case 176:return function(e){Te(e.propertyName,": "),K(e.dotDotDotToken),z(e.name),ke(" = ",e.initializer)}(t);case 205:return function(e){q(e.expression),z(e.literal)}(t);case 206:return void Fe(";");case 207:return function(e){Ue(17,e.pos,e),ne(e,!e.multiLine&&Qe(e)),Re(),N(e.statements.end),Me(),Ue(18,e.statements.end,e)}(t);case 208:return function(e){be(e,e.modifiers),z(e.declarationList),Fe(";")}(t);case 209:return void Fe(";");case 210:return function(e){q(e.expression),Fe(";")}(t);case 211:return function(e){var t=Ue(90,e.pos,e);Fe(" "),Ue(19,t,e),q(e.expression),Ue(20,e.expression.end,e),Ce(e,e.thenStatement),e.elseStatement&&($e(e),Ue(82,e.thenStatement.end,e),211===e.elseStatement.kind?(Fe(" "),z(e.elseStatement)):Ce(e,e.elseStatement))}(t);case 212:return function(t){Fe("do"),Ce(t,t.statement),e.isBlock(t.statement)?Fe(" "):$e(t);Fe("while ("),q(t.expression),Fe(");")}(t);case 213:return function(e){Fe("while ("),q(e.expression),Fe(")"),Ce(e,e.statement)}(t);case 214:return function(e){var t=Ue(88,e.pos);Fe(" "),Ue(19,t,e),re(e.initializer),Fe(";"),ke(" ",e.condition),Fe(";"),ke(" ",e.incrementor),Fe(")"),Ce(e,e.statement)}(t);case 215:return function(e){var t=Ue(88,e.pos);Fe(" "),Ue(19,t),re(e.initializer),Fe(" in "),q(e.expression),Ue(20,e.expression.end),Ce(e,e.statement)}(t);case 216:return function(e){var t=Ue(88,e.pos);Fe(" "),Te(e.awaitModifier," "),Ue(19,t),re(e.initializer),Fe(" of "),q(e.expression),Ue(20,e.expression.end),Ce(e,e.statement)}(t);case 217:return function(e){Ue(77,e.pos),xe(" ",e.label),Fe(";")}(t);case 218:return function(e){Ue(72,e.pos),xe(" ",e.label),Fe(";")}(t);case 219:return function(t){(function(t,n,r){var i=r&&e.getParseTreeNode(r);i&&i.kind===r.kind&&(n=e.skipTrivia(a.text,n));n=Ue(t,n,r),i&&i.kind===r.kind&&w(n,!0)})(96,t.pos,t),ke(" ",t.expression),Fe(";")}(t);case 220:return function(e){Fe("with ("),q(e.expression),Fe(")"),Ce(e,e.statement)}(t);case 221:return function(e){var t=Ue(98,e.pos);Fe(" "),Ue(19,t),q(e.expression),Ue(20,e.expression.end),Fe(" "),z(e.caseBlock)}(t);case 222:return function(e){z(e.label),Fe(": "),z(e.statement)}(t);case 223:return function(e){Fe("throw"),ke(" ",e.expression),Fe(";")}(t);case 224:return function(e){Fe("try "),z(e.tryBlock),e.catchClause&&($e(e),z(e.catchClause));e.finallyBlock&&($e(e),Fe("finally "),z(e.finallyBlock))}(t);case 225:return function(e){Ue(78,e.pos),Fe(";")}(t);case 226:return function(e){z(e.name),xe(": ",e.type),ke(" = ",e.initializer)}(t);case 227:return function(t){Fe(e.isLet(t)?"let ":e.isConst(t)?"const ":"var "),Ie(t,t.declarations,272)}(t);case 228:return function(e){ie(e)}(t);case 229:return function(e){de(e)}(t);case 230:return function(e){Ee(e,e.decorators),be(e,e.modifiers),Fe("interface "),z(e.name),Ae(e,e.typeParameters),Ie(e,e.heritageClauses,256),Fe(" {"),Ie(e,e.members,65),Fe("}")}(t);case 231:return function(e){Ee(e,e.decorators),be(e,e.modifiers),Fe("type "),z(e.name),Ae(e,e.typeParameters),Fe(" = "),z(e.type),Fe(";")}(t);case 232:return function(e){be(e,e.modifiers),Fe("enum "),z(e.name),et(),Fe(" {"),Ie(e,e.members,81),Fe("}"),tt()}(t);case 233:return function(e){be(e,e.modifiers),512&~e.flags&&Fe(16&e.flags?"namespace ":"module ");z(e.name);var t=e.body;for(;233===t.kind;)Fe("."),z(t.name),t=t.body;Fe(" "),z(t)}(t);case 234:return function(e){et(),Fe("{"),ne(e,Qe(e)),Fe("}"),tt()}(t);case 235:return function(e){Ue(17,e.pos),Ie(e,e.clauses,65),Ue(18,e.clauses.end)}(t);case 236:return function(e){Fe("export as namespace "),z(e.name),Fe(";")}(t);case 237:return function(e){be(e,e.modifiers),Fe("import "),z(e.name),Fe(" = "),function(e){71===e.kind?q(e):z(e)}(e.moduleReference),Fe(";")}(t);case 238:return function(e){be(e,e.modifiers),Fe("import "),e.importClause&&(z(e.importClause),Fe(" from "));q(e.moduleSpecifier),Fe(";")}(t);case 239:return function(e){z(e.name),e.name&&e.namedBindings&&Fe(", ");z(e.namedBindings)}(t);case 240:return function(e){Fe("* as "),z(e.name)}(t);case 241:return function(e){pe(e)}(t);case 242:return function(e){fe(e)}(t);case 243:return function(e){Fe(e.isExportEquals?"export = ":"export default "),q(e.expression),Fe(";")}(t);case 244:return function(e){Fe("export "),e.exportClause?z(e.exportClause):Fe("*");e.moduleSpecifier&&(Fe(" from "),q(e.moduleSpecifier));Fe(";")}(t);case 245:return function(e){pe(e)}(t);case 246:return function(e){fe(e)}(t);case 247:return;case 248:return function(e){Fe("require("),q(e.expression),Fe(")")}(t);case 10:return function(e){d.writeLiteral(Xe(e,!0))}(t);case 251:return function(t){Fe("<"),_e(t.tagName),n=t.attributes.properties,r=" ",void(e.some(n)&&Fe(r)),t.attributes.properties&&t.attributes.properties.length>0&&z(t.attributes);var n,r;Fe(">")}(t);case 252:return function(e){Fe("</"),_e(e.tagName),Fe(">")}(t);case 253:return function(e){z(e.name),xe("=",e.initializer)}(t);case 254:return function(e){Ie(e,e.properties,131328)}(t);case 255:return function(e){Fe("{..."),q(e.expression),Fe("}")}(t);case 256:return function(e){e.expression&&(Fe("{"),K(e.dotDotDotToken),q(e.expression),Fe("}"))}(t);case 257:return function(e){Fe("case "),q(e.expression),Fe(":"),me(e,e.statements)}(t);case 258:return function(e){Fe("default:"),me(e,e.statements)}(t);case 259:return function(e){Fe(" "),je(e.token),Fe(" "),Ie(e,e.types,272)}(t);case 260:return function(e){var t=Ue(74,e.pos);Fe(" "),e.variableDeclaration&&(Ue(19,t),z(e.variableDeclaration),Ue(20,e.variableDeclaration.end),Fe(" "));z(e.block)}(t);case 261:return function(t){z(t.name),Fe(": ");var n=t.initializer;if(w&&0==(512&e.getEmitFlags(n))){var r=e.getCommentRange(n);w(r.pos)}q(n)}(t);case 262:return function(e){z(e.name),e.objectAssignmentInitializer&&(Fe(" = "),q(e.objectAssignmentInitializer))}(t);case 263:return function(e){e.expression&&(Fe("..."),q(e.expression))}(t);case 264:return function(e){z(e.name),ke(" = ",e.initializer)}(t)}var r;if(e.isExpression(t))return Q(Y(1,t));if(e.isToken(t))return void Be(t)}(n)}}function Q(n){switch(n.kind){case 8:return function(e){Z(e)}(n);case 9:case 12:case 13:return Z(n);case 71:return ee(n);case 86:case 95:case 97:case 101:case 99:case 91:return void Be(n);case 177:return function(e){var t=e.elements,n=e.multiLine?32768:0;Pe(e,t,4466|n)}(n);case 178:return function(t){var n=65536&e.getEmitFlags(t);n&&Re();var r=t.multiLine?32768:0,i=a.languageVersion>=1?32:0;Ie(t,t.properties,263122|i|r),n&&Me()}(n);case 179:return function(n){var r=!1,i=!1;if(!(131072&e.getEmitFlags(n))){var o=n.expression.end,s=e.skipTrivia(a.text,n.expression.end)+1,c=e.createToken(23);c.pos=o,c.end=s,r=We(n,n.expression,c),i=We(n,c,n.name)}q(n.expression),ze(r),Fe(!r&&function(n){if(n=e.skipPartiallyEmittedExpressions(n),e.isNumericLiteral(n)){var r=Ze(n);return!n.numericLiteralFlags&&!e.stringContains(r,e.tokenToString(23))}if(e.isPropertyAccessExpression(n)||e.isElementAccessExpression(n)){var i=e.getConstantValue(n);return"number"==typeof i&&isFinite(i)&&Math.floor(i)===i&&t.removeComments}}(n.expression)?"..":"."),ze(i),z(n.name),Je(r,i)}(n);case 180:return function(e){q(e.expression),Fe("["),q(e.argumentExpression),Fe("]")}(n);case 181:return function(e){q(e.expression),De(e,e.typeArguments),Pe(e,e.arguments,1296)}(n);case 182:return function(e){Fe("new "),q(e.expression),De(e,e.typeArguments),Pe(e,e.arguments,9488)}(n);case 183:return function(e){q(e.tag),Fe(" "),q(e.template)}(n);case 184:return function(e){Fe("<"),z(e.type),Fe(">"),q(e.expression)}(n);case 185:return function(e){Fe("("),q(e.expression),Fe(")")}(n);case 186:return function(e){ie(e)}(n);case 187:return function(e){Ee(e,e.decorators),be(e,e.modifiers),oe(e,te)}(n);case 188:return function(e){Fe("delete "),q(e.expression)}(n);case 189:return function(e){Fe("typeof "),q(e.expression)}(n);case 190:return function(e){Fe("void "),q(e.expression)}(n);case 191:return function(e){Fe("await "),q(e.expression)}(n);case 192:return function(e){je(e.operator),function(e){var t=e.operand;return 192===t.kind&&(37===e.operator&&(37===t.operator||43===t.operator)||38===e.operator&&(38===t.operator||44===t.operator))}(e)&&Fe(" ");q(e.operand)}(n);case 193:return function(e){q(e.operand),je(e.operator)}(n);case 194:return function(e){var t=26!==e.operatorToken.kind,n=We(e,e.left,e.operatorToken),r=We(e,e.operatorToken,e.right);q(e.left),ze(n,t?" ":void 0),N(e.operatorToken.pos),Be(e.operatorToken),w(e.operatorToken.end,!0),ze(r," "),q(e.right),Je(n,r)}(n);case 195:return function(e){var t=We(e,e.condition,e.questionToken),n=We(e,e.questionToken,e.whenTrue),r=We(e,e.whenTrue,e.colonToken),i=We(e,e.colonToken,e.whenFalse);q(e.condition),ze(t," "),z(e.questionToken),ze(n," "),q(e.whenTrue),Je(t,n),ze(r," "),z(e.colonToken),ze(i," "),q(e.whenFalse),Je(r,i)}(n);case 196:return function(e){z(e.head),Ie(e,e.templateSpans,131072)}(n);case 197:return function(e){Fe("yield"),z(e.asteriskToken),ke(" ",e.expression)}(n);case 198:return function(e){Fe("..."),q(e.expression)}(n);case 199:return function(e){de(e)}(n);case 200:return;case 202:return function(e){q(e.expression),e.type&&(Fe(" as "),z(e.type))}(n);case 203:return function(e){q(e.expression),Fe("!")}(n);case 204:return function(e){Ue(e.keywordToken,e.pos),Fe("."),z(e.name)}(n);case 249:return function(e){z(e.openingElement),Ie(e,e.children,131072),z(e.closingElement)}(n);case 250:return function(e){Fe("<"),_e(e.tagName),Fe(" "),e.attributes.properties&&e.attributes.properties.length>0&&z(e.attributes);Fe("/>")}(n);case 288:return function(e){q(e.expression)}(n);case 289:return function(e){Pe(e,e.elements,272)}(n)}}function Y(e,t){return t&&b&&b(e,t)||t}function X(e){y&&y(e,Ke)}function Z(n){var r=Ze(n);!t.sourceMap&&!t.inlineSourceMap||9!==n.kind&&!e.isTemplateLiteralKind(n.kind)?Fe(r):d.writeLiteral(r)}function ee(e){Fe(Xe(e,!1)),De(e,e.typeArguments)}function te(e){Ae(e,e.typeParameters),Ne(e,e.parameters),xe(": ",e.type),Fe(" "),z(e.equalsGreaterThanToken)}function ne(t,n){var r=n||1&e.getEmitFlags(t)?384:65;Ie(t,t.statements,r)}function re(e){void 0!==e&&(227===e.kind?z(e):q(e))}function ie(e){Ee(e,e.decorators),be(e,e.modifiers),Fe("function"),K(e.asteriskToken),Fe(" "),J(e.name),oe(e,se)}function ae(e,t){ce(t)}function oe(t,n){var r=t.body;if(r)if(e.isBlock(r)){var i=65536&e.getEmitFlags(t);i&&Re(),524288&e.getEmitFlags(t)?(n(t),h?h(4,r,ae):ce(r)):(et(),n(t),h?h(4,r,ae):ce(r),tt()),i&&Me()}else n(t),Fe(" "),q(r);else n(t),Fe(";")}function se(e){Ae(e,e.typeParameters),we(e,e.parameters),xe(": ",e.type)}function ce(t){Fe(" {"),Re();var n=function(t){if(1&e.getEmitFlags(t))return!0;if(t.multiLine)return!1;if(!e.nodeIsSynthesized(t)&&!e.rangeIsOnSingleLine(t,a))return!1;if(qe(t,t.statements,2)||He(t,t.statements,2))return!1;for(var n,r=0,i=t.statements;r<i.length;r++){var o=i[r];if(Ve(n,o,2))return!1;n=o}return!0}(t)?le:ue;A?A(t,t.statements,n):n(t),Me(),Ue(18,t.statements.end,t)}function le(e){ue(e,!0)}function ue(e,t){var n=he(e.statements,!0),r=d.getTextPos();X(e),0===n&&r===d.getTextPos()&&t?(Me(),Ie(e,e.statements,384),Re()):Ie(e,e.statements,1,n)}function de(t){Ee(t,t.decorators),be(t,t.modifiers),Fe("class"),Se(" ",t.name,J);var n=65536&e.getEmitFlags(t);n&&Re(),Ae(t,t.typeParameters),Ie(t,t.heritageClauses,256),et(),Fe(" {"),Ie(t,t.members,65),Fe("}"),tt(),n&&Me()}function pe(e){Fe("{"),Ie(e,e.elements,432),Fe("}")}function fe(e){e.propertyName&&(z(e.propertyName),Fe(" as ")),z(e.name)}function _e(e){71===e.kind?q(e):z(e)}function me(t,n){var r=1===n.length&&(e.nodeIsSynthesized(t)||e.nodeIsSynthesized(n[0])||e.rangeStartPositionsAreOnSameLine(t,n[0],a));n.length>0&&w(n.pos);var i=81985;r&&(Fe(" "),i&=-66),Ie(t,n,i)}function ge(t){var n=t.statements;et(),X(t);var r=e.findIndex(n,(function(t){return!e.isPrologueDirective(t)}));Ie(t,n,1,-1===r?n.length:r),tt()}function he(t,n,r){for(var i=0;i<t.length;i++){var a=t[i];if(!e.isPrologueDirective(a))return i;(!r||!r.has(a.expression.text))&&((n||i>0)&&Le(),z(a),r&&r.set(a.expression.text,!0))}return t.length}function ye(t){if(e.isSourceFile(t))B(t),he(t.statements);else for(var n=e.createMap(),r=0,i=t.sourceFiles;r<i.length;r++){var a=i[r];B(a),he(a.statements,!0,n)}}function ve(t){if(e.isSourceFile(t)){var n=e.getShebang(t.text);if(n)return Fe(n),Le(),!0}else for(var r=0,i=t.sourceFiles;r<i.length;r++){if(ve(i[r]))break}}function be(e,t){t&&t.length&&(Ie(e,t,131328),Fe(" "))}function xe(e,t){Se(e,t,z)}function ke(e,t){Se(e,t,q)}function Se(e,t,n){t&&(Fe(e),n(t))}function Te(e,t){e&&(z(e),Fe(t))}function Ce(t,n){e.isBlock(n)||1&e.getEmitFlags(t)?(Fe(" "),z(n)):(Le(),Re(),z(n),Me())}function Ee(e,t){Ie(e,t,24577)}function De(e,t){Ie(e,t,26960)}function Ae(e,t){Ie(e,t,26960)}function we(e,t){Ie(e,t,1360)}function Ne(t,n){!function(t,n){var r=e.singleOrUndefined(n);return r&&r.pos===t.pos&&!(e.isArrowFunction(t)&&t.type)&&!e.some(t.decorators)&&!e.some(t.modifiers)&&!e.some(t.typeParameters)&&!e.some(r.decorators)&&!e.some(r.modifiers)&&!r.dotDotDotToken&&!r.questionToken&&!r.type&&!r.initializer&&e.isIdentifier(r.name)}(t,n)?we(t,n):Ie(t,n,336)}function Ie(e,t,n,r,i){Oe(z,e,t,n,r,i)}function Pe(e,t,n,r,i){Oe(q,e,t,n,r,i)}function Oe(t,n,a,o,s,c){void 0===s&&(s=0),void 0===c&&(c=a?a.length-s:0);var l=void 0===a;if(!(l&&8192&o)){var u=l||s>=a.length||0===c;if(u&&16384&o)return x&&x(a),void(k&&k(a));if(7680&o&&Fe(function(e){return i[7680&e][0]}(o)),x&&x(a),u)1&o?Le():128&o&&!(262144&o)&&Fe(" ");else{var d=0==(131072&o),p=d;qe(n,a,o)?(Le(),p=!1):128&o&&Fe(" "),64&o&&Re();for(var f=void 0,_=void 0,m=function(e){return r[28&e]}(o),g=0;g<c;g++){var h=a[s+g];if(f&&(m&&f.end!==n.end&&N(f.end),Fe(m),Ve(f,h,o)?(0==(67&o)&&(Re(),_=!0),Le(),p=!1):f&&256&o&&Fe(" ")),p){if(w){var y=e.getCommentRange(h);w(y.pos)}}else p=d;t(h),_&&(Me(),_=!1),f=h}var v=32&o&&a.hasTrailingComma;16&o&&v&&Fe(","),!f||!m||f.end===n.end||1024&e.getEmitFlags(f)||N(f.end),64&o&&Me(),He(n,a,o)?Le():128&o&&Fe(" ")}k&&k(a),7680&o&&Fe(function(e){return i[7680&e][1]}(o))}}function Fe(e){d.write(e)}function Le(){d.writeLine()}function Re(){d.increaseIndent()}function Me(){d.decreaseIndent()}function Ue(e,t,n){return m?m(n,e,t,je):je(e,t)}function Be(t){S&&S(t),Fe(e.tokenToString(t.kind)),T&&T(t)}function je(t,n){var r=e.tokenToString(t);return Fe(r),n<0?n:n+r.length}function $e(t){1&e.getEmitFlags(t)?Fe(" "):Le()}function Ke(t){for(var n=t.split(/\r\n?|\n/g),r=function(t){for(var n,r=0,i=t;r<i.length;r++)for(var a=i[r],o=0;o<a.length&&(void 0===n||o<n);o++)if(!e.isWhiteSpaceLike(a.charCodeAt(o))&&(void 0===n||o<n)){n=o;break}return n}(n),i=0;i<n.length;i++){var a=r?n[i].slice(r):n[i];a.length&&(Le(),Fe(a),Le())}}function ze(e,t){e?(Re(),Le()):t&&Fe(t)}function Je(e,t){e&&Me(),t&&Me()}function qe(t,n,r){if(1&r)return!0;if(2&r){if(32768&r)return!0;var i=n[0];return void 0===i?!e.rangeIsOnSingleLine(t,a):e.positionIsSynthesized(t.pos)||e.nodeIsSynthesized(i)?Ge(i,r):!e.rangeStartPositionsAreOnSameLine(t,i,a)}return!1}function Ve(t,n,r){return!!(1&r)||(2&r?void 0!==t&&void 0!==n&&(e.nodeIsSynthesized(t)||e.nodeIsSynthesized(n)?Ge(t,r)||Ge(n,r):!e.rangeEndIsOnSameLineAsRangeStart(t,n,a)):n.startsOnNewLine)}function He(t,n,r){if(1&r)return 0==(65536&r);if(2&r){if(32768&r)return!0;var i=e.lastOrUndefined(n);return void 0===i?!e.rangeIsOnSingleLine(t,a):e.positionIsSynthesized(t.pos)||e.nodeIsSynthesized(i)?Ge(i,r):!e.rangeEndPositionsAreOnSameLine(t,i,a)}return!1}function Ge(t,n){if(e.nodeIsSynthesized(t)){var r=t.startsOnNewLine;return void 0===r?0!=(32768&n):r}return 0!=(32768&n)}function We(t,n,r){return t=Ye(t),n=Ye(n),!!(r=Ye(r)).startsOnNewLine||!(e.nodeIsSynthesized(t)||e.nodeIsSynthesized(n)||e.nodeIsSynthesized(r)||e.rangeEndIsOnSameLineAsRangeStart(n,r,a))}function Qe(t){return 0===t.statements.length&&e.rangeEndIsOnSameLineAsRangeStart(t,t,a)}function Ye(t){for(;185===t.kind&&e.nodeIsSynthesized(t);)t=t.expression;return t}function Xe(t,n){return e.isGeneratedIdentifier(t)?function(t){if(4===t.autoGenerateKind)return nt(function(t){var n=t.autoGenerateId,r=t,i=r.original;for(;i&&(r=i,!e.isIdentifier(r)||4!==r.autoGenerateKind||r.autoGenerateId===n);)i=r.original;return r}(t));var n=t.autoGenerateId;return s[n]||(s[n]=function(t){switch(t.autoGenerateKind){case 1:return it(0);case 2:return it(268435456);case 3:return at(e.idText(t))}e.Debug.fail("Unsupported GeneratedIdentifierKind.")}(t))}(t):!e.isIdentifier(t)||!e.nodeIsSynthesized(t)&&t.parent?9===t.kind&&t.textSourceNode?Xe(t.textSourceNode,n):!e.isLiteralExpression(t)||!e.nodeIsSynthesized(t)&&t.parent?e.getSourceTextOfNodeFromSourceFile(a,t,n):t.text:e.idText(t)}function Ze(t){if(9===t.kind&&t.textSourceNode){var n=t.textSourceNode;return e.isIdentifier(n)?16777216&e.getEmitFlags(t)?'"'+e.escapeString(Xe(n))+'"':'"'+e.escapeNonAsciiString(Xe(n))+'"':Ze(n)}return e.getLiteralText(t,a)}function et(){l.push(u),u=0}function tt(){u=l.pop()}function nt(t){var n=e.getNodeId(t);return o[n]||(o[n]=function(t){switch(t.kind){case 71:return at(Xe(t));case 233:case 232:return function(t){var n=Xe(t.name);return function(t,n){for(var r=n;e.isNodeDescendantOf(r,n);r=r.nextContainer)if(r.locals){var i=r.locals.get(e.escapeLeadingUnderscores(t));if(i&&3253183&i.flags)return!1}return!0}(n,t)?n:at(n)}(t);case 238:case 244:return function(t){var n=e.getExternalModuleName(t);return at(e.isStringLiteral(n)?e.makeIdentifierFromModuleName(n.text):"module")}(t);case 228:case 229:case 243:return at("default");case 199:return at("class");case 151:case 153:case 154:return function(t){if(e.isIdentifier(t.name))return nt(t.name);return it(0)}(t);default:return it(0)}}(t))}function rt(e){return!(f&&f(e)||a.identifiers.has(e)||c.has(e))}function it(e){if(e&&!(u&e)&&rt(t=268435456===e?"_i":"_n"))return u|=e,t;for(;;){var t,n=268435455&u;if(u++,8!==n&&13!==n)if(rt(t=n<26?"_"+String.fromCharCode(97+n):"_"+(n-26)))return t}}function at(e){95!==e.charCodeAt(e.length-1)&&(e+="_");for(var t=1;;){var n=e+t;if(rt(n))return c.set(n,!0),n;t++}}}e.forEachEmittedFile=a,e.emitFiles=function(t,n,r,i,o){var s,l,u,d=n.getCompilerOptions(),p=e.getEmitModuleKind(d),f=d.sourceMap||d.inlineSourceMap?[]:void 0,_=d.listEmittedFiles?[]:void 0,m=e.createDiagnosticCollection(),g=n.getNewLine(),h=e.createTextWriter(g),y=e.createSourceMapWriter(n,h),v=!1,b=e.getSourceFilesToEmit(n,r),x=e.transformNodes(t,n,d,b,o,!1),k=c(d,{hasGlobalName:t.hasGlobalName,onEmitNode:x.emitNodeWithNotification,substituteNode:x.substituteNode,onEmitSourceMapOfNode:y.emitNodeWithSourceMap,onEmitSourceMapOfToken:y.emitTokenWithSourceMap,onEmitSourceMapOfPosition:y.emitPos,onEmitHelpers:function(t,n){var r=!1,i=266===t.kind?t:void 0;if(i&&p===e.ModuleKind.None)return;for(var a=i?i.sourceFiles.length:1,o=0;o<a;o++){var c=i?i.sourceFiles[o]:t,f=e.isSourceFile(c)?c:s,_=d.noEmitHelpers||void 0!==e.getExternalHelpersModuleName(f),m=e.isSourceFile(c)&&!u,g=e.getEmitHelpers(c);if(g)for(var h=0,y=e.stableSort(g,e.compareEmitHelpers);h<y.length;h++){var v=y[h];if(v.scoped){if(i)continue}else{if(_)continue;if(m){if(l.get(v.name))continue;l.set(v.name,!0)}}n(v.text),r=!0}}return r},onSetSourceFile:function(e){s=e,y.setSourceFile(e)}});return e.performance.mark("beforePrint"),a(n,(function(r,a){var o=r.jsFilePath,c=r.sourceMapFilePath,p=r.declarationFilePath;n.isEmitBlocked(o)||d.noEmit?v=!0:i||function(t,r,i){var a=266===i.kind?i:void 0,o=265===i.kind?i:void 0,c=a?a.sourceFiles:[o];y.initialize(t,r,i),a?(l=e.createMap(),u=!1,k.writeBundle(a,h)):(u=!0,k.writeFile(o,h));h.writeLine();var p=y.getSourceMappingURL();p&&h.write("//# sourceMappingURL="+p);d.sourceMap&&!d.inlineSourceMap&&e.writeFile(n,m,r,y.getText(),!1,c);f&&f.push(y.getSourceMapData());e.writeFile(n,m,t,h.getText(),d.emitBOM,c),y.reset(),h.reset(),s=void 0,l=void 0,u=!1}(o,c,a);p&&(v=e.writeDeclarationFile(p,function(t){return 266===t.kind?e.updateBundle(t,e.sameMap(t.sourceFiles,e.getOriginalSourceFile)):e.getOriginalSourceFile(t)}(a),n,t,m,i)||v);!v&&_&&(i||_.push(o),c&&_.push(c),p&&_.push(p))}),x.transformed,i),e.performance.measure("printTime","beforePrint"),x.dispose(),{emitSkipped:v,diagnostics:m.getDiagnostics(),emittedFiles:_,sourceMaps:f}},e.createPrinter=c,function(e){e[e.Auto=0]="Auto",e[e.CountMask=268435455]="CountMask",e[e._i=268435456]="_i"}(t||(t={})),function(e){e[e.None=0]="None",e[e.SingleLine=0]="SingleLine",e[e.MultiLine=1]="MultiLine",e[e.PreserveLines=2]="PreserveLines",e[e.LinesMask=3]="LinesMask",e[e.NotDelimited=0]="NotDelimited",e[e.BarDelimited=4]="BarDelimited",e[e.AmpersandDelimited=8]="AmpersandDelimited",e[e.CommaDelimited=16]="CommaDelimited",e[e.DelimitersMask=28]="DelimitersMask",e[e.AllowTrailingComma=32]="AllowTrailingComma",e[e.Indented=64]="Indented",e[e.SpaceBetweenBraces=128]="SpaceBetweenBraces",e[e.SpaceBetweenSiblings=256]="SpaceBetweenSiblings",e[e.Braces=512]="Braces",e[e.Parenthesis=1024]="Parenthesis",e[e.AngleBrackets=2048]="AngleBrackets",e[e.SquareBrackets=4096]="SquareBrackets",e[e.BracketsMask=7680]="BracketsMask",e[e.OptionalIfUndefined=8192]="OptionalIfUndefined",e[e.OptionalIfEmpty=16384]="OptionalIfEmpty",e[e.Optional=24576]="Optional",e[e.PreferNewLine=32768]="PreferNewLine",e[e.NoTrailingNewLine=65536]="NoTrailingNewLine",e[e.NoInterveningComments=131072]="NoInterveningComments",e[e.NoSpaceIfEmpty=262144]="NoSpaceIfEmpty",e[e.SingleElement=524288]="SingleElement",e[e.Modifiers=131328]="Modifiers",e[e.HeritageClauses=256]="HeritageClauses",e[e.SingleLineTypeLiteralMembers=448]="SingleLineTypeLiteralMembers",e[e.MultiLineTypeLiteralMembers=65]="MultiLineTypeLiteralMembers",e[e.TupleTypeElements=336]="TupleTypeElements",e[e.UnionTypeConstituents=260]="UnionTypeConstituents",e[e.IntersectionTypeConstituents=264]="IntersectionTypeConstituents",e[e.ObjectBindingPatternElements=432]="ObjectBindingPatternElements",e[e.ArrayBindingPatternElements=304]="ArrayBindingPatternElements",e[e.ObjectLiteralExpressionProperties=263122]="ObjectLiteralExpressionProperties",e[e.ArrayLiteralExpressionElements=4466]="ArrayLiteralExpressionElements",e[e.CommaListElements=272]="CommaListElements",e[e.CallExpressionArguments=1296]="CallExpressionArguments",e[e.NewExpressionArguments=9488]="NewExpressionArguments",e[e.TemplateExpressionSpans=131072]="TemplateExpressionSpans",e[e.SingleLineBlockStatements=384]="SingleLineBlockStatements",e[e.MultiLineBlockStatements=65]="MultiLineBlockStatements",e[e.VariableDeclarationList=272]="VariableDeclarationList",e[e.SingleLineFunctionBodyStatements=384]="SingleLineFunctionBodyStatements",e[e.MultiLineFunctionBodyStatements=1]="MultiLineFunctionBodyStatements",e[e.ClassHeritageClauses=256]="ClassHeritageClauses",e[e.ClassMembers=65]="ClassMembers",e[e.InterfaceMembers=65]="InterfaceMembers",e[e.EnumMembers=81]="EnumMembers",e[e.CaseBlockClauses=65]="CaseBlockClauses",e[e.NamedImportsOrExportsElements=432]="NamedImportsOrExportsElements",e[e.JsxElementChildren=131072]="JsxElementChildren",e[e.JsxElementAttributes=131328]="JsxElementAttributes",e[e.CaseOrDefaultClauseStatements=81985]="CaseOrDefaultClauseStatements",e[e.HeritageClauseTypes=272]="HeritageClauseTypes",e[e.SourceFileStatements=65537]="SourceFileStatements",e[e.Decorators=24577]="Decorators",e[e.TypeArguments=26960]="TypeArguments",e[e.TypeParameters=26960]="TypeParameters",e[e.Parameters=1360]="Parameters",e[e.IndexSignatureParameters=4432]="IndexSignatureParameters"}(n||(n={}))}(ts||(ts={})),function(e){function t(e,t,n,r,i){var a=[],o=e.emit(t,(function(e,t,n){a.push({name:e,writeByteOrderMark:n,text:t})}),r,n,i);return{outputFiles:a,emitSkipped:o.emitSkipped}}e.getFileEmitOutput=t,e.createBuilder=function(n){var r,i,a,o=e.createMap(),s=e.createMap(),c=e.createMap(),l=e.createMap();return{updateProgram:function(e){a&&u(e)},getFilesAffectedBy:_,emitChangedFiles:function(t,n){f(t);var r=t.getCompilerOptions();if(!c.size)return e.emptyArray;if(r.outFile||r.out)return e.Debug.assert(0===s.size),c.clear(),[t.emit(void 0,n)];var i,a=e.createMap();return c.forEach((function(e,r){_(t,r).forEach((function(e){s.delete(e.path),a.has(e.path)||(a.set(e.path,!0),(i||(i=[])).push(t.emit(e,n)))}))})),c.clear(),i||e.emptyArray},getSemanticDiagnostics:function(t,n){f(t),e.Debug.assert(0===c.size);var r,i=t.getCompilerOptions();if(i.outFile||i.out)return e.Debug.assert(0===s.size),t.getSemanticDiagnostics(void 0,n);for(var a=0,o=t.getSourceFiles();a<o.length;a++){var l=o[a];r=e.addRange(r,m(t,l,n))}return r||e.emptyArray},clear:function(){r=void 0,a=void 0,o.clear(),s.clear(),c.clear(),l.clear()}};function u(t){var n=t.getCompilerOptions().module!==e.ModuleKind.None;r!==n&&(a=(r=n)?function(){var t=e.createMap();return{onAddSourceFile:n,onRemoveSourceFile:a,onUpdateSourceFile:r,onUpdateSourceFileWithSameVersion:i,getFilesAffectedByUpdatedShape:c};function n(e,n){var r=h(e,n);r&&t.set(n.path,r)}function r(e,n){var r=h(e,n);r?t.set(n.path,r):t.delete(n.path)}function i(n,r){var i=h(n,r);if(!i)return t.delete(r.path);var a=t.get(r.path);return t.set(r.path,i),!a||a.size!==i.size||(e.forEachEntry(i,(function(e,t){return!a.delete(t)}))||!!a.size)}function a(e){t.forEach((function(t,n){t.has(e)&&(o.get(n)&&d(n))})),t.delete(e)}function s(n){return e.mapDefinedIter(t.entries(),(function(e){var t=e[0];return e[1].has(n)?t:void 0}))}function c(t,n){if(!e.isExternalModule(n)&&!function(t){for(var n=0,r=t.statements;n<r.length;n++){var i=r[n];if(!e.isModuleWithStringLiteralName(i))return!1}return!0}(n))return y(t,n);var r=t.getCompilerOptions();if(r&&(r.isolatedModules||r.out||r.outFile))return[n];var i=e.createMap(),a=n.path;i.set(a,n);for(var o=s(a);o.length>0;){var c=o.pop();if(!i.has(c)){var l=t.getSourceFileByPath(c);i.set(c,l),l&&g(t,l)&&o.push.apply(o,s(c))}}return e.flatMapIter(i.values(),(function(e){return e}))}}():function(){return{onAddSourceFile:e.noop,onRemoveSourceFile:e.noop,onUpdateSourceFile:e.noop,onUpdateSourceFileWithSameVersion:e.returnFalse,getFilesAffectedByUpdatedShape:t};function t(e,t){var n=e.getCompilerOptions();return n&&(n.out||n.outFile)?[t]:y(e,t)}}(),o.clear(),s.clear()),l.clear(),i=void 0,e.mutateMap(o,e.arrayToMap(t.getSourceFiles(),(function(e){return e.path})),{createNewValue:function(e,n){return function(e,t){return d(t.path),a.onAddSourceFile(e,t),{version:t.version,signature:void 0}}(t,n)},onDeleteValue:p,onExistingValue:function(e,n){return function(e,t,n){t.version!==n.version?(d(n.path),t.version=n.version,a.onUpdateSourceFile(e,n)):a.onUpdateSourceFileWithSameVersion(e,n)&&d(n.path)}(t,e,n)}})}function d(e){c.set(e,!0),s.delete(e)}function p(e,t){c.delete(t),s.delete(t),a.onRemoveSourceFile(t)}function f(e){a||u(e)}function _(t,n){f(t);var r=t.getSourceFileByPath(n);return r?g(t,r)?a.getFilesAffectedByUpdatedShape(t,r):[r]:e.emptyArray}function m(e,t,n){var r=t.path,i=s.get(r);if(i)return i;var a=e.getSemanticDiagnostics(t,n);return s.set(r,a),a}function g(r,i){if(e.Debug.assert(!!i),l.has(i.path))return!1;l.set(i.path,!0);var a=o.get(i.path);e.Debug.assert(!!a);var s,c=a.signature;if(i.isDeclarationFile)s=i.version,a.signature=s;else{var u=t(r,i,!0);u.outputFiles&&u.outputFiles.length>0?(s=n.computeHash(u.outputFiles[0].text),a.signature=s):s=c}return!c||s!==c}function h(t,r){var i;if(r.imports&&r.imports.length>0)for(var a=t.getTypeChecker(),o=0,s=r.imports;o<s.length;o++){var c=s[o],l=a.getSymbolAtLocation(c);if(l&&l.declarations&&l.declarations[0]){var u=e.getSourceFileOfNode(l.declarations[0]);u&&m(u.path)}}var d=e.getDirectoryPath(r.path);if(r.referencedFiles&&r.referencedFiles.length>0)for(var p=0,f=r.referencedFiles;p<f.length;p++){var _=f[p];m(e.toPath(_.fileName,d,n.getCanonicalFileName))}return r.resolvedTypeReferenceDirectiveNames&&r.resolvedTypeReferenceDirectiveNames.forEach((function(t){if(t){var r=t.resolvedFileName;m(e.toPath(r,d,n.getCanonicalFileName))}})),i;function m(t){i||(i=e.createMap()),i.set(t,!0)}}function y(t,n){if(i)return i;var r;c(n);for(var a=0,o=t.getSourceFiles();a<o.length;a++){var s=o[a];s!==n&&c(s)}return i=r||e.emptyArray;function c(e){t.isSourceFileDefaultLibrary(e)||(r||(r=[])).push(e)}}}}(ts||(ts={})),function(e){var t=/(^\s*$)|(^\s*\/\/\/?\s*(@ts-ignore)?)/;function n(t,n){var r=e.getDirectoryPath(n),i=e.isRootedDiskPath(t)?t:e.combinePaths(r,t);return e.normalizePath(i)}function r(t,n,r){var i;return e.forEach(t,(function(t){var a=e.getNormalizedPathComponents(t,n);if(a.pop(),i){for(var o=Math.min(i.length,a.length),s=0;s<o;s++)if(r(i[s])!==r(a[s])){if(0===s)return!0;i.length=s;break}a.length<i.length&&(i.length=a.length)}else i=a}))?"":i?e.getNormalizedPathFromPathComponents(i):n}function i(t,n){var r,i=e.createMap();function a(t){t.length>e.getRootLength(t)&&!function(t){return!!i.has(t)||!!e.sys.directoryExists(t)&&(i.set(t,!0),!0)}(t)&&(a(e.getDirectoryPath(t)),e.sys.createDirectory(t))}function o(){return e.getDirectoryPath(e.normalizePath(e.sys.getExecutingFilePath()))}var s=e.getNewLineCharacter(t),c=e.sys.realpath&&function(t){return e.sys.realpath(t)};return{getSourceFile:function(r,i,a){var o;try{e.performance.mark("beforeIORead"),o=e.sys.readFile(r,t.charset),e.performance.mark("afterIORead"),e.performance.measure("I/O Read","beforeIORead","afterIORead")}catch(e){a&&a(e.message),o=""}return void 0!==o?e.createSourceFile(r,o,i,n):void 0},getDefaultLibLocation:o,getDefaultLibFileName:function(t){return e.combinePaths(o(),e.getDefaultLibFileName(t))},writeFile:function(n,i,o,s){try{e.performance.mark("beforeIOWrite"),a(e.getDirectoryPath(e.normalizePath(n))),e.isWatchSet(t)&&e.sys.createHash&&e.sys.getModifiedTime?function(t,n,i){r||(r=e.createMap());var a=e.sys.createHash(n),o=e.sys.getModifiedTime(t);if(o){var s=r.get(t);if(s&&s.byteOrderMark===i&&s.hash===a&&s.mtime.getTime()===o.getTime())return}e.sys.writeFile(t,n,i);var c=e.sys.getModifiedTime(t);r.set(t,{hash:a,byteOrderMark:i,mtime:c})}(n,i,o):e.sys.writeFile(n,i,o),e.performance.mark("afterIOWrite"),e.performance.measure("I/O Write","beforeIOWrite","afterIOWrite")}catch(e){s&&s(e.message)}},getCurrentDirectory:e.memoize((function(){return e.sys.getCurrentDirectory()})),useCaseSensitiveFileNames:function(){return e.sys.useCaseSensitiveFileNames},getCanonicalFileName:function(t){return e.sys.useCaseSensitiveFileNames?t:t.toLowerCase()},getNewLine:function(){return s},fileExists:function(t){return e.sys.fileExists(t)},readFile:function(t){return e.sys.readFile(t)},trace:function(t){return e.sys.write(t+s)},directoryExists:function(t){return e.sys.directoryExists(t)},getEnvironmentVariable:function(t){return e.sys.getEnvironmentVariable?e.sys.getEnvironmentVariable(t):""},getDirectories:function(t){return e.sys.getDirectories(t)},realpath:c}}function a(t,n){var r=e.DiagnosticCategory[t.category].toLowerCase()+" TS"+t.code+": "+p(t.messageText,n.getNewLine())+n.getNewLine();if(t.file){var i=e.getLineAndCharacterOfPosition(t.file,t.start),a=i.line,o=i.character,s=t.file.fileName;return e.convertToRelativePath(s,n.getCurrentDirectory(),(function(e){return n.getCanonicalFileName(e)}))+"("+(a+1)+","+(o+1)+"): "+r}return r}e.findConfigFile=function(t,n,r){for(void 0===r&&(r="tsconfig.json");;){var i=e.combinePaths(t,r);if(n(i))return i;var a=e.getDirectoryPath(t);if(a===t)break;t=a}},e.resolveTripleslashReference=n,e.computeCommonSourceDirectoryOfFilenames=r,e.createCompilerHost=i,e.getPreEmitDiagnostics=function(t,n,r){var i=t.getOptionsDiagnostics(r).concat(t.getSyntacticDiagnostics(n,r),t.getGlobalDiagnostics(r),t.getSemanticDiagnostics(n,r));return t.getCompilerOptions().declaration&&e.addRange(i,t.getDeclarationDiagnostics(n,r)),e.sortAndDeduplicateDiagnostics(i)},e.formatDiagnostics=function(e,t){for(var n="",r=0,i=e;r<i.length;r++){n+=a(i[r],t)}return n},e.formatDiagnostic=a;var o="[91m",s="[30;47m",c="[0m";function l(t){switch(t){case e.DiagnosticCategory.Warning:return"[93m";case e.DiagnosticCategory.Error:return o;case e.DiagnosticCategory.Message:return"[93m"}}function u(e,t){return t+e+c}function d(e,t){for(;e.length<t;)e=" "+e;return e}function p(t,n){if(e.isString(t))return t;for(var r=t,i="",a=0;r;){if(a){i+=n;for(var o=0;o<a;o++)i+="  "}i+=r.messageText,a++,r=r.next}return i}function f(t,n,r){if(0===t.length)return[];for(var i=[],a=e.createMap(),o=0,s=t;o<s.length;o++){var c=s[o],l=void 0;a.has(c)?l=a.get(c):a.set(c,l=r(c,n)),i.push(l)}return i}function _(t,n){switch(n.extension){case".ts":case".d.ts":return;case".tsx":return r();case".jsx":return r()||i();case".js":return i()}function r(){return t.jsx?void 0:e.Diagnostics.Module_0_was_resolved_to_1_but_jsx_is_not_set}function i(){return t.allowJs||!t.noImplicitAny?void 0:e.Diagnostics.Could_not_find_a_declaration_file_for_module_0_1_implicitly_has_an_any_type}}function m(t){return e.Debug.assert(t.every((function(e){return void 0!==e})),"A name is undefined.",(function(){return JSON.stringify(t)})),t}function g(e){for(var t=e.imports,n=e.moduleAugmentations,r=t.map((function(e){return e.text})),i=0,a=n;i<a.length;i++){var o=a[i];9===o.kind&&r.push(o.text)}return r}e.formatDiagnosticsWithColorAndContext=function(t,n){for(var r="",i=0,a=t;i<a.length;i++){var f=a[i],_="";if(f.file){var m=f.start,g=f.length,h=f.file,y=e.getLineAndCharacterOfPosition(h,m),v=y.line,b=y.character,x=e.getLineAndCharacterOfPosition(h,m+g),k=x.line,S=x.character,T=e.getLineAndCharacterOfPosition(h,h.text.length).line,C=n?e.convertToRelativePath(h.fileName,n.getCurrentDirectory(),(function(e){return n.getCanonicalFileName(e)})):h.fileName,E=k-v>=4,D=(k+1+"").length;E&&(D=Math.max("...".length,D)),_+=n.getNewLine();for(var A=v;A<=k;A++){E&&v+1<A&&A<k-1&&(_+=u(d("...",D),s)+" "+n.getNewLine(),A=k-1);var w=e.getPositionOfLineAndCharacter(h,A,0),N=A<T?e.getPositionOfLineAndCharacter(h,A+1,0):h.text.length,I=h.text.slice(w,N);if(I=(I=I.replace(/\s+$/g,"")).replace("\t"," "),_+=u(d(A+1+"",D),s)+" ",_+=I+n.getNewLine(),_+=u(d("",D),s)+" ",_+=o,A===v){var P=A===k?S:void 0;_+=I.slice(0,b).replace(/\S/g," "),_+=I.slice(b,P).replace(/./g,"~")}else _+=A===k?I.slice(0,S).replace(/./g,"~"):I.replace(/./g,"~");_+=c}r+=n.getNewLine(),r+=C+"("+(v+1)+","+(b+1)+"): "}var O=l(f.category);r+=u(e.DiagnosticCategory[f.category].toLowerCase(),O)+" TS"+f.code+": "+p(f.messageText,n.getNewLine()),f.file&&(r+=n.getNewLine(),r+=_),r+=n.getNewLine()}return r},e.flattenDiagnosticMessageText=p,e.isProgramUptoDate=function(t,n,r,i,a,o,s){if(!t||s)return!1;if(t.getRootFileNames().length!==n.length)return!1;if(t.getSourceFiles().some((function(e){return e.version!==i(e.path)||o(e.path)})))return!1;if(t.getMissingFilePaths().some(a))return!1;var c=t.getCompilerOptions();return!!e.compareDataObjects(c,r)&&(!c.configFile||!r.configFile||c.configFile.text===r.configFile.text)},e.createProgram=function(a,o,s,c){var l,u,d,p,h,y,v=[],b={},x={},k=e.createMap(),S=e.createDiagnosticCollection(),T="number"==typeof o.maxNodeModuleJsDepth?o.maxNodeModuleJsDepth:0,C=0,E=e.createMap(),D=e.createMap();e.performance.mark("beforeProgram"),s=s||i(o);var A,w,N,I,P=o.noLib,O=e.memoize((function(){return s.getDefaultLibFileName(o)})),F=s.getDefaultLibLocation?s.getDefaultLibLocation():e.getDirectoryPath(O()),L=e.createDiagnosticCollection(),R=s.getCurrentDirectory(),M=e.getSupportedExtensions(o),U=e.createMap(),B=s.hasInvalidatedResolution||e.returnFalse;if(s.resolveModuleNames)N=function(t,n,r){return s.resolveModuleNames(m(t),n,r).map((function(t){if(!t||void 0!==t.extension)return t;var n=e.clone(t);return n.extension=e.extensionFromPath(t.resolvedFileName),n}))};else{w=e.createModuleResolutionCache(R,(function(e){return s.getCanonicalFileName(e)}));var j=function(t,n){return e.resolveModuleName(t,n,o,s,w).resolvedModule};N=function(e,t){return f(m(e),t,j)}}if(s.resolveTypeReferenceDirectives)I=function(e,t){return s.resolveTypeReferenceDirectives(m(e),t)};else{var $=function(t,n){return e.resolveTypeReferenceDirective(t,n,o,s).resolvedTypeReferenceDirective};I=function(e,t){return f(m(e),t,$)}}var K,z=e.createMap(),J=e.createMap(),q=e.createMap(),V=e.createMap(),H=s.useCaseSensitiveFileNames()?e.createMap():void 0,G=function(t,n){var r=t&&t.getCompilerOptions();return r&&(r.target!==n.target||r.module!==n.module||r.moduleResolution!==n.moduleResolution||r.noResolve!==n.noResolve||r.jsx!==n.jsx||r.allowJs!==n.allowJs||r.disableSizeLimit!==n.disableSizeLimit||r.baseUrl!==n.baseUrl||!e.equalOwnProperties(r.paths,n.paths))}(c,o),W=function(){if(!c)return 0;var t=c.getCompilerOptions();if(e.changesAffectModuleResolution(t,o))return c.structureIsReused=0;e.Debug.assert(!(3&c.structureIsReused));var n=c.getRootFileNames();if(!e.arrayIsEqualTo(n,a))return c.structureIsReused=0;if(!e.arrayIsEqualTo(o.types,t.types))return c.structureIsReused=0;var r=[],i=[],l=[];if(c.structureIsReused=2,c.getMissingFilePaths().some((function(e){return s.fileExists(e)})))return c.structureIsReused=0;var u,d=c.getSourceFiles();!function(e){e[e.Exists=0]="Exists",e[e.Modified=1]="Modified"}(u||(u={}));for(var p=e.createMap(),f=0,_=d;f<_.length;f++){var m=_[f];if(!(w=s.getSourceFileByPath?s.getSourceFileByPath(m.fileName,m.path,o.target,void 0,G):s.getSourceFile(m.fileName,o.target,void 0,G)))return c.structureIsReused=0;e.Debug.assert(!w.redirectInfo,"Host should not return a redirect source file from `getSourceFile`");var h=void 0;if(m.redirectInfo){if(w!==m.redirectInfo.unredirected)return c.structureIsReused=0;h=!1,w=m}else if(c.redirectTargetsSet.has(m.path)){if(w!==m)return c.structureIsReused=0;h=!1}else h=w!==m;w.path=m.path,i.push(w.path);var b=c.sourceFileToPackageName.get(m.path);if(void 0!==b){var x=p.get(b),T=h?1:0;if(void 0!==x&&1===T||1===x)return c.structureIsReused=0;p.set(b,T)}h?(m.hasNoDefaultLib!==w.hasNoDefaultLib&&(c.structureIsReused=1),e.arrayIsEqualTo(m.referencedFiles,w.referencedFiles,Ce)||(c.structureIsReused=1),De(w),e.arrayIsEqualTo(m.imports,w.imports,Ee)||(c.structureIsReused=1),e.arrayIsEqualTo(m.moduleAugmentations,w.moduleAugmentations,Ee)||(c.structureIsReused=1),(524288&m.flags)!=(524288&w.flags)&&(c.structureIsReused=1),e.arrayIsEqualTo(m.typeReferenceDirectives,w.typeReferenceDirectives,Ce)||(c.structureIsReused=1),l.push({oldFile:m,newFile:w})):B(m.path)&&(c.structureIsReused=1,l.push({oldFile:m,newFile:w})),r.push(w)}if(2!==c.structureIsReused)return c.structureIsReused;y=l.map((function(e){return e.newFile.path}));for(var C=0,E=l;C<E.length;C++){var A=E[C],w=(m=A.oldFile,A.newFile),P=e.getNormalizedAbsolutePath(w.fileName,R);if(N){var O=g(w),F=oe(O,P,w,{program:c,file:m,modifiedFilePaths:y});e.hasChangesInResolutions(O,F,m.resolvedModules,e.moduleResolutionIsEqualTo)?(c.structureIsReused=1,w.resolvedModules=e.zipToMap(O,F)):w.resolvedModules=m.resolvedModules}if(I){var L=e.map(w.typeReferenceDirectives,(function(e){return e.fileName}));F=I(L,P);e.hasChangesInResolutions(L,F,m.resolvedTypeReferenceDirectiveNames,e.typeDirectiveIsEqualTo)?(c.structureIsReused=1,w.resolvedTypeReferenceDirectiveNames=e.zipToMap(L,F)):w.resolvedTypeReferenceDirectiveNames=m.resolvedTypeReferenceDirectiveNames}}if(2!==c.structureIsReused)return c.structureIsReused;if(s.hasChangedAutomaticTypeDirectiveNames)return c.structureIsReused=1;K=c.getMissingFilePaths();for(var M=0;M<r.length;M++)V.set(i[M],r[M]),c.isSourceFileFromExternalLibrary(c.getSourceFileByPath(i[M]))&&D.set(i[M],!0);v=r,S=c.getFileProcessingDiagnostics();for(var U=0,j=l;U<j.length;U++){var $=j[U];S.reattachFileDiagnostics($.newFile)}return k=c.getResolvedTypeReferenceDirectives(),J=c.sourceFileToPackageName,q=c.redirectTargetsSet,c.structureIsReused=2}();if(2!==W){e.forEach(a,(function(e){return Te(e,!1)}));var Q=e.getAutomaticTypeDirectiveNames(o,s);if(Q.length)for(var Y=o.configFilePath?e.getDirectoryPath(o.configFilePath):s.getCurrentDirectory(),X=e.combinePaths(Y,"__inferred type names__.ts"),Z=I(Q,X),ee=0;ee<Q.length;ee++)Fe(Q[ee],Z[ee]);P||(o.lib?e.forEach(o.lib,(function(t){Te(e.combinePaths(F,t),!0)})):Te(O(),!0)),K=e.arrayFrom(V.keys(),(function(e){return e})).filter((function(e){return!V.get(e)}))}if(e.Debug.assert(!!K),w=void 0,c&&s.onReleaseOldSourceFile)for(var te=0,ne=c.getSourceFiles();te<ne.length;te++){var re=ne[te];pe(re.path)&&!G||s.onReleaseOldSourceFile(re,c.getCompilerOptions())}return c=void 0,l={getRootFileNames:function(){return a},getSourceFile:pe,getSourceFileByPath:fe,getSourceFiles:function(){return v},getMissingFilePaths:function(){return K},getCompilerOptions:function(){return o},getSyntacticDiagnostics:function(e,t){return _e(e,me,t)},getOptionsDiagnostics:function(){return e.sortAndDeduplicateDiagnostics(e.concatenate(S.getGlobalDiagnostics(),e.concatenate(L.getGlobalDiagnostics(),o.configFile?L.getDiagnostics(o.configFile.fileName):[])))},getGlobalDiagnostics:function(){return e.sortAndDeduplicateDiagnostics(le().getGlobalDiagnostics().slice())},getSemanticDiagnostics:function(e,t){return _e(e,he,t)},getDeclarationDiagnostics:function(e,t){var n=l.getCompilerOptions();return!e||n.out||n.outFile?be(e,t):_e(e,Se,t)},getTypeChecker:ue,getClassifiableNames:function(){if(!h){ue(),h=e.createUnderscoreEscapedMap();for(var t=0,n=v;t<n.length;t++){var r=n[t];e.copyEntries(r.classifiableNames,h)}}return h},getDiagnosticsProducingTypeChecker:le,getCommonSourceDirectory:ae,emit:function(t,n,r,i,a){return ge((function(){return function(t,n,r,i,a,s){var c=[];if(o.noEmit)return{diagnostics:c,sourceMaps:void 0,emittedFiles:void 0,emitSkipped:!0};if(o.noEmitOnError){var l=t.getOptionsDiagnostics(i).concat(t.getSyntacticDiagnostics(n,i),t.getGlobalDiagnostics(i),t.getSemanticDiagnostics(n,i));if(0===l.length&&t.getCompilerOptions().declaration&&(c=t.getDeclarationDiagnostics(void 0,i)),l.length>0||c.length>0)return{diagnostics:e.concatenate(l,c),sourceMaps:void 0,emittedFiles:void 0,emitSkipped:!0}}var u=le().getEmitResolver(o.outFile||o.out?void 0:n);e.performance.mark("beforeEmit");var d=a?[]:e.getTransformers(o,s),p=e.emitFiles(u,se(r),n,a,d);return e.performance.mark("afterEmit"),e.performance.measure("Emit","beforeEmit","afterEmit"),p}(l,t,n,r,i,a)}))},getCurrentDirectory:function(){return R},getNodeCount:function(){return le().getNodeCount()},getIdentifierCount:function(){return le().getIdentifierCount()},getSymbolCount:function(){return le().getSymbolCount()},getTypeCount:function(){return le().getTypeCount()},getFileProcessingDiagnostics:function(){return S},getResolvedTypeReferenceDirectives:function(){return k},isSourceFileFromExternalLibrary:ce,isSourceFileDefaultLibrary:function(t){if(t.hasNoDefaultLib)return!0;if(!o.noLib)return!1;return o.lib?e.forEach(o.lib,(function(n){return 0===e.compareStrings(t.fileName,e.combinePaths(F,n),!s.useCaseSensitiveFileNames())})):0===e.compareStrings(t.fileName,O(),!s.useCaseSensitiveFileNames())},dropDiagnosticsProducingTypeChecker:function(){d=void 0},getSourceFileFromReference:function(e,t){return Ae(n(t.fileName,e.fileName),(function(e){return V.get(ie(e))}))},sourceFileToPackageName:J,redirectTargetsSet:q},function(){o.isolatedModules&&(o.declaration&&$e(e.Diagnostics.Option_0_cannot_be_specified_with_option_1,"declaration","isolatedModules"),o.noEmitOnError&&$e(e.Diagnostics.Option_0_cannot_be_specified_with_option_1,"noEmitOnError","isolatedModules"),o.out&&$e(e.Diagnostics.Option_0_cannot_be_specified_with_option_1,"out","isolatedModules"),o.outFile&&$e(e.Diagnostics.Option_0_cannot_be_specified_with_option_1,"outFile","isolatedModules"));o.inlineSourceMap&&(o.sourceMap&&$e(e.Diagnostics.Option_0_cannot_be_specified_with_option_1,"sourceMap","inlineSourceMap"),o.mapRoot&&$e(e.Diagnostics.Option_0_cannot_be_specified_with_option_1,"mapRoot","inlineSourceMap"));o.paths&&void 0===o.baseUrl&&$e(e.Diagnostics.Option_paths_cannot_be_used_without_specifying_baseUrl_option,"paths");if(o.paths)for(var t in o.paths)if(e.hasProperty(o.paths,t))if(e.hasZeroOrOneAsteriskCharacter(t)||Be(!0,t,e.Diagnostics.Pattern_0_can_have_at_most_one_Asterisk_character,t),e.isArray(o.paths[t])){var n=o.paths[t].length;0===n&&Be(!1,t,e.Diagnostics.Substitutions_for_pattern_0_shouldn_t_be_an_empty_array,t);for(var r=0;r<n;r++){var i=o.paths[t][r],a=typeof i;"string"===a?e.hasZeroOrOneAsteriskCharacter(i)||Ue(t,r,e.Diagnostics.Substitution_0_in_pattern_1_in_can_have_at_most_one_Asterisk_character,i,t):Ue(t,r,e.Diagnostics.Substitution_0_for_pattern_1_has_incorrect_type_expected_string_got_2,i,t,a)}}else Be(!1,t,e.Diagnostics.Substitutions_for_pattern_0_should_be_an_array,t);o.sourceMap||o.inlineSourceMap||(o.inlineSources&&$e(e.Diagnostics.Option_0_can_only_be_used_when_either_option_inlineSourceMap_or_option_sourceMap_is_provided,"inlineSources"),o.sourceRoot&&$e(e.Diagnostics.Option_0_can_only_be_used_when_either_option_inlineSourceMap_or_option_sourceMap_is_provided,"sourceRoot"));o.out&&o.outFile&&$e(e.Diagnostics.Option_0_cannot_be_specified_with_option_1,"out","outFile");o.mapRoot&&!o.sourceMap&&$e(e.Diagnostics.Option_0_cannot_be_specified_without_specifying_option_1,"mapRoot","sourceMap");o.declarationDir&&(o.declaration||$e(e.Diagnostics.Option_0_cannot_be_specified_without_specifying_option_1,"declarationDir","declaration"),(o.out||o.outFile)&&$e(e.Diagnostics.Option_0_cannot_be_specified_with_option_1,"declarationDir",o.out?"out":"outFile"));o.lib&&o.noLib&&$e(e.Diagnostics.Option_0_cannot_be_specified_with_option_1,"lib","noLib");o.noImplicitUseStrict&&(void 0===o.alwaysStrict?o.strict:o.alwaysStrict)&&$e(e.Diagnostics.Option_0_cannot_be_specified_with_option_1,"noImplicitUseStrict","alwaysStrict");var c=o.target||0,l=o.outFile||o.out,u=e.forEach(v,(function(t){return e.isExternalModule(t)&&!t.isDeclarationFile?t:void 0}));if(o.isolatedModules){o.module===e.ModuleKind.None&&c<2&&$e(e.Diagnostics.Option_isolatedModules_can_only_be_used_when_either_option_module_is_provided_or_option_target_is_ES2015_or_higher,"isolatedModules","target");var d=e.forEach(v,(function(t){return e.isExternalModule(t)||t.isDeclarationFile?void 0:t}));if(d){var p=e.getErrorSpanForNode(d,d);L.add(e.createFileDiagnostic(d,p.start,p.length,e.Diagnostics.Cannot_compile_namespaces_when_the_isolatedModules_flag_is_provided))}}else if(u&&c<2&&o.module===e.ModuleKind.None){var f=e.getErrorSpanForNode(u,u.externalModuleIndicator);L.add(e.createFileDiagnostic(u,f.start,f.length,e.Diagnostics.Cannot_use_imports_exports_or_module_augmentations_when_module_is_none))}if(l)if(o.module&&o.module!==e.ModuleKind.AMD&&o.module!==e.ModuleKind.System)$e(e.Diagnostics.Only_amd_and_system_modules_are_supported_alongside_0,o.out?"out":"outFile","module");else if(void 0===o.module&&u){var _=e.getErrorSpanForNode(u,u.externalModuleIndicator);L.add(e.createFileDiagnostic(u,_.start,_.length,e.Diagnostics.Cannot_compile_modules_using_option_0_unless_the_module_flag_is_amd_or_system,o.out?"out":"outFile"))}if(o.outDir||o.sourceRoot||o.mapRoot){var m=ae();o.outDir&&""===m&&e.forEach(v,(function(t){return e.getRootLength(t.fileName)>1}))&&$e(e.Diagnostics.Cannot_find_the_common_subdirectory_path_for_the_input_files,"outDir")}!o.noEmit&&o.allowJs&&o.declaration&&$e(e.Diagnostics.Option_0_cannot_be_specified_with_option_1,"allowJs","declaration");o.checkJs&&!o.allowJs&&L.add(e.createCompilerDiagnostic(e.Diagnostics.Option_0_cannot_be_specified_without_specifying_option_1,"checkJs","allowJs"));o.emitDecoratorMetadata&&!o.experimentalDecorators&&$e(e.Diagnostics.Option_0_cannot_be_specified_without_specifying_option_1,"emitDecoratorMetadata","experimentalDecorators");o.jsxFactory?(o.reactNamespace&&$e(e.Diagnostics.Option_0_cannot_be_specified_with_option_1,"reactNamespace","jsxFactory"),e.parseIsolatedEntityName(o.jsxFactory,c)||Ke("jsxFactory",e.Diagnostics.Invalid_value_for_jsxFactory_0_is_not_a_valid_identifier_or_qualified_name,o.jsxFactory)):o.reactNamespace&&!e.isIdentifierText(o.reactNamespace,c)&&Ke("reactNamespace",e.Diagnostics.Invalid_value_for_reactNamespace_0_is_not_a_valid_identifier,o.reactNamespace);if(!o.noEmit&&!o.suppressOutputPathCheck){var g=se(),h=e.createMap();e.forEachEmittedFile(g,(function(e){y(e.jsFilePath,h),y(e.declarationFilePath,h)}))}function y(t,n){if(t){var r,i=ie(t);if(V.has(i))o.configFilePath||(r=e.chainDiagnosticMessages(void 0,e.Diagnostics.Adding_a_tsconfig_json_file_will_help_organize_projects_that_contain_both_TypeScript_and_JavaScript_files_Learn_more_at_https_Colon_Slash_Slashaka_ms_Slashtsconfig)),r=e.chainDiagnosticMessages(r,e.Diagnostics.Cannot_write_file_0_because_it_would_overwrite_input_file,t),Ve(t,e.createCompilerDiagnosticFromMessageChain(r));var a=s.useCaseSensitiveFileNames()?i:i.toLocaleLowerCase();n.has(a)?Ve(t,e.createCompilerDiagnostic(e.Diagnostics.Cannot_write_file_0_because_it_would_be_overwritten_by_multiple_input_files,t)):n.set(a,!0)}}}(),e.performance.mark("afterProgram"),e.performance.measure("Program","beforeProgram","afterProgram"),l;function ie(t){return e.toPath(t,R,Re)}function ae(){if(void 0===u){var t=e.filter(v,(function(t){return e.sourceFileMayBeEmitted(t,o,ce)}));(u=o.rootDir&&function(t,n){var r=!0;if(t)for(var i=s.getCanonicalFileName(e.getNormalizedAbsolutePath(n,R)),a=0,c=t;a<c.length;a++){var l=c[a];if(!l.isDeclarationFile)0!==s.getCanonicalFileName(e.getNormalizedAbsolutePath(l.fileName,R)).indexOf(i)&&(L.add(e.createCompilerDiagnostic(e.Diagnostics.File_0_is_not_under_rootDir_1_rootDir_is_expected_to_contain_all_source_files,l.fileName,o.rootDir)),r=!1)}return r}(t,o.rootDir)?e.getNormalizedAbsolutePath(o.rootDir,R):function(e){for(var t=[],n=0,i=e;n<i.length;n++){var a=i[n];a.isDeclarationFile||t.push(a.fileName)}return r(t,R,Re)}(t))&&u[u.length-1]!==e.directorySeparator&&(u+=e.directorySeparator)}return u}function oe(t,n,r,i){if(0===W&&!r.ambientModuleNames.length)return N(t,n);var a,c,l,u=i.program&&i.program.getSourceFile(n);if(u!==r&&r.resolvedModules){for(var d=[],p=0,f=t;p<f.length;p++){var _=f[p],m=r.resolvedModules.get(_);d.push(m)}return d}for(var g={},h=0;h<t.length;h++){_=t[h];if(r===u&&!B(u.path)){var y=u&&u.resolvedModules.get(_);if(y){e.isTraceEnabled(o,s)&&e.trace(s,e.Diagnostics.Reusing_resolution_of_module_0_to_file_1_from_old_program,_,n),(c||(c=new Array(t.length)))[h]=y,(l||(l=[])).push(_);continue}}var v=!1;e.contains(r.ambientModuleNames,_)?(v=!0,e.isTraceEnabled(o,s)&&e.trace(s,e.Diagnostics.Module_0_was_resolved_as_locally_declared_ambient_module_in_file_1,_,n)):v=k(_,i),v?(c||(c=new Array(t.length)))[h]=g:(a||(a=[])).push(_)}var b=a&&a.length?N(a,n,l):e.emptyArray;if(!c)return e.Debug.assert(b.length===t.length),b;var x=0;for(h=0;h<c.length;h++)c[h]?c[h]===g&&(c[h]=void 0):(c[h]=b[x],x++);return e.Debug.assert(x===b.length),c;function k(t,n){if(e.getResolvedModule(n.file,t))return!1;var r=n.program&&n.program.getTypeChecker().tryFindAmbientModuleWithoutAugmentations(t);if(!r||!r.declarations)return!1;var i=e.forEach(r.declarations,(function(t){var r=e.getSourceFileOfNode(t);return!e.contains(n.modifiedFilePaths,r.path)&&r}));return!!i&&(e.isTraceEnabled(o,s)&&e.trace(s,e.Diagnostics.Module_0_was_resolved_as_ambient_module_declared_in_1_since_this_file_was_not_modified,t,i.fileName),!0)}}function se(e){return{getCanonicalFileName:Re,getCommonSourceDirectory:l.getCommonSourceDirectory,getCompilerOptions:l.getCompilerOptions,getCurrentDirectory:function(){return R},getNewLine:function(){return s.getNewLine()},getSourceFile:l.getSourceFile,getSourceFileByPath:l.getSourceFileByPath,getSourceFiles:l.getSourceFiles,isSourceFileFromExternalLibrary:ce,writeFile:e||function(e,t,n,r,i){return s.writeFile(e,t,n,r,i)},isEmitBlocked:de}}function ce(e){return D.get(e.path)}function le(){return d||(d=e.createTypeChecker(l,!0))}function ue(){return p||(p=e.createTypeChecker(l,!1))}function de(e){return U.has(ie(e))}function pe(e){return fe(ie(e))}function fe(e){return V.get(e)}function _e(t,n,r){return t?n(t,r):e.sortAndDeduplicateDiagnostics(e.flatMap(l.getSourceFiles(),(function(e){return r&&r.throwIfCancellationRequested(),n(e,r)})))}function me(t){return e.isSourceFileJavaScript(t)?(t.additionalSyntacticDiagnostics||(t.additionalSyntacticDiagnostics=function(t){return ge((function(){var n=[],r=t;return i(t),n;function i(t){switch(r.kind){case 146:case 149:if(r.questionToken===t)return void n.push(l(t,e.Diagnostics._0_can_only_be_used_in_a_ts_file,"?"));case 151:case 150:case 152:case 153:case 154:case 186:case 228:case 187:case 226:if(r.type===t)return void n.push(l(t,e.Diagnostics.types_can_only_be_used_in_a_ts_file))}switch(t.kind){case 237:return void n.push(l(t,e.Diagnostics.import_can_only_be_used_in_a_ts_file));case 243:if(t.isExportEquals)return void n.push(l(t,e.Diagnostics.export_can_only_be_used_in_a_ts_file));break;case 259:if(108===t.token)return void n.push(l(t,e.Diagnostics.implements_clauses_can_only_be_used_in_a_ts_file));break;case 230:return void n.push(l(t,e.Diagnostics.interface_declarations_can_only_be_used_in_a_ts_file));case 233:return void n.push(l(t,e.Diagnostics.module_declarations_can_only_be_used_in_a_ts_file));case 231:return void n.push(l(t,e.Diagnostics.type_aliases_can_only_be_used_in_a_ts_file));case 232:return void n.push(l(t,e.Diagnostics.enum_declarations_can_only_be_used_in_a_ts_file));case 203:return void n.push(l(t,e.Diagnostics.non_null_assertions_can_only_be_used_in_a_ts_file));case 202:return void n.push(l(t.type,e.Diagnostics.type_assertion_expressions_can_only_be_used_in_a_ts_file));case 184:e.Debug.fail()}var o=r;r=t,e.forEachChild(t,i,a),r=o}function a(t){switch(r.decorators!==t||o.experimentalDecorators||n.push(l(r,e.Diagnostics.Experimental_support_for_decorators_is_a_feature_that_is_subject_to_change_in_a_future_release_Set_the_experimentalDecorators_option_to_remove_this_warning)),r.kind){case 229:case 151:case 150:case 152:case 153:case 154:case 186:case 228:case 187:if(t===r.typeParameters)return void n.push(c(t,e.Diagnostics.type_parameter_declarations_can_only_be_used_in_a_ts_file));case 208:if(t===r.modifiers)return s(t,208===r.kind);break;case 149:if(t===r.modifiers){for(var a=0,u=t;a<u.length;a++){var d=u[a];115!==d.kind&&n.push(l(d,e.Diagnostics._0_can_only_be_used_in_a_ts_file,e.tokenToString(d.kind)))}return}break;case 146:if(t===r.modifiers)return void n.push(c(t,e.Diagnostics.parameter_modifiers_can_only_be_used_in_a_ts_file));break;case 181:case 182:case 201:if(t===r.typeArguments)return void n.push(c(t,e.Diagnostics.type_arguments_can_only_be_used_in_a_ts_file))}for(var p=0,f=t;p<f.length;p++){i(f[p])}}function s(t,r){for(var i=0,a=t;i<a.length;i++){var o=a[i];switch(o.kind){case 76:if(r)continue;case 114:case 112:case 113:case 131:case 124:case 117:n.push(l(o,e.Diagnostics._0_can_only_be_used_in_a_ts_file,e.tokenToString(o.kind)))}}}function c(n,r,i,a,o){var s=n.pos;return e.createFileDiagnostic(t,s,n.end-s,r,i,a,o)}function l(n,r,i,a,o){return e.createDiagnosticForNodeInSourceFile(t,n,r,i,a,o)}}))}(t),e.isCheckJsEnabledForFile(t,o)&&(t.additionalSyntacticDiagnostics=e.concatenate(t.additionalSyntacticDiagnostics,t.jsDocDiagnostics))),e.concatenate(t.additionalSyntacticDiagnostics,t.parseDiagnostics)):t.parseDiagnostics}function ge(t){try{return t()}catch(t){throw t instanceof e.OperationCanceledException&&(p=void 0,d=void 0),t}}function he(e,t){return ke(e,t,b,ye)}function ye(t,n){return ge((function(){if(o.skipLibCheck&&t.isDeclarationFile||o.skipDefaultLibCheck&&t.hasNoDefaultLib)return e.emptyArray;var r=le();e.Debug.assert(!!t.bindDiagnostics);var i=3===t.scriptKind||4===t.scriptKind||5===t.scriptKind||e.isCheckJsEnabledForFile(t,o),a=i?t.bindDiagnostics:e.emptyArray,s=i?r.getDiagnostics(t,n):e.emptyArray,c=S.getDiagnostics(t.fileName),l=L.getDiagnostics(t.fileName),u=a.concat(s,c,l);return e.filter(u,ve)}))}function ve(n){var r=n.file,i=n.start;if(r)for(var a=e.getLineStarts(r),o=e.computeLineAndCharacterOfPosition(a,i).line;o>0;){var s=r.text.slice(a[o-1],a[o]),c=t.exec(s);if(!c)return!0;if(c[3])return!1;o--}return!0}function be(e,t){return ke(e,t,x,xe)}function xe(t,n){return ge((function(){var r=le().getEmitResolver(t,n);return e.getDeclarationDiagnostics(se(e.noop),r,t)}))}function ke(t,n,r,i){var a=t?r.perFile&&r.perFile.get(t.path):r.allDiagnostics;if(a)return a;var o=i(t,n)||e.emptyArray;return t?(r.perFile||(r.perFile=e.createMap()),r.perFile.set(t.path,o)):r.allDiagnostics=o,o}function Se(e,t){return e.isDeclarationFile?[]:be(e,t)}function Te(t,n){we(e.normalizePath(t),n,void 0)}function Ce(e,t){return e.fileName===t.fileName}function Ee(e,t){return 9===e.kind?9===t.kind&&e.text===t.text:71===t.kind&&e.escapedText===t.escapedText}function De(t){if(!t.imports){var n,r,i,a=e.isSourceFileJavaScript(t),s=e.isExternalModule(t);if(o.importHelpers&&(o.isolatedModules||s)&&!t.isDeclarationFile){var c=e.createLiteral(e.externalHelpersModuleNameText),l=e.createImportDeclaration(void 0,void 0,void 0);c.parent=l,l.parent=t,n=[c]}for(var u=0,d=t.statements;u<d.length;u++){var p=d[u];f(p,!1),(524288&t.flags||a)&&_(p)}return t.imports=n||e.emptyArray,t.moduleAugmentations=r||e.emptyArray,void(t.ambientModuleNames=i||e.emptyArray)}function f(a,o){switch(a.kind){case 238:case 237:case 244:var c=e.getExternalModuleName(a);if(!c||!e.isStringLiteral(c))break;if(!c.text)break;o&&e.isExternalModuleNameRelative(c.text)||(n||(n=[])).push(c);break;case 233:if(e.isAmbientModule(a)&&(o||e.hasModifier(a,2)||t.isDeclarationFile)){var l=a.name,u=e.getTextOfIdentifierOrLiteral(l);if(s||o&&!e.isExternalModuleNameRelative(u))(r||(r=[])).push(l);else if(!o){t.isDeclarationFile&&(i||(i=[])).push(u);var d=a.body;if(d)for(var p=0,_=d.statements;p<_.length;p++){f(_[p],!0)}}}}}function _(t){e.isRequireCall(t,!0)||e.isImportCall(t)&&1===t.arguments.length&&9===t.arguments[0].kind?(n||(n=[])).push(t.arguments[0]):e.forEachChild(t,_)}}function Ae(t,n,r,i){if(e.hasExtension(t)){if(!o.allowNonTsExtensions&&!e.forEach(M,(function(n){return e.fileExtensionIs(s.getCanonicalFileName(t),n)})))return void(r&&r(e.Diagnostics.File_0_has_unsupported_extension_The_only_supported_extensions_are_1,t,"'"+M.join("', '")+"'"));var a=n(t);return r&&(a?i&&s.getCanonicalFileName(t)===s.getCanonicalFileName(i.fileName)&&r(e.Diagnostics.A_file_cannot_have_a_reference_to_itself):r(e.Diagnostics.File_0_not_found,t)),a}var c=o.allowNonTsExtensions&&n(t);if(c)return c;if(!r||!o.allowNonTsExtensions){var l=e.forEach(M,(function(e){return n(t+e)}));return r&&!l&&r(e.Diagnostics.File_0_not_found,t+".ts"),l}r(e.Diagnostics.File_0_not_found,t)}function we(t,n,r,i,a,o){Ae(t,(function(e){return Ie(e,ie(e),n,i,a,o,r)}),(function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];S.add(void 0!==i&&void 0!==o&&void 0!==a?e.createFileDiagnostic.apply(void 0,[i,a,o-a,t].concat(n)):e.createCompilerDiagnostic.apply(void 0,[t].concat(n)))}),i)}function Ne(t,n,r,i,a){void 0!==r&&void 0!==i&&void 0!==a?S.add(e.createFileDiagnostic(r,i,a-i,e.Diagnostics.File_name_0_differs_from_already_included_file_name_1_only_in_casing,t,n)):S.add(e.createCompilerDiagnostic(e.Diagnostics.File_name_0_differs_from_already_included_file_name_1_only_in_casing,t,n))}function Ie(t,n,r,i,a,c,l){if(V.has(n)){var u=V.get(n);return u&&o.forceConsistentCasingInFileNames&&e.getNormalizedAbsolutePath(u.fileName,R)!==e.getNormalizedAbsolutePath(t,R)&&Ne(t,u.fileName,i,a,c),u&&D.get(u.path)&&0===C?(D.set(u.path,!1),o.noResolve||(Pe(u,r),Oe(u)),E.set(u.path,!1),Me(u)):u&&E.get(u.path)&&C<T&&(E.set(u.path,!1),Me(u)),u}var d=s.getSourceFile(t,o.target,(function(n){void 0!==i&&void 0!==a&&void 0!==c?S.add(e.createFileDiagnostic(i,a,c-a,e.Diagnostics.Cannot_read_file_0_Colon_1,t,n)):S.add(e.createCompilerDiagnostic(e.Diagnostics.Cannot_read_file_0_Colon_1,t,n))}),G);if(l){var p=l.name+"/"+l.subModuleName+"@"+l.version,f=z.get(p);if(f){var _=function(e,t,n,r){var i=Object.create(e);return i.fileName=n,i.path=r,i.redirectInfo={redirectTarget:e,unredirected:t},Object.defineProperties(i,{id:{get:function(){return this.redirectInfo.redirectTarget.id},set:function(e){this.redirectInfo.redirectTarget.id=e}},symbol:{get:function(){return this.redirectInfo.redirectTarget.symbol},set:function(e){this.redirectInfo.redirectTarget.symbol=e}}}),i}(f,d,t,n);return q.set(f.path,!0),V.set(n,_),J.set(n,l.name),v.push(_),_}d&&(z.set(p,d),J.set(n,l.name))}if(V.set(n,d),d){if(D.set(n,C>0),d.path=n,s.useCaseSensitiveFileNames()){var m=n.toLowerCase(),g=H.get(m);g?Ne(t,g.fileName,i,a,c):H.set(m,d)}P=P||d.hasNoDefaultLib,o.noResolve||(Pe(d,r),Oe(d)),Me(d),r?v.unshift(d):v.push(d)}return d}function Pe(t,r){e.forEach(t.referencedFiles,(function(e){we(n(e.fileName,t.fileName),r,void 0,t,e.pos,e.end)}))}function Oe(t){for(var n=e.map(t.typeReferenceDirectives,(function(e){return e.fileName.toLocaleLowerCase()})),r=I(n,t.fileName),i=0;i<n.length;i++){var a=t.typeReferenceDirectives[i],o=r[i],s=a.fileName.toLocaleLowerCase();e.setResolvedTypeReferenceDirective(t,s,o),Fe(s,o,t,a.pos,a.end)}}function Fe(t,n,r,i,a){var o=k.get(t);if(!o||!o.primary){var c=!0;if(n)if(n.primary)we(n.resolvedFileName,!1,n.packageId,r,i,a);else if(o){if(n.resolvedFileName!==o.resolvedFileName)s.readFile(n.resolvedFileName)!==pe(o.resolvedFileName).text&&S.add(Le(r,i,a,e.Diagnostics.Conflicting_definitions_for_0_found_at_1_and_2_Consider_installing_a_specific_version_of_this_library_to_resolve_the_conflict,t,n.resolvedFileName,o.resolvedFileName));c=!1}else we(n.resolvedFileName,!1,n.packageId,r,i,a);else S.add(Le(r,i,a,e.Diagnostics.Cannot_find_type_definition_file_for_0,t));c&&k.set(t,n)}}function Le(t,n,r,i){for(var a=[],o=4;o<arguments.length;o++)a[o-4]=arguments[o];return void 0===t||void 0===n||void 0===r?e.createCompilerDiagnostic.apply(void 0,[i].concat(a)):e.createFileDiagnostic.apply(void 0,[t,n,r-n,i].concat(a))}function Re(e){return s.getCanonicalFileName(e)}function Me(t){if(De(t),t.imports.length||t.moduleAugmentations.length){var n=g(t),r={program:c,file:t,modifiedFilePaths:y},i=oe(n,e.getNormalizedAbsolutePath(t.fileName,R),t,r);e.Debug.assert(i.length===n.length);for(var a=0;a<n.length;a++){var s=i[a];if(e.setResolvedModule(t,n[a],s),s){var l=s.isExternalLibraryImport,u=!e.extensionIsTypeScript(s.extension),d=l&&u,p=s.resolvedFileName;l&&C++;var f=d&&C>T,m=p&&!_(o,s)&&!o.noResolve&&a<t.imports.length&&!f&&!(u&&!o.allowJs);if(f)E.set(t.path,!0);else if(m){Ie(p,ie(p),!1,t,e.skipTrivia(t.text,t.imports[a].pos),t.imports[a].end,s.packageId)}l&&C--}}}else t.resolvedModules=void 0}function Ue(t,n,r,i,a,s){for(var c=!0,l=0,u=je();l<u.length;l++){var d=u[l];if(e.isObjectLiteralExpression(d.initializer))for(var p=0,f=e.getPropertyAssignment(d.initializer,t);p<f.length;p++){var _=f[p];e.isArrayLiteralExpression(_.initializer)&&_.initializer.elements.length>n&&(L.add(e.createDiagnosticForNodeInSourceFile(o.configFile,_.initializer.elements[n],r,i,a,s)),c=!1)}}c&&L.add(e.createCompilerDiagnostic(r,i,a,s))}function Be(t,n,r,i){for(var a=!0,o=0,s=je();o<s.length;o++){var c=s[o];e.isObjectLiteralExpression(c.initializer)&&qe(c.initializer,t,n,void 0,r,i)&&(a=!1)}a&&L.add(e.createCompilerDiagnostic(r,i))}function je(){var t=Je();return t?e.getPropertyAssignment(t,"paths"):e.emptyArray}function $e(e,t,n){ze(!0,t,n,e,t,n)}function Ke(e,t,n){ze(!1,e,void 0,t,n)}function ze(t,n,r,i,a,o){var s=Je();(!s||!qe(s,t,n,r,i,a,o))&&L.add(e.createCompilerDiagnostic(i,a,o))}function Je(){if(void 0===A&&(A=null,o.configFile&&o.configFile.jsonObject))for(var t=0,n=e.getPropertyAssignment(o.configFile.jsonObject,"compilerOptions");t<n.length;t++){var r=n[t];if(e.isObjectLiteralExpression(r.initializer)){A=r.initializer;break}}return A}function qe(t,n,r,i,a,s,c){for(var l=e.getPropertyAssignment(t,r,i),u=0,d=l;u<d.length;u++){var p=d[u];L.add(e.createDiagnosticForNodeInSourceFile(o.configFile,n?p.name:p.initializer,a,s,c))}return!!l.length}function Ve(e,t){U.set(ie(e),!0),L.add(t)}},e.getResolutionDiagnostic=_}(ts||(ts={})),function(e){var t,n;function r(e){return e&&void 0!==e.enableAutoDiscovery&&void 0===e.enable?{enable:e.enableAutoDiscovery,include:e.include||[],exclude:e.exclude||[]}:e}function i(){if(t)return t;var n=e.createMap(),r=e.createMap();return e.forEach(e.optionDeclarations,(function(e){n.set(e.name.toLowerCase(),e),e.shortName&&r.set(e.shortName,e.name)})),t={optionNameMap:n,shortOptionNames:r}}function a(t){return o(t,e.createCompilerDiagnostic)}function o(t,n){var r=e.arrayFrom(t.type.keys()).map((function(e){return"'"+e+"'"})).join(", ");return n(e.Diagnostics.Argument_for_0_option_must_be_Colon_1,"--"+t.name,r)}function s(e,t,n){return F(e,L(t||""),n)}function c(t,n,r){if(void 0===n&&(n=""),n=L(n),!e.startsWith(n,"-")){if(""===n)return[];var i=n.split(",");switch(t.element.type){case"number":return e.map(i,parseInt);case"string":return e.map(i,(function(e){return e||""}));default:return e.filter(e.map(i,(function(e){return s(t.element,e,r)})),(function(e){return!!e}))}}}function l(e,t){void 0===t&&(t=!1),e=e.toLowerCase();var n=i(),r=n.optionNameMap,a=n.shortOptionNames;if(t){var o=a.get(e);void 0!==o&&(e=o)}return r.get(e)}function u(t,n){var r=e.parseJsonText(t,n);return{config:_(r,r.parseDiagnostics),error:r.parseDiagnostics.length?r.parseDiagnostics[0]:void 0}}function d(t,n){var r=p(t,n);return e.isString(r)?e.parseJsonText(t,r):{parseDiagnostics:[r]}}function p(t,n){var r;try{r=n(t)}catch(n){return e.createCompilerDiagnostic(e.Diagnostics.Cannot_read_file_0_Colon_1,t,n.message)}return void 0===r?e.createCompilerDiagnostic(e.Diagnostics.The_specified_path_does_not_exist_Colon_0,t):r}function f(t){return e.arrayToMap(t,(function(e){return e.name}))}function _(e,t){return m(e,t,void 0,void 0)}function m(t,n,r,i){return t.jsonObject?a(t.jsonObject,r,void 0,void 0):{};function a(a,o,l,u){for(var d={},p=0,f=a.properties;p<f.length;p++){var _=f[p];if(261===_.kind){_.questionToken&&n.push(e.createDiagnosticForNodeInSourceFile(t,_.questionToken,e.Diagnostics._0_can_only_be_used_in_a_ts_file,"?")),c(_.name)||n.push(e.createDiagnosticForNodeInSourceFile(t,_.name,e.Diagnostics.String_literal_with_double_quotes_expected));var m=e.unescapeLeadingUnderscores(e.getTextOfPropertyName(_.name)),g=o?o.get(m):void 0;l&&!g&&n.push(e.createDiagnosticForNodeInSourceFile(t,_.name,l,m));var y=s(_.initializer,g);if(void 0!==m&&(d[m]=y,i&&(u||o===r))){var v=h(g,y);u?v&&i.onSetValidOptionKeyValueInParent(u,g,y):o===r&&(v?i.onSetValidOptionKeyValueInRoot(m,_.name,y,_.initializer):g||i.onSetUnknownOptionKeyValueInRoot(m,_.name,y,_.initializer))}}else n.push(e.createDiagnosticForNodeInSourceFile(t,_,e.Diagnostics.Property_assignment_expected))}return d}function s(r,i){switch(r.kind){case 101:return m(i&&"boolean"!==i.type),!0;case 86:return m(i&&"boolean"!==i.type),!1;case 95:return m(i&&"extends"===i.name),null;case 9:c(r)||n.push(e.createDiagnosticForNodeInSourceFile(t,r,e.Diagnostics.String_literal_with_double_quotes_expected)),m(i&&e.isString(i.type)&&"string"!==i.type);var l=r.text;if(i&&!e.isString(i.type)){var u=i;u.type.has(l.toLowerCase())||n.push(o(u,(function(n,i,a){return e.createDiagnosticForNodeInSourceFile(t,r,n,i,a)})))}return l;case 8:return m(i&&"number"!==i.type),Number(r.text);case 178:m(i&&"object"!==i.type);var d=r;if(i){var p=i;return a(d,p.elementOptions,p.extraKeyDiagnosticMessage,p.name)}return a(d,void 0,void 0,void 0);case 177:return m(i&&"list"!==i.type),f=r.elements,_=i&&i.element,f.map((function(e){return s(e,_)}))}var f,_;return void(i?m(!0):n.push(e.createDiagnosticForNodeInSourceFile(t,r,e.Diagnostics.Property_value_can_only_be_string_literal_numeric_literal_true_false_null_object_literal_or_array_literal)));function m(a){a&&n.push(e.createDiagnosticForNodeInSourceFile(t,r,e.Diagnostics.Compiler_option_0_requires_a_value_of_type_1,i.name,g(i)))}}function c(n){return e.isStringLiteral(n)&&e.isStringDoubleQuoted(n,t)}}function g(t){return"list"===t.type?"Array":e.isString(t.type)?t.type:"string"}function h(t,n){if(t)return!!v(n)||("list"===t.type?e.isArray(n):typeof n===(e.isString(t.type)?t.type:"string"))}function y(e,t){t&&Object.defineProperty(e,"configFile",{enumerable:!1,writable:!1,value:t})}function v(e){return null==e}function b(t,n){return e.getDirectoryPath(e.toPath(t,n,e.identity))}function x(t,n,r,i,a,o,s,c){void 0===a&&(a={}),void 0===s&&(s=[]),void 0===c&&(c=[]),e.Debug.assert(void 0===t&&void 0!==n||void 0!==t&&void 0===n);var l=[],u=e.createGetCanonicalFileName(r.useCaseSensitiveFileNames),d=T(t,n,r,i,o,u,s,l),p=d.raw,f=e.extend(a,d.options||{});f.configFilePath=o,y(f,n);var _=function(){var t,a,u;e.hasProperty(p,"files")&&!v(p.files)&&(e.isArray(p.files)?0===(t=p.files).length&&x(e.Diagnostics.The_files_list_in_config_file_0_is_empty,o||"tsconfig.json"):x(e.Diagnostics.Compiler_option_0_requires_a_value_of_type_1,"files","Array"));e.hasProperty(p,"include")&&!v(p.include)&&(e.isArray(p.include)?a=p.include:x(e.Diagnostics.Compiler_option_0_requires_a_value_of_type_1,"include","Array"));if(e.hasProperty(p,"exclude")&&!v(p.exclude))e.isArray(p.exclude)?u=p.exclude:x(e.Diagnostics.Compiler_option_0_requires_a_value_of_type_1,"exclude","Array");else{var d=p.compilerOptions&&p.compilerOptions.outDir;d&&(u=[d])}void 0===t&&void 0===a&&(a=["**/*"]);var _=function(t,n,r,i,a,o,s,c,l){var u,d;i=e.normalizePath(i),n&&(u=K(n,s,!1,l,"include"));r&&(d=K(r,s,!0,l,"exclude"));var p=function(t,n,r,i){var a=e.getRegularExpressionForWildcard(n,r,"exclude"),o=a&&new RegExp(a,i?"":"i"),s={};if(void 0!==t){for(var c=[],l=0,u=t;l<u.length;l++){var d=u[l],p=e.normalizePath(e.combinePaths(r,d));if(!o||!o.test(p)){var f=z(p,i);if(f){var _=f.key,m=f.flags,g=s[_];(void 0===g||g<m)&&(s[_]=m,1===m&&c.push(_))}}}for(var _ in s)if(e.hasProperty(s,_))for(var h=0,y=c;h<y.length;h++){var v=y[h];_!==v&&e.containsPath(v,_,r,!i)&&delete s[_]}}return s}(u,d,i,o.useCaseSensitiveFileNames);return $({filesSpecs:t,includeSpecs:n,excludeSpecs:r,validatedIncludeSpecs:u,validatedExcludeSpecs:d,wildcardDirectories:p},i,a,o,c)}(t,a,u,o?b(o,i):i,f,r,l,c,n);0!==_.fileNames.length||e.hasProperty(p,"files")||0!==s.length||l.push(k(_.spec,o));return _}(),m=_.fileNames,g=_.wildcardDirectories,h=_.spec;return{options:f,fileNames:m,typeAcquisition:d.typeAcquisition||A(),raw:p,errors:l,wildcardDirectories:g,compileOnSave:!!p.compileOnSave,configFileSpecs:h};function x(t,r,i){n||l.push(e.createCompilerDiagnostic(t,r,i))}}function k(t,n){var r=t.includeSpecs,i=t.excludeSpecs;return e.createCompilerDiagnostic(e.Diagnostics.No_inputs_were_found_in_config_file_0_Specified_include_paths_were_1_and_exclude_paths_were_2,n||"tsconfig.json",JSON.stringify(r||[]),JSON.stringify(i||[]))}function S(e){return!!e.options}function T(t,r,i,a,o,s,c,l){a=e.normalizeSlashes(a);var u=e.toPath(o||"",a,s);if(c.indexOf(u)>=0)return l.push(e.createCompilerDiagnostic(e.Diagnostics.Circularity_detected_while_resolving_configuration_Colon_0,c.concat([u]).join(" -> "))),{raw:t||_(r,l)};var p=t?function(t,n,r,i,a,o){e.hasProperty(t,"excludes")&&o.push(e.createCompilerDiagnostic(e.Diagnostics.Unknown_option_excludes_Did_you_mean_exclude));var s,c=D(t.compilerOptions,r,o,a),l=w(t.typeAcquisition||t.typingOptions,r,o,a);if(t.compileOnSave=function(t,n,r){if(!e.hasProperty(t,e.compileOnSaveCommandLineOption.name))return;var i=I(e.compileOnSaveCommandLineOption,t.compileOnSave,n,r);if("boolean"==typeof i&&i)return i;return!1}(t,r,o),t.extends)if(e.isString(t.extends)){var u=a?b(a,r):r;s=C(t.extends,n,u,i,o,e.createCompilerDiagnostic)}else o.push(e.createCompilerDiagnostic(e.Diagnostics.Compiler_option_0_requires_a_value_of_type_1,"extends","string"));return{raw:t,options:c,typeAcquisition:l,extendedConfigPath:s}}(t,i,a,s,o,l):function(t,r,i,a,o,s){var c,l,u,d=E(o),p={onSetValidOptionKeyValueInParent:function(t,n,r){e.Debug.assert("compilerOptions"===t||"typeAcquisition"===t||"typingOptions"===t),("compilerOptions"===t?d:"typeAcquisition"===t?c||(c=A(o)):l||(l=A(o)))[n.name]=P(n,i,r)},onSetValidOptionKeyValueInRoot:function(n,c,l,d){switch(n){case"extends":var p=o?b(o,i):i;return void(u=C(l,r,p,a,s,(function(n,r){return e.createDiagnosticForNodeInSourceFile(t,d,n,r)})));case"files":return void(0===l.length&&s.push(e.createDiagnosticForNodeInSourceFile(t,d,e.Diagnostics.The_files_list_in_config_file_0_is_empty,o||"tsconfig.json")))}},onSetUnknownOptionKeyValueInRoot:function(n,r,i,a){"excludes"===n&&s.push(e.createDiagnosticForNodeInSourceFile(t,r,e.Diagnostics.Unknown_option_excludes_Did_you_mean_exclude))}},_=m(t,s,(void 0===n&&(n=f([{name:"compilerOptions",type:"object",elementOptions:f(e.optionDeclarations),extraKeyDiagnosticMessage:e.Diagnostics.Unknown_compiler_option_0},{name:"typingOptions",type:"object",elementOptions:f(e.typeAcquisitionDeclarations),extraKeyDiagnosticMessage:e.Diagnostics.Unknown_type_acquisition_option_0},{name:"typeAcquisition",type:"object",elementOptions:f(e.typeAcquisitionDeclarations),extraKeyDiagnosticMessage:e.Diagnostics.Unknown_type_acquisition_option_0},{name:"extends",type:"string"},{name:"files",type:"list",element:{name:"files",type:"string"}},{name:"include",type:"list",element:{name:"include",type:"string"}},{name:"exclude",type:"list",element:{name:"exclude",type:"string"}},e.compileOnSaveCommandLineOption])),n),p);c||(c=l?void 0!==l.enableAutoDiscovery?{enable:l.enableAutoDiscovery,include:l.include,exclude:l.exclude}:l:A(o));return{raw:_,options:d,typeAcquisition:c,extendedConfigPath:u}}(r,i,a,s,o,l);if(p.extendedConfigPath){c=c.concat([u]);var g=function(t,n,r,i,a,o,s){var c=d(n,(function(e){return r.readFile(e)}));t&&(t.extendedSourceFiles||(t.extendedSourceFiles=[])).push(c.fileName);if(c.parseDiagnostics.length)return void s.push.apply(s,c.parseDiagnostics);var l,u=e.getDirectoryPath(n),p=T(void 0,c,r,u,e.getBaseFileName(n),a,o,s);t&&(l=t.extendedSourceFiles).push.apply(l,c.extendedSourceFiles);if(S(p)){var f=e.convertToRelativePath(u,i,a),_=function(t){return e.isRootedDiskPath(t)?t:e.combinePaths(f,t)},m=function(t){g[t]&&(g[t]=e.map(g[t],_))},g=p.raw;m("include"),m("exclude"),m("files")}return p}(r,p.extendedConfigPath,i,a,s,c,l);if(g&&S(g)){var h=g.raw,y=p.raw,v=function(e){var t=y[e]||h[e];t&&(y[e]=t)};v("include"),v("exclude"),v("files"),void 0===y.compileOnSave&&(y.compileOnSave=h.compileOnSave),p.options=e.assign({},g.options,p.options)}}return p}function C(t,n,r,i,a,o){if(t=e.normalizeSlashes(t),e.isRootedDiskPath(t)||e.startsWith(t,"./")||e.startsWith(t,"../")){var s=e.toPath(t,r,i);if(n.fileExists(s)||e.endsWith(s,".json")||(s+=".json",n.fileExists(s)))return s;a.push(o(e.Diagnostics.File_0_does_not_exist,t))}else a.push(o(e.Diagnostics.A_path_in_an_extends_option_must_be_relative_or_rooted_but_0_is_not,t))}function E(t){return"jsconfig.json"===e.getBaseFileName(t)?{allowJs:!0,maxNodeModuleJsDepth:2,allowSyntheticDefaultImports:!0,skipLibCheck:!0}:{}}function D(t,n,r,i){var a=E(i);return N(e.optionDeclarations,t,n,a,e.Diagnostics.Unknown_compiler_option_0,r),a}function A(t){return{enable:"jsconfig.json"===e.getBaseFileName(t),include:[],exclude:[]}}function w(t,n,i,a){var o=A(a),s=r(t);return N(e.typeAcquisitionDeclarations,s,n,o,e.Diagnostics.Unknown_type_acquisition_option_0,i),o}function N(t,n,r,i,a,o){if(n){var s=f(t);for(var c in n){var l=s.get(c);l?i[l.name]=I(l,n[c],r,o):o.push(e.createCompilerDiagnostic(a,c))}}}function I(t,n,r,i){if(h(t,n)){var a=t.type;return"list"===a&&e.isArray(n)?function(t,n,r,i){return e.filter(e.map(n,(function(e){return I(t.element,e,r,i)})),(function(e){return!!e}))}(t,n,r,i):e.isString(a)?O(t,r,n):F(t,n,i)}i.push(e.createCompilerDiagnostic(e.Diagnostics.Compiler_option_0_requires_a_value_of_type_1,t.name,g(t)))}function P(t,n,r){if(!v(r)){if("list"===t.type){var i=t;return i.element.isFilePath||!e.isString(i.element.type)?e.filter(e.map(r,(function(e){return P(i.element,n,e)})),(function(e){return!!e})):r}return e.isString(t.type)?O(t,n,r):t.type.get(e.isString(r)?r.toLowerCase():r)}}function O(t,n,r){return t.isFilePath&&""===(r=e.normalizePath(e.combinePaths(n,r)))&&(r="."),r}function F(e,t,n){if(!v(t)){var r=t.toLowerCase(),i=e.type.get(r);if(void 0!==i)return i;n.push(a(e))}}function L(e){return"function"==typeof e.trim?e.trim():e.replace(/^[\s]+|[\s]+$/g,"")}e.compileOnSaveCommandLineOption={name:"compileOnSave",type:"boolean"},e.optionDeclarations=[{name:"help",shortName:"h",type:"boolean",showInSimplifiedHelpView:!0,category:e.Diagnostics.Command_line_Options,description:e.Diagnostics.Print_this_message},{name:"help",shortName:"?",type:"boolean"},{name:"all",type:"boolean",showInSimplifiedHelpView:!0,category:e.Diagnostics.Command_line_Options,description:e.Diagnostics.Show_all_compiler_options},{name:"version",shortName:"v",type:"boolean",showInSimplifiedHelpView:!0,category:e.Diagnostics.Command_line_Options,description:e.Diagnostics.Print_the_compiler_s_version},{name:"init",type:"boolean",showInSimplifiedHelpView:!0,category:e.Diagnostics.Command_line_Options,description:e.Diagnostics.Initializes_a_TypeScript_project_and_creates_a_tsconfig_json_file},{name:"project",shortName:"p",type:"string",isFilePath:!0,showInSimplifiedHelpView:!0,category:e.Diagnostics.Command_line_Options,paramType:e.Diagnostics.FILE_OR_DIRECTORY,description:e.Diagnostics.Compile_the_project_given_the_path_to_its_configuration_file_or_to_a_folder_with_a_tsconfig_json},{name:"pretty",type:"boolean",showInSimplifiedHelpView:!0,category:e.Diagnostics.Command_line_Options,description:e.Diagnostics.Stylize_errors_and_messages_using_color_and_context_experimental},{name:"watch",shortName:"w",type:"boolean",showInSimplifiedHelpView:!0,category:e.Diagnostics.Command_line_Options,description:e.Diagnostics.Watch_input_files},{name:"target",shortName:"t",type:e.createMapFromTemplate({es3:0,es5:1,es6:2,es2015:2,es2016:3,es2017:4,esnext:5}),paramType:e.Diagnostics.VERSION,showInSimplifiedHelpView:!0,category:e.Diagnostics.Basic_Options,description:e.Diagnostics.Specify_ECMAScript_target_version_Colon_ES3_default_ES5_ES2015_ES2016_ES2017_or_ESNEXT},{name:"module",shortName:"m",type:e.createMapFromTemplate({none:e.ModuleKind.None,commonjs:e.ModuleKind.CommonJS,amd:e.ModuleKind.AMD,system:e.ModuleKind.System,umd:e.ModuleKind.UMD,es6:e.ModuleKind.ES2015,es2015:e.ModuleKind.ES2015,esnext:e.ModuleKind.ESNext}),paramType:e.Diagnostics.KIND,showInSimplifiedHelpView:!0,category:e.Diagnostics.Basic_Options,description:e.Diagnostics.Specify_module_code_generation_Colon_none_commonjs_amd_system_umd_es2015_or_ESNext},{name:"lib",type:"list",element:{name:"lib",type:e.createMapFromTemplate({es5:"lib.es5.d.ts",es6:"lib.es2015.d.ts",es2015:"lib.es2015.d.ts",es7:"lib.es2016.d.ts",es2016:"lib.es2016.d.ts",es2017:"lib.es2017.d.ts",esnext:"lib.esnext.d.ts",dom:"lib.dom.d.ts","dom.iterable":"lib.dom.iterable.d.ts",webworker:"lib.webworker.d.ts",scripthost:"lib.scripthost.d.ts","es2015.core":"lib.es2015.core.d.ts","es2015.collection":"lib.es2015.collection.d.ts","es2015.generator":"lib.es2015.generator.d.ts","es2015.iterable":"lib.es2015.iterable.d.ts","es2015.promise":"lib.es2015.promise.d.ts","es2015.proxy":"lib.es2015.proxy.d.ts","es2015.reflect":"lib.es2015.reflect.d.ts","es2015.symbol":"lib.es2015.symbol.d.ts","es2015.symbol.wellknown":"lib.es2015.symbol.wellknown.d.ts","es2016.array.include":"lib.es2016.array.include.d.ts","es2017.object":"lib.es2017.object.d.ts","es2017.sharedmemory":"lib.es2017.sharedmemory.d.ts","es2017.string":"lib.es2017.string.d.ts","es2017.intl":"lib.es2017.intl.d.ts","esnext.asynciterable":"lib.esnext.asynciterable.d.ts"})},showInSimplifiedHelpView:!0,category:e.Diagnostics.Basic_Options,description:e.Diagnostics.Specify_library_files_to_be_included_in_the_compilation_Colon},{name:"allowJs",type:"boolean",showInSimplifiedHelpView:!0,category:e.Diagnostics.Basic_Options,description:e.Diagnostics.Allow_javascript_files_to_be_compiled},{name:"checkJs",type:"boolean",category:e.Diagnostics.Basic_Options,description:e.Diagnostics.Report_errors_in_js_files},{name:"jsx",type:e.createMapFromTemplate({preserve:1,"react-native":3,react:2}),paramType:e.Diagnostics.KIND,showInSimplifiedHelpView:!0,category:e.Diagnostics.Basic_Options,description:e.Diagnostics.Specify_JSX_code_generation_Colon_preserve_react_native_or_react},{name:"declaration",shortName:"d",type:"boolean",showInSimplifiedHelpView:!0,category:e.Diagnostics.Basic_Options,description:e.Diagnostics.Generates_corresponding_d_ts_file},{name:"sourceMap",type:"boolean",showInSimplifiedHelpView:!0,category:e.Diagnostics.Basic_Options,description:e.Diagnostics.Generates_corresponding_map_file},{name:"outFile",type:"string",isFilePath:!0,paramType:e.Diagnostics.FILE,showInSimplifiedHelpView:!0,category:e.Diagnostics.Basic_Options,description:e.Diagnostics.Concatenate_and_emit_output_to_single_file},{name:"outDir",type:"string",isFilePath:!0,paramType:e.Diagnostics.DIRECTORY,showInSimplifiedHelpView:!0,category:e.Diagnostics.Basic_Options,description:e.Diagnostics.Redirect_output_structure_to_the_directory},{name:"rootDir",type:"string",isFilePath:!0,paramType:e.Diagnostics.LOCATION,category:e.Diagnostics.Basic_Options,description:e.Diagnostics.Specify_the_root_directory_of_input_files_Use_to_control_the_output_directory_structure_with_outDir},{name:"removeComments",type:"boolean",showInSimplifiedHelpView:!0,category:e.Diagnostics.Basic_Options,description:e.Diagnostics.Do_not_emit_comments_to_output},{name:"noEmit",type:"boolean",showInSimplifiedHelpView:!0,category:e.Diagnostics.Basic_Options,description:e.Diagnostics.Do_not_emit_outputs},{name:"importHelpers",type:"boolean",category:e.Diagnostics.Basic_Options,description:e.Diagnostics.Import_emit_helpers_from_tslib},{name:"downlevelIteration",type:"boolean",category:e.Diagnostics.Basic_Options,description:e.Diagnostics.Provide_full_support_for_iterables_in_for_of_spread_and_destructuring_when_targeting_ES5_or_ES3},{name:"isolatedModules",type:"boolean",category:e.Diagnostics.Basic_Options,description:e.Diagnostics.Transpile_each_file_as_a_separate_module_similar_to_ts_transpileModule},{name:"strict",type:"boolean",showInSimplifiedHelpView:!0,category:e.Diagnostics.Strict_Type_Checking_Options,description:e.Diagnostics.Enable_all_strict_type_checking_options},{name:"noImplicitAny",type:"boolean",showInSimplifiedHelpView:!0,category:e.Diagnostics.Strict_Type_Checking_Options,description:e.Diagnostics.Raise_error_on_expressions_and_declarations_with_an_implied_any_type},{name:"strictNullChecks",type:"boolean",showInSimplifiedHelpView:!0,category:e.Diagnostics.Strict_Type_Checking_Options,description:e.Diagnostics.Enable_strict_null_checks},{name:"strictFunctionTypes",type:"boolean",showInSimplifiedHelpView:!0,category:e.Diagnostics.Strict_Type_Checking_Options,description:e.Diagnostics.Enable_strict_checking_of_function_types},{name:"noImplicitThis",type:"boolean",showInSimplifiedHelpView:!0,category:e.Diagnostics.Strict_Type_Checking_Options,description:e.Diagnostics.Raise_error_on_this_expressions_with_an_implied_any_type},{name:"alwaysStrict",type:"boolean",showInSimplifiedHelpView:!0,category:e.Diagnostics.Strict_Type_Checking_Options,description:e.Diagnostics.Parse_in_strict_mode_and_emit_use_strict_for_each_source_file},{name:"noUnusedLocals",type:"boolean",showInSimplifiedHelpView:!0,category:e.Diagnostics.Additional_Checks,description:e.Diagnostics.Report_errors_on_unused_locals},{name:"noUnusedParameters",type:"boolean",showInSimplifiedHelpView:!0,category:e.Diagnostics.Additional_Checks,description:e.Diagnostics.Report_errors_on_unused_parameters},{name:"noImplicitReturns",type:"boolean",showInSimplifiedHelpView:!0,category:e.Diagnostics.Additional_Checks,description:e.Diagnostics.Report_error_when_not_all_code_paths_in_function_return_a_value},{name:"noFallthroughCasesInSwitch",type:"boolean",showInSimplifiedHelpView:!0,category:e.Diagnostics.Additional_Checks,description:e.Diagnostics.Report_errors_for_fallthrough_cases_in_switch_statement},{name:"moduleResolution",type:e.createMapFromTemplate({node:e.ModuleResolutionKind.NodeJs,classic:e.ModuleResolutionKind.Classic}),paramType:e.Diagnostics.STRATEGY,category:e.Diagnostics.Module_Resolution_Options,description:e.Diagnostics.Specify_module_resolution_strategy_Colon_node_Node_js_or_classic_TypeScript_pre_1_6},{name:"baseUrl",type:"string",isFilePath:!0,category:e.Diagnostics.Module_Resolution_Options,description:e.Diagnostics.Base_directory_to_resolve_non_absolute_module_names},{name:"paths",type:"object",isTSConfigOnly:!0,category:e.Diagnostics.Module_Resolution_Options,description:e.Diagnostics.A_series_of_entries_which_re_map_imports_to_lookup_locations_relative_to_the_baseUrl},{name:"rootDirs",type:"list",isTSConfigOnly:!0,element:{name:"rootDirs",type:"string",isFilePath:!0},category:e.Diagnostics.Module_Resolution_Options,description:e.Diagnostics.List_of_root_folders_whose_combined_content_represents_the_structure_of_the_project_at_runtime},{name:"typeRoots",type:"list",element:{name:"typeRoots",type:"string",isFilePath:!0},category:e.Diagnostics.Module_Resolution_Options,description:e.Diagnostics.List_of_folders_to_include_type_definitions_from},{name:"types",type:"list",element:{name:"types",type:"string"},showInSimplifiedHelpView:!0,category:e.Diagnostics.Module_Resolution_Options,description:e.Diagnostics.Type_declaration_files_to_be_included_in_compilation},{name:"allowSyntheticDefaultImports",type:"boolean",category:e.Diagnostics.Module_Resolution_Options,description:e.Diagnostics.Allow_default_imports_from_modules_with_no_default_export_This_does_not_affect_code_emit_just_typechecking},{name:"preserveSymlinks",type:"boolean",category:e.Diagnostics.Module_Resolution_Options,description:e.Diagnostics.Do_not_resolve_the_real_path_of_symlinks},{name:"sourceRoot",type:"string",isFilePath:!0,paramType:e.Diagnostics.LOCATION,category:e.Diagnostics.Source_Map_Options,description:e.Diagnostics.Specify_the_location_where_debugger_should_locate_TypeScript_files_instead_of_source_locations},{name:"mapRoot",type:"string",isFilePath:!0,paramType:e.Diagnostics.LOCATION,category:e.Diagnostics.Source_Map_Options,description:e.Diagnostics.Specify_the_location_where_debugger_should_locate_map_files_instead_of_generated_locations},{name:"inlineSourceMap",type:"boolean",category:e.Diagnostics.Source_Map_Options,description:e.Diagnostics.Emit_a_single_file_with_source_maps_instead_of_having_a_separate_file},{name:"inlineSources",type:"boolean",category:e.Diagnostics.Source_Map_Options,description:e.Diagnostics.Emit_the_source_alongside_the_sourcemaps_within_a_single_file_requires_inlineSourceMap_or_sourceMap_to_be_set},{name:"experimentalDecorators",type:"boolean",category:e.Diagnostics.Experimental_Options,description:e.Diagnostics.Enables_experimental_support_for_ES7_decorators},{name:"emitDecoratorMetadata",type:"boolean",category:e.Diagnostics.Experimental_Options,description:e.Diagnostics.Enables_experimental_support_for_emitting_type_metadata_for_decorators},{name:"jsxFactory",type:"string",category:e.Diagnostics.Advanced_Options,description:e.Diagnostics.Specify_the_JSX_factory_function_to_use_when_targeting_react_JSX_emit_e_g_React_createElement_or_h},{name:"diagnostics",type:"boolean",category:e.Diagnostics.Advanced_Options,description:e.Diagnostics.Show_diagnostic_information},{name:"extendedDiagnostics",type:"boolean",category:e.Diagnostics.Advanced_Options,description:e.Diagnostics.Show_verbose_diagnostic_information},{name:"traceResolution",type:"boolean",category:e.Diagnostics.Advanced_Options,description:e.Diagnostics.Enable_tracing_of_the_name_resolution_process},{name:"listFiles",type:"boolean",category:e.Diagnostics.Advanced_Options,description:e.Diagnostics.Print_names_of_files_part_of_the_compilation},{name:"listEmittedFiles",type:"boolean",category:e.Diagnostics.Advanced_Options,description:e.Diagnostics.Print_names_of_generated_files_part_of_the_compilation},{name:"out",type:"string",isFilePath:!1,category:e.Diagnostics.Advanced_Options,paramType:e.Diagnostics.FILE,description:e.Diagnostics.Deprecated_Use_outFile_instead_Concatenate_and_emit_output_to_single_file},{name:"reactNamespace",type:"string",category:e.Diagnostics.Advanced_Options,description:e.Diagnostics.Deprecated_Use_jsxFactory_instead_Specify_the_object_invoked_for_createElement_when_targeting_react_JSX_emit},{name:"skipDefaultLibCheck",type:"boolean",category:e.Diagnostics.Advanced_Options,description:e.Diagnostics.Deprecated_Use_skipLibCheck_instead_Skip_type_checking_of_default_library_declaration_files},{name:"charset",type:"string",category:e.Diagnostics.Advanced_Options,description:e.Diagnostics.The_character_set_of_the_input_files},{name:"emitBOM",type:"boolean",category:e.Diagnostics.Advanced_Options,description:e.Diagnostics.Emit_a_UTF_8_Byte_Order_Mark_BOM_in_the_beginning_of_output_files},{name:"locale",type:"string",category:e.Diagnostics.Advanced_Options,description:e.Diagnostics.The_locale_used_when_displaying_messages_to_the_user_e_g_en_us},{name:"newLine",type:e.createMapFromTemplate({crlf:0,lf:1}),paramType:e.Diagnostics.NEWLINE,category:e.Diagnostics.Advanced_Options,description:e.Diagnostics.Specify_the_end_of_line_sequence_to_be_used_when_emitting_files_Colon_CRLF_dos_or_LF_unix},{name:"noErrorTruncation",type:"boolean",category:e.Diagnostics.Advanced_Options,description:e.Diagnostics.Do_not_truncate_error_messages},{name:"noLib",type:"boolean",category:e.Diagnostics.Advanced_Options,description:e.Diagnostics.Do_not_include_the_default_library_file_lib_d_ts},{name:"noResolve",type:"boolean",category:e.Diagnostics.Advanced_Options,description:e.Diagnostics.Do_not_add_triple_slash_references_or_imported_modules_to_the_list_of_compiled_files},{name:"stripInternal",type:"boolean",category:e.Diagnostics.Advanced_Options,description:e.Diagnostics.Do_not_emit_declarations_for_code_that_has_an_internal_annotation},{name:"disableSizeLimit",type:"boolean",category:e.Diagnostics.Advanced_Options,description:e.Diagnostics.Disable_size_limitations_on_JavaScript_projects},{name:"noImplicitUseStrict",type:"boolean",category:e.Diagnostics.Advanced_Options,description:e.Diagnostics.Do_not_emit_use_strict_directives_in_module_output},{name:"noEmitHelpers",type:"boolean",category:e.Diagnostics.Advanced_Options,description:e.Diagnostics.Do_not_generate_custom_helper_functions_like_extends_in_compiled_output},{name:"noEmitOnError",type:"boolean",category:e.Diagnostics.Advanced_Options,description:e.Diagnostics.Do_not_emit_outputs_if_any_errors_were_reported},{name:"preserveConstEnums",type:"boolean",category:e.Diagnostics.Advanced_Options,description:e.Diagnostics.Do_not_erase_const_enum_declarations_in_generated_code},{name:"declarationDir",type:"string",isFilePath:!0,paramType:e.Diagnostics.DIRECTORY,category:e.Diagnostics.Advanced_Options,description:e.Diagnostics.Output_directory_for_generated_declaration_files},{name:"skipLibCheck",type:"boolean",category:e.Diagnostics.Advanced_Options,description:e.Diagnostics.Skip_type_checking_of_declaration_files},{name:"allowUnusedLabels",type:"boolean",category:e.Diagnostics.Advanced_Options,description:e.Diagnostics.Do_not_report_errors_on_unused_labels},{name:"allowUnreachableCode",type:"boolean",category:e.Diagnostics.Advanced_Options,description:e.Diagnostics.Do_not_report_errors_on_unreachable_code},{name:"suppressExcessPropertyErrors",type:"boolean",category:e.Diagnostics.Advanced_Options,description:e.Diagnostics.Suppress_excess_property_checks_for_object_literals},{name:"suppressImplicitAnyIndexErrors",type:"boolean",category:e.Diagnostics.Advanced_Options,description:e.Diagnostics.Suppress_noImplicitAny_errors_for_indexing_objects_lacking_index_signatures},{name:"forceConsistentCasingInFileNames",type:"boolean",category:e.Diagnostics.Advanced_Options,description:e.Diagnostics.Disallow_inconsistently_cased_references_to_the_same_file},{name:"maxNodeModuleJsDepth",type:"number",category:e.Diagnostics.Advanced_Options,description:e.Diagnostics.The_maximum_dependency_depth_to_search_under_node_modules_and_load_JavaScript_files},{name:"noStrictGenericChecks",type:"boolean",category:e.Diagnostics.Advanced_Options,description:e.Diagnostics.Disable_strict_checking_of_generic_signatures_in_function_types},{name:"plugins",type:"list",isTSConfigOnly:!0,element:{name:"plugin",type:"object"},description:e.Diagnostics.List_of_language_service_plugins}],e.typeAcquisitionDeclarations=[{name:"enableAutoDiscovery",type:"boolean"},{name:"enable",type:"boolean"},{name:"include",type:"list",element:{name:"include",type:"string"}},{name:"exclude",type:"list",element:{name:"exclude",type:"string"}}],e.defaultInitCompilerOptions={module:e.ModuleKind.CommonJS,target:1,strict:!0},e.convertEnableAutoDiscoveryToEnable=r,e.createCompilerDiagnosticForInvalidCustomType=a,e.parseCustomTypeOption=s,e.parseListTypeOption=c,e.parseCommandLine=function(t,n){var r={},i=[],a=[];return o(t),{options:r,fileNames:i,errors:a};function o(t){for(var n=0;n<t.length;){var o=t[n];if(n++,64===o.charCodeAt(0))u(o.slice(1));else if(45===o.charCodeAt(0)){var d=l(o.slice(45===o.charCodeAt(1)?2:1),!0);if(d)if(d.isTSConfigOnly)a.push(e.createCompilerDiagnostic(e.Diagnostics.Option_0_can_only_be_specified_in_tsconfig_json_file,d.name));else switch(t[n]||"boolean"===d.type||a.push(e.createCompilerDiagnostic(e.Diagnostics.Compiler_option_0_expects_an_argument,d.name)),d.type){case"number":r[d.name]=parseInt(t[n]),n++;break;case"boolean":var p=t[n];r[d.name]="false"!==p,"false"!==p&&"true"!==p||n++;break;case"string":r[d.name]=t[n]||"",n++;break;case"list":var f=c(d,t[n],a);r[d.name]=f||[],f&&n++;break;default:r[d.name]=s(d,t[n],a),n++}else a.push(e.createCompilerDiagnostic(e.Diagnostics.Unknown_compiler_option_0,o))}else i.push(o)}}function u(t){var r=n?n(t):e.sys.readFile(t);if(r){for(var i=[],s=0;;){for(;s<r.length&&r.charCodeAt(s)<=32;)s++;if(s>=r.length)break;var c=s;if(34===r.charCodeAt(c)){for(s++;s<r.length&&34!==r.charCodeAt(s);)s++;s<r.length?(i.push(r.substring(c+1,s)),s++):a.push(e.createCompilerDiagnostic(e.Diagnostics.Unterminated_quoted_string_in_response_file_0,t))}else{for(;r.charCodeAt(s)>32;)s++;i.push(r.substring(c,s))}}o(i)}else a.push(e.createCompilerDiagnostic(e.Diagnostics.File_0_not_found,t))}},e.readConfigFile=function(t,n){var r=p(t,n);return e.isString(r)?u(t,r):{config:{},error:r}},e.parseConfigFileTextToJson=u,e.readJsonConfigFile=d,e.convertToObject=_,e.generateTSConfig=function(t,n,r){var a=function(t){var n=e.createMap(),r=i().optionNameMap,a=function(i){if(e.hasProperty(t,i)){if(r.has(i)&&r.get(i).category===e.Diagnostics.Command_line_Options)return"continue";var a=t[i],c=r.get(i.toLowerCase());if(c){var l=o(c);l?"list"===c.type?n.set(i,a.map((function(e){return s(e,l)}))):n.set(i,s(a,l)):n.set(i,a)}}};for(var c in t)a(c);return n}(e.extend(t,e.defaultInitCompilerOptions));return function(){for(var t=e.createMultiMap(),i=0,o=e.optionDeclarations;i<o.length;i++){var s=o[i],u=s.category;void 0!==u&&u!==e.Diagnostics.Command_line_Options&&u!==e.Diagnostics.Advanced_Options&&t.add(e.getLocaleSpecificMessage(u),s)}var d=0,p=0,f=[],_=[];t.forEach((function(t,n){0!==f.length&&(f.push(""),_.push("")),f.push("/* "+n+" */"),_.push("");for(var r=0,i=t;r<i.length;r++){var o=i[r],s=void 0;s=a.has(o.name)?'"'+o.name+'": '+JSON.stringify(a.get(o.name))+((p+=1)===a.size?"":","):'// "'+o.name+'": '+JSON.stringify(c(o))+",",f.push(s),_.push("/* "+(o.description&&e.getLocaleSpecificMessage(o.description)||o.name)+" */"),d=Math.max(s.length,d)}}));var m=l(2),g=[];g.push("{"),g.push(m+'"compilerOptions": {');for(var h=0;h<f.length;h++){var y=f[h],v=_[h];g.push(y&&""+m+m+y+(v&&l(d-y.length+2)+v))}if(n.length){g.push(m+"},"),g.push(m+'"files": [');for(h=0;h<n.length;h++)g.push(""+m+m+JSON.stringify(n[h])+(h===n.length-1?"":","));g.push(m+"]")}else g.push(m+"}");return g.push("}"),g.join(r)}();function o(e){return"string"===e.type||"number"===e.type||"boolean"===e.type?void 0:"list"===e.type?o(e.element):e.type}function s(t,n){return e.forEachEntry(n,(function(e,n){if(e===t)return n}))}function c(e){switch(e.type){case"number":return 1;case"boolean":return!0;case"string":return e.isFilePath?"./":"";case"list":return[];case"object":return{};default:return e.type.keys().next().value}}function l(e){return Array(e+1).join(" ")}},e.parseJsonConfigFileContent=function(e,t,n,r,i,a,o){return x(e,void 0,t,n,r,i,a,o)},e.parseJsonSourceFileConfigFileContent=function(e,t,n,r,i,a,o){return x(void 0,e,t,n,r,i,a,o)},e.setConfigFileInOptions=y,e.isErrorNoInputFiles=function(t){return t.code===e.Diagnostics.No_inputs_were_found_in_config_file_0_Specified_include_paths_were_1_and_exclude_paths_were_2.code},e.getErrorForNoInputFiles=k,e.convertCompilerOptionsFromJson=function(e,t,n){var r=[];return{options:D(e,t,r,n),errors:r}},e.convertTypeAcquisitionFromJson=function(e,t,n){var r=[];return{options:w(e,t,r,n),errors:r}};var R=/(^|\/)\*\*\/?$/,M=/(^|\/)\*\*\/(.*\/)?\*\*($|\/)/,U=/(^|\/)\*\*\/(.*\/)?\.\.($|\/)/,B=/\/[^/]*?[*?][^/]*\//,j=/^[^*?]*(?=\/[^/]*[*?])/;function $(t,n,r,i,a){void 0===a&&(a=[]),n=e.normalizePath(n);var o=i.useCaseSensitiveFileNames?V:H,s=e.createMap(),c=e.createMap(),l=t.filesSpecs,u=t.validatedIncludeSpecs,d=t.validatedExcludeSpecs,p=t.wildcardDirectories,f=e.getSupportedExtensions(r,a);if(l)for(var _=0,m=l;_<m.length;_++){var g=m[_],h=e.getNormalizedAbsolutePath(g,n);s.set(o(h),h)}if(u&&u.length>0)for(var y=0,v=i.readDirectory(n,f,d,u,void 0);y<v.length;y++){if(!J(h=v[y],s,c,f,o)){q(h,c,f,o);var b=o(h);s.has(b)||c.has(b)||c.set(b,h)}}var x=e.arrayFrom(s.values()),k=e.arrayFrom(c.values());return{fileNames:x.concat(k),wildcardDirectories:p,spec:t}}function K(t,n,r,i,a){return t.filter((function(t){var o=function(t,n){if(!n&&R.test(t))return e.Diagnostics.File_specification_cannot_end_in_a_recursive_directory_wildcard_Asterisk_Asterisk_Colon_0;if(M.test(t))return e.Diagnostics.File_specification_cannot_contain_multiple_recursive_directory_wildcards_Asterisk_Asterisk_Colon_0;if(U.test(t))return e.Diagnostics.File_specification_cannot_contain_a_parent_directory_that_appears_after_a_recursive_directory_wildcard_Asterisk_Asterisk_Colon_0}(t,r);return void 0!==o&&n.push(function(t,n){if(i&&i.jsonObject)for(var r=0,o=e.getPropertyAssignment(i.jsonObject,a);r<o.length;r++){var s=o[r];if(e.isArrayLiteralExpression(s.initializer))for(var c=0,l=s.initializer.elements;c<l.length;c++){var u=l[c];if(e.isStringLiteral(u)&&u.text===n)return e.createDiagnosticForNodeInSourceFile(i,u,t,n)}}return e.createCompilerDiagnostic(t,n)}(o,t)),void 0===o}))}function z(t,n){var r=j.exec(t);return r?{key:n?r[0]:r[0].toLowerCase(),flags:B.test(t)?1:0}:e.isImplicitGlob(t)?{key:t,flags:1}:void 0}function J(t,n,r,i,a){for(var o=e.getExtensionPriority(t,i),s=e.adjustExtensionPriority(o,i),c=0;c<s;c++){var l=i[c],u=a(e.changeExtension(t,l));if(n.has(u)||r.has(u))return!0}return!1}function q(t,n,r,i){for(var a=e.getExtensionPriority(t,r),o=e.getNextLowestExtensionPriority(a,r);o<r.length;o++){var s=r[o],c=i(e.changeExtension(t,s));n.delete(c)}}function V(e){return e}function H(e){return e.toLowerCase()}function G(t,n){switch(n.type){case"object":case"string":return"";case"number":return"number"==typeof t?t:"";case"boolean":return"boolean"==typeof t?t:"";case"list":var r=n.element;return e.isArray(t)?t.map((function(e){return G(e,r)})):"";default:return e.forEachEntry(n.type,(function(e,n){if(e===t)return n}))}}e.getFileNamesFromConfigSpecs=$,e.convertCompilerOptionsForTelemetry=function(e){var t={};for(var n in e)if(e.hasOwnProperty(n)){var r=l(n);void 0!==r&&(t[n]=G(e[n],r))}return t}}(ts||(ts={})),function(e){!function(e){var t=function(){function e(e){this.text=e}return e.prototype.getText=function(e,t){return 0===e&&t===this.text.length?this.text:this.text.substring(e,t)},e.prototype.getLength=function(){return this.text.length},e.prototype.getChangeRange=function(){},e}();e.fromString=function(e){return new t(e)}}(e.ScriptSnapshot||(e.ScriptSnapshot={}));var t=function(){};e.TextChange=t,function(e){e.none="none",e.definition="definition",e.reference="reference",e.writtenReference="writtenReference"}(e.HighlightSpanKind||(e.HighlightSpanKind={})),function(e){e[e.None=0]="None",e[e.Block=1]="Block",e[e.Smart=2]="Smart"}(e.IndentStyle||(e.IndentStyle={})),function(e){e[e.aliasName=0]="aliasName",e[e.className=1]="className",e[e.enumName=2]="enumName",e[e.fieldName=3]="fieldName",e[e.interfaceName=4]="interfaceName",e[e.keyword=5]="keyword",e[e.lineBreak=6]="lineBreak",e[e.numericLiteral=7]="numericLiteral",e[e.stringLiteral=8]="stringLiteral",e[e.localName=9]="localName",e[e.methodName=10]="methodName",e[e.moduleName=11]="moduleName",e[e.operator=12]="operator",e[e.parameterName=13]="parameterName",e[e.propertyName=14]="propertyName",e[e.punctuation=15]="punctuation",e[e.space=16]="space",e[e.text=17]="text",e[e.typeParameterName=18]="typeParameterName",e[e.enumMemberName=19]="enumMemberName",e[e.functionName=20]="functionName",e[e.regularExpressionLiteral=21]="regularExpressionLiteral"}(e.SymbolDisplayPartKind||(e.SymbolDisplayPartKind={})),function(e){e[e.JavaScript=0]="JavaScript",e[e.SourceMap=1]="SourceMap",e[e.Declaration=2]="Declaration"}(e.OutputFileType||(e.OutputFileType={})),function(e){e[e.None=0]="None",e[e.InMultiLineCommentTrivia=1]="InMultiLineCommentTrivia",e[e.InSingleQuoteStringLiteral=2]="InSingleQuoteStringLiteral",e[e.InDoubleQuoteStringLiteral=3]="InDoubleQuoteStringLiteral",e[e.InTemplateHeadOrNoSubstitutionTemplate=4]="InTemplateHeadOrNoSubstitutionTemplate",e[e.InTemplateMiddleOrTail=5]="InTemplateMiddleOrTail",e[e.InTemplateSubstitutionPosition=6]="InTemplateSubstitutionPosition"}(e.EndOfLineState||(e.EndOfLineState={})),function(e){e[e.Punctuation=0]="Punctuation",e[e.Keyword=1]="Keyword",e[e.Operator=2]="Operator",e[e.Comment=3]="Comment",e[e.Whitespace=4]="Whitespace",e[e.Identifier=5]="Identifier",e[e.NumberLiteral=6]="NumberLiteral",e[e.StringLiteral=7]="StringLiteral",e[e.RegExpLiteral=8]="RegExpLiteral"}(e.TokenClass||(e.TokenClass={})),function(e){e.unknown="",e.warning="warning",e.keyword="keyword",e.scriptElement="script",e.moduleElement="module",e.classElement="class",e.localClassElement="local class",e.interfaceElement="interface",e.typeElement="type",e.enumElement="enum",e.enumMemberElement="enum member",e.variableElement="var",e.localVariableElement="local var",e.functionElement="function",e.localFunctionElement="local function",e.memberFunctionElement="method",e.memberGetAccessorElement="getter",e.memberSetAccessorElement="setter",e.memberVariableElement="property",e.constructorImplementationElement="constructor",e.callSignatureElement="call",e.indexSignatureElement="index",e.constructSignatureElement="construct",e.parameterElement="parameter",e.typeParameterElement="type parameter",e.primitiveType="primitive type",e.label="label",e.alias="alias",e.constElement="const",e.letElement="let",e.directory="directory",e.externalModuleName="external module name",e.jsxAttribute="JSX attribute"}(e.ScriptElementKind||(e.ScriptElementKind={})),function(e){e.none="",e.publicMemberModifier="public",e.privateMemberModifier="private",e.protectedMemberModifier="protected",e.exportedModifier="export",e.ambientModifier="declare",e.staticModifier="static",e.abstractModifier="abstract"}(e.ScriptElementKindModifier||(e.ScriptElementKindModifier={})),function(e){e.comment="comment",e.identifier="identifier",e.keyword="keyword",e.numericLiteral="number",e.operator="operator",e.stringLiteral="string",e.whiteSpace="whitespace",e.text="text",e.punctuation="punctuation",e.className="class name",e.enumName="enum name",e.interfaceName="interface name",e.moduleName="module name",e.typeParameterName="type parameter name",e.typeAliasName="type alias name",e.parameterName="parameter name",e.docCommentTagName="doc comment tag name",e.jsxOpenTagName="jsx open tag name",e.jsxCloseTagName="jsx close tag name",e.jsxSelfClosingTagName="jsx self closing tag name",e.jsxAttribute="jsx attribute",e.jsxText="jsx text",e.jsxAttributeStringLiteralValue="jsx attribute string literal value"}(e.ClassificationTypeNames||(e.ClassificationTypeNames={})),function(e){e[e.comment=1]="comment",e[e.identifier=2]="identifier",e[e.keyword=3]="keyword",e[e.numericLiteral=4]="numericLiteral",e[e.operator=5]="operator",e[e.stringLiteral=6]="stringLiteral",e[e.regularExpressionLiteral=7]="regularExpressionLiteral",e[e.whiteSpace=8]="whiteSpace",e[e.text=9]="text",e[e.punctuation=10]="punctuation",e[e.className=11]="className",e[e.enumName=12]="enumName",e[e.interfaceName=13]="interfaceName",e[e.moduleName=14]="moduleName",e[e.typeParameterName=15]="typeParameterName",e[e.typeAliasName=16]="typeAliasName",e[e.parameterName=17]="parameterName",e[e.docCommentTagName=18]="docCommentTagName",e[e.jsxOpenTagName=19]="jsxOpenTagName",e[e.jsxCloseTagName=20]="jsxCloseTagName",e[e.jsxSelfClosingTagName=21]="jsxSelfClosingTagName",e[e.jsxAttribute=22]="jsxAttribute",e[e.jsxText=23]="jsxText",e[e.jsxAttributeStringLiteralValue=24]="jsxAttributeStringLiteralValue"}(e.ClassificationType||(e.ClassificationType={}))}(ts||(ts={})),function(e){function t(t){switch(t.kind){case 146:case 226:case 176:case 149:case 148:case 261:case 262:case 151:case 150:case 152:case 153:case 154:case 228:case 186:case 187:case 260:case 253:return 1;case 145:case 230:case 231:case 163:return 2;case 283:return void 0===t.name?3:2;case 264:case 229:return 3;case 233:return e.isAmbientModule(t)||1===e.getModuleInstanceState(t)?5:4;case 232:case 241:case 242:case 237:case 238:case 243:case 244:return 7;case 265:return 5}return 7}function n(t){for(;143===t.parent.kind;)t=t.parent;return e.isInternalModuleImportEqualsDeclaration(t.parent)&&t.parent.moduleReference===t}function r(e,t){var n=i(e);return n&&n.parent&&n.parent.kind===t&&n.parent.expression===n}function i(e){return o(e)?e.parent:e}function a(e){return 71===e.kind&&(218===e.parent.kind||217===e.parent.kind)&&e.parent.label===e}function o(e){return e&&e.parent&&179===e.parent.kind&&e.parent.name===e}e.scanner=e.createScanner(5,!0),function(e){e[e.None=0]="None",e[e.Value=1]="Value",e[e.Type=2]="Type",e[e.Namespace=4]="Namespace",e[e.All=7]="All"}(e.SemanticMeaning||(e.SemanticMeaning={})),e.getMeaningFromDeclaration=t,e.getMeaningFromLocation=function(r){return 265===r.kind?1:243===r.parent.kind?7:n(r)?function(t){if(e.Debug.assert(71===t.kind),143===t.parent.kind&&t.parent.right===t&&237===t.parent.parent.kind)return 7;return 4}(r):e.isDeclarationName(r)?t(r.parent):function(t){e.isRightSideOfQualifiedNameOrPropertyAccess(t)&&(t=t.parent);switch(t.kind){case 99:return!e.isPartOfExpression(t);case 169:return!0}switch(t.parent.kind){case 159:return!0;case 201:return!e.isExpressionWithTypeArgumentsInClassExtendsClause(t.parent)}return!1}(r)?2:function(e){return function(e){var t=e,n=!0;if(143===t.parent.kind){for(;t.parent&&143===t.parent.kind;)t=t.parent;n=t.right===e}return 159===t.parent.kind&&!n}(e)||function(e){var t=e,n=!0;if(179===t.parent.kind){for(;t.parent&&179===t.parent.kind;)t=t.parent;n=t.name===e}if(!n&&201===t.parent.kind&&259===t.parent.parent.kind){var r=t.parent.parent.parent;return 229===r.kind&&108===t.parent.parent.token||230===r.kind&&85===t.parent.parent.token}return!1}(e)}(r)?4:e.isTypeParameterDeclaration(r.parent)?(e.Debug.assert(e.isJSDocTemplateTag(r.parent.parent)),2):1},e.isInRightSideOfInternalImportEqualsDeclaration=n,e.isCallExpressionTarget=function(e){return r(e,181)},e.isNewExpressionTarget=function(e){return r(e,182)},e.climbPastPropertyAccess=i,e.getTargetLabel=function(e,t){for(;e;){if(222===e.kind&&e.label.escapedText===t)return e.label;e=e.parent}},e.isJumpStatementTarget=a,e.isLabelName=function(e){return function(e){return 71===e.kind&&222===e.parent.kind&&e.parent.label===e}(e)||a(e)},e.isRightSideOfQualifiedName=function(e){return 143===e.parent.kind&&e.parent.right===e},e.isRightSideOfPropertyAccess=o,e.isNameOfModuleDeclaration=function(e){return 233===e.parent.kind&&e.parent.name===e},e.isNameOfFunctionDeclaration=function(t){return 71===t.kind&&e.isFunctionLike(t.parent)&&t.parent.name===t},e.isLiteralNameOfPropertyDeclarationOrIndexAccess=function(t){switch(t.parent.kind){case 149:case 148:case 261:case 264:case 151:case 150:case 153:case 154:case 233:return e.getNameOfDeclaration(t.parent)===t;case 180:return t.parent.argumentExpression===t;case 144:return!0;case 173:return 171===t.parent.parent.kind}},e.isExpressionOfExternalModuleImportEqualsDeclaration=function(t){return e.isExternalModuleImportEqualsDeclaration(t.parent.parent)&&e.getExternalModuleImportEqualsDeclarationExpression(t.parent.parent)===t},e.getContainerNode=function(e){for(283===e.kind&&(e=e.parent.parent);;){if(!(e=e.parent))return;switch(e.kind){case 265:case 151:case 150:case 228:case 186:case 153:case 154:case 229:case 230:case 232:case 233:return e}}},e.getNodeKind=function t(n){switch(n.kind){case 265:return e.isExternalModule(n)?"module":"script";case 233:return"module";case 229:case 199:return"class";case 230:return"interface";case 231:return"type";case 232:return"enum";case 226:return o(n);case 176:return o(e.getRootDeclaration(n));case 187:case 228:case 186:return"function";case 153:return"getter";case 154:return"setter";case 151:case 150:return"method";case 149:case 148:return"property";case 157:return"index";case 156:return"construct";case 155:return"call";case 152:return"constructor";case 145:return"type parameter";case 264:return"enum member";case 146:return e.hasModifier(n,92)?"property":"parameter";case 237:case 242:case 239:case 246:case 240:return"alias";case 283:return"type";case 194:var r=e.getSpecialPropertyAssignmentKind(n),i=n.right;switch(r){case 0:return"";case 1:case 2:var a=t(i);return""===a?"const":a;case 3:return"method";case 4:return"property";case 5:return e.isFunctionExpression(i)?"method":"property";default:return e.assertTypeIsNever(r),""}default:return""}function o(t){return e.isConst(t)?"const":e.isLet(t)?"let":"var"}},e.isThis=function(t){switch(t.kind){case 99:return!0;case 71:return e.identifierIsThisKeyword(t)&&146===t.parent.kind;default:return!1}};var s=/^\/\/\/\s*</;function c(e,t,n){return e<=n.pos&&t>=n.end}function l(e,t,n,r){return Math.max(e,n)<Math.min(t,r)}function u(t,n){if(e.nodeIsMissing(t))return!1;switch(t.kind){case 229:case 230:case 232:case 178:case 174:case 163:case 207:case 234:case 235:case 241:case 245:return d(t,18,n);case 260:return u(t.block,n);case 182:if(!t.arguments)return!0;case 181:case 185:case 168:return d(t,20,n);case 160:case 161:return u(t.type,n);case 152:case 153:case 154:case 228:case 186:case 151:case 150:case 156:case 155:case 187:return t.body?u(t.body,n):t.type?u(t.type,n):p(t,20,n);case 233:return t.body&&u(t.body,n);case 211:return t.elseStatement?u(t.elseStatement,n):u(t.thenStatement,n);case 210:return u(t.expression,n)||p(t,25);case 177:case 175:case 180:case 144:case 165:return d(t,22,n);case 157:return t.type?u(t.type,n):p(t,22,n);case 257:case 258:return!1;case 214:case 215:case 216:case 213:return u(t.statement,n);case 212:return f(t,106,n)?d(t,20,n):u(t.statement,n);case 162:return u(t.exprName,n);case 189:case 188:case 190:case 197:case 198:return u(t.expression,n);case 183:return u(t.template,n);case 196:return u(e.lastOrUndefined(t.templateSpans),n);case 205:return e.nodeIsPresent(t.literal);case 244:case 238:return e.nodeIsPresent(t.moduleSpecifier);case 192:return u(t.operand,n);case 194:return u(t.right,n);case 195:return u(t.whenFalse,n);default:return!0}}function d(t,n,r){var i=t.getChildren(r);if(i.length){var a=e.lastOrUndefined(i);if(a.kind===n)return!0;if(25===a.kind&&1!==i.length)return i[i.length-2].kind===n}return!1}function p(e,t,n){return!!f(e,t,n)}function f(t,n,r){return e.forEach(t.getChildren(r),(function(e){return e.kind===n&&e}))}function _(t){var n=e.forEach(t.parent.getChildren(),(function(n){if(e.isSyntaxList(n)&&n.pos<=t.pos&&n.end>=t.end)return n}));return e.Debug.assert(!n||e.contains(n.getChildren(),t)),n}function m(e,t,n,r){return h(e,t,!1,r,!1,n)}function g(e,t,n,r){return h(e,t,!0,void 0,r,n)}function h(t,n,r,i,a,o){var s=t;e:for(;;){if(e.isToken(s))return s;for(var c=0,l=s.getChildren();c<l.length;c++){var u=l[c];if(o||!e.isJSDocNode(u)){if((r?u.getFullStart():u.getStart(t,o))>n)break;var d=u.getEnd();if(n<d||n===d&&(1===u.kind||a)){s=u;continue e}if(i&&d===n){var p=y(n,t,u);if(p&&i(p))return p}}}return s}}function y(t,n,r,i){var a=function a(c){if(e.isToken(c))return c;for(var l=c.getChildren(),u=0;u<l.length;u++){var d=l[u];if(t<d.end)return d.getStart(n,i)>=t||!x(d)||v(d)?(p=s(l,u))&&o(p):a(d)}if(e.Debug.assert(void 0!==r||265===c.kind||e.isJSDocCommentContainingNode(c)),l.length){var p;return(p=s(l,l.length))&&o(p)}}(r||n);return e.Debug.assert(!(a&&v(a))),a;function o(t){if(e.isToken(t))return t;var n=t.getChildren(),r=s(n,n.length);return r&&o(r)}function s(t,n){for(var r=n-1;r>=0;r--){if(v(t[r]))e.Debug.assert(r>0,"`JsxText` tokens should not be the first child of `JsxElement | JsxSelfClosingElement`");else if(x(t[r]))return t[r]}}}function v(t){return e.isJsxText(t)&&t.containsOnlyWhiteSpaces}function b(t,n,r,i){return!!e.formatting.getRangeOfEnclosingComment(t,n,!1,void 0,r,i)}function x(e){return 0!==e.getWidth()}function k(t){return 71===t||e.isKeyword(t)}e.getLineStartPositionForPosition=function(t,n){return e.getLineStarts(n)[n.getLineAndCharacterOfPosition(t).line]},e.rangeContainsRange=function(e,t){return c(e.pos,e.end,t)},e.startEndContainsRange=c,e.rangeContainsStartEnd=function(e,t,n){return e.pos<=t&&e.end>=n},e.rangeOverlapsWithStartEnd=function(e,t,n){return l(e.pos,e.end,t,n)},e.startEndOverlapsWithStartEnd=l,e.positionBelongsToNode=function(e,t,n){return t<e.end||!u(e,n)},e.isCompletedNode=u,e.findListItemInfo=function(t){var n=_(t);if(n){var r=n.getChildren();return{listItemIndex:e.indexOfNode(r,t),list:n}}},e.hasChildOfKind=p,e.findChildOfKind=f,e.findContainingList=_,e.getTouchingWord=function(e,t,n){return m(e,t,n,(function(e){return k(e.kind)}))},e.getTouchingPropertyName=function(e,t,n){return m(e,t,n,(function(e){return 9===(t=e.kind)||8===t||k(t);var t}))},e.getTouchingToken=m,e.getTokenAtPosition=g,e.findTokenOnLeftOfPosition=function(t,n){var r=g(t,n,!1);return e.isToken(r)&&n>r.getStart(t)&&n<r.getEnd()?r:y(n,t)},e.findNextToken=function(t,n){return function n(r){if(e.isToken(r)&&r.pos===t.end)return r;for(var i=r.getChildren(),a=0,o=i;a<o.length;a++){var s=o[a];if((s.pos<=t.pos&&s.end>t.end||s.pos===t.end)&&x(s))return n(s)}return}(n)},e.findPrecedingToken=y,e.isInString=function(t,n){var r=y(n,t);if(r&&e.isStringTextContainingNode(r)){var i=r.getStart(),a=r.getEnd();if(i<n&&n<a)return!0;if(n===a)return!!r.isUnterminated}return!1},e.isInsideJsxElementOrAttribute=function(e,t){var n=g(e,t,!1);return!!n&&(10===n.kind||(27===n.kind&&10===n.parent.kind||(27===n.kind&&256===n.parent.kind||(!(!n||18!==n.kind||256!==n.parent.kind)||27===n.kind&&252===n.parent.kind))))},e.isWhiteSpaceOnlyJsxText=v,e.isInTemplateString=function(t,n){var r=g(t,n,!1);return e.isTemplateLiteralKind(r.kind)&&n>r.getStart(t)},e.isInComment=b,e.hasDocComment=function(t,n){var r=g(t,n,!1),i=e.getLeadingCommentRanges(t.text,r.pos);return e.forEach(i,(function(e){var n=t.text;return n.length>=e.pos+3&&"/"===n[e.pos]&&"*"===n[e.pos+1]&&"*"===n[e.pos+2]}))},e.getNodeModifiers=function(t){var n=e.getCombinedModifierFlags(t),r=[];return 8&n&&r.push("private"),16&n&&r.push("protected"),4&n&&r.push("public"),32&n&&r.push("static"),128&n&&r.push("abstract"),1&n&&r.push("export"),e.isInAmbientContext(t)&&r.push("declare"),r.length>0?r.join(","):""},e.getTypeArgumentOrTypeParameterList=function(t){return 159===t.kind||181===t.kind?t.typeArguments:e.isFunctionLike(t)||229===t.kind||230===t.kind?t.typeParameters:void 0},e.isWord=k,e.isComment=function(e){return 2===e||3===e},e.isStringOrRegularExpressionOrTemplateLiteral=function(t){return!(9!==t&&12!==t&&!e.isTemplateLiteralKind(t))},e.isPunctuation=function(e){return 17<=e&&e<=70},e.isInsideTemplateLiteral=function(t,n){return e.isTemplateLiteralKind(t.kind)&&t.getStart()<n&&n<t.getEnd()||!!t.isUnterminated&&n===t.getEnd()},e.isAccessibilityModifier=function(e){switch(e){case 114:case 112:case 113:return!0}return!1},e.cloneCompilerOptions=function(t){var n=e.clone(t);return e.setConfigFileInOptions(n,t&&t.configFile),n},e.isArrayLiteralOrObjectLiteralDestructuringPattern=function e(t){if(177===t.kind||178===t.kind){if(194===t.parent.kind&&t.parent.left===t&&58===t.parent.operatorToken.kind)return!0;if(216===t.parent.kind&&t.parent.initializer===t)return!0;if(e(261===t.parent.kind?t.parent.parent:t.parent))return!0}return!1},e.hasTrailingDirectorySeparator=function(e){var t=e.charAt(e.length-1);return"/"===t||"\\"===t},e.isInReferenceComment=function(e,t){return b(e,t,void 0,(function(t){var n=e.text.substring(t.pos,t.end);return s.test(n)}))},e.isInNonReferenceComment=function(e,t){return b(e,t,void 0,(function(t){var n=e.text.substring(t.pos,t.end);return!s.test(n)}))},e.createTextSpanFromNode=function(t,n){return e.createTextSpanFromBounds(t.getStart(n),t.getEnd())},e.createTextSpanFromRange=function(t){return e.createTextSpanFromBounds(t.pos,t.end)},e.isTypeKeyword=function(e){switch(e){case 119:case 122:case 130:case 133:case 134:case 136:case 137:case 105:return!0;default:return!1}},e.isExternalModuleSymbol=function(t){return e.Debug.assert(!!(1536&t.flags)),34===t.name.charCodeAt(0)},e.nodeSeenTracker=function(){var t=[];return function(n){var r=e.getNodeId(n);return!t[r]&&(t[r]=!0)}}}(ts||(ts={})),function(e){function t(e){return e.declarations&&e.declarations.length>0&&146===e.declarations[0].kind}e.isFirstDeclarationOfSymbolParameter=t;var n=function(){var t,n,a;return l(),{displayParts:function(){return t},writeKeyword:function(t){return c(t,e.SymbolDisplayPartKind.keyword)},writeOperator:function(t){return c(t,e.SymbolDisplayPartKind.operator)},writePunctuation:function(t){return c(t,e.SymbolDisplayPartKind.punctuation)},writeSpace:function(t){return c(t,e.SymbolDisplayPartKind.space)},writeStringLiteral:function(t){return c(t,e.SymbolDisplayPartKind.stringLiteral)},writeParameter:function(t){return c(t,e.SymbolDisplayPartKind.parameterName)},writeProperty:function(t){return c(t,e.SymbolDisplayPartKind.propertyName)},writeSymbol:function(e,n){o(),t.push(r(e,n))},writeLine:function(){t.push(s()),n=!0},increaseIndent:function(){a++},decreaseIndent:function(){a--},clear:l,trackSymbol:e.noop,reportInaccessibleThisError:e.noop,reportPrivateInBaseOfClassExpression:e.noop};function o(){if(n){var r=e.getIndentString(a);r&&t.push(i(r,e.SymbolDisplayPartKind.space)),n=!1}}function c(e,n){o(),t.push(i(e,n))}function l(){t=[],n=!0,a=0}}();function r(n,r){return i(n,function(n){var r=n.flags;if(3&r)return t(n)?e.SymbolDisplayPartKind.parameterName:e.SymbolDisplayPartKind.localName;if(4&r)return e.SymbolDisplayPartKind.propertyName;if(32768&r)return e.SymbolDisplayPartKind.propertyName;if(65536&r)return e.SymbolDisplayPartKind.propertyName;if(8&r)return e.SymbolDisplayPartKind.enumMemberName;if(16&r)return e.SymbolDisplayPartKind.functionName;if(32&r)return e.SymbolDisplayPartKind.className;if(64&r)return e.SymbolDisplayPartKind.interfaceName;if(384&r)return e.SymbolDisplayPartKind.enumName;if(1536&r)return e.SymbolDisplayPartKind.moduleName;if(8192&r)return e.SymbolDisplayPartKind.methodName;if(262144&r)return e.SymbolDisplayPartKind.typeParameterName;if(524288&r)return e.SymbolDisplayPartKind.aliasName;if(2097152&r)return e.SymbolDisplayPartKind.aliasName;return e.SymbolDisplayPartKind.text}(r))}function i(t,n){return{text:t,kind:e.SymbolDisplayPartKind[n]}}function a(t){return i(e.tokenToString(t),e.SymbolDisplayPartKind.keyword)}function o(t){return i(t,e.SymbolDisplayPartKind.text)}e.symbolPart=r,e.displayPart=i,e.spacePart=function(){return i(" ",e.SymbolDisplayPartKind.space)},e.keywordPart=a,e.punctuationPart=function(t){return i(e.tokenToString(t),e.SymbolDisplayPartKind.punctuation)},e.operatorPart=function(t){return i(e.tokenToString(t),e.SymbolDisplayPartKind.operator)},e.textOrKeywordPart=function(t){var n=e.stringToToken(t);return void 0===n?o(t):a(n)},e.textPart=o;function s(){return i("\n",e.SymbolDisplayPartKind.lineBreak)}function c(e){try{return e(n),n.displayParts()}finally{n.clear()}}function l(e){return e.parent&&(242===e.parent.kind||246===e.parent.kind)&&e.parent.propertyName===e}function u(t,n){return e.ensureScriptKind(t,n&&n.getScriptKind&&n.getScriptKind(t))}e.getNewLineOrDefaultFromHost=function(e){return e.getNewLine?e.getNewLine():"\r\n"},e.lineBreakPart=s,e.mapToDisplayParts=c,e.typeToDisplayParts=function(e,t,n,r){return c((function(i){e.getSymbolDisplayBuilder().buildTypeDisplay(t,i,n,r)}))},e.symbolToDisplayParts=function(e,t,n,r,i){return c((function(a){e.getSymbolDisplayBuilder().buildSymbolDisplay(t,a,n,r,i)}))},e.signatureToDisplayParts=function(e,t,n,r){return r|=65536,c((function(i){e.getSymbolDisplayBuilder().buildSignatureDisplay(t,i,n,r)}))},e.getDeclaredName=function(t,n,r){if(l(r)||e.isStringOrNumericLiteral(r)&&144===r.parent.kind)return e.getTextOfIdentifierOrLiteral(r);var i=e.getLocalSymbolForExportDefault(n);return t.symbolToString(i||n)},e.isImportOrExportSpecifierName=l,e.stripQuotes=function(t){var n=t.length;return n>=2&&t.charCodeAt(0)===t.charCodeAt(n-1)&&e.isSingleOrDoubleQuote(t.charCodeAt(0))?t.substring(1,n-1):t},e.scriptKindIs=function(t,n){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];var a=u(t,n);return e.forEach(r,(function(e){return e===a}))},e.getScriptKind=u,e.getUniqueSymbolId=function(t,n){return e.getSymbolId(e.skipAlias(t,n))},e.getFirstNonSpaceCharacterPosition=function(t,n){for(;e.isWhiteSpaceLike(t.charCodeAt(n));)n+=1;return n},e.getOpenBrace=function(e,t){return e.body.getFirstToken(t)},e.getOpenBraceOfClassLike=function(t,n){return e.getTokenAtPosition(n,t.members.pos-1,!1)},e.getSourceFileImportLocation=function(t){var n=t.text,r=e.getLeadingCommentRanges(n,0);if(!r)return 0;var i=0;r.length&&3===r[0].kind&&e.isPinnedComment(n,r[0])&&(i=r[0].end+1,r=r.slice(1));for(var a=0,o=r;a<o.length;a++){var s=o[a];if(2!==s.kind||!e.isRecognizedTripleSlashComment(t.text,s.pos,s.end))break;i=s.end+1}return i},e.getSynthesizedDeepClone=function t(n){if(void 0!==n){var r=e.visitEachChild(n,t,e.nullTransformationContext);if(r===n){var i=e.getSynthesizedClone(n);return e.isStringLiteral(i)?i.textSourceNode=n:e.isNumericLiteral(i)&&(i.numericLiteralFlags=n.numericLiteralFlags),i.pos=n.pos,i.end=n.end,i}return r.parent=void 0,r}},e.suppressLeadingAndTrailingTrivia=function(t){e.Debug.assert(void 0!==t),function t(n){e.addEmitFlags(n,512);var r=e.forEachChild(n,(function(e){return e}));r&&t(r)}(t),function t(n){e.addEmitFlags(n,1024);var r=void 0;e.forEachChild(n,(function(e){r=e}),(function(t){t.length&&(r=e.last(t))})),r&&t(r)}(t)}}(ts||(ts={})),function(e){function t(e,t){switch(t){case 233:case 229:case 230:case 228:e.throwIfCancellationRequested()}}function n(n,r,i,a,o){var s=[];return function i(c){if(c&&e.textSpanIntersectsWith(o,c.getFullStart(),c.getFullWidth())){var l=c.kind;if(t(r,l),71===l&&!e.nodeIsMissing(c)){var u=c;if(a.has(u.escapedText)){var d=n.getSymbolAtLocation(c);if(d){var p=function(t,n){var r=t.getFlags();if(0==(788448&r))return;if(32&r)return 11;if(384&r)return 12;if(524288&r)return 16;if(2&n){if(64&r)return 13;if(262144&r)return 15}else if(1536&r&&(4&n||1&n&&i(t)))return 14;return;function i(t){return e.forEach(t.declarations,(function(t){return 233===t.kind&&1===e.getModuleInstanceState(t)}))}}(d,e.getMeaningFromLocation(c));p&&function(e,t,n){s.push(e),s.push(t),s.push(n)}(c.getStart(),c.getWidth(),p)}}}e.forEachChild(c,i)}}(i),{spans:s,endOfLineState:0}}function r(e){switch(e){case 1:return"comment";case 2:return"identifier";case 3:return"keyword";case 4:return"number";case 5:return"operator";case 6:return"string";case 8:return"whitespace";case 9:return"text";case 10:return"punctuation";case 11:return"class name";case 12:return"enum name";case 13:return"interface name";case 14:return"module name";case 15:return"type parameter name";case 16:return"type alias name";case 17:return"parameter name";case 18:return"doc comment tag name";case 19:return"jsx open tag name";case 20:return"jsx close tag name";case 21:return"jsx self closing tag name";case 22:return"jsx attribute";case 23:return"jsx text";case 24:return"jsx attribute string literal value"}}function i(t){e.Debug.assert(t.spans.length%3==0);for(var n=t.spans,i=[],a=0;a<n.length;a+=3)i.push({textSpan:e.createTextSpan(n[a],n[a+1]),classificationType:r(n[a+2])});return i}function a(n,r,i){var a=i.start,o=i.length,s=e.createScanner(5,!1,r.languageVariant,r.text),c=e.createScanner(5,!1,r.languageVariant,r.text),l=[];return y(r),{spans:l,endOfLineState:0};function u(e,t,n){l.push(e),l.push(t),l.push(n)}function d(t,n,i,a){if(3===n){var o=e.parseIsolatedJSDocComment(r.text,i,a);if(o&&o.jsDoc)return o.jsDoc.parent=t,void function(e){var t=e.pos;if(e.tags)for(var n=0,r=e.tags;n<r.length;n++){var i=r[n];switch(i.pos!==t&&p(t,i.pos-t),u(i.atToken.pos,i.atToken.end-i.atToken.pos,10),u(i.tagName.pos,i.tagName.end-i.tagName.pos,18),t=i.tagName.end,i.kind){case 279:a(i);break;case 282:f(i);break;case 281:case 280:y(i.typeExpression)}t=i.end}t!==e.end&&p(t,e.end-t);return;function a(e){e.isNameFirst&&(p(t,e.name.pos-t),u(e.name.pos,e.name.end-e.name.pos,17),t=e.name.end),e.typeExpression&&(p(t,e.typeExpression.pos-t),y(e.typeExpression),t=e.typeExpression.end),e.isNameFirst||(p(t,e.name.pos-t),u(e.name.pos,e.name.end-e.name.pos,17),t=e.name.end)}}(o.jsDoc)}p(i,a)}function p(e,t){u(e,t,1)}function f(e){for(var t=0,n=e.getChildren();t<n.length;t++){y(n[t])}}function _(t,n,r){var i;for(i=n;i<r&&!e.isLineBreak(t.charCodeAt(i));i++);for(u(n,i-n,1),c.setTextPos(i);c.getTextPos()<r;)m()}function m(){var e=c.getTextPos(),t=c.scan(),n=c.getTextPos(),r=h(t);r&&u(e,n-e,r)}function g(t){if(e.isJSDoc(t))return!0;if(e.nodeIsMissing(t))return!0;var n=function(e){switch(e.parent&&e.parent.kind){case 251:if(e.parent.tagName===e)return 19;break;case 252:if(e.parent.tagName===e)return 20;break;case 250:if(e.parent.tagName===e)return 21;break;case 253:if(e.parent.name===e)return 22}return}(t);if(!e.isToken(t)&&10!==t.kind&&void 0===n)return!1;var i=10===t.kind?t.pos:function(t){for(s.setTextPos(t.pos);;){var n=s.getTextPos();if(!e.couldStartTrivia(r.text,n))return n;var i=s.scan(),a=s.getTextPos(),o=a-n;if(!e.isTrivia(i))return n;if(4!==i&&5!==i)if(e.isComment(i))d(t,i,n,o),s.setTextPos(a);else if(7===i){var c=r.text,l=c.charCodeAt(n);if(60===l||62===l){u(n,o,1);continue}e.Debug.assert(124===l||61===l),_(c,n,a)}}}(t),a=t.end-i;if(e.Debug.assert(a>=0),a>0){var o=n||h(t.kind,t);o&&u(i,a,o)}return!0}function h(t,n){if(e.isKeyword(t))return 3;if((27===t||29===t)&&n&&e.getTypeArgumentOrTypeParameterList(n.parent))return 10;if(e.isPunctuation(t)){if(n){if(58===t&&(226===n.parent.kind||149===n.parent.kind||146===n.parent.kind||253===n.parent.kind))return 5;if(194===n.parent.kind||192===n.parent.kind||193===n.parent.kind||195===n.parent.kind)return 5}return 10}if(8===t)return 4;if(9===t)return 253===n.parent.kind?24:6;if(12===t)return 6;if(e.isTemplateLiteralKind(t))return 6;if(10===t)return 23;if(71===t){if(n)switch(n.parent.kind){case 229:return n.parent.name===n?11:void 0;case 145:return n.parent.name===n?15:void 0;case 230:return n.parent.name===n?13:void 0;case 232:return n.parent.name===n?12:void 0;case 233:return n.parent.name===n?14:void 0;case 146:return n.parent.name===n?e.isThisIdentifier(n)?3:17:void 0}return 2}}function y(i){if(i&&e.decodedTextSpanIntersectsWith(a,o,i.pos,i.getFullWidth())){t(n,i.kind);for(var s=0,c=i.getChildren(r);s<c.length;s++){var l=c[s];g(l)||y(l)}}}}e.createClassifier=function(){var t=e.createScanner(5,!1),n=[];n[71]=!0,n[9]=!0,n[8]=!0,n[12]=!0,n[99]=!0,n[43]=!0,n[44]=!0,n[20]=!0,n[22]=!0,n[18]=!0,n[101]=!0,n[86]=!0;var r=[];function i(t){switch(t){case 1:return e.TokenClass.Comment;case 3:return e.TokenClass.Keyword;case 4:return e.TokenClass.NumberLiteral;case 5:return e.TokenClass.Operator;case 6:return e.TokenClass.StringLiteral;case 8:return e.TokenClass.Whitespace;case 10:return e.TokenClass.Punctuation;case 2:case 11:case 12:case 13:case 14:case 15:case 16:case 9:case 17:default:return e.TokenClass.Identifier}}function a(i,a,s){for(var c=0,l=0,u=0;r.length>0;)r.pop();switch(a){case 3:i='"\\\n'+i,c=3;break;case 2:i="'\\\n"+i,c=3;break;case 1:i="/*\n"+i,c=3;break;case 4:i="`\n"+i,c=2;break;case 5:i="}\n"+i,c=2;case 6:r.push(14)}t.setText(i);var d,p,f={endOfLineState:0,spans:[]},_=0;do{if(l=t.scan(),!e.isTrivia(l)){if(41!==l&&63!==l||n[u]){if(23===u&&o(l))l=71;else if(o(u)&&o(l)&&(d=u,p=l,e.isAccessibilityModifier(d)&&125!==p&&135!==p&&123!==p&&115!==p))l=71;else if(71===u&&27===l)_++;else if(29===l&&_>0)_--;else if(119===l||136===l||133===l||122===l||137===l)_>0&&!s&&(l=71);else if(14===l)r.push(l);else if(17===l)r.length>0&&r.push(l);else if(18===l&&r.length>0){var m=e.lastOrUndefined(r);14===m?16===(l=t.reScanTemplateToken())?r.pop():e.Debug.assertEqual(l,15,"Should have been a template middle."):(e.Debug.assertEqual(m,17,"Should have been an open brace"),r.pop())}}else 12===t.reScanSlashToken()&&(l=12);u=l}g()}while(1!==l);return f;function g(){var n=t.getTokenPos(),a=t.getTextPos();if(function(e,t,n){if(8===n)return;0===e&&c>0&&(e+=c);var r=(t-=c)-(e-=c);r>0&&(f.spans.push(e),f.spans.push(r),f.spans.push(n))}(n,a,function(t){if(o(t))return 3;if(function(e){switch(e){case 39:case 41:case 42:case 37:case 38:case 45:case 46:case 47:case 27:case 29:case 30:case 31:case 93:case 92:case 118:case 32:case 33:case 34:case 35:case 48:case 50:case 49:case 53:case 54:case 69:case 68:case 70:case 65:case 66:case 67:case 59:case 60:case 61:case 63:case 64:case 58:case 26:return!0;default:return!1}}(t)||function(e){switch(e){case 37:case 38:case 52:case 51:case 43:case 44:return!0;default:return!1}}(t))return 5;if(t>=17&&t<=70)return 10;switch(t){case 8:return 4;case 9:return 6;case 12:return 7;case 7:case 3:case 2:return 1;case 5:case 4:return 8;case 71:default:return e.isTemplateLiteralKind(t)?6:2}}(l)),a>=i.length)if(9===l){var s=t.getTokenText();if(t.isUnterminated()){for(var u=s.length-1,d=0;92===s.charCodeAt(u-d);)d++;if(1&d){var p=s.charCodeAt(0);f.endOfLineState=34===p?3:2}}}else 3===l?t.isUnterminated()&&(f.endOfLineState=1):e.isTemplateLiteralKind(l)?t.isUnterminated()&&(16===l?f.endOfLineState=5:13===l?f.endOfLineState=4:e.Debug.fail("Only 'NoSubstitutionTemplateLiteral's and 'TemplateTail's can be unterminated; got SyntaxKind #"+l)):r.length>0&&14===e.lastOrUndefined(r)&&(f.endOfLineState=6)}}function o(e){return e>=72&&e<=142}return{getClassificationsForLine:function(t,n,r){return function(t,n){for(var r=[],a=t.spans,o=0,s=0;s<a.length;s+=3){var c=a[s],l=a[s+1],u=a[s+2];if(o>=0){var d=c-o;d>0&&r.push({length:d,classification:e.TokenClass.Whitespace})}r.push({length:l,classification:i(u)}),o=c+l}var p=n.length-o;return p>0&&r.push({length:p,classification:e.TokenClass.Whitespace}),{entries:r,finalLexState:t.endOfLineState}}(a(t,n,r),t)},getEncodedLexicalClassifications:a}},e.getSemanticClassifications=function(e,t,r,a,o){return i(n(e,t,r,a,o))},e.getEncodedSemanticClassifications=n,e.getSyntacticClassifications=function(e,t,n){return i(a(e,t,n))},e.getEncodedSyntacticClassifications=a}(ts||(ts={})),function(e){!function(t){!function(t){function n(t,n,r,i,a,o,c,u){void 0===u&&(u=[]),void 0===t&&(t=""),t=e.normalizeSlashes(t),""===(t=e.getDirectoryPath(t))&&(t="."+e.directorySeparator),t=e.ensureTrailingDirectorySeparator(t);var d=l(e.isRootedDiskPath(t)?t:e.combinePaths(n,t)),_=e.getDirectoryPath(d),g=!(o.useCaseSensitiveFileNames&&o.useCaseSensitiveFileNames());if(m(o,_)){var h=f(o,_,r,void 0,["./*"]);if(h){for(var y=e.createMap(),v=0,b=h;v<b.length;v++){var x=b[v];if(x=e.normalizePath(x),!c||0!==e.comparePaths(x,c,n,g)){var k=i?e.getBaseFileName(x):e.removeFileExtension(e.getBaseFileName(x));y.get(k)||y.set(k,!0)}}e.forEachKey(y,(function(e){u.push(s(e,"script",a))}))}var S=p(o,_);if(S)for(var T=0,C=S;T<C.length;T++){var E=C[T],D=e.getBaseFileName(e.normalizePath(E));u.push(s(D,"directory",a))}}return u}function r(t,n,r,i,a){if(a.readDirectory){var o=e.hasZeroOrOneAsteriskCharacter(r)?e.tryParsePattern(r):void 0;if(o){var s=l(o.prefix),c=e.getDirectoryPath(s),u=e.getBaseFileName(s),d=e.stringContains(t,e.directorySeparator),p=d?e.combinePaths(c,u+e.getDirectoryPath(t)):c,_=e.normalizePath(o.suffix),m=e.combinePaths(n,p),g=d?m:e.ensureTrailingDirectorySeparator(m)+u,h=f(a,m,i,void 0,[_?"**/*":"./*"]);if(h){for(var y=[],v=0,b=h;v<b.length;v++){var x=b[v],k=e.normalizePath(x);if(e.endsWith(k,_)&&e.startsWith(k,g)){var S=g.length,T=k.length-S-_.length;y.push(e.removeFileExtension(k.substr(S,T)))}}return y}}}}function i(t,n,r,i,c){if(void 0===c&&(c=[]),n.types)for(var l=0,u=n.types;l<u.length;l++){var d=u[l];c.push(s(d,"external module name",i))}else if(t.getDirectories){var p=void 0;try{p=e.getEffectiveTypeRoots(n,t)}catch(e){}if(p)for(var f=0,_=p;f<_.length;f++){a(t,_[f],i,c)}}if(t.getDirectories)for(var m=0,g=o(r,t);m<g.length;m++){var h=g[m];a(t,e.combinePaths(e.getDirectoryPath(h),"node_modules/@types"),i,c)}return c}function a(t,n,r,i){if(t.getDirectories&&m(t,n)){var a=p(t,n);if(a)for(var o=0,c=a;o<c.length;o++){var l=c[o];l=e.normalizePath(l),i.push(s(e.getBaseFileName(l),"external module name",r))}}}function o(t,n){for(var r,i=[];r=e.findConfigFile(t,(function(e){return _(n,e)}),"package.json");){i.push(r),t=e.getDirectoryPath(r);var a=e.getDirectoryPath(t);if(t===a)break;t=a}return i}function s(e,t,n){return{name:e,kind:t,kindModifiers:"",sortText:e,replacementSpan:n}}function c(t,n){var r=t.lastIndexOf(e.directorySeparator),i=-1!==r?r+1:0;return{start:n+i,length:t.length-i}}function l(t){return e.hasTrailingDirectorySeparator(t)?e.ensureTrailingDirectorySeparator(e.normalizePath(t)):e.normalizePath(t)}t.getStringLiteralCompletionEntriesFromModuleNames=function(t,a,l,u){var p,_=e.normalizeSlashes(t.text),m=t.getSourceFile().path,h=e.getDirectoryPath(m),y=c(t.text,t.getStart()+1);if(function(e){if(e&&e.length>=2&&46===e.charCodeAt(0)){var t=e.length>=3&&46===e.charCodeAt(1)?2:1,n=e.charCodeAt(t);return 47===n||92===n}return!1}(_)||e.isRootedDiskPath(_)){var v=e.getSupportedExtensions(a);p=a.rootDirs?function(t,r,i,a,o,s,c,l,u){for(var d=c.project||l.getCurrentDirectory(),p=!(l.useCaseSensitiveFileNames&&l.useCaseSensitiveFileNames()),f=function(t,n,r,i){t=e.map(t,(function(t){return e.normalizePath(e.isRootedDiskPath(t)?t:e.combinePaths(n,t))}));var a=e.forEach(t,(function(t){return e.containsPath(t,r,n,i)?r.substr(t.length):void 0}));return e.deduplicate(e.map(t,(function(t){return e.combinePaths(t,a)})))}(t,d,i,p),_=[],m=0,g=f;m<g.length;m++){n(r,g[m],a,o,s,l,u,_)}return _}(a.rootDirs,_,h,v,!1,y,a,l,m):n(_,h,v,!1,y,l,m)}else p=function(t,a,c,l,u,p){var _,m=l.baseUrl,h=l.paths;if(m){var y=e.getSupportedExtensions(l),v=l.project||u.getCurrentDirectory(),b=e.isRootedDiskPath(m)?m:e.combinePaths(v,m);if(_=n(t,e.normalizePath(b),y,!1,c,u),h)for(var x in h)if(h.hasOwnProperty(x))if("*"===x){if(h[x])for(var k=0,S=h[x];k<S.length;k++)for(var T=0,C=r(t,m,S[k],y,u);T<C.length;T++){var E=C[T];_.push(s(E,"external module name",c))}}else if(e.startsWith(x,t)){h[x]&&1===h[x].length&&h[x][0]&&_.push(s(x,"external module name",c))}}else _=[];i(u,l,a,c,_);for(var D=0,A=function(t,n,r,i,a){var s=e.stringContains(t,e.directorySeparator),c=s?t.substr(0,t.lastIndexOf(e.directorySeparator)):void 0,l=e.map(i.getAmbientModules(),(function(t){return e.stripQuotes(t.name)})),u=e.filter(l,(function(n){return e.startsWith(n,t)}));if(s){var p=e.ensureTrailingDirectorySeparator(c);u=e.map(u,(function(t){return e.removePrefix(t,p)}))}if(!r.moduleResolution||r.moduleResolution===e.ModuleResolutionKind.NodeJs)for(var _=0,m=function(t,n){var r=[];if(t.readFile&&t.fileExists)for(var i=0,a=o(n,t);i<a.length;i++){var s=a[i],c=v(s);if(!c)return;for(var l=e.combinePaths(e.getDirectoryPath(s),"node_modules"),u=[],p=0,f=d;p<f.length;p++){b(c[f[p]],u)}for(var _=0,m=u;_<m.length;_++){var h=m[_],y=e.combinePaths(l,h);r.push({moduleName:h,moduleDir:y})}}return r;function v(e){try{var n=function(e,t){return g(e,e.readFile,t)}(t,e);return n?JSON.parse(n):void 0}catch(e){return}}function b(t,n){if(t)for(var r in t)t.hasOwnProperty(r)&&!e.startsWith(r,"@types/")&&n.push(r)}}(a,n);_<m.length;_++){var h=m[_];if(s){if(e.startsWith(h.moduleName,c)){var y=f(a,h.moduleDir,e.supportedTypeScriptExtensions,void 0,["./*"]);if(y)for(var v=0,b=y;v<b.length;v++){var x=b[v];x=e.normalizePath(x);var k=e.removeFileExtension(e.getBaseFileName(x));u.push(k)}}}else u.push(h.moduleName)}return e.deduplicate(u)}(t,a,l,p,u);D<A.length;D++){var w=A[D];_.push(s(w,"external module name",c))}return _}(_,h,y,a,l,u);return{isGlobalCompletion:!1,isMemberCompletion:!1,isNewIdentifierLocation:!0,entries:p}},t.getTripleSlashReferenceCompletion=function(t,r,a,o){var s=e.getTokenAtPosition(t,r,!1);if(s){var l=e.getLeadingCommentRanges(t.text,s.pos);if(l&&l.length){var d=e.forEach(l,(function(e){return r>=e.pos&&r<=e.end&&e}));if(d){var p={isGlobalCompletion:!1,isMemberCompletion:!1,isNewIdentifierLocation:!0,entries:[]},f=t.text.substr(d.pos,r-d.pos),_=u.exec(f);if(_){var m=_[1],g=_[2],h=_[3],y=e.getDirectoryPath(t.path);if("path"===g){var v=c(h,d.pos+m.length);p.entries=n(h,y,e.getSupportedExtensions(a),!0,v,o,t.path)}else{var b={start:d.pos+m.length,length:_[0].length-m.length};p.entries=i(o,a,y,b)}}return p}}}};var u=/^(\/\/\/\s*<reference\s+(path|types)\s*=\s*(?:'|"))([^\3"]*)$/,d=["dependencies","devDependencies","peerDependencies","optionalDependencies"];function p(e,t){return g(e,e.getDirectories,t)}function f(e,t,n,r,i){return g(e,e.readDirectory,t,n,r,i)}function _(e,t){return g(e,e.fileExists,t)}function m(t,n){try{return e.directoryProbablyExists(n,t)}catch(e){}}function g(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return t&&t.apply(e,n)}catch(e){}}}(t.PathCompletions||(t.PathCompletions={}))}(e.Completions||(e.Completions={}))}(ts||(ts={})),function(e){!function(t){var n;function r(t,n,r,a,o,s,c){var l=u(t,o,r,s);if(l)return{name:l,kind:e.SymbolDisplay.getSymbolKind(a,t,n),kindModifiers:e.SymbolDisplay.getSymbolModifiers(t),sortText:"0",source:i(c),hasAction:void 0!==c||void 0}}function i(t){return t&&e.stripQuotes(t.moduleSymbol.name)}function a(t,n,i,a,o,s,c,l,u){var d=e.timestamp(),p=e.createMap();if(t)for(var f=0,_=t;f<_.length;f++){var m=_[f],g=u?u[e.getSymbolId(m)]:void 0,h=r(m,i,a,o,s,l,g);if(h){var y=h.name;p.has(y)||(g||void 0===m.parent&&!e.some(m.declarations,(function(e){return e.getSourceFile()===i.getSourceFile()}))||p.set(y,!0),n.push(h))}}return c("getCompletionsAtPosition: getCompletionEntriesFromSymbols: "+(e.timestamp()-d)),p}function o(e,t){if(e){var n=[];if(s(e,n,t),n.length)return{isGlobalCompletion:!1,isMemberCompletion:!1,isNewIdentifierLocation:!1,entries:n}}}function s(t,n,r,i){if(void 0===i&&(i=e.createMap()),t&&16384&t.flags&&(t=r.getBaseConstraintOfType(t)),t)if(65536&t.flags)for(var a=0,o=t.types;a<o.length;a++){s(o[a],n,r,i)}else if(32&t.flags&&!(256&t.flags)){var c=t.value;i.has(c)||(i.set(c,!0),n.push({name:c,kindModifiers:"",kind:"var",sortText:"0"}))}}function c(t,n,r,a,o,s,c){var d=s.name,p=s.source,f=l(t,n,a,o,c);if(f){var _=f.symbols,m=f.location,g=f.allowStringLiteral,h=f.symbolToOriginInfoMap,y=e.find(_,(function(t){return u(t,r.target,!1,g)===d&&i(h[e.getSymbolId(t)])===p}));return y&&{symbol:y,location:m,symbolToOriginInfoMap:h}}}function l(t,n,r,i,a){var o,s=e.isSourceFileJavaScript(r),c=e.timestamp(),l=e.getTokenAtPosition(r,i,!1);n("getCompletionData: Get current token: "+(e.timestamp()-c)),c=e.timestamp();var u=e.isInComment(r,i,l);n("getCompletionData: Is inside comment: "+(e.timestamp()-c));var d=!1;if(u){if(e.hasDocComment(r,i))if(64===r.text.charCodeAt(i-1))o={kind:"JsDocTagName"};else{var p=e.getLineStartPositionForPosition(i,r);r.text.substring(p,i).match(/[^\*|\s|(/\*\*)]/)||(o={kind:"JsDocTag"})}var f=function(t,n){var r=function(t){if(!e.isToken(t))return t;switch(t.kind){case 104:case 110:case 76:return t.parent.parent;default:return t.parent}}(t).jsDoc;if(!r)return;for(var i=0,a=r;i<a.length;i++){var o=a[i],s=o.pos,c=o.end,l=o.tags;if(!(!l||n<s||n>c))for(var u=l.length-1;u>=0;u--){var d=l[u];if(n>=d.pos)return d}}}(l,i);if(f&&(f.tagName.pos<=i&&i<=f.tagName.end&&(o={kind:"JsDocTagName"}),function(e){switch(e.kind){case 279:case 284:case 280:case 281:case 283:return!0}}(f)&&f.typeExpression&&267===f.typeExpression.kind&&((l=e.getTokenAtPosition(r,i,!0))&&(e.isDeclarationName(l)||284===l.parent.kind&&l.parent.name===l)||(d=q(f.typeExpression))),e.isJSDocParameterTag(f)&&(e.nodeIsMissing(f.name)||f.name.pos<=i&&i<=f.name.end)&&(o={kind:"JsDocParameterName",tag:f})),o)return{symbols:void 0,isGlobalCompletion:!1,isMemberCompletion:!1,allowStringLiteral:!1,isNewIdentifierLocation:!1,location:void 0,isRightOfDot:!1,request:o,keywordFilters:0,symbolToOriginInfoMap:void 0};if(!d)return void n("Returning an empty list because completion was inside a regular comment or plain text part of a JsDoc comment.")}c=e.timestamp();var y=e.findPrecedingToken(i,r,void 0,d);n("getCompletionData: Get previous token 1: "+(e.timestamp()-c));var v=y;if(v&&i<=v.end&&e.isWord(v.kind)){var b=e.timestamp();v=e.findPrecedingToken(v.getFullStart(),r,void 0,d),n("getCompletionData: Get previous token 2: "+(e.timestamp()-b))}var x=l,k=!1,S=!1,T=!1,C=e.getTouchingPropertyName(r,i,d);if(v){if(function(t){var r=e.timestamp(),a=function(t){if(9===t.kind||12===t.kind||e.isTemplateLiteralKind(t.kind)){var n=t.getStart(),r=t.getEnd();if(n<i&&i<r)return!0;if(i===r)return!!t.isUnterminated||12===t.kind}return!1}(t)||function(t){var n=t.parent.kind;switch(t.kind){case 26:return 226===n||227===n||208===n||232===n||J(n)||230===n||175===n||231===n||e.isClassLike(t.parent)&&t.parent.typeParameters&&t.parent.typeParameters.end>=t.pos;case 23:return 175===n;case 56:return 176===n;case 21:return 175===n;case 19:return 260===n||J(n);case 17:return 232===n||230===n||163===n;case 25:return 148===n&&t.parent&&t.parent.parent&&(230===t.parent.parent.kind||163===t.parent.parent.kind);case 27:return 229===n||199===n||230===n||231===n||e.isFunctionLikeKind(n);case 115:return 149===n&&!e.isClassLike(t.parent.parent);case 24:return 146===n||t.parent&&t.parent.parent&&175===t.parent.parent.kind;case 114:case 112:case 113:return 146===n&&!e.isConstructorDeclaration(t.parent.parent);case 118:return 242===n||246===n||240===n;case 125:case 135:if(K(t))return!1;case 75:case 83:case 109:case 89:case 104:case 91:case 110:case 76:case 116:case 138:return!0}if(m(t.getText())&&K(t))return!1;if(z(t)&&(!e.isIdentifier(t)||h(t.getText())||q(t)))return!1;switch(t.getText()){case"abstract":case"async":case"class":case"const":case"declare":case"enum":case"function":case"interface":case"let":case"private":case"protected":case"public":case"static":case"var":case"yield":return!0}return e.isDeclarationName(t)&&!e.isJsxAttribute(t.parent)}(t)||function(e){if(8===e.kind){var t=e.getFullText();return"."===t.charAt(t.length-1)}return!1}(t)||function(e){if(10===e.kind)return!0;if(29===e.kind&&e.parent){if(251===e.parent.kind)return!0;if(252===e.parent.kind||250===e.parent.kind)return e.parent.parent&&249===e.parent.parent.kind}return!1}(t);return n("getCompletionsAtPosition: isCompletionListBlocker: "+(e.timestamp()-r)),a}(v))return void n("Returning an empty list because completion was requested in an invalid position.");var E=v.parent;if(23===v.kind)if(179===E.kind)x=v.parent.expression,k=!0;else{if(143!==E.kind)return;x=v.parent.left,k=!0}else if(1===r.languageVariant)switch(E&&179===E.kind&&(v=E,E=E.parent),E.kind){case 252:41===v.kind&&(T=!0,C=v);break;case 194:if(!(32768&E.left.flags))break;case 250:case 249:case 251:27===v.kind&&(S=!0,C=v)}}var D,A,w=e.timestamp(),N=!1,I=!1,P=0,O=[],F=[];if(k)!function(){N=!1,D=!0,A=!1;var n=d||e.isPartOfTypeNode(x.parent),r=e.isInRightSideOfInternalImportEqualsDeclaration(x);if(e.isEntityName(x)){var i=t.getSymbolAtLocation(x);if(i&&1920&(i=e.skipAlias(i,t)).flags){for(var a=t.getExportsOfModule(i),o=function(e){return t.isValidPropertyAccess(x.parent,e.name)},s=function(e){return j(e)},c=r?function(e){return s(e)||o(e)}:n?s:o,l=0,u=a;l<u.length;l++){var p=u[l];c(p)&&O.push(p)}return void(!n&&i.declarations.some((function(e){return 265!==e.kind&&233!==e.kind&&232!==e.kind}))&&U(t.getTypeOfSymbolAtLocation(i,x)))}}n||U(t.getTypeAtLocation(x))}();else if(S){var L=t.getJsxIntrinsicTagNames();O=B()?L.concat(O.filter((function(e){return!!(2204607&e.flags)}))):L,D=!0,A=!1}else if(T){var R=v.parent.parent.openingElement.tagName,M=t.getSymbolAtLocation(R);t.isUnknownSymbol(M)||(O=[M]),D=!0,A=!1}else if(!B())return;return n("getCompletionData: Semantic work: "+(e.timestamp()-w)),{symbols:O,isGlobalCompletion:N,isMemberCompletion:D,allowStringLiteral:I,isNewIdentifierLocation:A,location:C,isRightOfDot:k||S,request:o,keywordFilters:P,symbolToOriginInfoMap:F};function U(e){for(var n=0,r=e.getApparentProperties();n<r.length;n++){var i=r[n];t.isValidPropertyAccess(x.parent,i.name)&&O.push(i)}if(s&&65536&e.flags)for(var a=0,o=e.types;a<o.length;a++){U(o[a])}}function B(){var n,o,s,c;if(n=function(t){if(t)switch(t.kind){case 17:case 26:var n=t.parent;if(e.isObjectLiteralExpression(n)||e.isObjectBindingPattern(n))return n}return}(v))return function(n){var r,i;if(D=!0,I=!0,178===n.kind){if(A=!0,!(s=t.getContextualType(n)))return!1;r=function(e,t){if(!(65536&e.flags))return t.getPropertiesOfType(e);var n=e.types.filter((function(e){return!(8190&e.flags||t.isArrayLikeType(e))}));return t.getAllPossiblePropertiesOfTypes(n)}(s,t),i=n.properties}else{e.Debug.assert(174===n.kind),A=!1;var a=e.getRootDeclaration(n.parent);if(!e.isVariableLike(a))throw e.Debug.fail("Root declaration is not variable-like.");var o=a.initializer||a.type||216===a.parent.parent.kind;if(o||146!==a.kind||(e.isExpression(a.parent)?o=!!t.getContextualType(a.parent):151!==a.parent.kind&&154!==a.parent.kind||(o=e.isExpression(a.parent.parent)&&!!t.getContextualType(a.parent.parent))),o){var s;if(!(s=t.getTypeAtLocation(n)))return!1;r=t.getPropertiesOfType(s).filter((function(t){return!(24&e.getDeclarationModifierFlagsFromSymbol(t))})),i=n.elements}}r&&r.length>0&&(O=function(t,n){if(!n||0===n.length)return t;for(var r=e.createUnderscoreEscapedMap(),i=0,a=n;i<a.length;i++){var o=a[i];if((261===o.kind||262===o.kind||176===o.kind||151===o.kind||153===o.kind||154===o.kind)&&!q(o)){var s=void 0;if(176===o.kind&&o.propertyName)71===o.propertyName.kind&&(s=o.propertyName.escapedText);else{var c=e.getNameOfDeclaration(o);s=e.getEscapedTextOfIdentifierOrLiteral(c)}r.set(s,!0)}}return e.filter(t,(function(e){return!r.get(e.escapedName)}))}(r,i));return!0}(n);if(o=function(e){if(e)switch(e.kind){case 17:case 26:switch(e.parent.kind){case 241:case 245:return e.parent}}return}(v))return function(n){var r=241===n.kind?238:244,i=e.getAncestor(n,r).moduleSpecifier;if(!i)return!1;D=!0,A=!1;var a=t.getSymbolAtLocation(i);if(!a)return O=e.emptyArray,!0;var o=t.getExportsAndPropertiesOfModule(a);return O=function(t,n){for(var r=e.createUnderscoreEscapedMap(),i=0,a=n;i<a.length;i++){var o=a[i];if(!q(o)){var s=o.propertyName||o.name;r.set(s.escapedText,!0)}}if(0===r.size)return e.filter(t,(function(e){return"default"!==e.escapedName}));return e.filter(t,(function(e){return"default"!==e.escapedName&&!r.get(e.escapedName)}))}(o,n.elements),!0}(o);if(function(t){if(t)switch(t.kind){case 19:case 26:return e.isConstructorDeclaration(t.parent)&&t.parent;default:if(z(t))return t.parent.parent}return}(v))return D=!1,A=!0,P=2,!0;if(s=function(t){if(t)switch(t.kind){case 17:case 26:if(e.isClassLike(t.parent))return t.parent;break;case 25:case 18:if(e.isClassLike(C))return C;if(K(C)&&C.parent.name===C)return C.parent.parent;break;default:if(K(t)&&(_(t.kind)||m(t.getText())))return t.parent.parent}if(C&&286===C.kind&&e.isClassLike(C.parent))return C.parent;return}(v))return function(n){D=!0,A=!0,P=1;var r=e.getClassExtendsHeritageClauseElement(n),i=e.getClassImplementsHeritageClauseElements(n);if(r||i){var a=v.parent,o=e.isClassElement(a)&&e.getModifierFlags(a);if(71===v.kind&&!q(v))switch(v.getText()){case"private":o|=8;break;case"static":o|=32}if(!(8&o)){var s=void 0;r&&(s=t.getTypeAtLocation(r),32&o&&(s=t.getTypeOfSymbolAtLocation(s.symbol,n)));var c=32&o?e.emptyArray:e.flatMap(i||e.emptyArray,(function(e){return t.getPropertiesOfType(t.getTypeAtLocation(e))}));O=function(t,n,r,i){for(var a=e.createUnderscoreEscapedMap(),o=0,s=r;o<s.length;o++){var c=s[o];if((149===c.kind||151===c.kind||153===c.kind||154===c.kind)&&(!q(c)&&!e.hasModifier(c,8))){var l=e.hasModifier(c,32),u=!!(32&i);if(!(l&&!u||!l&&u)){var d=e.getPropertyNameForPropertyNameNode(c.name);d&&a.set(d,!0)}}}var p=[];return f(t,8),f(n,24),p;function f(e,t){for(var n=0,r=e;n<r.length;n++){var i=r[n];_(i,t)&&p.push(i)}}function _(t,n){return!a.get(t.escapedName)&&t.getDeclarations()&&!(e.getDeclarationModifierFlagsFromSymbol(t)&n)}}(s?t.getPropertiesOfType(s):e.emptyArray,c,n.members,o)}}}(s),!0;if(c=function(e){if(e){var t=e.parent;switch(e.kind){case 28:case 41:case 71:case 179:case 254:case 253:case 255:if(t&&(250===t.kind||251===t.kind))return t;if(253===t.kind)return t.parent.parent;break;case 9:if(t&&(253===t.kind||255===t.kind))return t.parent.parent;break;case 18:if(t&&256===t.kind&&t.parent&&253===t.parent.kind)return t.parent.parent.parent;if(t&&255===t.kind)return t.parent.parent}}return}(v)){var l=void 0;if((250===c.kind||251===c.kind)&&(l=t.getAllAttributesTypeFromJsxOpeningLikeElement(c)))return O=function(t,n){for(var r=e.createUnderscoreEscapedMap(),i=0,a=n;i<a.length;i++){var o=a[i];q(o)||253===o.kind&&r.set(o.name.escapedText,!0)}return e.filter(t,(function(e){return!r.get(e.escapedName)}))}(t.getPropertiesOfType(l),c.attributes.properties),D=!0,A=!1,!0}D=!1,A=function(e){if(e){var t=e.parent.kind;switch(e.kind){case 26:return 181===t||152===t||182===t||177===t||194===t||160===t;case 19:return 181===t||152===t||182===t||185===t||168===t;case 21:return 177===t||157===t||144===t;case 128:case 129:return!0;case 23:return 233===t;case 17:return 229===t;case 58:return 226===t||194===t;case 14:return 196===t;case 15:return 205===t;case 114:case 112:case 113:return 149===t}switch(e.getText()){case"public":case"protected":case"private":return!0}}return!1}(v),y!==v&&e.Debug.assert(!!y,"Expected 'contextToken' to be defined when different from 'previousToken'.");var u=y!==v?y.getStart():i,p=function(t,n,r){var i=t;for(;i&&!e.positionBelongsToNode(i,n,r);)i=i.parent;return i}(v,u,r)||r;p&&(N=265===p.kind||196===p.kind||256===p.kind||e.isStatement(p));return function(n,i){var o=i.toLowerCase();e.codefix.forEachExternalModule(t,a,(function(i){if(i!==r.symbol)for(var a=0,s=t.getExportsOfModule(i);a<s.length;a++){var c=s[a],l=c.name,u="default"===l;if(u){var d=e.getLocalSymbolForExportDefault(c);d&&(c=d,l=d.name)}c.declarations&&c.declarations.some((function(t){return e.isExportSpecifier(t)&&!!t.parent.parent.moduleSpecifier}))||$(l.toLowerCase(),o)&&(n.push(c),F[e.getSymbolId(c)]={moduleSymbol:i,isDefaultExport:u})}}))}(O=t.getSymbolsInScope(p,2998271),y&&e.isIdentifier(y)?y.text:""),function(n){e.filterMutate(n,(function(n){if(!e.isSourceFile(C)){if(e.isExportAssignment(C.parent))return!0;if(n&&2097152&n.flags&&(n=t.getAliasedSymbol(n)),e.isInRightSideOfInternalImportEqualsDeclaration(C))return!!(1920&n.flags);if(d||!function(e){return e&&103===e.kind&&162===e.parent.kind}(v)&&(e.isPartOfTypeNode(C)||function(t){if(t){var n=t.parent.kind;switch(t.kind){case 56:return 149===n||148===n||146===n||226===n||e.isFunctionLikeKind(n);case 58:return 231===n;case 118:return 202===n}}}(v)))return j(n)}return!!(107455&e.getCombinedLocalAndExportSymbolFlags(n))}))}(O),!0}function j(n){if(n=n.exportSymbol||n,793064&(n=e.skipAlias(n,t)).flags)return!0;if(1536&n.flags){var r=t.getExportsOfModule(n);return e.forEach(r,j)}}function $(e,t){if(0===t.length)return!0;for(var n=0,r=0;r<e.length;r++)if(e.charCodeAt(r)===t.charCodeAt(n)&&++n===t.length)return!0;return!1}function K(t){return e.isClassElement(t.parent)&&e.isClassLike(t.parent.parent)}function z(t){return t.parent&&function(t){return e.isParameter(t)&&e.isConstructorDeclaration(t.parent)}(t.parent)&&(g(t.kind)||e.isDeclarationName(t))}function J(t){return e.isFunctionLikeKind(t)&&152!==t}function q(e){return e.getStart()<=i&&i<=e.getEnd()}}function u(t,n,r,i){var a=t.name;if(a){if(1920&t.flags){var o=a.charCodeAt(0);if(e.isSingleOrDoubleQuote(o))return}return d(a,n,r,i)}}function d(t,n,r,i){return r&&!e.isIdentifierText(t,n)?i?JSON.stringify(t):void 0:t}!function(e){e[e.None=0]="None",e[e.ClassElementKeywords=1]="ClassElementKeywords",e[e.ConstructorParameterKeywords=2]="ConstructorParameterKeywords"}(n||(n={})),t.getCompletionsAtPosition=function(n,r,i,c,u,p,_){if(e.isInReferenceComment(u,p))return t.PathCompletions.getTripleSlashReferenceCompletion(u,p,c,n);if(e.isInString(u,p))return function(n,r,i,c,l,u){var d=e.findPrecedingToken(r,n);if(!d||9!==d.kind)return;if(261===d.parent.kind&&178===d.parent.parent.kind&&d.parent.name===d)return function(e,t,n,r){var i=t.getContextualType(e.parent),o=[];if(i&&(a(i.getApparentProperties(),o,e,!1,t,n,r,!0),o.length))return{isGlobalCompletion:!1,isMemberCompletion:!0,isNewIdentifierLocation:!0,entries:o}}(d.parent,i,c.target,u);if(e.isElementAccessExpression(d.parent)&&d.parent.argumentExpression===d)return function(e,t,n,r){var i=t.getTypeAtLocation(e.expression),o=[];if(i&&(a(i.getApparentProperties(),o,e,!1,t,n,r,!0),o.length))return{isGlobalCompletion:!1,isMemberCompletion:!0,isNewIdentifierLocation:!0,entries:o};return}(d.parent,i,c.target,u);if(238===d.parent.kind||e.isExpressionOfExternalModuleImportEqualsDeclaration(d)||e.isRequireCall(d.parent,!1))return t.PathCompletions.getStringLiteralCompletionEntriesFromModuleNames(d,c,l,i);if(function(t){return e.isBinaryExpression(t)&&(n=t.operatorToken.kind,32===n||33===n||34===n||35===n);var n}(d.parent))return o(i.getTypeAtLocation(d.parent.left===d?d.parent.right:d.parent.left),i);if(e.isCaseOrDefaultClause(d.parent))return o(i.getTypeAtLocation(d.parent.parent.parent.expression),i);var p=e.SignatureHelp.getImmediatelyContainingArgumentInfo(d,r,n);return p?function(t,n){var r=[],i=[],a=e.createMap();n.getResolvedSignature(t.invocation,r,t.argumentCount);for(var o=0,c=r;o<c.length;o++){var l=c[o];s(n.getParameterType(l,t.argumentIndex),i,n,a)}if(i.length)return{isGlobalCompletion:!1,isMemberCompletion:!1,isNewIdentifierLocation:!0,entries:i};return}(p,i):o(i.getContextualType(d),i)}(u,p,r,c,n,i);var m=l(r,i,u,p,_);if(m){var g=m.symbols,h=m.isGlobalCompletion,y=m.isMemberCompletion,v=m.allowStringLiteral,b=m.isNewIdentifierLocation,x=m.location,k=m.request,S=m.keywordFilters,T=m.symbolToOriginInfoMap;if(1===u.languageVariant&&x&&x.parent&&252===x.parent.kind)return{isGlobalCompletion:!1,isMemberCompletion:!0,isNewIdentifierLocation:!1,entries:[{name:x.parent.parent.openingElement.tagName.getFullText(),kind:"class",kindModifiers:void 0,sortText:"0"}]};if(k)return{isGlobalCompletion:!1,isMemberCompletion:!1,isNewIdentifierLocation:!1,entries:"JsDocTagName"===k.kind?e.JsDoc.getJSDocTagNameCompletions():"JsDocTag"===k.kind?e.JsDoc.getJSDocTagCompletions():e.JsDoc.getJSDocParameterNameCompletions(k.tag)};var C=[];if(e.isSourceFileJavaScript(u)){var E=a(g,C,x,!0,r,c.target,i,v,T);!function(t,n,r,i,a){e.getNameTable(t).forEach((function(t,o){if(t!==n){var s=e.unescapeLeadingUnderscores(o);if(!r.has(s)){r.set(s,!0);var c=d(s,i,!0,!1);c&&a.push({name:c,kind:"warning",kindModifiers:"",sortText:"1"})}}}))}(u,x.pos,E,c.target,C)}else{if((!g||0===g.length)&&0===S)return;a(g,C,x,!0,r,c.target,i,v,T)}return 0===S&&y||e.addRange(C,f(S)),{isGlobalCompletion:h,isMemberCompletion:y,isNewIdentifierLocation:b,entries:C}}},t.getCompletionEntryDetails=function(t,n,r,i,a,o,s,l,u){var d=o.name,p=o.source,_=c(t,n,r,i,a,o,s);if(_){var m=_.symbol,g=_.location,h=function(t,n,r,i,a,o,s){var c=t[e.getSymbolId(n)];if(!c)return;var l=c.moduleSymbol,u=c.isDefaultExport;return e.codefix.getCodeActionForImport(l,{host:i,checker:r,newLineCharacter:i.getNewLine(),compilerOptions:a,sourceFile:o,rulesProvider:s,symbolName:n.name,getCanonicalFileName:e.createGetCanonicalFileName(!!i.useCaseSensitiveFileNames&&i.useCaseSensitiveFileNames()),symbolToken:void 0,kind:u?1:0})}(_.symbolToOriginInfoMap,m,t,l,r,i,u),y=e.SymbolDisplay.getSymbolModifiers(m),v=e.SymbolDisplay.getSymbolDisplayPartsDocumentationAndSymbolKind(t,m,i,g,g,7),b=v.displayParts,x=v.documentation,k=v.symbolKind,S=v.tags;return{name:d,kindModifiers:y,kind:k,displayParts:b,documentation:x,tags:S,codeActions:h,source:void 0===p?void 0:[e.textPart(p)]}}if(void 0===p&&e.some(f(0),(function(e){return e.name===d})))return{name:d,kind:"keyword",kindModifiers:"",displayParts:[e.displayPart(d,e.SymbolDisplayPartKind.keyword)],documentation:void 0,tags:void 0,codeActions:void 0,source:void 0}},t.getCompletionEntrySymbol=function(e,t,n,r,i,a,o){var s=c(e,t,n,r,i,a,o);return s&&s.symbol};var p=[];function f(t){var n=p[t];return n||(p[t]=function(t){switch(t){case 0:return function(){for(var t=[],n=72;n<=142;n++)t.push({name:e.tokenToString(n),kind:"keyword",kindModifiers:"",sortText:"0"});return t}();case 1:return r(m);case 2:return r(h)}}(t));function r(t){return e.filter(f(0),(function(e){return t(e.name)}))}}function _(e){switch(e){case 114:case 113:case 112:case 117:case 115:case 123:case 131:case 125:case 135:case 120:return!0}}function m(t){return _(e.stringToToken(t))}function g(e){switch(e){case 114:case 112:case 113:case 131:return!0}}function h(t){return g(e.stringToToken(t))}}(e.Completions||(e.Completions={}))}(ts||(ts={})),function(e){!function(t){function n(t,n){return{fileName:n.fileName,textSpan:e.createTextSpanFromNode(t,n),kind:"none"}}function r(e,t){return void 0!==e&&e.kind===t}function i(e){return e&&e.parent}function a(t){var n=[];return function t(r){if(223===r.kind)n.push(r);else if(224===r.kind){var i=r;i.catchClause?t(i.catchClause):t(i.tryBlock),i.finallyBlock&&t(i.finallyBlock)}else e.isFunctionLike(r)||e.forEachChild(r,t)}(t),n}function o(t){var n=[];return function t(r){218===r.kind||217===r.kind?n.push(r):e.isFunctionLike(r)||e.forEachChild(r,t)}(t),n}function s(e,t){var n=c(t);return n&&n===e}function c(t){for(var n=t.parent;n;n=n.parent)switch(n.kind){case 221:if(217===t.kind)continue;case 214:case 215:case 216:case 213:case 212:if(!t.label||p(n,t.label.text))return n;break;default:if(e.isFunctionLike(n))return}}function l(t,n){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return!(!n||!e.contains(r,n.kind))&&(t.push(n),!0)}function u(t){var n=[];if(l(n,t.getFirstToken(),88,106,81)&&212===t.kind)for(var r=t.getChildren(),i=r.length-1;i>=0&&!l(n,r[i],106);i--);var a=o(t.statement);return e.forEach(a,(function(e){s(t,e)&&l(n,e.getFirstToken(),72,77)})),n}function d(t){var n=[];return l(n,t.getFirstToken(),98),e.forEach(t.caseBlock.clauses,(function(r){l(n,r.getFirstToken(),73,79);var i=o(r);e.forEach(i,(function(e){s(t,e)&&l(n,e.getFirstToken(),72)}))})),n}function p(e,t){for(var n=e.parent;222===n.kind;n=n.parent)if(n.label.escapedText===t)return!0;return!1}t.getDocumentHighlights=function(t,o,s,p,f){var _=e.getTouchingWord(s,p,!0);if(_!==s){if(e.Debug.assert(void 0!==_.parent),e.isJsxOpeningElement(_.parent)&&_.parent.tagName===_||e.isJsxClosingElement(_.parent)){var m=_.parent.parent,g=[m.openingElement,m.closingElement].map((function(e){return n(e.tagName,s)}));return[{fileName:s.fileName,highlightSpans:g}]}return function(t,n,r,i){var a=e.FindAllReferences.getReferenceEntriesForNode(t,n,i,r);return a&&function(t){for(var n=e.createMap(),r=0,i=t;r<i.length;r++){var a=i[r],o=e.FindAllReferences.toHighlightSpan(a),s=o.fileName,c=o.span,l=n.get(s);l||n.set(s,l=[]),l.push(c)}return e.arrayFrom(n.entries(),(function(e){return{fileName:e[0],highlightSpans:e[1]}}))}(a)}(_,t,o,f)||function(t,o){var s=function(t,o){if(!t)return;switch(t.kind){case 90:case 82:if(r(t.parent,211))return function(t,i){var a=[];for(;r(t.parent,211)&&t.parent.elseStatement===t;)t=t.parent;for(;t;){var o=t.getChildren();l(a,o[0],90);for(var s=o.length-1;s>=0&&!l(a,o[s],82);s--);if(!r(t.elseStatement,211))break;t=t.elseStatement}var c=[];for(s=0;s<a.length;s++){if(82===a[s].kind&&s<a.length-1){for(var u=a[s],d=a[s+1],p=!0,f=d.getStart()-1;f>=u.end;f--)if(!e.isWhiteSpaceSingleLine(i.text.charCodeAt(f))){p=!1;break}if(p){c.push({fileName:i.fileName,textSpan:e.createTextSpanFromBounds(u.getStart(),d.end),kind:"reference"}),s++;continue}}c.push(n(a[s],i))}return c}(t.parent,o);break;case 96:if(r(t.parent,219))return m(function(t){var n=e.getContainingFunction(t);if(!n||!r(n.body,207))return;var i=[];return e.forEachReturnStatement(n.body,(function(e){l(i,e.getFirstToken(),96)})),e.forEach(a(n.body),(function(e){l(i,e.getFirstToken(),100)})),i}(t.parent));break;case 100:if(r(t.parent,223))return m(function(t){var n=function(t){var n=t;for(;n.parent;){var r=n.parent;if(e.isFunctionBlock(r)||265===r.kind)return r;if(224===r.kind){var i=r;if(i.tryBlock===n&&i.catchClause)return n}n=r}return}(t);if(!n)return;var r=[];e.forEach(a(n),(function(e){l(r,e.getFirstToken(),100)})),e.isFunctionBlock(n)&&e.forEachReturnStatement(n,(function(e){l(r,e.getFirstToken(),96)}));return r}(t.parent));break;case 102:case 74:case 87:var s=74===t.kind?i(i(t)):i(t);if(r(s,224))return m(function(t,n){var r=[];l(r,t.getFirstToken(),102),t.catchClause&&l(r,t.catchClause.getFirstToken(),74);if(t.finallyBlock){l(r,e.findChildOfKind(t,87,n),87)}return r}(s,o));break;case 98:if(r(t.parent,221))return m(d(t.parent));break;case 73:case 79:if(r(i(i(i(t))),221))return m(d(t.parent.parent.parent));break;case 72:case 77:if(r(t.parent,218)||r(t.parent,217))return m(function(e){var t=c(e);if(t)switch(t.kind){case 214:case 215:case 216:case 212:case 213:return u(t);case 221:return d(t)}return}(t.parent));break;case 88:if(r(t.parent,214)||r(t.parent,215)||r(t.parent,216))return m(u(t.parent));break;case 106:case 81:if(r(t.parent,213)||r(t.parent,212))return m(u(t.parent));break;case 123:if(r(t.parent,152))return m((p=t.parent,f=p.symbol.getDeclarations(),_=[],e.forEach(f,(function(t){e.forEach(t.getChildren(),(function(e){return l(_,e,123)}))})),_));break;case 125:case 135:if(r(t.parent,153)||r(t.parent,154))return m(function(t){var n=[];return r(t.symbol,153),r(t.symbol,154),n;function r(t,r){var i=e.getDeclarationOfKind(t,r);i&&e.forEach(i.getChildren(),(function(e){return l(n,e,125,135)}))}}(t.parent));break;default:if(e.isModifierKind(t.kind)&&t.parent&&(e.isDeclaration(t.parent)||208===t.parent.kind))return m(function(t,n){if(!function(e,t){var n=t.parent;switch(e){case 112:case 113:case 114:switch(n.kind){case 229:case 199:return!0;case 152:return 146===t.kind;default:return!1}case 115:return 229===n.kind||199===n.kind;case 84:case 124:return 234===n.kind||265===n.kind;case 117:return 229===n.kind||229===t.kind;default:return!1}}(t,n))return;var r=e.modifierToFlag(t);return e.mapDefined(function(t,n){var r=t.parent;switch(r.kind){case 234:case 265:case 207:case 257:case 258:return 128&n?t.members.concat([t]):r.statements;case 152:return r.parameters.concat(r.parent.members);case 229:case 199:var i=r.members;if(28&n){var a=e.find(r.members,e.isConstructorDeclaration);if(a)return i.concat(a.parameters)}else if(128&n)return i.concat([r]);return i;default:e.Debug.fail("Invalid container kind.")}}(n,r),(function(n){if(e.getModifierFlags(n)&r){var i=e.find(n.modifiers,(function(e){return e.kind===t}));return e.Debug.assert(!!i),i}}))}(t.kind,t.parent))}var p,f,_;function m(e){return e&&e.map((function(e){return n(e,o)}))}}(t,o);if(!s||0===s.length)return;return[{fileName:o.fileName,highlightSpans:s}]}(_,s)}}}(e.DocumentHighlights||(e.DocumentHighlights={}))}(ts||(ts={})),function(e){e.createDocumentRegistry=function(t,n){void 0===n&&(n="");var r=e.createMap(),i=e.createGetCanonicalFileName(!!t);function a(e){return"_"+e.target+"|"+e.module+"|"+e.noResolve+"|"+e.jsx+"|"+e.allowJs+"|"+e.baseUrl+"|"+JSON.stringify(e.typeRoots)+"|"+JSON.stringify(e.rootDirs)+"|"+JSON.stringify(e.paths)}function o(t,n){var i=r.get(t);return!i&&n&&r.set(t,i=e.createMap()),i}function s(e,t,n,r,i,a,o){return l(e,t,n,r,i,a,!0,o)}function c(e,t,n,r,i,a,o){return l(e,t,n,r,i,a,!1,o)}function l(t,n,r,i,a,s,c,l){var u=o(i,!0),d=u.get(n);d?(d.sourceFile.version!==s&&(d.sourceFile=e.updateLanguageServiceSourceFile(d.sourceFile,a,s,a.getChangeRange(d.sourceFile.scriptSnapshot))),c&&d.languageServiceRefCount++):(d={sourceFile:e.createLanguageServiceSourceFile(t,a,r.target,s,!1,l),languageServiceRefCount:1,owners:[]},u.set(n,d));return d.sourceFile}function u(t,n){var r=o(n,!1);e.Debug.assert(void 0!==r);var i=r.get(t);i.languageServiceRefCount--,e.Debug.assert(i.languageServiceRefCount>=0),0===i.languageServiceRefCount&&r.delete(t)}return{acquireDocument:function(t,r,o,c,l){return s(t,e.toPath(t,n,i),r,a(r),o,c,l)},acquireDocumentWithKey:s,updateDocument:function(t,r,o,s,l){return c(t,e.toPath(t,n,i),r,a(r),o,s,l)},updateDocumentWithKey:c,releaseDocument:function(t,r){return u(e.toPath(t,n,i),a(r))},releaseDocumentWithKey:u,reportStats:function(){var t=e.arrayFrom(r.keys()).filter((function(e){return e&&"_"===e.charAt(0)})).map((function(e){var t=r.get(e),n=[];return t.forEach((function(e,t){n.push({name:t,refCount:e.languageServiceRefCount,references:e.owners.slice(0)})})),n.sort((function(e,t){return t.refCount-e.refCount})),{bucket:e,sourceFiles:n}}));return JSON.stringify(t,void 0,2)},getKeyForCompilationSettings:a}}}(ts||(ts={})),function(e){!function(t){function n(t,n){return e.forEach(265===t.kind?t.statements:t.body.statements,(function(t){return n(t)||l(t)&&e.forEach(t.body&&t.body.statements,n)}))}function r(e,t){if(e.externalModuleIndicator||void 0!==e.imports)for(var r=0,a=e.imports;r<a.length;r++){var o=a[r];t(i(o),o)}else n(e,(function(e){switch(e.kind){case 244:case 238:(n=e).moduleSpecifier&&9===n.moduleSpecifier.kind&&t(n,n.moduleSpecifier);break;case 237:var n,r=(n=e).moduleReference;248===r.kind&&9===r.expression.kind&&t(n,r.expression)}}))}function i(t){var n=t.parent;switch(n.kind){case 181:case 238:case 244:return n;case 248:return n.parent;default:e.Debug.fail("Unexpected module specifier parent: "+n.kind)}}function a(t,n,r){var i=r.getMergedSymbol(t.parent);return e.isExternalModuleSymbol(i)?{exportingModuleSymbol:i,exportKind:n}:void 0}function o(t){return"default"!==t.escapedName?t.escapedName:e.forEach(t.declarations,(function(t){var n=e.getNameOfDeclaration(t);return n&&71===n.kind&&n.escapedText}))}function s(e,t){return t.getMergedSymbol(c(e).symbol)}function c(t){if(181===t.kind)return t.getSourceFile();var n=t.parent;return 265===n.kind?n:(e.Debug.assert(234===n.kind&&l(n.parent)),n.parent)}function l(e){return 233===e.kind&&9===e.name.kind}function u(e){var t=e.moduleReference;return 248===t.kind&&9===t.expression.kind}t.createImportTracker=function(t,i,a){var l=function(t,n,i){for(var a=e.createMap(),o=0,s=t;o<s.length;o++){var c=s[o];i.throwIfCancellationRequested(),r(c,(function(t,r){var i=n.getSymbolAtLocation(r);if(i){var o=e.getSymbolId(i).toString(),s=a.get(o);s||a.set(o,s=[]),s.push(t)}}))}return a}(t,i,a);return function(r,d,p){var f=function(t,r,i,a,o){var l=i.exportingModuleSymbol,u=i.exportKind,d=e.nodeSeenTracker(),p=e.nodeSeenTracker(),f=[],_=!!l.globalExports,m=_?void 0:[];return h(l),{directImports:f,indirectUsers:g()};function g(){if(_)return t;for(var n=0,r=l.declarations;n<r.length;n++){var i=r[n];e.isExternalModuleAugmentation(i)&&v(i)}return m.map(e.getSourceFileOfNode)}function h(t){var n=x(t);if(n)for(var r=0,i=n;r<i.length;r++){var c=i[r];if(d(c))switch(o.throwIfCancellationRequested(),c.kind){case 181:if(!_){var l=c.parent;if(2===u&&226===l.kind){var p=l.name;if(71===p.kind){f.push(p);break}}v(c.getSourceFile())}break;case 237:y(c,c.name,e.hasModifier(c,1));break;case 238:var m=c.importClause&&c.importClause.namedBindings;m&&240===m.kind?y(c,m.name):f.push(c);break;case 244:c.exportClause?f.push(c):h(s(c,a))}}}function y(t,r,i){if(2===u)f.push(t);else if(!_){var o=c(t);e.Debug.assert(265===o.kind||233===o.kind),i||function(e,t,r){var i=r.getSymbolAtLocation(t);return n(e,(function(e){if(244===e.kind){var t=e,n=t.exportClause;if(!t.moduleSpecifier&&n)for(var a=0,o=n.elements;a<o.length;a++){var s=o[a];if(r.getExportSpecifierLocalTargetSymbol(s)===i)return!0}}}))}(o,r,a)?b(o):v(o)}}function v(t){e.Debug.assert(!_);var n=p(t);return n&&m.push(t),n}function b(t){if(v(t)){var n=a.getMergedSymbol(t.symbol);e.Debug.assert(!!(1536&n.flags));var r=x(n);if(r)for(var i=0,o=r;i<o.length;i++){b(c(o[i]))}}}function x(t){return r.get(e.getSymbolId(t).toString())}}(t,l,d,i,a),_=f.directImports,m=f.indirectUsers;return __assign({indirectUsers:m},function(e,t,n,r,i){var a=[],s=[];function c(e,t){a.push([e,t])}if(e)for(var l=0,d=e;l<d.length;l++){p(d[l])}return{importSearches:a,singleReferences:s};function p(e){if(237!==e.kind)if(71!==e.kind){if(9===e.moduleSpecifier.kind)if(244!==e.kind){var a=e.importClause;if(a){var s=a.namedBindings;if(s&&240===s.kind)f(s.name);else if(0===n)_(s);else{var l=a.name;if(l&&(!i||l.escapedText===o(t)))c(l,r.getSymbolAtLocation(l));i||1!==n||_(s)}}}else _(e.exportClause)}else f(e);else u(e)&&f(e.name)}function f(e){2!==n||i&&!m(e.escapedText)||c(e,r.getSymbolAtLocation(e))}function _(e){if(e)for(var t=0,n=e.elements;t<n.length;t++){var a=n[t],o=a.name,l=a.propertyName;if(m((l||o).escapedText))if(l)s.push(l),i||c(o,r.getSymbolAtLocation(o));else c(o,246===a.kind&&a.propertyName?r.getExportSpecifierLocalTargetSymbol(a):r.getSymbolAtLocation(o))}}function m(e){return e===t.escapedName||0!==n&&"default"===e}}(_,r,d.exportKind,i,p))}},function(e){e[e.Named=0]="Named",e[e.Default=1]="Default",e[e.ExportEquals=2]="ExportEquals"}(t.ExportKind||(t.ExportKind={})),function(e){e[e.Import=0]="Import",e[e.Export=1]="Export"}(t.ImportExport||(t.ImportExport={})),t.findModuleReferences=function(e,t,n){for(var i=[],a=e.getTypeChecker(),o=0,s=t;o<s.length;o++){var c=s[o],l=n.valueDeclaration;if(265===l.kind){for(var u=0,d=c.referencedFiles;u<d.length;u++){var p=d[u];e.getSourceFileFromReference(c,p)===l&&i.push({kind:"reference",referencingFile:c,ref:p})}for(var f=0,_=c.typeReferenceDirectives;f<_.length;f++){p=_[f];var m=e.getResolvedTypeReferenceDirectives().get(p.fileName);void 0!==m&&m.resolvedFileName===l.fileName&&i.push({kind:"reference",referencingFile:c,ref:p})}}r(c,(function(e,t){a.getSymbolAtLocation(t)===n&&i.push({kind:"import",literal:t})}))}return i},t.getImportOrExportSymbol=function(t,n,r,i){return i?s():s()||function(){var i=function(t){var n=t.parent;switch(n.kind){case 237:return n.name===t&&u(n)?{isNamedImport:!1}:void 0;case 242:return n.propertyName?void 0:{isNamedImport:!0};case 239:case 240:return e.Debug.assert(n.name===t),{isNamedImport:!1};default:return}}(t);if(!i)return;var a=r.getImmediateAliasedSymbol(n);if(!a)return;"export="===(a=function(t,n){if(t.declarations)for(var r=0,i=t.declarations;r<i.length;r++){var a=i[r];if(e.isExportSpecifier(a)&&!a.propertyName&&!a.parent.parent.moduleSpecifier)return n.getExportSpecifierLocalTargetSymbol(a)}return t}(a,r)).escapedName&&(a=function(t,n){if(2097152&t.flags)return n.getImmediateAliasedSymbol(t);var r=t.valueDeclaration;if(e.isExportAssignment(r))return r.expression.symbol;if(e.isBinaryExpression(r))return r.right.symbol;e.Debug.fail()}(a,r));var s=o(a);if(void 0===s||"default"===s||s===n.escapedName)return __assign({kind:0,symbol:a},i)}();function s(){var a=t.parent;if(n.exportSymbol)return 179===a.kind?n.declarations.some((function(e){return e===a}))&&e.isBinaryExpression(a.parent)?u(a.parent,!1):void 0:c(n.exportSymbol,l(a));var o=function(e,t){if(226===e.kind){var n=e;return n.name!==t||260===n.parent.kind?void 0:208===n.parent.parent.kind?n.parent.parent:void 0}return e}(a,t);if(o&&e.hasModifier(o,1)){if(e.isImportEqualsDeclaration(o)&&o.moduleReference===t){if(i)return;return{kind:0,symbol:r.getSymbolAtLocation(o.name),isNamedImport:!1}}return c(n,l(o))}if(e.isExportAssignment(a))return s(a);if(e.isExportAssignment(a.parent))return s(a.parent);if(e.isBinaryExpression(a))return u(a,!0);if(e.isBinaryExpression(a.parent))return u(a.parent,!0);function s(t){var r=t.symbol.parent;e.Debug.assert(!!r);var i=t.isExportEquals?2:1;return{kind:1,symbol:n,exportInfo:{exportingModuleSymbol:r,exportKind:i}}}function u(t,i){var a;switch(e.getSpecialPropertyAssignmentKind(t)){case 1:a=0;break;case 2:a=2;break;default:return}var o=i?r.getSymbolAtLocation(t.left.name):n;return o&&c(o,a)}}function c(e,t){var n=a(e,t,r);return n&&{kind:1,symbol:e,exportInfo:n}}function l(t){return e.hasModifier(t,512)?1:0}},t.getExportInfo=a}(e.FindAllReferences||(e.FindAllReferences={}))}(ts||(ts={})),function(e){!function(t){function n(e,t){return{type:"node",node:e,isInString:t}}function r(e,n,r,i,o){return void 0===o&&(o={}),a(t.Core.getReferencedSymbolsForNode(e,n,r,i,o))}function i(n,r,i,a,o,s){var c=e.getTouchingPropertyName(a,o,!0);return t.Core.getReferencedSymbolsForNode(c,n,i,r,s)}function a(t){return t&&e.flatMap(t,(function(e){return e.references}))}function o(t,n){var r=function(){switch(t.type){case"symbol":var r=t.symbol,i=t.node,a=s(r,i,n),o=a.displayParts,c=a.kind;return{node:i,name:o.map((function(e){return e.text})).join(""),kind:c,displayParts:o};case"label":var l=t.node;return{node:l,name:l.text,kind:"label",displayParts:[e.displayPart(l.text,e.SymbolDisplayPartKind.text)]};case"keyword":var u=t.node,d=e.tokenToString(u.kind);return{node:u,name:d,kind:"keyword",displayParts:[{text:d,kind:"keyword"}]};case"this":var p=t.node,f=(r=n.getSymbolAtLocation(p))&&e.SymbolDisplay.getSymbolDisplayPartsDocumentationAndSymbolKind(n,r,p.getSourceFile(),e.getContainerNode(p),p).displayParts;return{node:p,name:"this",kind:"var",displayParts:f};case"string":var _=t.node;return{node:_,name:_.text,kind:"var",displayParts:[e.displayPart(e.getTextOfNode(_),e.SymbolDisplayPartKind.stringLiteral)]}}}();if(r){var i=r.node,a=r.name,o=r.kind,c=r.displayParts,l=i.getSourceFile();return{containerKind:"",containerName:"",fileName:l.fileName,kind:o,name:a,textSpan:e.createTextSpanFromNode(i,l),displayParts:c}}}function s(t,n,r){var i=e.SymbolDisplay.getSymbolDisplayPartsDocumentationAndSymbolKind(r,t,n.getSourceFile(),e.getContainerNode(n),n);return{displayParts:i.displayParts,kind:i.symbolKind}}function c(t){if("span"===t.type)return{textSpan:t.textSpan,fileName:t.fileName,isWriteAccess:!1,isDefinition:!1};var n=t.node,r=t.isInString;return{fileName:n.getSourceFile().fileName,textSpan:l(n),isWriteAccess:u(n),isDefinition:79===n.kind||e.isAnyDeclarationName(n)||e.isLiteralComputedPropertyDeclarationName(n),isInString:r}}function l(t){var n=t.getStart(),r=t.getEnd();return 9===t.kind&&(n+=1,r-=1),e.createTextSpanFromBounds(n,r)}function u(t){return 79===t.kind||e.isAnyDeclarationName(t)||e.isWriteAccess(t)}t.nodeEntry=n,t.findReferencedSymbols=function(e,t,n,r,a){var s=i(e,t,n,r,a);if(s&&s.length){for(var l=[],u=e.getTypeChecker(),d=0,p=s;d<p.length;d++){var f=p[d],_=f.definition,m=f.references;_&&l.push({definition:o(_,u),references:m.map(c)})}return l}},t.getImplementationsAtPosition=function(i,a,o,c,u){var d=function(i,a,o,s){if(265===s.kind)return;var c=i.getTypeChecker();if(262===s.parent.kind){var l=[];return t.Core.getReferenceEntriesForShorthandPropertyAssignment(s,c,(function(e){return l.push(n(e))})),l}if(97===s.kind||e.isSuperProperty(s.parent)){var u=c.getSymbolAtLocation(s);return u.valueDeclaration&&[n(u.valueDeclaration)]}return r(s,i,o,a,{implementations:!0})}(i,a,o,e.getTouchingPropertyName(c,u,!1)),p=i.getTypeChecker();return e.map(d,(function(t){return function(t,n){if("node"===t.type){var r=t.node;return __assign({textSpan:l(r),fileName:r.getSourceFile().fileName},function(t,n){var r=n.getSymbolAtLocation(e.isDeclaration(t)&&t.name?t.name:t);return r?s(r,t,n):178===t.kind?{kind:"interface",displayParts:[e.punctuationPart(19),e.textPart("object literal"),e.punctuationPart(20)]}:199===t.kind?{kind:"local class",displayParts:[e.punctuationPart(19),e.textPart("anonymous local class"),e.punctuationPart(20)]}:{kind:e.getNodeKind(t),displayParts:[]}}(r,n))}return{textSpan:t.textSpan,fileName:t.fileName,kind:"",displayParts:[]}}(t,p)}))},t.findReferencedEntries=function(t,n,r,o,s,l){var u=a(i(t,n,r,o,s,l));return e.map(u,c)},t.getReferenceEntriesForNode=r,t.toHighlightSpan=function(e){if("span"===e.type)return{fileName:e.fileName,span:{textSpan:e.textSpan,kind:"reference"}};var t=e.node,n=e.isInString,r=e.node.getSourceFile().fileName,i=u(t);return{fileName:r,span:{textSpan:l(t),kind:i?"writtenReference":"reference",isInString:n}}}}(e.FindAllReferences||(e.FindAllReferences={}))}(ts||(ts={})),function(e){!function(t){!function(n){n.getReferencedSymbolsForNode=function(n,a,s,l,p){if(void 0===p&&(p={}),265!==n.kind){if(!p.implementations){var _=function(n,r,i){if(e.isTypeKeyword(n.kind))return function(t,n,r){for(var i=[],a=0,o=t;a<o.length;a++){var s=o[a];r.throwIfCancellationRequested(),f(s,n,e.tokenToString(n),i)}return i.length?[{definition:{type:"keyword",node:i[0].node},references:i}]:void 0}(r,n.kind,i);if(e.isLabelName(n)){if(e.isJumpStatementTarget(n)){var a=e.getTargetLabel(n.parent,n.text);return a&&d(a.parent,a)}return d(n.parent,n)}if(e.isThis(n))return function(n,r,i){var a=e.getThisContainer(n,!1),o=32;switch(a.kind){case 151:case 150:if(e.isObjectLiteralMethod(a))break;case 149:case 148:case 152:case 153:case 154:o&=e.getModifierFlags(a),a=a.parent;break;case 265:if(e.isExternalModule(a))return;case 228:case 186:break;default:return}var s=[];if(265===a.kind)e.forEach(r,(function(e){i.throwIfCancellationRequested(),l(e,e,u(e,"this"),s)}));else{var c=a.getSourceFile();l(c,a,u(c,"this",a),s)}return[{definition:{type:"this",node:n},references:s}];function l(n,r,i,a){e.forEach(i,(function(i){var s=e.getTouchingWord(n,i,!1);if(s&&e.isThis(s)){var c=e.getThisContainer(s,!1);switch(r.kind){case 186:case 228:r.symbol===c.symbol&&a.push(t.nodeEntry(s));break;case 151:case 150:e.isObjectLiteralMethod(r)&&r.symbol===c.symbol&&a.push(t.nodeEntry(s));break;case 199:case 229:c.parent&&r.symbol===c.parent.symbol&&(32&e.getModifierFlags(c))===o&&a.push(t.nodeEntry(s));break;case 265:265!==c.kind||e.isExternalModule(c)||a.push(t.nodeEntry(s))}}}))}}(n,r,i);if(97===n.kind)return function(n){var r=e.getSuperContainer(n,!1);if(!r)return;var i=32;switch(r.kind){case 149:case 148:case 151:case 150:case 152:case 153:case 154:i&=e.getModifierFlags(r),r=r.parent;break;default:return}for(var a=[],o=r.getSourceFile(),s=u(o,"super",r),c=0,l=s;c<l.length;c++){var d=l[c],p=e.getTouchingWord(o,d,!1);if(p&&97===p.kind){var f=e.getSuperContainer(p,!1);f&&(32&e.getModifierFlags(f))===i&&f.parent.symbol===r.symbol&&a.push(t.nodeEntry(p))}}return[{definition:{type:"symbol",symbol:r.symbol,node:n},references:a}]}(n);return}(n,s,l);if(_)return _}var g=a.getTypeChecker(),v=g.getSymbolAtLocation(n);return v?1536&v.flags&&function(t){if(9!==t.kind)return!1;switch(t.parent.kind){case 233:case 248:case 238:case 244:return!0;case 181:return e.isRequireCall(t.parent,!1)||e.isImportCall(t.parent);default:return!1}}(n)?function(n,r,i){e.Debug.assert(!!r.valueDeclaration);for(var a=t.findModuleReferences(n,i,r).map((function(t){return"import"===t.kind?{type:"node",node:t.literal}:{type:"span",fileName:t.referencingFile.fileName,textSpan:e.createTextSpanFromRange(t.ref)}})),o=0,s=r.declarations;o<s.length;o++){var c=s[o];switch(c.kind){case 265:break;case 233:a.push({type:"node",node:c.name});break;default:e.Debug.fail("Expected a module symbol to be declared by a SourceFile or ModuleDeclaration.")}}return[{definition:{type:"symbol",symbol:r,node:r.valueDeclaration},references:a}]}(a,v,s):function(t,n,a,s,l,u){t=function(t,n,r){var i=n.parent;if(e.isExportSpecifier(i))return h(n,t,i,r);if(e.isImportSpecifier(i)&&i.propertyName===n)return r.getImmediateAliasedSymbol(t);return t}(t,n,s);var d=function(t,n){if(n){var r=void 0;do{r=t;for(var i=0,a=n;i<a.length;i++){var o=a[i],s=e.getMeaningFromDeclaration(o);s&t&&(t|=s)}}while(t!==r)}return t}(e.getMeaningFromLocation(n),t.declarations),p=[],f=new r(a,123===n.kind,s,l,d,u,p);if(79===n.kind)y(n,t,n,f),i(n,t,{exportingModuleSymbol:t.parent,exportKind:1},f);else{var _=f.createSearch(n,t,void 0,{allSearchSymbols:k(t,n,s,u.implementations)}),g=function(t){var n=t.declarations,r=t.flags,i=t.parent,a=t.valueDeclaration;if(a&&(186===a.kind||199===a.kind))return a;if(!n)return;if(8196&r){var o=e.find(n,(function(t){return e.hasModifier(t,8)}));return o?e.getAncestor(o,229):void 0}if(c(t))return;var s,l=i&&!(262144&t.flags);if(l&&(!(1536&i.flags&&e.isExternalModuleSymbol(i))||i.globalExports))return;for(var u=0,d=n;u<d.length;u++){var p=d[u],f=e.getContainerNode(p);if(s&&s!==f)return;if(!f||265===f.kind&&!e.isExternalOrCommonJsModule(f))return;s=f}return l?s.getSourceFile():s}(t);if(g)m(g,g.getSourceFile(),_,f);else for(var v=0,b=f.sourceFiles;v<b.length;v++){var x=b[v];f.cancellationToken.throwIfCancellationRequested(),o(x,_,f)}}return p}(v,n,s,g,l,p):p.implementations||9!==n.kind?void 0:function(n,r,i){for(var a=[],o=0,s=r;o<s.length;o++){var c=s[o];i.throwIfCancellationRequested();var l=u(c,n.text);d(c,n.text,l,a)}return[{definition:{type:"string",node:n},references:a}];function d(n,r,i,a){for(var o=0,s=i;o<s.length;o++){var c=s[o],l=e.getTouchingWord(n,c,!1);l&&9===l.kind&&l.text===r&&a.push(t.nodeEntry(l,!0))}}}(n,s,l)}};var r=function(){function n(t,n,r,i,a,o,s){this.sourceFiles=t,this.isForConstructor=n,this.checker=r,this.cancellationToken=i,this.searchMeaning=a,this.options=o,this.result=s,this.inheritsFromCache=e.createMap(),this.markSeenContainingTypeReference=e.nodeSeenTracker(),this.markSeenReExportRHS=e.nodeSeenTracker(),this.symbolIdToReferences=[],this.sourceFileToSeenSymbols=[]}return n.prototype.getImportSearches=function(e,n){return this.importTracker||(this.importTracker=t.createImportTracker(this.sourceFiles,this.checker,this.cancellationToken)),this.importTracker(e,n,this.options.isForRename)},n.prototype.createSearch=function(t,n,r,i){void 0===i&&(i={});var a=i.text,o=void 0===a?e.stripQuotes(e.unescapeLeadingUnderscores((e.getLocalSymbolForExportDefault(n)||n).escapedName)):a,s=i.allSearchSymbols,c=void 0===s?void 0:s,l=e.escapeLeadingUnderscores(o),u=this.options.implementations&&function(t,n,r){var i=(a=t,e.isRightSideOfPropertyAccess(a)&&a.parent);var a;if(!i)return;var o=r.getTypeAtLocation(i.expression);if(!o)return;if(o.symbol&&96&o.symbol.flags&&o.symbol!==n.parent)return[o.symbol];if(196608&o.flags)return v(o)}(t,n,this.checker);return{location:t,symbol:n,comingFrom:r,text:o,escapedText:l,parents:u,includes:function(t){return c?e.contains(c,t):t===n}}},n.prototype.referenceAdder=function(n,r){var i=e.getSymbolId(n),a=this.symbolIdToReferences[i];return a||(a=this.symbolIdToReferences[i]=[],this.result.push({definition:{type:"symbol",symbol:n,node:r},references:a})),function(e){return a.push(t.nodeEntry(e))}},n.prototype.addStringOrCommentReference=function(e,t){this.result.push({definition:void 0,references:[{type:"span",fileName:e,textSpan:t}]})},n.prototype.markSearchedSymbol=function(t,n){var r=e.getNodeId(t),i=e.getSymbolId(n),a=this.sourceFileToSeenSymbols[r]||(this.sourceFileToSeenSymbols[r]=[]);return!a[i]&&(a[i]=!0)},n}();function i(e,t,n,r){var i=r.getImportSearches(t,n),a=i.importSearches,s=i.singleReferences,c=i.indirectUsers;if(s.length)for(var l=r.referenceAdder(t,e),u=0,d=s;u<d.length;u++){l(d[u])}for(var p=0,f=a;p<f.length;p++){var m=f[p],g=m[0],h=m[1];_(g.getSourceFile(),r.createSearch(g,h,1),r)}if(c.length){var y=void 0;switch(n.exportKind){case 0:y=r.createSearch(e,t,1);break;case 1:y=r.options.isForRename?void 0:r.createSearch(e,t,1,{text:"default"})}if(y)for(var v=0,b=c;v<b.length;v++){o(b[v],y,r)}}}function a(e,t){for(var n=0,r=e.declarations;n<r.length;n++){var i=r[n];_(i.getSourceFile(),t.createSearch(i,e,0),t)}}function o(t,n,r){void 0!==e.getNameTable(t).get(n.escapedText)&&_(t,n,r)}function s(t,n){return e.isArrayLiteralOrObjectLiteralDestructuringPattern(t.parent.parent)&&n.getPropertySymbolOfDestructuringAssignment(t)}function c(t){var n=e.getDeclarationOfKind(t,176);if(n&&174===n.parent.kind&&!n.propertyName)return n}function l(t,n){var r=c(t);if(r){var i=n.getTypeAtLocation(r.parent),a=i&&n.getPropertyOfType(i,r.name.text);return a&&98304&a.flags?(e.Debug.assert(!!(33554432&a.flags)),a.target):a}}function u(t,n,r){void 0===r&&(r=t);var i=[];if(!n||!n.length)return i;for(var a=t.text,o=a.length,s=n.length,c=a.indexOf(n,r.pos);c>=0&&!(c>r.end);){var l=c+s;0!==c&&e.isIdentifierPart(a.charCodeAt(c-1),5)||l!==o&&e.isIdentifierPart(a.charCodeAt(l),5)||i.push(c),c=a.indexOf(n,c+s+1)}return i}function d(n,r){for(var i=[],a=n.getSourceFile(),o=r.text,s=0,c=u(a,o,n);s<c.length;s++){var l=c[s],d=e.getTouchingWord(a,l,!1);d&&(d===r||e.isJumpStatementTarget(d)&&e.getTargetLabel(d,o)===r)&&i.push(t.nodeEntry(d))}return[{definition:{type:"label",node:r},references:i}]}function p(t,n){switch(t.kind){case 71:return t.text.length===n.length;case 9:return(e.isLiteralNameOfPropertyDeclarationOrIndexAccess(t)||function(t){if(9===t.kind)return e.isNameOfModuleDeclaration(t)||e.isExpressionOfExternalModuleImportEqualsDeclaration(t);return!1}(t))&&t.text.length===n.length;case 8:return e.isLiteralNameOfPropertyDeclarationOrIndexAccess(t)&&t.text.length===n.length;case 79:return"default".length===n.length;default:return!1}}function f(n,r,i,a){for(var o=0,s=u(n,i,n);o<s.length;o++){var c=s[o],l=e.getTouchingPropertyName(n,c,!0);l.kind===r&&a.push(t.nodeEntry(l))}}function _(e,t,n){return n.cancellationToken.throwIfCancellationRequested(),m(e,e,t,n)}function m(e,t,n,r){if(r.markSearchedSymbol(t,n.symbol))for(var i=0,a=u(t,n.text,e);i<a.length;i++){g(t,a[i],n,r)}}function g(n,r,o,c){var u=e.getTouchingPropertyName(n,r,!0);if(p(u,o.text)){if(e.getMeaningFromLocation(u)&c.searchMeaning){var d=c.checker.getSymbolAtLocation(u);if(d){var f=u.parent;if(!e.isImportSpecifier(f)||f.propertyName!==u){if(e.isExportSpecifier(f))return e.Debug.assert(71===u.kind),void function(n,r,o,s,c){var l=o.parent,u=o.propertyName,d=o.name,p=l.parent,f=h(n,r,o,c.checker);if(!s.includes(f))return;u?n===u?(p.moduleSpecifier||g(),!c.options.isForRename&&c.markSeenReExportRHS(d)&&y(d,r,d,c)):c.markSeenReExportRHS(n)&&g():g();if(n!==u||!c.options.isForRename){var _=79===n.originalKeywordKind?1:0,m=t.getExportInfo(r,_,c.checker);e.Debug.assert(!!m),i(n,r,m,c)}1!==s.comingFrom&&p.moduleSpecifier&&!u&&a(c.checker.getExportSpecifierLocalTargetSymbol(o),c);function g(){y(n,f,s.location,c)}}(u,d,f,o,c);var _=function(t,n,r,i){if(t.includes(n))return n;var a=e.getContainingObjectLiteralElement(r);if(a){var o=e.forEach(T(a,i.checker),(function(n){return e.find(i.checker.getRootSymbols(n),t.includes)}));if(o)return o;var c=s(r,i.checker);if(c&&t.includes(c))return c}var u=l(n,i.checker);if(u){var d=p(u);if(d)return d}return p(n);function p(n){return e.forEach(i.checker.getRootSymbols(n),(function(n){if(t.includes(n))return n;if(n.parent&&96&n.parent.flags){if(t.parents&&!e.some(t.parents,(function(t){return function(t,n,r,i){var a=64&n.getFlags();return o(t);function o(t){if(t===n)return!0;var i=e.getSymbolId(t)+","+e.getSymbolId(n),o=r.get(i);if(void 0!==o)return o;r.set(i,!1);var c=e.forEach(t.getDeclarations(),(function(t){if(e.isClassLike(t)){if(a){var n=e.getClassImplementsHeritageClauseElements(t);if(n)for(var r=0,i=n;r<i.length;r++){if(s(i[r]))return!0}}return s(e.getClassExtendsHeritageClauseElement(t))}return!(230!==t.kind||!a)&&e.forEach(e.getInterfaceBaseTypeNodes(t),s)}));return r.set(i,c),c}function s(e){if(e){var t=i.getTypeAtLocation(e);if(t&&t.symbol)return o(t.symbol)}return!1}}(n.parent,t,i.inheritsFromCache,i.checker)})))return;var r=[];return S(n.parent,n.name,r,e.createSymbolTable(),i.checker),e.find(r,t.includes)}}))}}(o,d,u,c);_?(c.isForConstructor?function(t,n,r,i){e.isNewExpressionTarget(t)&&y(t,r.symbol,r.location,i);var a=i.referenceAdder(r.symbol,r.location);if(e.isClassLike(t.parent))e.Debug.assert(t.parent.name===t),function(t,n,r){for(var i=0,a=t.members.get("__constructor").declarations;i<a.length;i++){var o=a[i],s=e.findChildOfKind(o,123,n);e.Debug.assert(152===o.kind&&!!s),r(s)}t.exports.forEach((function(t){var n=t.valueDeclaration;if(n&&151===n.kind){var i=n.body;i&&E(i,99,(function(t){e.isNewExpressionTarget(t)&&r(t)}))}}))}(r.symbol,n,a);else{var o=(s=t,e.tryGetClassExtendingExpressionWithTypeArguments(e.climbPastPropertyAccess(s).parent));o&&e.isClassLike(o)&&function(t,n){var r=t.symbol.members.get("__constructor");if(!r)return;for(var i=0,a=r.declarations;i<a.length;i++){var o=a[i];e.Debug.assert(152===o.kind);var s=o.body;s&&E(s,97,(function(t){e.isCallExpressionTarget(t)&&n(t)}))}}(o,a)}var s}(u,n,o,c):y(u,_,o.location,c),function(e,n,r,o){var s=t.getImportOrExportSymbol(e,n,o.checker,1===r.comingFrom);if(!s)return;var c=s.symbol;0===s.kind?o.options.isForRename&&!s.isNamedImport||a(c,o):i(e,c,s.exportInfo,o)}(u,d,o,c)):function(t,n,r){var i=t.flags,a=t.valueDeclaration,o=r.checker.getShorthandAssignmentValueSymbol(a);33554432&i||!n.includes(o)||y(e.getNameOfDeclaration(a),o,n.location,r)}(d,o,c)}}}}else!c.options.implementations&&(c.options.findInStrings&&e.isInString(n,r)||c.options.findInComments&&e.isInNonReferenceComment(n,r))&&c.addStringOrCommentReference(n.fileName,e.createTextSpan(r,o.text.length))}function h(t,n,r,i){return function(t,n){var r=n.parent,i=n.propertyName,a=n.name;return e.Debug.assert(i===t||a===t),i?i===t:!r.parent.moduleSpecifier}(t,r)?i.getExportSpecifierLocalTargetSymbol(r):n}function y(t,n,r,i){var a=i.referenceAdder(n,r);i.options.implementations?function(t,n,r){if(e.isDeclarationName(t)&&function(t){if(!t)return!1;if(e.isVariableLike(t)){if(t.initializer)return!0;if(226===t.kind){var n=function(t){if(t.parent&&t.parent.parent&&208===t.parent.parent.kind)return e.Debug.assert(227===t.parent.kind),t.parent.parent}(t);return n&&e.hasModifier(n,2)}}else{if(e.isFunctionLike(t))return!!t.body||e.hasModifier(t,2);switch(t.kind){case 229:case 199:case 232:case 233:return!0}}return!1}(t.parent))return void n(t.parent);if(71!==t.kind)return;262===t.parent.kind&&C(t,r.checker,n);var i=b(t);if(i)return void n(i);var a=function(t){var n=void 0;for(;t;)e.isTypeNode(t)&&(n=t),t=t.parent;return n}(t);if(a&&r.markSeenContainingTypeReference(a)){var o=a.parent;if(e.isVariableLike(o)&&o.type===a&&o.initializer&&x(o.initializer))n(o.initializer);else if(e.isFunctionLike(o)&&o.type===a&&o.body){var s=o.body;207===s.kind?e.forEachReturnStatement(s,(function(e){e.expression&&x(e.expression)&&n(e.expression)})):x(s)&&n(s)}else e.isAssertionExpression(o)&&x(o.expression)&&n(o.expression)}}(t,a,i):a(t)}function v(e,t){void 0===t&&(t=[]);for(var n=0,r=e.types;n<r.length;n++){var i=r[n];i.symbol&&96&i.symbol.getFlags()&&t.push(i.symbol),196608&i.getFlags()&&v(i,t)}return t}function b(t){if(t&&t.parent){if(201===t.kind&&259===t.parent.kind&&e.isClassLike(t.parent.parent))return t.parent.parent;if(71===t.kind||179===t.kind)return b(t.parent)}}function x(e){switch(e.kind){case 185:return x(e.expression);case 187:case 186:case 178:case 199:case 177:return!0;default:return!1}}function k(t,n,r,i){var a=[t],o=e.getContainingObjectLiteralElement(n);if(o){if(262!==o.kind){var c=s(n,r);c&&a.push(c)}e.forEach(T(o,r),(function(t){e.addRange(a,r.getRootSymbols(t))}));var u=r.getShorthandAssignmentValueSymbol(n.parent);u&&a.push(u)}t.valueDeclaration&&146===t.valueDeclaration.kind&&e.isParameterPropertyDeclaration(t.valueDeclaration)&&e.addRange(a,r.getSymbolsOfParameterPropertyDeclaration(t.valueDeclaration,t.name));var d=l(t,r);return d&&(a.push(d),p(d)),p(t),a;function p(t){for(var n=0,o=r.getRootSymbols(t);n<o.length;n++){var s=o[n];s!==t&&a.push(s),!i&&s.parent&&96&s.parent.flags&&S(s.parent,s.name,a,e.createSymbolTable(),r)}}}function S(t,n,r,i,a){function o(e){if(e){var o=a.getTypeAtLocation(e);if(o){var s=a.getPropertyOfType(o,n);s&&r.push.apply(r,a.getRootSymbols(s)),i.set(t.escapedName,t),S(o.symbol,n,r,i,a)}}}!t||i.has(t.escapedName)||96&t.flags&&e.forEach(t.getDeclarations(),(function(t){e.isClassLike(t)?(o(e.getClassExtendsHeritageClauseElement(t)),e.forEach(e.getClassImplementsHeritageClauseElements(t),o)):230===t.kind&&e.forEach(e.getInterfaceBaseTypeNodes(t),o)}))}function T(t,n){var r=t.parent,i=n.getContextualType(r),a=function(t){if(144===t.name.kind){var n=t.name.expression;return e.isStringOrNumericLiteral(n)?n.text:void 0}return e.getTextOfIdentifierOrLiteral(t.name)}(t);if(a&&i){var o=[],s=i.getProperty(a);return s&&o.push(s),65536&i.flags&&e.forEach(i.types,(function(e){var t=e.getProperty(a);t&&o.push(t)})),o}}function C(t,n,r){var i=n.getSymbolAtLocation(t),a=n.getShorthandAssignmentValueSymbol(i.valueDeclaration);if(a)for(var o=0,s=a.getDeclarations();o<s.length;o++){var c=s[o];1&e.getMeaningFromDeclaration(c)&&r(c)}}function E(t,n,r){e.forEachChild(t,(function(e){e.kind===n&&r(e),E(e,n,r)}))}n.getReferenceEntriesForShorthandPropertyAssignment=C}(t.Core||(t.Core={}))}(e.FindAllReferences||(e.FindAllReferences={}))}(ts||(ts={})),function(e){!function(t){function n(t,n,a){var s=[],c=n.getDeclarations(),l=o(t,n,a),u=l.symbolName,d=l.symbolKind,p=l.containerName;return function(t,n,r,i,a,o){if((e.isNewExpressionTarget(n)||123===n.kind)&&32&t.flags){for(var s=0,c=t.getDeclarations();s<c.length;s++){var l=c[s];if(e.isClassLike(l))return f(l.members,!0,r,i,a,o)}e.Debug.fail("Expected declaration to have at least one class-like declaration")}return!1}(n,a,d,u,p,s)||function(t,n,r,i,a,o){if(e.isCallExpressionTarget(n)||e.isNewExpressionTarget(n)||e.isNameOfFunctionDeclaration(n))return f(t.declarations,!1,r,i,a,o);return!1}(n,a,d,u,p,s)||e.forEach(c,(function(e){s.push(i(e,d,u,p))})),s;function f(t,n,a,o,s,c){if(!t)return!1;for(var l,u=[],d=0,p=t;d<p.length;d++){var f=p[d];(n?152===f.kind:r(f))&&(u.push(f),f.body&&(l=f))}return!!u.length&&(c.push(i(l||e.lastOrUndefined(u),a,o,s)),!0)}}function r(e){switch(e.kind){case 152:case 228:case 151:case 150:return!0;default:return!1}}function i(t,n,r,i){return a(e.getNameOfDeclaration(t)||t,n,r,i)}function a(t,n,r,i){var a=t.getSourceFile();return{fileName:a.fileName,textSpan:e.createTextSpanFromNode(t,a),kind:n,name:r,containerKind:void 0,containerName:i}}function o(t,n,r){return{symbolName:t.symbolToString(n),symbolKind:e.SymbolDisplay.getSymbolKind(t,n,r),containerName:n.parent?t.symbolToString(n.parent,r):""}}function s(e,t){var n=o(e,t.symbol,t),r=n.symbolName;return i(t,n.symbolKind,r,n.containerName)}function c(e,t){for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i.pos<=t&&t<=i.end)return i}}function l(t,n){return{fileName:n,textSpan:e.createTextSpanFromBounds(0,0),kind:"script",name:t,containerName:void 0,containerKind:void 0}}function u(t){return e.isRightSideOfPropertyAccess(t)?u(t.parent):t}t.getDefinitionAtPosition=function(t,o,d){var p=c(o.referencedFiles,d);if(p&&(f=e.tryResolveScriptReference(t,o,p)))return[l(p.fileName,f.fileName)];var f,_=c(o.typeReferenceDirectives,d);if(_)return(f=t.getResolvedTypeReferenceDirectives().get(_.fileName))&&f.resolvedFileName&&[l(_.fileName,f.resolvedFileName)];var m=e.getTouchingPropertyName(o,d,!0);if(m!==o){if(e.isJumpStatementTarget(m)){var g=m.text,h=e.getTargetLabel(m.parent,g);return h?[a(h,"label",g,void 0)]:void 0}var y=t.getTypeChecker(),v=function(t,n){var i=function(t){var n=u(t),r=n.parent;return r&&e.isCallLikeExpression(r)&&e.getInvokedExpression(r)===n&&r}(n),a=i&&t.getResolvedSignature(i);if(a){var o=a.declaration;if(o&&r(o))return o}return}(y,m);if(v)return[s(y,v)];var b=y.getSymbolAtLocation(m);if(b){if(2097152&b.flags&&function(e,t){if(71!==e.kind)return!1;if(e.parent===t)return!0;switch(t.kind){case 239:case 237:return!0;case 242:return 241===t.parent.kind;default:return!1}}(m,b.declarations[0])){var x=y.getAliasedSymbol(b);x.declarations&&(b=x)}if(262===m.parent.kind){var k=y.getShorthandAssignmentValueSymbol(b.valueDeclaration);if(!k)return[];var S=k.getDeclarations(),T=e.SymbolDisplay.getSymbolKind(y,k,m),C=y.symbolToString(k),E=y.symbolToString(b.parent,m);return e.map(S,(function(e){return i(e,T,C,E)}))}if(e.isPropertyName(m)&&e.isBindingElement(m.parent)&&e.isObjectBindingPattern(m.parent.parent)&&m===(m.parent.propertyName||m.parent.name)){var D=y.getTypeAtLocation(m.parent.parent);if(D){var A=e.getPropertySymbolsFromType(D,m);if(A)return e.flatMap(A,(function(e){return n(y,e,m)}))}}var w=e.getContainingObjectLiteralElement(m);return w&&y.getContextualType(w.parent)?e.flatMap(e.getPropertySymbolsFromContextualType(y,w),(function(e){return n(y,e,m)})):n(y,b,m)}}},t.getTypeDefinitionAtPosition=function(t,r,i){var a=e.getTouchingPropertyName(r,i,!0);if(a!==r){var o=t.getSymbolAtLocation(a);if(o){var s=t.getTypeOfSymbolAtLocation(o,a);if(s){if(65536&s.flags&&!(16&s.flags)){var c=[];return e.forEach(s.types,(function(r){r.symbol&&e.addRange(c,n(t,r.symbol,a))})),c}if(s.symbol)return n(t,s.symbol,a)}}}}}(e.GoToDefinition||(e.GoToDefinition={}))}(ts||(ts={})),function(e){!function(t){var n,r,i=["augments","author","argument","borrows","class","constant","constructor","constructs","default","deprecated","description","event","example","extends","field","fileOverview","function","ignore","inner","lends","link","memberOf","method","name","namespace","param","private","prop","property","public","requires","returns","see","since","static","throws","type","typedef","version"];function a(t,n){if(t)for(var r=0;r<t.length;r++)if(e.indexOf(t,t[r])===r){var i=n(t[r],r);if(i)return i}}function o(t){for(;185===t.kind;)t=t.expression;switch(t.kind){case 186:case 187:return t.parameters;case 199:for(var n=0,r=t.members;n<r.length;n++){var i=r[n];if(152===i.kind)return i.parameters}}return e.emptyArray}t.getJsDocCommentsFromDeclarations=function(t){var n=[];return a(t,(function(t){e.forEach(e.getAllJSDocs(t),(function(t){t.comment&&(n.length&&n.push(e.lineBreakPart()),n.push(e.textPart(t.comment)))}))})),n},t.getJsDocTagsFromDeclarations=function(t){var n=[];return a(t,(function(t){for(var r=0,i=e.getJSDocTags(t);r<i.length;r++){var a=i[r];276===a.kind&&n.push({name:a.tagName.text,text:a.comment})}})),n},t.getJSDocTagNameCompletions=function(){return n||(n=e.map(i,(function(e){return{name:e,kind:"keyword",kindModifiers:"",sortText:"0"}})))},t.getJSDocTagCompletions=function(){return r||(r=e.map(i,(function(e){return{name:"@"+e,kind:"keyword",kindModifiers:"",sortText:"0"}})))},t.getJSDocParameterNameCompletions=function(t){if(!e.isIdentifier(t.name))return e.emptyArray;var n=t.name.text,r=t.parent,i=r.parent;return e.isFunctionLike(i)?e.mapDefined(i.parameters,(function(i){if(e.isIdentifier(i.name)){var a=i.name.text;if(!r.tags.some((function(n){return n!==t&&e.isJSDocParameterTag(n)&&e.isIdentifier(n.name)&&n.name.escapedText===a}))&&(void 0===n||e.startsWith(a,n)))return{name:a,kind:"parameter",kindModifiers:"",sortText:"0"}}})):[]},t.getDocCommentTemplateAtPosition=function(t,n,r){if(!(e.isInString(n,r)||e.isInComment(n,r)||e.hasDocComment(n,r))){var i=e.getTokenAtPosition(n,r,!1),a=i.getStart();if(i&&!(a<r)){var s=function(t){for(var n=t;n;n=n.parent)switch(n.kind){case 228:case 151:case 152:return{commentOwner:n,parameters:n.parameters};case 229:return{commentOwner:n};case 208:var r=n.declarationList.declarations;return{commentOwner:n,parameters:1===r.length&&r[0].initializer?o(r[0].initializer):void 0};case 265:return;case 233:return 233===n.parent.kind?void 0:{commentOwner:n};case 194:var i=n;if(0===e.getSpecialPropertyAssignmentKind(i))return;return{commentOwner:n,parameters:e.isFunctionLike(i.right)?i.right.parameters:e.emptyArray}}}(i);if(s){var c=s.commentOwner,l=s.parameters;if(!(c.getStart()<r)){var u=n.getLineAndCharacterOfPosition(r),d=n.getLineStarts()[u.line],p=n.text.substr(d,u.character).replace(/\S/i,(function(){return" "})),f=e.hasJavaScriptFileExtension(n.fileName),_="";if(l)for(var m=0;m<l.length;m++){var g=l[m].name,h=71===g.kind?g.escapedText:"param"+m;_+=f?p+" * @param {any} "+h+t:p+" * @param "+h+t}var y="/**"+t+p+" * ";return{newText:y+t+_+p+" */"+(a===r?t+p:""),caretOffset:y.length}}}}}}}(e.JsDoc||(e.JsDoc={}))}(ts||(ts={})),function(e){!function(t){t.nodeCoreModuleList=["buffer","querystring","events","http","cluster","zlib","os","https","punycode","repl","readline","vm","child_process","url","dns","net","dgram","fs","path","string_decoder","tls","crypto","stream","util","assert","tty","domain","constants","process","v8","timers","console"];var n=e.arrayToSet(t.nodeCoreModuleList);t.loadSafeList=function(t,n){var r=e.readConfigFile(n,(function(e){return t.readFile(e)}));return e.createMapFromTemplate(r.config)},t.loadTypesMap=function(t,n){var r=e.readConfigFile(n,(function(e){return t.readFile(e)}));if(r.config)return e.createMapFromTemplate(r.config.simpleMap)},t.discoverTypings=function(t,r,i,a,o,s,c,l){if(!c||!c.enable)return{cachedTypingPaths:[],newTypingNames:[],filesToWatch:[]};var u=e.createMap();i=e.mapDefined(i,(function(t){var n=e.normalizePath(t);if(e.hasJavaScriptFileExtension(n))return n}));var d=[];c.include&&x(c.include,"Explicitly included types");var p=c.exclude||[],f=e.arrayToSet(i,e.getDirectoryPath);f.set(a,!0),f.forEach((function(t,n){k(e.combinePaths(n,"package.json"),d),k(e.combinePaths(n,"bower.json"),d),S(e.combinePaths(n,"bower_components"),d),S(e.combinePaths(n,"node_modules"),d)})),function(t){var n=e.mapDefined(t,(function(t){if(e.hasJavaScriptFileExtension(t)){var n=e.removeFileExtension(e.getBaseFileName(t.toLowerCase())).replace(/((?:\.|-)min(?=\.|$))|((?:-|\.)\d+)/g,"");return o.get(n)}}));n.length&&x(n,"Inferred typings from file names");e.some(t,(function(t){return e.fileExtensionIs(t,".jsx")}))&&(r&&r("Inferred 'react' typings due to presence of '.jsx' extension"),b("react"))}(i),l&&x(e.deduplicate(l.map((function(e){return n.has(e)?"node":e}))),"Inferred typings from unresolved imports"),s.forEach((function(e,t){u.has(t)&&void 0===u.get(t)&&u.set(t,e)}));for(var _=0,m=p;_<m.length;_++){var g=m[_];u.delete(g)&&r&&r("Typing for "+g+" is in exclude list, will be ignored.")}var h=[],y=[];u.forEach((function(e,t){void 0!==e?y.push(e):h.push(t)}));var v={cachedTypingPaths:y,newTypingNames:h,filesToWatch:d};return r&&r("Result: "+JSON.stringify(v)),v;function b(e){u.has(e)||u.set(e,void 0)}function x(t,n){r&&r(n+": "+JSON.stringify(t)),e.forEach(t,b)}function k(n,r){if(t.fileExists(n)){r.push(n);var i=e.readConfigFile(n,(function(e){return t.readFile(e)})).config;x(e.flatMap([i.dependencies,i.devDependencies,i.optionalDependencies,i.peerDependencies],e.getOwnKeys),"Typing names in '"+n+"' dependencies")}}function S(n,i){if(i.push(n),t.directoryExists(n)){var a=t.readDirectory(n,[".json"],void 0,void 0,2);r&&r("Searching for typing names in "+n+"; all files: "+JSON.stringify(a));for(var o=[],s=0,c=a;s<c.length;s++){var l=c[s],d=e.normalizePath(l),p=e.getBaseFileName(d);if("package.json"===p||"bower.json"===p){var f=e.readConfigFile(d,(function(e){return t.readFile(e)})).config;if(("package.json"!==p||!f._requiredBy||0!==e.filter(f._requiredBy,(function(e){return"#"===e[0]||"/"===e})).length)&&f.name){var _=f.types||f.typings;if(_){var m=e.getNormalizedAbsolutePath(_,e.getDirectoryPath(d));r&&r("    Package '"+f.name+"' provides its own types."),u.set(f.name,m)}else o.push(f.name)}}}x(o,"    Found package names")}}},function(e){e[e.Ok=0]="Ok",e[e.ScopedPackagesNotSupported=1]="ScopedPackagesNotSupported",e[e.EmptyName=2]="EmptyName",e[e.NameTooLong=3]="NameTooLong",e[e.NameStartsWithDot=4]="NameStartsWithDot",e[e.NameStartsWithUnderscore=5]="NameStartsWithUnderscore",e[e.NameContainsNonURISafeCharacters=6]="NameContainsNonURISafeCharacters"}(t.PackageNameValidationResult||(t.PackageNameValidationResult={}));t.validatePackageName=function(e){return e?e.length>214?3:46===e.charCodeAt(0)?4:95===e.charCodeAt(0)?5:/^@[^/]+\/[^/]+$/.test(e)?1:encodeURIComponent(e)!==e?6:0:2},t.renderPackageNameValidationFailure=function(t,n){switch(t){case 2:return"Package name '"+n+"' cannot be empty";case 3:return"Package name '"+n+"' should be less than 214 characters";case 4:return"Package name '"+n+"' cannot start with '.'";case 5:return"Package name '"+n+"' cannot start with '_'";case 1:return"Package '"+n+"' is scoped and currently is not supported";case 6:return"Package name '"+n+"' contains non URI safe characters";case 0:throw e.Debug.fail();default:e.Debug.assertNever(t)}}}(e.JsTyping||(e.JsTyping={}))}(ts||(ts={})),function(e){!function(t){function n(e,t){switch(e.kind){case 239:case 242:case 237:var n=t.getSymbolAtLocation(e.name),r=t.getAliasedSymbol(n);return n.escapedName!==r.escapedName;default:return!0}}function r(t){e.Debug.assert(t.length>0);for(var n=0,r=t;n<r.length;n++){if(!r[n].isCaseSensitive)return!1}return!0}function i(t,n){if(t){var r=e.getNameOfDeclaration(t);if(r){var i=e.getTextOfIdentifierOrLiteral(r);if(void 0===i)return 144===r.kind&&a(r.expression,n,!0);n.unshift(i)}}return!0}function a(t,n,r){var i=e.getTextOfIdentifierOrLiteral(t);if(void 0!==i)return r&&n.unshift(i),!0;if(179===t.kind){var o=t;return r&&n.unshift(o.name.text),a(o.expression,n,!0)}return!1}function o(t){var n=[],r=e.getNameOfDeclaration(t);if(144!==r.kind||a(r.expression,n,!1)){for(t=e.getContainerNode(t);t;){if(!i(t,n))return;t=e.getContainerNode(t)}return n}}function s(t){e.Debug.assert(t.length>0);for(var n=e.PatternMatchKind.camelCase,r=0,i=t;r<i.length;r++){var a=i[r].kind;a<n&&(n=a)}return n}function c(t,n){return t.matchKind-n.matchKind||e.compareStringsCaseInsensitive(t.name,n.name)||e.compareStrings(t.name,n.name)}function l(t){var n=t.declaration,r=e.getContainerNode(n),i=r&&e.getNameOfDeclaration(r);return{name:t.name,kind:e.getNodeKind(n),kindModifiers:e.getNodeModifiers(n),matchKind:e.PatternMatchKind[t.matchKind],isCaseSensitive:t.isCaseSensitive,fileName:t.fileName,textSpan:e.createTextSpanFromNode(n),containerName:i?i.text:"",containerKind:i?e.getNodeKind(r):""}}t.getNavigateToItems=function(t,i,a,u,d,p){for(var f=e.createPatternMatcher(u),_=[],m=function(t){if(a.throwIfCancellationRequested(),p&&e.fileExtensionIs(t.fileName,".d.ts"))return"continue";e.forEachEntry(t.getNamedDeclarations(),(function(e,a){!function(e,t,i,a,c,l){var u=e.getMatchesForLastSegmentOfPattern(t);if(!u)return;for(var d=0,p=i;d<p.length;d++){var f=p[d];if(n(f,a)){var _=u;if(!e.patternContainsDots||(_=e.getMatches(o(f),t))){var m=s(_),g=r(_);l.push({name:t,fileName:c,matchKind:m,isCaseSensitive:g,declaration:f})}}}}(f,a,e,i,t.fileName,_)}))},g=0,h=t;g<h.length;g++){m(h[g])}return _.sort(c),void 0!==d&&(_=_.slice(0,d)),_.map(l)}}(e.NavigateTo||(e.NavigateTo={}))}(ts||(ts={})),function(e){!function(t){var n,r,i,a=/\s+/g,o=[],s=[];function c(){r=void 0,n=void 0,o=[],i=void 0,s=[]}function l(e){return e.getText(r)}function u(e){return e.node.kind}function d(e,t){e.children?e.children.push(t):e.children=[t]}function p(t){e.Debug.assert(!o.length);var n={node:t,additionalNodes:void 0,parent:void 0,children:void 0,indent:0};i=n;for(var r=0,a=t.statements;r<a.length;r++){y(a[r])}return g(),e.Debug.assert(!i&&!o.length),n}function f(e){d(i,_(e))}function _(e){return{node:e,additionalNodes:void 0,parent:i,children:void 0,indent:i.indent+1}}function m(e){var t=_(e);d(i,t),o.push(i),i=t}function g(){i.children&&(v(i.children),b(i.children)),i=o.pop()}function h(e,t){m(e),y(t),g()}function y(t){if(n.throwIfCancellationRequested(),t&&!e.isToken(t))switch(t.kind){case 152:var r=t;h(r,r.body);for(var i=0,a=r.parameters;i<a.length;i++){var o=a[i];e.isParameterPropertyDeclaration(o)&&f(o)}break;case 151:case 153:case 154:case 150:e.hasDynamicName(t)||h(t,t.body);break;case 149:case 148:e.hasDynamicName(t)||f(t);break;case 239:var s=t;s.name&&f(s);var c=s.namedBindings;if(c)if(240===c.kind)f(c);else for(var l=0,u=c.elements;l<u.length;l++){f(u[l])}break;case 176:case 226:var d=t,p=d.name,_=d.initializer;e.isBindingPattern(p)?y(p):_&&function(e){switch(e.kind){case 187:case 186:case 199:return!0;default:return!1}}(_)?_.name?y(_):(m(t),e.forEachChild(_,y),g()):h(t,_);break;case 187:case 228:case 186:h(t,t.body);break;case 232:m(t);for(var v=0,b=t.members;v<b.length;v++){N(S=b[v])||f(S)}g();break;case 229:case 199:case 230:m(t);for(var x=0,k=t.members;x<k.length;x++){var S;y(S=k[x])}g();break;case 233:h(t,w(t).body);break;case 246:case 237:case 157:case 155:case 156:case 231:f(t);break;default:e.hasJSDocNodes(t)&&e.forEach(t.jsDoc,(function(t){e.forEach(t.tags,(function(e){283===e.kind&&f(e)}))})),e.forEachChild(t,y)}}function v(t){var n=e.createMap();e.filterMutate(t,(function(t){var r=e.getNameOfDeclaration(t.node),i=r&&l(r);if(!i)return!0;var a=n.get(i);if(!a)return n.set(i,t),!0;if(a instanceof Array){for(var o=0,s=a;o<s.length;o++){var c;if(u(c=s[o],t))return!1}return a.push(t),!0}return!u(c=a,t)&&(n.set(i,[c,t]),!0);function u(t,n){return!!function(e,t){return e.kind===t.kind&&(233!==e.kind||n(e,t));function n(e,t){return e.body.kind===t.body.kind&&(233!==e.body.kind||n(e.body,t.body))}}(t.node,n.node)&&(function(t,n){t.additionalNodes=t.additionalNodes||[],t.additionalNodes.push(n.node),n.additionalNodes&&(r=t.additionalNodes).push.apply(r,n.additionalNodes);t.children=e.concatenate(t.children,n.children),t.children&&(v(t.children),b(t.children));var r}(t,n),!0)}}))}function b(e){e.sort(x)}function x(t,n){var r=k(t.node),i=k(n.node);if(r&&i){var a=e.compareStringsCaseInsensitive(r,i);return 0!==a?a:u(t)-u(n)}return r?1:i?-1:u(t)-u(n)}function k(t){if(233===t.kind)return A(t);var n=e.getNameOfDeclaration(t);if(n)return e.unescapeLeadingUnderscores(e.getPropertyNameForPropertyNameNode(n));switch(t.kind){case 186:case 187:case 199:return O(t);case 283:return T(t);default:return}}function S(t){if(233===t.kind)return A(t);var n=e.getNameOfDeclaration(t);if(n){var r=l(n);if(r.length>0)return r}switch(t.kind){case 265:var i=t;return e.isExternalModule(i)?'"'+e.escapeString(e.getBaseFileName(e.removeFileExtension(e.normalizePath(i.fileName))))+'"':"<global>";case 187:case 228:case 186:case 229:case 199:return 512&e.getModifierFlags(t)?"default":O(t);case 152:return"constructor";case 156:return"new()";case 155:return"()";case 157:return"[]";case 283:return T(t);default:return"<unknown>"}}function T(e){if(e.name)return e.name.text;var t=e.parent&&e.parent.parent;if(t&&208===t.kind&&t.declarationList.declarations.length>0){var n=t.declarationList.declarations[0].name;if(71===n.kind)return n.text}return"<typedef>"}function C(t){return{text:S(t.node),kind:e.getNodeKind(t.node),kindModifiers:P(t.node),spans:D(t),childItems:e.map(t.children,C)}}function E(t){return{text:S(t.node),kind:e.getNodeKind(t.node),kindModifiers:P(t.node),spans:D(t),childItems:e.map(t.children,(function(t){return{text:S(t.node),kind:e.getNodeKind(t.node),kindModifiers:e.getNodeModifiers(t.node),spans:D(t),childItems:s,indent:0,bolded:!1,grayed:!1}}))||s,indent:t.indent,bolded:!1,grayed:!1}}function D(e){var t=[I(e.node)];if(e.additionalNodes)for(var n=0,r=e.additionalNodes;n<r.length;n++){var i=r[n];t.push(I(i))}return t}function A(t){if(e.isAmbientModule(t))return e.getTextOfNode(t.name);var n=[];for(n.push(e.getTextOfIdentifierOrLiteral(t.name));t.body&&233===t.body.kind;)t=t.body,n.push(e.getTextOfIdentifierOrLiteral(t.name));return n.join(".")}function w(e){return 233===e.body.kind?w(e.body):e}function N(e){return!e.name||144===e.name.kind}function I(t){return 265===t.kind?e.createTextSpanFromBounds(t.getFullStart(),t.getEnd()):e.createTextSpanFromNode(t,r)}function P(t){return t.parent&&226===t.parent.kind&&(t=t.parent),e.getNodeModifiers(t)}function O(t){return t.name&&e.getFullWidth(t.name)>0?e.declarationNameToString(t.name):226===t.parent.kind?e.declarationNameToString(t.parent.name):194===t.parent.kind&&58===t.parent.operatorToken.kind?l(t.parent.left).replace(a,""):261===t.parent.kind&&t.parent.name?l(t.parent.name):512&e.getModifierFlags(t)?"default":e.isClassLike(t)?"<class>":"<function>"}t.getNavigationBarItems=function(t,i){n=i,r=t;try{return e.map(function(t){var n=[];function r(e){if(i(e)&&(n.push(e),e.children))for(var t=0,a=e.children;t<a.length;t++){r(a[t])}}return r(t),n;function i(t){switch(u(t)){case 229:case 199:case 232:case 230:case 233:case 265:case 231:case 283:return!0;case 152:case 151:case 153:case 154:case 226:return r(t);case 187:case 228:case 186:return n(t);default:return!1}function n(e){if(!e.node.body)return!1;switch(u(e.parent)){case 234:case 265:case 151:case 152:return!0;default:return r(e)}}function r(t){return e.forEach(t.children,(function(e){var t=u(e);return 226!==t&&176!==t}))}}}(p(t)),E)}finally{c()}},t.getNavigationTree=function(e,t){n=t,r=e;try{return C(p(e))}finally{c()}}}(e.NavigationBar||(e.NavigationBar={}))}(ts||(ts={})),function(e){!function(t){var n="...",r=new RegExp("^\\s*//\\s*#(end)?region(?:\\s+(.*))?$");t.collectElements=function(t,i){var a=[],o=0,s=[];return function r(s){if(i.throwIfCancellationRequested(),o>40)return;e.isDeclaration(s)&&function(n){var r=e.getLeadingCommentRangesOfNode(n,t);if(r){for(var a=-1,o=-1,s=!0,c=0,d=0,p=r;d<p.length;d++){var f=p[d];i.throwIfCancellationRequested(),2===f.kind?(s&&(a=f.pos),s=!1,o=f.end,c++):3===f.kind&&(u(c,a,o),l(f,!1),c=0,o=-1,s=!0)}u(c,a,o)}}(s);switch(s.kind){case 207:if(!e.isFunctionBlock(s)){var p=s.parent,f=e.findChildOfKind(s,17,t),_=e.findChildOfKind(s,18,t);if(212===p.kind||215===p.kind||216===p.kind||214===p.kind||211===p.kind||213===p.kind||220===p.kind||260===p.kind){c(p,f,_,d(s),!0);break}if(224===p.kind){var m=p;if(m.tryBlock===s){c(p,f,_,d(s),!0);break}if(m.finallyBlock===s){var g=e.findChildOfKind(m,87,t);if(g){c(g,f,_,d(s),!0);break}}}var h=e.createTextSpanFromNode(s);a.push({textSpan:h,hintSpan:h,bannerText:n,autoCollapse:d(s)});break}case 234:var y=e.findChildOfKind(s,17,t),v=e.findChildOfKind(s,18,t);c(s.parent,y,v,d(s),!0);break;case 229:case 230:case 232:case 235:var b=e.findChildOfKind(s,17,t),x=e.findChildOfKind(s,18,t);c(s,b,x,d(s),!0);break;case 178:var k=e.findChildOfKind(s,17,t),S=e.findChildOfKind(s,18,t);c(s,k,S,d(s),!e.isArrayLiteralExpression(s.parent));break;case 177:var T=e.findChildOfKind(s,21,t),C=e.findChildOfKind(s,22,t);c(s,T,C,d(s),!e.isArrayLiteralExpression(s.parent))}o++,e.forEachChild(s,r),o--}(t),function(){for(var n=t.getLineStarts(),i=0;i<n.length;i++){var o=n[i],c=n[i+1]-1||t.getEnd(),l=t.text.substring(o,c).match(r);if(l&&!e.isInComment(t,o))if(l[1]){(p=s.pop())&&(p.textSpan.length=c-p.textSpan.start,p.hintSpan.length=c-p.textSpan.start,a.push(p))}else{var u=t.getFullText().indexOf("//",o),d=e.createTextSpanFromBounds(u,c),p={textSpan:d,hintSpan:d,bannerText:l[2]||"#region",autoCollapse:!1};s.push(p)}}}(),a.sort((function(e,t){return e.textSpan.start-t.textSpan.start}));function c(r,i,o,s,c){if(r&&i&&o){var l={textSpan:e.createTextSpanFromBounds(c?i.getFullStart():i.getStart(),o.getEnd()),hintSpan:e.createTextSpanFromNode(r,t),bannerText:n,autoCollapse:s};a.push(l)}}function l(t,r){if(t){var i={textSpan:e.createTextSpanFromBounds(t.pos,t.end),hintSpan:e.createTextSpanFromBounds(t.pos,t.end),bannerText:n,autoCollapse:r};a.push(i)}}function u(e,t,n){e>1&&l({kind:2,pos:t,end:n},!1)}function d(t){return e.isFunctionBlock(t)&&187!==t.parent.kind}}}(e.OutliningElementsCollector||(e.OutliningElementsCollector={}))}(ts||(ts={})),function(e){var t;function n(e,t,n,r){return{kind:e,punctuationStripped:t,isCaseSensitive:n,camelCaseWeight:r}}function r(e){return 0===e.subWordTextChunks.length}function i(t){if(t>=65&&t<=90)return!0;if(t<127||!e.isUnicodeIdentifierStart(t,5))return!1;var n=String.fromCharCode(t);return n===n.toUpperCase()}function a(t){if(t>=97&&t<=122)return!0;if(t<127||!e.isUnicodeIdentifierStart(t,5))return!1;var n=String.fromCharCode(t);return n===n.toLowerCase()}function o(e,t,n){for(var r=0;r<t.length;r++){if(s(e.charCodeAt(r+n))!==t.charCodeAt(r))return!1}return!0}function s(e){return e>=65&&e<=90?e-65+97:e<127?e:String.fromCharCode(e).toLowerCase().charCodeAt(0)}function c(e){return e>=48&&e<=57}function l(e){return i(e)||a(e)||c(e)||95===e||36===e}function u(e){for(var t=[],n=0,r=0,i=0;i<e.length;i++){l(e.charCodeAt(i))?(0===r&&(n=i),r++):r>0&&(t.push(d(e.substr(n,r))),r=0)}return r>0&&t.push(d(e.substr(n,r))),t}function d(e){var t=e.toLowerCase();return{text:e,textLowerCase:t,isLowerCase:e===t,characterSpans:p(e)}}function p(e){return _(e,!1)}function f(e){return _(e,!0)}function _(t,n){for(var r=[],i=0,a=1;a<t.length;a++){var o=c(t.charCodeAt(a-1)),s=c(t.charCodeAt(a)),l=y(t,n,a),u=h(t,n,a,i);(m(t.charCodeAt(a-1))||m(t.charCodeAt(a))||o!==s||l||u)&&(g(t,i,a)||r.push(e.createTextSpan(i,a-i)),i=a)}return g(t,i,t.length)||r.push(e.createTextSpan(i,t.length-i)),r}function m(e){switch(e){case 33:case 34:case 35:case 37:case 38:case 39:case 40:case 41:case 42:case 44:case 45:case 46:case 47:case 58:case 59:case 63:case 64:case 91:case 92:case 93:case 95:case 123:case 125:return!0}return!1}function g(e,t,n){for(var r=t;r<n;r++){var i=e.charCodeAt(r);if(!m(i)||95===i||36===i)return!1}return!0}function h(e,t,n,r){if(t&&n!==r&&n+1<e.length){var o=i(e.charCodeAt(n)),s=a(e.charCodeAt(n+1));if(o&&s){for(var c=r;c<n;c++)if(!i(e.charCodeAt(c)))return!1;return!0}}return!1}function y(e,t,n){var r=i(e.charCodeAt(n-1)),a=i(e.charCodeAt(n));return t?a&&!r:a}!function(e){e[e.exact=0]="exact",e[e.prefix=1]="prefix",e[e.substring=2]="substring",e[e.camelCase=3]="camelCase"}(t=e.PatternMatchKind||(e.PatternMatchKind={})),e.createPatternMatcher=function(a){var c=e.createMap(),l=(a=a.trim()).split(".").map((function(e){return{totalTextChunk:d(t=e.trim()),subWordTextChunks:u(t)};var t})),p=0===l.length||e.forEach(l,r);return{getMatches:function(t,n){if(_(n))return;var r=h(n,e.lastOrUndefined(l));if(!r)return;if(t=t||[],l.length-1>t.length)return;for(var i=r,a=l.length-2,o=t.length-1;a>=0;a-=1,o-=1){var s=l[a],c=h(t[o],s);if(!c)return;e.addRange(i,c)}return i},getMatchesForLastSegmentOfPattern:function(t){if(_(t))return;return h(t,e.lastOrUndefined(l))},patternContainsDots:l.length>1};function _(e){return p||!e}function m(e){var t=c.get(e);return t||c.set(e,t=f(e)),t}function g(r,a,s){var c=function(e,t){for(var n=e.length-t.length,r=0;r<=n;r++)if(o(e,t,r))return r;return-1}(r,a.textLowerCase);if(0===c)return a.text.length===r.length?n(t.exact,s,r===a.text):n(t.prefix,s,e.startsWith(r,a.text));var l=a.isLowerCase;if(l){if(c>0)for(var u=0,d=m(r);u<d.length;u++){var p=d[u];if(y(r,p,a.text,!0))return n(t.substring,s,y(r,p,a.text,!1))}}else if(r.indexOf(a.text)>0)return n(t.substring,s,!0);if(!l&&a.characterSpans.length>0){var f=m(r),_=v(r,f,a,!1);if(void 0!==_)return n(t.camelCase,s,!0,_);if(void 0!==(_=v(r,f,a,!0)))return n(t.camelCase,s,!1,_)}return l&&a.text.length<r.length&&c>0&&i(r.charCodeAt(c))?n(t.substring,s,!1):void 0}function h(e,t){if(!function(e){for(var t=0;t<e.length;t++){var n=e.charCodeAt(t);if(32===n||42===n)return!0}return!1}(t.totalTextChunk.text)){var n=g(e,t.totalTextChunk,!1);if(n)return[n]}for(var r=void 0,i=0,a=t.subWordTextChunks;i<a.length;i++){var o=g(e,a[i],!0);if(!o)return;(r=r||[]).push(o)}return r}function y(e,t,n,r,i){var a=i?i.start:0,o=i?i.length:n.length;if(o>t.length)return!1;if(r)for(var c=0;c<o;c++){var l=n.charCodeAt(a+c),u=e.charCodeAt(t.start+c);if(s(l)!==s(u))return!1}else for(c=0;c<o;c++){if((l=n.charCodeAt(a+c))!==(u=e.charCodeAt(t.start+c)))return!1}return!0}function v(t,n,r,a){for(var o=r.characterSpans,s=0,c=0,l=void 0,u=void 0;;){if(c===o.length){var d=0;return u&&(d+=1),0===l&&(d+=2),d}if(s===n.length)return;for(var p=n[s],f=!1;c<o.length;c++){var _=o[c];if(f&&(!i(r.text.charCodeAt(o[c-1].start))||!i(r.text.charCodeAt(o[c].start))))break;if(!y(t,p,r.text,a,_))break;f=!0,l=void 0===l?s:l,u=void 0===u||u,p=e.createTextSpan(p.start+_.length,p.length-_.length)}f||void 0===u||(u=!1),s++}}},e.breakIntoCharacterSpans=p,e.breakIntoWordSpans=f}(ts||(ts={})),function(e){e.preProcessFile=function(t,n,r){void 0===n&&(n=!0),void 0===r&&(r=!1);var i,a,o=[],s=[],c=[],l=!1,u=0,d=!1;function p(){var t=e.scanner.scan();return 17===t?u++:18===t&&u--,t}function f(){var t=e.scanner.getTokenValue(),n=e.scanner.getTokenPos();return{fileName:t,pos:n,end:n+t.length}}function _(){c.push(f()),m()}function m(){0===u&&(d=!0)}function g(){var t=e.scanner.getToken();return 124===t&&(128===(t=p())&&9===(t=p())&&(i||(i=[]),i.push({ref:f(),depth:u})),!0)}function h(){var t=e.scanner.getToken();if(91===t){if(19===(t=p())){if(9===(t=p()))return _(),!0}else{if(9===t)return _(),!0;if(71===t||e.isKeyword(t))if(140===(t=p())){if(9===(t=p()))return _(),!0}else if(58===t){if(v(!0))return!0}else{if(26!==t)return!0;t=p()}if(17===t){for(t=p();18!==t&&1!==t;)t=p();18===t&&140===(t=p())&&9===(t=p())&&_()}else 39===t&&118===(t=p())&&(71===(t=p())||e.isKeyword(t))&&140===(t=p())&&9===(t=p())&&_()}return!0}return!1}function y(){var t=e.scanner.getToken();if(84===t){if(m(),17===(t=p())){for(t=p();18!==t&&1!==t;)t=p();18===t&&140===(t=p())&&9===(t=p())&&_()}else if(39===t)140===(t=p())&&9===(t=p())&&_();else if(91===t&&(71===(t=p())||e.isKeyword(t))&&58===(t=p())&&v(!0))return!0;return!0}return!1}function v(t){var n=t?p():e.scanner.getToken();return 132===n&&(19===(n=p())&&9===(n=p())&&_(),!0)}function b(){var t=e.scanner.getToken();if(71===t&&"define"===e.scanner.getTokenValue()){if(19!==(t=p()))return!0;if(9===(t=p())){if(26!==(t=p()))return!0;t=p()}if(21!==t)return!0;for(t=p();22!==t&&1!==t;)9===t&&_(),t=p();return!0}return!1}if(n&&function(){for(e.scanner.setText(t),p();1!==e.scanner.getToken();)g()||h()||y()||r&&(v(!1)||b())||p();e.scanner.setText(void 0)}(),a=e.getLeadingCommentRanges(t,0),e.forEach(a,(function(n){var r=t.substring(n.pos,n.end),i=e.getFileReferenceFromReferencePath(r,n);if(i){l=i.isNoDefaultLib;var a=i.fileReference;a&&(i.isTypeReferenceDirective?s:o).push(a)}})),d){if(i)for(var x=0,k=i;x<k.length;x++){var S=k[x];c.push(S.ref)}return{referencedFiles:o,typeReferenceDirectives:s,importedFiles:c,isLibFile:l,ambientExternalModules:void 0}}var T=void 0;if(i)for(var C=0,E=i;C<E.length;C++){0===(S=E[C]).depth?(T||(T=[]),T.push(S.ref.fileName)):c.push(S.ref)}return{referencedFiles:o,typeReferenceDirectives:s,importedFiles:c,isLibFile:l,ambientExternalModules:T}}}(ts||(ts={})),function(e){!function(t){function n(e,t,n,r,a,o){return{canRename:!0,kind:n,displayName:e,localizedErrorMessage:void 0,fullDisplayName:t,kindModifiers:r,triggerSpan:i(a,o)}}function r(t){return{canRename:!1,localizedErrorMessage:e.getLocaleSpecificMessage(t),displayName:void 0,fullDisplayName:void 0,kind:void 0,kindModifiers:void 0,triggerSpan:void 0}}function i(t,n){var r=t.getStart(n),i=t.getWidth(n);return 9===t.kind&&(r+=1,i-=2),e.createTextSpan(r,i)}t.getRenameInfo=function(t,i,a,o,s){var c=e.memoize((function(){return a(e.normalizePath(i))})),l=e.getTouchingWord(o,s,!0);return(l&&function(t){switch(t.kind){case 71:case 9:case 99:return!0;case 8:return e.isLiteralNameOfPropertyDeclarationOrIndexAccess(t);default:return!1}}(l)?function(t,i,a,o){var s=i.getSymbolAtLocation(t);if(s){var c=s.getDeclarations();if(c&&c.length>0){if(e.some(c,o))return r(e.Diagnostics.You_cannot_rename_elements_that_are_defined_in_the_standard_TypeScript_library);if(71===t.kind&&79===t.originalKeywordKind&&1536&s.parent.flags)return;var l=e.stripQuotes(e.getDeclaredName(i,s,t)),u=e.SymbolDisplay.getSymbolKind(i,s,t);return u?n(l,i.getFullyQualifiedName(s),u,e.SymbolDisplay.getSymbolModifiers(s),t,a):void 0}}else if(9===t.kind){return o(t)?r(e.Diagnostics.You_cannot_rename_elements_that_are_defined_in_the_standard_TypeScript_library):n(l=e.stripQuotes(t.text),l,"var","",t,a)}}(l,t,o,(function(t){if(!i)return!1;var n=t.getSourceFile();return a(e.normalizePath(n.fileName))===c()})):void 0)||r(e.Diagnostics.You_cannot_rename_this_element)}}(e.Rename||(e.Rename={}))}(ts||(ts={})),function(e){!function(t){function n(t,n,i){if(e.isCallOrNewExpression(t.parent)){var a=t.parent,o=void 0,s=void 0;if(27===t.kind||19===t.kind)o=function(t,n,r){var i=t.getChildren(r),a=i.indexOf(n);return e.Debug.assert(a>=0&&i.length>a+1),i[a+1]}(a,t,i),e.Debug.assert(void 0!==o),s=0;else{if(!(o=e.findContainingList(t)))return;s=function(e,t){for(var n=0,r=e.getChildren(),i=0,a=r;i<a.length;i++){var o=a[i];if(o===t)break;26!==o.kind&&n++}return n}(o,t)}var c=a.typeArguments&&a.typeArguments.pos===o.pos?0:1,l=function(t){var n=t.getChildren(),r=e.countWhere(n,(function(e){return 26!==e.kind}));n.length>0&&26===e.lastOrUndefined(n).kind&&r++;return r}(o);return 0!==s&&e.Debug.assertLessThan(s,l),{kind:c,invocation:a,argumentsSpan:function(t,n){var r=t.getFullStart(),i=e.skipTrivia(n.text,t.getEnd(),!1);return e.createTextSpan(r,i-r)}(o,i),argumentIndex:s,argumentCount:l}}if(13===t.kind&&183===t.parent.kind){if(e.isInsideTemplateLiteral(t,n))return r(t.parent,0,i)}else{if(14===t.kind&&183===t.parent.parent.kind){var u=(d=t.parent).parent;return e.Debug.assert(196===d.kind),r(u,s=e.isInsideTemplateLiteral(t,n)?0:1,i)}if(205===t.parent.kind&&183===t.parent.parent.parent.kind){var d,p=t.parent;u=(d=p.parent).parent;if(e.Debug.assert(196===d.kind),16===t.kind&&!e.isInsideTemplateLiteral(t,n))return;return r(u,s=function(t,n,r){if(e.Debug.assert(r>=n.getStart(),"Assumed 'position' could not occur before node."),e.isTemplateLiteralKind(n.kind))return e.isInsideTemplateLiteral(n,r)?0:t+2;return t+1}(d.templateSpans.indexOf(p),t,n),i)}if(t.parent&&e.isJsxOpeningLikeElement(t.parent)){var f=t.parent.attributes.getFullStart(),_=e.skipTrivia(i.text,t.parent.attributes.getEnd(),!1);return{kind:3,invocation:t.parent,argumentsSpan:e.createTextSpan(f,_-f),argumentIndex:0,argumentCount:1}}}}function r(t,n,r){var a=13===t.template.kind?1:t.template.templateSpans.length+1;return 0!==n&&e.Debug.assertLessThan(n,a),{kind:2,invocation:t,argumentsSpan:i(t,r),argumentIndex:n,argumentCount:a}}function i(t,n){var r=t.template,i=r.getStart(),a=r.getEnd();196===r.kind&&(0===e.lastOrUndefined(r.templateSpans).literal.getFullWidth()&&(a=e.skipTrivia(n.text,a,!1)));return e.createTextSpan(i,a-i)}function a(t,r,i){for(var a=t;265!==a.kind;a=a.parent){if(e.isFunctionBlock(a))return;(a.pos<a.parent.pos||a.end>a.parent.end)&&e.Debug.fail("Node of kind "+a.kind+" is not a subspan of its parent of kind "+a.parent.kind);var o=n(a,r,i);if(o)return o}}function o(t,n,r,i){var a=r.argumentCount,o=r.argumentsSpan,s=r.invocation,c=r.argumentIndex,l=0===r.kind,u=e.getInvokedExpression(s),d=i.getSymbolAtLocation(u),p=d&&e.symbolToDisplayParts(i,d,void 0,void 0),f=e.map(t,(function(t){var n,r,a=[],o=[];if(p&&e.addRange(a,p),l){r=!1,a.push(e.punctuationPart(27));var c=(t.target||t).typeParameters;n=c&&c.length>0?e.map(c,g):e.emptyArray,o.push(e.punctuationPart(29));var u=e.mapToDisplayParts((function(e){return i.getSymbolDisplayBuilder().buildDisplayForParametersAndDelimiters(t.thisParameter,t.parameters,e,s)}));e.addRange(o,u)}else{r=t.hasRestParameter;var d=e.mapToDisplayParts((function(e){return i.getSymbolDisplayBuilder().buildDisplayForTypeParametersAndDelimiters(t.typeParameters,e,s)}));e.addRange(a,d),a.push(e.punctuationPart(19)),n=e.map(t.parameters,m),o.push(e.punctuationPart(20))}var f=e.mapToDisplayParts((function(e){return i.getSymbolDisplayBuilder().buildReturnTypeDisplay(t,e,s)}));return e.addRange(o,f),{isVariadic:r,prefixDisplayParts:a,suffixDisplayParts:o,separatorDisplayParts:[e.punctuationPart(26),e.spacePart()],parameters:n,documentation:t.getDocumentationComment(),tags:t.getJsDocTags()}}));0!==c&&e.Debug.assertLessThan(c,a);var _=t.indexOf(n);return e.Debug.assert(-1!==_),{items:f,applicableSpan:o,selectedItemIndex:_,argumentIndex:c,argumentCount:a};function m(t){var n=e.mapToDisplayParts((function(e){return i.getSymbolDisplayBuilder().buildParameterDisplay(t,e,s)}));return{name:t.name,documentation:t.getDocumentationComment(),displayParts:n,isOptional:i.isOptionalParameter(t.valueDeclaration)}}function g(t){var n=e.mapToDisplayParts((function(e){return i.getSymbolDisplayBuilder().buildTypeParameterDisplay(t,e,s)}));return{name:t.symbol.name,documentation:e.emptyArray,displayParts:n,isOptional:!1}}}!function(e){e[e.TypeArguments=0]="TypeArguments",e[e.CallArguments=1]="CallArguments",e[e.TaggedTemplateArguments=2]="TaggedTemplateArguments",e[e.JSXAttributesArguments=3]="JSXAttributesArguments"}(t.ArgumentListKind||(t.ArgumentListKind={})),t.getSignatureHelpItems=function(t,n,r,i){var s=t.getTypeChecker(),c=e.findTokenOnLeftOfPosition(n,r);if(c){var l=a(c,r,n);if(l){i.throwIfCancellationRequested();var u=l.invocation,d=[],p=s.getResolvedSignature(u,d,l.argumentCount);return i.throwIfCancellationRequested(),d.length?o(d,p,l,s):e.isSourceFileJavaScript(n)?function(e,t){if(181!==e.invocation.kind)return;var n=e.invocation.expression,r=71===n.kind?n:179===n.kind?n.name:void 0;if(!r||!r.escapedText)return;for(var i=t.getTypeChecker(),a=0,s=t.getSourceFiles();a<s.length;a++){var c=s[a].getNamedDeclarations().get(r.text);if(c)for(var l=0,u=c;l<u.length;l++){var d=u[l],p=d.symbol;if(p){var f=i.getTypeOfSymbolAtLocation(p,d);if(f){var _=f.getCallSignatures();if(_&&_.length)return o(_,_[0],e,i)}}}}}(l,t):void 0}}},t.getImmediatelyContainingArgumentInfo=n,t.getContainingArgumentInfo=a}(e.SignatureHelp||(e.SignatureHelp={}))}(ts||(ts={})),function(e){!function(t){function n(t,n,i){var a=e.getCombinedLocalAndExportSymbolFlags(n);if(32&a)return e.getDeclarationOfKind(n,199)?"local class":"class";if(384&a)return"enum";if(524288&a)return"type";if(64&a)return"interface";if(262144&a)return"type parameter";var o=r(t,n,i);if(""===o){if(262144&a)return"type parameter";if(8&a)return"enum member";if(2097152&a)return"alias";if(1536&a)return"module"}return o}function r(t,n,r){if(t.isUndefinedSymbol(n))return"var";if(t.isArgumentsSymbol(n))return"local var";if(99===r.kind&&e.isExpression(r))return"parameter";var a=e.getCombinedLocalAndExportSymbolFlags(n);if(3&a)return e.isFirstDeclarationOfSymbolParameter(n)?"parameter":n.valueDeclaration&&e.isConst(n.valueDeclaration)?"const":e.forEach(n.declarations,e.isLet)?"let":i(n)?"local var":"var";if(16&a)return i(n)?"local function":"function";if(32768&a)return"getter";if(65536&a)return"setter";if(8192&a)return"method";if(16384&a)return"constructor";if(4&a){if(33554432&a&&6&n.checkFlags){var o=e.forEach(t.getRootSymbols(n),(function(t){var n=t.getFlags();if(98311&n)return"property";e.Debug.assert(!!(8208&n))}));return o||(t.getTypeOfSymbolAtLocation(n,r).getCallSignatures().length?"method":"property")}return r.parent&&e.isJsxAttribute(r.parent)?"JSX attribute":"property"}return""}function i(t){return!t.parent&&e.forEach(t.declarations,(function(t){if(186===t.kind)return!0;if(226!==t.kind&&228!==t.kind)return!1;for(var n=t.parent;!e.isFunctionBlock(n);n=n.parent)if(265===n.kind||234===n.kind)return!1;return!0}))}t.getSymbolKind=n,t.getSymbolModifiers=function(t){return t&&t.declarations&&t.declarations.length>0?e.getNodeModifiers(t.declarations[0]):""},t.getSymbolDisplayPartsDocumentationAndSymbolKind=function(t,i,a,o,s,c){void 0===c&&(c=e.getMeaningFromLocation(s));var l,u,d,p,f=[],_=e.getCombinedLocalAndExportSymbolFlags(i),m=r(t,i,s),g=99===s.kind&&e.isExpression(s);if(""!==m||32&_||2097152&_){"getter"!==m&&"setter"!==m||(m="property");var h=void 0;if(p=g?t.getTypeAtLocation(s):t.getTypeOfSymbolAtLocation(i.exportSymbol||i,s),s.parent&&179===s.parent.kind){var y=s.parent.name;(y===s||y&&0===y.getFullWidth())&&(s=s.parent)}var v=void 0;if(e.isCallOrNewExpression(s)?v=s:(e.isCallExpressionTarget(s)||e.isNewExpressionTarget(s)||s.parent&&e.isJsxOpeningLikeElement(s.parent)&&e.isFunctionLike(i.valueDeclaration))&&(v=s.parent),v){h=t.getResolvedSignature(v,[]);var b=182===v.kind||e.isCallExpression(v)&&97===v.expression.kind,x=b?p.getConstructSignatures():p.getCallSignatures();if(e.contains(x,h.target)||e.contains(x,h)||(h=x.length?x[0]:void 0),h){switch(b&&32&_?(m="constructor",F(p.symbol,m)):2097152&_?(L(m="alias"),f.push(e.spacePart()),b&&(f.push(e.keywordPart(94)),f.push(e.spacePart())),O(i)):F(i,m),m){case"JSX attribute":case"property":case"var":case"const":case"let":case"parameter":case"local var":f.push(e.punctuationPart(56)),f.push(e.spacePart()),b&&(f.push(e.keywordPart(94)),f.push(e.spacePart())),32768&p.flags&&16&p.objectFlags||!p.symbol||e.addRange(f,e.symbolToDisplayParts(t,p.symbol,o,void 0,1)),R(h,x,16);break;default:R(h,x)}d=!0}}else if(e.isNameOfFunctionDeclaration(s)&&!(98304&_)||123===s.kind&&152===s.parent.kind){var k=s.parent;if(e.find(i.declarations,(function(e){return e===(123===s.kind?k.parent:k)}))){x=152===k.kind?p.getNonNullableType().getConstructSignatures():p.getNonNullableType().getCallSignatures();h=t.isImplementationOfOverload(k)?x[0]:t.getSignatureFromDeclaration(k),152===k.kind?(m="constructor",F(p.symbol,m)):F(155!==k.kind||2048&p.symbol.flags||4096&p.symbol.flags?i:p.symbol,m),R(h,x),d=!0}}}if(32&_&&!d&&!g&&(e.getDeclarationOfKind(i,199)?L("local class"):f.push(e.keywordPart(75)),f.push(e.spacePart()),O(i),M(i,a)),64&_&&2&c&&(I(),f.push(e.keywordPart(109)),f.push(e.spacePart()),O(i),M(i,a)),524288&_&&(I(),f.push(e.keywordPart(138)),f.push(e.spacePart()),O(i),M(i,a),f.push(e.spacePart()),f.push(e.operatorPart(58)),f.push(e.spacePart()),e.addRange(f,e.typeToDisplayParts(t,t.getDeclaredTypeOfSymbol(i),o,1024))),384&_&&(I(),e.forEach(i.declarations,e.isConstEnumDeclaration)&&(f.push(e.keywordPart(76)),f.push(e.spacePart())),f.push(e.keywordPart(83)),f.push(e.spacePart()),O(i)),1536&_){I();var S=(w=e.getDeclarationOfKind(i,233))&&w.name&&71===w.name.kind;f.push(e.keywordPart(S?129:128)),f.push(e.spacePart()),O(i)}if(262144&_&&2&c)if(I(),f.push(e.punctuationPart(19)),f.push(e.textPart("type parameter")),f.push(e.punctuationPart(20)),f.push(e.spacePart()),O(i),i.parent)P(),O(i.parent,o),M(i.parent,o);else{var T=e.getDeclarationOfKind(i,145);if(e.Debug.assert(void 0!==T),w=T.parent)if(e.isFunctionLikeKind(w.kind)){P();h=t.getSignatureFromDeclaration(w);156===w.kind?(f.push(e.keywordPart(94)),f.push(e.spacePart())):155!==w.kind&&w.name&&O(w.symbol),e.addRange(f,e.signatureToDisplayParts(t,h,a,64))}else 231===w.kind&&(P(),f.push(e.keywordPart(138)),f.push(e.spacePart()),O(w.symbol),M(w.symbol,a))}if(8&_&&(m="enum member",F(i,"enum member"),264===(w=i.declarations[0]).kind)){var C=t.getConstantValue(w);void 0!==C&&(f.push(e.spacePart()),f.push(e.operatorPart(58)),f.push(e.spacePart()),f.push(e.displayPart(e.getTextOfConstantValue(C),"number"==typeof C?e.SymbolDisplayPartKind.numericLiteral:e.SymbolDisplayPartKind.stringLiteral)))}if(2097152&_){switch(I(),i.declarations[0].kind){case 236:f.push(e.keywordPart(84)),f.push(e.spacePart()),f.push(e.keywordPart(129));break;case 243:f.push(e.keywordPart(84)),f.push(e.spacePart()),f.push(e.keywordPart(i.declarations[0].isExportEquals?58:79));break;default:f.push(e.keywordPart(91))}f.push(e.spacePart()),O(i),e.forEach(i.declarations,(function(n){if(237===n.kind){var r=n;if(e.isExternalModuleImportEqualsDeclaration(r))f.push(e.spacePart()),f.push(e.operatorPart(58)),f.push(e.spacePart()),f.push(e.keywordPart(132)),f.push(e.punctuationPart(19)),f.push(e.displayPart(e.getTextOfNode(e.getExternalModuleImportEqualsDeclarationExpression(r)),e.SymbolDisplayPartKind.stringLiteral)),f.push(e.punctuationPart(20));else{var i=t.getSymbolAtLocation(r.moduleReference);i&&(f.push(e.spacePart()),f.push(e.operatorPart(58)),f.push(e.spacePart()),O(i,o))}return!0}}))}if(!d)if(""!==m){if(p)if(g?(I(),f.push(e.keywordPart(99))):F(i,m),"property"===m||"JSX attribute"===m||3&_||"local var"===m||g)if(f.push(e.punctuationPart(56)),f.push(e.spacePart()),p.symbol&&262144&p.symbol.flags){var E=e.mapToDisplayParts((function(e){t.getSymbolDisplayBuilder().buildTypeParameterDisplay(p,e,o)}));e.addRange(f,E)}else e.addRange(f,e.typeToDisplayParts(t,p,o));else if(16&_||8192&_||16384&_||131072&_||98304&_||"method"===m){(x=p.getNonNullableType().getCallSignatures()).length&&R(x[0],x)}}else m=n(t,i,s);if(!l&&(l=i.getDocumentationComment(),u=i.getJsDocTags(),0===l.length&&4&_&&i.parent&&e.forEach(i.parent.declarations,(function(e){return 265===e.kind}))))for(var D=0,A=i.declarations;D<A.length;D++){var w;if((w=A[D]).parent&&194===w.parent.kind){var N=t.getSymbolAtLocation(w.parent.right);if(N&&(l=N.getDocumentationComment(),u=N.getJsDocTags(),l.length>0))break}}return{displayParts:f,documentation:l,symbolKind:m,tags:u};function I(){f.length&&f.push(e.lineBreakPart())}function P(){f.push(e.spacePart()),f.push(e.keywordPart(92)),f.push(e.spacePart())}function O(n,r){var i=e.symbolToDisplayParts(t,n,r||a,void 0,3);e.addRange(f,i)}function F(t,n){I(),n&&(L(n),f.push(e.spacePart()),O(t))}function L(t){switch(t){case"var":case"function":case"let":case"const":case"constructor":return void f.push(e.textOrKeywordPart(t));default:return f.push(e.punctuationPart(19)),f.push(e.textOrKeywordPart(t)),void f.push(e.punctuationPart(20))}}function R(n,r,i){e.addRange(f,e.signatureToDisplayParts(t,n,o,64|i)),r.length>1&&(f.push(e.spacePart()),f.push(e.punctuationPart(19)),f.push(e.operatorPart(37)),f.push(e.displayPart((r.length-1).toString(),e.SymbolDisplayPartKind.numericLiteral)),f.push(e.spacePart()),f.push(e.textPart(2===r.length?"overload":"overloads")),f.push(e.punctuationPart(20))),l=n.getDocumentationComment(),u=n.getJsDocTags()}function M(n,r){var i=e.mapToDisplayParts((function(e){t.getSymbolDisplayBuilder().buildTypeParameterDisplayFromSymbol(n,e,r)}));e.addRange(f,i)}}}(e.SymbolDisplay||(e.SymbolDisplay={}))}(ts||(ts={})),function(e){function t(t,n){var i=[],a=n.compilerOptions?r(n.compilerOptions,i):e.getDefaultCompilerOptions();a.isolatedModules=!0,a.suppressOutputPathCheck=!0,a.allowNonTsExtensions=!0,a.noLib=!0,a.lib=void 0,a.types=void 0,a.noEmit=void 0,a.noEmitOnError=void 0,a.paths=void 0,a.rootDirs=void 0,a.declaration=void 0,a.declarationDir=void 0,a.out=void 0,a.outFile=void 0,a.noResolve=!0;var o=n.fileName||(a.jsx?"module.tsx":"module.ts"),s=e.createSourceFile(o,t,a.target);n.moduleName&&(s.moduleName=n.moduleName),n.renamedDependencies&&(s.renamedDependencies=e.createMapFromTemplate(n.renamedDependencies));var c,l,u=e.getNewLineCharacter(a),d={getSourceFile:function(t){return t===e.normalizePath(o)?s:void 0},writeFile:function(t,n){e.fileExtensionIs(t,".map")?(e.Debug.assertEqual(l,void 0,"Unexpected multiple source map outputs, file:",t),l=n):(e.Debug.assertEqual(c,void 0,"Unexpected multiple outputs, file:",t),c=n)},getDefaultLibFileName:function(){return"lib.d.ts"},useCaseSensitiveFileNames:function(){return!1},getCanonicalFileName:function(e){return e},getCurrentDirectory:function(){return""},getNewLine:function(){return u},fileExists:function(e){return e===o},readFile:function(){return""},directoryExists:function(){return!0},getDirectories:function(){return[]}},p=e.createProgram([o],a,d);return n.reportDiagnostics&&(e.addRange(i,p.getSyntacticDiagnostics(s)),e.addRange(i,p.getOptionsDiagnostics())),p.emit(void 0,void 0,void 0,void 0,n.transformers),e.Debug.assert(void 0!==c,"Output generation failed"),{outputText:c,diagnostics:i,sourceMapText:l}}var n;function r(t,r){n=n||e.filter(e.optionDeclarations,(function(t){return"object"==typeof t.type&&!e.forEachEntry(t.type,(function(e){return"number"!=typeof e}))})),t=e.cloneCompilerOptions(t);for(var i=function(n){if(!e.hasProperty(t,n.name))return"continue";var i=t[n.name];e.isString(i)?t[n.name]=e.parseCustomTypeOption(n,i,r):e.forEachEntry(n.type,(function(e){return e===i}))||r.push(e.createCompilerDiagnosticForInvalidCustomType(n))},a=0,o=n;a<o.length;a++){i(o[a])}return t}e.transpileModule=t,e.transpile=function(n,r,i,a,o){var s=t(n,{compilerOptions:r,fileName:i,reportDiagnostics:!!a,moduleName:o});return e.addRange(a,s.diagnostics),s.outputText},e.fixupCompilerOptions=r}(ts||(ts={})),function(e){!function(t){var n,r=e.createScanner(5,!1,0),i=e.createScanner(5,!1,1);!function(e){e[e.Scan=0]="Scan",e[e.RescanGreaterThanToken=1]="RescanGreaterThanToken",e[e.RescanSlashToken=2]="RescanSlashToken",e[e.RescanTemplateToken=3]="RescanTemplateToken",e[e.RescanJsxIdentifier=4]="RescanJsxIdentifier",e[e.RescanJsxText=5]="RescanJsxText"}(n||(n={})),t.getFormattingScanner=function(t,n,a,o,s){var c=1===n?i:r;c.setText(t),c.setTextPos(a);var l,u,d,p,f,_=!0,m=s({advance:function(){f=void 0,c.getStartPos()!==a?_=u&&4===e.lastOrUndefined(u).kind:c.scan();l=void 0,u=void 0;var t=c.getStartPos();for(;t<o;){var n=c.getToken();if(!e.isTrivia(n))break;c.scan();var r={pos:t,end:c.getStartPos(),kind:n};t=c.getStartPos(),l=e.append(l,r)}d=c.getStartPos()},readTokenInfo:function(t){e.Debug.assert(g());var n=function(e){switch(e.kind){case 31:case 66:case 67:case 47:case 46:return!0}return!1}(t)?1:(i=t,12===i.kind?2:function(e){return 15===e.kind||16===e.kind}(t)?3:function(t){if(t.parent)switch(t.parent.kind){case 253:case 251:case 252:case 250:return e.isKeyword(t.kind)||71===t.kind}return!1}(t)?4:(r=t,10===r.kind?5:0));var r;var i;if(f&&n===p)return h(f,t);c.getStartPos()!==d&&(e.Debug.assert(void 0!==f),c.setTextPos(d),c.scan());var a=function(t,n){var r=c.getToken();switch(p=0,n){case 1:if(29===r){p=1;var i=c.reScanGreaterToken();return e.Debug.assert(t.kind===i),i}break;case 2:if(41===(a=r)||63===a){p=2;i=c.reScanSlashToken();return e.Debug.assert(t.kind===i),i}break;case 3:if(18===r)return p=3,c.reScanTemplateToken();break;case 4:return p=4,c.scanJsxIdentifier();case 5:return p=5,c.reScanJsxToken();case 0:break;default:e.Debug.assertNever(n)}var a;return r}(t,n),s={pos:c.getStartPos(),end:c.getTextPos(),kind:a};u&&(u=void 0);for(;c.getStartPos()<o&&(a=c.scan(),e.isTrivia(a));){var _={pos:c.getStartPos(),end:c.getTextPos(),kind:a};if(u||(u=[]),u.push(_),4===a){c.scan();break}}return h(f={leadingTrivia:l,trailingTrivia:u,token:s},t)},isOnToken:g,getCurrentLeadingTrivia:function(){return l},lastTrailingTriviaWasNewLine:function(){return _},skipToEndOf:function(e){c.setTextPos(e.end),d=c.getStartPos(),p=void 0,f=void 0,_=!1,l=void 0,u=void 0}});return f=void 0,c.setText(void 0),m;function g(){var t=f?f.token.kind:c.getToken();return(f?f.token.pos:c.getStartPos())<o&&1!==t&&!e.isTrivia(t)}function h(t,n){return e.isToken(n)&&t.token.kind!==n.kind&&(t.token.kind=n.kind),t}}}(e.formatting||(e.formatting={}))}(ts||(ts={})),function(e){!function(t){var n=function(){function t(e,t,n){this.sourceFile=e,this.formattingRequestKind=t,this.options=n}return t.prototype.updateContext=function(t,n,r,i,a){e.Debug.assert(void 0!==t,"currentTokenSpan is null"),e.Debug.assert(void 0!==n,"currentTokenParent is null"),e.Debug.assert(void 0!==r,"nextTokenSpan is null"),e.Debug.assert(void 0!==i,"nextTokenParent is null"),e.Debug.assert(void 0!==a,"commonParent is null"),this.currentTokenSpan=t,this.currentTokenParent=n,this.nextTokenSpan=r,this.nextTokenParent=i,this.contextNode=a,this.contextNodeAllOnSameLine=void 0,this.nextNodeAllOnSameLine=void 0,this.tokensAreOnSameLine=void 0,this.contextNodeBlockIsOnOneLine=void 0,this.nextNodeBlockIsOnOneLine=void 0},t.prototype.ContextNodeAllOnSameLine=function(){return void 0===this.contextNodeAllOnSameLine&&(this.contextNodeAllOnSameLine=this.NodeIsOnOneLine(this.contextNode)),this.contextNodeAllOnSameLine},t.prototype.NextNodeAllOnSameLine=function(){return void 0===this.nextNodeAllOnSameLine&&(this.nextNodeAllOnSameLine=this.NodeIsOnOneLine(this.nextTokenParent)),this.nextNodeAllOnSameLine},t.prototype.TokensAreOnSameLine=function(){if(void 0===this.tokensAreOnSameLine){var e=this.sourceFile.getLineAndCharacterOfPosition(this.currentTokenSpan.pos).line,t=this.sourceFile.getLineAndCharacterOfPosition(this.nextTokenSpan.pos).line;this.tokensAreOnSameLine=e===t}return this.tokensAreOnSameLine},t.prototype.ContextNodeBlockIsOnOneLine=function(){return void 0===this.contextNodeBlockIsOnOneLine&&(this.contextNodeBlockIsOnOneLine=this.BlockIsOnOneLine(this.contextNode)),this.contextNodeBlockIsOnOneLine},t.prototype.NextNodeBlockIsOnOneLine=function(){return void 0===this.nextNodeBlockIsOnOneLine&&(this.nextNodeBlockIsOnOneLine=this.BlockIsOnOneLine(this.nextTokenParent)),this.nextNodeBlockIsOnOneLine},t.prototype.NodeIsOnOneLine=function(e){return this.sourceFile.getLineAndCharacterOfPosition(e.getStart(this.sourceFile)).line===this.sourceFile.getLineAndCharacterOfPosition(e.getEnd()).line},t.prototype.BlockIsOnOneLine=function(t){var n=e.findChildOfKind(t,17,this.sourceFile),r=e.findChildOfKind(t,18,this.sourceFile);return!(!n||!r)&&this.sourceFile.getLineAndCharacterOfPosition(n.getEnd()).line===this.sourceFile.getLineAndCharacterOfPosition(r.getStart(this.sourceFile)).line},t}();t.FormattingContext=n}(e.formatting||(e.formatting={}))}(ts||(ts={})),function(e){!function(e){!function(e){e[e.FormatDocument=0]="FormatDocument",e[e.FormatSelection=1]="FormatSelection",e[e.FormatOnEnter=2]="FormatOnEnter",e[e.FormatOnSemicolon=3]="FormatOnSemicolon",e[e.FormatOnOpeningCurlyBrace=4]="FormatOnOpeningCurlyBrace",e[e.FormatOnClosingCurlyBrace=5]="FormatOnClosingCurlyBrace"}(e.FormattingRequestKind||(e.FormattingRequestKind={}))}(e.formatting||(e.formatting={}))}(ts||(ts={})),function(e){!function(e){var t=function(e,t,n){void 0===n&&(n=0),this.Descriptor=e,this.Operation=t,this.Flag=n};e.Rule=t}(e.formatting||(e.formatting={}))}(ts||(ts={})),function(e){!function(e){!function(e){e[e.Ignore=1]="Ignore",e[e.Space=2]="Space",e[e.NewLine=4]="NewLine",e[e.Delete=8]="Delete"}(e.RuleAction||(e.RuleAction={}))}(e.formatting||(e.formatting={}))}(ts||(ts={})),function(e){!function(e){var t=function(){function t(e,t){this.LeftTokenRange=e,this.RightTokenRange=t}return t.prototype.toString=function(){return"[leftRange="+this.LeftTokenRange+",rightRange="+this.RightTokenRange+"]"},t.create1=function(n,r){return t.create4(e.Shared.TokenRange.FromToken(n),e.Shared.TokenRange.FromToken(r))},t.create2=function(n,r){return t.create4(n,e.Shared.TokenRange.FromToken(r))},t.create3=function(n,r){return t.create4(e.Shared.TokenRange.FromToken(n),r)},t.create4=function(e,n){return new t(e,n)},t}();e.RuleDescriptor=t}(e.formatting||(e.formatting={}))}(ts||(ts={})),function(e){!function(e){!function(e){e[e.None=0]="None",e[e.CanDeleteNewLines=1]="CanDeleteNewLines"}(e.RuleFlags||(e.RuleFlags={}))}(e.formatting||(e.formatting={}))}(ts||(ts={})),function(e){!function(e){var t=function(){function t(e,t){this.Context=e,this.Action=t}return t.prototype.toString=function(){return"[context="+this.Context+",action="+this.Action+"]"},t.create1=function(n){return t.create2(e.RuleOperationContext.Any,n)},t.create2=function(e,n){return new t(e,n)},t}();e.RuleOperation=t}(e.formatting||(e.formatting={}))}(ts||(ts={})),function(e){!function(e){var t=function(){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.customContextChecks=e}return e.prototype.IsAny=function(){return this===e.Any},e.prototype.InContext=function(e){if(this.IsAny())return!0;for(var t=0,n=this.customContextChecks;t<n.length;t++){if(!(0,n[t])(e))return!1}return!0},e.Any=new e,e}();e.RuleOperationContext=t}(e.formatting||(e.formatting={}))}(ts||(ts={})),function(e){!function(t){var n=function(){function n(){if(this.IgnoreBeforeComment=new t.Rule(t.RuleDescriptor.create4(t.Shared.TokenRange.Any,t.Shared.TokenRange.Comments),t.RuleOperation.create1(1)),this.IgnoreAfterLineComment=new t.Rule(t.RuleDescriptor.create3(2,t.Shared.TokenRange.Any),t.RuleOperation.create1(1)),this.NoSpaceBeforeSemicolon=new t.Rule(t.RuleDescriptor.create2(t.Shared.TokenRange.Any,25),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext),8)),this.NoSpaceBeforeColon=new t.Rule(t.RuleDescriptor.create2(t.Shared.TokenRange.Any,56),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext,n.IsNotBinaryOpContext),8)),this.NoSpaceBeforeQuestionMark=new t.Rule(t.RuleDescriptor.create2(t.Shared.TokenRange.Any,55),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext,n.IsNotBinaryOpContext),8)),this.SpaceAfterColon=new t.Rule(t.RuleDescriptor.create3(56,t.Shared.TokenRange.Any),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext,n.IsNotBinaryOpContext),2)),this.SpaceAfterQuestionMarkInConditionalOperator=new t.Rule(t.RuleDescriptor.create3(55,t.Shared.TokenRange.Any),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext,n.IsConditionalOperatorContext),2)),this.NoSpaceAfterQuestionMark=new t.Rule(t.RuleDescriptor.create3(55,t.Shared.TokenRange.Any),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext),8)),this.SpaceAfterSemicolon=new t.Rule(t.RuleDescriptor.create3(25,t.Shared.TokenRange.Any),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext),2)),this.SpaceAfterCloseBrace=new t.Rule(t.RuleDescriptor.create3(18,t.Shared.TokenRange.FromRange(0,142,[20])),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext,n.IsAfterCodeBlockContext),2)),this.SpaceBetweenCloseBraceAndElse=new t.Rule(t.RuleDescriptor.create1(18,82),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext),2)),this.SpaceBetweenCloseBraceAndWhile=new t.Rule(t.RuleDescriptor.create1(18,106),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext),2)),this.NoSpaceAfterCloseBrace=new t.Rule(t.RuleDescriptor.create3(18,t.Shared.TokenRange.FromTokens([22,26,25])),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext),8)),this.NoSpaceBeforeDot=new t.Rule(t.RuleDescriptor.create2(t.Shared.TokenRange.Any,23),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext),8)),this.NoSpaceAfterDot=new t.Rule(t.RuleDescriptor.create3(23,t.Shared.TokenRange.Any),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext),8)),this.NoSpaceBeforeOpenBracket=new t.Rule(t.RuleDescriptor.create2(t.Shared.TokenRange.AnyExcept(120),21),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext),8)),this.NoSpaceAfterCloseBracket=new t.Rule(t.RuleDescriptor.create3(22,t.Shared.TokenRange.Any),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext,n.IsNotBeforeBlockInFunctionDeclarationContext),8)),this.FunctionOpenBraceLeftTokenRange=t.Shared.TokenRange.AnyIncludingMultilineComments,this.SpaceBeforeOpenBraceInFunction=new t.Rule(t.RuleDescriptor.create2(this.FunctionOpenBraceLeftTokenRange,17),t.RuleOperation.create2(new t.RuleOperationContext(n.isOptionDisabledOrUndefinedOrTokensOnSameLine("placeOpenBraceOnNewLineForFunctions"),n.IsFunctionDeclContext,n.IsBeforeBlockContext,n.IsNotFormatOnEnter,n.IsSameLineTokenOrBeforeBlockContext),2),1),this.TypeScriptOpenBraceLeftTokenRange=t.Shared.TokenRange.FromTokens([71,3,75,84,91]),this.SpaceBeforeOpenBraceInTypeScriptDeclWithBlock=new t.Rule(t.RuleDescriptor.create2(this.TypeScriptOpenBraceLeftTokenRange,17),t.RuleOperation.create2(new t.RuleOperationContext(n.isOptionDisabledOrUndefinedOrTokensOnSameLine("placeOpenBraceOnNewLineForFunctions"),n.IsTypeScriptDeclWithBlockContext,n.IsNotFormatOnEnter,n.IsSameLineTokenOrBeforeBlockContext),2),1),this.ControlOpenBraceLeftTokenRange=t.Shared.TokenRange.FromTokens([20,3,81,102,87,82]),this.SpaceBeforeOpenBraceInControl=new t.Rule(t.RuleDescriptor.create2(this.ControlOpenBraceLeftTokenRange,17),t.RuleOperation.create2(new t.RuleOperationContext(n.isOptionDisabledOrUndefinedOrTokensOnSameLine("placeOpenBraceOnNewLineForControlBlocks"),n.IsControlDeclContext,n.IsNotFormatOnEnter,n.IsSameLineTokenOrBeforeBlockContext),2),1),this.SpaceAfterOpenBrace=new t.Rule(t.RuleDescriptor.create3(17,t.Shared.TokenRange.Any),t.RuleOperation.create2(new t.RuleOperationContext(n.IsOptionEnabledOrUndefined("insertSpaceAfterOpeningAndBeforeClosingNonemptyBraces"),n.IsBraceWrappedContext),2)),this.SpaceBeforeCloseBrace=new t.Rule(t.RuleDescriptor.create2(t.Shared.TokenRange.Any,18),t.RuleOperation.create2(new t.RuleOperationContext(n.IsOptionEnabledOrUndefined("insertSpaceAfterOpeningAndBeforeClosingNonemptyBraces"),n.IsBraceWrappedContext),2)),this.NoSpaceAfterOpenBrace=new t.Rule(t.RuleDescriptor.create3(17,t.Shared.TokenRange.Any),t.RuleOperation.create2(new t.RuleOperationContext(n.IsOptionDisabled("insertSpaceAfterOpeningAndBeforeClosingNonemptyBraces"),n.IsNonJsxSameLineTokenContext),8)),this.NoSpaceBeforeCloseBrace=new t.Rule(t.RuleDescriptor.create2(t.Shared.TokenRange.Any,18),t.RuleOperation.create2(new t.RuleOperationContext(n.IsOptionDisabled("insertSpaceAfterOpeningAndBeforeClosingNonemptyBraces"),n.IsNonJsxSameLineTokenContext),8)),this.NoSpaceBetweenEmptyBraceBrackets=new t.Rule(t.RuleDescriptor.create1(17,18),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext,n.IsObjectContext),8)),this.NewLineAfterOpenBraceInBlockContext=new t.Rule(t.RuleDescriptor.create3(17,t.Shared.TokenRange.Any),t.RuleOperation.create2(new t.RuleOperationContext(n.IsMultilineBlockContext),4)),this.NewLineBeforeCloseBraceInBlockContext=new t.Rule(t.RuleDescriptor.create2(t.Shared.TokenRange.AnyIncludingMultilineComments,18),t.RuleOperation.create2(new t.RuleOperationContext(n.IsMultilineBlockContext),4)),this.NoSpaceAfterUnaryPrefixOperator=new t.Rule(t.RuleDescriptor.create4(t.Shared.TokenRange.UnaryPrefixOperators,t.Shared.TokenRange.UnaryPrefixExpressions),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext,n.IsNotBinaryOpContext),8)),this.NoSpaceAfterUnaryPreincrementOperator=new t.Rule(t.RuleDescriptor.create3(43,t.Shared.TokenRange.UnaryPreincrementExpressions),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext),8)),this.NoSpaceAfterUnaryPredecrementOperator=new t.Rule(t.RuleDescriptor.create3(44,t.Shared.TokenRange.UnaryPredecrementExpressions),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext),8)),this.NoSpaceBeforeUnaryPostincrementOperator=new t.Rule(t.RuleDescriptor.create2(t.Shared.TokenRange.UnaryPostincrementExpressions,43),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext),8)),this.NoSpaceBeforeUnaryPostdecrementOperator=new t.Rule(t.RuleDescriptor.create2(t.Shared.TokenRange.UnaryPostdecrementExpressions,44),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext),8)),this.SpaceAfterPostincrementWhenFollowedByAdd=new t.Rule(t.RuleDescriptor.create1(43,37),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext,n.IsBinaryOpContext),2)),this.SpaceAfterAddWhenFollowedByUnaryPlus=new t.Rule(t.RuleDescriptor.create1(37,37),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext,n.IsBinaryOpContext),2)),this.SpaceAfterAddWhenFollowedByPreincrement=new t.Rule(t.RuleDescriptor.create1(37,43),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext,n.IsBinaryOpContext),2)),this.SpaceAfterPostdecrementWhenFollowedBySubtract=new t.Rule(t.RuleDescriptor.create1(44,38),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext,n.IsBinaryOpContext),2)),this.SpaceAfterSubtractWhenFollowedByUnaryMinus=new t.Rule(t.RuleDescriptor.create1(38,38),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext,n.IsBinaryOpContext),2)),this.SpaceAfterSubtractWhenFollowedByPredecrement=new t.Rule(t.RuleDescriptor.create1(38,44),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext,n.IsBinaryOpContext),2)),this.NoSpaceBeforeComma=new t.Rule(t.RuleDescriptor.create2(t.Shared.TokenRange.Any,26),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext),8)),this.SpaceAfterCertainKeywords=new t.Rule(t.RuleDescriptor.create4(t.Shared.TokenRange.FromTokens([104,100,94,80,96,103,121]),t.Shared.TokenRange.Any),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext),2)),this.NoSpaceAfterNewKeywordOnConstructorSignature=new t.Rule(t.RuleDescriptor.create1(94,19),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext,n.IsConstructorSignatureContext),8)),this.SpaceAfterLetConstInVariableDeclaration=new t.Rule(t.RuleDescriptor.create4(t.Shared.TokenRange.FromTokens([110,76]),t.Shared.TokenRange.Any),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext,n.IsStartOfVariableDeclarationList),2)),this.NoSpaceBeforeOpenParenInFuncCall=new t.Rule(t.RuleDescriptor.create2(t.Shared.TokenRange.Any,19),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext,n.IsFunctionCallOrNewContext,n.IsPreviousTokenNotComma),8)),this.SpaceAfterFunctionInFuncDecl=new t.Rule(t.RuleDescriptor.create3(89,t.Shared.TokenRange.Any),t.RuleOperation.create2(new t.RuleOperationContext(n.IsFunctionDeclContext),2)),this.SpaceBeforeOpenParenInFuncDecl=new t.Rule(t.RuleDescriptor.create2(t.Shared.TokenRange.Any,19),t.RuleOperation.create2(new t.RuleOperationContext(n.IsOptionEnabled("insertSpaceBeforeFunctionParenthesis"),n.IsNonJsxSameLineTokenContext,n.IsFunctionDeclContext),2)),this.NoSpaceBeforeOpenParenInFuncDecl=new t.Rule(t.RuleDescriptor.create2(t.Shared.TokenRange.Any,19),t.RuleOperation.create2(new t.RuleOperationContext(n.IsOptionDisabledOrUndefined("insertSpaceBeforeFunctionParenthesis"),n.IsNonJsxSameLineTokenContext,n.IsFunctionDeclContext),8)),this.SpaceAfterVoidOperator=new t.Rule(t.RuleDescriptor.create3(105,t.Shared.TokenRange.Any),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext,n.IsVoidOpContext),2)),this.NoSpaceBetweenReturnAndSemicolon=new t.Rule(t.RuleDescriptor.create1(96,25),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext),8)),this.SpaceBetweenStatements=new t.Rule(t.RuleDescriptor.create4(t.Shared.TokenRange.FromTokens([20,81,82,73]),t.Shared.TokenRange.Any),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext,n.IsNonJsxElementContext,n.IsNotForContext),2)),this.SpaceAfterTryFinally=new t.Rule(t.RuleDescriptor.create2(t.Shared.TokenRange.FromTokens([102,87]),17),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext),2)),this.SpaceAfterGetSetInMember=new t.Rule(t.RuleDescriptor.create2(t.Shared.TokenRange.FromTokens([125,135]),71),t.RuleOperation.create2(new t.RuleOperationContext(n.IsFunctionDeclContext),2)),this.SpaceBeforeBinaryKeywordOperator=new t.Rule(t.RuleDescriptor.create4(t.Shared.TokenRange.Any,t.Shared.TokenRange.BinaryKeywordOperators),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext,n.IsBinaryOpContext),2)),this.SpaceAfterBinaryKeywordOperator=new t.Rule(t.RuleDescriptor.create4(t.Shared.TokenRange.BinaryKeywordOperators,t.Shared.TokenRange.Any),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext,n.IsBinaryOpContext),2)),this.SpaceAfterConstructor=new t.Rule(t.RuleDescriptor.create1(123,19),t.RuleOperation.create2(new t.RuleOperationContext(n.IsOptionEnabled("insertSpaceAfterConstructor"),n.IsNonJsxSameLineTokenContext),2)),this.NoSpaceAfterConstructor=new t.Rule(t.RuleDescriptor.create1(123,19),t.RuleOperation.create2(new t.RuleOperationContext(n.IsOptionDisabledOrUndefined("insertSpaceAfterConstructor"),n.IsNonJsxSameLineTokenContext),8)),this.NoSpaceAfterModuleImport=new t.Rule(t.RuleDescriptor.create2(t.Shared.TokenRange.FromTokens([128,132]),19),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext),8)),this.SpaceAfterCertainTypeScriptKeywords=new t.Rule(t.RuleDescriptor.create4(t.Shared.TokenRange.FromTokens([117,75,124,79,83,84,85,125,108,91,109,128,129,112,114,113,131,135,115,138,140,127]),t.Shared.TokenRange.Any),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext),2)),this.SpaceBeforeCertainTypeScriptKeywords=new t.Rule(t.RuleDescriptor.create4(t.Shared.TokenRange.Any,t.Shared.TokenRange.FromTokens([85,108,140])),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext),2)),this.SpaceAfterModuleName=new t.Rule(t.RuleDescriptor.create1(9,17),t.RuleOperation.create2(new t.RuleOperationContext(n.IsModuleDeclContext),2)),this.SpaceBeforeArrow=new t.Rule(t.RuleDescriptor.create2(t.Shared.TokenRange.Any,36),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext),2)),this.SpaceAfterArrow=new t.Rule(t.RuleDescriptor.create3(36,t.Shared.TokenRange.Any),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext),2)),this.NoSpaceAfterEllipsis=new t.Rule(t.RuleDescriptor.create1(24,71),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext),8)),this.NoSpaceAfterOptionalParameters=new t.Rule(t.RuleDescriptor.create3(55,t.Shared.TokenRange.FromTokens([20,26])),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext,n.IsNotBinaryOpContext),8)),this.NoSpaceBeforeOpenAngularBracket=new t.Rule(t.RuleDescriptor.create2(t.Shared.TokenRange.TypeNames,27),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext,n.IsTypeArgumentOrParameterOrAssertionContext),8)),this.NoSpaceBetweenCloseParenAndAngularBracket=new t.Rule(t.RuleDescriptor.create1(20,27),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext,n.IsTypeArgumentOrParameterOrAssertionContext),8)),this.NoSpaceAfterOpenAngularBracket=new t.Rule(t.RuleDescriptor.create3(27,t.Shared.TokenRange.Any),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext,n.IsTypeArgumentOrParameterOrAssertionContext),8)),this.NoSpaceBeforeCloseAngularBracket=new t.Rule(t.RuleDescriptor.create2(t.Shared.TokenRange.Any,29),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext,n.IsTypeArgumentOrParameterOrAssertionContext),8)),this.NoSpaceAfterCloseAngularBracket=new t.Rule(t.RuleDescriptor.create3(29,t.Shared.TokenRange.FromTokens([19,21,29,26])),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext,n.IsTypeArgumentOrParameterOrAssertionContext),8)),this.NoSpaceBetweenEmptyInterfaceBraceBrackets=new t.Rule(t.RuleDescriptor.create1(17,18),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext,n.IsObjectTypeContext),8)),this.SpaceBeforeAt=new t.Rule(t.RuleDescriptor.create2(t.Shared.TokenRange.Any,57),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext),2)),this.NoSpaceAfterAt=new t.Rule(t.RuleDescriptor.create3(57,t.Shared.TokenRange.Any),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext),8)),this.SpaceAfterDecorator=new t.Rule(t.RuleDescriptor.create4(t.Shared.TokenRange.Any,t.Shared.TokenRange.FromTokens([117,71,84,79,75,115,114,112,113,125,135,21,39])),t.RuleOperation.create2(new t.RuleOperationContext(n.IsEndOfDecoratorContextOnSameLine),2)),this.NoSpaceBetweenFunctionKeywordAndStar=new t.Rule(t.RuleDescriptor.create1(89,39),t.RuleOperation.create2(new t.RuleOperationContext(n.IsFunctionDeclarationOrFunctionExpressionContext),8)),this.SpaceAfterStarInGeneratorDeclaration=new t.Rule(t.RuleDescriptor.create3(39,t.Shared.TokenRange.FromTokens([71,19])),t.RuleOperation.create2(new t.RuleOperationContext(n.IsFunctionDeclarationOrFunctionExpressionContext),2)),this.NoSpaceBetweenYieldKeywordAndStar=new t.Rule(t.RuleDescriptor.create1(116,39),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext,n.IsYieldOrYieldStarWithOperand),8)),this.SpaceBetweenYieldOrYieldStarAndOperand=new t.Rule(t.RuleDescriptor.create4(t.Shared.TokenRange.FromTokens([116,39]),t.Shared.TokenRange.Any),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext,n.IsYieldOrYieldStarWithOperand),2)),this.SpaceBetweenAsyncAndOpenParen=new t.Rule(t.RuleDescriptor.create1(120,19),t.RuleOperation.create2(new t.RuleOperationContext(n.IsArrowFunctionContext,n.IsNonJsxSameLineTokenContext),2)),this.SpaceBetweenAsyncAndFunctionKeyword=new t.Rule(t.RuleDescriptor.create1(120,89),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext),2)),this.NoSpaceBetweenTagAndTemplateString=new t.Rule(t.RuleDescriptor.create3(71,t.Shared.TokenRange.FromTokens([13,14])),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext),8)),this.SpaceBeforeJsxAttribute=new t.Rule(t.RuleDescriptor.create2(t.Shared.TokenRange.Any,71),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNextTokenParentJsxAttribute,n.IsNonJsxSameLineTokenContext),2)),this.SpaceBeforeSlashInJsxOpeningElement=new t.Rule(t.RuleDescriptor.create2(t.Shared.TokenRange.Any,41),t.RuleOperation.create2(new t.RuleOperationContext(n.IsJsxSelfClosingElementContext,n.IsNonJsxSameLineTokenContext),2)),this.NoSpaceBeforeGreaterThanTokenInJsxOpeningElement=new t.Rule(t.RuleDescriptor.create1(41,29),t.RuleOperation.create2(new t.RuleOperationContext(n.IsJsxSelfClosingElementContext,n.IsNonJsxSameLineTokenContext),8)),this.NoSpaceBeforeEqualInJsxAttribute=new t.Rule(t.RuleDescriptor.create2(t.Shared.TokenRange.Any,58),t.RuleOperation.create2(new t.RuleOperationContext(n.IsJsxAttributeContext,n.IsNonJsxSameLineTokenContext),8)),this.NoSpaceAfterEqualInJsxAttribute=new t.Rule(t.RuleDescriptor.create3(58,t.Shared.TokenRange.Any),t.RuleOperation.create2(new t.RuleOperationContext(n.IsJsxAttributeContext,n.IsNonJsxSameLineTokenContext),8)),this.NoSpaceBeforeNonNullAssertionOperator=new t.Rule(t.RuleDescriptor.create2(t.Shared.TokenRange.Any,51),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext,n.IsNonNullAssertionContext),8)),this.SpaceAfterComma=new t.Rule(t.RuleDescriptor.create3(26,t.Shared.TokenRange.Any),t.RuleOperation.create2(new t.RuleOperationContext(n.IsOptionEnabled("insertSpaceAfterCommaDelimiter"),n.IsNonJsxSameLineTokenContext,n.IsNonJsxElementContext,n.IsNextTokenNotCloseBracket),2)),this.NoSpaceAfterComma=new t.Rule(t.RuleDescriptor.create3(26,t.Shared.TokenRange.Any),t.RuleOperation.create2(new t.RuleOperationContext(n.IsOptionDisabledOrUndefined("insertSpaceAfterCommaDelimiter"),n.IsNonJsxSameLineTokenContext,n.IsNonJsxElementContext),8)),this.SpaceBeforeBinaryOperator=new t.Rule(t.RuleDescriptor.create4(t.Shared.TokenRange.Any,t.Shared.TokenRange.BinaryOperators),t.RuleOperation.create2(new t.RuleOperationContext(n.IsOptionEnabled("insertSpaceBeforeAndAfterBinaryOperators"),n.IsNonJsxSameLineTokenContext,n.IsBinaryOpContext),2)),this.SpaceAfterBinaryOperator=new t.Rule(t.RuleDescriptor.create4(t.Shared.TokenRange.BinaryOperators,t.Shared.TokenRange.Any),t.RuleOperation.create2(new t.RuleOperationContext(n.IsOptionEnabled("insertSpaceBeforeAndAfterBinaryOperators"),n.IsNonJsxSameLineTokenContext,n.IsBinaryOpContext),2)),this.NoSpaceBeforeBinaryOperator=new t.Rule(t.RuleDescriptor.create4(t.Shared.TokenRange.Any,t.Shared.TokenRange.BinaryOperators),t.RuleOperation.create2(new t.RuleOperationContext(n.IsOptionDisabledOrUndefined("insertSpaceBeforeAndAfterBinaryOperators"),n.IsNonJsxSameLineTokenContext,n.IsBinaryOpContext),8)),this.NoSpaceAfterBinaryOperator=new t.Rule(t.RuleDescriptor.create4(t.Shared.TokenRange.BinaryOperators,t.Shared.TokenRange.Any),t.RuleOperation.create2(new t.RuleOperationContext(n.IsOptionDisabledOrUndefined("insertSpaceBeforeAndAfterBinaryOperators"),n.IsNonJsxSameLineTokenContext,n.IsBinaryOpContext),8)),this.SpaceAfterKeywordInControl=new t.Rule(t.RuleDescriptor.create2(t.Shared.TokenRange.Keywords,19),t.RuleOperation.create2(new t.RuleOperationContext(n.IsOptionEnabled("insertSpaceAfterKeywordsInControlFlowStatements"),n.IsControlDeclContext),2)),this.NoSpaceAfterKeywordInControl=new t.Rule(t.RuleDescriptor.create2(t.Shared.TokenRange.Keywords,19),t.RuleOperation.create2(new t.RuleOperationContext(n.IsOptionDisabledOrUndefined("insertSpaceAfterKeywordsInControlFlowStatements"),n.IsControlDeclContext),8)),this.NewLineBeforeOpenBraceInFunction=new t.Rule(t.RuleDescriptor.create2(this.FunctionOpenBraceLeftTokenRange,17),t.RuleOperation.create2(new t.RuleOperationContext(n.IsOptionEnabled("placeOpenBraceOnNewLineForFunctions"),n.IsFunctionDeclContext,n.IsBeforeMultilineBlockContext),4),1),this.NewLineBeforeOpenBraceInTypeScriptDeclWithBlock=new t.Rule(t.RuleDescriptor.create2(this.TypeScriptOpenBraceLeftTokenRange,17),t.RuleOperation.create2(new t.RuleOperationContext(n.IsOptionEnabled("placeOpenBraceOnNewLineForFunctions"),n.IsTypeScriptDeclWithBlockContext,n.IsBeforeMultilineBlockContext),4),1),this.NewLineBeforeOpenBraceInControl=new t.Rule(t.RuleDescriptor.create2(this.ControlOpenBraceLeftTokenRange,17),t.RuleOperation.create2(new t.RuleOperationContext(n.IsOptionEnabled("placeOpenBraceOnNewLineForControlBlocks"),n.IsControlDeclContext,n.IsBeforeMultilineBlockContext),4),1),this.SpaceAfterSemicolonInFor=new t.Rule(t.RuleDescriptor.create3(25,t.Shared.TokenRange.Any),t.RuleOperation.create2(new t.RuleOperationContext(n.IsOptionEnabled("insertSpaceAfterSemicolonInForStatements"),n.IsNonJsxSameLineTokenContext,n.IsForContext),2)),this.NoSpaceAfterSemicolonInFor=new t.Rule(t.RuleDescriptor.create3(25,t.Shared.TokenRange.Any),t.RuleOperation.create2(new t.RuleOperationContext(n.IsOptionDisabledOrUndefined("insertSpaceAfterSemicolonInForStatements"),n.IsNonJsxSameLineTokenContext,n.IsForContext),8)),this.SpaceAfterOpenParen=new t.Rule(t.RuleDescriptor.create3(19,t.Shared.TokenRange.Any),t.RuleOperation.create2(new t.RuleOperationContext(n.IsOptionEnabled("insertSpaceAfterOpeningAndBeforeClosingNonemptyParenthesis"),n.IsNonJsxSameLineTokenContext),2)),this.SpaceBeforeCloseParen=new t.Rule(t.RuleDescriptor.create2(t.Shared.TokenRange.Any,20),t.RuleOperation.create2(new t.RuleOperationContext(n.IsOptionEnabled("insertSpaceAfterOpeningAndBeforeClosingNonemptyParenthesis"),n.IsNonJsxSameLineTokenContext),2)),this.SpaceBetweenOpenParens=new t.Rule(t.RuleDescriptor.create1(19,19),t.RuleOperation.create2(new t.RuleOperationContext(n.IsOptionEnabled("insertSpaceAfterOpeningAndBeforeClosingNonemptyParenthesis"),n.IsNonJsxSameLineTokenContext),2)),this.NoSpaceBetweenParens=new t.Rule(t.RuleDescriptor.create1(19,20),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext),8)),this.NoSpaceAfterOpenParen=new t.Rule(t.RuleDescriptor.create3(19,t.Shared.TokenRange.Any),t.RuleOperation.create2(new t.RuleOperationContext(n.IsOptionDisabledOrUndefined("insertSpaceAfterOpeningAndBeforeClosingNonemptyParenthesis"),n.IsNonJsxSameLineTokenContext),8)),this.NoSpaceBeforeCloseParen=new t.Rule(t.RuleDescriptor.create2(t.Shared.TokenRange.Any,20),t.RuleOperation.create2(new t.RuleOperationContext(n.IsOptionDisabledOrUndefined("insertSpaceAfterOpeningAndBeforeClosingNonemptyParenthesis"),n.IsNonJsxSameLineTokenContext),8)),this.SpaceAfterOpenBracket=new t.Rule(t.RuleDescriptor.create3(21,t.Shared.TokenRange.Any),t.RuleOperation.create2(new t.RuleOperationContext(n.IsOptionEnabled("insertSpaceAfterOpeningAndBeforeClosingNonemptyBrackets"),n.IsNonJsxSameLineTokenContext),2)),this.SpaceBeforeCloseBracket=new t.Rule(t.RuleDescriptor.create2(t.Shared.TokenRange.Any,22),t.RuleOperation.create2(new t.RuleOperationContext(n.IsOptionEnabled("insertSpaceAfterOpeningAndBeforeClosingNonemptyBrackets"),n.IsNonJsxSameLineTokenContext),2)),this.NoSpaceBetweenBrackets=new t.Rule(t.RuleDescriptor.create1(21,22),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext),8)),this.NoSpaceAfterOpenBracket=new t.Rule(t.RuleDescriptor.create3(21,t.Shared.TokenRange.Any),t.RuleOperation.create2(new t.RuleOperationContext(n.IsOptionDisabledOrUndefined("insertSpaceAfterOpeningAndBeforeClosingNonemptyBrackets"),n.IsNonJsxSameLineTokenContext),8)),this.NoSpaceBeforeCloseBracket=new t.Rule(t.RuleDescriptor.create2(t.Shared.TokenRange.Any,22),t.RuleOperation.create2(new t.RuleOperationContext(n.IsOptionDisabledOrUndefined("insertSpaceAfterOpeningAndBeforeClosingNonemptyBrackets"),n.IsNonJsxSameLineTokenContext),8)),this.NoSpaceAfterTemplateHeadAndMiddle=new t.Rule(t.RuleDescriptor.create4(t.Shared.TokenRange.FromTokens([14,15]),t.Shared.TokenRange.Any),t.RuleOperation.create2(new t.RuleOperationContext(n.IsOptionDisabledOrUndefined("insertSpaceAfterOpeningAndBeforeClosingTemplateStringBraces"),n.IsNonJsxSameLineTokenContext),8)),this.SpaceAfterTemplateHeadAndMiddle=new t.Rule(t.RuleDescriptor.create4(t.Shared.TokenRange.FromTokens([14,15]),t.Shared.TokenRange.Any),t.RuleOperation.create2(new t.RuleOperationContext(n.IsOptionEnabled("insertSpaceAfterOpeningAndBeforeClosingTemplateStringBraces"),n.IsNonJsxSameLineTokenContext),2)),this.NoSpaceBeforeTemplateMiddleAndTail=new t.Rule(t.RuleDescriptor.create4(t.Shared.TokenRange.Any,t.Shared.TokenRange.FromTokens([15,16])),t.RuleOperation.create2(new t.RuleOperationContext(n.IsOptionDisabledOrUndefined("insertSpaceAfterOpeningAndBeforeClosingTemplateStringBraces"),n.IsNonJsxSameLineTokenContext),8)),this.SpaceBeforeTemplateMiddleAndTail=new t.Rule(t.RuleDescriptor.create4(t.Shared.TokenRange.Any,t.Shared.TokenRange.FromTokens([15,16])),t.RuleOperation.create2(new t.RuleOperationContext(n.IsOptionEnabled("insertSpaceAfterOpeningAndBeforeClosingTemplateStringBraces"),n.IsNonJsxSameLineTokenContext),2)),this.NoSpaceAfterOpenBraceInJsxExpression=new t.Rule(t.RuleDescriptor.create3(17,t.Shared.TokenRange.Any),t.RuleOperation.create2(new t.RuleOperationContext(n.IsOptionDisabledOrUndefined("insertSpaceAfterOpeningAndBeforeClosingJsxExpressionBraces"),n.IsNonJsxSameLineTokenContext,n.IsJsxExpressionContext),8)),this.SpaceAfterOpenBraceInJsxExpression=new t.Rule(t.RuleDescriptor.create3(17,t.Shared.TokenRange.Any),t.RuleOperation.create2(new t.RuleOperationContext(n.IsOptionEnabled("insertSpaceAfterOpeningAndBeforeClosingJsxExpressionBraces"),n.IsNonJsxSameLineTokenContext,n.IsJsxExpressionContext),2)),this.NoSpaceBeforeCloseBraceInJsxExpression=new t.Rule(t.RuleDescriptor.create2(t.Shared.TokenRange.Any,18),t.RuleOperation.create2(new t.RuleOperationContext(n.IsOptionDisabledOrUndefined("insertSpaceAfterOpeningAndBeforeClosingJsxExpressionBraces"),n.IsNonJsxSameLineTokenContext,n.IsJsxExpressionContext),8)),this.SpaceBeforeCloseBraceInJsxExpression=new t.Rule(t.RuleDescriptor.create2(t.Shared.TokenRange.Any,18),t.RuleOperation.create2(new t.RuleOperationContext(n.IsOptionEnabled("insertSpaceAfterOpeningAndBeforeClosingJsxExpressionBraces"),n.IsNonJsxSameLineTokenContext,n.IsJsxExpressionContext),2)),this.SpaceAfterAnonymousFunctionKeyword=new t.Rule(t.RuleDescriptor.create1(89,19),t.RuleOperation.create2(new t.RuleOperationContext(n.IsOptionEnabled("insertSpaceAfterFunctionKeywordForAnonymousFunctions"),n.IsFunctionDeclContext),2)),this.NoSpaceAfterAnonymousFunctionKeyword=new t.Rule(t.RuleDescriptor.create1(89,19),t.RuleOperation.create2(new t.RuleOperationContext(n.IsOptionDisabledOrUndefined("insertSpaceAfterFunctionKeywordForAnonymousFunctions"),n.IsFunctionDeclContext),8)),this.NoSpaceAfterTypeAssertion=new t.Rule(t.RuleDescriptor.create3(29,t.Shared.TokenRange.Any),t.RuleOperation.create2(new t.RuleOperationContext(n.IsOptionDisabledOrUndefined("insertSpaceAfterTypeAssertion"),n.IsNonJsxSameLineTokenContext,n.IsTypeAssertionContext),8)),this.SpaceAfterTypeAssertion=new t.Rule(t.RuleDescriptor.create3(29,t.Shared.TokenRange.Any),t.RuleOperation.create2(new t.RuleOperationContext(n.IsOptionEnabled("insertSpaceAfterTypeAssertion"),n.IsNonJsxSameLineTokenContext,n.IsTypeAssertionContext),2)),this.HighPriorityCommonRules=[this.IgnoreBeforeComment,this.IgnoreAfterLineComment,this.NoSpaceBeforeColon,this.SpaceAfterColon,this.NoSpaceBeforeQuestionMark,this.SpaceAfterQuestionMarkInConditionalOperator,this.NoSpaceAfterQuestionMark,this.NoSpaceBeforeDot,this.NoSpaceAfterDot,this.NoSpaceAfterUnaryPrefixOperator,this.NoSpaceAfterUnaryPreincrementOperator,this.NoSpaceAfterUnaryPredecrementOperator,this.NoSpaceBeforeUnaryPostincrementOperator,this.NoSpaceBeforeUnaryPostdecrementOperator,this.SpaceAfterPostincrementWhenFollowedByAdd,this.SpaceAfterAddWhenFollowedByUnaryPlus,this.SpaceAfterAddWhenFollowedByPreincrement,this.SpaceAfterPostdecrementWhenFollowedBySubtract,this.SpaceAfterSubtractWhenFollowedByUnaryMinus,this.SpaceAfterSubtractWhenFollowedByPredecrement,this.NoSpaceAfterCloseBrace,this.NewLineBeforeCloseBraceInBlockContext,this.SpaceAfterCloseBrace,this.SpaceBetweenCloseBraceAndElse,this.SpaceBetweenCloseBraceAndWhile,this.NoSpaceBetweenEmptyBraceBrackets,this.NoSpaceBetweenFunctionKeywordAndStar,this.SpaceAfterStarInGeneratorDeclaration,this.SpaceAfterFunctionInFuncDecl,this.NewLineAfterOpenBraceInBlockContext,this.SpaceAfterGetSetInMember,this.NoSpaceBetweenYieldKeywordAndStar,this.SpaceBetweenYieldOrYieldStarAndOperand,this.NoSpaceBetweenReturnAndSemicolon,this.SpaceAfterCertainKeywords,this.SpaceAfterLetConstInVariableDeclaration,this.NoSpaceBeforeOpenParenInFuncCall,this.SpaceBeforeBinaryKeywordOperator,this.SpaceAfterBinaryKeywordOperator,this.SpaceAfterVoidOperator,this.SpaceBetweenAsyncAndOpenParen,this.SpaceBetweenAsyncAndFunctionKeyword,this.NoSpaceBetweenTagAndTemplateString,this.SpaceBeforeJsxAttribute,this.SpaceBeforeSlashInJsxOpeningElement,this.NoSpaceBeforeGreaterThanTokenInJsxOpeningElement,this.NoSpaceBeforeEqualInJsxAttribute,this.NoSpaceAfterEqualInJsxAttribute,this.NoSpaceAfterModuleImport,this.SpaceAfterCertainTypeScriptKeywords,this.SpaceBeforeCertainTypeScriptKeywords,this.SpaceAfterModuleName,this.SpaceBeforeArrow,this.SpaceAfterArrow,this.NoSpaceAfterEllipsis,this.NoSpaceAfterOptionalParameters,this.NoSpaceBetweenEmptyInterfaceBraceBrackets,this.NoSpaceBeforeOpenAngularBracket,this.NoSpaceBetweenCloseParenAndAngularBracket,this.NoSpaceAfterOpenAngularBracket,this.NoSpaceBeforeCloseAngularBracket,this.NoSpaceAfterCloseAngularBracket,this.SpaceBeforeAt,this.NoSpaceAfterAt,this.SpaceAfterDecorator,this.NoSpaceBeforeNonNullAssertionOperator,this.NoSpaceAfterNewKeywordOnConstructorSignature],this.UserConfigurableRules=[this.SpaceAfterConstructor,this.NoSpaceAfterConstructor,this.SpaceAfterComma,this.NoSpaceAfterComma,this.SpaceAfterAnonymousFunctionKeyword,this.NoSpaceAfterAnonymousFunctionKeyword,this.SpaceAfterKeywordInControl,this.NoSpaceAfterKeywordInControl,this.SpaceAfterOpenParen,this.SpaceBeforeCloseParen,this.SpaceBetweenOpenParens,this.NoSpaceBetweenParens,this.NoSpaceAfterOpenParen,this.NoSpaceBeforeCloseParen,this.SpaceAfterOpenBracket,this.SpaceBeforeCloseBracket,this.NoSpaceBetweenBrackets,this.NoSpaceAfterOpenBracket,this.NoSpaceBeforeCloseBracket,this.SpaceAfterOpenBrace,this.SpaceBeforeCloseBrace,this.NoSpaceBetweenEmptyBraceBrackets,this.NoSpaceAfterOpenBrace,this.NoSpaceBeforeCloseBrace,this.SpaceAfterTemplateHeadAndMiddle,this.SpaceBeforeTemplateMiddleAndTail,this.NoSpaceAfterTemplateHeadAndMiddle,this.NoSpaceBeforeTemplateMiddleAndTail,this.SpaceAfterOpenBraceInJsxExpression,this.SpaceBeforeCloseBraceInJsxExpression,this.NoSpaceAfterOpenBraceInJsxExpression,this.NoSpaceBeforeCloseBraceInJsxExpression,this.SpaceAfterSemicolonInFor,this.NoSpaceAfterSemicolonInFor,this.SpaceBeforeBinaryOperator,this.SpaceAfterBinaryOperator,this.NoSpaceBeforeBinaryOperator,this.NoSpaceAfterBinaryOperator,this.SpaceBeforeOpenParenInFuncDecl,this.NoSpaceBeforeOpenParenInFuncDecl,this.NewLineBeforeOpenBraceInControl,this.NewLineBeforeOpenBraceInFunction,this.NewLineBeforeOpenBraceInTypeScriptDeclWithBlock,this.SpaceAfterTypeAssertion,this.NoSpaceAfterTypeAssertion],this.LowPriorityCommonRules=[this.NoSpaceBeforeSemicolon,this.SpaceBeforeOpenBraceInControl,this.SpaceBeforeOpenBraceInFunction,this.SpaceBeforeOpenBraceInTypeScriptDeclWithBlock,this.NoSpaceBeforeComma,this.NoSpaceBeforeOpenBracket,this.NoSpaceAfterCloseBracket,this.SpaceAfterSemicolon,this.SpaceBetweenStatements,this.SpaceAfterTryFinally],e.Debug.isDebugging){for(var r in this){var i=this[r];i instanceof t.Rule&&(i.debugName=r)}}}return n.IsOptionEnabled=function(e){return function(t){return t.options&&t.options.hasOwnProperty(e)&&!!t.options[e]}},n.IsOptionDisabled=function(e){return function(t){return t.options&&t.options.hasOwnProperty(e)&&!t.options[e]}},n.IsOptionDisabledOrUndefined=function(e){return function(t){return!t.options||!t.options.hasOwnProperty(e)||!t.options[e]}},n.isOptionDisabledOrUndefinedOrTokensOnSameLine=function(e){return function(t){return!t.options||!t.options.hasOwnProperty(e)||!t.options[e]||t.TokensAreOnSameLine()}},n.IsOptionEnabledOrUndefined=function(e){return function(t){return!t.options||!t.options.hasOwnProperty(e)||!!t.options[e]}},n.IsForContext=function(e){return 214===e.contextNode.kind},n.IsNotForContext=function(e){return!n.IsForContext(e)},n.IsBinaryOpContext=function(e){switch(e.contextNode.kind){case 194:case 195:case 202:case 246:case 242:case 158:case 166:case 167:return!0;case 176:case 231:case 237:case 226:case 146:case 264:case 149:case 148:return 58===e.currentTokenSpan.kind||58===e.nextTokenSpan.kind;case 215:case 145:return 92===e.currentTokenSpan.kind||92===e.nextTokenSpan.kind;case 216:return 142===e.currentTokenSpan.kind||142===e.nextTokenSpan.kind}return!1},n.IsNotBinaryOpContext=function(e){return!n.IsBinaryOpContext(e)},n.IsConditionalOperatorContext=function(e){return 195===e.contextNode.kind},n.IsSameLineTokenOrBeforeBlockContext=function(e){return e.TokensAreOnSameLine()||n.IsBeforeBlockContext(e)},n.IsBraceWrappedContext=function(e){return 174===e.contextNode.kind||n.IsSingleLineBlockContext(e)},n.IsBeforeMultilineBlockContext=function(e){return n.IsBeforeBlockContext(e)&&!(e.NextNodeAllOnSameLine()||e.NextNodeBlockIsOnOneLine())},n.IsMultilineBlockContext=function(e){return n.IsBlockContext(e)&&!(e.ContextNodeAllOnSameLine()||e.ContextNodeBlockIsOnOneLine())},n.IsSingleLineBlockContext=function(e){return n.IsBlockContext(e)&&(e.ContextNodeAllOnSameLine()||e.ContextNodeBlockIsOnOneLine())},n.IsBlockContext=function(e){return n.NodeIsBlockContext(e.contextNode)},n.IsBeforeBlockContext=function(e){return n.NodeIsBlockContext(e.nextTokenParent)},n.NodeIsBlockContext=function(e){if(n.NodeIsTypeScriptDeclWithBlockContext(e))return!0;switch(e.kind){case 207:case 235:case 178:case 234:return!0}return!1},n.IsFunctionDeclContext=function(e){switch(e.contextNode.kind){case 228:case 151:case 150:case 153:case 154:case 155:case 186:case 152:case 187:case 230:return!0}return!1},n.IsFunctionDeclarationOrFunctionExpressionContext=function(e){return 228===e.contextNode.kind||186===e.contextNode.kind},n.IsTypeScriptDeclWithBlockContext=function(e){return n.NodeIsTypeScriptDeclWithBlockContext(e.contextNode)},n.NodeIsTypeScriptDeclWithBlockContext=function(e){switch(e.kind){case 229:case 199:case 230:case 232:case 163:case 233:case 244:case 245:case 238:case 241:return!0}return!1},n.IsAfterCodeBlockContext=function(e){switch(e.currentTokenParent.kind){case 229:case 233:case 232:case 260:case 234:case 221:return!0;case 207:var t=e.currentTokenParent.parent;if(!t||187!==t.kind&&186!==t.kind)return!0}return!1},n.IsControlDeclContext=function(e){switch(e.contextNode.kind){case 211:case 221:case 214:case 215:case 216:case 213:case 224:case 212:case 220:case 260:return!0;default:return!1}},n.IsObjectContext=function(e){return 178===e.contextNode.kind},n.IsFunctionCallContext=function(e){return 181===e.contextNode.kind},n.IsNewContext=function(e){return 182===e.contextNode.kind},n.IsFunctionCallOrNewContext=function(e){return n.IsFunctionCallContext(e)||n.IsNewContext(e)},n.IsPreviousTokenNotComma=function(e){return 26!==e.currentTokenSpan.kind},n.IsNextTokenNotCloseBracket=function(e){return 22!==e.nextTokenSpan.kind},n.IsArrowFunctionContext=function(e){return 187===e.contextNode.kind},n.IsNonJsxSameLineTokenContext=function(e){return e.TokensAreOnSameLine()&&10!==e.contextNode.kind},n.IsNonJsxElementContext=function(e){return 249!==e.contextNode.kind},n.IsJsxExpressionContext=function(e){return 256===e.contextNode.kind},n.IsNextTokenParentJsxAttribute=function(e){return 253===e.nextTokenParent.kind},n.IsJsxAttributeContext=function(e){return 253===e.contextNode.kind},n.IsJsxSelfClosingElementContext=function(e){return 250===e.contextNode.kind},n.IsNotBeforeBlockInFunctionDeclarationContext=function(e){return!n.IsFunctionDeclContext(e)&&!n.IsBeforeBlockContext(e)},n.IsEndOfDecoratorContextOnSameLine=function(e){return e.TokensAreOnSameLine()&&e.contextNode.decorators&&n.NodeIsInDecoratorContext(e.currentTokenParent)&&!n.NodeIsInDecoratorContext(e.nextTokenParent)},n.NodeIsInDecoratorContext=function(t){for(;e.isPartOfExpression(t);)t=t.parent;return 147===t.kind},n.IsStartOfVariableDeclarationList=function(e){return 227===e.currentTokenParent.kind&&e.currentTokenParent.getStart(e.sourceFile)===e.currentTokenSpan.pos},n.IsNotFormatOnEnter=function(e){return 2!==e.formattingRequestKind},n.IsModuleDeclContext=function(e){return 233===e.contextNode.kind},n.IsObjectTypeContext=function(e){return 163===e.contextNode.kind},n.IsConstructorSignatureContext=function(e){return 156===e.contextNode.kind},n.IsTypeArgumentOrParameterOrAssertion=function(e,t){if(27!==e.kind&&29!==e.kind)return!1;switch(t.kind){case 159:case 184:case 231:case 229:case 199:case 230:case 228:case 186:case 187:case 151:case 150:case 155:case 156:case 181:case 182:case 201:return!0;default:return!1}},n.IsTypeArgumentOrParameterOrAssertionContext=function(e){return n.IsTypeArgumentOrParameterOrAssertion(e.currentTokenSpan,e.currentTokenParent)||n.IsTypeArgumentOrParameterOrAssertion(e.nextTokenSpan,e.nextTokenParent)},n.IsTypeAssertionContext=function(e){return 184===e.contextNode.kind},n.IsVoidOpContext=function(e){return 105===e.currentTokenSpan.kind&&190===e.currentTokenParent.kind},n.IsYieldOrYieldStarWithOperand=function(e){return 197===e.contextNode.kind&&void 0!==e.contextNode.expression},n.IsNonNullAssertionContext=function(e){return 203===e.contextNode.kind},n}();t.Rules=n}(e.formatting||(e.formatting={}))}(ts||(ts={})),function(e){!function(t){var n=function(){function t(e){this.mapRowLength=143,this.map=new Array(this.mapRowLength*this.mapRowLength);for(var t=new Array(this.map.length),n=0,r=e;n<r.length;n++){var i=r[n];this.FillRule(i,t)}}return t.prototype.GetRuleBucketIndex=function(t,n){return e.Debug.assert(t<=142&&n<=142,"Must compute formatting context from tokens"),t*this.mapRowLength+n},t.prototype.FillRule=function(e,t){var n=this,r=e.Descriptor.LeftTokenRange.isSpecific()&&e.Descriptor.RightTokenRange.isSpecific();e.Descriptor.LeftTokenRange.GetTokens().forEach((function(i){e.Descriptor.RightTokenRange.GetTokens().forEach((function(o){var s=n.GetRuleBucketIndex(i,o),c=n.map[s];void 0===c&&(c=n.map[s]=new a),c.AddRule(e,r,t,s)}))}))},t.prototype.GetRule=function(e){var t=this.GetRuleBucketIndex(e.currentTokenSpan.kind,e.nextTokenSpan.kind),n=this.map[t];if(n)for(var r=0,i=n.Rules();r<i.length;r++){var a=i[r];if(a.Operation.Context.InContext(e))return a}},t}();t.RulesMap=n;var r;!function(e){e[e.IgnoreRulesSpecific=0]="IgnoreRulesSpecific",e[e.IgnoreRulesAny=5]="IgnoreRulesAny",e[e.ContextRulesSpecific=10]="ContextRulesSpecific",e[e.ContextRulesAny=15]="ContextRulesAny",e[e.NoContextRulesSpecific=20]="NoContextRulesSpecific",e[e.NoContextRulesAny=25]="NoContextRulesAny"}(r||(r={}));var i=function(){function t(){this.rulesInsertionIndexBitmap=0}return t.prototype.GetInsertionIndex=function(e){for(var t=0,n=0,r=this.rulesInsertionIndexBitmap;n<=e;)t+=31&r,r>>=5,n+=5;return t},t.prototype.IncreaseInsertionIndex=function(t){var n=this.rulesInsertionIndexBitmap>>t&31;n++,e.Debug.assert((31&n)===n,"Adding more rules into the sub-bucket than allowed. Maximum allowed is 32 rules.");var r=this.rulesInsertionIndexBitmap&~(31<<t);r|=n<<t,this.rulesInsertionIndexBitmap=r},t}();t.RulesBucketConstructionState=i;var a=function(){function e(){this.rules=[]}return e.prototype.Rules=function(){return this.rules},e.prototype.AddRule=function(e,t,n,a){var o;o=1===e.Operation.Action?t?r.IgnoreRulesSpecific:r.IgnoreRulesAny:e.Operation.Context.IsAny()?t?r.NoContextRulesSpecific:r.NoContextRulesAny:t?r.ContextRulesSpecific:r.ContextRulesAny;var s=n[a];void 0===s&&(s=n[a]=new i);var c=s.GetInsertionIndex(o);this.rules.splice(c,0,e),s.IncreaseInsertionIndex(o)},e}();t.RulesBucket=a}(e.formatting||(e.formatting={}))}(ts||(ts={})),function(e){!function(t){!function(t){for(var n=[],r=0;r<=142;r++)n.push(r);var i=function(){function e(e){void 0===e&&(e=[]),this.tokens=e}return e.prototype.GetTokens=function(){return this.tokens},e.prototype.Contains=function(e){return this.tokens.indexOf(e)>=0},e.prototype.isSpecific=function(){return!0},e}(),a=function(){function e(e){this.token=e}return e.prototype.GetTokens=function(){return[this.token]},e.prototype.Contains=function(e){return e===this.token},e.prototype.isSpecific=function(){return!0},e}(),o=function(){function e(){}return e.prototype.GetTokens=function(){return n},e.prototype.Contains=function(){return!0},e.prototype.toString=function(){return"[allTokens]"},e.prototype.isSpecific=function(){return!1},e}(),s=function(){function e(e){this.except=e}return e.prototype.GetTokens=function(){var e=this;return n.filter((function(t){return t!==e.except}))},e.prototype.Contains=function(e){return e!==this.except},e.prototype.isSpecific=function(){return!1},e}();!function(t){t.FromToken=function(e){return new a(e)},t.FromTokens=function(e){return new i(e)},t.FromRange=function(t,n,r){void 0===r&&(r=[]);for(var a=[],o=t;o<=n;o++)e.indexOf(r,o)<0&&a.push(o);return new i(a)},t.AnyExcept=function(e){return new s(e)},t.Any=new o,t.AnyIncludingMultilineComments=t.FromTokens(n.concat([3])),t.Keywords=t.FromRange(72,142),t.BinaryOperators=t.FromRange(27,70),t.BinaryKeywordOperators=t.FromTokens([92,93,142,118,126]),t.UnaryPrefixOperators=t.FromTokens([43,44,52,51]),t.UnaryPrefixExpressions=t.FromTokens([8,71,19,21,17,99,94]),t.UnaryPreincrementExpressions=t.FromTokens([71,19,99,94]),t.UnaryPostincrementExpressions=t.FromTokens([71,20,22,94]),t.UnaryPredecrementExpressions=t.FromTokens([71,19,99,94]),t.UnaryPostdecrementExpressions=t.FromTokens([71,20,22,94]),t.Comments=t.FromTokens([2,3]),t.TypeNames=t.FromTokens([71,133,136,122,137,105,119])}(t.TokenRange||(t.TokenRange={}))}(t.Shared||(t.Shared={}))}(e.formatting||(e.formatting={}))}(ts||(ts={})),function(e){!function(t){var n=function(){function n(){this.globalRules=new t.Rules;var e=this.globalRules.HighPriorityCommonRules.concat(this.globalRules.UserConfigurableRules).concat(this.globalRules.LowPriorityCommonRules);this.rulesMap=new t.RulesMap(e)}return n.prototype.getRulesMap=function(){return this.rulesMap},n.prototype.getFormatOptions=function(){return this.options},n.prototype.ensureUpToDate=function(t){this.options&&e.compareDataObjects(this.options,t)||(this.options=e.clone(t))},n}();t.RulesProvider=n}(e.formatting||(e.formatting={}))}(ts||(ts={})),function(e){!function(t){var n,r,i,a;function o(t,n,r){var i=e.findPrecedingToken(t,r);return i&&i.kind===n&&t===i.getEnd()?i:void 0}function s(e){for(var t=e;t&&t.parent&&t.parent.end===e.end&&!c(t.parent,t);)t=t.parent;return t}function c(t,n){switch(t.kind){case 229:case 230:return e.rangeContainsRange(t.members,n);case 233:var r=t.body;return r&&234===r.kind&&e.rangeContainsRange(r.statements,n);case 265:case 207:case 234:return e.rangeContainsRange(t.statements,n);case 260:return e.rangeContainsRange(t.block.statements,n)}return!1}function l(t,n,r,i,a){return t?u({pos:e.getLineStartPositionForPosition(t.getStart(n),n),end:t.end},n,r,i,a):[]}function u(n,r,i,a,o){var s=function(t,n){return function r(i){var a=e.forEachChild(i,(function(r){return e.startEndContainsRange(r.getStart(n),r.end,t)&&r}));if(a){var o=r(a);if(o)return o}return i}(n)}(n,r);return t.getFormattingScanner(r.text,r.languageVariant,function(t,n,r){var i=t.getStart(r);if(i===n.pos&&t.end===n.end)return i;var a=e.findPrecedingToken(n.pos,r);return a?a.end>=n.pos?t.pos:a.end:t.pos}(s,n,r),n.end,(function(c){return d(n,s,t.SmartIndenter.getIndentationForNode(s,n,r,i),function(e,n,r){for(var i,a=-1;e;){var o=r.getLineAndCharacterOfPosition(e.getStart(r)).line;if(-1!==a&&o!==a)break;if(t.SmartIndenter.shouldIndentChildNode(e,i))return n.indentSize;a=o,i=e,e=e.parent}return 0}(s,i,r),c,i,a,o,function(t,n){if(!t.length)return a;var r=t.filter((function(t){return e.rangeOverlapsWithStartEnd(n,t.start,t.start+t.length)})).sort((function(e,t){return e.start-t.start}));if(!r.length)return a;var i=0;return function(t){for(;;){if(i>=r.length)return!1;var n=r[i];if(t.end<=n.start)return!1;if(e.startEndOverlapsWithStartEnd(t.pos,t.end,n.start,n.start+n.length))return!0;i++}};function a(){return!1}}(r.parseDiagnostics,n),r)}))}function d(n,r,i,a,o,s,c,l,u,d){var f,_,m,g,h,y=new t.FormattingContext(d,l,s),v=[];if(o.advance(),o.isOnToken()){var b=d.getLineAndCharacterOfPosition(r.getStart(d)).line,x=b;r.decorators&&(x=d.getLineAndCharacterOfPosition(e.getNonDecoratorTokenPosOfNode(r,d)).line),function r(i,a,c,l,p,_){if(!e.rangeOverlapsWithStartEnd(n,i.getStart(d),i.getEnd()))return;var m=T(i,c,p,_),y=a;e.forEachChild(i,(function(e){b(e,-1,i,m,c,l,!1)}),(function(e){x(e,i,c,m)}));for(;o.isOnToken();){var v=o.readTokenInfo(i);if(v.token.end>i.end)break;k(v,i,m,i)}function b(a,c,l,u,p,f,_,m){var g=a.getStart(d),h=d.getLineAndCharacterOfPosition(g).line,v=h;a.decorators&&(v=d.getLineAndCharacterOfPosition(e.getNonDecoratorTokenPosOfNode(a,d)).line);var b=-1;if(_&&e.rangeContainsRange(n,l)&&-1!==(b=function(n,r,i,a,o){if(e.rangeOverlapsWithStartEnd(a,n,r)||e.rangeContainsStartEnd(a,n,r)){if(-1!==o)return o}else{var c=d.getLineAndCharacterOfPosition(n).line,l=e.getLineStartPositionForPosition(n,d),u=t.SmartIndenter.findFirstNonWhitespaceColumn(l,n,d,s);if(c!==i||n===u){var p=t.SmartIndenter.getBaseIndentation(s);return p>u?p:u}}return-1}(g,a.end,p,n,c))&&(c=b),!e.rangeOverlapsWithStartEnd(n,a.pos,a.end))return a.end<n.pos&&o.skipToEndOf(a),c;if(0===a.getFullWidth())return c;for(;o.isOnToken();){if((x=o.readTokenInfo(i)).token.end>g)break;k(x,i,u,i)}if(!o.isOnToken())return c;if(e.isToken(a)&&10!==a.kind){var x=o.readTokenInfo(a);return e.Debug.assert(x.token.end===a.end,"Token end is child end"),k(x,i,u,a),c}var T=147===a.kind?h:f,C=S(a,h,b,i,u,T);return r(a,y,h,v,C.indentation,C.delta),y=i,m&&177===l.kind&&-1===c&&(c=C.indentation),c}function x(t,n,r,a){e.Debug.assert(e.isNodeArray(t));var s=function(e,t){switch(e.kind){case 152:case 228:case 186:case 151:case 150:case 187:if(e.typeParameters===t)return 27;if(e.parameters===t)return 19;break;case 181:case 182:if(e.typeArguments===t)return 27;if(e.arguments===t)return 19;break;case 159:if(e.typeArguments===t)return 27}return 0}(n,t),c=function(e){switch(e){case 19:return 20;case 27:return 29}return 0}(s),l=a,u=r;if(0!==s)for(;o.isOnToken();){if((f=o.readTokenInfo(n)).token.end>t.pos)break;if(f.token.kind===s){u=d.getLineAndCharacterOfPosition(f.token.pos).line;var p=S(f.token,u,-1,n,a,r);k(f,n,l=T(n,r,p.indentation,p.delta),n)}else k(f,n,a,n)}for(var f,_=-1,m=0;m<t.length;m++){_=b(t[m],_,i,l,u,u,!0,0===m)}0!==c&&(o.isOnToken()&&(f=o.readTokenInfo(n)).token.kind===c&&e.rangeContainsRange(n,f.token)&&k(f,n,l,n))}function k(t,r,i,a){e.Debug.assert(e.rangeContainsRange(r,t.token));var s,c=o.lastTrailingTriviaWasNewLine(),l=!1;t.leadingTrivia&&C(t.leadingTrivia,r,y,i);var p=e.rangeContainsRange(n,t.token),_=d.getLineAndCharacterOfPosition(t.token.pos);if(p){var m=u(t.token),v=f;if(s=E(t.token,_,r,y,i),m)l=!1;else if(void 0!==s)l=s;else{var b=v&&d.getLineAndCharacterOfPosition(v.end).line;l=c&&_.line!==b}}if(t.trailingTrivia&&C(t.trailingTrivia,r,y,i),l){var x=p&&!u(t.token)?i.getIndentationForToken(_.line,t.token.kind,a):-1,k=!0;if(t.leadingTrivia)for(var S=i.getIndentationForComment(t.token.kind,x,a),T=0,w=t.leadingTrivia;T<w.length;T++){var N=w[T],I=e.rangeContainsRange(n,N);switch(N.kind){case 3:I&&A(N,S,!k),k=!1;break;case 2:k&&I&&D(N.pos,S,!1),k=!1;break;case 4:k=!0}}-1!==x&&k&&(D(t.token.pos,x,s),g=_.line,h=x)}o.advance(),y=r}}(r,r,b,x,i,a)}if(!o.isOnToken()){var k=o.getCurrentLeadingTrivia();k&&(C(k,r,r,void 0),function(){var e=f?f.end:n.pos,t=d.getLineAndCharacterOfPosition(e).line,r=d.getLineAndCharacterOfPosition(n.end).line;w(t,r+1,f)}())}return v;function S(e,n,r,i,a,o){var c=r,l=t.SmartIndenter.shouldIndentChildNode(e)?s.indentSize:0;return o===n?(c=n===g?h:a.getIndentation(),l=Math.min(s.indentSize,a.getDelta(e)+l)):-1===c&&(c=t.SmartIndenter.childStartsOnTheSameLineWithElseInIfStatement(i,e,n,d)?a.getIndentation():a.getIndentation()+a.getDelta(e)),{indentation:c,delta:l}}function T(n,r,i,a){return{getIndentationForComment:function(e,t,n){switch(e){case 18:case 22:case 20:return i+o(a,n)}return-1!==t?t:i},getIndentationForToken:function(t,s,c){if(r!==t&&n.decorators&&s===function(t){if(t.modifiers&&t.modifiers.length)return t.modifiers[0].kind;switch(t.kind){case 229:return 75;case 230:return 109;case 228:return 89;case 232:return 232;case 153:return 125;case 154:return 135;case 151:if(t.asteriskToken)return 39;case 149:case 146:return e.getNameOfDeclaration(t).kind}}(n))return i;switch(s){case 17:case 18:case 19:case 20:case 82:case 106:case 57:return i;case 41:case 29:if(251===c.kind||252===c.kind||250===c.kind)return i;break;case 21:case 22:if(172!==c.kind)return i}return r!==t?i+o(a,c):i},getIndentation:function(){return i},getDelta:function(e){return o(a,e)},recomputeIndentation:function(e){n.parent&&t.SmartIndenter.shouldIndentChildNode(n.parent,n)&&(e?i+=s.indentSize:i-=s.indentSize,a=t.SmartIndenter.shouldIndentChildNode(n)?s.indentSize:0)}};function o(e,r){return t.SmartIndenter.nodeWillIndentChild(n,r,!0)?e:0}}function C(t,r,i,a){for(var o=0,s=t;o<s.length;o++){var c=s[o];if(e.isComment(c.kind)&&e.rangeContainsRange(n,c))E(c,d.getLineAndCharacterOfPosition(c.pos),r,i,a)}}function E(e,t,r,i,a){var o;u(e)||(f?o=function(e,t,n,r,i,a,o,l){y.updateContext(r,a,e,n,o);var u,p,f=c.getRulesMap().GetRule(y);f?(!function(e,t,n,r,i){switch(e.Operation.Action){case 1:return;case 8:t.end!==r.pos&&P(t.end,r.pos-t.end);break;case 4:if(1!==e.Flag&&n!==i)return;1!==i-n&&O(t.end,r.pos-t.end,s.newLineCharacter);break;case 2:if(1!==e.Flag&&n!==i)return;1===r.pos-t.end&&32===d.text.charCodeAt(t.end)||O(t.end,r.pos-t.end," ")}}(f,r,i,e,t),10&f.Operation.Action&&t!==i?(p=!1,n.getStart(d)===e.pos&&l.recomputeIndentation(!1)):4&f.Operation.Action&&t===i&&(p=!0,n.getStart(d)===e.pos&&l.recomputeIndentation(!0)),u=!(8&f.Operation.Action)&&1!==f.Flag):u=!0;t!==i&&u&&w(i,t,r);return p}(e,t.line,r,f,m,_,i,a):w(d.getLineAndCharacterOfPosition(n.pos).line,t.line));return f=e,_=r,m=t.line,o}function D(t,n,r){var i=p(n,s);if(r)O(t,0,i);else{var a=d.getLineAndCharacterOfPosition(t),o=e.getStartPositionOfLine(a.line,d);(n!==function(e,t){for(var n=0,r=0;r<t;r++)9===d.text.charCodeAt(e+r)?n+=s.tabSize-n%s.tabSize:n++;return n}(o,a.character)||function(e,t){return e!==d.text.substr(t,e.length)}(i,o))&&O(o,a.character,i)}}function A(n,r,i){var a,o=d.getLineAndCharacterOfPosition(n.pos).line,c=d.getLineAndCharacterOfPosition(n.end).line;if(o!==c){a=[];for(var l=n.pos,u=o;u<c;u++){var f=e.getEndLinePosition(u,d);a.push({pos:l,end:f}),l=e.getStartPositionOfLine(u+1,d)}a.push({pos:l,end:n.end});var _=e.getStartPositionOfLine(o,d),m=t.SmartIndenter.findFirstNonWhitespaceCharacterAndColumn(_,a[0].pos,d,s);if(r!==m.column){var g=0;i&&(g=1,o++);for(var h=r-m.column,y=g;y<a.length;y++,o++){var v=e.getStartPositionOfLine(o,d),b=0===y?m:t.SmartIndenter.findFirstNonWhitespaceCharacterAndColumn(a[y].pos,a[y].end,d,s),x=b.column+h;if(x>0){var k=p(x,s);O(v,b.character,k)}else P(v,b.character)}}}else i||D(n.pos,r,!1)}function w(t,n,r){for(var i=t;i<n;i++){var a=e.getStartPositionOfLine(i,d),o=e.getEndLinePosition(i,d);if(!(r&&(e.isComment(r.kind)||e.isStringOrRegularExpressionOrTemplateLiteral(r.kind))&&r.pos<=o&&r.end>o)){var s=N(a,o);-1!==s&&(e.Debug.assert(s===a||!e.isWhiteSpaceSingleLine(d.text.charCodeAt(s-1))),P(s,o+1-s))}}}function N(t,n){for(var r=n;r>=t&&e.isWhiteSpaceSingleLine(d.text.charCodeAt(r));)r--;return r!==n?r+1:-1}function I(t,n,r){return{span:e.createTextSpan(t,n),newText:r}}function P(e,t){t&&v.push(I(e,t,""))}function O(e,t,n){(t||n)&&v.push(I(e,t,n))}}function p(e,t){if((!r||r.tabSize!==t.tabSize||r.indentSize!==t.indentSize)&&(r={tabSize:t.tabSize,indentSize:t.indentSize},i=a=void 0),t.convertTabsToSpaces){var n=void 0,o=Math.floor(e/t.indentSize),s=e%t.indentSize;return a||(a=[]),void 0===a[o]?(n=d(" ",t.indentSize*o),a[o]=n):n=a[o],s?n+d(" ",s):n}var c=Math.floor(e/t.tabSize),l=e-c*t.tabSize,u=void 0;return i||(i=[]),void 0===i[c]?i[c]=u=d("\t",c):u=i[c],l?u+d(" ",l):u;function d(e,t){for(var n="",r=0;r<t;r++)n+=e;return n}}!function(e){e[e.Unknown=-1]="Unknown"}(n||(n={})),t.formatOnEnter=function(t,n,r,i){var a=n.getLineAndCharacterOfPosition(t).line;if(0===a)return[];for(var o=e.getEndLinePosition(a,n);e.isWhiteSpaceSingleLine(n.text.charCodeAt(o));)o--;return e.isLineBreak(n.text.charCodeAt(o))&&o--,u({pos:e.getStartPositionOfLine(a-1,n),end:o+1},n,i,r,2)},t.formatOnSemicolon=function(e,t,n,r){return l(s(o(e,25,t)),t,r,n,3)},t.formatOnOpeningCurly=function(t,n,r,i){var a=o(t,17,n);if(!a)return[];var c=s(a.parent);return u({pos:e.getLineStartPositionForPosition(c.getStart(n),n),end:t},n,i,r,4)},t.formatOnClosingCurly=function(e,t,n,r){return l(s(o(e,18,t)),t,r,n,5)},t.formatDocument=function(e,t,n){return u({pos:0,end:e.text.length},e,n,t,0)},t.formatSelection=function(t,n,r,i,a){return u({pos:e.getLineStartPositionForPosition(t,r),end:n},r,a,i,1)},t.formatNodeGivenIndentation=function(e,n,r,i,a,o){var s={pos:0,end:n.text.length};return t.getFormattingScanner(n.text,r,s.pos,s.end,(function(t){return d(s,e,i,a,t,o.getFormatOptions(),o,1,(function(e){return!1}),n)}))},t.getRangeOfEnclosingComment=function(t,n,r,i,a,o){if(void 0===a&&(a=e.getTokenAtPosition(t,n,!1)),!(a.getStart(t)<=n&&n<a.getEnd())){void 0===i&&(i=e.findPrecedingToken(n,t));var s=i&&e.getTrailingCommentRanges(t.text,i.end),c=e.getLeadingCommentRangesOfNode(a,t),l=s&&c?s.concat(c):s||c;if(l)for(var u=0,d=l;u<d.length;u++){var p=d[u];if(p.pos<n&&n<p.end||n===p.end&&(2===p.kind||n===t.getFullWidth()))return 3!==p.kind&&r||o&&!o(p)?void 0:p}}},t.getIndentationString=p}(e.formatting||(e.formatting={}))}(ts||(ts={})),function(e){!function(t){!function(n){var r,i;function a(e){return e.baseIndentSize||0}function o(e,t,n,r,i,o){for(var l,u=e.parent;u;){var f=!0;if(n){var _=e.getStart(i);f=_<n.pos||_>n.end}if(f)if(-1!==(y=m(e,i,o)))return y+r;var h=(l=s(u,e,i)).line===t.line||p(u,e,t.line,i);if(f){var y;if(-1!==(y=c(e,u,t,h,i,o)))return y+r;if(-1!==(y=g(e,i,o)))return y+r}k(u,e)&&!h&&(r+=o.indentSize);var v=d(u,e,t.line,i);u=(e=u).parent,t=v?i.getLineAndCharacterOfPosition(e.getStart()):l}return r+a(o)}function s(e,t,n){var r=_(t,n),i=r?r.pos:e.getStart(n);return n.getLineAndCharacterOfPosition(i)}function c(t,n,r,i,a,o){return(e.isDeclaration(t)||e.isStatementButNotDeclaration(t))&&(265===n.kind||!i)?y(r,a,o):-1}function l(t,n,r,i){var a=e.findNextToken(t,n);return a?17===a.kind?1:18===a.kind&&r===u(a,i).line?2:0:0}function u(e,t){return t.getLineAndCharacterOfPosition(e.getStart(t))}function d(t,n,r,i){if(!e.isCallExpression(t)||!e.contains(t.arguments,n))return!1;var a=t.expression.getEnd();return e.getLineAndCharacterOfPosition(i,a).line===r}function p(t,n,r,i){if(211===t.kind&&t.elseStatement===n){var a=e.findChildOfKind(t,82,i);return e.Debug.assert(void 0!==a),u(a,i).line===r}return!1}function f(t,n,r){return t&&e.rangeContainsStartEnd(t,n,r)?t:void 0}function _(e,t){if(e.parent)switch(e.parent.kind){case 159:return f(e.parent.typeArguments,e.getStart(t),e.getEnd());case 178:return e.parent.properties;case 177:return e.parent.elements;case 228:case 186:case 187:case 151:case 150:case 155:case 152:case 161:case 156:var n=e.getStart(t);return f(e.parent.typeParameters,n,e.getEnd())||f(e.parent.parameters,n,e.getEnd());case 229:return f(e.parent.typeParameters,e.getStart(t),e.getEnd());case 182:case 181:n=e.getStart(t);return f(e.parent.typeArguments,n,e.getEnd())||f(e.parent.arguments,n,e.getEnd());case 227:return f(e.parent.declarations,e.getStart(t),e.getEnd());case 241:case 245:return f(e.parent.elements,e.getStart(t),e.getEnd())}}function m(t,n,r){var i,a,o=_(t,n);return o?(i=o,-1!==(a=e.indexOf(i,t))?h(i,a,n,r):-1):-1}function g(t,n,r){if(20===t.kind)return-1;if(t.parent&&e.isCallOrNewExpression(t.parent)&&t.parent.expression!==t){var i=t.parent.expression,a=function(e){for(;;)switch(e.kind){case 181:case 182:case 179:case 180:e=e.expression;break;default:return e}}(i);if(i===a)return-1;var o=n.getLineAndCharacterOfPosition(i.end),s=n.getLineAndCharacterOfPosition(a.end);return o.line===s.line?-1:y(o,n,r)}return-1}function h(t,n,r,i){e.Debug.assert(n>=0&&n<t.length);for(var a=u(t[n],r),o=n-1;o>=0;o--)if(26!==t[o].kind){if(r.getLineAndCharacterOfPosition(t[o].end).line!==a.line)return y(a,r,i);a=u(t[o],r)}return-1}function y(e,t,n){var r=t.getPositionOfLineAndCharacter(e.line,0);return b(r,r+e.character,t,n)}function v(t,n,r,i){for(var a=0,o=0,s=t;s<n;s++){var c=r.text.charCodeAt(s);if(!e.isWhiteSpaceSingleLine(c))break;9===c?o+=i.tabSize+o%i.tabSize:o++,a++}return{column:o,character:a}}function b(e,t,n,r){return v(e,t,n,r).column}function x(e,t,n){var r=t?t.kind:0;switch(e.kind){case 212:case 213:case 215:case 216:case 214:case 211:case 228:case 186:case 151:case 187:case 152:case 153:case 154:return 207!==r;case 244:return 245!==r;case 238:return 239!==r||t.namedBindings&&241!==t.namedBindings.kind;case 249:return 252!==r}return n}function k(e,t){return function(e){switch(e){case 210:case 229:case 199:case 230:case 232:case 231:case 177:case 207:case 234:case 178:case 163:case 172:case 165:case 235:case 258:case 257:case 185:case 179:case 181:case 182:case 208:case 226:case 243:case 219:case 195:case 175:case 174:case 251:case 250:case 256:case 150:case 155:case 156:case 146:case 160:case 161:case 168:case 183:case 191:case 245:case 241:case 246:case 242:case 261:case 149:return!0}return!1}(e.kind)||x(e,t,!1)}!function(e){e[e.Unknown=-1]="Unknown"}(r||(r={})),n.getIndentation=function(r,i,s,c){if(void 0===c&&(c=!1),r>i.text.length)return a(s);if(s.indentStyle===e.IndentStyle.None)return 0;var d=e.findPrecedingToken(r,i),p=t.getRangeOfEnclosingComment(i,r,!0,d||null);if(p){var f=e.getLineAndCharacterOfPosition(i,r).line-1,_=e.getLineAndCharacterOfPosition(i,p.pos).line;if(e.Debug.assert(_>=0),f<=_)return b(e.getStartPositionOfLine(_,i),r,i,s);var y=e.getStartPositionOfLine(f,i),x=v(y,r,i,s),S=x.column,T=x.character;return 0===S?S:42===i.text.charCodeAt(y+T)?S-1:S}if(!d)return a(s);if(e.isStringOrRegularExpressionOrTemplateLiteral(d.kind)&&d.getStart(i)<=r&&r<d.end)return 0;var C,E=i.getLineAndCharacterOfPosition(r).line;if(s.indentStyle===e.IndentStyle.Block){for(var D=r;D>0;){var A=i.text.charCodeAt(D);if(!e.isWhiteSpaceLike(A))break;D--}var w=e.getLineStartPositionForPosition(D,i);return n.findFirstNonWhitespaceColumn(w,D,i,s)}if(26===d.kind&&194!==d.parent.kind&&-1!==(F=function(t,n,r){var i=e.findListItemInfo(t);return i&&i.listItemIndex>0?h(i.list.getChildren(),i.listItemIndex-1,n,r):-1}(d,i,s)))return F;for(var N,I,P=d;P;){if(e.positionBelongsToNode(P,r,i)&&k(P,C)){N=u(P,i);var O=l(d,P,E,i);I=0!==O?c&&2===O?s.indentSize:0:E!==N.line?s.indentSize:0;break}var F;if(-1!==(F=m(P,i,s)))return F;if(-1!==(F=g(P,i,s)))return F+s.indentSize;C=P,P=P.parent}return P?o(P,N,void 0,I,i,s):a(s)},n.getIndentationForNode=function(e,t,n,r){var i=n.getLineAndCharacterOfPosition(e.getStart(n));return o(e,i,t,0,n,r)},n.getBaseIndentation=a,function(e){e[e.Unknown=0]="Unknown",e[e.OpenBrace=1]="OpenBrace",e[e.CloseBrace=2]="CloseBrace"}(i||(i={})),n.isArgumentAndStartLineOverlapsExpressionBeingCalled=d,n.childStartsOnTheSameLineWithElseInIfStatement=p,n.getContainingList=_,n.findFirstNonWhitespaceCharacterAndColumn=v,n.findFirstNonWhitespaceColumn=b,n.nodeWillIndentChild=x,n.shouldIndentChildNode=k}(t.SmartIndenter||(t.SmartIndenter={}))}(e.formatting||(e.formatting={}))}(ts||(ts={})),function(e){!function(t){function n(t){var n=t.__pos;return e.Debug.assert("number"==typeof n),n}function r(t,n){e.Debug.assert("number"==typeof n),t.__pos=n}function i(t){var n=t.__end;return e.Debug.assert("number"==typeof n),n}function a(t,n){e.Debug.assert("number"==typeof n),t.__end=n}var o,s;function c(t,n){return e.skipTrivia(t,n,!1,!0)}function l(t,n,r,i){if(r.useNonAdjustedStartPosition)return n.getFullStart();var a=n.getFullStart(),s=n.getStart(t);if(a===s)return s;var l=e.getLineStartPositionForPosition(a,t);if(e.getLineStartPositionForPosition(s,t)===l)return i===o.Start?s:a;var u=a>0?1:0,d=e.getStartPositionOfLine(e.getLineOfLocalPosition(t,l)+u,t);return d=c(t.text,d),e.getStartPositionOfLine(e.getLineOfLocalPosition(t,d),t)}function u(t,n,r){if(r.useNonAdjustedEndPosition||e.isExpression(n))return n.getEnd();var i=n.getEnd(),a=e.skipTrivia(t.text,i,!0);return a!==i&&e.isLineBreak(t.text.charCodeAt(a-1))?a:i}function d(e,t){return t&&e.parent&&(26===t.kind||25===t.kind&&178===e.parent.kind)}!function(e){e[e.FullStart=0]="FullStart",e[e.Start=1]="Start"}(o=t.Position||(t.Position={})),function(e){e[e.Remove=0]="Remove",e[e.ReplaceWithSingleNode=1]="ReplaceWithSingleNode",e[e.ReplaceWithMultipleNodes=2]="ReplaceWithMultipleNodes"}(s||(s={})),t.getSeparatorCharacter=function(t){return e.tokenToString(t.kind)},t.getAdjustedStartPosition=l,t.getAdjustedEndPosition=u;var p=function(){function t(t,n,r){this.newLine=t,this.rulesProvider=n,this.validator=r,this.changes=[],this.newLineCharacter=e.getNewLineCharacter({newLine:t})}return t.fromContext=function(e){return new t("\n"===e.newLineCharacter?1:0,e.rulesProvider)},t.with=function(e,n){var r=t.fromContext(e);return n(r),r.getChanges()},t.prototype.deleteRange=function(e,t){return this.changes.push({kind:s.Remove,sourceFile:e,range:t}),this},t.prototype.deleteNode=function(e,t,n){void 0===n&&(n={});var r=l(e,t,n,o.FullStart),i=u(e,t,n);return this.changes.push({kind:s.Remove,sourceFile:e,range:{pos:r,end:i}}),this},t.prototype.deleteNodeRange=function(e,t,n,r){void 0===r&&(r={});var i=l(e,t,r,o.FullStart),a=u(e,n,r);return this.changes.push({kind:s.Remove,sourceFile:e,range:{pos:i,end:a}}),this},t.prototype.deleteNodeInList=function(t,n){var r=e.formatting.SmartIndenter.getContainingList(n,t);if(!r)return e.Debug.fail("node is not a list element"),this;var i=e.indexOfNode(r,n);if(i<0)return this;if(1===r.length)return this.deleteNode(t,n),this;if(i!==r.length-1){var a=e.getTokenAtPosition(t,n.end,!1);if(a&&d(n,a)){var s=e.skipTrivia(t.text,l(t,n,{},o.FullStart),!1,!0),c=r[i+1],u=e.skipTrivia(t.text,l(t,c,{},o.FullStart),!1,!0);this.deleteRange(t,{pos:s,end:u})}}else{var p=e.getTokenAtPosition(t,r[i-1].end,!1);p&&d(n,p)&&this.deleteNodeRange(t,p,n)}return this},t.prototype.replaceRange=function(e,t,n,r){return void 0===r&&(r={}),this.changes.push({kind:s.ReplaceWithSingleNode,sourceFile:e,range:t,options:r,node:n}),this},t.prototype.replaceNode=function(e,t,n,r){void 0===r&&(r={});var i=l(e,t,r,o.Start),a=u(e,t,r);return this.replaceWithSingle(e,i,a,n,r)},t.prototype.replaceNodeRange=function(e,t,n,r,i){void 0===i&&(i={});var a=l(e,t,i,o.Start),s=u(e,n,i);return this.replaceWithSingle(e,a,s,r,i)},t.prototype.replaceWithSingle=function(e,t,n,r,i){return this.changes.push({kind:s.ReplaceWithSingleNode,sourceFile:e,options:i,node:r,range:{pos:t,end:n}}),this},t.prototype.replaceWithMultiple=function(e,t,n,r,i){return this.changes.push({kind:s.ReplaceWithMultipleNodes,sourceFile:e,options:i,nodes:r,range:{pos:t,end:n}}),this},t.prototype.replaceNodeWithNodes=function(e,t,n,r){var i=l(e,t,r,o.Start),a=u(e,t,r);return this.replaceWithMultiple(e,i,a,n,r)},t.prototype.replaceNodesWithNodes=function(t,n,r,i){var a=l(t,n[0],i,o.Start),s=u(t,e.lastOrUndefined(n),i);return this.replaceWithMultiple(t,a,s,r,i)},t.prototype.replaceRangeWithNodes=function(e,t,n,r){return this.replaceWithMultiple(e,t.pos,t.end,n,r)},t.prototype.replaceNodeRangeWithNodes=function(e,t,n,r,i){var a=l(e,t,i,o.Start),s=u(e,n,i);return this.replaceWithMultiple(e,a,s,r,i)},t.prototype.insertNodeAt=function(e,t,n,r){return void 0===r&&(r={}),this.changes.push({kind:s.ReplaceWithSingleNode,sourceFile:e,options:r,node:n,range:{pos:t,end:t}}),this},t.prototype.insertNodeBefore=function(e,t,n,r){void 0===r&&(r={});var i=l(e,t,r,o.Start);return this.replaceWithSingle(e,i,i,n,r)},t.prototype.insertNodeAfter=function(t,n,r,i){void 0===i&&(i={}),(e.isStatementButNotDeclaration(n)||149===n.kind||148===n.kind||150===n.kind)&&59!==t.text.charCodeAt(n.end-1)&&this.changes.push({kind:s.ReplaceWithSingleNode,sourceFile:t,options:{},range:{pos:n.end,end:n.end},node:e.createToken(25)});var a=u(t,n,i);return this.replaceWithSingle(t,a,a,r,i)},t.prototype.insertNodeInListAfter=function(t,n,r){var i=e.formatting.SmartIndenter.getContainingList(n,t);if(!i)return e.Debug.fail("node is not a list element"),this;var a=e.indexOfNode(i,n);if(a<0)return this;var o=n.getEnd();if(a!==i.length-1){var l=e.getTokenAtPosition(t,n.end,!1);if(l&&d(n,l)){var u=e.getLineAndCharacterOfPosition(t,c(t.text,i[a+1].getFullStart())),p=e.getLineAndCharacterOfPosition(t,l.end),f=void 0,_=void 0;p.line===u.line?(_=l.end,f=function(e){for(var t="",n=0;n<e;n++)t+=" ";return t}(u.character-p.character)):_=e.getStartPositionOfLine(u.line,t),this.changes.push({kind:s.ReplaceWithSingleNode,sourceFile:t,range:{pos:_,end:i[a+1].getStart(t)},node:r,options:{prefix:f,suffix:""+e.tokenToString(l.kind)+t.text.substring(l.end,i[a+1].getStart(t))}})}}else{var m=n.getStart(t),g=e.getLineStartPositionForPosition(m,t),h=void 0,y=!1;if(1===i.length)h=26;else{var v=e.findPrecedingToken(n.pos,t);h=d(n,v)?v.kind:26,y=e.getLineStartPositionForPosition(i[a-1].getStart(t),t)!==g}if(function(t,n){for(var r=n;r<t.length;){var i=t.charCodeAt(r);if(!e.isWhiteSpaceSingleLine(i))return 47===i;r++}return!1}(t.text,n.end)&&(y=!0),y){this.changes.push({kind:s.ReplaceWithSingleNode,sourceFile:t,range:{pos:o,end:o},node:e.createToken(h),options:{}});var b=e.formatting.SmartIndenter.findFirstNonWhitespaceColumn(g,m,t,this.rulesProvider.getFormatOptions()),x=e.skipTrivia(t.text,o,!0,!1);x!==o&&e.isLineBreak(t.text.charCodeAt(x-1))&&x--,this.changes.push({kind:s.ReplaceWithSingleNode,sourceFile:t,range:{pos:x,end:x},node:r,options:{indentation:b,prefix:this.newLineCharacter}})}else this.changes.push({kind:s.ReplaceWithSingleNode,sourceFile:t,range:{pos:o,end:o},node:r,options:{prefix:e.tokenToString(h)+" "}})}return this},t.prototype.getChanges=function(){for(var n=this,r=e.createMap(),i=0,a=this.changes;i<a.length;i++){var o=a[i],s=r.get(o.sourceFile.path);s||r.set(o.sourceFile.path,s=[]),s.push(o)}var c=[];return r.forEach((function(e){for(var r=e[0].sourceFile,i={fileName:r.fileName,textChanges:[]},a=0,o=t.normalize(e);a<o.length;a++){var s=o[a];i.textChanges.push({span:n.computeSpan(s,r),newText:n.computeNewText(s,r)})}c.push(i)})),c},t.prototype.computeSpan=function(t,n){return e.createTextSpanFromBounds(t.range.pos,t.range.end)},t.prototype.computeNewText=function(t,n){var r=this;if(t.kind===s.Remove)return"";var i,a=t.options||{},o=t.range.pos,c=e.getLineStartPositionForPosition(o,n)===o;t.kind===s.ReplaceWithMultipleNodes?i=t.nodes.map((function(e){return r.getFormattedTextOfNode(e,n,o,a)})).join(t.options.nodeSeparator):(e.Debug.assert(t.kind===s.ReplaceWithSingleNode,"change.kind === ReplaceWithSingleNode"),i=this.getFormattedTextOfNode(t.node,n,o,a));return i=c||void 0!==a.indentation?i:i.replace(/^\s+/,""),(a.prefix||"")+i+(a.suffix||"")},t.prototype.getFormattedTextOfNode=function(t,n,r,i){var a=function(t,n,r){var i={newLine:r,target:n&&n.languageVersion},a=new g(e.getNewLineCharacter(i));return e.createPrinter(i,a).writeNode(4,t,n,a),{text:a.getText(),node:_(t)}}(t,n,this.newLine);this.validator&&this.validator(a);var o=this.rulesProvider.getFormatOptions(),s=e.getLineStartPositionForPosition(r,n)===r;return function(t,n,r,i,a){var o=e.computeLineStarts(t.text),s={text:t.text,lineMap:o,getLineAndCharacterOfPosition:function(t){return e.computeLineAndCharacterOfPosition(o,t)}},c=e.formatting.formatNodeGivenIndentation(t.node,s,n.languageVariant,r,i,a);return f(t.text,c)}(a,n,void 0!==i.indentation?i.indentation:!1!==i.useIndentationFromFile?e.formatting.SmartIndenter.getIndentation(r,n,o,s||i.prefix===this.newLineCharacter):0,void 0!==i.delta?i.delta:e.formatting.SmartIndenter.shouldIndentChildNode(t)&&o.indentSize||0,this.rulesProvider)},t.normalize=function(t){for(var n=e.stableSort(t,(function(e,t){return e.range.pos-t.range.pos})),r=0;r<n.length-2;r++)e.Debug.assert(n[r].range.end<=n[r+1].range.pos);return n},t}();function f(t,n){for(var r=n.length-1;r>=0;r--){var i=n[r];t=""+t.substring(0,i.span.start)+i.newText+t.substring(e.textSpanEnd(i.span))}return t}function _(t){var r=e.visitEachChild(t,_,e.nullTransformationContext,m,_),a=e.nodeIsSynthesized(r)?r:Object.create(r);return a.pos=n(t),a.end=i(t),a}function m(t,r,a,o,s){var c=e.visitNodes(t,r,a,o,s);if(!c)return c;var l=c===t?e.createNodeArray(c.slice(0)):c;return l.pos=n(t),l.end=i(t),l}t.ChangeTracker=p,t.applyChanges=f;var g=function(){function t(t){var n=this;this.lastNonTriviaPosition=0,this.writer=e.createTextWriter(t),this.onEmitNode=function(e,t,i){t&&r(t,n.lastNonTriviaPosition),i(e,t),t&&a(t,n.lastNonTriviaPosition)},this.onBeforeEmitNodeArray=function(e){e&&r(e,n.lastNonTriviaPosition)},this.onAfterEmitNodeArray=function(e){e&&a(e,n.lastNonTriviaPosition)},this.onBeforeEmitToken=function(e){e&&r(e,n.lastNonTriviaPosition)},this.onAfterEmitToken=function(e){e&&a(e,n.lastNonTriviaPosition)}}return t.prototype.setLastNonTriviaPosition=function(t,n){if(n||!function(t){return e.skipTrivia(t,0)===t.length}(t)){this.lastNonTriviaPosition=this.writer.getTextPos();for(var r=0;e.isWhiteSpaceLike(t.charCodeAt(t.length-r-1));)r++;this.lastNonTriviaPosition-=r}},t.prototype.write=function(e){this.writer.write(e),this.setLastNonTriviaPosition(e,!1)},t.prototype.writeTextOfNode=function(e,t){this.writer.writeTextOfNode(e,t)},t.prototype.writeLine=function(){this.writer.writeLine()},t.prototype.increaseIndent=function(){this.writer.increaseIndent()},t.prototype.decreaseIndent=function(){this.writer.decreaseIndent()},t.prototype.getText=function(){return this.writer.getText()},t.prototype.rawWrite=function(e){this.writer.rawWrite(e),this.setLastNonTriviaPosition(e,!1)},t.prototype.writeLiteral=function(e){this.writer.writeLiteral(e),this.setLastNonTriviaPosition(e,!0)},t.prototype.getTextPos=function(){return this.writer.getTextPos()},t.prototype.getLine=function(){return this.writer.getLine()},t.prototype.getColumn=function(){return this.writer.getColumn()},t.prototype.getIndent=function(){return this.writer.getIndent()},t.prototype.isAtStartOfLine=function(){return this.writer.isAtStartOfLine()},t.prototype.reset=function(){this.writer.reset(),this.lastNonTriviaPosition=0},t}()}(e.textChanges||(e.textChanges={}))}(ts||(ts={})),function(e){!function(t){var n=[];t.registerCodeFix=function(t){e.forEach(t.errorCodes,(function(e){var r=n[e];r||(r=[],n[e]=r),r.push(t)}))},t.getSupportedErrorCodes=function(){return Object.keys(n)},t.getFixes=function(t){var r=n[t.errorCode],i=[];return e.forEach(r,(function(e){var n=e.getCodeActions(t);if(n&&n.length>0)for(var r=0,a=n;r<a.length;r++){var o=a[r];void 0===o?t.host.log("Action for error code "+t.errorCode+" added an invalid action entry; please log a bug"):i.push(o)}})),i}}(e.codefix||(e.codefix={}))}(ts||(ts={})),function(e){var t,n;t=e.refactor||(e.refactor={}),n=e.createMap(),t.registerRefactor=function(e){n.set(e.name,e)},t.getApplicableRefactors=function(t){return e.flatMapIter(n.values(),(function(e){return t.cancellationToken&&t.cancellationToken.isCancellationRequested()?void 0:e.getAvailableActions(t)}))},t.getEditsForRefactor=function(e,t,r){var i=n.get(t);return i&&i.getEditsForAction(e,r)},e.getRefactorContextLength=function(e){return void 0===e.endPosition?0:e.endPosition-e.startPosition}}(ts||(ts={})),function(e){!function(t){t.registerCodeFix({errorCodes:[e.Diagnostics._0_accepts_too_few_arguments_to_be_used_as_a_decorator_here_Did_you_mean_to_call_it_first_and_write_0.code],getCodeActions:function(t){var n=t.sourceFile,r=e.getTokenAtPosition(n,t.span.start,!1),i=e.getAncestor(r,147);e.Debug.assert(!!i,"Expected position to be owned by a decorator.");var a=e.createCall(i.expression,void 0,void 0),o=e.textChanges.ChangeTracker.fromContext(t);return o.replaceNode(n,i.expression,a),[{description:e.getLocaleSpecificMessage(e.Diagnostics.Call_decorator_expression),changes:o.getChanges()}]}})}(e.codefix||(e.codefix={}))}(ts||(ts={})),function(e){!function(t){t.registerCodeFix({errorCodes:[e.Diagnostics.Cannot_access_0_1_because_0_is_a_type_but_not_a_namespace_Did_you_mean_to_retrieve_the_type_of_the_property_1_in_0_with_0_1.code],getCodeActions:function(t){var n=t.sourceFile,r=e.getTokenAtPosition(n,t.span.start,!1),i=e.getAncestor(r,143);if(e.Debug.assert(!!i,"Expected position to be owned by a qualified name."),e.isIdentifier(i.left)){var a=i.left.getText(n),o=i.right.getText(n),s=e.createIndexedAccessTypeNode(e.createTypeReferenceNode(i.left,void 0),e.createLiteralTypeNode(e.createLiteral(o))),c=e.textChanges.ChangeTracker.fromContext(t);return c.replaceNode(n,i,s),[{description:e.formatStringFromArgs(e.getLocaleSpecificMessage(e.Diagnostics.Rewrite_as_the_indexed_access_type_0),[a+'["'+o+'"]']),changes:c.getChanges()}]}}})}(e.codefix||(e.codefix={}))}(ts||(ts={})),function(e){!function(t){t.registerCodeFix({errorCodes:[e.Diagnostics.Class_0_incorrectly_implements_interface_1.code],getCodeActions:function(n){var r=n.sourceFile,i=n.span.start,a=e.getTokenAtPosition(r,i,!1),o=n.program.getTypeChecker(),s=e.getContainingClass(a);if(!s)return;for(var c=e.getOpenBraceOfClassLike(s,r),l=o.getTypeAtLocation(s),u=e.getClassImplementsHeritageClauseElements(s),d=!!o.getIndexTypeOfType(l,1),p=!!o.getIndexTypeOfType(l,0),f=[],_=0,m=u;_<m.length;_++){var g=m[_],h=o.getTypeAtLocation(g),y=o.getPropertiesOfType(h).filter((function(t){return!(8&e.getModifierFlags(t.valueDeclaration))})),v=[];x(h,1,d,v),x(h,0,p,v),v=v.concat(t.createMissingMemberNodes(s,y,o));var b=e.formatStringFromArgs(e.getLocaleSpecificMessage(e.Diagnostics.Implement_interface_0),[g.getText()]);v.length>0&&k(f,v,b)}return f;function x(e,t,n,r){if(!n){var i=o.getIndexInfoOfType(e,t);if(i){var a=o.indexInfoToIndexSignatureDeclaration(i,t,s);r.push(a)}}}function k(e,r,i){e.push({description:i,changes:t.newNodesToChanges(r,c,n)})}}})}(e.codefix||(e.codefix={}))}(ts||(ts={})),function(e){!function(t){t.registerCodeFix({errorCodes:[e.Diagnostics.Property_0_does_not_exist_on_type_1.code,e.Diagnostics.Property_0_does_not_exist_on_type_1_Did_you_mean_2.code],getCodeActions:function(n){var r=n.sourceFile,i=n.span.start,a=e.getTokenAtPosition(r,i,!1);if(71!==a.kind)return;if(!e.isPropertyAccessExpression(a.parent))return;var o,s=a.getText(r),c=!1;if(99===a.parent.expression.kind){var l=e.getThisContainer(a,!1);if(!e.isClassElement(l))return;o=l.parent,c=o&&e.hasModifier(l,32)}else{var u=n.program.getTypeChecker(),d=a.parent.expression,p=u.getTypeAtLocation(d);if(32768&p.flags){var f=p.symbol;32&f.flags&&(o=f.declarations&&f.declarations[0],p!==u.getDeclaredTypeOfSymbol(f)&&(c=!0))}}if(!o||!e.isClassLike(o))return;var _=e.getSourceFileOfNode(o),m=e.getOpenBraceOfClassLike(o,_);return e.isInJavaScriptFile(_)?function(t,r){var i,a=g(!1);a&&(i=[a]);if(r){if(199===t.kind)return i;var o=t.name.getText(),c=e.createStatement(e.createAssignment(e.createPropertyAccess(e.createIdentifier(o),s),e.createIdentifier("undefined"))),l=e.textChanges.ChangeTracker.fromContext(n);l.insertNodeAfter(_,t,c,{prefix:n.newLineCharacter,suffix:n.newLineCharacter});var u={description:e.formatStringFromArgs(e.getLocaleSpecificMessage(e.Diagnostics.Initialize_static_property_0),[s]),changes:l.getChanges()};return(i||(i=[])).push(u),i}var d=e.getFirstConstructorWithBody(t);if(!d)return i;var p=e.createStatement(e.createAssignment(e.createPropertyAccess(e.createThis(),s),e.createIdentifier("undefined"))),f=e.textChanges.ChangeTracker.fromContext(n);f.insertNodeBefore(_,d.body.getLastToken(),p,{suffix:n.newLineCharacter});var m={description:e.formatStringFromArgs(e.getLocaleSpecificMessage(e.Diagnostics.Initialize_property_0_in_the_constructor),[s]),changes:f.getChanges()};return(i||(i=[])).push(m),i}(o,c):function(t,r){var i,o,c=g(!0);c&&(i=[c]);if(194===a.parent.parent.kind){var l=a.parent.parent,u=a.parent===l.left?l.right:l.left,d=n.program.getTypeChecker(),p=d.getWidenedType(d.getBaseTypeOfLiteralType(d.getTypeAtLocation(u)));o=d.typeToTypeNode(p,t)}o=o||e.createKeywordTypeNode(119);var f=e.createProperty(void 0,r?[e.createToken(115)]:void 0,s,void 0,o,void 0),h=e.textChanges.ChangeTracker.fromContext(n);h.insertNodeAfter(_,m,f,{suffix:n.newLineCharacter});var y=r?e.Diagnostics.Declare_static_property_0:e.Diagnostics.Declare_property_0;if(i=e.append(i,{description:e.formatStringFromArgs(e.getLocaleSpecificMessage(y),[s]),changes:h.getChanges()}),!r){var v=e.createKeywordTypeNode(136),b=e.createParameter(void 0,void 0,void 0,"x",void 0,v,void 0),x=e.createIndexSignature(void 0,void 0,[b],o),k=e.textChanges.ChangeTracker.fromContext(n);k.insertNodeAfter(_,m,x,{suffix:n.newLineCharacter}),i.push({description:e.formatStringFromArgs(e.getLocaleSpecificMessage(e.Diagnostics.Add_index_signature_for_property_0),[s]),changes:k.getChanges()})}return i}(o,c);function g(r){if(181===a.parent.parent.kind){var i=a.parent.parent,o=t.createMethodFromCallExpression(i,s,r,c),l=e.textChanges.ChangeTracker.fromContext(n);l.insertNodeAfter(_,m,o,{suffix:n.newLineCharacter});var u=c?e.Diagnostics.Declare_static_method_0:e.Diagnostics.Declare_method_0;return{description:e.formatStringFromArgs(e.getLocaleSpecificMessage(u),[s]),changes:l.getChanges()}}}}})}(e.codefix||(e.codefix={}))}(ts||(ts={})),function(e){!function(t){t.registerCodeFix({errorCodes:[e.Diagnostics.Property_0_does_not_exist_on_type_1_Did_you_mean_2.code,e.Diagnostics.Cannot_find_name_0_Did_you_mean_1.code],getCodeActions:function(t){var n,r=t.sourceFile,i=e.getTokenAtPosition(r,t.span.start,!1),a=t.program.getTypeChecker();if(e.isPropertyAccessExpression(i.parent)&&i.parent.name===i){e.Debug.assert(71===i.kind);var o=a.getTypeAtLocation(i.parent.expression);n=a.getSuggestionForNonexistentProperty(i,o)}else{var s=e.getMeaningFromLocation(i);n=a.getSuggestionForNonexistentSymbol(i,e.getTextOfNode(i),function(e){var t=0;4&e&&(t|=1920);2&e&&(t|=793064);1&e&&(t|=107455);return t}(s))}if(n)return[{description:e.formatStringFromArgs(e.getLocaleSpecificMessage(e.Diagnostics.Change_spelling_to_0),[n]),changes:[{fileName:r.fileName,textChanges:[{span:{start:i.getStart(),length:i.getWidth()},newText:n}]}]}]}})}(e.codefix||(e.codefix={}))}(ts||(ts={})),function(e){!function(t){function n(t,n){var r=e.getPackageName(n).packageName;if(t.isKnownTypesPackageName(r)){var i=e.getTypesPackageName(r);return{description:"Install '"+i+"'",changes:[],commands:[{type:"install package",packageName:i}]}}}t.registerCodeFix({errorCodes:[e.Diagnostics.Could_not_find_a_declaration_file_for_module_0_1_implicitly_has_an_any_type.code],getCodeActions:function(t){var r=t.sourceFile,i=t.span.start,a=e.getTokenAtPosition(r,i,!1);if(!e.isStringLiteral(a))throw e.Debug.fail();var o=n(t.host,a.text);return o&&[o]}}),t.tryGetCodeActionForInstallPackageTypes=n}(e.codefix||(e.codefix={}))}(ts||(ts={})),function(e){!function(t){function n(n){var i=n.sourceFile,a=n.span.start,o=e.getTokenAtPosition(i,a,!1),s=n.program.getTypeChecker();if(e.isClassLike(o.parent)){var c=o.parent,l=e.getClassExtendsHeritageClauseElement(c),u=s.getTypeAtLocation(l),d=s.getPropertiesOfType(u).filter(r),p=t.createMissingMemberNodes(c,d,s),f=t.newNodesToChanges(p,e.getOpenBraceOfClassLike(c,i),n);if(f&&f.length>0)return[{description:e.getLocaleSpecificMessage(e.Diagnostics.Implement_inherited_abstract_class),changes:f}]}}function r(t){var n=t.getDeclarations();e.Debug.assert(!!(n&&n.length>0));var r=e.getModifierFlags(n[0]);return!(8&r||!(128&r))}t.registerCodeFix({errorCodes:[e.Diagnostics.Non_abstract_class_0_does_not_implement_inherited_abstract_member_1_from_class_2.code],getCodeActions:n}),t.registerCodeFix({errorCodes:[e.Diagnostics.Non_abstract_class_expression_does_not_implement_inherited_abstract_member_0_from_class_1.code],getCodeActions:n})}(e.codefix||(e.codefix={}))}(ts||(ts={})),function(e){!function(t){t.registerCodeFix({errorCodes:[e.Diagnostics.super_must_be_called_before_accessing_this_in_the_constructor_of_a_derived_class.code],getCodeActions:function(t){var n=t.sourceFile,r=e.getTokenAtPosition(n,t.span.start,!1);if(99===r.kind){var i=e.getContainingFunction(r),a=function t(n){if(210===n.kind&&e.isSuperCall(n.expression))return n;if(e.isFunctionLike(n))return;return e.forEachChild(n,t)}(i.body);if(a){if(a.expression&&181===a.expression.kind)for(var o=a.expression.arguments,s=0;s<o.length;s++)if(o[s].expression===r)return;var c=e.textChanges.ChangeTracker.fromContext(t);return c.insertNodeAfter(n,e.getOpenBrace(i,n),a,{suffix:t.newLineCharacter}),c.deleteNode(n,a),[{description:e.getLocaleSpecificMessage(e.Diagnostics.Make_super_call_the_first_statement_in_the_constructor),changes:c.getChanges()}]}}}})}(e.codefix||(e.codefix={}))}(ts||(ts={})),function(e){!function(t){t.registerCodeFix({errorCodes:[e.Diagnostics.Constructors_for_derived_classes_must_contain_a_super_call.code],getCodeActions:function(t){var n=t.sourceFile,r=e.getTokenAtPosition(n,t.span.start,!1);if(123===r.kind){var i=e.textChanges.ChangeTracker.fromContext(t),a=e.createStatement(e.createCall(e.createSuper(),void 0,e.emptyArray));return i.insertNodeAfter(n,e.getOpenBrace(r.parent,n),a,{suffix:t.newLineCharacter}),[{description:e.getLocaleSpecificMessage(e.Diagnostics.Add_missing_super_call),changes:i.getChanges()}]}}})}(e.codefix||(e.codefix={}))}(ts||(ts={})),function(e){!function(t){t.registerCodeFix({errorCodes:[e.Diagnostics.Cannot_extend_an_interface_0_Did_you_mean_implements.code],getCodeActions:function(t){var n=t.sourceFile,r=t.span.start,i=e.getTokenAtPosition(n,r,!1),a=e.getContainingClass(i);if(71===i.kind&&e.isClassLike(a)){var o=a.heritageClauses;if(o&&o.length>0){var s=o[0].getFirstToken();if(s&&85===s.kind){var c=e.textChanges.ChangeTracker.fromContext(t);c.replaceNode(n,s,e.createToken(108));for(var l=1;l<o.length;l++){var u=o[l].getFirstToken();u&&c.replaceNode(n,u,e.createToken(26))}return[{description:e.getLocaleSpecificMessage(e.Diagnostics.Change_extends_to_implements),changes:c.getChanges()}]}}}}})}(e.codefix||(e.codefix={}))}(ts||(ts={})),function(e){!function(t){t.registerCodeFix({errorCodes:[e.Diagnostics.Cannot_find_name_0_Did_you_mean_the_instance_member_this_0.code],getCodeActions:function(t){var n=t.sourceFile,r=e.getTokenAtPosition(n,t.span.start,!1);if(71===r.kind){var i=e.textChanges.ChangeTracker.fromContext(t);return i.replaceNode(n,r,e.createPropertyAccess(e.createThis(),r)),[{description:e.getLocaleSpecificMessage(e.Diagnostics.Add_this_to_unresolved_variable),changes:i.getChanges()}]}}})}(e.codefix||(e.codefix={}))}(ts||(ts={})),function(e){!function(t){t.registerCodeFix({errorCodes:[e.Diagnostics._0_is_declared_but_its_value_is_never_read.code,e.Diagnostics.Property_0_is_declared_but_its_value_is_never_read.code],getCodeActions:function(t){var n=t.sourceFile,r=t.span.start,i=e.getTokenAtPosition(n,r,!1);switch(21===i.kind&&(i=e.getTokenAtPosition(n,r+1,!1)),i.kind){case 71:return function(t){var r=t.parent;switch(r.kind){case 226:return function(t,n){switch(n.parent.parent.kind){case 214:var r=n.parent.parent.initializer;return[1===r.declarations.length?c(r):u(n)];case 216:var i=n.parent.parent;return e.Debug.assert(227===i.initializer.kind),[p(i.initializer.declarations[0],e.createObjectLiteral()),o(t)];case 215:return[o(t)];default:var a=n.parent.parent;return 1===a.declarationList.declarations.length?[c(a)]:[u(n)]}}(t,r);case 145:var i=r.parent.typeParameters;if(1===i.length){var f=e.getTokenAtPosition(n,i.pos-1,!1),_=e.getTokenAtPosition(n,i.end,!1);return e.Debug.assert(27===f.kind),e.Debug.assert(29===_.kind),[d(f,_)]}return[u(r)];case 146:return[1===r.parent.parameters.length?c(r):u(r),o(t)];case 237:return[c(e.getAncestor(t,237))];case 242:var m=r.parent;return 1===m.elements.length?s(m):[u(r)];case 239:var g=r;if(g.namedBindings){var h=g.name.getStart(n);return(_=e.getTokenAtPosition(n,g.name.end,!1))&&26===_.kind?[l({pos:h,end:e.skipTrivia(n.text,_.end,!1,!0)})]:[c(g.name)]}return[c(e.getAncestor(g,238))];case 240:return s(r);default:return a()}}(i);case 149:case 240:return[c(i.parent)];default:return a()}function a(){return e.isDeclarationName(i)?[c(i.parent)]:e.isLiteralComputedPropertyDeclarationName(i)?[c(i.parent.parent)]:void 0}function o(t){var r=t.getStart(n,!1);return{description:e.formatStringFromArgs(e.getLocaleSpecificMessage(e.Diagnostics.Prefix_0_with_an_underscore),{0:i.getText()}),changes:[{fileName:n.path,textChanges:[{span:{start:r,length:0},newText:"_"}]}]}}function s(t){if(t.parent.name){var r=e.getTokenAtPosition(n,t.pos-1,!1);return r&&26===r.kind?[l({pos:r.getStart(),end:t.end})]:void 0}return[c(e.getAncestor(t,238))]}function c(r){return f(e.textChanges.ChangeTracker.fromContext(t).deleteNode(n,r))}function l(r){return f(e.textChanges.ChangeTracker.fromContext(t).deleteRange(n,r))}function u(r){return f(e.textChanges.ChangeTracker.fromContext(t).deleteNodeInList(n,r))}function d(r,i){return f(e.textChanges.ChangeTracker.fromContext(t).deleteNodeRange(n,r,i))}function p(r,i){return f(e.textChanges.ChangeTracker.fromContext(t).replaceNode(n,r,i))}function f(t){return{description:e.formatStringFromArgs(e.getLocaleSpecificMessage(e.Diagnostics.Remove_declaration_for_Colon_0),{0:i.getText()}),changes:t.getChanges()}}}})}(e.codefix||(e.codefix={}))}(ts||(ts={})),function(e){!function(t){function n(t,n,r,i){return{description:e.formatStringFromArgs(e.getLocaleSpecificMessage(e.Diagnostics.Change_0_to_1),[r,i]),changes:[{fileName:n,textChanges:[{span:{start:t.getStart(),length:t.getWidth()},newText:i}]}]}}t.registerCodeFix({errorCodes:[e.Diagnostics.JSDoc_types_can_only_be_used_inside_documentation_comments.code],getCodeActions:function(t){var r=t.sourceFile,i=e.getTokenAtPosition(r,t.span.start,!1),a=e.findAncestor(i,(function(e){return 202===e.kind||155===e.kind||156===e.kind||228===e.kind||153===e.kind||157===e.kind||172===e.kind||151===e.kind||150===e.kind||146===e.kind||149===e.kind||148===e.kind||154===e.kind||231===e.kind||184===e.kind||226===e.kind}));if(!a)return;var o=t.program.getTypeChecker(),s=a.type;if(!s)return;var c=e.getTextOfNode(s),l=o.getTypeFromTypeNode(s),u=[n(s,r.fileName,c,o.typeToString(l,void 0,8))];if(270===s.kind){var d=o.typeToString(o.getNullableType(l,2048),void 0,8);u.push(n(s,r.fileName,c,d))}return u}})}(e.codefix||(e.codefix={}))}(ts||(ts={})),function(e){!function(t){var n,r=e.textChanges.ChangeTracker;t.registerCodeFix({errorCodes:[e.Diagnostics.Cannot_find_name_0.code,e.Diagnostics.Cannot_find_name_0_Did_you_mean_1.code,e.Diagnostics.Cannot_find_namespace_0.code,e.Diagnostics._0_refers_to_a_UMD_global_but_the_current_file_is_a_module_Consider_adding_an_import_instead.code],getCodeActions:function(t){var n=function(t){var n=!!t.host.useCaseSensitiveFileNames&&t.host.useCaseSensitiveFileNames(),r=t.program.getTypeChecker(),i=e.getTokenAtPosition(t.sourceFile,t.span.start,!1);return{host:t.host,newLineCharacter:t.newLineCharacter,rulesProvider:t.rulesProvider,sourceFile:t.sourceFile,checker:r,compilerOptions:t.program.getCompilerOptions(),cachedImportDeclarations:[],getCanonicalFileName:e.createGetCanonicalFileName(n),symbolName:i.getText(),symbolToken:i}}(t);return t.errorCode===e.Diagnostics._0_refers_to_a_UMD_global_but_the_current_file_is_a_module_Consider_adding_an_import_instead.code?function(t){var n,r,i=t.checker,a=t.symbolToken,s=i.getSymbolAtLocation(a);2097152&s.flags?(n=i.getAliasedSymbol(s),r=t.symbolName):e.isJsxOpeningLikeElement(a.parent)&&a.parent.tagName===a?r=(n=i.getAliasedSymbol(i.resolveName(i.getJsxNamespace(),a.parent.tagName,107455))).name:e.Debug.fail("Either the symbol or the JSX namespace should be a UMD global if we got here");return o(n,__assign({},t,{symbolName:r,kind:2}))}(n):function(t,n,r){var a=t.sourceFile,s=t.checker,c=t.symbolName,l=t.symbolToken;e.Debug.assert("default"!==c);var u=new i,d=e.getMeaningFromLocation(l);return m(s,n,(function(n){if(n!==a.symbol){r.throwIfCancellationRequested();var i=s.tryGetMemberInModuleExports("default",n);if(i){var l=e.getLocalSymbolForExportDefault(i);if(l&&l.escapedName===c&&_(l,d)){var p=e.getUniqueSymbolId(l,s);u.addActions(p,o(n,__assign({},t,{kind:1})))}}var f=s.tryGetMemberInModuleExportsAndProperties(c,n);if(f&&_(f,d)){p=e.getUniqueSymbolId(f,s);u.addActions(p,o(n,__assign({},t,{kind:0})))}}})),u.getAllActions()}(n,t.program.getSourceFiles(),t.cancellationToken)}}),function(e){e[e.Better=0]="Better",e[e.Equal=1]="Equal",e[e.Worse=2]="Worse"}(n||(n={}));var i=function(){function t(){this.symbolIdToActionMap=[]}return t.prototype.addAction=function(e,t){var n=this.symbolIdToActionMap[e];if(n)if("CodeChange"!==t.kind){for(var r=[],i=0,a=this.symbolIdToActionMap[e];i<a.length;i++){var o=a[i];if("CodeChange"!==o.kind)switch(this.compareModuleSpecifiers(o.moduleSpecifier,t.moduleSpecifier)){case 0:if("NewImport"===t.kind)return;case 1:r.push(o);break;case 2:continue}else r.push(o)}r.push(t),this.symbolIdToActionMap[e]=r}else n.push(t);else this.symbolIdToActionMap[e]=[t]},t.prototype.addActions=function(e,t){for(var n=0,r=t;n<r.length;n++){var i=r[n];this.addAction(e,i)}},t.prototype.getAllActions=function(){var t=[];for(var n in this.symbolIdToActionMap)t=e.concatenate(t,this.symbolIdToActionMap[n]);return t},t.prototype.compareModuleSpecifiers=function(t,n){if(t===n)return 1;if(0===n.indexOf(t))return 0;if(0===t.indexOf(n))return 2;if(e.isExternalModuleNameRelative(t)&&e.isExternalModuleNameRelative(n)){var r=new RegExp(e.directorySeparator,"g"),i=(t.match(r)||[]).length,a=(n.match(r)||[]).length;return i<a?0:i===a?1:2}return 1},t}();function a(t,n,r,i,a){return{description:e.formatMessage.apply(void 0,[void 0,t].concat(n)),changes:r,kind:i,moduleSpecifier:a}}function o(t,n){var i=function(t,n,r,i){var a=r.imports;void 0===i&&(i=[]);var o=e.getUniqueSymbolId(t,n),s=i[o];s||(s=i[o]=e.mapDefined(a,(function(r){return n.getSymbolAtLocation(r)===t?function(t){var n=t.parent;switch(n.kind){case 238:return n;case 248:return n.parent;default:return void e.Debug.assert(244===n.kind)}}(r):void 0})));return s}(t,n.checker,n.sourceFile,n.cachedImportDeclarations),o=[];if(n.symbolToken)for(var _=0,m=i;_<m.length;_++){var g=s(m[_]);g&&o.push(f(g.text,n,n.symbolToken))}return o.push(function(t,n,i){var o=e.firstDefined(i,(function(t){if(238===t.kind&&t.importClause){var i=function(t,n){var i=t.symbolName,a=t.sourceFile,o=t.kind,s=n.name,c=n.namedBindings;switch(o){case 1:return s?void 0:r.with(t,(function(t){return t.replaceNode(a,n,e.createImportClause(e.createIdentifier(i),c))}));case 0:var l=e.createImportSpecifier(void 0,e.createIdentifier(i));return c&&241===c.kind&&0!==c.elements.length?r.with(t,(function(e){return e.insertNodeInListAfter(a,c.elements[c.elements.length-1],l)})):!c||241===c.kind&&0===c.elements.length?r.with(t,(function(t){return t.replaceNode(a,n,e.createImportClause(s,e.createNamedImports([l])))})):void 0;case 2:return c?void 0:r.with(t,(function(t){return t.replaceNode(a,n,e.createImportClause(s,e.createNamespaceImport(e.createIdentifier(i))))}));default:e.Debug.assertNever(o)}}(n,t.importClause);if(i){var o=e.stripQuotes(t.moduleSpecifier.getText());return a(e.Diagnostics.Add_0_to_existing_import_declaration_from_1,[n.symbolName,o],i,"InsertingIntoExistingImport",o)}}}));if(o)return o;var s=e.firstDefined(i,p)||function(t,n,r,i,a){var o=n.valueDeclaration.getSourceFile().fileName,s=e.getDirectoryPath(t.fileName);return function(t){var n=t.valueDeclaration;if(e.isModuleDeclaration(n)&&e.isStringLiteral(n.name))return n.name.text}(n)||function(t,n,r,i){var a=e.getEffectiveTypeRoots(t,n);return a&&e.firstDefined(a,(function(t){var n=e.toPath(t,void 0,r);if(e.startsWith(i,n))return l(i.substring(n.length+1))}))}(r,a,i,o)||function(t,n,r,i,a){if(e.getEmitModuleResolutionKind(t)!==e.ModuleResolutionKind.NodeJs)return;var o=function(e){var t,n=0,r=0,i=0,a=0;!function(e){e[e.BeforeNodeModules=0]="BeforeNodeModules",e[e.NodeModules=1]="NodeModules",e[e.Scope=2]="Scope",e[e.PackageContent=3]="PackageContent"}(t||(t={}));var o=0,s=0,c=0;for(;s>=0;)switch(o=s,s=e.indexOf("/",o+1),c){case 0:e.indexOf("/node_modules/",o)===o&&(n=o,r=s,c=1);break;case 1:case 2:1===c&&"@"===e.charAt(o+1)?c=2:(i=s,c=3);break;case 3:c=e.indexOf("/node_modules/",o)===o?1:3}return a=o,c>1?{topLevelNodeModulesIndex:n,topLevelPackageNameIndex:r,packageRootIndex:i,fileNameIndex:a}:void 0}(n);if(!o)return;var s=c(n);return s=l(s),e.getPackageNameFromAtTypesDirectory(s);function c(t){var n=t.substring(0,o.packageRootIndex),a=e.combinePaths(n,"package.json");if(r.fileExists(a)){var s=JSON.parse(r.readFile(a));if(s){var c=s.typings||s.types||s.main;if(c)if(e.toPath(c,n,i)===i(t))return n}}var l=e.removeFileExtension(t);return"/index"===i(l.substring(o.fileNameIndex))?l.substring(0,o.fileNameIndex):l}function l(e){var t=e.substring(0,o.topLevelNodeModulesIndex);return 0===a.indexOf(t)?e.substring(o.topLevelPackageNameIndex+1):d(e,a,i)}}(r,o,a,i,s)||function(t,n,r){if(!t.baseUrl)return;var i=u(n,t.baseUrl,r);if(!i)return;var a=e.removeFileExtension(i);if(i=l(i),t.paths)for(var o in t.paths)for(var s=0,c=t.paths[o];s<c.length;s++){var d=c[s],p=d.indexOf("*");if(0!==p||1!==d.length)if(-1!==p){var f=d.substr(0,p),_=d.substr(p+1);if(i.length>=f.length+_.length&&e.startsWith(i,f)&&e.endsWith(i,_)){var m=i.substr(f.length,i.length-_.length);return o.replace("*",m)}}else if(d===i||d===a)return o}return i}(r,o,i)||r.rootDirs&&function(t,n,r,i){var a=c(n,t,i);if(void 0===a)return;var o=c(r,t,i),s=void 0!==o?d(a,o,i):a;return e.removeFileExtension(s)}(r.rootDirs,o,s,i)||e.removeFileExtension(d(o,s,i))}(n.sourceFile,t,n.compilerOptions,n.getCanonicalFileName,n.host);return function(t,n){var i=t.kind,o=t.sourceFile,s=t.newLineCharacter,c=t.symbolName,l=e.findLast(o.statements,e.isAnyImportSyntax),u=e.stripQuotes(n),d=e.createImportDeclaration(void 0,void 0,function(t,n){var r=e.createIdentifier(n);switch(t){case 1:return e.createImportClause(r,void 0);case 2:return e.createImportClause(void 0,e.createNamespaceImport(r));case 0:return e.createImportClause(void 0,e.createNamedImports([e.createImportSpecifier(void 0,r)]));default:e.Debug.assertNever(t)}}(i,c),function(t,n){var r=e.createLiteral(n),i=e.firstOrUndefined(t.imports);return r.singleQuote=!!i&&!e.isStringDoubleQuoted(i,t),r}(o,u)),p=r.with(t,(function(t){l?t.insertNodeAfter(o,l,d,{suffix:s}):t.insertNodeAt(o,e.getSourceFileImportLocation(o),d,{suffix:""+s+s})}));return a(e.Diagnostics.Import_0_from_1,[c,u],p,"NewImport",u)}(n,s)}(t,n,i)),o}function s(e){if(238===e.kind){var t=e.importClause&&e.importClause.namedBindings;return t&&240===t.kind?t.name:void 0}return e.name}function c(t,n,r){return e.firstDefined(n,(function(e){return u(t,e,r)}))}function l(t){return t=e.removeFileExtension(t),e.endsWith(t,"/index")&&(t=t.substr(0,t.length-6)),t}function u(t,n,r){var i=e.getRelativePathToDirectoryOrUrl(n,t,n,r,!1);return e.isRootedDiskPath(i)||e.startsWith(i,"..")?void 0:i}function d(t,n,r){var i=e.getRelativePathToDirectoryOrUrl(n,t,n,r,!1);return e.pathIsRelative(i)?i:"./"+i}function p(t){var n=238===t.kind?t.moduleSpecifier:248===t.moduleReference.kind?t.moduleReference.expression:void 0;return n&&e.isStringLiteral(n)?n.text:void 0}function f(t,n,i){var o=n.symbolName,s=n.sourceFile;return a(e.Diagnostics.Change_0_to_1,[o,t+"."+o],r.with(n,(function(n){return n.replaceNode(s,i,e.createPropertyAccess(e.createIdentifier(t),o))})),"CodeChange",void 0)}function _(t,n){var r=t.declarations;return e.some(r,(function(t){return!!(e.getMeaningFromDeclaration(t)&n)}))}function m(t,n,r){for(var i=0,a=t.getAmbientModules();i<a.length;i++){r(a[i])}for(var o=0,s=n;o<s.length;o++){var c=s[o];e.isExternalOrCommonJsModule(c)&&r(c.symbol)}}!function(e){e[e.Named=0]="Named",e[e.Default=1]="Default",e[e.Namespace=2]="Namespace"}(t.ImportKind||(t.ImportKind={})),t.getCodeActionForImport=o,t.forEachExternalModule=m}(e.codefix||(e.codefix={}))}(ts||(ts={})),function(e){!function(t){var n;function r(t,n,r){var i=e.getLineAndCharacterOfPosition(t,n).line,a=e.getStartPositionOfLine(i,t),o=e.getFirstNonSpaceCharacterPosition(t.text,a);if(!e.isInComment(t,o)&&!e.isInString(t,o)&&!e.isInTemplateString(t,o)){var s=e.getTouchingToken(t,o,!1),c=e.getLeadingCommentRangesOfNode(s,t);if(!c||!c.length||c[0].pos>=o)return{span:{start:o,length:0},newText:"// @ts-ignore"+r}}return{span:{start:n,length:0},newText:(n===o?"":r)+"// @ts-ignore"+r}}t.registerCodeFix({errorCodes:(n=e.Diagnostics,Object.keys(n).filter((function(t){return n[t]&&n[t].category===e.DiagnosticCategory.Error})).map((function(e){return n[e].code}))),getCodeActions:function(t){var n=t.sourceFile,i=t.program,a=t.newLineCharacter,o=t.span;if(!e.isInJavaScriptFile(n)||!e.isCheckJsEnabledForFile(n,i.getCompilerOptions()))return;return[{description:e.getLocaleSpecificMessage(e.Diagnostics.Ignore_this_error_message),changes:[{fileName:n.fileName,textChanges:[r(n,o.start,a)]}]},{description:e.getLocaleSpecificMessage(e.Diagnostics.Disable_checking_for_this_file),changes:[{fileName:n.fileName,textChanges:[{span:{start:n.checkJsDirective?n.checkJsDirective.pos:0,length:n.checkJsDirective?n.checkJsDirective.end-n.checkJsDirective.pos:0},newText:"// @ts-nocheck"+a}]}]}]}})}(e.codefix||(e.codefix={}))}(ts||(ts={})),function(e){!function(t){function n(t,n,o){var s=t.getDeclarations();if(s&&s.length){var c=s[0],l=e.getSynthesizedClone(e.getNameOfDeclaration(c)),u=function(t){if(4&t)return e.createToken(114);if(16&t)return e.createToken(113);return}(e.getModifierFlags(c)),d=u?e.createNodeArray([u]):void 0,p=o.getWidenedType(o.getTypeOfSymbolAtLocation(t,n)),f=!!(16777216&t.flags);switch(c.kind){case 153:case 154:case 148:case 149:var _=o.typeToTypeNode(p,n);return e.createProperty(void 0,d,l,f?e.createToken(55):void 0,_,void 0);case 150:case 151:var m=o.getSignaturesOfType(p,0);if(!e.some(m))return;if(1===s.length)return e.Debug.assert(1===m.length),b(m[0],n,a());for(var g=[],h=0;h<m.length;h++){(y=b(m[h],n))&&g.push(y)}if(s.length>m.length){var y;(y=b(o.getSignatureFromDeclaration(s[s.length-1]),n,a()))&&g.push(y)}else{e.Debug.assert(s.length===m.length);var v=function(t,n,a,o){for(var s=t[0],c=t[0].minArgumentCount,l=!1,u=0;u<t.length;u++){var d=t[u];c=Math.min(d.minArgumentCount,c),d.hasRestParameter&&(l=!0),d.parameters.length>=s.parameters.length&&(!d.hasRestParameter||s.hasRestParameter)&&(s=d)}var p=s.parameters.length-(s.hasRestParameter?1:0),f=s.parameters.map((function(e){return e.name})),_=r(p,f,c,!0);if(l){var m=e.createArrayTypeNode(e.createKeywordTypeNode(119)),g=e.createParameter(void 0,void 0,e.createToken(24),f[p]||"rest",p>=c?e.createToken(55):void 0,m,void 0);_.push(g)}return i(o,n,a,void 0,_,void 0)}(m,l,f,d);g.push(v)}return g;default:return}}function b(t,n,r){var i=o.signatureToSignatureDeclaration(t,151,n,e.NodeBuilderFlags.SuppressAnyReturnType);return i&&(i.decorators=void 0,i.modifiers=d,i.name=l,i.questionToken=f?e.createToken(55):void 0,i.body=r),i}}function r(t,n,r,i){for(var a=[],o=0;o<t;o++){var s=e.createParameter(void 0,void 0,void 0,n&&n[o]||"arg"+o,void 0!==r&&o>=r?e.createToken(55):void 0,i?e.createKeywordTypeNode(119):void 0,void 0);a.push(s)}return a}function i(t,n,r,i,o,s){return e.createMethod(void 0,t,void 0,n,r?e.createToken(55):void 0,i,o,s,a())}function a(){return e.createBlock([e.createThrow(e.createNew(e.createIdentifier("Error"),void 0,[e.createLiteral("Method not implemented.")]))],!0)}t.newNodesToChanges=function(t,n,r){for(var i=r.sourceFile,a=e.textChanges.ChangeTracker.fromContext(r),o=0,s=t;o<s.length;o++){var c=s[o];a.insertNodeAfter(i,n,c,{suffix:r.newLineCharacter})}var l=a.getChanges();return e.some(l)?(e.Debug.assert(1===l.length),[{fileName:l[0].fileName,textChanges:[{span:l[0].textChanges[0].span,newText:l[0].textChanges.reduce((function(e,t){return e+t.newText}),"")}]}]):l},t.createMissingMemberNodes=function(e,t,r){for(var i=e.symbol.members,a=[],o=0,s=t.filter((function(e){return!i.has(e.escapedName)}));o<s.length;o++){var c=n(s[o],e,r);c&&(Array.isArray(c)?a=a.concat(c):a.push(c))}return a},t.createMethodFromCallExpression=function(t,n,i,o){var s,c=r(t.arguments.length,void 0,void 0,i);if(i)for(var l=e.length(t.typeArguments),u=0;u<l;u++){var d=l<8?String.fromCharCode(84+u):"T"+u,p=e.createTypeParameterDeclaration(d,void 0,void 0);(s||(s=[])).push(p)}return e.createMethod(void 0,o?[e.createToken(115)]:void 0,void 0,n,void 0,s,c,i?e.createKeywordTypeNode(119):void 0,a())},t.createStubbedMethod=i}(e.codefix||(e.codefix={}))}(ts||(ts={})),function(e){!function(t){var n;t.registerCodeFix({errorCodes:[e.Diagnostics.Variable_0_implicitly_has_type_1_in_some_locations_where_its_type_cannot_be_determined.code,e.Diagnostics.Variable_0_implicitly_has_an_1_type.code,e.Diagnostics.Parameter_0_implicitly_has_an_1_type.code,e.Diagnostics.Rest_parameter_0_implicitly_has_an_any_type.code,e.Diagnostics.Property_0_implicitly_has_type_any_because_its_get_accessor_lacks_a_return_type_annotation.code,e.Diagnostics._0_which_lacks_return_type_annotation_implicitly_has_an_1_return_type.code,e.Diagnostics.Property_0_implicitly_has_type_any_because_its_set_accessor_lacks_a_parameter_type_annotation.code,e.Diagnostics.Member_0_implicitly_has_an_1_type.code],getCodeActions:function(t){var r,i=t.sourceFile,a=t.program,o=t.span.start,s=t.errorCode,c=t.cancellationToken,l=e.getTokenAtPosition(i,o,!1);if(e.isInJavaScriptFile(l))return;switch(l.kind){case 71:case 24:case 114:case 112:case 113:case 131:break;default:return}var u=e.getContainingFunction(l),d=a.getTypeChecker();switch(s){case e.Diagnostics.Member_0_implicitly_has_an_1_type.code:case e.Diagnostics.Variable_0_implicitly_has_type_1_in_some_locations_where_its_type_cannot_be_determined.code:return p(l.parent);case e.Diagnostics.Variable_0_implicitly_has_an_1_type.code:return function(e){var t=d.getSymbolAtLocation(e);return t&&t.valueDeclaration&&p(t.valueDeclaration)}(l);case e.Diagnostics.Parameter_0_implicitly_has_an_1_type.code:if(e.isSetAccessor(u))return f(u);case e.Diagnostics.Rest_parameter_0_implicitly_has_an_any_type.code:return function(t){if(!e.isIdentifier(t.name)||!function(e){switch(e.kind){case 228:case 151:case 152:return!0;case 186:return!!e.name}return!1}(u))return;var r=function(e){switch(e.kind){case 152:case 186:case 228:case 151:var t=152===e.kind?v(e,i,123):e.name;if(t)return n.inferTypeForParametersFromReferences(m(t),e,d,c)}}(u)||e.map(u.parameters,(function(t){return e.isIdentifier(t.name)&&g(t.name)}));if(!r)return;var a=e.zipWith(u.parameters,r,(function(e,t){if(t&&!e.type&&!e.initializer){var n=y(t,u);return n?{span:{start:e.end,length:0},newText:": "+n}:void 0}})).filter((function(e){return!!e}));return a.length?[{description:e.formatStringFromArgs(e.getLocaleSpecificMessage(e.Diagnostics.Infer_parameter_types_from_usage),[t.name.getText()]),changes:[{fileName:i.fileName,textChanges:a}]}]:void 0}(l.parent);case e.Diagnostics.Property_0_implicitly_has_type_any_because_its_get_accessor_lacks_a_return_type_annotation.code:case e.Diagnostics._0_which_lacks_return_type_annotation_implicitly_has_an_1_return_type.code:return e.isGetAccessor(u)?function(t){if(!e.isIdentifier(t.name))return;var n=g(t.name),r=n&&y(n,u);if(!r)return;var a=v(t,i,20);return _(t.name.getText(),a.getEnd(),": "+r)}(u):void 0;case e.Diagnostics.Property_0_implicitly_has_type_any_because_its_set_accessor_lacks_a_parameter_type_annotation.code:return e.isSetAccessor(u)?f(u):void 0}return;function p(t){if(e.isIdentifier(t.name)){var n=g(t.name),r=n&&y(n,t);if(r)return _(t.name.getText(),t.name.getEnd(),": "+r)}}function f(t){var n=t.parameters[0];if(n&&e.isIdentifier(t.name)&&e.isIdentifier(n.name)){var r=g(t.name)||g(n.name),i=r&&y(r,u);if(i)return _(t.name.getText(),n.name.getEnd(),": "+i)}}function _(t,n,r){return[{description:e.formatStringFromArgs(e.getLocaleSpecificMessage(e.Diagnostics.Infer_type_of_0_from_usage),[t]),changes:[{fileName:i.fileName,textChanges:[{span:{start:n,length:0},newText:r}]}]}]}function m(t){var n=e.FindAllReferences.findReferencedSymbols(a,c,a.getSourceFiles(),t.getSourceFile(),t.getStart());return e.Debug.assert(!!n,"Found no references!"),e.Debug.assert(1===n.length,"Found more references than expected"),e.map(n[0].references,(function(t){return e.getTokenAtPosition(a.getSourceFile(t.fileName),t.textSpan.start,!1)}))}function g(e){return n.inferTypeFromReferences(m(e),d,c)}function h(){if(!r){var t="",n=!0,i=function(e){return t+=e};r={string:function(){return n?t:void 0},writeKeyword:i,writeOperator:i,writePunctuation:i,writeSpace:i,writeStringLiteral:i,writeParameter:i,writeProperty:i,writeSymbol:i,writeLine:function(){return t+=" "},increaseIndent:e.noop,decreaseIndent:e.noop,clear:function(){t="",n=!0},trackSymbol:function(e,t,r){0!==d.isSymbolAccessible(e,t,r,!1).accessibility&&(n=!1)},reportInaccessibleThisError:function(){n=!1},reportPrivateInBaseOfClassExpression:function(){n=!1}}}return r.clear(),r}function y(e,t){var n=h();return d.getSymbolDisplayBuilder().buildTypeDisplay(e,n,t),n.string()}function v(e,t,n){for(var r=0,i=e.getChildren(t);r<i.length;r++){var a=i[r];if(a.kind===n)return a}}}}),function(t){function n(t,i,a){for(;e.isRightSideOfQualifiedNameOrPropertyAccess(t);)t=t.parent;switch(t.parent.kind){case 193:a.isNumber=!0;break;case 192:!function(e,t){switch(e.operator){case 43:case 44:case 38:case 52:t.isNumber=!0;break;case 37:t.isNumberOrString=!0}}(t.parent,a);break;case 194:!function(t,n,r,i){switch(n.operatorToken.kind){case 40:case 39:case 41:case 42:case 45:case 46:case 47:case 48:case 49:case 50:case 60:case 62:case 61:case 63:case 64:case 68:case 69:case 70:case 65:case 67:case 66:case 38:case 27:case 30:case 29:case 31:var a=r.getTypeAtLocation(n.left===t?n.right:n.left);272&a.flags?s(i,a):i.isNumber=!0;break;case 59:case 37:var o=r.getTypeAtLocation(n.left===t?n.right:n.left);272&o.flags?s(i,o):84&o.flags?i.isNumber=!0:262178&o.flags?i.isString=!0:i.isNumberOrString=!0;break;case 58:case 32:case 34:case 35:case 33:s(i,r.getTypeAtLocation(n.left===t?n.right:n.left));break;case 92:t===n.left&&(i.isString=!0);break;case 54:t!==n.left||226!==t.parent.parent.kind&&!e.isAssignmentExpression(t.parent.parent,!0)||s(i,r.getTypeAtLocation(n.right))}}(t,t.parent,i,a);break;case 257:case 258:!function(e,t,n){s(n,t.getTypeAtLocation(e.parent.parent.expression))}(t.parent,i,a);break;case 181:case 182:t.parent.expression===t?function(e,t,r){var i={argumentTypes:[],returnType:{}};if(e.arguments)for(var a=0,o=e.arguments;a<o.length;a++){var s=o[a];i.argumentTypes.push(t.getTypeAtLocation(s))}n(e,t,i.returnType),181===e.kind?(r.callContexts||(r.callContexts=[])).push(i):(r.constructContexts||(r.constructContexts=[])).push(i)}(t.parent,i,a):r(t,i,a);break;case 179:!function(t,r,i){var a=e.escapeLeadingUnderscores(t.name.text);i.properties||(i.properties=e.createUnderscoreEscapedMap());var o=i.properties.get(a)||{};n(t,r,o),i.properties.set(a,o)}(t.parent,i,a);break;case 180:!function(e,t,r,i){if(t===e.argumentExpression)return void(i.isNumberOrString=!0);var a=r.getTypeAtLocation(e),o={};n(e,r,o),84&a.flags?i.numberIndexContext=o:i.stringIndexContext=o}(t.parent,t,i,a);break;default:return r(t,i,a)}}function r(t,n,r){e.isPartOfExpression(t)&&s(r,n.getContextualType(t))}function i(t,n){if(t.isNumberOrString&&!t.isNumber&&!t.isString)return n.getUnionType([n.getNumberType(),n.getStringType()]);if(t.isNumber)return n.getNumberType();if(t.isString)return n.getStringType();if(t.candidateTypes)return n.getWidenedType(n.getUnionType(e.map(t.candidateTypes,(function(e){return n.getBaseTypeOfLiteralType(e)})),!0));if(t.properties&&c(t.properties.get("then"))){var r=a(0,t.properties.get("then").callContexts,!1,n).getCallSignatures().map((function(e){return e.getReturnType()}));return n.createPromiseType(r.length?n.getUnionType(r,!0):n.getAnyType())}if(t.properties&&c(t.properties.get("push")))return n.createArrayType(a(0,t.properties.get("push").callContexts,!1,n));if(t.properties||t.callContexts||t.constructContexts||t.numberIndexContext||t.stringIndexContext){var s=e.createUnderscoreEscapedMap(),l=[],u=[],d=void 0,p=void 0;if(t.properties&&t.properties.forEach((function(e,t){var r=n.createSymbol(4,t);r.type=i(e,n)||n.getAnyType(),s.set(t,r)})),t.callContexts)for(var f=0,_=t.callContexts;f<_.length;f++){var m=_[f];l.push(o(m,n))}if(t.constructContexts)for(var g=0,h=t.constructContexts;g<h.length;g++){var y=h[g];u.push(o(y,n))}return t.numberIndexContext&&(p=n.createIndexInfo(i(t.numberIndexContext,n),!1)),t.stringIndexContext&&(d=n.createIndexInfo(i(t.stringIndexContext,n),!1)),n.createAnonymousType(void 0,s,l,u,d,p)}}function a(t,n,r,i){var a=[];if(n)for(var o=0,s=n;o<s.length;o++){var c=s[o];c.argumentTypes.length>t&&(r?a=e.concatenate(a,e.map(c.argumentTypes.slice(t),(function(e){return i.getBaseTypeOfLiteralType(e)}))):a.push(i.getBaseTypeOfLiteralType(c.argumentTypes[t])))}if(a.length){var l=i.getWidenedType(i.getUnionType(a,!0));return r?i.createArrayType(l):l}}function o(t,n){for(var r=[],a=0;a<t.argumentTypes.length;a++){var o=n.createSymbol(1,e.escapeLeadingUnderscores("arg"+a));o.type=n.getWidenedType(n.getBaseTypeOfLiteralType(t.argumentTypes[a])),r.push(o)}var s=i(t.returnType,n)||n.getVoidType();return n.createSignature(void 0,void 0,void 0,r,s,void 0,t.argumentTypes.length,!1,!1)}function s(e,t){!t||1&t.flags||8192&t.flags||(e.candidateTypes||(e.candidateTypes=[])).push(t)}function c(e){return e&&e.callContexts}t.inferTypeFromReferences=function(e,t,r){for(var a={},o=0,s=e;o<s.length;o++){var c=s[o];r.throwIfCancellationRequested(),n(c,t,a)}return i(a,t)},t.inferTypeForParametersFromReferences=function(t,r,i,a){if(r.parameters){for(var o={},s=0,c=t;s<c.length;s++){var l=c[s];a.throwIfCancellationRequested(),n(l,i,o)}var u=152===r.kind?o.constructContexts:o.callContexts;if(u){for(var d=[],p=0;p<r.parameters.length;p++){for(var f=[],_=e.isRestParameter(r.parameters[p]),m=0,g=u;m<g.length;m++){var h=g[m];h.argumentTypes.length>p&&(_?f=e.concatenate(f,e.map(h.argumentTypes.slice(p),(function(e){return i.getBaseTypeOfLiteralType(e)}))):f.push(i.getBaseTypeOfLiteralType(h.argumentTypes[p])))}if(f.length){var y=i.getWidenedType(i.getUnionType(f,!0));d[p]=_?i.createArrayType(y):y}}return d}}}}(n||(n={}))}(e.codefix||(e.codefix={}))}(ts||(ts={})),function(e){!function(t){!function(n){var r="annotate",i={name:"Annotate with type from JSDoc",description:e.Diagnostics.Annotate_with_type_from_JSDoc.message,getEditsForAction:function(n,i){if(r!==i)return e.Debug.fail("actionName !== action: annotate !== "+i);var a=e.getTokenAtPosition(n.file,n.startPosition,!1),c=e.findAncestor(a,o);if(!c||c.type)return;var l=e.getJSDocType(c);if(e.isFunctionLikeDeclaration(c)&&(e.getJSDocReturnType(c)||c.parameters.some((function(t){return!!e.getJSDocType(t)})))||l&&146===c.kind)return function(t){var n=t.file,r=e.getTokenAtPosition(n,t.startPosition,!1),i=e.findAncestor(r,e.isFunctionLikeDeclaration),a=e.textChanges.ChangeTracker.fromContext(t),o=function(t){var n=e.getEffectiveTypeParameterDeclarations(t,!0),r=t.parameters.map((function(t){return e.createParameter(t.decorators,t.modifiers,t.dotDotDotToken,t.name,t.questionToken,s(e.getEffectiveTypeAnnotationNode(t,!0)),t.initializer)})),i=s(e.getEffectiveReturnTypeNode(t,!0));switch(t.kind){case 228:return e.createFunctionDeclaration(t.decorators,t.modifiers,t.asteriskToken,t.name,n,r,i,t.body);case 152:return e.createConstructor(t.decorators,t.modifiers,r,t.body);case 186:return e.createFunctionExpression(t.modifiers,t.asteriskToken,t.name,n,r,i,t.body);case 187:return e.createArrowFunction(t.modifiers,n,r,i,t.equalsGreaterThanToken,t.body);case 151:return e.createMethod(t.decorators,t.modifiers,t.asteriskToken,t.name,t.questionToken,n,r,i,t.body);case 153:return e.createGetAccessor(t.decorators,t.modifiers,t.name,t.parameters,i,t.body);case 154:return e.createSetAccessor(t.decorators,t.modifiers,t.name,r,t.body);default:return e.Debug.assertNever(t,"Unexpected SyntaxKind: "+t.kind)}}(i);return e.suppressLeadingAndTrailingTrivia(o),a.replaceRange(n,{pos:i.getStart(),end:i.end},o),{edits:a.getChanges(),renameFilename:void 0,renameLocation:void 0}}(n);if(l)return function(t){var n=t.file,r=e.getTokenAtPosition(n,t.startPosition,!1),i=e.findAncestor(r,o),a=e.getJSDocType(i);if(!i||!a||i.type)return e.Debug.fail("!decl || !jsdocType || decl.type: !"+i+" || !"+a+" || "+i.type);var c=e.textChanges.ChangeTracker.fromContext(t),l=function(t,n){switch(t.kind){case 226:return e.createVariableDeclaration(t.name,n,t.initializer);case 148:return e.createPropertySignature(t.modifiers,t.name,t.questionToken,n,t.initializer);case 149:return e.createProperty(t.decorators,t.modifiers,t.name,t.questionToken,n,t.initializer);default:return e.Debug.fail("Unexpected SyntaxKind: "+t.kind)}}(i,s(a));return e.suppressLeadingAndTrailingTrivia(l),c.replaceRange(n,{pos:i.getStart(),end:i.end},l),{edits:c.getChanges(),renameFilename:void 0,renameLocation:void 0}}(n);e.Debug.assert(!!t,"No applicable refactor found.")},getAvailableActions:function(t){if(e.isInJavaScriptFile(t.file))return;var n=e.getTokenAtPosition(t.file,t.startPosition,!1);if(a(e.findAncestor(n,o)))return[{name:i.name,description:i.description,actions:[{description:i.description,name:r}]}]}};function a(t){return!!t&&(e.isFunctionLikeDeclaration(t)?t.parameters.some(a)||!t.type&&!!e.getJSDocReturnType(t):!t.type&&!!e.getJSDocType(t))}function o(t){return e.isFunctionLikeDeclaration(t)||226===t.kind||146===t.kind||148===t.kind||149===t.kind}function s(t){if(void 0!==t)switch(t.kind){case 268:case 269:return e.createTypeReferenceNode("any",e.emptyArray);case 272:return function(t){return e.createUnionTypeNode([e.visitNode(t.type,s),e.createTypeReferenceNode("undefined",e.emptyArray)])}(t);case 271:return s(t.type);case 270:return function(t){return e.createUnionTypeNode([e.visitNode(t.type,s),e.createTypeReferenceNode("null",e.emptyArray)])}(t);case 274:return function(t){return e.createArrayTypeNode(e.visitNode(t.type,s))}(t);case 273:return function(t){var n=t.parameters&&t.parameters.map(s);return e.createFunctionTypeNode(e.emptyArray,n,t.type)}(t);case 146:return function(t){var n=t.parent.parameters.indexOf(t),r=274===t.type.kind&&n===t.parent.parameters.length-1,i=t.name||(r?"rest":"arg"+n),a=r?e.createToken(24):t.dotDotDotToken;return e.createParameter(t.decorators,t.modifiers,a,i,t.questionToken,e.visitNode(t.type,s),t.initializer)}(t);case 159:return function(t){var n=t.typeName,r=t.typeArguments;if(e.isIdentifier(t.typeName)){if(e.isJSDocIndexSignature(t))return function(t){var n=e.createParameter(void 0,void 0,void 0,133===t.typeArguments[0].kind?"n":"s",void 0,e.createTypeReferenceNode(133===t.typeArguments[0].kind?"number":"string",[]),void 0),r=e.createTypeLiteralNode([e.createIndexSignature(void 0,void 0,[n],t.typeArguments[1])]);return e.setEmitFlags(r,1),r}(t);var i=t.typeName.text;switch(t.typeName.text){case"String":case"Boolean":case"Object":case"Number":i=i.toLowerCase();break;case"array":case"date":case"promise":i=i[0].toUpperCase()+i.slice(1)}n=e.createIdentifier(i),r="Array"!==i&&"Promise"!==i||t.typeArguments?e.visitNodes(t.typeArguments,s):e.createNodeArray([e.createTypeReferenceNode("any",e.emptyArray)])}return e.createTypeReferenceNode(n,r)}(t);default:var n=e.visitEachChild(t,s,void 0);return e.setEmitFlags(n,1),n}}t.registerRefactor(i)}(t.annotateWithTypeFromJSDoc||(t.annotateWithTypeFromJSDoc={}))}(e.refactor||(e.refactor={}))}(ts||(ts={})),function(e){!function(t){!function(n){var r="convert",i={name:"Convert to ES2015 class",description:e.Diagnostics.Convert_function_to_an_ES2015_class.message,getEditsForAction:function(t,n){if(r!==n)return;var i=t.file,o=a(t),s=t.rulesProvider.getFormatOptions().newLineCharacter,c=[],l=[];if(!(19&o.flags))return;var u,d,p=o.valueDeclaration,f=e.textChanges.ChangeTracker.fromContext(t);switch(p.kind){case 228:u=p,g(p),d=function(t){var n=h(o);t.body&&n.unshift(e.createConstructor(void 0,void 0,t.parameters,t.body));var r=v(t,84);return e.createClassDeclaration(void 0,r,t.name,void 0,void 0,n)}(p);break;case 226:u=p.parent.parent,1===p.parent.declarations.length?g(u):g(p,!0),d=function(t){var n=t.initializer;if(!n||186!==n.kind)return;if(71!==t.name.kind)return;var r=h(n.symbol);n.body&&r.unshift(e.createConstructor(void 0,void 0,n.parameters,n.body));var i=v(u,84);return e.createClassDeclaration(void 0,i,t.name,void 0,void 0,r)}(p)}if(!d)return;f.insertNodeAfter(i,u,d,{suffix:s});for(var _=0,m=l;_<m.length;_++){(0,m[_])()}return{edits:f.getChanges(),renameFilename:void 0,renameLocation:void 0};function g(t,n){void 0===n&&(n=!1),c.some((function(n){return e.isNodeDescendantOf(t,n)}))||(c.push(t),n?l.push((function(){return f.deleteNodeInList(i,t)})):l.push((function(){return f.deleteNode(i,t)})))}function h(t){var n=[];return t.members&&t.members.forEach((function(e){var t=r(e,void 0);t&&n.push(t)})),t.exports&&t.exports.forEach((function(t){var i=r(t,[e.createToken(115)]);i&&n.push(i)})),n;function r(t,n){if(4&t.flags){var r=t.valueDeclaration,a=r.parent;if(o=a.right,e.isFunctionLike(o)){var o;if(g(a.parent&&210===a.parent.kind?a.parent:a),!a.right)return e.createProperty([],n,t.name,void 0,void 0,void 0);switch(a.right.kind){case 186:var s=a.right,c=e.concatenate(n,v(s,120));return y(a,f=e.createMethod(void 0,c,void 0,r.name,void 0,void 0,s.parameters,void 0,s.body)),f;case 187:var l=a.right,u=l.body,d=void 0;if(207===u.kind)d=u;else{var p=u;d=e.createBlock([e.createReturn(p)])}var f;c=e.concatenate(n,v(l,120));return y(a,f=e.createMethod(void 0,c,void 0,r.name,void 0,void 0,l.parameters,void 0,d)),f;default:if(e.isSourceFileJavaScript(i))return;var _=e.createProperty(void 0,n,r.name,void 0,void 0,a.right);return y(a.parent,_),_}}}}}function y(t,n){e.forEachLeadingCommentRange(i.text,t.pos,(function(t,r,a,o){3===a?(t+=2,r-=2):t+=2,e.addSyntheticLeadingComment(n,a,i.text.slice(t,r),o)}))}function v(t,n){return e.filter(t.modifiers,(function(e){return e.kind===n}))}},getAvailableActions:function(t){if(!e.isInJavaScriptFile(t.file))return;var n=a(t);if(!n)return;e.isDeclarationOfFunctionOrClassExpression(n)&&(n=n.valueDeclaration.initializer.symbol);if(16&n.flags&&n.members&&n.members.size>0)return[{name:i.name,description:i.description,actions:[{description:i.description,name:r}]}]}};function a(t){var n=t.startPosition,r=t.file,i=t.program.getTypeChecker(),a=e.getTokenAtPosition(r,n,!1);return i.getSymbolAtLocation(a)}t.registerRefactor(i)}(t.convertFunctionToES6Class||(t.convertFunctionToES6Class={}))}(e.refactor||(e.refactor={}))}(ts||(ts={})),function(e){!function(t){!function(n){var r,i,a,o,s={name:"Extract Symbol",description:e.getLocaleSpecificMessage(e.Diagnostics.Extract_symbol),getAvailableActions:c,getEditsForAction:l};function c(t){var n=u(t.file,{start:t.startPosition,length:e.getRefactorContextLength(t)}).targetRange;if(void 0!==n){var r=function(t,n){var r=f(t,n),i=r.scopes,a=r.readsAndWrites,o=a.functionErrorsPerScope,s=a.constantErrorsPerScope;return i.map((function(t,n){var r,i,a=function(t){return e.isFunctionLikeDeclaration(t)?"inner function":e.isClassLike(t)?"method":"function"}(t),c=function(t){return e.isClassLike(t)?"readonly field":"constant"}(t),l=e.isFunctionLikeDeclaration(t)?function(t){switch(t.kind){case 152:return"constructor";case 186:return t.name?"function expression '"+t.name.text+"'":"anonymous function expression";case 228:return"function '"+t.name.text+"'";case 187:return"arrow function";case 151:return"method '"+t.name.getText();case 153:return"'get "+t.name.getText()+"'";case 154:return"'set "+t.name.getText()+"'";default:e.Debug.assertNever(t)}}(t):e.isClassLike(t)?function(e){return 229===e.kind?"class '"+e.name.text+"'":e.name?"class expression '"+e.name.text+"'":"anonymous class expression"}(t):function(e){return 234===e.kind?"namespace '"+e.parent.name.getText()+"'":e.externalModuleIndicator?0:1}(t);return 1===l?(r=e.formatStringFromArgs(e.getLocaleSpecificMessage(e.Diagnostics.Extract_to_0_in_1_scope),[a,"global"]),i=e.formatStringFromArgs(e.getLocaleSpecificMessage(e.Diagnostics.Extract_to_0_in_1_scope),[c,"global"])):0===l?(r=e.formatStringFromArgs(e.getLocaleSpecificMessage(e.Diagnostics.Extract_to_0_in_1_scope),[a,"module"]),i=e.formatStringFromArgs(e.getLocaleSpecificMessage(e.Diagnostics.Extract_to_0_in_1_scope),[c,"module"])):(r=e.formatStringFromArgs(e.getLocaleSpecificMessage(e.Diagnostics.Extract_to_0_in_1),[a,l]),i=e.formatStringFromArgs(e.getLocaleSpecificMessage(e.Diagnostics.Extract_to_0_in_1),[c,l])),0!==n||e.isClassLike(t)||(i=e.formatStringFromArgs(e.getLocaleSpecificMessage(e.Diagnostics.Extract_to_0_in_enclosing_scope),[c])),{functionExtraction:{description:r,errors:o[n]},constantExtraction:{description:i,errors:s[n]}}}))}(n,t);if(void 0!==r){for(var i=[],a=e.createMap(),o=[],c=e.createMap(),l=0,d=0,p=r;d<p.length;d++){var _=p[d],m=_.functionExtraction,g=_.constantExtraction;if(0===m.errors.length){var h=m.description;a.has(h)||(a.set(h,!0),i.push({description:h,name:"function_scope_"+l}))}if(0===g.errors.length){h=g.description;c.has(h)||(c.set(h,!0),o.push({description:h,name:"constant_scope_"+l}))}l++}var y=[];return i.length&&y.push({name:s.name,description:e.getLocaleSpecificMessage(e.Diagnostics.Extract_function),actions:i}),o.length&&y.push({name:s.name,description:e.getLocaleSpecificMessage(e.Diagnostics.Extract_constant),actions:o}),y.length?y:void 0}}}function l(t,n){var r=u(t.file,{start:t.startPosition,length:e.getRefactorContextLength(t)}).targetRange,a=/^function_scope_(\d+)$/.exec(n);if(a){var o=+a[1];return e.Debug.assert(isFinite(o),"Expected to parse a finite number from the function scope index"),function(t,n,r){var a=f(t,n),o=a.scopes,s=a.readsAndWrites,c=s.target,l=s.usagesPerScope,u=s.functionErrorsPerScope,d=s.exposedVariableDeclarations;return e.Debug.assert(!u[r].length,"The extraction went missing? How?"),n.cancellationToken.throwIfCancellationRequested(),function(t,n,r,a,o,s){var c,l=r.usages,u=r.typeParameterUsages,d=r.substitutions,p=s.program.getTypeChecker(),f=n.getSourceFile(),b=_(e.isClassLike(n)?"newMethod":"newFunction",f.text),x=e.isInJavaScriptFile(n),k=e.createIdentifier(b),S=void 0,T=[],C=[];l.forEach((function(n,r){var i=void 0;if(!x){var a=p.getTypeOfSymbolAtLocation(n.symbol,n.node);a=p.getBaseTypeOfLiteralType(a),i=p.typeToTypeNode(a,t,e.NodeBuilderFlags.NoTruncation)}var o=e.createParameter(void 0,void 0,void 0,r,void 0,i);T.push(o),2===n.usage&&(c||(c=[])).push(n),C.push(e.createIdentifier(r))}));var E=e.arrayFrom(u.values()).map((function(e){return{type:e,declaration:g(e)}})).sort(h),D=0===E.length?void 0:E.map((function(e){return e.declaration})),A=void 0!==D?D.map((function(t){return e.createTypeReferenceNode(t.name,void 0)})):void 0;if(e.isExpression(t)&&!x){var w=p.getContextualType(t);S=p.typeToTypeNode(w,n,e.NodeBuilderFlags.NoTruncation)}var N,I=function(t,n,r,i,a){var o,s=void 0!==r||n.length>0;if(e.isBlock(t)&&!s&&0===i.size)return{body:e.createBlock(t.statements,!0),returnValueProperty:void 0};var c=!1,l=e.createNodeArray(e.isBlock(t)?t.statements.slice(0):[e.isStatement(t)?t:e.createReturn(t)]);if(s||i.size){var u=e.visitNodes(l,p).slice();if(s&&!a&&e.isStatement(t)){var d=y(n,r);1===d.length?u.push(e.createReturn(d[0].name)):u.push(e.createReturn(e.createObjectLiteral(d)))}return{body:e.createBlock(u,!0),returnValueProperty:o}}return{body:e.createBlock(l,!0),returnValueProperty:void 0};function p(t){if(!c&&219===t.kind&&s){var a=y(n,r);return t.expression&&(o||(o="__return"),a.unshift(e.createPropertyAssignment(o,e.visitNode(t.expression,p)))),1===a.length?e.createReturn(a[0].name):e.createReturn(e.createObjectLiteral(a))}var l=c;c=c||e.isFunctionLikeDeclaration(t)||e.isClassLike(t);var u=i.get(e.getNodeId(t).toString()),d=u?e.getSynthesizedDeepClone(u):e.visitEachChild(t,p,e.nullTransformationContext);return c=l,d}}(t,a,c,d,!!(o.facts&i.HasReturn)),P=I.body,O=I.returnValueProperty;if(e.suppressLeadingAndTrailingTrivia(P),e.isClassLike(n)){var F=x?[]:[e.createToken(112)];o.facts&i.InStaticRegion&&F.push(e.createToken(115)),o.facts&i.IsAsyncFunction&&F.push(e.createToken(120)),N=e.createMethod(void 0,F.length?F:void 0,o.facts&i.IsGenerator?e.createToken(39):void 0,k,void 0,D,T,S,P)}else N=e.createFunctionDeclaration(void 0,o.facts&i.IsAsyncFunction?[e.createToken(120)]:void 0,o.facts&i.IsGenerator?e.createToken(39):void 0,k,D,T,S,P);var L=e.textChanges.ChangeTracker.fromContext(s),R=function(t,n){return e.find(function(t){if(e.isFunctionLikeDeclaration(t)){var n=t.body;if(e.isBlock(n))return n.statements}else{if(e.isModuleBlock(t)||e.isSourceFile(t))return t.statements;if(e.isClassLike(t))return t.members;e.assertTypeIsNever(t)}return e.emptyArray}(n),(function(n){return n.pos>=t&&e.isFunctionLikeDeclaration(n)&&!e.isConstructorDeclaration(n)}))}((v(o.range)?e.last(o.range):o.range).end,n);R?L.insertNodeBefore(s.file,R,N,{suffix:s.newLineCharacter+s.newLineCharacter}):L.insertNodeBefore(s.file,n.getLastToken(),N,{prefix:e.isLineBreak(f.text.charCodeAt(n.getLastToken().pos))?s.newLineCharacter:s.newLineCharacter+s.newLineCharacter,suffix:s.newLineCharacter});var M=[],U=function(t,n,r){var a=e.createIdentifier(r);if(e.isClassLike(t)){var o=n.facts&i.InStaticRegion?e.createIdentifier(t.name.text):e.createThis();return e.createPropertyAccess(o,a)}return a}(n,o,b),B=e.createCall(U,A,C);o.facts&i.IsGenerator&&(B=e.createYield(e.createToken(39),B));o.facts&i.IsAsyncFunction&&(B=e.createAwait(B));if(a.length&&!c)if(e.Debug.assert(!O),e.Debug.assert(!(o.facts&i.HasReturn)),1===a.length){var j=a[0];M.push(e.createVariableStatement(void 0,e.createVariableDeclarationList([e.createVariableDeclaration(e.getSynthesizedDeepClone(j.name),e.getSynthesizedDeepClone(j.type),B)],j.parent.flags)))}else{for(var $=[],K=[],z=a[0].parent.flags,J=!1,q=0,V=a;q<V.length;q++){j=V[q];$.push(e.createBindingElement(void 0,void 0,e.getSynthesizedDeepClone(j.name)));var H=p.typeToTypeNode(p.getBaseTypeOfLiteralType(p.getTypeAtLocation(j)),n,e.NodeBuilderFlags.NoTruncation);K.push(e.createPropertySignature(void 0,j.symbol.name,void 0,H,void 0)),J=J||void 0!==j.type,z&=j.parent.flags}var G=J?e.createTypeLiteralNode(K):void 0;G&&e.setEmitFlags(G,1),M.push(e.createVariableStatement(void 0,e.createVariableDeclarationList([e.createVariableDeclaration(e.createObjectBindingPattern($),G,B)],z)))}else if(a.length||c){if(a.length)for(var W=0,Q=a;W<Q.length;W++){var Y=(j=Q[W]).parent.flags;2&Y&&(Y=-3&Y|1),M.push(e.createVariableStatement(void 0,e.createVariableDeclarationList([e.createVariableDeclaration(j.symbol.name,re(j.type))],Y)))}O&&M.push(e.createVariableStatement(void 0,e.createVariableDeclarationList([e.createVariableDeclaration(O,re(S))],1)));var X=y(a,c);O&&X.unshift(e.createShorthandPropertyAssignment(O)),1===X.length?(e.Debug.assert(!O),M.push(e.createStatement(e.createAssignment(X[0].name,B))),o.facts&i.HasReturn&&M.push(e.createReturn())):(M.push(e.createStatement(e.createAssignment(e.createObjectLiteral(X),B))),O&&M.push(e.createReturn(e.createIdentifier(O))))}else o.facts&i.HasReturn?M.push(e.createReturn(B)):v(o.range)?M.push(e.createStatement(B)):M.push(B);var Z=v(o.range)?{pos:e.first(o.range).getStart(),end:e.last(o.range).end}:{pos:o.range.getStart(),end:o.range.end};L.replaceRangeWithNodes(s.file,Z,M,{nodeSeparator:s.newLineCharacter});var ee=L.getChanges(),te=(v(o.range)?e.first(o.range):o.range).getSourceFile().fileName,ne=m(ee,te,b,!1);return{renameFilename:te,renameLocation:ne,edits:ee};function re(t){if(void 0!==t){for(var n=e.getSynthesizedDeepClone(t),r=n;e.isParenthesizedTypeNode(r);)r=r.type;return e.isUnionTypeNode(r)&&e.find(r.types,(function(e){return 139===e.kind}))?n:e.createUnionTypeNode([n,e.createKeywordTypeNode(139)])}}}(c,o[r],l[r],d,t,n)}(r,t,o)}var s=/^constant_scope_(\d+)$/.exec(n);if(s){o=+s[1];return e.Debug.assert(isFinite(o),"Expected to parse a finite number from the constant scope index"),function(t,n,r){var a=f(t,n),o=a.scopes,s=a.readsAndWrites,c=s.target,l=s.usagesPerScope,u=s.constantErrorsPerScope,d=s.exposedVariableDeclarations;return e.Debug.assert(!u[r].length,"The extraction went missing? How?"),e.Debug.assert(0===d.length,"Extract constant accepted a range containing a variable declaration?"),n.cancellationToken.throwIfCancellationRequested(),function(t,n,r,a,o){var s=r.substitutions,c=o.program.getTypeChecker(),l=n.getSourceFile(),u=_(e.isClassLike(n)?"newProperty":"newLocal",l.text),d=e.isInJavaScriptFile(n),f=d?void 0:c.typeToTypeNode(c.getContextualType(t),n,e.NodeBuilderFlags.NoTruncation),g=function(t,n){return n.size?r(t):t;function r(t){var i=n.get(e.getNodeId(t).toString());return i?e.getSynthesizedDeepClone(i):e.visitEachChild(t,r,e.nullTransformationContext)}}(t,s);e.suppressLeadingAndTrailingTrivia(g);var h=e.textChanges.ChangeTracker.fromContext(o);if(e.isClassLike(n)){e.Debug.assert(!d);var y=[];y.push(e.createToken(112)),a&i.InStaticRegion&&y.push(e.createToken(115)),y.push(e.createToken(131));var v=e.createProperty(void 0,y,u,void 0,f,g),b=e.createPropertyAccess(a&i.InStaticRegion?e.createIdentifier(n.name.getText()):e.createThis(),e.createIdentifier(u)),x=function(t,n){var r=n.members;e.Debug.assert(r.length>0);for(var i=void 0,a=!0,o=0,s=r;o<s.length;o++){var c=s[o];if(c.pos>t)return i||r[0];if(a&&!e.isPropertyDeclaration(c)){if(void 0!==i)return c;a=!1}i=c}return e.Debug.assert(void 0!==i),i}(t.pos,n);h.insertNodeBefore(o.file,x,v,{suffix:o.newLineCharacter+o.newLineCharacter}),h.replaceRange(o.file,{pos:t.getStart(),end:t.end},b)}else{var S=e.createVariableDeclaration(u,f,g),T=function(t,n){var r=void 0;for(;void 0!==t&&t!==n;){if(e.isVariableDeclaration(t)&&t.initializer===r&&e.isVariableDeclarationList(t.parent)&&t.parent.declarations.length>1)return t;r=t,t=t.parent}}(t,n);if(T){h.insertNodeAt(o.file,T.getStart(),S,{suffix:", "});b=e.createIdentifier(u);h.replaceRange(o.file,{pos:t.getStart(),end:t.end},b)}else if(210===t.parent.kind&&n===e.findAncestor(t,p)){var C=e.createVariableStatement(void 0,e.createVariableDeclarationList([S],2));h.replaceRange(o.file,{pos:t.parent.getStart(),end:t.parent.end},C)}else{C=e.createVariableStatement(void 0,e.createVariableDeclarationList([S],2));if(0===(x=function(t,n){e.Debug.assert(!e.isClassLike(n));for(var r=void 0,i=t;i!==n;i=i.parent)p(i)&&(r=i);for(i=(r||t).parent;;i=i.parent){if(k(i)){for(var a=void 0,o=0,s=i.statements;o<s.length;o++){var c=s[o];if(c.pos>t.pos)break;a=c}return e.Debug.assert(void 0!==a),a}if(i===n){e.Debug.fail("Didn't encounter a block-like before encountering scope");break}}}(t,n)).pos){var E=e.getSourceFileImportLocation(l);h.insertNodeAt(o.file,E,C,{prefix:0===E?void 0:o.newLineCharacter,suffix:e.isLineBreak(l.text.charCodeAt(E))?o.newLineCharacter:o.newLineCharacter+o.newLineCharacter})}else h.insertNodeBefore(o.file,x,C,{suffix:o.newLineCharacter+o.newLineCharacter});if(210===t.parent.kind)h.deleteRange(o.file,{pos:t.parent.getStart(),end:t.parent.end});else{b=e.createIdentifier(u);h.replaceRange(o.file,{pos:t.getStart(),end:t.end},b)}}}var D=h.getChanges(),A=t.getSourceFile().fileName,w=m(D,A,u,!0);return{renameFilename:A,renameLocation:w,edits:D}}(e.isExpression(c)?c:c.statements[0].expression,o[r],l[r],t.facts,n)}(r,t,o)}e.Debug.fail("Unrecognized action name")}function u(t,n){var a=n.length;if(0===a)return{errors:[e.createFileDiagnostic(t,n.start,a,r.CannotExtractEmpty)]};var o=b(e.getTokenAtPosition(t,n.start,!1),t,n),s=b(e.findTokenOnLeftOfPosition(t,e.textSpanEnd(n)),t,n),c=[],l=i.None;if(!o||!s)return{errors:[e.createFileDiagnostic(t,n.start,a,r.CannotExtractRange)]};if(o.parent!==s.parent)return{errors:[e.createFileDiagnostic(t,n.start,a,r.CannotExtractRange)]};if(o!==s){if(!k(o.parent))return{errors:[e.createFileDiagnostic(t,n.start,a,r.CannotExtractRange)]};for(var u=[],p=0,f=o.parent.statements;p<f.length;p++){var _=f[p];if(_===o||u.length){var m=h(_);if(m)return{errors:m};u.push(_)}if(_===s)break}return{targetRange:{range:u,facts:l,declarations:c}}}var g=function(t){if(e.isIdentifier(e.isExpressionStatement(t)?t.expression:t))return[e.createDiagnosticForNode(t,r.CannotExtractIdentifier)];return}(o)||h(o);return g?{errors:g}:{targetRange:{range:d(o),facts:l,declarations:c}};function h(t){var a;if(function(e){e[e.None=0]="None",e[e.Break=1]="Break",e[e.Continue=2]="Continue",e[e.Return=4]="Return"}(a||(a={})),!(e.isStatement(t)||e.isPartOfExpression(t)&&function(e){switch(e.parent.kind){case 264:return!1}switch(e.kind){case 9:return 238!==e.parent.kind&&242!==e.parent.kind;case 198:case 174:case 176:return!1;case 71:return 176!==e.parent.kind&&242!==e.parent.kind&&246!==e.parent.kind}return!0}(t)))return[e.createDiagnosticForNode(t,r.StatementOrExpressionExpected)];if(e.isInAmbientContext(t))return[e.createDiagnosticForNode(t,r.CannotExtractAmbientBlock)];var o,s=e.getContainingClass(t);s&&function(t,n){for(var r=t;r!==n;){if(149===r.kind){e.hasModifier(r,32)&&(l|=i.InStaticRegion);break}if(146===r.kind){152===e.getContainingFunction(r).kind&&(l|=i.InStaticRegion);break}151===r.kind&&e.hasModifier(r,32)&&(l|=i.InStaticRegion),r=r.parent}}(t,s);var u,d=4;return function t(a){if(o)return!0;if(e.isDeclaration(a)){var s=226===a.kind?a.parent.parent:a;if(e.hasModifier(s,1))return(o||(o=[])).push(e.createDiagnosticForNode(a,r.CannotExtractExportedEntity)),!0;c.push(a.symbol)}switch(a.kind){case 238:return(o||(o=[])).push(e.createDiagnosticForNode(a,r.CannotExtractImport)),!0;case 97:if(181===a.parent.kind){var p=e.getContainingClass(a);if(p.pos<n.start||p.end>=n.start+n.length)return(o||(o=[])).push(e.createDiagnosticForNode(a,r.CannotExtractSuper)),!0}else l|=i.UsesThis}if(!a||e.isFunctionLikeDeclaration(a)||e.isClassLike(a)){switch(a.kind){case 228:case 229:265===a.parent.kind&&void 0===a.parent.externalModuleIndicator&&(o||(o=[])).push(e.createDiagnosticForNode(a,r.FunctionWillNotBeVisibleInTheNewScope))}return!1}var f=d;switch(a.kind){case 211:case 224:d=0;break;case 207:a.parent&&224===a.parent.kind&&a.parent.finallyBlock===a&&(d=4);break;case 257:d|=1;break;default:e.isIterationStatement(a,!1)&&(d|=3)}switch(a.kind){case 169:case 99:l|=i.UsesThis;break;case 222:var _=a.label;(u||(u=[])).push(_.escapedText),e.forEachChild(a,t),u.pop();break;case 218:case 217:(_=a.label)?e.contains(u,_.escapedText)||(o||(o=[])).push(e.createDiagnosticForNode(a,r.CannotExtractRangeContainingLabeledBreakOrContinueStatementWithTargetOutsideOfTheRange)):d&(218===a.kind?1:2)||(o||(o=[])).push(e.createDiagnosticForNode(a,r.CannotExtractRangeContainingConditionalBreakOrContinueStatements));break;case 191:l|=i.IsAsyncFunction;break;case 197:l|=i.IsGenerator;break;case 219:4&d?l|=i.HasReturn:(o||(o=[])).push(e.createDiagnosticForNode(a,r.CannotExtractRangeContainingConditionalReturnStatement));break;default:e.forEachChild(a,t)}d=f}(t),o}}function d(t){return e.isStatement(t)?[t]:e.isPartOfExpression(t)?e.isExpressionStatement(t.parent)?[t.parent]:t:void 0}function p(t){return e.isFunctionLikeDeclaration(t)||e.isSourceFile(t)||e.isModuleBlock(t)||e.isClassLike(t)}function f(t,n){var a=n.file,o=function(t){var n=v(t.range)?e.first(t.range):t.range;if(t.facts&i.UsesThis){var r=e.getContainingClass(n);if(r){var a=e.findAncestor(n,e.isFunctionLikeDeclaration);return a?[a,r]:[r]}}for(var o=[];;)if(146===(n=n.parent).kind&&(n=e.findAncestor(n,(function(t){return e.isFunctionLikeDeclaration(t)})).parent),p(n)&&(o.push(n),265===n.kind))return o}(t);return{scopes:o,readsAndWrites:function(t,n,a,o,s,c){var l=e.createMap(),u=[],d=[],p=[],f=[],_=[],m=e.createMap(),g=[],h=void 0,y=v(t.range)?1===t.range.length&&e.isExpressionStatement(t.range[0])?t.range[0].expression:void 0:t.range,b=void 0;if(void 0===y){var x=t.range,k=e.first(x).getStart(),S=e.last(x).end;b=e.createFileDiagnostic(o,k,S-k,r.ExpressionExpected)}else 9216&s.getTypeAtLocation(y).flags&&(b=e.createDiagnosticForNode(y,r.UselessConstantType));for(var T=0,C=n;T<C.length;T++){var E=C[T];u.push({usages:e.createMap(),typeParameterUsages:e.createMap(),substitutions:e.createMap()}),d.push(e.createMap()),p.push(e.isFunctionLikeDeclaration(E)&&228!==E.kind?[e.createDiagnosticForNode(E,r.CannotExtractToOtherFunctionLike)]:[]);var D=[];b&&D.push(b),e.isClassLike(E)&&e.isInJavaScriptFile(E)&&D.push(e.createDiagnosticForNode(E,r.CannotExtractToJSClass)),e.isArrowFunction(E)&&!e.isBlock(E.body)&&D.push(e.createDiagnosticForNode(E,r.CannotExtractToExpressionArrowFunction)),f.push(D)}var A=e.createMap(),w=v(t.range)?e.createBlock(t.range):t.range,N=v(t.range)?e.first(t.range):t.range,I=z(N);if(q(w),I&&!v(t.range)){J(s.getContextualType(t.range))}if(l.size>0){for(var P=e.createMap(),O=0,F=N;void 0!==F&&O<n.length;F=F.parent)if(F===n[O]&&(P.forEach((function(e,t){u[O].typeParameterUsages.set(t,e)})),O++),e.isDeclarationWithTypeParameters(F)&&F.typeParameters)for(var L=0,R=F.typeParameters;L<R.length;L++){var M=R[L],U=s.getTypeAtLocation(M);l.has(U.id.toString())&&P.set(U.id.toString(),U)}e.Debug.assert(O===n.length)}if(_.length){var B=e.isBlockScope(n[0],n[0].parent)?n[0]:e.getEnclosingBlockScopeContainer(n[0]);e.forEachChild(B,G)}for(var j=function(n){var i=u[n];if(n>0&&(i.usages.size>0||i.typeParameterUsages.size>0)){var a=v(t.range)?t.range[0]:t.range;f[n].push(e.createDiagnosticForNode(a,r.CannotAccessVariablesFromNestedScopes))}var o=!1,s=void 0;if(u[n].usages.forEach((function(t){2===t.usage&&(o=!0,106500&t.symbol.flags&&t.symbol.valueDeclaration&&e.hasModifier(t.symbol.valueDeclaration,64)&&(s=t.symbol.valueDeclaration))})),e.Debug.assert(v(t.range)||0===g.length),o&&!v(t.range)){var c=e.createDiagnosticForNode(t.range,r.CannotWriteInExpression);p[n].push(c),f[n].push(c)}else if(s&&n>0){c=e.createDiagnosticForNode(s,r.CannotExtractReadonlyPropertyInitializerOutsideConstructor);p[n].push(c),f[n].push(c)}else if(h){c=e.createDiagnosticForNode(h,r.CannotExtractExportedEntity);p[n].push(c),f[n].push(c)}},$=0;$<n.length;$++)j($);return{target:w,usagesPerScope:u,functionErrorsPerScope:p,constantErrorsPerScope:f,exposedVariableDeclarations:g};function K(t){return e.isDeclarationWithTypeParameters(t)&&void 0!==t.typeParameters&&t.typeParameters.length>0}function z(e){for(;e;e=e.parent)if(K(e))return!0;return!1}function J(e){for(var t=0,n=s.getSymbolWalker((function(){return c.throwIfCancellationRequested(),!0})).walkType(e).visitedTypes;t<n.length;t++){var r=n[t];16384&r.flags&&l.set(r.id.toString(),r)}}function q(t,n){(void 0===n&&(n=1),I)&&J(s.getTypeAtLocation(t));if(e.isDeclaration(t)&&t.symbol&&_.push(t),e.isAssignmentExpression(t))q(t.left,2),q(t.right);else if(e.isUnaryExpressionWithWrite(t))q(t.operand,2);else if(e.isPropertyAccessExpression(t)||e.isElementAccessExpression(t))e.forEachChild(t,q);else if(e.isIdentifier(t)){if(!t.parent)return;if(e.isQualifiedName(t.parent)&&t!==t.parent.left)return;if(e.isPropertyAccessExpression(t.parent)&&t!==t.parent.expression)return;V(t,n,e.isPartOfTypeNode(t))}else e.forEachChild(t,q)}function V(t,r,i){var a=H(t,r,i);if(a)for(var o=0;o<n.length;o++){var s=d[o].get(a);s&&u[o].substitutions.set(e.getNodeId(t).toString(),s)}}function H(c,l,_){var m=W(c);if(m){var g=e.getSymbolId(m).toString(),h=A.get(g);if(h&&h>=l)return g;if(A.set(g,l),h){for(var y=0,v=u;y<v.length;y++){var b=v[y];b.usages.get(c.text)&&b.usages.set(c.text,{usage:l,symbol:m,node:c})}return g}var x=e.find(m.getDeclarations(),(function(e){return e.getSourceFile()===o}));if(x&&!e.rangeContainsStartEnd(a,x.getStart(),x.end)){if(t.facts&i.IsGenerator&&2===l){for(var k=e.createDiagnosticForNode(c,r.CannotExtractRangeThatContainsWritesToReferencesLocatedOutsideOfTheTargetRangeInGenerators),S=0,T=p;S<T.length;S++){T[S].push(k)}for(var C=0,E=f;C<E.length;C++){E[C].push(k)}}for(var D=0;D<n.length;D++){var w=n[D];if(s.resolveName(m.name,w,m.flags)!==m&&!d[D].has(g)){var N=Q(m.exportSymbol||m,w,_);if(N)d[D].set(g,N);else if(_){if(!(262144&m.flags)){k=e.createDiagnosticForNode(c,r.TypeWillNotBeVisibleInTheNewScope);p[D].push(k),f[D].push(k)}}else u[D].usages.set(c.text,{usage:l,symbol:m,node:c})}}return g}}}function G(n){if(!(n===t.range||v(t.range)&&t.range.indexOf(n)>=0)){var r=e.isIdentifier(n)?W(n):s.getSymbolAtLocation(n);if(r){var i=e.find(_,(function(e){return e.symbol===r}));if(i)if(e.isVariableDeclaration(i)){var a=i.symbol.id.toString();m.has(a)||(g.push(i),m.set(a,!0))}else h=h||i}e.forEachChild(n,G)}}function W(t){return t.parent&&e.isShorthandPropertyAssignment(t.parent)&&t.parent.name===t?s.getShorthandAssignmentValueSymbol(t.parent):s.getSymbolAtLocation(t)}function Q(t,n,r){if(t){if(t.getDeclarations().some((function(e){return e.parent===n})))return e.createIdentifier(t.name);var i=Q(t.parent,n,r);if(void 0!==i)return r?e.createQualifiedName(i,e.createIdentifier(t.name)):e.createPropertyAccess(i,t.name)}}}(t,o,function(t,n){return v(t.range)?{pos:e.first(t.range).getStart(n),end:e.last(t.range).getEnd()}:t.range}(t,a),a,n.program.getTypeChecker(),n.cancellationToken)}}function _(t,n){for(var r=t,i=1;e.stringContains(n,r);i++)r=t+"_"+i;return r}function m(t,n,r,i){for(var a=0,o=-1,s=0,c=t;s<c.length;s++){var l=c[s],u=l.fileName,d=l.textChanges;e.Debug.assert(u===n);for(var p=0,f=d;p<f.length;p++){var _=f[p],m=_.span,g=_.newText,h=g.indexOf(r);if(-1!==h&&(o=m.start+a+h,!i))return o;a+=g.length-m.length}}return e.Debug.assert(i),e.Debug.assert(o>=0),o}function g(e){var t=void 0,n=e.symbol;if(n&&n.declarations)for(var r=0,i=n.declarations;r<i.length;r++){var a=i[r];(void 0===t||a.pos<t.pos)&&(t=a)}return t}function h(t,n){var r=t.type,i=t.declaration,a=n.type,o=n.declaration;if(i){if(!o)return 1;var s=i.pos-o.pos;if(0!==s)return s}else if(o)return-1;var c=r.symbol?r.symbol.getName():"",l=a.symbol?a.symbol.getName():"",u=e.compareStrings(c,l);return 0!==u?u:r.id-a.id}function y(t,n){var r=e.map(t,(function(t){return e.createShorthandPropertyAssignment(t.symbol.name)})),i=e.map(n,(function(t){return e.createShorthandPropertyAssignment(t.symbol.name)}));return void 0===r?i:void 0===i?r:r.concat(i)}function v(t){return e.isArray(t)}function b(t,n,r){if(t)for(;t.parent;){if(e.isSourceFile(t.parent)||!x(r,t.parent,n))return t;t=t.parent}}function x(t,n,r){return e.textSpanContainsPosition(t,n.getStart(r))&&n.getEnd()<=e.textSpanEnd(t)}function k(e){switch(e.kind){case 207:case 265:case 234:case 257:return!0;default:return!1}}t.registerRefactor(s),n.getAvailableActions=c,n.getEditsForAction=l,function(t){function n(t){return{message:t,code:0,category:e.DiagnosticCategory.Message,key:t}}t.CannotExtractRange=n("Cannot extract range."),t.CannotExtractImport=n("Cannot extract import statement."),t.CannotExtractSuper=n("Cannot extract super call."),t.CannotExtractEmpty=n("Cannot extract empty range."),t.ExpressionExpected=n("expression expected."),t.UselessConstantType=n("No reason to extract constant of type."),t.StatementOrExpressionExpected=n("Statement or expression expected."),t.CannotExtractRangeContainingConditionalBreakOrContinueStatements=n("Cannot extract range containing conditional break or continue statements."),t.CannotExtractRangeContainingConditionalReturnStatement=n("Cannot extract range containing conditional return statement."),t.CannotExtractRangeContainingLabeledBreakOrContinueStatementWithTargetOutsideOfTheRange=n("Cannot extract range containing labeled break or continue with target outside of the range."),t.CannotExtractRangeThatContainsWritesToReferencesLocatedOutsideOfTheTargetRangeInGenerators=n("Cannot extract range containing writes to references located outside of the target range in generators."),t.TypeWillNotBeVisibleInTheNewScope=n("Type will not visible in the new scope."),t.FunctionWillNotBeVisibleInTheNewScope=n("Function will not visible in the new scope."),t.CannotExtractIdentifier=n("Select more than a single identifier."),t.CannotExtractExportedEntity=n("Cannot extract exported declaration"),t.CannotWriteInExpression=n("Cannot write back side-effects when extracting an expression"),t.CannotExtractReadonlyPropertyInitializerOutsideConstructor=n("Cannot move initialization of read-only class property outside of the constructor"),t.CannotExtractAmbientBlock=n("Cannot extract code from ambient contexts"),t.CannotAccessVariablesFromNestedScopes=n("Cannot access variables from nested scopes"),t.CannotExtractToOtherFunctionLike=n("Cannot extract method to a function-like scope that is not a function"),t.CannotExtractToJSClass=n("Cannot extract constant to a class scope in JS"),t.CannotExtractToExpressionArrowFunction=n("Cannot extract constant to an arrow function without a block")}(r=n.Messages||(n.Messages={})),function(e){e[e.None=0]="None",e[e.HasReturn=1]="HasReturn",e[e.IsGenerator=2]="IsGenerator",e[e.IsAsyncFunction=4]="IsAsyncFunction",e[e.UsesThis=8]="UsesThis",e[e.InStaticRegion=16]="InStaticRegion"}(i||(i={})),n.getRangeToExtract=u,function(e){e[e.Module=0]="Module",e[e.Global=1]="Global"}(a||(a={})),function(e){e[e.Read=1]="Read",e[e.Write=2]="Write"}(o||(o={}))}(t.extractSymbol||(t.extractSymbol={}))}(e.refactor||(e.refactor={}))}(ts||(ts={})),function(e){!function(t){!function(n){var r="install",i={name:"Install missing types package",description:"Install missing types package",getEditsForAction:function(t,n){e.Debug.assertEqual(r,n);var i=a(t);return{edits:[],renameFilename:void 0,renameLocation:void 0,commands:i.commands}},getAvailableActions:function(e){var t=e.program.getCompilerOptions();if(void 0===t.noImplicitAny?t.strict:t.noImplicitAny)return;var n=a(e);return n&&[{name:i.name,description:i.description,actions:[{description:n.description,name:r}]}]}};function a(t){var n=t.file,r=t.startPosition,i=e.getTokenAtPosition(n,r,!1);if(e.isStringLiteral(i)&&function(e){switch(e.parent.kind){case 238:case 248:return!0;default:return!1}}(i)&&void 0===e.getResolvedModule(n,i.text))return e.codefix.tryGetCodeActionForInstallPackageTypes(t.host,i.text)}t.registerRefactor(i)}(t.installTypesForPackage||(t.installTypesForPackage={}))}(e.refactor||(e.refactor={}))}(ts||(ts={})),function(e){var t;function n(t,n,i,a){var c=e.isNodeKind(t)?new r(t,n,i):71===t?new s(71,n,i):new o(t,n,i);return c.parent=a,c}e.servicesVersion="0.6";var r=function(){function t(e,t,n){this.pos=t,this.end=n,this.flags=0,this.transformFlags=void 0,this.parent=void 0,this.kind=e}return t.prototype.getSourceFile=function(){return e.getSourceFileOfNode(this)},t.prototype.getStart=function(t,n){return e.getTokenPosOfNode(this,t,n)},t.prototype.getFullStart=function(){return this.pos},t.prototype.getEnd=function(){return this.end},t.prototype.getWidth=function(e){return this.getEnd()-this.getStart(e)},t.prototype.getFullWidth=function(){return this.end-this.pos},t.prototype.getLeadingTriviaWidth=function(e){return this.getStart(e)-this.pos},t.prototype.getFullText=function(e){return(e||this.getSourceFile()).text.substring(this.pos,this.end)},t.prototype.getText=function(e){return e||(e=this.getSourceFile()),e.text.substring(this.getStart(e),this.getEnd())},t.prototype.addSyntheticNodes=function(t,r,i){for(e.scanner.setTextPos(r);r<i;){var a=e.scanner.scan(),o=e.scanner.getTextPos();if(o<=i&&t.push(n(a,r,o,this)),r=o,1===a)break}return r},t.prototype.createSyntaxList=function(e){var t=n(286,e.pos,e.end,this);t._children=[];for(var r=e.pos,i=0,a=e;i<a.length;i++){var o=a[i];r<o.pos&&(r=this.addSyntheticNodes(t._children,r,o.pos)),t._children.push(o),r=o.end}return r<e.end&&this.addSyntheticNodes(t._children,r,e.end),t},t.prototype.createChildren=function(t){var n=this;if(e.isNodeKind(this.kind)){if(e.isJSDocCommentContainingNode(this)){var r=[];return this.forEachChild((function(e){r.push(e)})),void(this._children=r)}var i=[];e.scanner.setText((t||this.getSourceFile()).text);var a=this.pos,o=function(e){a=n.addSyntheticNodes(i,a,e.pos),i.push(e),a=e.end};if(this.jsDoc)for(var s=0,c=this.jsDoc;s<c.length;s++){o(c[s])}a=this.pos,e.forEachChild(this,o,(function(e){a<e.pos&&(a=n.addSyntheticNodes(i,a,e.pos)),i.push(n.createSyntaxList(e)),a=e.end})),a<this.end&&this.addSyntheticNodes(i,a,this.end),e.scanner.setText(void 0),this._children=i}else this._children=e.emptyArray},t.prototype.getChildCount=function(e){return this._children||this.createChildren(e),this._children.length},t.prototype.getChildAt=function(e,t){return this._children||this.createChildren(t),this._children[e]},t.prototype.getChildren=function(e){return this._children||this.createChildren(e),this._children},t.prototype.getFirstToken=function(t){var n=this.getChildren(t);if(n.length){var r=e.find(n,(function(e){return e.kind<267||e.kind>285}));return r.kind<143?r:r.getFirstToken(t)}},t.prototype.getLastToken=function(t){var n=this.getChildren(t),r=e.lastOrUndefined(n);if(r)return r.kind<143?r:r.getLastToken(t)},t.prototype.forEachChild=function(t,n){return e.forEachChild(this,t,n)},t}(),i=function(){function t(e,t){this.pos=e,this.end=t,this.flags=0,this.parent=void 0}return t.prototype.getSourceFile=function(){return e.getSourceFileOfNode(this)},t.prototype.getStart=function(t,n){return e.getTokenPosOfNode(this,t,n)},t.prototype.getFullStart=function(){return this.pos},t.prototype.getEnd=function(){return this.end},t.prototype.getWidth=function(e){return this.getEnd()-this.getStart(e)},t.prototype.getFullWidth=function(){return this.end-this.pos},t.prototype.getLeadingTriviaWidth=function(e){return this.getStart(e)-this.pos},t.prototype.getFullText=function(e){return(e||this.getSourceFile()).text.substring(this.pos,this.end)},t.prototype.getText=function(e){return(e||this.getSourceFile()).text.substring(this.getStart(),this.getEnd())},t.prototype.getChildCount=function(){return 0},t.prototype.getChildAt=function(){},t.prototype.getChildren=function(){return e.emptyArray},t.prototype.getFirstToken=function(){},t.prototype.getLastToken=function(){},t.prototype.forEachChild=function(){},t}(),a=function(){function t(e,t){this.flags=e,this.escapedName=t}return t.prototype.getFlags=function(){return this.flags},Object.defineProperty(t.prototype,"name",{get:function(){return e.symbolName(this)},enumerable:!0,configurable:!0}),t.prototype.getEscapedName=function(){return this.escapedName},t.prototype.getName=function(){return this.name},t.prototype.getDeclarations=function(){return this.declarations},t.prototype.getDocumentationComment=function(){return void 0===this.documentationComment&&(this.documentationComment=e.JsDoc.getJsDocCommentsFromDeclarations(this.declarations)),this.documentationComment},t.prototype.getJsDocTags=function(){return void 0===this.tags&&(this.tags=e.JsDoc.getJsDocTagsFromDeclarations(this.declarations)),this.tags},t}(),o=function(e){function t(t,n,r){var i=e.call(this,n,r)||this;return i.kind=t,i}return __extends(t,e),t}(i),s=function(t){function n(e,n,r){return t.call(this,n,r)||this}return __extends(n,t),Object.defineProperty(n.prototype,"text",{get:function(){return e.idText(this)},enumerable:!0,configurable:!0}),n}(i);s.prototype.kind=71;var c=function(){function e(e,t){this.checker=e,this.flags=t}return e.prototype.getFlags=function(){return this.flags},e.prototype.getSymbol=function(){return this.symbol},e.prototype.getProperties=function(){return this.checker.getPropertiesOfType(this)},e.prototype.getProperty=function(e){return this.checker.getPropertyOfType(this,e)},e.prototype.getApparentProperties=function(){return this.checker.getAugmentedPropertiesOfType(this)},e.prototype.getCallSignatures=function(){return this.checker.getSignaturesOfType(this,0)},e.prototype.getConstructSignatures=function(){return this.checker.getSignaturesOfType(this,1)},e.prototype.getStringIndexType=function(){return this.checker.getIndexTypeOfType(this,0)},e.prototype.getNumberIndexType=function(){return this.checker.getIndexTypeOfType(this,1)},e.prototype.getBaseTypes=function(){return 32768&this.flags&&3&this.objectFlags?this.checker.getBaseTypes(this):void 0},e.prototype.getNonNullableType=function(){return this.checker.getNonNullableType(this)},e}(),l=function(){function t(e){this.checker=e}return t.prototype.getDeclaration=function(){return this.declaration},t.prototype.getTypeParameters=function(){return this.typeParameters},t.prototype.getParameters=function(){return this.parameters},t.prototype.getReturnType=function(){return this.checker.getReturnTypeOfSignature(this)},t.prototype.getDocumentationComment=function(){return void 0===this.documentationComment&&(this.documentationComment=this.declaration?e.JsDoc.getJsDocCommentsFromDeclarations([this.declaration]):[]),this.documentationComment},t.prototype.getJsDocTags=function(){return void 0===this.jsDocTags&&(this.jsDocTags=this.declaration?e.JsDoc.getJsDocTagsFromDeclarations([this.declaration]):[]),this.jsDocTags},t}(),u=function(t){function n(e,n,r){return t.call(this,e,n,r)||this}return __extends(n,t),n.prototype.update=function(t,n){return e.updateSourceFile(this,t,n)},n.prototype.getLineAndCharacterOfPosition=function(t){return e.getLineAndCharacterOfPosition(this,t)},n.prototype.getLineStarts=function(){return e.getLineStarts(this)},n.prototype.getPositionOfLineAndCharacter=function(t,n){return e.getPositionOfLineAndCharacter(this,t,n)},n.prototype.getLineEndOfPosition=function(e){var t,n=this.getLineAndCharacterOfPosition(e).line,r=this.getLineStarts();n+1>=r.length&&(t=this.getEnd()),t||(t=r[n+1]-1);var i=this.getFullText();return"\n"===i[t]&&"\r"===i[t-1]?t-1:t},n.prototype.getNamedDeclarations=function(){return this.namedDeclarations||(this.namedDeclarations=this.computeNamedDeclarations()),this.namedDeclarations},n.prototype.computeNamedDeclarations=function(){var t=e.createMultiMap();return e.forEachChild(this,(function i(a){switch(a.kind){case 228:case 186:case 151:case 150:var o=a,s=r(o);if(s){var c=function(e){var n=t.get(e);n||t.set(e,n=[]);return n}(s),l=e.lastOrUndefined(c);l&&o.parent===l.parent&&o.symbol===l.symbol?o.body&&!l.body&&(c[c.length-1]=o):c.push(o)}e.forEachChild(a,i);break;case 229:case 199:case 230:case 231:case 232:case 233:case 237:case 246:case 242:case 239:case 240:case 153:case 154:case 163:n(a),e.forEachChild(a,i);break;case 146:if(!e.hasModifier(a,92))break;case 226:case 176:var u=a;if(e.isBindingPattern(u.name)){e.forEachChild(u.name,i);break}u.initializer&&i(u.initializer);case 264:case 149:case 148:n(a);break;case 244:a.exportClause&&e.forEach(a.exportClause.elements,i);break;case 238:var d=a.importClause;d&&(d.name&&n(d),d.namedBindings&&(240===d.namedBindings.kind?n(d.namedBindings):e.forEach(d.namedBindings.elements,i)));break;case 194:0!==e.getSpecialPropertyAssignmentKind(a)&&n(a);default:e.forEachChild(a,i)}})),t;function n(e){var n=r(e);n&&t.add(n,e)}function r(t){var n=e.getNameOfDeclaration(t);if(n){var r=e.getTextOfIdentifierOrLiteral(n);if(void 0!==r)return r;if(144===n.kind){var i=n.expression;return 179===i.kind?i.name.text:e.getTextOfIdentifierOrLiteral(i)}}}},n}(r),d=function(){function t(e,t,n){this.fileName=e,this.text=t,this.skipTrivia=n}return t.prototype.getLineAndCharacterOfPosition=function(t){return e.getLineAndCharacterOfPosition(this,t)},t}();function p(t){var n=!0;for(var r in t)if(e.hasProperty(t,r)&&!f(r)){n=!1;break}if(n)return t;var i={};for(var r in t){if(e.hasProperty(t,r))i[f(r)?r:r.charAt(0).toLowerCase()+r.substr(1)]=t[r]}return i}function f(e){return!e.length||e.charAt(0)===e.charAt(0).toLowerCase()}function _(){return{target:1,jsx:1}}e.toEditorSettings=p,e.displayPartsToString=function(t){return t?e.map(t,(function(e){return e.text})).join(""):""},e.getDefaultCompilerOptions=_,e.getSupportedCodeFixes=function(){return e.codefix.getSupportedErrorCodes()};var m=function(){function t(t,n){this.host=t,this.currentDirectory=t.getCurrentDirectory(),this.fileNameToEntry=e.createMap();for(var r=0,i=t.getScriptFileNames();r<i.length;r++){var a=i[r];this.createEntry(a,e.toPath(a,this.currentDirectory,n))}this._compilationSettings=t.getCompilationSettings()||{target:1,jsx:1}}return t.prototype.compilationSettings=function(){return this._compilationSettings},t.prototype.createEntry=function(t,n){var r,i=this.host.getScriptSnapshot(t);return r=i?{hostFileName:t,version:this.host.getScriptVersion(t),scriptSnapshot:i,scriptKind:e.getScriptKind(t,this.host)}:t,this.fileNameToEntry.set(n,r),r},t.prototype.getEntryByPath=function(e){return this.fileNameToEntry.get(e)},t.prototype.getHostFileInformation=function(t){var n=this.fileNameToEntry.get(t);return e.isString(n)?void 0:n},t.prototype.getOrCreateEntryByPath=function(t,n){var r=this.getEntryByPath(n)||this.createEntry(t,n);return e.isString(r)?void 0:r},t.prototype.getRootFileNames=function(){return e.arrayFrom(this.fileNameToEntry.values(),(function(t){return e.isString(t)?t:t.hostFileName}))},t.prototype.getVersion=function(e){var t=this.getHostFileInformation(e);return t&&t.version},t.prototype.getScriptSnapshot=function(e){var t=this.getHostFileInformation(e);return t&&t.scriptSnapshot},t}(),g=function(){function t(e){this.host=e}return t.prototype.getCurrentSourceFile=function(t){var n=this.host.getScriptSnapshot(t);if(!n)throw new Error("Could not find file: '"+t+"'.");var r,i=e.getScriptKind(t,this.host),a=this.host.getScriptVersion(t);if(this.currentFileName!==t)r=y(t,n,5,a,!0,i);else if(this.currentFileVersion!==a){var o=n.getChangeRange(this.currentFileScriptSnapshot);r=v(this.currentSourceFile,n,a,o)}return r&&(this.currentFileVersion=a,this.currentFileName=t,this.currentFileScriptSnapshot=n,this.currentSourceFile=r),this.currentSourceFile},t}();function h(e,t,n){e.version=n,e.scriptSnapshot=t}function y(t,n,r,i,a,o){var s=n.getText(0,n.getLength()),c=e.createSourceFile(t,s,r,a,o);return h(c,n,i),c}function v(t,n,r,i,a){if(i&&r!==t.version&&!e.disableIncrementalParsing){var o=void 0,s=0!==i.span.start?t.text.substr(0,i.span.start):"",c=e.textSpanEnd(i.span)!==t.text.length?t.text.substr(e.textSpanEnd(i.span)):"";if(0===i.newLength)o=s&&c?s+c:s||c;else{var l=n.getText(i.span.start,i.span.start+i.newLength);o=s&&c?s+l+c:s?s+l:l+c}var u=e.updateSourceFile(t,o,i,a);return h(u,n,r),u.nameTable=void 0,t!==u&&t.scriptSnapshot&&(t.scriptSnapshot.dispose&&t.scriptSnapshot.dispose(),t.scriptSnapshot=void 0),u}return y(t.fileName,n,t.languageVersion,r,!0,t.scriptKind)}e.createLanguageServiceSourceFile=y,e.disableIncrementalParsing=!1,e.updateLanguageServiceSourceFile=v;var b=function(){function t(e){this.cancellationToken=e}return t.prototype.isCancellationRequested=function(){return this.cancellationToken&&this.cancellationToken.isCancellationRequested()},t.prototype.throwIfCancellationRequested=function(){if(this.isCancellationRequested())throw new e.OperationCanceledException},t}(),x=function(){function t(e,t){void 0===t&&(t=20),this.hostCancellationToken=e,this.throttleWaitMilliseconds=t,this.lastCancellationCheckTime=0}return t.prototype.isCancellationRequested=function(){var t=e.timestamp();return Math.abs(t-this.lastCancellationCheckTime)>=this.throttleWaitMilliseconds&&(this.lastCancellationCheckTime=t,this.hostCancellationToken.isCancellationRequested())},t.prototype.throwIfCancellationRequested=function(){if(this.isCancellationRequested())throw new e.OperationCanceledException},t}();function k(e){switch(e.kind){case 253:case 255:case 261:case 262:case 151:case 153:case 154:return!0}return!1}function S(t,n){var r=e.unescapeLeadingUnderscores(e.getTextOfPropertyName(n));if(r&&t){var i=[],a=t.getProperty(r);if(65536&t.flags)return e.forEach(t.types,(function(e){var t=e.getProperty(r);t&&i.push(t)})),i;if(a)return i.push(a),i}}e.ThrottledCancellationToken=x,e.createLanguageService=function(n,r){void 0===r&&(r=e.createDocumentRegistry(n.useCaseSensitiveFileNames&&n.useCaseSensitiveFileNames(),n.getCurrentDirectory()));var i,a,o=new g(n);t=t||new e.formatting.RulesProvider;var s=0,c=n.useCaseSensitiveFileNames&&n.useCaseSensitiveFileNames(),l=new b(n.getCancellationToken&&n.getCancellationToken()),u=n.getCurrentDirectory();function d(e){n.log&&n.log(e)}!e.localizedDiagnosticMessages&&n.getLocalizedDiagnosticMessages&&(e.localizedDiagnosticMessages=n.getLocalizedDiagnosticMessages());var f=e.createGetCanonicalFileName(c);function _(e){var t=i.getSourceFile(e);if(!t)throw new Error("Could not find file: '"+e+"'.");return t}function h(e){return t.ensureUpToDate(e),t}function y(){if(n.getProjectVersion){var t=n.getProjectVersion();if(t){if(a===t&&!n.hasChangedAutomaticTypeDirectiveNames)return;a=t}}var o=n.getTypeRootsVersion?n.getTypeRootsVersion():0;s!==o&&(d("TypeRoots version has changed; provide new program"),i=void 0,s=o);var p=new m(n,f),_=p.getRootFileNames(),g=n.hasInvalidatedResolution||e.returnFalse;if(!e.isProgramUptoDate(i,_,p.compilationSettings(),(function(e){return p.getVersion(e)}),b,g,n.hasChangedAutomaticTypeDirectiveNames)){var h=p.compilationSettings(),y={getSourceFile:function(t,n,r,i){return x(t,e.toPath(t,u,f),n,r,i)},getSourceFileByPath:x,getCancellationToken:function(){return l},getCanonicalFileName:f,useCaseSensitiveFileNames:function(){return c},getNewLine:function(){return e.getNewLineCharacter(h,{newLine:e.getNewLineOrDefaultFromHost(n)})},getDefaultLibFileName:function(e){return n.getDefaultLibFileName(e)},writeFile:e.noop,getCurrentDirectory:function(){return u},fileExists:b,readFile:function(t){var r=e.toPath(t,u,f),i=p.getEntryByPath(r);return i?e.isString(i)?void 0:i.scriptSnapshot.getText(0,i.scriptSnapshot.getLength()):n.readFile&&n.readFile(t)},directoryExists:function(t){return e.directoryProbablyExists(t,n)},getDirectories:function(e){return n.getDirectories?n.getDirectories(e):[]},onReleaseOldSourceFile:function(e,t){var n=r.getKeyForCompilationSettings(t);r.releaseDocumentWithKey(e.path,n)},hasInvalidatedResolution:g,hasChangedAutomaticTypeDirectiveNames:n.hasChangedAutomaticTypeDirectiveNames};n.trace&&(y.trace=function(e){return n.trace(e)}),n.resolveModuleNames&&(y.resolveModuleNames=function(e,t,r){return n.resolveModuleNames(e,t,r)}),n.resolveTypeReferenceDirectives&&(y.resolveTypeReferenceDirectives=function(e,t){return n.resolveTypeReferenceDirectives(e,t)});var v=r.getKeyForCompilationSettings(h);return i=e.createProgram(_,h,y,i),p=void 0,void i.getTypeChecker()}function b(t){var r=e.toPath(t,u,f),i=p.getEntryByPath(r);return i?!e.isString(i):n.fileExists&&n.fileExists(t)}function x(t,n,a,o,s){e.Debug.assert(void 0!==p);var c=p.getOrCreateEntryByPath(t,n);if(c){if(!s){var l=i&&i.getSourceFileByPath(n);if(l)return e.Debug.assertEqual(c.scriptKind,l.scriptKind,"Registered script kind should match new script kind.",n),r.updateDocumentWithKey(t,n,h,v,c.scriptSnapshot,c.version,c.scriptKind)}return r.acquireDocumentWithKey(t,n,h,v,c.scriptSnapshot,c.version,c.scriptKind)}}}function v(){return y(),i}function x(t,n,r){y();var a=e.map(r,(function(e){return i.getSourceFile(e)})),o=_(t);return e.DocumentHighlights.getDocumentHighlights(i,l,o,n,a)}function k(t,n,r){y();var a=[];if(r&&r.isForRename)for(var o=0,s=i.getSourceFiles();o<s.length;o++){var c=s[o];i.isSourceFileDefaultLibrary(c)||a.push(c)}else a=i.getSourceFiles().slice();return e.FindAllReferences.findReferencedEntries(i,l,a,_(t),n,r)}function S(e){return o.getCurrentSourceFile(e)}function T(t){var r=e.getScriptKind(t,n);return 3===r||4===r}function C(e,t,r){var i="number"==typeof t?[t,void 0]:[t.pos,t.end];return{file:e,startPosition:i[0],endPosition:i[1],program:v(),newLineCharacter:r?r.newLineCharacter:n.getNewLine(),host:n,rulesProvider:h(r),cancellationToken:l}}return{dispose:function(){i&&(e.forEach(i.getSourceFiles(),(function(e){return r.releaseDocument(e.fileName,i.getCompilerOptions())})),i=void 0),n=void 0},cleanupSemanticCache:function(){i=void 0},getSyntacticDiagnostics:function(e){return y(),i.getSyntacticDiagnostics(_(e),l).slice()},getSemanticDiagnostics:function(e){y();var t=_(e),n=i.getSemanticDiagnostics(t,l);if(!i.getCompilerOptions().declaration)return n.slice();var r=i.getDeclarationDiagnostics(t,l);return n.concat(r)},getCompilerOptionsDiagnostics:function(){return y(),i.getOptionsDiagnostics(l).concat(i.getGlobalDiagnostics(l))},getSyntacticClassifications:function(t,n){return e.getSyntacticClassifications(l,o.getCurrentSourceFile(t),n)},getSemanticClassifications:function(t,n){return T(t)?(y(),e.getSemanticClassifications(i.getTypeChecker(),l,_(t),i.getClassifiableNames(),n)):[]},getEncodedSyntacticClassifications:function(t,n){return e.getEncodedSyntacticClassifications(l,o.getCurrentSourceFile(t),n)},getEncodedSemanticClassifications:function(t,n){return T(t)?(y(),e.getEncodedSemanticClassifications(i.getTypeChecker(),l,_(t),i.getClassifiableNames(),n)):{spans:[],endOfLineState:0}},getCompletionsAtPosition:function(t,r){return y(),e.Completions.getCompletionsAtPosition(n,i.getTypeChecker(),d,i.getCompilerOptions(),_(t),r,i.getSourceFiles())},getCompletionEntryDetails:function(t,r,a,o,s){y();var c=o?h(o):void 0;return e.Completions.getCompletionEntryDetails(i.getTypeChecker(),d,i.getCompilerOptions(),_(t),r,{name:a,source:s},i.getSourceFiles(),n,c)},getCompletionEntrySymbol:function(t,n,r,a){return y(),e.Completions.getCompletionEntrySymbol(i.getTypeChecker(),d,i.getCompilerOptions(),_(t),n,{name:r,source:a},i.getSourceFiles())},getSignatureHelpItems:function(t,n){y();var r=_(t);return e.SignatureHelp.getSignatureHelpItems(i,r,n,l)},getQuickInfoAtPosition:function(t,n){y();var r=_(t),a=e.getTouchingPropertyName(r,n,!0);if(a!==r&&!e.isLabelName(a)){var o=i.getTypeChecker(),s=function(t,n){if((e.isIdentifier(t)||e.isStringLiteral(t))&&e.isPropertyAssignment(t.parent)&&t.parent.name===t){var r=n.getContextualType(t.parent.parent);if(r){var i=n.getPropertyOfType(r,e.getTextOfIdentifierOrLiteral(t));if(i)return i}}return n.getSymbolAtLocation(t)}(a,o);if(s&&!o.isUnknownSymbol(s)){var c=e.SymbolDisplay.getSymbolDisplayPartsDocumentationAndSymbolKind(o,s,r,e.getContainerNode(a),a);return{kind:c.symbolKind,kindModifiers:e.SymbolDisplay.getSymbolModifiers(s),textSpan:e.createTextSpan(a.getStart(),a.getWidth()),displayParts:c.displayParts,documentation:c.documentation,tags:c.tags}}switch(a.kind){case 71:case 179:case 143:case 99:case 169:case 97:var l=o.getTypeAtLocation(a);if(l)return{kind:"",kindModifiers:"",textSpan:e.createTextSpan(a.getStart(),a.getWidth()),displayParts:e.typeToDisplayParts(o,l,e.getContainerNode(a)),documentation:l.symbol?l.symbol.getDocumentationComment():void 0,tags:l.symbol?l.symbol.getJsDocTags():void 0}}}},getDefinitionAtPosition:function(t,n){return y(),e.GoToDefinition.getDefinitionAtPosition(i,_(t),n)},getImplementationAtPosition:function(t,n){return y(),e.FindAllReferences.getImplementationsAtPosition(i,l,i.getSourceFiles(),_(t),n)},getTypeDefinitionAtPosition:function(t,n){return y(),e.GoToDefinition.getTypeDefinitionAtPosition(i.getTypeChecker(),_(t),n)},getReferencesAtPosition:function(e,t){return k(e,t)},findReferences:function(t,n){return y(),e.FindAllReferences.findReferencedSymbols(i,l,i.getSourceFiles(),_(t),n)},getOccurrencesAtPosition:function(t,n){var r=function(e,t){return n(x(e,t,[e]));function n(e){if(e){for(var t=[],n=0,r=e;n<r.length;n++)for(var i=r[n],a=0,o=i.highlightSpans;a<o.length;a++){var s=o[a];t.push({fileName:i.fileName,textSpan:s.textSpan,isWriteAccess:"writtenReference"===s.kind,isDefinition:!1,isInString:s.isInString})}return t}}}(t,n);if(r){var i=f(e.normalizeSlashes(t));r=e.filter(r,(function(t){return f(e.normalizeSlashes(t.fileName))===i}))}return r},getDocumentHighlights:x,getNameOrDottedNameSpan:function(t,n,r){var i=o.getCurrentSourceFile(t),a=e.getTouchingPropertyName(i,n,!1);if(a!==i){switch(a.kind){case 179:case 143:case 9:case 86:case 101:case 95:case 97:case 99:case 169:case 71:break;default:return}for(var s=a;;)if(e.isRightSideOfPropertyAccess(s)||e.isRightSideOfQualifiedName(s))s=s.parent;else{if(!e.isNameOfModuleDeclaration(s))break;if(233!==s.parent.parent.kind||s.parent.parent.body!==s.parent)break;s=s.parent.parent.name}return e.createTextSpanFromBounds(s.getStart(),a.getEnd())}},getBreakpointStatementAtPosition:function(t,n){var r=o.getCurrentSourceFile(t);return e.BreakpointResolver.spanInSourceFileAtLocation(r,n)},getNavigateToItems:function(t,n,r,a){y();var o=r?[_(r)]:i.getSourceFiles();return e.NavigateTo.getNavigateToItems(o,i.getTypeChecker(),l,t,n,a)},getRenameInfo:function(t,r){y();var a=n.getDefaultLibFileName(n.getCompilationSettings());return e.Rename.getRenameInfo(i.getTypeChecker(),a,f,_(t),r)},findRenameLocations:function(e,t,n,r){return k(e,t,{findInStrings:n,findInComments:r,isForRename:!0})},getNavigationBarItems:function(t){return e.NavigationBar.getNavigationBarItems(o.getCurrentSourceFile(t),l)},getNavigationTree:function(t){return e.NavigationBar.getNavigationTree(o.getCurrentSourceFile(t),l)},getOutliningSpans:function(t){var n=o.getCurrentSourceFile(t);return e.OutliningElementsCollector.collectElements(n,l)},getTodoComments:function(t,n){y();var r=_(t);l.throwIfCancellationRequested();var i,a,o=r.text,s=[];if(n.length>0&&(a=r.fileName,!e.stringContains(a,"/node_modules/")))for(var c=function(){var t="("+/(?:^(?:\s|\*)*)/.source+"|"+/(?:\/\/+\s*)/.source+"|"+/(?:\/\*+\s*)/.source+")",r="(?:"+e.map(n,(function(e){return"("+(e.text.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")+")")})).join("|")+")";return new RegExp(t+"("+r+/(?:.*?)/.source+")"+/(?:$|\*\/)/.source,"gim")}(),u=void 0;u=c.exec(o);){l.throwIfCancellationRequested();e.Debug.assert(u.length===n.length+3);var d=u[1],p=u.index+d.length;if(e.isInComment(r,p)){for(var f=void 0,m=0;m<n.length;m++)u[m+3]&&(f=n[m]);if(e.Debug.assert(void 0!==f),!((i=o.charCodeAt(p+f.text.length))>=97&&i<=122||i>=65&&i<=90||i>=48&&i<=57)){var g=u[2];s.push({descriptor:f,message:g,position:p})}}}return s},getBraceMatchingAtPosition:function(t,n){var r=o.getCurrentSourceFile(t),i=[],a=e.getTouchingToken(r,n,!1);if(a.getStart(r)===n){var s=function(e){switch(e.kind){case 17:return 18;case 19:return 20;case 21:return 22;case 27:return 29;case 18:return 17;case 20:return 19;case 22:return 21;case 29:return 27}return}(a);if(s)for(var c=0,l=a.parent.getChildren(r);c<l.length;c++){var u=l[c];if(u.kind===s){var d=e.createTextSpan(a.getStart(r),a.getWidth(r)),p=e.createTextSpan(u.getStart(r),u.getWidth(r));d.start<p.start?i.push(d,p):i.push(p,d);break}}}return i},getIndentationAtPosition:function(t,n,r){var i=e.timestamp(),a=p(r),s=o.getCurrentSourceFile(t);d("getIndentationAtPosition: getCurrentSourceFile: "+(e.timestamp()-i)),i=e.timestamp();var c=e.formatting.SmartIndenter.getIndentation(n,s,a);return d("getIndentationAtPosition: computeIndentation  : "+(e.timestamp()-i)),c},getFormattingEditsForRange:function(t,n,r,i){var a=o.getCurrentSourceFile(t),s=p(i);return e.formatting.formatSelection(n,r,a,h(s),s)},getFormattingEditsForDocument:function(t,n){var r=o.getCurrentSourceFile(t),i=p(n);return e.formatting.formatDocument(r,h(i),i)},getFormattingEditsAfterKeystroke:function(t,n,r,i){var a=o.getCurrentSourceFile(t),s=p(i);if(!e.isInComment(a,n)){if("{"===r)return e.formatting.formatOnOpeningCurly(n,a,h(s),s);if("}"===r)return e.formatting.formatOnClosingCurly(n,a,h(s),s);if(";"===r)return e.formatting.formatOnSemicolon(n,a,h(s),s);if("\n"===r)return e.formatting.formatOnEnter(n,a,h(s),s)}return[]},getDocCommentTemplateAtPosition:function(t,r){return e.JsDoc.getDocCommentTemplateAtPosition(e.getNewLineOrDefaultFromHost(n),o.getCurrentSourceFile(t),r)},isValidBraceCompletionAtPosition:function(t,n,r){if(60===r)return!1;var i=o.getCurrentSourceFile(t);if(e.isInString(i,n))return!1;if(e.isInsideJsxElementOrAttribute(i,n))return 123===r;if(e.isInTemplateString(i,n))return!1;switch(r){case 39:case 34:case 96:return!e.isInComment(i,n)}return!0},getSpanOfEnclosingComment:function(t,n,r){var i=o.getCurrentSourceFile(t),a=e.formatting.getRangeOfEnclosingComment(i,n,r);return a&&e.createTextSpanFromRange(a)},getCodeFixesAtPosition:function(t,r,a,o,s){y();var c=_(t),u=e.createTextSpanFromBounds(r,a),d=e.getNewLineOrDefaultFromHost(n),p=h(s);return e.flatMap(e.deduplicate(o),(function(t){return l.throwIfCancellationRequested(),e.codefix.getFixes({errorCode:t,sourceFile:c,span:u,program:i,newLineCharacter:d,host:n,cancellationToken:l,rulesProvider:p})}))},applyCodeActionCommand:function(t,r){switch(t=e.toPath(t,u,f),r.type){case"install package":return n.installPackage?n.installPackage({fileName:t,packageName:r.packageName}):Promise.reject("Host does not implement `installPackage`");default:e.Debug.fail()}},getEmitOutput:function(t,r){y();var a=_(t),o=n.getCustomTransformers&&n.getCustomTransformers();return e.getFileEmitOutput(i,a,r,l,o)},getNonBoundSourceFile:S,getSourceFile:function(e){return S(e)},getProgram:v,getApplicableRefactors:function(t,n){y();var r=_(t);return e.refactor.getApplicableRefactors(C(r,n))},getEditsForRefactor:function(t,n,r,i,a){y();var o=_(t);return e.refactor.getEditsForRefactor(C(o,r,n),i,a)}}},e.getNameTable=function(t){return t.nameTable||function(t){var n=t.nameTable=e.createUnderscoreEscapedMap();t.forEachChild((function t(r){if(e.isIdentifier(r)&&r.escapedText||e.isStringOrNumericLiteral(r)&&function(t){return e.isDeclarationName(t)||248===t.parent.kind||function(e){return e&&e.parent&&180===e.parent.kind&&e.parent.argumentExpression===e}(t)||e.isLiteralComputedPropertyDeclarationName(t)}(r)){var i=e.getEscapedTextOfIdentifierOrLiteral(r);n.set(i,void 0===n.get(i)?r.pos:-1)}if(e.forEachChild(r,t),e.hasJSDocNodes(r))for(var a=0,o=r.jsDoc;a<o.length;a++){var s=o[a];e.forEachChild(s,t)}}))}(t),t.nameTable},e.getContainingObjectLiteralElement=function(e){switch(e.kind){case 9:case 8:if(144===e.parent.kind)return k(e.parent.parent)?e.parent.parent:void 0;case 71:return!k(e.parent)||178!==e.parent.parent.kind&&254!==e.parent.parent.kind||e.parent.name!==e?void 0:e.parent}},e.getPropertySymbolsFromContextualType=function(e,t){var n=t.parent;return S(e.getContextualType(n),t.name)},e.getPropertySymbolsFromType=S,e.getDefaultLibFilePath=function(t){if("undefined"!=typeof __dirname)return __dirname+e.directorySeparator+e.getDefaultLibFileName(t);throw new Error("getDefaultLibFilePath is only supported when consumed as a node module. ")},e.objectAllocator={getNodeConstructor:function(){return r},getTokenConstructor:function(){return o},getIdentifierConstructor:function(){return s},getSourceFileConstructor:function(){return u},getSymbolConstructor:function(){return a},getTypeConstructor:function(){return c},getSignatureConstructor:function(){return l},getSourceMapSourceConstructor:function(){return d}}}(ts||(ts={})),function(e){!function(t){t.spanInSourceFileAtLocation=function(t,n){if(!t.isDeclarationFile){var r=e.getTokenAtPosition(t,n,!1),i=t.getLineAndCharacterOfPosition(n).line;if((!(t.getLineAndCharacterOfPosition(r.getStart(t)).line>i)||(r=e.findPrecedingToken(r.pos,t))&&t.getLineAndCharacterOfPosition(r.getEnd()).line===i)&&!e.isInAmbientContext(r))return u(r)}function a(n,r){var i=n.decorators?e.skipTrivia(t.text,n.decorators.end):n.getStart(t);return e.createTextSpanFromBounds(i,(r||n).getEnd())}function o(t,n){return a(t,e.findNextToken(n,n.parent))}function s(e,n){return e&&i===t.getLineAndCharacterOfPosition(e.getStart(t)).line?u(e):u(n)}function c(n){return u(e.findPrecedingToken(n.pos,t))}function l(t){return u(e.findNextToken(t,t.parent))}function u(n){if(n)switch(n.kind){case 208:return f(n.declarationList.declarations[0]);case 226:case 149:case 148:return f(n);case 146:return function t(n){if(e.isBindingPattern(n.name))return h(n.name);if(function(t){return!!t.initializer||void 0!==t.dotDotDotToken||e.hasModifier(t,12)}(n))return a(n);var r=n.parent,i=e.indexOf(r.parameters,n);return i?t(r.parameters[i-1]):u(r.body)}(n);case 228:case 151:case 150:case 153:case 154:case 152:case 186:case 187:return function(e){if(!e.body)return;if(_(e))return a(e);return u(e.body)}(n);case 207:if(e.isFunctionBlock(n))return function(e){var t=e.statements.length?e.statements[0]:e.getLastToken();if(_(e.parent))return s(e.parent,t);return u(t)}(n);case 234:return m(n);case 260:return m(n.block);case 210:return a(n.expression);case 219:return a(n.getChildAt(0),n.expression);case 213:return o(n,n.expression);case 212:return u(n.statement);case 225:return a(n.getChildAt(0));case 211:return o(n,n.expression);case 222:return u(n.statement);case 218:case 217:return a(n.getChildAt(0),n.label);case 214:return function(e){if(e.initializer)return g(e);if(e.condition)return a(e.condition);if(e.incrementor)return a(e.incrementor)}(n);case 215:return o(n,n.expression);case 216:return g(n);case 221:return o(n,n.expression);case 257:case 258:return u(n.statements[0]);case 224:return m(n.tryBlock);case 223:case 243:return a(n,n.expression);case 237:return a(n,n.moduleReference);case 238:case 244:return a(n,n.moduleSpecifier);case 233:if(1!==e.getModuleInstanceState(n))return;case 229:case 232:case 264:case 176:return a(n);case 220:return u(n.statement);case 147:return d=n.parent.decorators,e.createTextSpanFromBounds(e.skipTrivia(t.text,d.pos),d.end);case 174:case 175:return h(n);case 230:case 231:return;case 25:case 1:return s(e.findPrecedingToken(n.pos,t));case 26:return c(n);case 17:return function(n){switch(n.parent.kind){case 232:var r=n.parent;return s(e.findPrecedingToken(n.pos,t,n.parent),r.members.length?r.members[0]:r.getLastToken(t));case 229:var i=n.parent;return s(e.findPrecedingToken(n.pos,t,n.parent),i.members.length?i.members[0]:i.getLastToken(t));case 235:return s(n.parent.parent,n.parent.clauses[0])}return u(n.parent)}(n);case 18:return function(t){switch(t.parent.kind){case 234:if(1!==e.getModuleInstanceState(t.parent.parent))return;case 232:case 229:return a(t);case 207:if(e.isFunctionBlock(t.parent))return a(t);case 260:return u(e.lastOrUndefined(t.parent.statements));case 235:var n=t.parent,r=e.lastOrUndefined(n.clauses);return r?u(e.lastOrUndefined(r.statements)):void 0;case 174:var i=t.parent;return u(e.lastOrUndefined(i.elements)||i);default:if(e.isArrayLiteralOrObjectLiteralDestructuringPattern(t.parent)){var o=t.parent;return a(e.lastOrUndefined(o.properties)||o)}return u(t.parent)}}(n);case 22:return function(t){switch(t.parent.kind){case 175:var n=t.parent;return a(e.lastOrUndefined(n.elements)||n);default:if(e.isArrayLiteralOrObjectLiteralDestructuringPattern(t.parent)){var r=t.parent;return a(e.lastOrUndefined(r.elements)||r)}return u(t.parent)}}(n);case 19:return function(e){if(212===e.parent.kind||181===e.parent.kind||182===e.parent.kind)return c(e);if(185===e.parent.kind)return l(e);return u(e.parent)}(n);case 20:return function(e){switch(e.parent.kind){case 186:case 228:case 187:case 151:case 150:case 153:case 154:case 152:case 213:case 212:case 214:case 216:case 181:case 182:case 185:return c(e);default:return u(e.parent)}}(n);case 56:return function(t){if(e.isFunctionLike(t.parent)||261===t.parent.kind||146===t.parent.kind)return c(t);return u(t.parent)}(n);case 29:case 27:return function(e){if(184===e.parent.kind)return l(e);return u(e.parent)}(n);case 106:return function(e){if(212===e.parent.kind)return o(e,e.parent.expression);return u(e.parent)}(n);case 82:case 74:case 87:return l(n);case 142:return function(e){if(216===e.parent.kind)return l(e);return u(e.parent)}(n);default:if(e.isArrayLiteralOrObjectLiteralDestructuringPattern(n))return y(n);if((71===n.kind||198===n.kind||261===n.kind||262===n.kind)&&e.isArrayLiteralOrObjectLiteralDestructuringPattern(n.parent))return a(n);if(194===n.kind){var r=n;if(e.isArrayLiteralOrObjectLiteralDestructuringPattern(r.left))return y(r.left);if(58===r.operatorToken.kind&&e.isArrayLiteralOrObjectLiteralDestructuringPattern(r.parent))return a(n);if(26===r.operatorToken.kind)return u(r.left)}if(e.isPartOfExpression(n))switch(n.parent.kind){case 212:return c(n);case 147:return u(n.parent);case 214:case 216:return a(n);case 194:if(26===n.parent.operatorToken.kind)return a(n);break;case 187:if(n.parent.body===n)return a(n)}if(261===n.parent.kind&&n.parent.name===n&&!e.isArrayLiteralOrObjectLiteralDestructuringPattern(n.parent.parent))return u(n.parent.initializer);if(184===n.parent.kind&&n.parent.type===n)return l(n.parent.type);if(e.isFunctionLike(n.parent)&&n.parent.type===n)return c(n);if(226===n.parent.kind||146===n.parent.kind){var i=n.parent;if(i.initializer===n||i.type===n||e.isAssignmentOperator(n.kind))return c(n)}if(194===n.parent.kind){r=n.parent;if(e.isArrayLiteralOrObjectLiteralDestructuringPattern(r.left)&&(r.right===n||r.operatorToken===n))return c(n)}return u(n.parent)}var d;function p(n){return 227===n.parent.kind&&n.parent.declarations[0]===n?a(e.findPrecedingToken(n.pos,t,n.parent),n):a(n)}function f(n){return 215===n.parent.parent.kind?u(n.parent.parent):e.isBindingPattern(n.name)?h(n.name):n.initializer||e.hasModifier(n,1)||216===n.parent.parent.kind?p(n):227===n.parent.kind&&n.parent.declarations[0]!==n?u(e.findPrecedingToken(n.pos,t,n.parent)):void 0}function _(t){return e.hasModifier(t,1)||229===t.parent.kind&&152!==t.kind}function m(n){switch(n.parent.kind){case 233:if(1!==e.getModuleInstanceState(n.parent))return;case 213:case 211:case 215:return s(n.parent,n.statements[0]);case 214:case 216:return s(e.findPrecedingToken(n.pos,t,n.parent),n.statements[0])}return u(n.statements[0])}function g(e){if(227!==e.initializer.kind)return u(e.initializer);var t=e.initializer;return t.declarations.length>0?u(t.declarations[0]):void 0}function h(t){var n=e.forEach(t.elements,(function(e){return 200!==e.kind?e:void 0}));return n?u(n):176===t.parent.kind?a(t.parent):p(t.parent)}function y(t){e.Debug.assert(175!==t.kind&&174!==t.kind);var n=177===t.kind?t.elements:t.properties,r=e.forEach(n,(function(e){return 200!==e.kind?e:void 0}));return r?u(r):a(194===t.parent.kind?t.parent:t)}}}}(e.BreakpointResolver||(e.BreakpointResolver={}))}(ts||(ts={})),function(e){e.transform=function(t,n,r){var i=[];r=e.fixupCompilerOptions(r,i);var a=e.isArray(t)?t:[t],o=e.transformNodes(void 0,void 0,r,a,n,!0);return o.diagnostics=e.concatenate(o.diagnostics,i),o}}(ts||(ts={}));var debugObjectHost=function(){return this}(),ts,TypeScript;!function(e){function t(e,t){e&&e.log("*INTERNAL ERROR* - Exception in typescript services: "+t.message)}var n=function(){function t(e){this.scriptSnapshotShim=e}return t.prototype.getText=function(e,t){return this.scriptSnapshotShim.getText(e,t)},t.prototype.getLength=function(){return this.scriptSnapshotShim.getLength()},t.prototype.getChangeRange=function(t){var n=t,r=this.scriptSnapshotShim.getChangeRange(n.scriptSnapshotShim);if(null===r)return null;var i=JSON.parse(r);return e.createTextChangeRange(e.createTextSpan(i.span.start,i.span.length),i.newLength)},t.prototype.dispose=function(){"dispose"in this.scriptSnapshotShim&&this.scriptSnapshotShim.dispose()},t}(),r=function(){function t(t){var n=this;this.shimHost=t,this.loggingEnabled=!1,this.tracingEnabled=!1,"getModuleResolutionsForFile"in this.shimHost&&(this.resolveModuleNames=function(t,r){var i=JSON.parse(n.shimHost.getModuleResolutionsForFile(r));return e.map(t,(function(t){var n=e.getProperty(i,t);return n?{resolvedFileName:n,extension:e.extensionFromPath(n),isExternalLibraryImport:!1}:void 0}))}),"directoryExists"in this.shimHost&&(this.directoryExists=function(e){return n.shimHost.directoryExists(e)}),"getTypeReferenceDirectiveResolutionsForFile"in this.shimHost&&(this.resolveTypeReferenceDirectives=function(t,r){var i=JSON.parse(n.shimHost.getTypeReferenceDirectiveResolutionsForFile(r));return e.map(t,(function(t){return e.getProperty(i,t)}))})}return t.prototype.log=function(e){this.loggingEnabled&&this.shimHost.log(e)},t.prototype.trace=function(e){this.tracingEnabled&&this.shimHost.trace(e)},t.prototype.error=function(e){this.shimHost.error(e)},t.prototype.getProjectVersion=function(){if(this.shimHost.getProjectVersion)return this.shimHost.getProjectVersion()},t.prototype.getTypeRootsVersion=function(){return this.shimHost.getTypeRootsVersion?this.shimHost.getTypeRootsVersion():0},t.prototype.useCaseSensitiveFileNames=function(){return!!this.shimHost.useCaseSensitiveFileNames&&this.shimHost.useCaseSensitiveFileNames()},t.prototype.getCompilationSettings=function(){var e=this.shimHost.getCompilationSettings();if(null===e||""===e)throw Error("LanguageServiceShimHostAdapter.getCompilationSettings: empty compilationSettings");var t=JSON.parse(e);return t.allowNonTsExtensions=!0,t},t.prototype.getScriptFileNames=function(){var e=this.shimHost.getScriptFileNames();return this.files=JSON.parse(e)},t.prototype.getScriptSnapshot=function(e){var t=this.shimHost.getScriptSnapshot(e);return t&&new n(t)},t.prototype.getScriptKind=function(e){return"getScriptKind"in this.shimHost?this.shimHost.getScriptKind(e):0},t.prototype.getScriptVersion=function(e){return this.shimHost.getScriptVersion(e)},t.prototype.getLocalizedDiagnosticMessages=function(){var e=this.shimHost.getLocalizedDiagnosticMessages();if(null===e||""===e)return null;try{return JSON.parse(e)}catch(e){return this.log(e.description||"diagnosticMessages.generated.json has invalid JSON format"),null}},t.prototype.getCancellationToken=function(){var t=this.shimHost.getCancellationToken();return new e.ThrottledCancellationToken(t)},t.prototype.getCurrentDirectory=function(){return this.shimHost.getCurrentDirectory()},t.prototype.getDirectories=function(e){return JSON.parse(this.shimHost.getDirectories(e))},t.prototype.getDefaultLibFileName=function(e){return this.shimHost.getDefaultLibFileName(JSON.stringify(e))},t.prototype.readDirectory=function(t,n,r,i,a){var o=e.getFileMatcherPatterns(t,r,i,this.shimHost.useCaseSensitiveFileNames(),this.shimHost.getCurrentDirectory());return JSON.parse(this.shimHost.readDirectory(t,JSON.stringify(n),JSON.stringify(o.basePaths),o.excludePattern,o.includeFilePattern,o.includeDirectoryPattern,a))},t.prototype.readFile=function(e,t){return this.shimHost.readFile(e,t)},t.prototype.fileExists=function(e){return this.shimHost.fileExists(e)},t}();e.LanguageServiceShimHostAdapter=r;var i=function(){function t(e){var t=this;this.shimHost=e,this.useCaseSensitiveFileNames=!!this.shimHost.useCaseSensitiveFileNames&&this.shimHost.useCaseSensitiveFileNames(),"directoryExists"in this.shimHost&&(this.directoryExists=function(e){return t.shimHost.directoryExists(e)}),"realpath"in this.shimHost&&(this.realpath=function(e){return t.shimHost.realpath(e)})}return t.prototype.readDirectory=function(t,n,r,i,a){var o=e.getFileMatcherPatterns(t,r,i,this.shimHost.useCaseSensitiveFileNames(),this.shimHost.getCurrentDirectory());return JSON.parse(this.shimHost.readDirectory(t,JSON.stringify(n),JSON.stringify(o.basePaths),o.excludePattern,o.includeFilePattern,o.includeDirectoryPattern,a))},t.prototype.fileExists=function(e){return this.shimHost.fileExists(e)},t.prototype.readFile=function(e){return this.shimHost.readFile(e)},t.prototype.getDirectories=function(e){return JSON.parse(this.shimHost.getDirectories(e))},t}();function a(e,t,n,r){return o(e,t,!0,n,r)}function o(n,r,i,a,o){try{var s=function(t,n,r,i){var a;i&&(t.log(n),a=e.timestamp());var o=r();if(i){var s=e.timestamp();if(t.log(n+" completed in "+(s-a)+" msec"),e.isString(o)){var c=o;c.length>128&&(c=c.substring(0,128)+"..."),t.log("  result.length="+c.length+", result='"+JSON.stringify(c)+"'")}}return o}(n,r,a,o);return i?JSON.stringify({result:s}):s}catch(i){return i instanceof e.OperationCanceledException?JSON.stringify({canceled:!0}):(t(n,i),i.description=r,JSON.stringify({error:i}))}}e.CoreServicesShimHostAdapter=i;var s=function(){function e(e){this.factory=e,e.registerShim(this)}return e.prototype.dispose=function(e){this.factory.unregisterShim(this)},e}();function c(t,n){return t.map((function(t){return function(t,n){return{message:e.flattenDiagnosticMessageText(t.messageText,n),start:t.start,length:t.length,category:e.DiagnosticCategory[t.category].toLowerCase(),code:t.code}}(t,n)}))}e.realizeDiagnostics=c;var l=function(t){function n(e,n,r){var i=t.call(this,e)||this;return i.host=n,i.languageService=r,i.logPerformance=!1,i.logger=i.host,i}return __extends(n,t),n.prototype.forwardJSONCall=function(e,t){return a(this.logger,e,t,this.logPerformance)},n.prototype.dispose=function(e){this.logger.log("dispose()"),this.languageService.dispose(),this.languageService=null,debugObjectHost&&debugObjectHost.CollectGarbage&&(debugObjectHost.CollectGarbage(),this.logger.log("CollectGarbage()")),this.logger=null,t.prototype.dispose.call(this,e)},n.prototype.refresh=function(e){this.forwardJSONCall("refresh("+e+")",(function(){return null}))},n.prototype.cleanupSemanticCache=function(){var e=this;this.forwardJSONCall("cleanupSemanticCache()",(function(){return e.languageService.cleanupSemanticCache(),null}))},n.prototype.realizeDiagnostics=function(t){var n=e.getNewLineOrDefaultFromHost(this.host);return e.realizeDiagnostics(t,n)},n.prototype.getSyntacticClassifications=function(t,n,r){var i=this;return this.forwardJSONCall("getSyntacticClassifications('"+t+"', "+n+", "+r+")",(function(){return i.languageService.getSyntacticClassifications(t,e.createTextSpan(n,r))}))},n.prototype.getSemanticClassifications=function(t,n,r){var i=this;return this.forwardJSONCall("getSemanticClassifications('"+t+"', "+n+", "+r+")",(function(){return i.languageService.getSemanticClassifications(t,e.createTextSpan(n,r))}))},n.prototype.getEncodedSyntacticClassifications=function(t,n,r){var i=this;return this.forwardJSONCall("getEncodedSyntacticClassifications('"+t+"', "+n+", "+r+")",(function(){return u(i.languageService.getEncodedSyntacticClassifications(t,e.createTextSpan(n,r)))}))},n.prototype.getEncodedSemanticClassifications=function(t,n,r){var i=this;return this.forwardJSONCall("getEncodedSemanticClassifications('"+t+"', "+n+", "+r+")",(function(){return u(i.languageService.getEncodedSemanticClassifications(t,e.createTextSpan(n,r)))}))},n.prototype.getSyntacticDiagnostics=function(e){var t=this;return this.forwardJSONCall("getSyntacticDiagnostics('"+e+"')",(function(){var n=t.languageService.getSyntacticDiagnostics(e);return t.realizeDiagnostics(n)}))},n.prototype.getSemanticDiagnostics=function(e){var t=this;return this.forwardJSONCall("getSemanticDiagnostics('"+e+"')",(function(){var n=t.languageService.getSemanticDiagnostics(e);return t.realizeDiagnostics(n)}))},n.prototype.getCompilerOptionsDiagnostics=function(){var e=this;return this.forwardJSONCall("getCompilerOptionsDiagnostics()",(function(){var t=e.languageService.getCompilerOptionsDiagnostics();return e.realizeDiagnostics(t)}))},n.prototype.getQuickInfoAtPosition=function(e,t){var n=this;return this.forwardJSONCall("getQuickInfoAtPosition('"+e+"', "+t+")",(function(){return n.languageService.getQuickInfoAtPosition(e,t)}))},n.prototype.getNameOrDottedNameSpan=function(e,t,n){var r=this;return this.forwardJSONCall("getNameOrDottedNameSpan('"+e+"', "+t+", "+n+")",(function(){return r.languageService.getNameOrDottedNameSpan(e,t,n)}))},n.prototype.getBreakpointStatementAtPosition=function(e,t){var n=this;return this.forwardJSONCall("getBreakpointStatementAtPosition('"+e+"', "+t+")",(function(){return n.languageService.getBreakpointStatementAtPosition(e,t)}))},n.prototype.getSignatureHelpItems=function(e,t){var n=this;return this.forwardJSONCall("getSignatureHelpItems('"+e+"', "+t+")",(function(){return n.languageService.getSignatureHelpItems(e,t)}))},n.prototype.getDefinitionAtPosition=function(e,t){var n=this;return this.forwardJSONCall("getDefinitionAtPosition('"+e+"', "+t+")",(function(){return n.languageService.getDefinitionAtPosition(e,t)}))},n.prototype.getTypeDefinitionAtPosition=function(e,t){var n=this;return this.forwardJSONCall("getTypeDefinitionAtPosition('"+e+"', "+t+")",(function(){return n.languageService.getTypeDefinitionAtPosition(e,t)}))},n.prototype.getImplementationAtPosition=function(e,t){var n=this;return this.forwardJSONCall("getImplementationAtPosition('"+e+"', "+t+")",(function(){return n.languageService.getImplementationAtPosition(e,t)}))},n.prototype.getRenameInfo=function(e,t){var n=this;return this.forwardJSONCall("getRenameInfo('"+e+"', "+t+")",(function(){return n.languageService.getRenameInfo(e,t)}))},n.prototype.findRenameLocations=function(e,t,n,r){var i=this;return this.forwardJSONCall("findRenameLocations('"+e+"', "+t+", "+n+", "+r+")",(function(){return i.languageService.findRenameLocations(e,t,n,r)}))},n.prototype.getBraceMatchingAtPosition=function(e,t){var n=this;return this.forwardJSONCall("getBraceMatchingAtPosition('"+e+"', "+t+")",(function(){return n.languageService.getBraceMatchingAtPosition(e,t)}))},n.prototype.isValidBraceCompletionAtPosition=function(e,t,n){var r=this;return this.forwardJSONCall("isValidBraceCompletionAtPosition('"+e+"', "+t+", "+n+")",(function(){return r.languageService.isValidBraceCompletionAtPosition(e,t,n)}))},n.prototype.getSpanOfEnclosingComment=function(e,t,n){var r=this;return this.forwardJSONCall("getSpanOfEnclosingComment('"+e+"', "+t+")",(function(){return r.languageService.getSpanOfEnclosingComment(e,t,n)}))},n.prototype.getIndentationAtPosition=function(e,t,n){var r=this;return this.forwardJSONCall("getIndentationAtPosition('"+e+"', "+t+")",(function(){var i=JSON.parse(n);return r.languageService.getIndentationAtPosition(e,t,i)}))},n.prototype.getReferencesAtPosition=function(e,t){var n=this;return this.forwardJSONCall("getReferencesAtPosition('"+e+"', "+t+")",(function(){return n.languageService.getReferencesAtPosition(e,t)}))},n.prototype.findReferences=function(e,t){var n=this;return this.forwardJSONCall("findReferences('"+e+"', "+t+")",(function(){return n.languageService.findReferences(e,t)}))},n.prototype.getOccurrencesAtPosition=function(e,t){var n=this;return this.forwardJSONCall("getOccurrencesAtPosition('"+e+"', "+t+")",(function(){return n.languageService.getOccurrencesAtPosition(e,t)}))},n.prototype.getDocumentHighlights=function(t,n,r){var i=this;return this.forwardJSONCall("getDocumentHighlights('"+t+"', "+n+")",(function(){var a=i.languageService.getDocumentHighlights(t,n,JSON.parse(r)),o=e.normalizeSlashes(t).toLowerCase();return e.filter(a,(function(t){return e.normalizeSlashes(t.fileName).toLowerCase()===o}))}))},n.prototype.getCompletionsAtPosition=function(e,t){var n=this;return this.forwardJSONCall("getCompletionsAtPosition('"+e+"', "+t+")",(function(){return n.languageService.getCompletionsAtPosition(e,t)}))},n.prototype.getCompletionEntryDetails=function(e,t,n,r,i){var a=this;return this.forwardJSONCall("getCompletionEntryDetails('"+e+"', "+t+", '"+n+"')",(function(){var o=JSON.parse(r);return a.languageService.getCompletionEntryDetails(e,t,n,o,i)}))},n.prototype.getFormattingEditsForRange=function(e,t,n,r){var i=this;return this.forwardJSONCall("getFormattingEditsForRange('"+e+"', "+t+", "+n+")",(function(){var a=JSON.parse(r);return i.languageService.getFormattingEditsForRange(e,t,n,a)}))},n.prototype.getFormattingEditsForDocument=function(e,t){var n=this;return this.forwardJSONCall("getFormattingEditsForDocument('"+e+"')",(function(){var r=JSON.parse(t);return n.languageService.getFormattingEditsForDocument(e,r)}))},n.prototype.getFormattingEditsAfterKeystroke=function(e,t,n,r){var i=this;return this.forwardJSONCall("getFormattingEditsAfterKeystroke('"+e+"', "+t+", '"+n+"')",(function(){var a=JSON.parse(r);return i.languageService.getFormattingEditsAfterKeystroke(e,t,n,a)}))},n.prototype.getDocCommentTemplateAtPosition=function(e,t){var n=this;return this.forwardJSONCall("getDocCommentTemplateAtPosition('"+e+"', "+t+")",(function(){return n.languageService.getDocCommentTemplateAtPosition(e,t)}))},n.prototype.getNavigateToItems=function(e,t,n){var r=this;return this.forwardJSONCall("getNavigateToItems('"+e+"', "+t+", "+n+")",(function(){return r.languageService.getNavigateToItems(e,t,n)}))},n.prototype.getNavigationBarItems=function(e){var t=this;return this.forwardJSONCall("getNavigationBarItems('"+e+"')",(function(){return t.languageService.getNavigationBarItems(e)}))},n.prototype.getNavigationTree=function(e){var t=this;return this.forwardJSONCall("getNavigationTree('"+e+"')",(function(){return t.languageService.getNavigationTree(e)}))},n.prototype.getOutliningSpans=function(e){var t=this;return this.forwardJSONCall("getOutliningSpans('"+e+"')",(function(){return t.languageService.getOutliningSpans(e)}))},n.prototype.getTodoComments=function(e,t){var n=this;return this.forwardJSONCall("getTodoComments('"+e+"')",(function(){return n.languageService.getTodoComments(e,JSON.parse(t))}))},n.prototype.getEmitOutput=function(e){var t=this;return this.forwardJSONCall("getEmitOutput('"+e+"')",(function(){return t.languageService.getEmitOutput(e)}))},n.prototype.getEmitOutputObject=function(e){var t=this;return o(this.logger,"getEmitOutput('"+e+"')",!1,(function(){return t.languageService.getEmitOutput(e)}),this.logPerformance)},n}(s);function u(e){return{spans:e.spans.join(","),endOfLineState:e.endOfLineState}}var d=function(t){function n(n,r){var i=t.call(this,n)||this;return i.logger=r,i.logPerformance=!1,i.classifier=e.createClassifier(),i}return __extends(n,t),n.prototype.getEncodedLexicalClassifications=function(e,t,n){var r=this;return a(this.logger,"getEncodedLexicalClassifications",(function(){return u(r.classifier.getEncodedLexicalClassifications(e,t,n))}),this.logPerformance)},n.prototype.getClassificationsForLine=function(e,t,n){for(var r=this.classifier.getClassificationsForLine(e,t,n),i="",a=0,o=r.entries;a<o.length;a++){var s=o[a];i+=s.length+"\n",i+=s.classification+"\n"}return i+=r.finalLexState},n}(s),p=function(t){function n(e,n,r){var i=t.call(this,e)||this;return i.logger=n,i.host=r,i.logPerformance=!1,i}return __extends(n,t),n.prototype.forwardJSONCall=function(e,t){return a(this.logger,e,t,this.logPerformance)},n.prototype.resolveModuleName=function(t,n,r){var i=this;return this.forwardJSONCall("resolveModuleName('"+t+"')",(function(){var a=JSON.parse(r),o=e.resolveModuleName(n,e.normalizeSlashes(t),a,i.host),s=o.resolvedModule?o.resolvedModule.resolvedFileName:void 0;return o.resolvedModule&&".ts"!==o.resolvedModule.extension&&".tsx"!==o.resolvedModule.extension&&".d.ts"!==o.resolvedModule.extension&&(s=void 0),{resolvedFileName:s,failedLookupLocations:o.failedLookupLocations}}))},n.prototype.resolveTypeReferenceDirective=function(t,n,r){var i=this;return this.forwardJSONCall("resolveTypeReferenceDirective("+t+")",(function(){var a=JSON.parse(r),o=e.resolveTypeReferenceDirective(n,e.normalizeSlashes(t),a,i.host);return{resolvedFileName:o.resolvedTypeReferenceDirective?o.resolvedTypeReferenceDirective.resolvedFileName:void 0,primary:!o.resolvedTypeReferenceDirective||o.resolvedTypeReferenceDirective.primary,failedLookupLocations:o.failedLookupLocations}}))},n.prototype.getPreProcessedFileInfo=function(t,n){var r=this;return this.forwardJSONCall("getPreProcessedFileInfo('"+t+"')",(function(){var t=e.preProcessFile(n.getText(0,n.getLength()),!0,!0);return{referencedFiles:r.convertFileReferences(t.referencedFiles),importedFiles:r.convertFileReferences(t.importedFiles),ambientExternalModules:t.ambientExternalModules,isLibFile:t.isLibFile,typeReferenceDirectives:r.convertFileReferences(t.typeReferenceDirectives)}}))},n.prototype.getAutomaticTypeDirectiveNames=function(t){var n=this;return this.forwardJSONCall("getAutomaticTypeDirectiveNames('"+t+"')",(function(){var r=JSON.parse(t);return e.getAutomaticTypeDirectiveNames(r,n.host)}))},n.prototype.convertFileReferences=function(t){if(t){for(var n=[],r=0,i=t;r<i.length;r++){var a=i[r];n.push({path:e.normalizeSlashes(a.fileName),position:a.pos,length:a.end-a.pos})}return n}},n.prototype.getTSConfigFileInfo=function(t,n){var r=this;return this.forwardJSONCall("getTSConfigFileInfo('"+t+"')",(function(){var i=n.getText(0,n.getLength()),a=e.parseJsonText(t,i),o=e.normalizeSlashes(t),s=e.parseJsonSourceFileConfigFileContent(a,r.host,e.getDirectoryPath(o),{},o);return{options:s.options,typeAcquisition:s.typeAcquisition,files:s.fileNames,raw:s.raw,errors:c(a.parseDiagnostics.concat(s.errors),"\r\n")}}))},n.prototype.getDefaultCompilationSettings=function(){return this.forwardJSONCall("getDefaultCompilationSettings()",(function(){return e.getDefaultCompilerOptions()}))},n.prototype.discoverTypings=function(t){var n=this,r=e.createGetCanonicalFileName(!1);return this.forwardJSONCall("discoverTypings()",(function(){var i=JSON.parse(t);return void 0===n.safeList&&(n.safeList=e.JsTyping.loadSafeList(n.host,e.toPath(i.safeListPath,i.safeListPath,r))),e.JsTyping.discoverTypings(n.host,(function(e){return n.logger.log(e)}),i.fileNames,e.toPath(i.projectRootPath,i.projectRootPath,r),n.safeList,i.packageNameToTypingLocation,i.typeAcquisition,i.unresolvedImports)}))},n}(s),f=function(){function n(){this._shims=[]}return n.prototype.getServicesVersion=function(){return e.servicesVersion},n.prototype.createLanguageServiceShim=function(n){try{void 0===this.documentRegistry&&(this.documentRegistry=e.createDocumentRegistry(n.useCaseSensitiveFileNames&&n.useCaseSensitiveFileNames(),n.getCurrentDirectory()));var i=new r(n),a=e.createLanguageService(i,this.documentRegistry);return new l(this,n,a)}catch(e){throw t(n,e),e}},n.prototype.createClassifierShim=function(e){try{return new d(this,e)}catch(n){throw t(e,n),n}},n.prototype.createCoreServicesShim=function(e){try{var n=new i(e);return new p(this,e,n)}catch(n){throw t(e,n),n}},n.prototype.close=function(){e.clear(this._shims),this.documentRegistry=void 0},n.prototype.registerShim=function(e){this._shims.push(e)},n.prototype.unregisterShim=function(e){for(var t=0;t<this._shims.length;t++)if(this._shims[t]===e)return void delete this._shims[t];throw new Error("Invalid operation")},n}();e.TypeScriptServicesFactory=f,"undefined"!=typeof module&&module.exports&&(module.exports=e)}(ts||(ts={})),function(e){!function(e){e.TypeScriptServicesFactory=ts.TypeScriptServicesFactory}(e.Services||(e.Services={}))}(TypeScript||(TypeScript={}));var toolsVersion="2.6";
/*!
 * Fuse.js v3.2.0 - Lightweight fuzzy-search (http://fusejs.io)
 * 
 * Copyright (c) 2012-2017 Kirollos Risk (http://kiro.me)
 * All Rights Reserved. Apache Software License 2.0
 * 
 * http://www.apache.org/licenses/LICENSE-2.0
 */!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("Fuse",[],t):"object"==typeof exports?exports.Fuse=t():e.Fuse=t()}(this,(function(){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=8)}([function(e,t,n){e.exports=function(e){return"[object Array]"===Object.prototype.toString.call(e)}},function(e,t,n){var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(5),a=n(7),o=n(4),s=function(){function e(t,n){var r=n.location,i=void 0===r?0:r,a=n.distance,s=void 0===a?100:a,c=n.threshold,l=void 0===c?.6:c,u=n.maxPatternLength,d=void 0===u?32:u,p=n.isCaseSensitive,f=void 0!==p&&p,_=n.tokenSeparator,m=void 0===_?/ +/g:_,g=n.findAllMatches,h=void 0!==g&&g,y=n.minMatchCharLength,v=void 0===y?1:y;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.options={location:i,distance:s,threshold:l,maxPatternLength:d,isCaseSensitive:f,tokenSeparator:m,findAllMatches:h,minMatchCharLength:v},this.pattern=this.options.isCaseSensitive?t:t.toLowerCase(),this.pattern.length<=d&&(this.patternAlphabet=o(this.pattern))}return r(e,[{key:"search",value:function(e){if(this.options.isCaseSensitive||(e=e.toLowerCase()),this.pattern===e)return{isMatch:!0,score:0,matchedIndices:[[0,e.length-1]]};var t=this.options,n=t.maxPatternLength,r=t.tokenSeparator;if(this.pattern.length>n)return i(e,this.pattern,r);var o=this.options,s=o.location,c=o.distance,l=o.threshold,u=o.findAllMatches,d=o.minMatchCharLength;return a(e,this.pattern,this.patternAlphabet,{location:s,distance:c,threshold:l,findAllMatches:u,minMatchCharLength:d})}}]),e}();e.exports=s},function(e,t,n){var r=n(0),i=function e(t,n,i){if(n){var a=n.indexOf("."),o=n,s=null;-1!==a&&(o=n.slice(0,a),s=n.slice(a+1));var c=t[o];if(null!=c)if(s||"string"!=typeof c&&"number"!=typeof c)if(r(c))for(var l=0,u=c.length;l<u;l+=1)e(c[l],s,i);else s&&e(c,s,i);else i.push(c.toString())}else i.push(t);return i};e.exports=function(e,t){return i(e,t,[])}},function(e,t,n){e.exports=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=[],r=-1,i=-1,a=0,o=e.length;a<o;a+=1){var s=e[a];s&&-1===r?r=a:s||-1===r||((i=a-1)-r+1>=t&&n.push([r,i]),r=-1)}return e[a-1]&&a-r>=t&&n.push([r,a-1]),n}},function(e,t,n){e.exports=function(e){for(var t={},n=e.length,r=0;r<n;r+=1)t[e.charAt(r)]=0;for(var i=0;i<n;i+=1)t[e.charAt(i)]|=1<<n-i-1;return t}},function(e,t,n){e.exports=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:/ +/g,r=new RegExp(t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&").replace(n,"|")),i=e.match(r),a=!!i,o=[];if(a)for(var s=0,c=i.length;s<c;s+=1){var l=i[s];o.push([e.indexOf(l),l.length-1])}return{score:a?.5:1,isMatch:a,matchedIndices:o}}},function(e,t,n){e.exports=function(e,t){var n=t.errors,r=void 0===n?0:n,i=t.currentLocation,a=void 0===i?0:i,o=t.expectedLocation,s=void 0===o?0:o,c=t.distance,l=void 0===c?100:c,u=r/e.length,d=Math.abs(s-a);return l?u+d/l:d?1:u}},function(e,t,n){var r=n(6),i=n(3);e.exports=function(e,t,n,a){for(var o=a.location,s=void 0===o?0:o,c=a.distance,l=void 0===c?100:c,u=a.threshold,d=void 0===u?.6:u,p=a.findAllMatches,f=void 0!==p&&p,_=a.minMatchCharLength,m=void 0===_?1:_,g=s,h=e.length,y=d,v=e.indexOf(t,g),b=t.length,x=[],k=0;k<h;k+=1)x[k]=0;if(-1!==v){var S=r(t,{errors:0,currentLocation:v,expectedLocation:g,distance:l});if(y=Math.min(S,y),-1!==(v=e.lastIndexOf(t,g+b))){var T=r(t,{errors:0,currentLocation:v,expectedLocation:g,distance:l});y=Math.min(T,y)}}v=-1;for(var C=[],E=1,D=b+h,A=1<<b-1,w=0;w<b;w+=1){for(var N=0,I=D;N<I;)r(t,{errors:w,currentLocation:g+I,expectedLocation:g,distance:l})<=y?N=I:D=I,I=Math.floor((D-N)/2+N);D=I;var P=Math.max(1,g-I+1),O=f?h:Math.min(g+I,h)+b,F=Array(O+2);F[O+1]=(1<<w)-1;for(var L=O;L>=P;L-=1){var R=L-1,M=n[e.charAt(R)];if(M&&(x[R]=1),F[L]=(F[L+1]<<1|1)&M,0!==w&&(F[L]|=(C[L+1]|C[L])<<1|1|C[L+1]),F[L]&A&&(E=r(t,{errors:w,currentLocation:R,expectedLocation:g,distance:l}))<=y){if(y=E,(v=R)<=g)break;P=Math.max(1,2*g-v)}}if(r(t,{errors:w+1,currentLocation:g,expectedLocation:g,distance:l})>y)break;C=F}return{isMatch:v>=0,score:0===E?.001:E,matchedIndices:i(x,m)}}},function(e,t,n){var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(1),a=n(2),o=n(0),s=function(){function e(t,n){var r=n.location,i=void 0===r?0:r,o=n.distance,s=void 0===o?100:o,c=n.threshold,l=void 0===c?.6:c,u=n.maxPatternLength,d=void 0===u?32:u,p=n.caseSensitive,f=void 0!==p&&p,_=n.tokenSeparator,m=void 0===_?/ +/g:_,g=n.findAllMatches,h=void 0!==g&&g,y=n.minMatchCharLength,v=void 0===y?1:y,b=n.id,x=void 0===b?null:b,k=n.keys,S=void 0===k?[]:k,T=n.shouldSort,C=void 0===T||T,E=n.getFn,D=void 0===E?a:E,A=n.sortFn,w=void 0===A?function(e,t){return e.score-t.score}:A,N=n.tokenize,I=void 0!==N&&N,P=n.matchAllTokens,O=void 0!==P&&P,F=n.includeMatches,L=void 0!==F&&F,R=n.includeScore,M=void 0!==R&&R,U=n.verbose,B=void 0!==U&&U;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.options={location:i,distance:s,threshold:l,maxPatternLength:d,isCaseSensitive:f,tokenSeparator:m,findAllMatches:h,minMatchCharLength:v,id:x,keys:S,includeMatches:L,includeScore:M,shouldSort:C,getFn:D,sortFn:w,verbose:B,tokenize:I,matchAllTokens:O},this.setCollection(t)}return r(e,[{key:"setCollection",value:function(e){return this.list=e,e}},{key:"search",value:function(e){this._log('---------\nSearch pattern: "'+e+'"');var t=this._prepareSearchers(e),n=t.tokenSearchers,r=t.fullSearcher,i=this._search(n,r),a=i.weights,o=i.results;return this._computeScore(a,o),this.options.shouldSort&&this._sort(o),this._format(o)}},{key:"_prepareSearchers",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=[];if(this.options.tokenize)for(var n=e.split(this.options.tokenSeparator),r=0,a=n.length;r<a;r+=1)t.push(new i(n[r],this.options));return{tokenSearchers:t,fullSearcher:new i(e,this.options)}}},{key:"_search",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1],n=this.list,r={},i=[];if("string"==typeof n[0]){for(var a=0,o=n.length;a<o;a+=1)this._analyze({key:"",value:n[a],record:a,index:a},{resultMap:r,results:i,tokenSearchers:e,fullSearcher:t});return{weights:null,results:i}}for(var s={},c=0,l=n.length;c<l;c+=1)for(var u=n[c],d=0,p=this.options.keys.length;d<p;d+=1){var f=this.options.keys[d];if("string"!=typeof f){if(s[f.name]={weight:1-f.weight||1},f.weight<=0||f.weight>1)throw new Error("Key weight has to be > 0 and <= 1");f=f.name}else s[f]={weight:1};this._analyze({key:f,value:this.options.getFn(u,f),record:u,index:c},{resultMap:r,results:i,tokenSearchers:e,fullSearcher:t})}return{weights:s,results:i}}},{key:"_analyze",value:function(e,t){var n=e.key,r=e.arrayIndex,i=void 0===r?-1:r,a=e.value,s=e.record,c=e.index,l=t.tokenSearchers,u=void 0===l?[]:l,d=t.fullSearcher,p=void 0===d?[]:d,f=t.resultMap,_=void 0===f?{}:f,m=t.results,g=void 0===m?[]:m;if(null!=a){var h=!1,y=-1,v=0;if("string"==typeof a){this._log("\nKey: "+(""===n?"-":n));var b=p.search(a);if(this._log('Full text: "'+a+'", score: '+b.score),this.options.tokenize){for(var x=a.split(this.options.tokenSeparator),k=[],S=0;S<u.length;S+=1){var T=u[S];this._log('\nPattern: "'+T.pattern+'"');for(var C=!1,E=0;E<x.length;E+=1){var D=x[E],A=T.search(D),w={};A.isMatch?(w[D]=A.score,h=!0,C=!0,k.push(A.score)):(w[D]=1,this.options.matchAllTokens||k.push(1)),this._log('Token: "'+D+'", score: '+w[D])}C&&(v+=1)}y=k[0];for(var N=k.length,I=1;I<N;I+=1)y+=k[I];y/=N,this._log("Token score average:",y)}var P=b.score;y>-1&&(P=(P+y)/2),this._log("Score average:",P);var O=!this.options.tokenize||!this.options.matchAllTokens||v>=u.length;if(this._log("\nCheck Matches: "+O),(h||b.isMatch)&&O){var F=_[c];F?F.output.push({key:n,arrayIndex:i,value:a,score:P,matchedIndices:b.matchedIndices}):(_[c]={item:s,output:[{key:n,arrayIndex:i,value:a,score:P,matchedIndices:b.matchedIndices}]},g.push(_[c]))}}else if(o(a))for(var L=0,R=a.length;L<R;L+=1)this._analyze({key:n,arrayIndex:L,value:a[L],record:s,index:c},{resultMap:_,results:g,tokenSearchers:u,fullSearcher:p})}}},{key:"_computeScore",value:function(e,t){this._log("\n\nComputing score:\n");for(var n=0,r=t.length;n<r;n+=1){for(var i=t[n].output,a=i.length,o=0,s=1,c=0;c<a;c+=1){var l=e?e[i[c].key].weight:1,u=(1===l?i[c].score:i[c].score||.001)*l;1!==l?s=Math.min(s,u):(i[c].nScore=u,o+=u)}t[n].score=1===s?o/a:s,this._log(t[n])}}},{key:"_sort",value:function(e){this._log("\n\nSorting...."),e.sort(this.options.sortFn)}},{key:"_format",value:function(e){var t=[];this._log("\n\nOutput:\n\n",JSON.stringify(e));var n=[];this.options.includeMatches&&n.push((function(e,t){var n=e.output;t.matches=[];for(var r=0,i=n.length;r<i;r+=1){var a=n[r];if(0!==a.matchedIndices.length){var o={indices:a.matchedIndices,value:a.value};a.key&&(o.key=a.key),a.hasOwnProperty("arrayIndex")&&a.arrayIndex>-1&&(o.arrayIndex=a.arrayIndex),t.matches.push(o)}}})),this.options.includeScore&&n.push((function(e,t){t.score=e.score}));for(var r=0,i=e.length;r<i;r+=1){var a=e[r];if(this.options.id&&(a.item=this.options.getFn(a.item,this.options.id)[0]),n.length){for(var o={item:a.item},s=0,c=n.length;s<c;s+=1)n[s](a,o);t.push(o)}else t.push(a.item)}return t}},{key:"_log",value:function(){var e;this.options.verbose&&(e=console).log.apply(e,arguments)}}]),e}();e.exports=s}])}));var e=function(){function t(e,t){postMessage({action:je,cbn:t,result:e})}function n(e){var t=[];return t[e-1]=void 0,t}function r(e,t){return o(e[0]+t[0],e[1]+t[1])}function i(e,t){return function(e,t){var n;return n=t,0>t&&(n+=Ke),[n,e*Ke]}(~~Math.max(Math.min(e[1]/Ke,2147483647),-2147483648)&~~Math.max(Math.min(t[1]/Ke,2147483647),-2147483648),l(e)&l(t))}function a(e,t){var n,r;return e[0]==t[0]&&e[1]==t[1]?0:(n=0>e[1],r=0>t[1],n&&!r?-1:!n&&r?1:f(e,t)[1]<0?-1:1)}function o(e,t){var n,r;for(e%=0x10000000000000000,t=(t%=0x10000000000000000)-(n=t%Ke)+(r=Math.floor(e/Ke)*Ke),e=e-r+n;0>e;)e+=Ke,t-=Ke;for(;e>4294967295;)e-=Ke,t+=Ke;for(t%=0x10000000000000000;t>0x7fffffff00000000;)t-=0x10000000000000000;for(;-0x8000000000000000>t;)t+=0x10000000000000000;return[e,t]}function s(e,t){return e[0]==t[0]&&e[1]==t[1]}function c(e){return e>=0?[e,0]:[e+Ke,-Ke]}function l(e){return e[0]>=2147483648?~~Math.max(Math.min(e[0]-Ke,2147483647),-2147483648):~~Math.max(Math.min(e[0],2147483647),-2147483648)}function u(e){return 30>=e?1<<e:u(30)*u(e-30)}function d(e,t){var n,r,i,a;if(t&=63,s(e,Je))return t?qe:e;if(0>e[1])throw Error("Neg");return a=u(t),r=e[1]*a%0x10000000000000000,(r+=n=(i=e[0]*a)-i%Ke)>=0x8000000000000000&&(r-=0x10000000000000000),[i-=n,r]}function p(e,t){var n;return n=u(t&=63),o(Math.floor(e[0]/n),e[1]/n)}function f(e,t){return o(e[0]-t[0],e[1]-t[1])}function _(e,t){return e.Mc=t,e.Lc=0,e.Yb=t.length,e}function m(e){return e.Lc>=e.Yb?-1:255&e.Mc[e.Lc++]}function g(e,t,n,r){return e.Lc>=e.Yb?-1:(r=Math.min(r,e.Yb-e.Lc),x(e.Mc,e.Lc,t,n,r),e.Lc+=r,r)}function h(e){return e.Mc=n(32),e.Yb=0,e}function y(e){var t=e.Mc;return t.length=e.Yb,t}function v(e,t){e.Mc[e.Yb++]=t<<24>>24}function b(e,t,n,r){x(t,n,e.Mc,e.Yb,r),e.Yb+=r}function x(e,t,n,r,i){for(var a=0;i>a;++a)n[r+a]=e[t+a]}function k(t,n,r,i,o){var s,c;if(a(i,ze)<0)throw Error("invalid length "+i);for(t.Tb=i,function(e,t){(function(e,t){e.ab=t;for(var n=0;t>1<<n;++n);e.$b=2*n})(t,1<<e.s),t.n=e.f,function(e,t){var n=e.X;e.X=t,e.b&&n!=e.X&&(e.wb=-1,e.b=null)}(t,e.m),t.eb=0,t.fb=3,t.Y=2,t.y=3}(o,s=W({})),s.Gc=void 0===e.disableEndMark,function(e,t){e.fc[0]=9*(5*e.Y+e.eb)+e.fb<<24>>24;for(var n=0;4>n;++n)e.fc[1+n]=e.ab>>8*n<<24>>24;b(t,e.fc,0,5)}(s,r),c=0;64>c;c+=8)v(r,255&l(p(i,c)));t.yb=(s.W=0,s.oc=n,s.pc=0,function(e){var t,n;e.b||(t={},n=4,e.X||(n=2),function(e,t){e.qb=t>2,e.qb?(e.w=0,e.xb=4,e.R=66560):(e.w=2,e.xb=3,e.R=0)}(t,n),e.b=t),pe(e.A,e.eb,e.fb),(e.ab!=e.wb||e.Hb!=e.n)&&(I(e.b,e.ab,4096,e.n,274),e.wb=e.ab,e.Hb=e.n)}(s),s.d.Ab=r,function(e){(function(e){e.l=0,e.J=0;for(var t=0;4>t;++t)e.v[t]=0})(e),function(e){e.mc=qe,e.xc=qe,e.E=-1,e.Jb=1,e.Oc=0}(e.d),we(e.C),we(e._),we(e.bb),we(e.hb),we(e.Ub),we(e.vc),we(e.Sb),function(e){var t,n=1<<e.u+e.I;for(t=0;n>t;++t)we(e.V[t].tb)}(e.A);for(var t=0;4>t;++t)we(e.K[t].G);oe(e.$,1<<e.Y),oe(e.i,1<<e.Y),we(e.S.G),e.N=0,e.jb=0,e.q=0,e.s=0}(s),Y(s),Q(s),s.$.rb=s.n+1-2,de(s.$,1<<s.Y),s.i.rb=s.n+1-2,de(s.i,1<<s.Y),s.g=qe,function(e,t){return e.cb=t,e.Z=null,e.zc=1,e}({},s))}function S(e,t,n){return e.Nb=h({}),k(e,_({},t),e.Nb,c(t.length),n),e}function T(e,t,n){var r,i,a,o,s="",l=[];for(i=0;5>i;++i){if(-1==(a=m(t)))throw Error("truncated input");l[i]=a<<24>>24}if(!function(e,t){var n,r,i,a,o,s,c;if(5>t.length)return 0;for(c=255&t[0],i=c%9,a=(s=~~(c/9))%5,o=~~(s/5),n=0,r=0;4>r;++r)n+=(255&t[1+r])<<8*r;return n>99999999||!function(e,t,n,r){if(t>8||n>4||r>4)return 0;V(e.gb,n,t);var i=1<<r;return K(e.Rb,i),K(e.sb,i),e.Dc=i-1,1}(e,i,a,o)?0:function(e,t){return 0>t?0:(e.Ob!=t&&(e.Ob=t,e.nb=Math.max(e.Ob,1),F(e.B,Math.max(e.nb,4096))),1)}(e,n)}(r=$({}),l))throw Error("corrupted input");for(i=0;64>i;i+=8){if(-1==(a=m(t)))throw Error("truncated input");1==(a=a.toString(16)).length&&(a="0"+a),s=a+""+s}/^0+$|^f+$/i.test(s)?e.Tb=ze:(o=parseInt(s,16),e.Tb=o>4294967295?ze:c(o)),e.yb=function(e,t,n,r){return e.e.Ab=t,M(e.B),e.B.cc=n,function(e){e.B.h=0,e.B.o=0,we(e.Gb),we(e.pb),we(e.Zb),we(e.Cb),we(e.Db),we(e.Eb),we(e.kc),function(e){var t,n;for(n=1<<e.u+e.I,t=0;n>t;++t)we(e.V[t].Ib)}(e.gb);for(var t=0;4>t;++t)we(e.kb[t].G);q(e.Rb),q(e.sb),we(e.Fb.G),function(e){e.Bb=0,e.E=-1;for(var t=0;5>t;++t)e.Bb=e.Bb<<8|m(e.Ab)}(e.e)}(e),e.U=0,e.ib=0,e.Jc=0,e.Ic=0,e.Qc=0,e.Nc=r,e.g=qe,e.jc=0,function(e,t){return e.Z=t,e.cb=null,e.zc=1,e}({},e)}(r,t,n,e.Tb)}function C(e,t){return e.Nb=h({}),T(e,_({},t),e.Nb),e}function E(e,t){return e.c[e.f+e.o+t]}function D(e,t,n,r){var i,a;for(e.T&&e.o+t+r>e.h&&(r=e.h-(e.o+t)),++n,a=e.f+e.o+t,i=0;r>i&&e.c[a+i]==e.c[a+i-n];++i);return i}function A(e){return e.h-e.o}function w(e){var t,n;if(!e.T)for(;;){if(!(n=-e.f+e.Kb-e.h))return;if(-1==(t=g(e.cc,e.c,e.f+e.h,n)))return e.zb=e.h,e.f+e.zb>e.H&&(e.zb=e.H-e.f),void(e.T=1);e.h+=t,e.h>=e.o+e._b&&(e.zb=e.h-e._b)}}function N(e,t){e.f+=t,e.zb-=t,e.o-=t,e.h-=t}function I(e,t,r,i,a){var o,s;1073741567>t&&(e.Fc=16+(i>>1),function(e,t,r,i){var a;e.Bc=t,e._b=r,a=t+r+i,(null==e.c||e.Kb!=a)&&(e.c=null,e.Kb=a,e.c=n(e.Kb)),e.H=e.Kb-r}(e,t+r,i+a,256+~~((t+r+i+a)/2)),e.ob=i,o=t+1,e.p!=o&&(e.L=n(2*(e.p=o))),s=65536,e.qb&&(s=t-1,s|=s>>1,s|=s>>2,s|=s>>4,s|=s>>8,s>>=1,(s|=65535)>16777216&&(s>>=1),e.Ec=s,++s,s+=e.R),s!=e.rc&&(e.ub=n(e.rc=s)))}function P(e){var t;++e.k>=e.p&&(e.k=0),function(e){++e.o,e.o>e.zb&&(e.f+e.o>e.H&&function(e){var t,n,r;for((r=e.f+e.o-e.Bc)>0&&--r,n=e.f+e.h-r,t=0;n>t;++t)e.c[t]=e.c[r+t];e.f-=r}(e),w(e))}(e),1073741823==e.o&&(t=e.o-e.p,O(e.L,2*e.p,t),O(e.ub,e.rc,t),N(e,t))}function O(e,t,n){var r,i;for(r=0;t>r;++r)n>=(i=e[r]||0)?i=0:i-=n,e[r]=i}function F(e,t){(null==e.Lb||e.M!=t)&&(e.Lb=n(t)),e.M=t,e.o=0,e.h=0}function L(e){var t=e.o-e.h;t&&(b(e.cc,e.Lb,e.h,t),e.o>=e.M&&(e.o=0),e.h=e.o)}function R(e,t){var n=e.o-t-1;return 0>n&&(n+=e.M),e.Lb[n]}function M(e){L(e),e.cc=null}function U(e){return 4>(e-=2)?e:3}function B(e){return 4>e?0:10>e?e-3:e-6}function j(e){if(!e.zc)throw Error("bad state");return e.cb?function(e){(function(e,t,n,i){var o,u,d,p,_,m,g,h,y,v,b,x,k,S,T;if(t[0]=qe,n[0]=qe,i[0]=1,e.oc&&(e.b.cc=e.oc,function(e){e.f=0,e.o=0,e.h=0,e.T=0,w(e),e.k=0,N(e,-1)}(e.b),e.W=1,e.oc=null),!e.pc){if(e.pc=1,S=e.g,s(e.g,qe)){if(!A(e.b))return void X(e,l(e.g));re(e),k=l(e.g)&e.y,Ne(e.d,e.C,(e.l<<4)+k,0),e.l=B(e.l),d=E(e.b,-e.s),_e(fe(e.A,l(e.g),e.J),e.d,d),e.J=d,--e.s,e.g=r(e.g,Ve)}if(!A(e.b))return void X(e,l(e.g));for(;;){if(g=Z(e,l(e.g)),v=e.mb,k=l(e.g)&e.y,u=(e.l<<4)+k,1==g&&-1==v)Ne(e.d,e.C,u,0),d=E(e.b,-e.s),T=fe(e.A,l(e.g),e.J),7>e.l?_e(T,e.d,d):(y=E(e.b,-e.v[0]-1-e.s),me(T,e.d,y,d)),e.J=d,e.l=B(e.l);else{if(Ne(e.d,e.C,u,1),4>v){if(Ne(e.d,e.bb,e.l,1),v?(Ne(e.d,e.hb,e.l,1),1==v?Ne(e.d,e.Ub,e.l,0):(Ne(e.d,e.Ub,e.l,1),Ne(e.d,e.vc,e.l,v-2))):(Ne(e.d,e.hb,e.l,0),Ne(e.d,e._,u,1==g?0:1)),1==g?e.l=7>e.l?9:11:(ce(e.i,e.d,g-2,k),e.l=7>e.l?8:11),p=e.v[v],0!=v){for(m=v;m>=1;--m)e.v[m]=e.v[m-1];e.v[0]=p}}else{for(Ne(e.d,e.bb,e.l,0),e.l=7>e.l?7:10,ce(e.$,e.d,g-2,k),x=ae(v-=4),h=U(g),ke(e.K[h],e.d,x),x>=4&&(b=v-(o=(2|1&x)<<(_=(x>>1)-1)),14>x?Ee(e.Sb,o-x-1,e.d,_,b):(Ie(e.d,b>>4,_-4),Te(e.S,e.d,15&b),++e.Qb)),p=v,m=3;m>=1;--m)e.v[m]=e.v[m-1];e.v[0]=p,++e.Mb}e.J=E(e.b,g-1-e.s)}if(e.s-=g,e.g=r(e.g,c(g)),!e.s){if(e.Mb>=128&&Y(e),e.Qb>=16&&Q(e),t[0]=e.g,n[0]=Pe(e.d),!A(e.b))return void X(e,l(e.g));if(a(f(e.g,S),[4096,0])>=0)return e.pc=0,void(i[0]=0)}}}})(e.cb,e.cb.Xb,e.cb.uc,e.cb.Kc),e.Pb=e.cb.Xb[0],e.cb.Kc[0]&&(function(e){ie(e),e.d.Ab=null}(e.cb),e.zc=0)}(e):function(e){var t=function(e){var t,n,i,o,s,u;if(u=l(e.g)&e.Dc,Ae(e.e,e.Gb,(e.U<<4)+u)){if(Ae(e.e,e.Zb,e.U))i=0,Ae(e.e,e.Cb,e.U)?(Ae(e.e,e.Db,e.U)?(Ae(e.e,e.Eb,e.U)?(n=e.Qc,e.Qc=e.Ic):n=e.Ic,e.Ic=e.Jc):n=e.Jc,e.Jc=e.ib,e.ib=n):Ae(e.e,e.pb,(e.U<<4)+u)||(e.U=7>e.U?9:11,i=1),i||(i=z(e.sb,e.e,u)+2,e.U=7>e.U?8:11);else if(e.Qc=e.Ic,e.Ic=e.Jc,e.Jc=e.ib,i=2+z(e.Rb,e.e,u),e.U=7>e.U?7:10,(s=be(e.kb[U(i)],e.e))>=4){if(o=(s>>1)-1,e.ib=(2|1&s)<<o,14>s)e.ib+=function(e,t,n,r){var i,a,o=1,s=0;for(a=0;r>a;++a)i=Ae(n,e,t+o),o<<=1,o+=i,s|=i<<a;return s}(e.kc,e.ib-s-1,e.e,o);else if(e.ib+=function(e,t){var n,r,i=0;for(n=t;0!=n;--n)e.E>>>=1,r=e.Bb-e.E>>>31,e.Bb-=e.E&r-1,i=i<<1|1-r,-16777216&e.E||(e.Bb=e.Bb<<8|m(e.Ab),e.E<<=8);return i}(e.e,o-4)<<4,e.ib+=function(e,t){var n,r,i=1,a=0;for(r=0;e.F>r;++r)n=Ae(t,e.G,i),i<<=1,i+=n,a|=n<<r;return a}(e.Fb,e.e),0>e.ib)return-1==e.ib?1:-1}else e.ib=s;if(a(c(e.ib),e.g)>=0||e.ib>=e.nb)return-1;(function(e,t,n){var r=e.o-t-1;for(0>r&&(r+=e.M);0!=n;--n)r>=e.M&&(r=0),e.Lb[e.o++]=e.Lb[r++],e.o>=e.M&&L(e)})(e.B,e.ib,i),e.g=r(e.g,c(i)),e.jc=R(e.B,0)}else t=function(e,t,n){return e.V[((t&e.qc)<<e.u)+((255&n)>>>8-e.u)]}(e.gb,l(e.g),e.jc),e.jc=7>e.U?function(e,t){var n=1;do{n=n<<1|Ae(t,e.Ib,n)}while(256>n);return n<<24>>24}(t,e.e):function(e,t,n){var r,i,a=1;do{if(i=n>>7&1,n<<=1,r=Ae(t,e.Ib,(1+i<<8)+a),a=a<<1|r,i!=r){for(;256>a;)a=a<<1|Ae(t,e.Ib,a);break}}while(256>a);return a<<24>>24}(t,e.e,R(e.B,e.ib)),function(e,t){e.Lb[e.o++]=t,e.o>=e.M&&L(e)}(e.B,e.jc),e.U=B(e.U),e.g=r(e.g,Ve);return 0}(e.Z);if(-1==t)throw Error("corrupted input");e.Pb=ze,e.Pc=e.Z.g,(t||a(e.Z.Nc,qe)>=0&&a(e.Z.g,e.Z.Nc)>=0)&&(L(e.Z.B),M(e.Z.B),e.Z.e.Ab=null,e.zc=0)}(e),e.zc}function $(e){e.B={},e.e={},e.Gb=n(192),e.Zb=n(12),e.Cb=n(12),e.Db=n(12),e.Eb=n(12),e.pb=n(192),e.kb=n(4),e.kc=n(114),e.Fb=ve({},4),e.Rb=J({}),e.sb=J({}),e.gb={};for(var t=0;4>t;++t)e.kb[t]=ve({},6);return e}function K(e,t){for(;t>e.O;++e.O)e.ec[e.O]=ve({},3),e.hc[e.O]=ve({},3)}function z(e,t,n){return Ae(t,e.wc,0)?8+(Ae(t,e.wc,1)?8+be(e.tc,t):be(e.hc[n],t)):be(e.ec[n],t)}function J(e){return e.wc=n(2),e.ec=n(16),e.hc=n(16),e.tc=ve({},8),e.O=0,e}function q(e){we(e.wc);for(var t=0;e.O>t;++t)we(e.ec[t].G),we(e.hc[t].G);we(e.tc.G)}function V(e,t,r){var i,a;if(null==e.V||e.u!=r||e.I!=t)for(e.I=t,e.qc=(1<<t)-1,e.u=r,a=1<<e.u+e.I,e.V=n(a),i=0;a>i;++i)e.V[i]=H({})}function H(e){return e.Ib=n(768),e}function G(e,t){var n,r,i,a;e.jb=t,i=e.a[t].r,r=e.a[t].j;do{e.a[t].t&&(ye(e.a[i]),e.a[i].r=i-1,e.a[t].Ac&&(e.a[i-1].t=0,e.a[i-1].r=e.a[t].r2,e.a[i-1].j=e.a[t].j2)),a=i,n=r,r=e.a[a].j,i=e.a[a].r,e.a[a].j=n,e.a[a].r=t,t=a}while(t>0);return e.mb=e.a[0].j,e.q=e.a[0].r}function W(e){var t;for(e.v=n(4),e.a=[],e.d={},e.C=n(192),e.bb=n(12),e.hb=n(12),e.Ub=n(12),e.vc=n(12),e._=n(192),e.K=[],e.Sb=n(114),e.S=xe({},4),e.$=le({}),e.i=le({}),e.A={},e.m=[],e.P=[],e.lb=[],e.nc=n(16),e.x=n(4),e.Q=n(4),e.Xb=[qe],e.uc=[qe],e.Kc=[0],e.fc=n(5),e.yc=n(128),e.vb=0,e.X=1,e.D=0,e.Hb=-1,e.mb=0,t=0;4096>t;++t)e.a[t]={};for(t=0;4>t;++t)e.K[t]=xe({},6);return e}function Q(e){for(var t=0;16>t;++t)e.nc[t]=Ce(e.S,t);e.Qb=0}function Y(e){var t,n,r,i,a,o,s,c;for(i=4;128>i;++i)t=(2|1&(o=ae(i)))<<(r=(o>>1)-1),e.yc[i]=De(e.Sb,t-o-1,r,i-t);for(a=0;4>a;++a){for(n=e.K[a],s=a<<6,o=0;e.$b>o;++o)e.P[s+o]=Se(n,o);for(o=14;e.$b>o;++o)e.P[s+o]+=(o>>1)-1-4<<6;for(c=128*a,i=0;4>i;++i)e.lb[c+i]=e.P[s+i];for(;128>i;++i)e.lb[c+i]=e.P[s+ae(i)]+e.yc[i]}e.Mb=0}function X(e,t){ie(e),function(e,t){if(e.Gc){Ne(e.d,e.C,(e.l<<4)+t,1),Ne(e.d,e.bb,e.l,0),e.l=7>e.l?7:10,ce(e.$,e.d,0,t);var n=U(2);ke(e.K[n],e.d,63),Ie(e.d,67108863,26),Te(e.S,e.d,15)}}(e,t&e.y);for(var n=0;5>n;++n)Oe(e.d)}function Z(e,t){var n,r,i,a,o,s,c,l,u,d,p,f,_,m,g,h,y,v,b,x,k,S,T,C,w,N,I,P,O,F,L,R,M,U,j,$,K,z,J,q,V,H,W,Q;if(e.jb!=e.q)return _=e.a[e.q].r-e.q,e.mb=e.a[e.q].j,e.q=e.a[e.q].r,_;if(e.q=e.jb=0,e.N?(f=e.vb,e.N=0):f=re(e),N=e.D,2>(C=A(e.b)+1))return e.mb=-1,1;for(C>273&&(C=273),J=0,u=0;4>u;++u)e.x[u]=e.v[u],e.Q[u]=D(e.b,-1,e.x[u],273),e.Q[u]>e.Q[J]&&(J=u);if(e.Q[J]>=e.n)return e.mb=J,ne(e,(_=e.Q[J])-1),_;if(f>=e.n)return e.mb=e.m[N-1]+4,ne(e,f-1),f;if(c=E(e.b,-1),y=E(e.b,-e.v[0]-1-1),2>f&&c!=y&&2>e.Q[J])return e.mb=-1,1;if(e.a[0].Hc=e.l,M=t&e.y,e.a[1].z=We[e.C[(e.l<<4)+M]>>>2]+he(fe(e.A,t,e.J),e.l>=7,y,c),ye(e.a[1]),z=(v=We[2048-e.C[(e.l<<4)+M]>>>2])+We[2048-e.bb[e.l]>>>2],y==c&&(q=z+function(e,t,n){return We[e.hb[t]>>>2]+We[e._[(t<<4)+n]>>>2]}(e,e.l,M),e.a[1].z>q&&(e.a[1].z=q,function(e){e.j=0,e.t=0}(e.a[1]))),2>(p=f>=e.Q[J]?f:e.Q[J]))return e.mb=e.a[1].j,1;e.a[1].r=0,e.a[0].bc=e.x[0],e.a[0].ac=e.x[1],e.a[0].dc=e.x[2],e.a[0].lc=e.x[3],d=p;do{e.a[d--].z=268435455}while(d>=2);for(u=0;4>u;++u)if(!(2>(K=e.Q[u]))){j=z+te(e,u,e.l,M);do{a=j+ue(e.i,K-2,M),(F=e.a[K]).z>a&&(F.z=a,F.r=0,F.j=u,F.t=0)}while(--K>=2)}if(T=v+We[e.bb[e.l]>>>2],f>=(d=e.Q[0]>=2?e.Q[0]+1:2)){for(I=0;d>e.m[I];)I+=2;for(;a=T+ee(e,l=e.m[I+1],d,M),(F=e.a[d]).z>a&&(F.z=a,F.r=0,F.j=l+4,F.t=0),d!=e.m[I]||(I+=2)!=N;++d);}for(n=0;;){if(++n==p)return G(e,n);if(b=re(e),N=e.D,b>=e.n)return e.vb=b,e.N=1,G(e,n);if(++t,R=e.a[n].r,e.a[n].t?(--R,e.a[n].Ac?(H=e.a[e.a[n].r2].Hc,H=4>e.a[n].j2?7>H?8:11:7>H?7:10):H=e.a[R].Hc,H=B(H)):H=e.a[R].Hc,R==n-1?H=e.a[n].j?B(H):7>H?9:11:(e.a[n].t&&e.a[n].Ac?(R=e.a[n].r2,L=e.a[n].j2,H=7>H?8:11):H=4>(L=e.a[n].j)?7>H?8:11:7>H?7:10,O=e.a[R],4>L?L?1==L?(e.x[0]=O.ac,e.x[1]=O.bc,e.x[2]=O.dc,e.x[3]=O.lc):2==L?(e.x[0]=O.dc,e.x[1]=O.bc,e.x[2]=O.ac,e.x[3]=O.lc):(e.x[0]=O.lc,e.x[1]=O.bc,e.x[2]=O.ac,e.x[3]=O.dc):(e.x[0]=O.bc,e.x[1]=O.ac,e.x[2]=O.dc,e.x[3]=O.lc):(e.x[0]=L-4,e.x[1]=O.bc,e.x[2]=O.ac,e.x[3]=O.dc)),e.a[n].Hc=H,e.a[n].bc=e.x[0],e.a[n].ac=e.x[1],e.a[n].dc=e.x[2],e.a[n].lc=e.x[3],s=e.a[n].z,c=E(e.b,-1),y=E(e.b,-e.x[0]-1-1),M=t&e.y,r=s+We[e.C[(H<<4)+M]>>>2]+he(fe(e.A,t,E(e.b,-2)),H>=7,y,c),x=0,(k=e.a[n+1]).z>r&&(k.z=r,k.r=n,k.j=-1,k.t=0,x=1),z=(v=s+We[2048-e.C[(H<<4)+M]>>>2])+We[2048-e.bb[H]>>>2],y!=c||n>k.r&&!k.j||(q=z+(We[e.hb[H]>>>2]+We[e._[(H<<4)+M]>>>2]),k.z>=q&&(k.z=q,k.r=n,k.j=0,k.t=0,x=1)),!(2>(C=w=(w=A(e.b)+1)>4095-n?4095-n:w))){if(C>e.n&&(C=e.n),!x&&y!=c&&(Q=Math.min(w-1,e.n),(g=D(e.b,0,e.x[0],Q))>=2)){for(W=B(H),U=t+1&e.y,S=r+We[2048-e.C[(W<<4)+U]>>>2]+We[2048-e.bb[W]>>>2],P=n+1+g;P>p;)e.a[++p].z=268435455;a=S+(ue(e.i,g-2,U)+te(e,0,W,U)),(F=e.a[P]).z>a&&(F.z=a,F.r=n+1,F.j=0,F.t=1,F.Ac=0)}for(V=2,$=0;4>$;++$)if(!(2>(m=D(e.b,-1,e.x[$],C)))){h=m;do{for(;n+m>p;)e.a[++p].z=268435455;a=z+(ue(e.i,m-2,M)+te(e,$,H,M)),(F=e.a[n+m]).z>a&&(F.z=a,F.r=n,F.j=$,F.t=0)}while(--m>=2);if(m=h,$||(V=m+1),w>m&&(Q=Math.min(w-1-m,e.n),(g=D(e.b,m,e.x[$],Q))>=2)){for(W=7>H?8:11,U=t+m&e.y,i=z+(ue(e.i,m-2,M)+te(e,$,H,M))+We[e.C[(W<<4)+U]>>>2]+he(fe(e.A,t+m,E(e.b,m-1-1)),1,E(e.b,m-1-(e.x[$]+1)),E(e.b,m-1)),W=B(W),U=t+m+1&e.y,S=i+We[2048-e.C[(W<<4)+U]>>>2]+We[2048-e.bb[W]>>>2],P=m+1+g;n+P>p;)e.a[++p].z=268435455;a=S+(ue(e.i,g-2,U)+te(e,0,W,U)),(F=e.a[n+P]).z>a&&(F.z=a,F.r=n+m+1,F.j=0,F.t=1,F.Ac=1,F.r2=n,F.j2=$)}}if(b>C){for(b=C,N=0;b>e.m[N];N+=2);e.m[N]=b,N+=2}if(b>=V){for(T=v+We[e.bb[H]>>>2];n+b>p;)e.a[++p].z=268435455;for(I=0;V>e.m[I];)I+=2;for(m=V;;++m)if(a=T+ee(e,o=e.m[I+1],m,M),(F=e.a[n+m]).z>a&&(F.z=a,F.r=n,F.j=o+4,F.t=0),m==e.m[I]){if(w>m&&(Q=Math.min(w-1-m,e.n),(g=D(e.b,m,o,Q))>=2)){for(W=7>H?7:10,U=t+m&e.y,i=a+We[e.C[(W<<4)+U]>>>2]+he(fe(e.A,t+m,E(e.b,m-1-1)),1,E(e.b,m-(o+1)-1),E(e.b,m-1)),W=B(W),U=t+m+1&e.y,S=i+We[2048-e.C[(W<<4)+U]>>>2]+We[2048-e.bb[W]>>>2],P=m+1+g;n+P>p;)e.a[++p].z=268435455;a=S+(ue(e.i,g-2,U)+te(e,0,W,U)),(F=e.a[n+P]).z>a&&(F.z=a,F.r=n+m+1,F.j=0,F.t=1,F.Ac=1,F.r2=n,F.j2=o+4)}if((I+=2)==N)break}}}}}function ee(e,t,n,r){var i=U(n);return(128>t?e.lb[128*i+t]:e.P[(i<<6)+function(e){return 131072>e?Ge[e>>6]+12:134217728>e?Ge[e>>16]+32:Ge[e>>26]+52}(t)]+e.nc[15&t])+ue(e.$,n-2,r)}function te(e,t,n,r){var i;return t?(i=We[2048-e.hb[n]>>>2],1==t?i+=We[e.Ub[n]>>>2]:(i+=We[2048-e.Ub[n]>>>2],i+=Fe(e.vc[n],t-2))):(i=We[e.hb[n]>>>2],i+=We[2048-e._[(n<<4)+r]>>>2]),i}function ne(e,t){t>0&&(function(e,t){var n,r,i,a,o,s,c,l,u,d,p,f,_,m,g,h,y;do{if(e.h>=e.o+e.ob)f=e.ob;else if(f=e.h-e.o,e.xb>f){P(e);continue}for(_=e.o>e.p?e.o-e.p:0,r=e.f+e.o,e.qb?(s=1023&(y=He[255&e.c[r]]^255&e.c[r+1]),e.ub[s]=e.o,c=65535&(y^=(255&e.c[r+2])<<8),e.ub[1024+c]=e.o,l=(y^He[255&e.c[r+3]]<<5)&e.Ec):l=255&e.c[r]^(255&e.c[r+1])<<8,i=e.ub[e.R+l],e.ub[e.R+l]=e.o,g=1+(e.k<<1),h=e.k<<1,d=p=e.w,n=e.Fc;;){if(_>=i||0==n--){e.L[g]=e.L[h]=0;break}if(o=e.o-i,a=(e.k>=o?e.k-o:e.k-o+e.p)<<1,m=e.f+i,u=p>d?d:p,e.c[m+u]==e.c[r+u]){for(;++u!=f&&e.c[m+u]==e.c[r+u];);if(u==f){e.L[h]=e.L[a],e.L[g]=e.L[a+1];break}}(255&e.c[r+u])>(255&e.c[m+u])?(e.L[h]=i,h=a+1,i=e.L[h],p=u):(e.L[g]=i,g=a,i=e.L[g],d=u)}P(e)}while(0!=--t)}(e.b,t),e.s+=t)}function re(e){var t=0;return e.D=function(e,t){var n,r,i,a,o,s,c,l,u,d,p,f,_,m,g,h,y,v,b,x,k;if(e.h>=e.o+e.ob)m=e.ob;else if(m=e.h-e.o,e.xb>m)return P(e),0;for(y=0,g=e.o>e.p?e.o-e.p:0,r=e.f+e.o,h=1,l=0,u=0,e.qb?(l=1023&(k=He[255&e.c[r]]^255&e.c[r+1]),u=65535&(k^=(255&e.c[r+2])<<8),d=(k^He[255&e.c[r+3]]<<5)&e.Ec):d=255&e.c[r]^(255&e.c[r+1])<<8,i=e.ub[e.R+d]||0,e.qb&&(a=e.ub[l]||0,o=e.ub[1024+u]||0,e.ub[l]=e.o,e.ub[1024+u]=e.o,a>g&&e.c[e.f+a]==e.c[r]&&(t[y++]=h=2,t[y++]=e.o-a-1),o>g&&e.c[e.f+o]==e.c[r]&&(o==a&&(y-=2),t[y++]=h=3,t[y++]=e.o-o-1,a=o),0!=y&&a==i&&(y-=2,h=1)),e.ub[e.R+d]=e.o,b=1+(e.k<<1),x=e.k<<1,f=_=e.w,0!=e.w&&i>g&&e.c[e.f+i+e.w]!=e.c[r+e.w]&&(t[y++]=h=e.w,t[y++]=e.o-i-1),n=e.Fc;;){if(g>=i||0==n--){e.L[b]=e.L[x]=0;break}if(c=e.o-i,s=(e.k>=c?e.k-c:e.k-c+e.p)<<1,v=e.f+i,p=_>f?f:_,e.c[v+p]==e.c[r+p]){for(;++p!=m&&e.c[v+p]==e.c[r+p];);if(p>h&&(t[y++]=h=p,t[y++]=c-1,p==m)){e.L[x]=e.L[s],e.L[b]=e.L[s+1];break}}(255&e.c[r+p])>(255&e.c[v+p])?(e.L[x]=i,x=s+1,i=e.L[x],_=p):(e.L[b]=i,b=s,i=e.L[b],f=p)}return P(e),y}(e.b,e.m),e.D>0&&((t=e.m[e.D-2])==e.n&&(t+=D(e.b,t-1,e.m[e.D-1],273-t))),++e.s,t}function ie(e){e.b&&e.W&&(e.b.cc=null,e.W=0)}function ae(e){return 2048>e?Ge[e]:2097152>e?Ge[e>>10]+20:Ge[e>>20]+40}function oe(e,t){we(e.db);for(var n=0;t>n;++n)we(e.Vb[n].G),we(e.Wb[n].G);we(e.ic.G)}function se(e,t,n,r,i){var a,o,s,c,l;for(a=We[e.db[0]>>>2],s=(o=We[2048-e.db[0]>>>2])+We[e.db[1]>>>2],c=o+We[2048-e.db[1]>>>2],l=0,l=0;8>l;++l){if(l>=n)return;r[i+l]=a+Se(e.Vb[t],l)}for(;16>l;++l){if(l>=n)return;r[i+l]=s+Se(e.Wb[t],l-8)}for(;n>l;++l)r[i+l]=c+Se(e.ic,l-8-8)}function ce(e,t,n,r){(function(e,t,n,r){8>n?(Ne(t,e.db,0,0),ke(e.Vb[r],t,n)):(n-=8,Ne(t,e.db,0,1),8>n?(Ne(t,e.db,1,0),ke(e.Wb[r],t,n)):(Ne(t,e.db,1,1),ke(e.ic,t,n-8)))})(e,t,n,r),0==--e.sc[r]&&(se(e,r,e.rb,e.Cc,272*r),e.sc[r]=e.rb)}function le(e){return function(e){e.db=n(2),e.Vb=n(16),e.Wb=n(16),e.ic=xe({},8);for(var t=0;16>t;++t)e.Vb[t]=xe({},3),e.Wb[t]=xe({},3)}(e),e.Cc=[],e.sc=[],e}function ue(e,t,n){return e.Cc[272*n+t]}function de(e,t){for(var n=0;t>n;++n)se(e,n,e.rb,e.Cc,272*n),e.sc[n]=e.rb}function pe(e,t,r){var i,a;if(null==e.V||e.u!=r||e.I!=t)for(e.I=t,e.qc=(1<<t)-1,e.u=r,a=1<<e.u+e.I,e.V=n(a),i=0;a>i;++i)e.V[i]=ge({})}function fe(e,t,n){return e.V[((t&e.qc)<<e.u)+((255&n)>>>8-e.u)]}function _e(e,t,n){var r,i,a=1;for(i=7;i>=0;--i)r=n>>i&1,Ne(t,e.tb,a,r),a=a<<1|r}function me(e,t,n,r){var i,a,o,s,c=1,l=1;for(a=7;a>=0;--a)i=r>>a&1,s=l,c&&(s+=1+(o=n>>a&1)<<8,c=o==i),Ne(t,e.tb,s,i),l=l<<1|i}function ge(e){return e.tb=n(768),e}function he(e,t,n,r){var i,a,o=1,s=7,c=0;if(t)for(;s>=0;--s)if(a=n>>s&1,i=r>>s&1,c+=Fe(e.tb[(1+a<<8)+o],i),o=o<<1|i,a!=i){--s;break}for(;s>=0;--s)i=r>>s&1,c+=Fe(e.tb[o],i),o=o<<1|i;return c}function ye(e){e.j=-1,e.t=0}function ve(e,t){return e.F=t,e.G=n(1<<t),e}function be(e,t){var n,r=1;for(n=e.F;0!=n;--n)r=(r<<1)+Ae(t,e.G,r);return r-(1<<e.F)}function xe(e,t){return e.F=t,e.G=n(1<<t),e}function ke(e,t,n){var r,i,a=1;for(i=e.F;0!=i;)r=n>>>--i&1,Ne(t,e.G,a,r),a=a<<1|r}function Se(e,t){var n,r,i=1,a=0;for(r=e.F;0!=r;)n=t>>>--r&1,a+=Fe(e.G[i],n),i=(i<<1)+n;return a}function Te(e,t,n){var r,i,a=1;for(i=0;e.F>i;++i)r=1&n,Ne(t,e.G,a,r),a=a<<1|r,n>>=1}function Ce(e,t){var n,r,i=1,a=0;for(r=e.F;0!=r;--r)n=1&t,t>>>=1,a+=Fe(e.G[i],n),i=i<<1|n;return a}function Ee(e,t,n,r,i){var a,o,s=1;for(o=0;r>o;++o)Ne(n,e,t+s,a=1&i),s=s<<1|a,i>>=1}function De(e,t,n,r){var i,a,o=1,s=0;for(a=n;0!=a;--a)i=1&r,r>>>=1,s+=We[(2047&(e[t+o]-i^-i))>>>2],o=o<<1|i;return s}function Ae(e,t,n){var r,i=t[n];return(-2147483648^(r=(e.E>>>11)*i))>(-2147483648^e.Bb)?(e.E=r,t[n]=i+(2048-i>>>5)<<16>>16,-16777216&e.E||(e.Bb=e.Bb<<8|m(e.Ab),e.E<<=8),0):(e.E-=r,e.Bb-=r,t[n]=i-(i>>>5)<<16>>16,-16777216&e.E||(e.Bb=e.Bb<<8|m(e.Ab),e.E<<=8),1)}function we(e){for(var t=e.length-1;t>=0;--t)e[t]=1024}function Ne(e,t,n,a){var o,s=t[n];o=(e.E>>>11)*s,a?(e.xc=r(e.xc,i(c(o),[4294967295,0])),e.E-=o,t[n]=s-(s>>>5)<<16>>16):(e.E=o,t[n]=s+(2048-s>>>5)<<16>>16),-16777216&e.E||(e.E<<=8,Oe(e))}function Ie(e,t,n){for(var i=n-1;i>=0;--i)e.E>>>=1,1==(t>>>i&1)&&(e.xc=r(e.xc,c(e.E))),-16777216&e.E||(e.E<<=8,Oe(e))}function Pe(e){return r(r(c(e.Jb),e.mc),[4,0])}function Oe(e){var t,n=l(function(e,t){var n;return n=p(e,t&=63),0>e[1]&&(n=r(n,d([2,0],63-t))),n}(e.xc,32));if(0!=n||a(e.xc,[4278190080,0])<0){e.mc=r(e.mc,c(e.Jb)),t=e.Oc;do{v(e.Ab,t+n),t=255}while(0!=--e.Jb);e.Oc=l(e.xc)>>>24}++e.Jb,e.xc=d(i(e.xc,[16777215,0]),8)}function Fe(e,t){return We[(2047&(e-t^-t))>>>2]}function Le(e){for(var t,n,r,i=0,a=0,o=e.length,s=[],c=[];o>i;++i,++a){if(128&(t=255&e[i]))if(192==(224&t)){if(i+1>=o)return e;if(128!=(192&(n=255&e[++i])))return e;c[a]=(31&t)<<6|63&n}else{if(224!=(240&t))return e;if(i+2>=o)return e;if(128!=(192&(n=255&e[++i])))return e;if(128!=(192&(r=255&e[++i])))return e;c[a]=(15&t)<<12|(63&n)<<6|63&r}else{if(!t)return e;c[a]=t}16383==a&&(s.push(String.fromCharCode.apply(String,c)),a=-1)}return a>0&&(c.length=a,s.push(String.fromCharCode.apply(String,c))),s.join("")}function Re(e){var t,n,r,i=[],a=0,o=e.length;if("object"==typeof e)return e;for(function(e,t,n,r,i){var a;for(a=t;n>a;++a)r[i++]=e.charCodeAt(a)}(e,0,o,i,0),r=0;o>r;++r)(t=i[r])>=1&&127>=t?++a:a+=!t||t>=128&&2047>=t?2:3;for(n=[],a=0,r=0;o>r;++r)(t=i[r])>=1&&127>=t?n[a++]=t<<24>>24:!t||t>=128&&2047>=t?(n[a++]=(192|t>>6&31)<<24>>24,n[a++]=(128|63&t)<<24>>24):(n[a++]=(224|t>>12&15)<<24>>24,n[a++]=(128|t>>6&63)<<24>>24,n[a++]=(128|63&t)<<24>>24);return n}function Me(e){return e[1]+e[0]}var Ue=1,Be=2,je=3,$e="function"==typeof setImmediate?setImmediate:setTimeout,Ke=4294967296,ze=[4294967295,-Ke],Je=[0,-0x8000000000000000],qe=[0,0],Ve=[1,0],He=function(){var e,t,n,r=[];for(e=0;256>e;++e){for(n=e,t=0;8>t;++t)0!=(1&n)?n=n>>>1^-306674912:n>>>=1;r[e]=n}return r}(),Ge=function(){var e,t,n,r=2,i=[0,1];for(n=2;22>n;++n)for(t=1<<(n>>1)-1,e=0;t>e;++e,++r)i[r]=n<<24>>24;return i}(),We=function(){var e,t,n,r=[];for(t=8;t>=0;--t)for(e=1<<9-t,n=1<<9-t-1;e>n;++n)r[n]=(t<<6)+(e-n<<6>>>9-t-1);return r}(),Qe=function(){var e=[{s:16,f:64,m:0},{s:20,f:64,m:0},{s:19,f:64,m:1},{s:20,f:64,m:1},{s:21,f:128,m:1},{s:22,f:128,m:1},{s:23,f:128,m:1},{s:24,f:255,m:1},{s:25,f:255,m:1}];return function(t){return e[t-1]||e[6]}}();return"undefined"==typeof onmessage||"undefined"!=typeof window&&void 0!==window.document||(onmessage=function(t){t&&t.gc&&(t.gc.action==Be?e.decompress(t.gc.gc,t.gc.cbn):t.gc.action==Ue&&e.compress(t.gc.gc,t.gc.Rc,t.gc.cbn))}),{compress:function(e,n,r,i){var a,o,s={},c=void 0===r&&void 0===i;if("function"!=typeof r&&(o=r,r=i=0),i=i||function(e){return void 0!==o?t(e,o):void 0},r=r||function(e,t){return void 0!==o?postMessage({action:Ue,cbn:o,result:e,error:t}):void 0},c){for(s.c=S({},Re(e),Qe(n));j(s.c.yb););return y(s.c.Nb)}try{s.c=S({},Re(e),Qe(n)),i(0)}catch(e){return r(null,e)}$e((function e(){try{for(var t,n=(new Date).getTime();j(s.c.yb);)if(a=Me(s.c.yb.Pb)/Me(s.c.Tb),(new Date).getTime()-n>200)return i(a),$e(e,0),0;i(1),t=y(s.c.Nb),$e(r.bind(null,t),0)}catch(e){r(null,e)}}),0)},decompress:function(e,n,r){var i,a,o,s,c={},l=void 0===n&&void 0===r;if("function"!=typeof n&&(a=n,n=r=0),r=r||function(e){return void 0!==a?t(o?e:-1,a):void 0},n=n||function(e,t){return void 0!==a?postMessage({action:Be,cbn:a,result:e,error:t}):void 0},l){for(c.d=C({},e);j(c.d.yb););return Le(y(c.d.Nb))}try{c.d=C({},e),s=Me(c.d.Tb),o=s>-1,r(0)}catch(e){return n(null,e)}$e((function e(){try{for(var t,a=0,l=(new Date).getTime();j(c.d.yb);)if(++a%1e3==0&&(new Date).getTime()-l>200)return o&&(i=Me(c.d.yb.Z.g)/s,r(i)),$e(e,0),0;r(1),t=Le(y(c.d.Nb)),$e(n.bind(null,t),0)}catch(e){n(null,e)}}),0)}}}(),pxt,pxt,pxt,pxt,pxt,ts;this.LZMA=this.LZMA_WORKER=e,function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).DOMPurify=t()}(this,(function(){var e=Object.hasOwnProperty,t=Object.setPrototypeOf,n=Object.isFrozen,r=Object.keys,i=Object.freeze,a=Object.seal,o=Object.create,s="undefined"!=typeof Reflect&&Reflect,c=s.apply,l=s.construct;c||(c=function(e,t,n){return e.apply(t,n)}),i||(i=function(e){return e}),a||(a=function(e){return e}),l||(l=function(e,t){return new(Function.prototype.bind.apply(e,[null].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(t))))});var u=T(Array.prototype.forEach),d=T(Array.prototype.indexOf),p=T(Array.prototype.join),f=T(Array.prototype.pop),_=T(Array.prototype.push),m=T(Array.prototype.slice),g=T(String.prototype.toLowerCase),h=T(String.prototype.match),y=T(String.prototype.replace),v=T(String.prototype.indexOf),b=T(String.prototype.trim),x=T(RegExp.prototype.test),k=C(RegExp),S=C(TypeError);function T(e){return function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return c(e,t,r)}}function C(e){return function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return l(e,n)}}function E(e,r){t&&t(e,null);for(var i=r.length;i--;){var a=r[i];if("string"==typeof a){var o=g(a);o!==a&&(n(r)||(r[i]=o),a=o)}e[a]=!0}return e}function D(t){var n=o(null),r=void 0;for(r in t)c(e,t,[r])&&(n[r]=t[r]);return n}var A=i(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),w=i(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","audio","canvas","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","video","view","vkern"]),N=i(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),I=i(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),P=i(["#text"]),O=i(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns"]),F=i(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),L=i(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),R=i(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),M=a(/\{\{[\s\S]*|[\s\S]*\}\}/gm),U=a(/<%[\s\S]*|[\s\S]*%>/gm),B=a(/^data-[\-\w.\u00B7-\uFFFF]/),j=a(/^aria-[\-\w]+$/),$=a(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),K=a(/^(?:\w+script|data):/i),z=a(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function q(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var V=function(){return"undefined"==typeof window?null:window},H=function(e,t){if("object"!==(void 0===e?"undefined":J(e))||"function"!=typeof e.createPolicy)return null;var n=null;t.currentScript&&t.currentScript.hasAttribute("data-tt-policy-suffix")&&(n=t.currentScript.getAttribute("data-tt-policy-suffix"));var r="dompurify"+(n?"#"+n:"");try{return e.createPolicy(r,{createHTML:function(e){return e}})}catch(e){return console.warn("TrustedTypes policy "+r+" could not be created."),null}};return function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V(),n=function(t){return e(t)};if(n.version="2.0.17",n.removed=[],!t||!t.document||9!==t.document.nodeType)return n.isSupported=!1,n;var a=t.document,o=!1,s=t.document,c=t.DocumentFragment,l=t.HTMLTemplateElement,T=t.Node,C=t.NodeFilter,G=t.NamedNodeMap,W=void 0===G?t.NamedNodeMap||t.MozNamedAttrMap:G,Q=t.Text,Y=t.Comment,X=t.DOMParser,Z=t.trustedTypes;if("function"==typeof l){var ee=s.createElement("template");ee.content&&ee.content.ownerDocument&&(s=ee.content.ownerDocument)}var te=H(Z,a),ne=te&&Le?te.createHTML(""):"",re=s,ie=re.implementation,ae=re.createNodeIterator,oe=re.getElementsByTagName,se=re.createDocumentFragment,ce=a.importNode,le={};try{le=D(s).documentMode?s.documentMode:{}}catch(e){}var ue={};n.isSupported=ie&&void 0!==ie.createHTMLDocument&&9!==le;var de=M,pe=U,fe=B,_e=j,me=K,ge=z,he=$,ye=null,ve=E({},[].concat(q(A),q(w),q(N),q(I),q(P))),be=null,xe=E({},[].concat(q(O),q(F),q(L),q(R))),ke=null,Se=null,Te=!0,Ce=!0,Ee=!1,De=!1,Ae=!1,we=!1,Ne=!1,Ie=!1,Pe=!1,Oe=!1,Fe=!1,Le=!1,Re=!0,Me=!0,Ue=!1,Be={},je=E({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","plaintext","script","style","svg","template","thead","title","video","xmp"]),$e=null,Ke=E({},["audio","video","img","source","image","track"]),ze=null,Je=E({},["alt","class","for","id","label","name","pattern","placeholder","summary","title","value","style","xmlns"]),qe=null,Ve=s.createElement("form"),He=function(e){qe&&qe===e||(e&&"object"===(void 0===e?"undefined":J(e))||(e={}),e=D(e),ye="ALLOWED_TAGS"in e?E({},e.ALLOWED_TAGS):ve,be="ALLOWED_ATTR"in e?E({},e.ALLOWED_ATTR):xe,ze="ADD_URI_SAFE_ATTR"in e?E(D(Je),e.ADD_URI_SAFE_ATTR):Je,$e="ADD_DATA_URI_TAGS"in e?E(D(Ke),e.ADD_DATA_URI_TAGS):Ke,ke="FORBID_TAGS"in e?E({},e.FORBID_TAGS):{},Se="FORBID_ATTR"in e?E({},e.FORBID_ATTR):{},Be="USE_PROFILES"in e&&e.USE_PROFILES,Te=!1!==e.ALLOW_ARIA_ATTR,Ce=!1!==e.ALLOW_DATA_ATTR,Ee=e.ALLOW_UNKNOWN_PROTOCOLS||!1,De=e.SAFE_FOR_JQUERY||!1,Ae=e.SAFE_FOR_TEMPLATES||!1,we=e.WHOLE_DOCUMENT||!1,Pe=e.RETURN_DOM||!1,Oe=e.RETURN_DOM_FRAGMENT||!1,Fe=e.RETURN_DOM_IMPORT||!1,Le=e.RETURN_TRUSTED_TYPE||!1,Ie=e.FORCE_BODY||!1,Re=!1!==e.SANITIZE_DOM,Me=!1!==e.KEEP_CONTENT,Ue=e.IN_PLACE||!1,he=e.ALLOWED_URI_REGEXP||he,Ae&&(Ce=!1),Oe&&(Pe=!0),Be&&(ye=E({},[].concat(q(P))),be=[],!0===Be.html&&(E(ye,A),E(be,O)),!0===Be.svg&&(E(ye,w),E(be,F),E(be,R)),!0===Be.svgFilters&&(E(ye,N),E(be,F),E(be,R)),!0===Be.mathMl&&(E(ye,I),E(be,L),E(be,R))),e.ADD_TAGS&&(ye===ve&&(ye=D(ye)),E(ye,e.ADD_TAGS)),e.ADD_ATTR&&(be===xe&&(be=D(be)),E(be,e.ADD_ATTR)),e.ADD_URI_SAFE_ATTR&&E(ze,e.ADD_URI_SAFE_ATTR),Me&&(ye["#text"]=!0),we&&E(ye,["html","head","body"]),ye.table&&(E(ye,["tbody"]),delete ke.tbody),i&&i(e),qe=e)},Ge=function(e){_(n.removed,{element:e});try{e.parentNode.removeChild(e)}catch(t){e.outerHTML=ne}},We=function(e,t){try{_(n.removed,{attribute:t.getAttributeNode(e),from:t})}catch(e){_(n.removed,{attribute:null,from:t})}t.removeAttribute(e)},Qe=function(e){var t=void 0,n=void 0;if(Ie)e="<remove></remove>"+e;else{var r=h(e,/^[\r\n\t ]+/);n=r&&r[0]}var i=te?te.createHTML(e):e;try{t=(new X).parseFromString(i,"text/html")}catch(e){}if(o&&E(ke,["title"]),!t||!t.documentElement){var a=(t=ie.createHTMLDocument("")).body;a.parentNode.removeChild(a.parentNode.firstElementChild),a.outerHTML=i}return e&&n&&t.body.insertBefore(s.createTextNode(n),t.body.childNodes[0]||null),oe.call(t,we?"html":"body")[0]};n.isSupported&&function(){try{var e=Qe("<x/><title>&lt;/title&gt;&lt;img&gt;");x(/<\/title/,e.querySelector("title").innerHTML)&&(o=!0)}catch(e){}}();var Ye=function(e){return ae.call(e.ownerDocument||e,e,C.SHOW_ELEMENT|C.SHOW_COMMENT|C.SHOW_TEXT,(function(){return C.FILTER_ACCEPT}),!1)},Xe=function(e){return!(e instanceof Q||e instanceof Y||"string"==typeof e.nodeName&&"string"==typeof e.textContent&&"function"==typeof e.removeChild&&e.attributes instanceof W&&"function"==typeof e.removeAttribute&&"function"==typeof e.setAttribute&&"string"==typeof e.namespaceURI)},Ze=function(e){return"object"===(void 0===T?"undefined":J(T))?e instanceof T:e&&"object"===(void 0===e?"undefined":J(e))&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName},et=function(e,t,r){ue[e]&&u(ue[e],(function(e){e.call(n,t,r,qe)}))},tt=function(e){var t=void 0;if(et("beforeSanitizeElements",e,null),Xe(e))return Ge(e),!0;if(h(e.nodeName,/[\u0080-\uFFFF]/))return Ge(e),!0;var r=g(e.nodeName);if(et("uponSanitizeElement",e,{tagName:r,allowedTags:ye}),("svg"===r||"math"===r)&&0!==e.querySelectorAll("p, br, form, table").length)return Ge(e),!0;if(!ye[r]||ke[r]){if(Me&&!je[r]&&"function"==typeof e.insertAdjacentHTML)try{var i=e.innerHTML;e.insertAdjacentHTML("AfterEnd",te?te.createHTML(i):i)}catch(e){}return Ge(e),!0}return"noscript"===r&&x(/<\/noscript/i,e.innerHTML)||"noembed"===r&&x(/<\/noembed/i,e.innerHTML)?(Ge(e),!0):(!De||Ze(e.firstElementChild)||Ze(e.content)&&Ze(e.content.firstElementChild)||!x(/</g,e.textContent)||(_(n.removed,{element:e.cloneNode()}),e.innerHTML?e.innerHTML=y(e.innerHTML,/</g,"&lt;"):e.innerHTML=y(e.textContent,/</g,"&lt;")),Ae&&3===e.nodeType&&(t=e.textContent,t=y(t,de," "),t=y(t,pe," "),e.textContent!==t&&(_(n.removed,{element:e.cloneNode()}),e.textContent=t)),et("afterSanitizeElements",e,null),!1)},nt=function(e,t,n){if(Re&&("id"===t||"name"===t)&&(n in s||n in Ve))return!1;if(Ce&&x(fe,t));else if(Te&&x(_e,t));else{if(!be[t]||Se[t])return!1;if(ze[t]);else if(x(he,y(n,ge,"")));else if("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==v(n,"data:")||!$e[e])if(Ee&&!x(me,y(n,ge,"")));else if(n)return!1}return!0},rt=function(e){var t=void 0,i=void 0,a=void 0,o=void 0,s=void 0;et("beforeSanitizeAttributes",e,null);var c=e.attributes;if(c){var l={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:be};for(s=c.length;s--;){var u=t=c[s],_=u.name,h=u.namespaceURI;if(i=b(t.value),a=g(_),l.attrName=a,l.attrValue=i,l.keepAttr=!0,l.forceKeepAttr=void 0,et("uponSanitizeAttribute",e,l),i=l.attrValue,!l.forceKeepAttr){if("name"===a&&"IMG"===e.nodeName&&c.id)o=c.id,c=m(c,[]),We("id",e),We(_,e),d(c,o)>s&&e.setAttribute("id",o.value);else{if("INPUT"===e.nodeName&&"type"===a&&"file"===i&&l.keepAttr&&(be[a]||!Se[a]))continue;"id"===_&&e.setAttribute(_,""),We(_,e)}if(l.keepAttr)if(De&&x(/\/>/i,i))We(_,e);else if(x(/svg|math/i,e.namespaceURI)&&x(k("</("+p(r(je),"|")+")","i"),i))We(_,e);else{Ae&&(i=y(i,de," "),i=y(i,pe," "));var v=e.nodeName.toLowerCase();if(nt(v,a,i))try{h?e.setAttributeNS(h,_,i):e.setAttribute(_,i),f(n.removed)}catch(e){}}}}et("afterSanitizeAttributes",e,null)}},it=function e(t){var n=void 0,r=Ye(t);for(et("beforeSanitizeShadowDOM",t,null);n=r.nextNode();)et("uponSanitizeShadowNode",n,null),tt(n)||(n.content instanceof c&&e(n.content),rt(n));et("afterSanitizeShadowDOM",t,null)};return n.sanitize=function(e,r){var i=void 0,o=void 0,s=void 0,l=void 0,u=void 0;if(e||(e="\x3c!--\x3e"),"string"!=typeof e&&!Ze(e)){if("function"!=typeof e.toString)throw S("toString is not a function");if("string"!=typeof(e=e.toString()))throw S("dirty is not a string, aborting")}if(!n.isSupported){if("object"===J(t.toStaticHTML)||"function"==typeof t.toStaticHTML){if("string"==typeof e)return t.toStaticHTML(e);if(Ze(e))return t.toStaticHTML(e.outerHTML)}return e}if(Ne||He(r),n.removed=[],"string"==typeof e&&(Ue=!1),Ue);else if(e instanceof T)1===(o=(i=Qe("\x3c!--\x3e")).ownerDocument.importNode(e,!0)).nodeType&&"BODY"===o.nodeName||"HTML"===o.nodeName?i=o:i.appendChild(o);else{if(!Pe&&!Ae&&!we&&-1===e.indexOf("<"))return te&&Le?te.createHTML(e):e;if(!(i=Qe(e)))return Pe?null:ne}i&&Ie&&Ge(i.firstChild);for(var d=Ye(Ue?e:i);s=d.nextNode();)3===s.nodeType&&s===l||tt(s)||(s.content instanceof c&&it(s.content),rt(s),l=s);if(l=null,Ue)return e;if(Pe){if(Oe)for(u=se.call(i.ownerDocument);i.firstChild;)u.appendChild(i.firstChild);else u=i;return Fe&&(u=ce.call(a,u,!0)),u}var p=we?i.outerHTML:i.innerHTML;return Ae&&(p=y(p,de," "),p=y(p,pe," ")),te&&Le?te.createHTML(p):p},n.setConfig=function(e){He(e),Ne=!0},n.clearConfig=function(){qe=null,Ne=!1},n.isValidAttribute=function(e,t,n){qe||He({});var r=g(e),i=g(t);return nt(r,i,n)},n.addHook=function(e,t){"function"==typeof t&&(ue[e]=ue[e]||[],_(ue[e],t))},n.removeHook=function(e){ue[e]&&f(ue[e])},n.removeHooks=function(e){ue[e]&&(ue[e]=[])},n.removeAllHooks=function(){ue={}},n}()})),pxt||(pxt={}),function(e){!function(t){const n={},r={};let i,a=!1;function o(e){Object.keys(e).forEach((t=>{"string"==typeof e[t]?n[t]=e[t]:r[t]=e[t]}))}!function(e){e[e.Off=0]="Off",e[e.Short=1]="Short",e[e.Verbose=2]="Verbose"}(i=t.ConsoleTickOptions||(t.ConsoleTickOptions={})),t.consoleTicks=i.Off,t.addDefaultProperties=o,t.enable=function(s){if(!e.aiTrackException||!e.aiTrackEvent||a)return;a=!0,"string"==typeof s&&0!=s.length||(s="en"),o({lang:s}),e.debug("setting up app insights");const c=e.tickEvent;e.tickEvent=function(a,o,s){if(t.consoleTicks!=i.Off){const e=t.consoleTicks==i.Short?"":`${(new Date).toLocaleTimeString(void 0,{hour12:!1})} - Tick - `,n=`${a} ${o?JSON.stringify(o):"<no data>"} ${s?JSON.stringify(s):"<no opts>"}`;console.log(e+n)}if(c&&c(a,o,s),(null==s?void 0:s.interactiveConsent)&&e.setInteractiveConsent(!0),o){const t=Object.assign({},n)||{},i=Object.assign({},r)||{};Object.keys(o).forEach((e=>{"string"==typeof o[e]?t[e]=o[e]:"number"==typeof o[e]?i[e]=o[e]:t[e]=JSON.stringify(o[e]||"")})),e.aiTrackEvent(a,t,i)}else e.aiTrackEvent(a)};const l=e.reportException;e.reportException=function(t,n){l&&l(t,n);const r={target:e.appTarget.id,version:e.appTarget.versions.target};n&&e.Util.jsonMergeFrom(r,n),e.aiTrackException(t,"exception",r)};const u=e.reportError;e.reportError=function(t,n,r){u&&u(t,n,r);try{throw n}catch(i){const a={target:e.appTarget.id,version:e.appTarget.versions.target,category:t,message:n};r&&e.Util.jsonMergeFrom(a,r),e.aiTrackException(i,"error",a)}}}}(e.analytics||(e.analytics={}))}(pxt||(pxt={})),pxt||(pxt={}),function(e){!function(e){let t,n,r,i=0,a=!1;function o(){return t||(t=function(){if(window.AudioContext=window.AudioContext||window.webkitAudioContext,window.AudioContext)try{return new window.AudioContext}catch(e){}return}()),t}function s(){t&&(r.gain.setTargetAtTime(0,t.currentTime,.015),i=0)}e.mute=function(e){t&&(a=e,s(),e&&n&&(n.disconnect(),r.disconnect(),n=void 0,r=void 0))},e.stop=s,e.frequency=function(){return i},e.tone=function(e){if(a)return;if(isNaN(e)||e<0)return;i=e;let s=o();if(s)try{n||(n=s.createOscillator(),n.type="triangle",r=s.createGain(),r.gain.value=0,r.connect(s.destination),n.connect(r),n.start(0)),n.frequency.linearRampToValueAtTime(e,t.currentTime),r.gain.setTargetAtTime(.2,t.currentTime,.015)}catch(e){return void(n=void 0)}}}(e.AudioContextManager||(e.AudioContextManager={}))}(pxt||(pxt={})),function(e){!function(t){const n="auth",r="csrf-token",i="login-state",a="user-state",o="interactive-login-until";let s,c=!1;t.DEFAULT_USER_PREFERENCES=()=>({highContrast:!1,language:e.appTarget.appTheme.defaultLocale,reader:"",skillmap:{mapProgress:{},completedTags:{}},email:!1}),t.client=function(){if(!c)return s};let l=0,u=0;async function d(t,r){return r?await e.storage.shared.setAsync(n,t,r):await e.storage.shared.delAsync(n,t)}async function p(t){try{return await e.storage.shared.getAsync(n,t)}catch(e){return}}async function f(){const e=await p(r);return t.cachedHasAuthToken=!!e,e}async function _(e){return t.cachedHasAuthToken=!!e,await d(r,e)}async function m(){return!!await f()}async function g(){return t.cachedHasAuthToken=!1,await d(r,void 0)}async function h(){let r;try{r=await e.storage.shared.getAsync(n,a)}catch(e){r={}}return t.cachedUserState=r,r}async function y(r){return t.cachedUserState=Object.assign({},r),await e.storage.shared.setAsync(n,a,r)}async function v(){return t.cachedUserState=void 0,await e.storage.shared.delAsync(n,a)}t.cachedHasAuthToken=!1,t.getAuthTokenAsync=f,t.hasAuthTokenAsync=m,t.getUserStateAsync=h;class b{constructor(){this.initialUserPreferences_=void 0,this.initialAuthCheck_=void 0,this.patchQueue=[],s=this}async initAsync(){const e=await h();this.setUserProfileAsync(null==e?void 0:e.profile),this.setUserPreferencesAsync(null==e?void 0:e.preferences)}async loginAsync(t,r,a){if(!S()||!function(e){return k().filter((t=>t.id===e)).length>0}(t))return;a=null!=a?a:x,this.clearAuthStateAsync();const s={key:(Math.PI*Math.random()).toString(36).slice(2),callbackState:a,callbackPathname:window.location.pathname,idp:t,persistent:r},c=(parseInt(await p(o))||0)>Date.now(),l=e.Util.stringifyQueryString("/api/auth/login",{response_type:"token",provider:t,persistent:r,redirect_uri:`${window.location.origin}${window.location.pathname}?authcallback=1&state=${s.key}`,prompt:c?"select_account":"silent"}),u=await this.apiAsync(l);if(u.success)s.authCodeVerifier=u.resp.authCodeVerifier,await e.storage.shared.setAsync(n,i,s),e.tickEvent("auth.login.start",{provider:t}),window.location.href=u.resp.loginUrl;else try{await this.onSignInFailed()}catch(e){}}async logoutAsync(e){if(S()){await b.staticLogoutAsync(e);try{await this.onStateCleared()}catch(e){}try{await this.onSignedOut()}catch(e){}}}static async staticLogoutAsync(t){if(!S())return;e.tickEvent("auth.logout"),await d(o,(Date.now()+6e4).toString()),t=t?t.startsWith("#")?t:`#${t}`:"";const n=`${window.location.origin}${window.location.pathname}${window.location.search}${t}`;let r="";try{const t=e.Util.stringifyQueryString("/api/auth/logout",{redirect_uri:n,authcallback:"1"}),i=await b.staticApiAsync(t);i.success&&(r=i.resp.logoutUrl)}catch(e){}await g(),await v(),e.BrowserUtils.hasWindow()&&(r?window.location.href=r:(window.location.href=n,location.reload()))}async deleteProfileAsync(){var t;if(!await this.loggedInAsync())return;const n=await h(),r=null===(t=null==n?void 0:n.profile)||void 0===t?void 0:t.id,i=await this.apiAsync("/api/user",null,"DELETE");if(i.err)try{await this.onApiError(i.err)}catch(e){}else try{await this.clearAuthStateAsync();try{await this.onProfileDeleted(r)}catch(e){}}finally{e.tickEvent("auth.profile.deleted")}}async initialUserPreferencesAsync(){if(await this.loggedInAsync())return this.initialUserPreferences_||(this.initialUserPreferences_=this.fetchUserPreferencesAsync()),this.initialUserPreferences_}async userProfileAsync(){if(!await this.loggedInAsync())return;const e=await h();return Object.assign({},e.profile)}async userPreferencesAsync(){const e=await h();return Object.assign({},e.preferences)}async authCheckAsync(){var e;if(!S())return;if(!await m())return;const t=await h();return(null===(e=null==t?void 0:t.profile)||void 0===e?void 0:e.id)?this.initialAuthCheck_||(this.initialAuthCheck_=Promise.resolve(t.profile)):this.initialAuthCheck_||(this.initialAuthCheck_=this.fetchUserAsync()),this.initialAuthCheck_}async loggedInAsync(){return!!await this.authCheckAsync()&&await this.hasUserIdAsync()}async updateUserProfileAsync(e){if(!await this.loggedInAsync())return!1;const t=await h(),n=await this.apiAsync("/api/user/profile",{id:t.profile.id,username:e.username,avatarUrl:e.avatarUrl});return n.success&&await this.setUserProfileAsync(n.resp),n.success}async patchUserPreferencesAsync(n,r={}){const i=async()=>({success:!0,res:await this.userPreferencesAsync()});if(!(n=(n=Array.isArray(n)?n:[n]).filter((e=>!!e))).length)return await i();const a=(t,n,r)=>{const i=e.U.deepCopy(t);ts.pxtc.jsonPatch.patchInPlace(i,n);let a=ts.pxtc.jsonPatch.diff(t,i);return a.length&&r&&(a=a.filter(r)),a},o=await this.userPreferencesAsync(),s=a(o,n,r.filter);if(!s.length)return await i();if(ts.pxtc.jsonPatch.patchInPlace(o,s),await this.setUserPreferencesAsync(o),!await this.loggedInAsync())return await i();this.patchQueue.push({ops:n,filter:r.filter}),clearTimeout(l);const c=async()=>{if(u=0,!this.patchQueue.length)return await i();const n=await this.apiAsync("/api/user/preferences");if(!n.success)return e.reportError("identity","failed to fetch preferences for patch",n),{success:!1,res:void 0};const r=e.U.deepCopy(n.resp)||t.DEFAULT_USER_PREFERENCES(),o=this.patchQueue;this.patchQueue=[],o.forEach((e=>{const t=a(r,e.ops,e.filter);ts.pxtc.jsonPatch.patchInPlace(r,t)}));const s=pxtc.jsonPatch.diff(n.resp,r),c=await this.apiAsync("/api/user/preferences",s,"PATCH");return c.success?this.setUserPreferencesAsync(c.resp):e.reportError("identity","failed to patch preferences",c),{success:c.success,res:c.resp}};return r.immediate?await c():(u||(u=e.U.now()),1e4<e.U.now()-u?await c():(l=setTimeout(c,1e3),{success:!1,res:void 0}))}async hasUserIdAsync(){var e;if(!S())return!1;if(!await m())return;const t=await h();return!!(null===(e=null==t?void 0:t.profile)||void 0===e?void 0:e.id)}async fetchUserAsync(){var e;if(!S())return;if(!await m())return;const t=await h();if(null===(e=null==t?void 0:t.profile)||void 0===e?void 0:e.id)return t.profile;const n=await this.apiAsync("/api/user/profile");if(n.success){const e=n.resp;return await this.setUserProfileAsync(e),e}}async setUserProfileAsync(e){const t=await this.hasUserIdAsync();await this.transformUserProfileAsync(e);const n=await this.hasUserIdAsync();try{await this.onUserProfileChanged()}catch(e){}if(n&&!t)try{await this.onSignedIn()}catch(e){}else if(!n&&t)try{await this.onSignedOut()}catch(e){}}async setUserPreferencesAsync(e){var n;const r=await h(),i=null!==(n=null==r?void 0:r.preferences)&&void 0!==n?n:t.DEFAULT_USER_PREFERENCES(),a=ts.pxtc.jsonPatch.diff(i,e),o=await this.transformUserPreferencesAsync(Object.assign(Object.assign({},i),e));try{await this.onUserPreferencesChanged(a)}catch(e){}return o}async fetchUserPreferencesAsync(){if(!await this.loggedInAsync())return;await h();const e=await this.apiAsync("/api/user/preferences");if(e.success&&e.resp){return this.setUserPreferencesAsync(e.resp)}}async transformUserProfileAsync(e){let t=await h();return t=Object.assign(Object.assign({},t),{profile:Object.assign({},e)}),await y(t),t.profile}async transformUserPreferencesAsync(e){let t=await h();return t=Object.assign(Object.assign({},t),{preferences:Object.assign({},e)}),await y(t),t.preferences}async clearAuthStateAsync(){await g(),await v();try{await this.onStateCleared()}catch(e){}}async apiAsync(e,t,n,r){return await b.staticApiAsync(e,t,n,r)}static async staticApiAsync(t,n,r,i){var a;const o={};return(i=i||await f())&&(o.authorization=`mkcd ${i}`),o["x-pxt-target"]=null===(a=e.appTarget)||void 0===a?void 0:a.id,t=e.BrowserUtils.isLocalHostDev()?`${e.cloud.DEV_BACKEND}${t}`:t,e.Util.requestAsync({url:t,headers:o,data:n,method:r||(n?"POST":"GET"),withCredentials:!0}).then((e=>({statusCode:e.statusCode,resp:e.json,success:2===Math.floor(e.statusCode/100),err:null}))).catch((async e=>(/logout/.test(t)||401!=e.statusCode||await b.staticLogoutAsync(),{statusCode:e.statusCode,err:e,resp:null,success:!1})))}}t.AuthClient=b;const x={hash:"",params:{}};function k(){var t,n;return Object.keys((null===(n=null===(t=e.appTarget)||void 0===t?void 0:t.cloud)||void 0===n?void 0:n.cloudProviders)||{}).map((t=>e.appTarget.cloud.cloudProviders[t])).filter((e=>e.identity)).sort(((e,t)=>e.order-t.order))}function S(){return!c&&!e.BrowserUtils.isPxtElectron()&&k().length>0}function T(e,t){return e.id===t.id&&e.sourceURL===t.sourceURL}t.loginCallbackAsync=async function(t){let r,a=Object.assign({},x);do{if(r=await e.storage.shared.getAsync(n,i),!r)return void e.debug("Auth state not found in storge.");await e.storage.shared.delAsync(n,i);const s=t.state;if(!s||r.key!==s)return void e.debug("Failed to get auth state for key");a=Object.assign(Object.assign({},x),r.callbackState);const c=t.error;if(c){const n=t.error_description;e.tickEvent("auth.login.error",{error:c,provider:r.idp}),e.log(`Auth failed: ${c}:${n}`),a=Object.assign({},x);break}const l=t.token;if(!l){e.debug("Missing authToken in auth callback.");break}if(r.authCodeVerifier){const t=e.Util.stringifyQueryString("/api/otac/check",{persistent:r.persistent});await b.staticApiAsync(t,null,null,r.authCodeVerifier)}await _(l),await d(o,void 0),e.tickEvent("auth.login.success",{provider:r.idp})}while(0);const s=a.hash.startsWith("#")?a.hash:`#${a.hash}`,c=e.Util.stringifyQueryString("",a.params),l=`${r.callbackPathname.startsWith("/")?r.callbackPathname:`/${r.callbackPathname}`}${c}${s}`;window.location.href=l},t.identityProviders=k,t.identityProvider=function(e){return k().filter((t=>t.id===e)).shift()},t.hasIdentity=S,t.enableAuth=function(e=!0){c=!e},t.userName=function(e){var t,n,r,i;return null!==(i=null!==(n=null===(t=null==e?void 0:e.idp)||void 0===t?void 0:t.displayName)&&void 0!==n?n:null===(r=null==e?void 0:e.idp)||void 0===r?void 0:r.username)&&void 0!==i?i:"??"},t.identityProviderId=function(e){var t;return null===(t=null==e?void 0:e.idp)||void 0===t?void 0:t.provider},t.firstName=function(t){const n=e.auth.userName(t);return(null==n?void 0:n.split(" ").shift())||n},t.userInitials=function(t){const n=e.auth.userName(t);return ts.pxtc.Util.initials(n)},t.generateUserProfilePicDataUrl=function(t){var n,r;if(null===(r=null===(n=null==t?void 0:t.idp)||void 0===n?void 0:n.picture)||void 0===r?void 0:r.encoded){const n=window.URL||window.webkitURL;try{const r=e.Util.stringToUint8Array(atob(t.idp.picture.encoded)),i=new Blob([r],{type:t.idp.picture.mimeType});t.idp.picture.dataUrl=n.createObjectURL(i)}catch(e){}}},t.badgeEquals=T,t.hasBadge=function(e,t){return e.badges.some((e=>T(e,t)))}}(e.auth||(e.auth={}))}(pxt||(pxt={})),function(e){e.tickEvent=function(e){}}(pxt||(pxt={})),function(e){!function(e){e.__dummy=42}(e.pxtc||(e.pxtc={}))}(ts||(ts={}));var pxtc=ts.pxtc;!function(e){!function(e){!function(e){function t(e){return e.replace(/[^\w .!?\-$]/g,(e=>{let t=e.charCodeAt(0).toString(16);return"\\u"+"0000".substr(0,4-t.length)+t}))}e.assert=function(e,t="Assertion failed"){if(!e)throw new Error(t)},e.flatClone=function(e){if(null==e)return null;let t={};return Object.keys(e).forEach((n=>{t[n]=e[n]})),t},e.clone=function(e){return null==e?null:JSON.parse(JSON.stringify(e))},e.htmlEscape=function(e){return e?e.replace(/([^\w .!?\-$])/g,(e=>"&#"+e.charCodeAt(0)+";")):e},e.htmlUnescape=function(e){return e?e.replace(/(&#\d+;)/g,(e=>String.fromCharCode(Number(e.substr(2,e.length-3))))):e},e.jsStringQuote=t,e.jsStringLiteral=function(e){return'"'+t(e)+'"'},e.initials=function(e){if(/^\w+@/.test(e)){return e.match(/^\w\w/).shift().toUpperCase()}{const t=e.match(/\b\w/g)||[];return((t.shift()||"")+(t.pop()||"")).toUpperCase()}};let n="en",r={},i={},a=!1;function o(){return n}function s(e){const t=/^(\w{2,3})-(\w{2,4}$)/i.exec(e);return t&&t[1]&&t[2]?[`${t[1].toLowerCase()}-${t[2].toUpperCase()}`,t[1].toLowerCase(),`${t[1].toLowerCase()}-${t[2].toLowerCase()}`]:[(e||"en").toLowerCase()]}function c(t,n){return 0==n.length?t:t.replace(/\{([0-9]+)(\:[^\}]+)?\}/g,(function(t,r,i){let a=n[parseInt(r)],o="",s=/^:f(\d*)\.(\d+)/.exec(i);if(s){let e=parseInt(s[2]),t=parseInt(s[1])||0,n=/^0/.test(s[1])?"0":" ",r=a.toFixed(e);if(t>0&&e>0&&(t+=e+1),t>0)for(;r.length<t;)r=n+r;o=r}else o=":x"==i?"0x"+a.toString(16):void 0===a?"(undef)":null===a?"(null)":a.toString?a.toString():a+"";return":a"==i?/^\s*[euioah]/.test(o.toLowerCase())?o="an "+o:/^\s*[bcdfgjklmnpqrstvwxz]/.test(o.toLowerCase())&&(o="a "+o):":s"==i?o=1==a?"":"s":":q"==i?o=e.htmlEscape(o):":jq"==i?o=e.jsStringQuote(o):":uri"==i?o=encodeURIComponent(o).replace(/'/g,"%27").replace(/"/g,"%22"):":url"==i?o=encodeURI(o).replace(/'/g,"%27").replace(/"/g,"%22"):":%"==i&&(o=(100*a).toFixed(1).toString()+"%"),o}))}e.enableLiveLocalizationUpdates=function(){a=!0},e.liveLocalizationEnabled=function(){return a},e.localeInfo=function(){return`${a?"live-":""}${o()}`},e.userLanguage=o,e.normalizeLanguageCode=s,e.setUserLanguage=function(e){n=s(e)[0]},e.isUserLanguageRtl=function(){return/^ar|dv|fa|ha|he|ks|ku|ps|ur|yi/i.test(n)},e.TRANSLATION_LOCALE="pxt",e.isTranslationMode=function(){return o()==e.TRANSLATION_LOCALE},e._localize=function(e){return r[e]||e},e.getLocalizedStrings=function(){return r},e.setLocalizedStrings=function(e){r=e},e.translationsCache=function(){return i},e.fmt_va=c,e.fmt=function(e,...t){return c(e,t)};const l={};e.dumpLocStats=function(){const e={};Object.keys(l).sort(((e,t)=>l[t]-l[e])).forEach((t=>e[t]=t)),console.log("prioritized list of strings:"),console.log(JSON.stringify(e,null,2))};function u(t,n){if(!t)return t;l[t]=(l[t]||0)+1;let r=e._localize(t);return r=r.replace(/^\{(id|loc):[^\}]+\}/g,""),c(r,n)}e.lf_va=u,e.lf=function(e,...t){return u(e,t)},e.rlf=function(e,...t){return u(e,t)},e.lookup=function(e,t){return e.hasOwnProperty(t)?e[t]:null},e.isoTime=function(t){let n=new Date(1e3*t);return e.fmt("{0}-{1:f02.0}-{2:f02.0} {3:f02.0}:{4:f02.0}:{5:f02.0}",n.getFullYear(),n.getMonth()+1,n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds())},e.userError=function(e){let t=new Error(e);throw t.isUserError=!0,t},e.deq=function e(t,n){if(t===n)return null;if(!t||!n)return"Null value";if("object"==typeof t&&"object"==typeof n){if(Array.isArray(t)){if(!Array.isArray(n))return"Expected array";if(t.length!=n.length)return"Expected array of length "+t.length+", got "+n.length;for(let r=0;r<t.length;r++)if(null!=e(t[r],n[r]))return"Expected array value "+t[r]+" got "+n[r];return null}let r=Object.keys(t),i=Object.keys(t);if(r.length!=i.length)return"Expected "+r.length+" keys, got "+i.length;for(let i=0;i<r.length;i++){if(!Object.prototype.hasOwnProperty.call(n,r[i]))return"Missing key "+r[i];if(null!=e(t[r[i]],n[r[i]]))return"Expected value of "+r[i]+" to be "+t[r[i]]+", got "+n[r[i]]}return null}return"Unable to compare "+t+", "+n}}(e.Util||(e.Util={}))}(e.pxtc||(e.pxtc={}))}(ts||(ts={}));const lf=ts.pxtc.Util.lf;var ts,pxt,pxt,pxt,pxt,pxt,pxt,pxt,pxt,pxt,pxt,pxt,pxt,pxt,pxt,pxt,pxt,pxt,pxt,pxt,pxt,pxt,pxt,pxt,pxt,pxt,pxt,pxt,pxt,pxt,pxt,ts,pxt,pxt,pxt,pxt,pxt,pxt,pxt,pxt,ts,pxt,pxt,pxt,pxt,ts,pxt,ts,pxtmelody,pxtmelody,pxtmelody,pxt,pxt,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,pxt,pxt,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,pxt,pxt,pxt,pxt,pxt,pxt,pxt;!function(e){!function(e){e.decodeBase64=function(e){return atob(e)},e.encodeBase64=function(e){return btoa(e)}}(e.pxtc||(e.pxtc={}))}(ts||(ts={})),function(e){!function(t){!function(n){function r(e,t){if(t)for(let n=0;n<t.length;++n)e.push(t[n])}function i(e){let t=[];for(let n=0;n<e.length;++n)r(t,e[n]);return t}function a(e){return!!e&&"object"==typeof e&&!Array.isArray(e)}function o(e,t,n,r,i){void 0===r&&(r=0),void 0===i&&(i=n.length-r);for(let a=0;a<i;++a)e[t+a]=n[r+a]}function s(e,t){return e==t?0:e<t?-1:1}n.CancellationToken=class{constructor(){this.pending=!1,this.cancelled=!1}startOperation(){this.pending=!0}isRunning(){return this.pending}onProgress(e){this.progressHandler=e}reportProgress(e,t){this.progressHandler&&this.progressHandler(e,t)}cancel(){this.cancelled=!0,this.pending=!1}cancelAsync(){return this.cancelled||!this.pending?(this.cancelled=!0,this.pending=!1,Promise.resolve()):(this.cancelled=!0,this.deferred=new Promise((e=>{this.resolve=e})),this.deferred)}isCancelled(){return this.cancelled}throwIfCancelled(){if(this.isCancelled())throw new Error}resolveCancel(){this.pending=!1,this.deferred&&(this.resolve(),this.deferred=void 0,this.resolve=void 0)}},n.codalHash16=function(e){const t=[251,175,119,215,81,14,79,191,103,49,181,143,186,157,0,232,31,32,55,60,152,58,17,237,174,70,160,144,220,90,57,223,59,3,18,140,111,166,203,196,134,243,124,95,222,179,197,65,180,48,36,15,107,46,233,130,165,30,123,161,209,23,97,16,40,91,219,61,100,10,210,109,250,127,22,138,29,108,244,67,207,9,178,204,74,98,126,249,167,116,34,77,193,200,121,5,20,113,71,35,128,13,182,94,25,226,227,199,75,27,41,245,230,224,43,225,177,26,155,150,212,142,218,115,241,73,88,105,39,114,62,255,192,201,145,214,168,158,221,148,154,122,12,84,82,163,44,139,228,236,205,242,217,11,187,146,159,64,86,239,195,42,106,198,118,112,184,172,87,2,173,117,176,229,247,253,137,185,99,164,102,147,45,66,231,52,141,211,194,206,246,238,56,110,78,248,63,240,189,93,92,51,53,183,19,171,72,50,33,104,101,69,8,252,83,120,76,135,85,54,202,125,188,213,96,235,136,208,162,129,190,132,156,38,47,1,7,254,24,4,216,131,89,21,28,133,37,153,149,80,170,68,6,169,234,151];function n(e){let n=0;for(let r=0;r<e.length;r++){let i=e[r];n=t[n^i]}return n}return e?function(e,t){let r;const i=new Uint8Array(e.length);for(let t=0;t<e.length;++t){const n=e.charCodeAt(t);i[t]=255&n}let a=0;for(let e=0;e<t;++e)r=n(i),a|=r<<8*e,i[0]=(i[0]+1)%255;return a}(e,2):0},n.bufferSerial=function(e,t="",n="?",r=255){for(let i=0;i<t.length;++i){const a=t[i];if(e[n]=(e[n]||"")+a,"\n"===a||e[n].length>r){let t=e[n];e[n]="",window.postMessage({type:"serial",id:n,data:t},"*")}}},n.blobReadAsDataURL=function(e){return e?new Promise(((t,n)=>{const r=new FileReader;r.onload=()=>t(r.result),r.onerror=e=>n(e),r.readAsDataURL(e)})):Promise.resolve(void 0)},n.fileReadAsBufferAsync=function(e){return e?new Promise(((t,n)=>{let r=new FileReader;r.onerror=e=>t(null),r.onload=e=>t(new Uint8Array(r.result)),r.readAsArrayBuffer(e)})):Promise.resolve(null)},n.fileReadAsTextAsync=function(e){return e?new Promise(((t,n)=>{let r=new FileReader;r.onerror=e=>t(null),r.onload=e=>t(r.result),r.readAsText(e)})):Promise.resolve(null)},n.repeatMap=function(e,t){e=e||0;let n=[];for(let r=0;r<e;++r)n.push(t(r));return n},n.listsEqual=function(e,t){if(!e||!t||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0},n.oops=function(e="OOPS"){throw new Error(e)},n.reversed=function(e){return(e=e.slice(0)).reverse(),e},n.arrayEquals=function(e,t,n=((e,t)=>e===t)){if(e==t)return!0;if(!e&&t||!t&&e||e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!n(e[r],t[r]))return!1;return!0},n.iterMap=function(e,t){Object.keys(e).forEach((n=>t(n,e[n])))},n.mapMap=function(e,t){let n={};return Object.keys(e).forEach((r=>n[r]=t(r,e[r]))),n},n.values=function(e){return Object.keys(e||{}).map((t=>e[t]))},n.pushRange=r,n.concatArrayLike=function(e){return i(e)},n.concat=i,n.memcpy=o,n.uint8ArrayConcat=function(e){let t=0;for(let n of e)t+=n.length;let n=new Uint8Array(t),r=0;for(let t of e)o(n,r,t),r+=t.length;return n},n.jsonTryParse=function(e){try{return JSON.parse(e)}catch(e){return}},n.jsonMergeFrom=function e(t,r){r&&Object.keys(r).forEach((i=>{a(t[i])&&a(r[i])?e(t[i],r[i]):t[i]=n.clone(r[i])}))},n.jsonCopyFrom=function(e,t){let r=n.clone(t);for(let n of Object.keys(t))e[n]=r[n]},n.jsonFlatten=function(e){let t={},r=(e,i)=>{if(null!==i&&"object"==typeof i){n.assert(!Array.isArray(i)),e&&(e+=".");for(let t of Object.keys(i))r(e+t,i[t])}else t[e]=i};return r("",e),t},n.jsonUnFlatten=function(e){let t={};for(let n of Object.keys(e)){let r=t,i=n.split(".");for(let t=0;t<i.length;++t){let a=i[t];t==i.length-1?r[a]=e[n]:("object"!=typeof r[a]&&(r[a]={}),r=r[a])}}return t},n.strcmp=s,n.stringMapEq=function(e,t){let n=Object.keys(e),r=Object.keys(t);if(n.length!=r.length)return!1;for(let r of n){if(!t.hasOwnProperty(r))return!1;if(e[r]!==t[r])return!1}return!0},n.endsWith=function(e,t){return!(e.length<t.length)&&(0==t.length||e.slice(-t.length)==t)},n.startsWith=function(e,t){return!(e.length<t.length)&&(0==t.length||e.slice(0,t.length)==t)},n.contains=function(e,t){return!(e.length<t.length)&&(0==t.length||e.indexOf(t)>-1)},n.replaceAll=function(e,t,n){return t?e.split(t).join(n):e},n.snakify=function(e){const t=e.toUpperCase(),n=e.toLowerCase();if(e==t||e==n)return e;if(e.lastIndexOf("_")>0)return e;const r=t=>e[t]!=n[t],i=n=>e[n]!=t[n];let a="",o=0;for(;o<e.length;){let t=r(o),n=o;for(;n<e.length;){if(t&&i(n)){if(n-o>2){n--;break}t=!1}if(!t&&r(n))break;n++}a&&(a+="_"),a+=e.slice(o,n),o=n}return a.toUpperCase()===a?a:a.toLowerCase()},n.sortObjectFields=function(e){let t=Object.keys(e);t.sort(s);let n={};return t.forEach((t=>n[t]=e[t])),n},n.chopArray=function(e,t){let n=[];for(let r=0;r<e.length;r+=t)n.push(e.slice(r,r+t));return n},n.unique=function(e,t){let n=[],r={};return e.forEach((e=>{let i=t(e);r.hasOwnProperty(i)||(r[i]=null,n.push(e))})),n},n.groupBy=function(e,t){let n={};return e.forEach((e=>{let r=t(e);n.hasOwnProperty(r)||(n[r]=[]),n[r].push(e)})),n},n.toDictionary=function(e,t){let n={};return e.forEach((e=>{n[t(e)]=e})),n},n.toSet=function(e,t){let n={};return e.forEach((e=>{n[t(e)]=!0})),n},n.deepCopy=function e(t){if("object"!=typeof t||null===t)return t;const n=Array.isArray(t)?[]:{};for(const r in t){const i=t[r];n[r]=e(i)}return n},n.toArray=function(e){if(Array.isArray(e))return e;let t=[];if(!e)return t;for(let n=0;n<e.length;++n)t.push(e[n]);return t},n.indexOfMatching=function(e,t){for(let n=0;n<e.length;++n)if(t(e[n]))return n;return-1};const c=Promise.resolve();async function l(e,t,n){let r=0;const i=[],a=[];for(let o=0;o<e;o++){const e=(async()=>{for(;r<t.length;){const e=r++,i=t[e];a[e]=await n(i)}})();i.push(e)}try{await Promise.all(i)}catch(e){throw r=t.length,e}return a}function u(e,t){const n={};return r=>{const i=e(r);return n.hasOwnProperty(i)?n[i]:n[i]=t(r)}}n.nextTick=function(e){c.then(e)},n.delay=async function(e,t){const n=await t;return await new Promise((t=>setTimeout((()=>t()),e))),n},n.promiseMapAll=function(e,t){return Promise.all(e.map((e=>t(e))))},n.promiseMapAllSeries=function(e,t){return l(1,e,t)},n.promisePoolAsync=l,n.memoizeString=function(e){return u((e=>e),e)},n.promiseTimeout=async function(e,t,n){let r,i;const a=new Promise(((t,a)=>{i=t,r=setTimeout((()=>{i=void 0,clearTimeout(r),a(n||`Promise timed out after ${e}ms`)}),e)}));return Promise.race([t,a]).then((e=>(i&&(clearTimeout(r),i()),e)))},n.defer=function(){let e,t,n,r=!1;return{resolve:function(n){r?pxt.debug("Deferred promise already resolved"):(t?t(n):e=e||new Promise((function(e){e(n)})),r=!0)},reject:function(t){r?pxt.debug("Deferred promise already resolved"):(n?n(t):e=e||new Promise((function(e,n){n(t)})),r=!0)},promise:new Promise((function(r,i){e?r(e):(t=r,n=i)}))}},n.memoize=u,n.debounce=function(e,t,n){let r;return function(){let i=this,a=arguments,o=function(){r=null,n||e.apply(i,a)},s=n&&!r;return clearTimeout(r),r=setTimeout(o,t),s&&e.apply(i,a),r}};function d(e){return e&&(e=e.replace(/\\/g,"/")),e}function p(e){return n.httpRequestCoreAsync(e).then((r=>{const i=r.statusCode;if((e.successCodes||[304,200,201,202]).indexOf(i)<0&&!e.allowHttpErrors){const t=n.lf("Bad HTTP status code: {0} at {1}; message: {2}",r.statusCode,e.url,(r.text||"").slice(0,500)),i=new Error(t);return i.statusCode=r.statusCode,Promise.reject(i)}return r.text&&/application\/json/.test(r.headers["content-type"])&&(r.json=t.U.jsonTryParse(r.text)),r}))}function f(e,t){let n="";if(!e)return n;for(let r=0;r<e.length;++r){let i=e.charCodeAt(r);if(i<=127)n+=e.charAt(r);else if(i<=2047)n+=String.fromCharCode(192|i>>6,128|63&i);else{if(!t&&55296<=i&&i<=56319){let t=e.charCodeAt(++r);isNaN(t)||(i=65536+(i-55296<<10)+(t-56320))}n+=i<=65535?String.fromCharCode(224|i>>12,128|i>>6&63,128|63&i):String.fromCharCode(240|i>>18,128|i>>12&63,128|i>>6&63,128|63&i)}}return n}n.AdaptiveDebouncer=class{constructor(e,t=300,n=2e3,r=2){this.func=e,this.minDelay=t,this.maxDelay=n,this.slowdownFactor=r,this.lastPoke=0,this.recentGaps=[],this.wrapped=()=>{this.timeout=null,this.func()}}poke(){const e=Date.now();if(this.lastPoke){const t=e-this.lastPoke;if(t<10)return;for(t<4e3&&this.recentGaps.push(t);this.recentGaps.length>10;)this.recentGaps.shift()}this.lastPoke=e}trigger(){let e=this.maxDelay;if(this.lastPoke){const t=this.recentGaps.slice();t.sort();const n=t[t.length>>1]||1;e=Math.min(Math.max(n*this.slowdownFactor|0,this.minDelay),this.maxDelay);e-=Date.now()-this.lastPoke,e<0&&(e=0),this.lastPoke=null}clearTimeout(this.timeout),this.timeout=setTimeout(this.wrapped,e)}},n.throttle=function(e,t,n){let r;return function(){let i=this,a=arguments,o=function(){r=null,n||e.apply(i,a)},s=n&&!r;r||(r=setTimeout(o,t)),s&&e.apply(i,a)}},n.randomPermute=function(e){for(let t=0;t<e.length;++t){let n=m()%e.length,r=e[t];e[t]=e[n],e[n]=r}},n.randomPick=function(e){return 0==e.length?null:e[m()%e.length]},n.timeSince=function(e){let t=(Date.now()-(e*=1e3))/1e3;return isNaN(t)?"":t<-30?(t=-t,t<60?n.lf("in a few seconds"):t<120?n.lf("in a minute"):t<3600?n.lf("in {0} minute{0:s}",Math.floor(t/60)):t<7200?n.lf("in an hour"):t<86400?n.lf("in {0} hour{0:s}",Math.floor(t/60/60)):t<2592e3?n.lf("in {0} day{0:s}",Math.floor(t/60/60/24)):t<31536e3?n.lf("in {0} month{0:s}",Math.floor(t/60/60/24/30)):n.lf("in {0} year{0:s}",Math.floor(t/60/60/24/365))):t<0?n.lf("now"):t<10?n.lf("a few seconds ago"):t<60?n.lf("{0} second{0:s} ago",Math.floor(t)):t<120?n.lf("a minute ago"):t<3600?n.lf("{0} minute{0:s} ago",Math.floor(t/60)):t<7200?n.lf("an hour ago"):t<86400?n.lf("{0} hour{0:s} ago",Math.floor(t/60/60)):t<2592e3?n.lf("{0} day{0:s} ago",Math.floor(t/60/60/24)):t<31536e3?n.lf("{0} month{0:s} ago",Math.floor(t/60/60/24/30)):n.lf("{0} year{0:s} ago",Math.floor(t/60/60/24/365))},n.unicodeToChar=function(e){return e.replace(/\\u([\d\w]{4})/gi,(function(e,t){return String.fromCharCode(parseInt(t,16))}))},n.escapeForRegex=function(e){return null==e?void 0:e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},n.stripUrlProtocol=function(e){return null==e?void 0:e.replace(/.*?:\/\//g,"")},n.normalizePath=d,n.pathJoin=function(e,t){if(d(e),d(t),e||t)return e?t?("/"!==e.charAt(e.length-1)&&(e+="/"),"/"==t.charAt(0)&&(t=t.substring(1)),e+t):e:t},n.isNodeJS="undefined"==typeof window,n.requestAsync=p,n.httpGetTextAsync=function(e){return p({url:e}).then((e=>e.text))},n.httpGetJsonAsync=function(e){return p({url:e}).then((e=>e.json))},n.httpPostJsonAsync=function(e,t){return p({url:e,data:t||{}}).then((e=>e.json))},n.stringToUint8Array=function(e){let t=e.length,n=new Uint8Array(t);for(let r=0;r<t;++r)n[r]=255&e.charCodeAt(r);return n},n.uint8ArrayToString=function(e){let t=e.length,n="";for(let r=0;r<t;++r)n+=String.fromCharCode(e[r]);return n},n.fromUTF8=function(e){if(!e)return"";let t="";for(let n=0;n<e.length;++n){let r=255&e.charCodeAt(n);t+=37==r||r>127?"%"+r.toString(16):e.charAt(n)}return decodeURIComponent(t)},n.toUTF8=f,n.toHex=function(e){let t="";for(let n=0;n<e.length;++n)t+=("0"+e[n].toString(16)).slice(-2);return t},n.fromHex=function(e){let t=new Uint8Array(e.length>>1);for(let n=0;n<e.length;n+=2)t[n>>1]=parseInt(e.slice(n,n+2),16);return t};n.PromiseQueue=class{constructor(){this.promises={}}enqueue(e,t){return new Promise(((n,r)=>{let i=this.promises[e];i||(i=this.promises[e]=[]),i.push((()=>t().finally((()=>{i.shift(),0==i.length?delete this.promises[e]:i[0]()})).then(n,r))),1==i.length&&i[0]()}))}};function _(){return Date.now()}function m(){let e=new Uint8Array(4);return n.getRandomBuf(e),new Uint32Array(e.buffer)[0]}function g(e,t,n,r){function i(i){pxt.debug(`downloading translations for ${e} ${t} ${n||""}`);let a=pxt.BrowserUtils.isLocalHost()||pxt.webConfig.isStatic?"https://makecode.com/api/":"",o=`${a}translations?lang=${encodeURIComponent(e)}&filename=${encodeURIComponent(t)}&approved=true`;n&&(o+="&branch="+encodeURIComponent(n));const s={};return r&&!pxt.Cloud.useCdnApi()&&(s["If-None-Match"]=r),(a?p:pxt.Cloud.apiRequestWithCdnAsync)({url:o,headers:s}).then((a=>304==a.statusCode||200==a.statusCode?(r=a.headers.etag||"",pxt.BrowserUtils.translationDbAsync().then((o=>o.setAsync(e,t,n,r,a.json||i))).then((()=>a.json||i))):a.json),(e=>{console.log(`failed to load translations from ${o}`)}))}return pxt.BrowserUtils.translationDbAsync().then((r=>r.getAsync(e,t,n))).then((e=>{if(e){r=e.etag;return(Date.now()-e.time)/1e3>300&&i(e.strings),e.strings}return i()}))}function h(e){let[t,r]=n.normalizeLanguageCode(e),i=pxt.appTarget.appTheme;if(i&&i.availableLocales){if(i.availableLocales.indexOf(t)>-1)return!0;if(r&&i.availableLocales.indexOf(r)>-1)return!0}return!1}let y;function v(e,r,i,a,o,s,c){if(c=c||y.Editor,"en-US"===(i=n.normalizeLanguageCode(i)[0])||"en"===i)return Promise.resolve(void 0);let l,u,d=`${i}/${s}/${c}`;if(n.translationsCache()[d])return Promise.resolve(n.translationsCache()[d]);switch(c){case y.Editor:l=[{branch:a,staticName:"strings.json",path:"strings.json"},{branch:o,staticName:"target-strings.json",path:e+"/target-strings.json"}];break;case y.Sim:l=[{branch:o,staticName:"sim-strings.json",path:e+"/sim-strings.json"}];break;case y.Apis:l=[{branch:o,staticName:"bundled-strings.json",path:e+"/bundled-strings.json"}];break;case y.SkillMap:l=[{branch:o,staticName:"skillmap-strings.json",path:"/skillmap-strings.json"}]}function p(e){e&&(u||(u={}),Object.keys(e).filter((t=>!!e[t])).forEach((t=>u[t]=e[t])))}if(s){let s=0;return t.U.promiseMapAllSeries(l,(e=>g(i,e.path,e.branch).then(p,(e=>{console.log(e.message),++s})))).then((()=>(s&&(n.translationsCache()[d]=u),s!==l.length&&u?Promise.resolve(u):(pxt.tickEvent("translations.livetranslationsfailed"),v(e,r,i,a,o,!1,c)))))}return Promise.all(l.map((e=>n.httpGetJsonAsync(`${r}locales/${i}/${e.staticName}`).catch((e=>{}))))).then((e=>{let t={};e.forEach((e=>pxt.Util.jsonMergeFrom(t,e))),Object.keys(t).length&&(u=t,n.translationsCache()[d]=u)}),(e=>{console.error("failed to load localizations")})).then((()=>u))}function b(e){const t={};for(const n of Object.keys(e))t[n]=x(e[n]);return t}function x(e){var t;return{attributes:Object.assign({},e.attributes),parameters:null===(t=e.parameters)||void 0===t?void 0:t.map(k),extendsTypes:e.extendsTypes?[...e.extendsTypes]:void 0,pkgs:e.pkgs?[...e.pkgs]:void 0,combinedProperties:e.combinedProperties?[...e.combinedProperties]:void 0,name:e.name,namespace:e.namespace,fileName:e.fileName,kind:e.kind,retType:e.retType,isInstance:e.isInstance,isContextual:e.isContextual,qName:e.qName,pkg:e.pkg,snippet:e.snippet,snippetName:e.snippetName,snippetWithMarkers:e.snippetWithMarkers,pySnippet:e.pySnippet,pySnippetName:e.pySnippetName,pySnippetWithMarkers:e.pySnippetWithMarkers,blockFields:e.blockFields,isReadOnly:e.isReadOnly,pyName:e.pyName,pyQName:e.pyQName,snippetAddsDefinitions:e.snippetAddsDefinitions}}function k(e){var n,r;return{name:e.name,description:e.description,type:e.type,pyTypeString:e.pyTypeString,initializer:e.initializer,default:e.default,properties:null===(n=e.properties)||void 0===n?void 0:n.map(S),handlerParameters:null===(r=e.handlerParameters)||void 0===r?void 0:r.map(S),options:e.options?t.U.clone(e.options):void 0,isEnum:e.isEnum}}function S(e){return{name:e.name,type:e.type}}n.PromiseBuffer=class{constructor(){this.waiting=[],this.available=[]}drain(){for(let e of this.waiting)e(new Error("Promise Buffer Reset"));this.waiting=[],this.available=[]}pushError(e){this.push(e)}push(e){let t=this.waiting.shift();t?t(e):this.available.push(e)}shiftAsync(e=0){if(this.available.length>0){let e=this.available.shift();return e instanceof Error?Promise.reject(e):Promise.resolve(e)}return new Promise(((n,r)=>{let i=e=>{e instanceof Error?r(e):n(e)};this.waiting.push(i),e>0&&t.U.delay(e).then((()=>{let e=this.waiting.indexOf(i);e>=0&&(this.waiting.splice(e,1),r(new Error("Timeout")))}))}))}},n.now=_,n.nowSeconds=function(){return Math.round(_()/1e3)},n.timeout=function(e){return new Promise((t=>setTimeout((()=>t()),e)))},n.cpuUs=()=>{const e="undefined"!=typeof performance?performance.now.bind(performance)||performance.moznow.bind(performance)||performance.msNow.bind(performance)||performance.webkitNow.bind(performance)||performance.oNow.bind(performance):Date.now;return n.cpuUs=()=>1e3*e(),n.cpuUs()},n.getMime=function(e){let t=/\.([a-zA-Z0-9]+)$/.exec(e);if(!t)return"application/octet-stream";switch(t[1].toLowerCase()){case"txt":return"text/plain";case"html":case"htm":return"text/html";case"css":return"text/css";case"js":return"application/javascript";case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"ico":return"image/x-icon";case"manifest":return"text/cache-manifest";case"webmanifest":return"application/manifest+json";case"json":return"application/json";case"svg":return"image/svg+xml";case"eot":return"application/vnd.ms-fontobject";case"ttf":return"font/ttf";case"woff":return"application/font-woff";case"woff2":return"application/font-woff2";case"md":return"text/markdown";case"xml":return"application/xml";case"m4a":return"audio/m4a";case"mp3":return"audio/mp3";default:return"application/octet-stream"}},n.randomUint32=m,n.guidGen=function(){function e(){return(65536|m()).toString(16).slice(-4)}return e()+e()+"-"+e()+"-4"+e().slice(-3)+"-"+e()+"-"+e()+e()+e()},n.downloadLiveTranslationsAsync=g,n.pxtLangCookieId="PXT_LANG",n.langCookieExpirationDays=30,n.allLanguages={af:{englishName:"Afrikaans",localizedName:"Afrikaans"},ar:{englishName:"Arabic",localizedName:"العربية"},az:{englishName:"Azerbaijani",localizedName:"آذربایجان دیلی"},bg:{englishName:"Bulgarian",localizedName:"български"},bi:{englishName:"Bislama",localizedName:"Bislama"},bn:{englishName:"Bengali",localizedName:"বাংলা"},ca:{englishName:"Catalan",localizedName:"Català"},cs:{englishName:"Czech",localizedName:"Čeština"},cy:{englishName:"Welsh",localizedName:"Cymraeg"},da:{englishName:"Danish",localizedName:"Dansk"},de:{englishName:"German",localizedName:"Deutsch"},el:{englishName:"Greek",localizedName:"Ελληνικά"},en:{englishName:"English",localizedName:"English"},"es-ES":{englishName:"Spanish (Spain)",localizedName:"Español (España)"},"es-MX":{englishName:"Spanish (Mexico)",localizedName:"Español (México)"},et:{englishName:"Estonian",localizedName:"Eesti"},eu:{englishName:"Basque",localizedName:"Euskara"},fa:{englishName:"Persian",localizedName:"فارسی"},fi:{englishName:"Finnish",localizedName:"Suomi"},fil:{englishName:"Filipino",localizedName:"Filipino"},fo:{englishName:"Faroese",localizedName:"føroyskt"},fr:{englishName:"French",localizedName:"Français"},"fr-CA":{englishName:"French (Canada)",localizedName:"Français (Canada)"},gl:{englishName:"Galician",localizedName:"galego"},"gu-IN":{englishName:"Gujarati",localizedName:"ગુજરાતી"},haw:{englishName:"Hawaiian",localizedName:"ʻŌlelo Hawaiʻi"},hi:{englishName:"Hindi",localizedName:"हिन्दी"},he:{englishName:"Hebrew",localizedName:"עברית"},hr:{englishName:"Croatian",localizedName:"Hrvatski"},hu:{englishName:"Hungarian",localizedName:"Magyar"},"hy-AM":{englishName:"Armenian (Armenia)",localizedName:"Հայերէն (Հայաստան)"},id:{englishName:"Indonesian",localizedName:"Bahasa Indonesia"},is:{englishName:"Icelandic",localizedName:"Íslenska"},it:{englishName:"Italian",localizedName:"Italiano"},ja:{englishName:"Japanese",localizedName:"日本語"},"ja-HIRA":{englishName:"Hiragana",localizedName:"にほんご"},ka:{englishName:"Georgian",localizedName:"ქართული"},kab:{englishName:"Kabyle",localizedName:"شئعم"},kk:{englishName:"Kazakh",localizedName:"қазақ тілі"},km:{englishName:"Khmer",localizedName:"ខ្មែរ"},kmr:{englishName:"Kurmanji (Kurdish)",localizedName:"کورمانجی‎"},kn:{englishName:"Kannada",localizedName:"ಕನ್ನಡ"},ko:{englishName:"Korean",localizedName:"한국어"},lt:{englishName:"Lithuanian",localizedName:"Lietuvių"},lv:{englishName:"Latvian",localizedName:"Latviešu"},"ml-IN":{englishName:"Malayalam",localizedName:"മലയാളം"},mr:{englishName:"Marathi",localizedName:"मराठी"},ms:{englishName:"Malay",localizedName:"Melayu"},nl:{englishName:"Dutch",localizedName:"Nederlands"},no:{englishName:"Norwegian",localizedName:"Norsk"},nb:{englishName:"Norwegian Bokmal",localizedName:"Norsk bokmål"},"nn-NO":{englishName:"Norwegian Nynorsk",localizedName:"Norsk nynorsk"},"pa-IN":{englishName:"Punjabi",localizedName:"ਪੰਜਾਬੀ"},pl:{englishName:"Polish",localizedName:"Polski"},ps:{englishName:"Pashto",localizedName:"پښتو"},"pt-BR":{englishName:"Portuguese (Brazil)",localizedName:"Português (Brasil)"},"pt-PT":{englishName:"Portuguese (Portugal)",localizedName:"Português (Portugal)"},ro:{englishName:"Romanian",localizedName:"Română"},ru:{englishName:"Russian",localizedName:"Русский"},sat:{englishName:"Santali",localizedName:"ᱥᱚᱸᱴᱚᱞᱤ"},"si-LK":{englishName:"Sinhala",localizedName:"සිංහල"},sk:{englishName:"Slovak",localizedName:"Slovenčina"},sl:{englishName:"Slovenian",localizedName:"Slovenski"},sq:{englishName:"Albanian",localizedName:"shqip"},sr:{englishName:"Serbian (Latin)",localizedName:"Srpski"},su:{englishName:"Sundanese",localizedName:"ᮘᮞ ᮞᮥᮔ᮪ᮓ"},"sv-SE":{englishName:"Swedish",localizedName:"Svenska"},sw:{englishName:"Swahili",localizedName:"Kiswahili"},"sw-TZ":{englishName:"Swahili (Tanzania)",localizedName:"Kiswahili (Tanzania)"},ta:{englishName:"Tamil",localizedName:"தமிழ்"},te:{englishName:"Telugu",localizedName:"తెలుగు"},th:{englishName:"Thai",localizedName:"ภาษาไทย"},tl:{englishName:"Tagalog",localizedName:"ᜏᜒᜃᜅ᜔ ᜆᜄᜎᜓᜄ᜔"},tr:{englishName:"Turkish",localizedName:"Türkçe"},uk:{englishName:"Ukrainian",localizedName:"Українська"},"ur-IN":{englishName:"Urdu (India)",localizedName:"اردو (ہندوستان)"},"ur-PK":{englishName:"Urdu (Pakistan)",localizedName:"اردو (پاکستان)"},vi:{englishName:"Vietnamese",localizedName:"Tiếng việt"},"zh-CN":{englishName:"Chinese (Simplified)",localizedName:"中文(简体)"},"zh-TW":{englishName:"Chinese (Traditional)",localizedName:"中文(繁體)"}},n.isLocaleEnabled=h,n.updateLocalizationAsync=function(t){const{targetId:r,baseUrl:i,pxtBranch:a,targetBranch:o,force:s}=t;let{code:c}=t;if(c=n.normalizeLanguageCode(c)[0],"en-US"===c&&(c="en"),c===n.userLanguage()||!h(c)&&!s)return pxt.debug(`loc: ${c} (using built-in)`),Promise.resolve();pxt.debug(`loc: ${c}`);const l=pxt.Util.liveLocalizationEnabled();return v(r,i,c,a,o,l,e.pxtc.Util.TranslationsKind.Editor).then((t=>{var s;return t&&(n.setUserLanguage(c),null===(s=pxt.analytics)||void 0===s||s.addDefaultProperties({lang:c}),n.setLocalizedStrings(t)),e.pxtc.Util.downloadTranslationsAsync(r,i,c,a,o,l,e.pxtc.Util.TranslationsKind.Apis).then((t=>{t&&(e.pxtc.apiLocalizationStrings=t)}))}))},function(e){e[e.Editor=0]="Editor",e[e.Sim=1]="Sim",e[e.Apis=2]="Apis",e[e.SkillMap=3]="SkillMap"}(y=n.TranslationsKind||(n.TranslationsKind={})),n.downloadTranslationsAsync=v,n.capitalize=function(e){return e?e[0].toLocaleUpperCase()+e.slice(1):e},n.uncapitalize=function(e){return(e||"").split(/(?=[A-Z])/g).join(" ").toLowerCase()},n.range=function(e){let t=[];for(let n=0;n<e;++n)t.push(n);return t},n.multipartPostAsync=function(e,t={},r=null,i=null){const a="--------------------------0461489f461126c5";let o="";Object.keys(t).forEach((e=>{return n=e,r=t[e],o+=a+"\r\n",o+='Content-Disposition: form-data; name="'+n+'"\r\n\r\n',void(o+=r+"\r\n");var n,r})),r&&function(e,t){const n=e.split("/").reverse()[0];o+=a+"\r\n",o+='Content-Disposition: form-data; name="files['+e+']"; filename="'+n+'"\r\n',o+="\r\n",o+=t+"\r\n"}(r,i),o+=a+"--\r\n";const s={url:e,method:"POST",headers:{"Content-Type":"multipart/form-data; boundary="+a.slice(2)},data:o};return n.httpRequestCoreAsync(s)},n.toDataUri=function(e,n){return/^https?:/i.test(e)||/^data:/i.test(e)?e:(n||/^<svg/i.test(e)&&(n="image/svg+xml"),/xml|svg/.test(n)?`data:${n},${encodeURIComponent(e)}`:`data:${n||"image/png"};base64,${t.encodeBase64(f(e))}`)},n.imageMagic=1496611453,n.imageHeaderSize=36,n.encodeBlobAsync=function(e,t){const r=n.imageHeaderSize+t.length,i=3*(e.width*e.height-1);let a=1;for(;a<4&&!(i*a>=8*r);)a++;let o=i*a>>3,s=r-o,c=0,l=e.width*e.height*4;if(s>0){const t=3*e.width;c=Math.ceil(s/t);const n=document.createElement("canvas");n.width=e.width,n.height=e.height+c;n.getContext("2d").drawImage(e,0,0),e=n}let u=pxt.HF2.encodeU32LE([n.imageMagic,t.length,c,0,0,0,0,0,0]);function d(e,t,n,r){let i=0,a=0,o=r[a++];const s=(1<<n)-1;let c=!0;for(;c;){let l=o>>i&s,u=8-i;if(u<=n){if(a>=r.length){if(0==u)break;c=!1}o=r[a++],l|=o<<u&s,i=n-u}else i+=n;e[t]=255&(e[t]&~s|l),3==(3&++t)&&(e[t++]=255)}return t}pxt.Util.assert(u.length==n.imageHeaderSize);const p=e.getContext("2d"),f=p.getImageData(0,0,e.width,e.height);d(f.data,0,1,[a]);let _=4;if(_=d(f.data,_,a,u),pxt.Util.assert(0==(3&_)),0==c)_=d(f.data,_,a,t);else{let e=o-u.length;_=d(f.data,_,a,t.slice(0,e)),_=d(f.data,l,8,t.slice(e))}for(_|=3;_<f.data.length;)f.data[_]=255,_+=4;return p.putImageData(f,0,0),e},n.decodeBlobAsync=function(e){return pxt.BrowserUtils.loadCanvasAsync(e).then((e=>{const t=e.getContext("2d").getImageData(0,0,e.width,e.height).data,r=1&t[0]|(1&t[1])<<1|(1&t[2])<<2;if(r>5||0==r)return Promise.reject(new Error(n.lf("Invalid encoded PNG format")));function i(e,n,r){let i=0,a=0,o=0;const s=(1<<n)-1;for(;a<r.length;)o|=(t[e++]&s)<<i,3==(3&e)&&e++,i+=n,i>=8&&(r[a++]=255&o,o>>=8,i-=8);return e}const a=new Uint8Array(pxt.Util.imageHeaderSize);let o=i(4,r,a);const s=pxt.HF2.decodeU32LE(a);if(s[0]!=pxt.Util.imageMagic)return Promise.reject(new Error(n.lf("Invalid magic in encoded PNG")));const c=new Uint8Array(s[1]),l=s[2];if(l>0){const t=(e.height-l)*e.width,n=new Uint8Array((3*(t-1)*r>>3)-pxt.Util.imageHeaderSize);i(o,r,n),c.set(n);const a=new Uint8Array(c.length-n.length);i(4*t,8,a),c.set(a,n.length)}else i(o,r,c);return c}))},n.parseQueryString=function(e){let t={};return e.replace(/\+/g," ").replace(/([^#?&=]+)=([^#?&=]*)/g,((e,n,r)=>(t[decodeURIComponent(n)]=decodeURIComponent(r),""))),t},n.stringifyQueryString=function(e,t){for(let n of Object.keys(t))e.indexOf("?")>=0?e+="&":e+="?",e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]);return e},n.cloneTargetBundle=function(e){const t=(e=Object.assign({},e)).apiInfo;delete e.apiInfo;const r=e.bundleddirs;delete e.bundleddirs;const i=e.bundledpkgs;delete e.bundledpkgs;const a=e.tutorialInfo;delete e.tutorialInfo;const o=n.clone(e);if(t){o.apiInfo={};for(const e of Object.keys(t)){const n=t[e].apis;o.apiInfo[e]={sha:t[e].sha,apis:{jres:Object.assign({},n.jres),byQName:b(n.byQName)}}}}if(r&&(o.bundleddirs=[...r]),i){o.bundledpkgs={};for(const e of Object.keys(i))o.bundledpkgs[e]=Object.assign({},i[e])}if(a){o.tutorialInfo={};for(const e of Object.keys(a)){const t=a[e];o.tutorialInfo[e]={hash:t.hash,usedBlocks:Object.assign({},t.usedBlocks),snippetBlocks:Object.assign({},t.snippetBlocks),highlightBlocks:Object.assign({},t.highlightBlocks),validateBlocks:Object.assign({},t.validateBlocks)}}}return o},n.cloneApis=b,n.cloneSymbolInfo=x,n.toUTF8Array=function(e){return(new TextEncoder).encode(e)},n.fromUTF8Array=function(e){return(new TextDecoder).decode(e)}}(t.Util||(t.Util={}))}(e.pxtc||(e.pxtc={}))}(ts||(ts={})),function(e){!function(e){!function(t){e.Util.httpRequestCoreAsync=function(t){return new Promise(((n,r)=>{let i,a=!1,o=e.Util.clone(t.headers)||{};i=new XMLHttpRequest,t.responseArrayBuffer&&(i.responseType="arraybuffer"),t.withCredentials&&(i.withCredentials=!0),i.onreadystatechange=()=>{if(!a&&4==i.readyState){a=!0;let e={statusCode:i.status,headers:{},buffer:i.responseBody||i.response,text:t.responseArrayBuffer?void 0:i.responseText};i.getAllResponseHeaders().split(/\r?\n/).forEach((t=>{let n=/^\s*([^:]+): (.*)/.exec(t);n&&(e.headers[n[1].toLowerCase()]=n[2])})),n(e)}};let s,c=t.data,l=t.method||(null==c?"GET":"POST");null==c?s=null:c instanceof Uint8Array?s=c:"object"==typeof c?(s=JSON.stringify(c),o["content-type"]="application/json; charset=utf8"):"string"==typeof c?s=c:e.Util.oops("bad data"),i.open(l,t.url),Object.keys(o).forEach((e=>{i.setRequestHeader(e,o[e])})),null==s?i.send():i.send(s)}))},e.Util.sha256=o,e.Util.getRandomBuf=e=>{if(window.crypto)window.crypto.getRandomValues(e);else for(let t=0;t<e.length;++t)e[t]=Math.floor(255*Math.random())};const n=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function r(e,t){return e>>>t|e<<32-t}function i(t,i){e.Util.assert(8==t.length),e.Util.assert(64==i.length);for(let e=16;e<64;++e){let t=r(i[e-15],7)^r(i[e-15],18)^i[e-15]>>>3,n=r(i[e-2],17)^r(i[e-2],19)^i[e-2]>>>10;i[e]=i[e-16]+t+i[e-7]+n|0}let a=t[0],o=t[1],s=t[2],c=t[3],l=t[4],u=t[5],d=t[6],p=t[7];for(let e=0;e<64;++e){let t=p+(r(l,6)^r(l,11)^r(l,25))+(l&u^~l&d)+n[e]+i[e]|0,f=a&o^a&s^o&s;p=d,d=u,u=l,l=c+t|0,c=s,s=o,o=a,a=t+((r(a,2)^r(a,13)^r(a,22))+f|0)|0}t[0]+=a,t[1]+=o,t[2]+=s,t[3]+=c,t[4]+=l,t[5]+=u,t[6]+=d,t[7]+=p}function a(e){let t=new Uint32Array(8);t[0]=1779033703,t[1]=3144134277,t[2]=1013904242,t[3]=2773480762,t[4]=1359893119,t[5]=2600822924,t[6]=528734635,t[7]=1541459225;let n=new Uint32Array(64);function r(e){let r=e.length-63;for(let a=0;a<r;a+=64){for(let t=0;t<16;t++){let r=(t<<2)+a;n[t]=e[r]<<24|e[r+1]<<16|e[r+2]<<8|e[r+3]}i(t,n)}}r(e);let a=64-(e.length+9)%64;64==a&&(a=0);let o=e.length-e.length%64,s=new Uint8Array(e.length-o+1+a+8),c=0;for(;o<e.length;)s[c++]=e[o++];for(s[c++]=128;a-- >0;)s[c++]=0;let l=8*e.length;for(c=s.length;l>0;)s[--c]=255&l,l>>=8;r(s);let u="";for(let e=0;e<t.length;++e)u+=("000000000"+t[e].toString(16)).slice(-8);return u.toLowerCase()}function o(t){pxt.perf.measureStart("sha256buffer");const n=a(e.Util.toUTF8Array(t));return pxt.perf.measureEnd("sha256buffer"),n}t.sha256buffer=a,t.sha256string=o}(e.BrowserImpl||(e.BrowserImpl={}))}(e.pxtc||(e.pxtc={}))}(ts||(ts={})),function(e){!function(e){!function(t){const n={add:(e,t,n)=>{if("object"!=typeof e)throw new Error("jsonPatch: expected object type");if(t in e)throw new Error(`jsonPatch: object already contains key ${t}`);e[t]=n},replace:(e,t,n)=>{if("object"!=typeof e)throw new Error("jsonPatch: expected object type");e[t]=n},remove:(e,t)=>{if("object"!=typeof e)throw new Error("jsonPatch: expected object type");delete e[t]}},r={add:(e,t,n)=>{if(!Array.isArray(e))throw new Error("jsonPatch: expected array type");if(t in e)throw new Error(`jsonPatch: key ${t} already exists in array`);"number"!=typeof t||t!==Math.floor(t)?e[t]=n:e.splice(t,0,n)},replace:(e,t,n)=>{if(!Array.isArray(e))throw new Error("jsonPatch: expected array type");"number"!=typeof t||t!==Math.floor(t)?e[t]=n:e.splice(t,1,n)},remove:(e,t)=>{if(!Array.isArray(e))throw new Error("jsonPatch: expected array type");"number"!=typeof t||t!==Math.floor(t)?delete e[t]:e.splice(t,1)}};t.diff=function(e,t){const n={add:[],remove:[],replace:[]};function r(e,t){if(!Array.isArray(e))return t;const n=Number.parseFloat(t);return Number.isNaN(n)?t:n}return function e(t,i,a){if(!Object.is(t,i)){i=i||{},t=t||{};for(let e of Object.keys(t))if(!(e in i)){const i=r(t,e);n.remove.push({op:"remove",path:a.concat(i)})}for(const o of Object.keys(i)){const s=t[o],c=i[o],l=r(i,o);l in t?"object"!=typeof s&&"object"!=typeof c&&s!==c||typeof s!=typeof c||Array.isArray(s)!==Array.isArray(c)?n.replace.push({op:"replace",path:a.concat(l),value:c}):e(s,c,a.concat(l)):void 0!==i[l]&&(a.length&&n.add.push({op:"add",path:a,value:Array.isArray(i)?[]:{}}),n.add.push({op:"add",path:a.concat(l),value:c}))}}}(e,t,[]),[...n.remove.reverse(),...n.replace,...n.add.sort(((e,t)=>e.path.length-t.path.length))]},t.patchInPlace=function(e,t){if(!e||"object"!=typeof e)throw new Error("jsonPatch: Must be an object or an array.");for(const i of t){const t=i.path.slice(),a=t.pop();if(null==a)throw new Error("jsonPatch: missing last key");let o=e,s=t.shift();for(;null!=s;){if(!(s in o))throw new Error(`jsonPatch: missing parent element ${s}`);o=o[s],s=t.shift()}if(Array.isArray(o)&&"number"!=typeof a)throw new Error("jsonPatch: expected numeric index for array object");const c=Array.isArray(o)?r:n;"remove"===i.op?c.remove(o,a):"add"!==i.op||a in o?"replace"===i.op&&c.replace(o,a,i.value):c.add(o,a,i.value)}},t.opsAreEqual=function(t,n){return t.op===n.op&&e.U.arrayEquals(t.path,n.path)}}(e.jsonPatch||(e.jsonPatch={}))}(e.pxtc||(e.pxtc={}))}(ts||(ts={})),function(e){!function(t){!function(t){!function(t){function n(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){const r=Array.isArray(e),i=Array.isArray(t);if(r&&i){if(e.length!==t.length)return!1;for(let r=0;r<e.length;++r)if(!n(e[r],t[r]))return!1;return!0}if(r!==i)return!1;const a=Object.keys(e);if(a.length!==Object.keys(t).length)return!1;for(const r of a){if(!t.hasOwnProperty(r))return!1;if(!n(e[r],t[r]))return!1}return!0}return e!=e&&t!=t}t.diffTests=function(){const t=[{comment:"test 1",obja:{a:4,b:5},objb:{a:3,b:5},expected:[{op:"replace",path:["a"],value:3}]},{comment:"test 2",obja:{a:3,b:5},objb:{a:4,c:5},expected:[{op:"remove",path:["b"]},{op:"replace",path:["a"],value:4},{op:"add",path:["c"],value:5}]},{comment:"test 3",obja:{a:4,b:[1,2,3]},objb:{a:3,b:[1,2,4]},expected:[{op:"replace",path:["a"],value:3},{op:"replace",path:["b",2],value:4}]},{comment:"test 4",obja:{a:3,b:[1,2,4]},objb:{a:3,b:[1,2,4,5]},expected:[{op:"add",path:["b"],value:[]},{op:"add",path:["b",3],value:5}]},{comment:"test 5",obja:{a:4,b:{c:3}},objb:{a:4,b:{c:4}},expected:[{op:"replace",path:["b","c"],value:4}]},{comment:"test 6",obja:{a:4,b:{c:4}},objb:{a:5,b:{d:4}},expected:[{op:"remove",path:["b","c"]},{op:"replace",path:["a"],value:5},{op:"add",path:["b"],value:{}},{op:"add",path:["b","d"],value:4}]},{comment:"test 7",obja:{a:4,b:[2,"foo"]},objb:{a:4,b:[2,"foo",["this","that"]]},expected:[{op:"add",path:["b"],value:[]},{op:"add",path:["b",2],value:["this","that"]}]}];for(const r of t){console.log(r.comment);const t=e.pxtc.jsonPatch.diff(r.obja,r.objb);n(t,r.expected)?console.log("succeeded"):(console.error("FAILED"),console.log("got",t),console.log("exp",r.expected))}},t.patchTests=function(){const t=[{comment:"test 1",obj:{a:"foo",b:[4,11]},patches:[{op:"remove",path:["b"]},{op:"replace",path:["a"],value:4},{op:"add",path:["c"],value:5}],expected:{a:4,c:5}},{comment:"test 2",obj:{a:4,b:[1,2,3]},patches:[{op:"replace",path:["a"],value:3},{op:"replace",path:["b",2],value:4},{op:"add",path:["b",3],value:9}],expected:{a:3,b:[1,2,4,9]}},{comment:"test 3",obj:{a:4,b:{c:3}},patches:[{op:"replace",path:["a"],value:5},{op:"remove",path:["b","c"]},{op:"add",path:["b","d"],value:4}],expected:{a:5,b:{d:4}}},{comment:"test 4",obj:{a:4},patches:[{op:"add",path:["b"],value:[]},{op:"add",path:["b",0],value:"foo"},{op:"add",path:["b",1],value:"bar"}],expected:{a:4,b:["foo","bar"]},validate:e=>e.b&&e.b.forEach}];for(const r of t){console.log(r.comment),e.pxtc.jsonPatch.patchInPlace(r.obj,r.patches);!n(r.obj,r.expected)||!r.validate||r.validate(r.obj)?console.log("succeeded"):r.expected&&(console.error("FAILED"),console.log("got",r.obj),console.log("exp",r.expected))}}}(t.tests||(t.tests={}))}(t.jsonPatch||(t.jsonPatch={}))}(e.pxtc||(e.pxtc={}))}(ts||(ts={})),function(e){e.perf||(e.perf={})}(pxt||(pxt={})),pxt.perf.report||(pxt.perf.report=()=>{}),pxt.perf.recordMilestone||(pxt.perf.recordMilestone=()=>{}),pxt.perf.measureStart||(pxt.perf.measureStart=()=>{}),pxt.perf.measureEnd||(pxt.perf.measureEnd=()=>{}),function(e){let t;e.U=pxtc.Util,e.Util=pxtc.Util;let n,r,i,a={};function o(n,r){/^csv-/.test(n)?e.setAppTargetVariant(n.replace(/^csv-*/,"")):e.appTarget&&(a[n]=r,e.U.jsonCopyFrom(e.appTarget.compile.switches,a),e.U.jsonCopyFrom(t.compile.switches,a))}function s(e,t,n){if(Array.isArray(e))return e.map((e=>s(e,t,n)));if("object"==typeof e){for(const r of Object.keys(e))e[r]=s(e[r],t,n);return e}return"string"==typeof e&&t.test(e)?n(e):e}function c(){let t=e.appTarget.compile;t||(t=e.appTarget.compile={isNative:!1,hasHex:!1,switches:{}}),t.hasHex&&(t.nativeType||(t.nativeType=pxtc.NATIVE_TYPE_THUMB)),t.switches||(t.switches={}),t.nativeType==pxtc.NATIVE_TYPE_VM&&(t.sourceMap=!0),e.U.jsonCopyFrom(t.switches,a),t.jsRefCounting=!1,t.useUF2||t.useELF||null!=t.noSourceInFlash||(t.noSourceInFlash=!0),void 0===t.utf8&&(t.utf8=!0),e.appTarget.appTheme||(e.appTarget.appTheme={}),e.appTarget.appTheme.embedUrl||(e.appTarget.appTheme.embedUrl=e.appTarget.appTheme.homeUrl);let n=e.appTarget.compileService;if(n&&n.yottaTarget&&!n.yottaBinary&&(n.yottaBinary="pxt-microbit-app-combined.hex"),e.appTarget=s(e.appTarget,/^@cdnUrl@/i,(t=>e.BrowserUtils.patchCdn(t))),Object.keys(e.appTarget.bundledpkgs).forEach((t=>{const n=e.appTarget.bundledpkgs[t],r=JSON.parse(n[e.CONFIG_NAME]);r.icon&&(r.icon=e.BrowserUtils.patchCdn(r.icon)),n[e.CONFIG_NAME]=e.Package.stringifyConfig(r)})),"undefined"!=typeof window){const t={"lockededitor=1":{appTheme:{lockedEditor:!0}},"hidemenu=1":{appTheme:{hideMenuBar:!0}}};e.appTarget.queryVariants&&e.Util.jsonCopyFrom(t,e.appTarget.queryVariants);const n=window.location.href;Object.keys(t).forEach((r=>{if(new RegExp(r,"i").exec(n)){let n=t[r];n&&e.U.jsonMergeFrom(e.appTarget,n)}}))}}function l(n=!1){e.perf.measureStart("reloadAppTargetVariant");const r=n?"":JSON.stringify(e.appTarget);if(e.appTarget=e.U.cloneTargetBundle(t),e.appTargetVariant){const t=e.appTarget.variants&&e.appTarget.variants[e.appTargetVariant];t?e.U.jsonMergeFrom(e.appTarget,t):e.U.userError(lf("Variant '{0}' not defined in pxtarget.json",e.appTargetVariant))}c(),!n&&e.onAppTargetChanged&&r!=JSON.stringify(e.appTarget)&&e.onAppTargetChanged(),e.perf.measureEnd("reloadAppTargetVariant")}function u(){return{relprefix:"/--",workerjs:"/worker.js",monacoworkerjs:"/monacoworker.js",gifworkerjs:"/gifjs/gif.worker.js",serviceworkerjs:"/serviceworker.js",typeScriptWorkerJs:"/tsworker.js",pxtVersion:"local",pxtRelId:"localRelId",pxtCdnUrl:"/cdn/",commitCdnUrl:"/cdn/",blobCdnUrl:"/blb/",cdnUrl:"/cdn/",targetUrl:"",targetVersion:"local",targetRelId:"",targetId:e.appTarget?e.appTarget.id:"",simUrl:"/sim/simulator.html",simserviceworkerUrl:"/simulatorserviceworker.js",simworkerconfigUrl:"/sim/workerConfig.js",partsUrl:"/sim/siminstructions.html"}}function d(){return i||(i=e.Cloud.downloadTargetConfigAsync().then((e=>e||{}),(e=>({})))),i}function p(t=null){return t||(t=e.appTarget.compile),t.nativeType==ts.pxtc.NATIVE_TYPE_VM?t.useESP?t.useUF2?ts.pxtc.BINARY_UF2:ts.pxtc.BINARY_ESP:ts.pxtc.BINARY_PXT64:t.useUF2&&!t.switches.rawELF?ts.pxtc.BINARY_UF2:t.useELF?ts.pxtc.BINARY_ELF:ts.pxtc.BINARY_HEX}e.setAppTarget=function(n){e.appTarget=n||{},c(),t=e.U.cloneTargetBundle(e.appTarget)},e.setBundledApiInfo=function(e){for(const t of Object.keys(e)){const n=e[t].apis.byQName;for(const e of Object.keys(n)){const t=n[e],r=e.lastIndexOf("."),i=t.pyQName,a=n[e]={kind:Math.abs(t.kind||7),qName:e,namespace:e.slice(0,r<0?0:r),name:e.slice(r+1),pyQName:i,pyName:i?i.slice(i.lastIndexOf(".")+1):void 0,fileName:"",attributes:t.attributes||{},retType:t.retType||"void",parameters:t.parameters?t.parameters.map((e=>({name:e.name,description:e.description||"",type:e.type||"number",initializer:e.initializer,default:e.default,options:e.options||{},isEnum:!!e.isEnum,handlerParameters:e.handlerParameters}))):null,extendsTypes:t.extendsTypes,snippet:t.kind&&t.kind<0?null:void 0,isInstance:!!t.isInstance,isReadOnly:!!t.isReadOnly},o=a.attributes;o.paramDefl||(o.paramDefl={}),o.callingConvention||(o.callingConvention=0),o.paramHelp||(o.paramHelp={}),o.jsDoc||(o.jsDoc=""),o._name=a.name.replace(/@.*/,"")}}n=e},e.getBundledApiInfo=function(){return n},e.savedAppTheme=function(){return t?t.appTheme:void 0},e.setCompileSwitch=o,e.setCompileSwitches=function(e){if(e)for(let t of e.split(/[\s,;:]+/))t&&("-"==t[0]?o(t.slice(1),!1):o(t,!0))},e.bundledSvg=function(t){if(!t)return;let n=r&&r[t];if(n)return n;if(!e.appTarget.simulator||!e.appTarget.simulator.dynamicBoardDefinition)return;r||(r={});const i=e.appTarget.bundledpkgs[t];if(!i)return;if(JSON.parse(i["pxt.json"]).core&&i["board.json"]){const n=JSON.parse(i["board.json"]);if(n&&n.visual&&n.visual.image){let a=n.visual.image;/^pkg:\/\//.test(a)&&(a=i[a.slice(6)]),r[t]=`data:image/svg+xml;base64,${ts.pxtc.encodeBase64(e.Util.toUTF8(a))}`}}return r[t]},e.replaceStringsInJsonBlob=s,e.reloadAppTargetVariant=l,e.setAppTargetVariant=function(t,n={}){e.debug(`app variant: ${t}`),(n.force||e.appTargetVariant!==t&&(e.appTargetVariant||t))&&(e.appTargetVariant=t,l(n.temporary))},e.setHwVariant=function(t,n){t=t.replace(/.*---/,""),/^[\w\-]+$/.test(t)?(e.hwVariant=t,e.hwName=n||t):(e.hwVariant=null,e.hwName=null),e.debug(`hwVariant: ${e.hwVariant} (${e.hwName})`)},e.hasHwVariants=function(){return!!e.appTarget.variants&&Object.keys(e.appTarget.bundledpkgs).some((e=>/^hw---/.test(e)))},e.getHwVariants=function(){return e.appTarget.variants?Object.keys(e.appTarget.bundledpkgs).filter((e=>/^hw---/.test(e))).map((t=>JSON.parse(e.appTarget.bundledpkgs[t][e.CONFIG_NAME]))).filter((t=>!!e.appTarget.appTheme.experimentalHw||!t.experimentalHw)):[]},e.options={},e.debug="undefined"!=typeof console&&console.debug?t=>{e.options.debug&&console.debug(t)}:()=>{},e.log="undefined"!=typeof console&&console.log?e=>{console.log(e)}:()=>{},e.reportException=function(e,t){if(console&&(console.error(e),t))try{console.log(t)}catch(e){}},e.reportError=function(t,n,r){if(console&&(console.error(`${t}: ${n}`),r))try{e.log(JSON.stringify(r,null,2))}catch(e){}},e.localWebConfig=u,e.getOnlineCdnUrl=function(){if(!e.webConfig)return null;let t=/^(https:\/\/[^\/]+)/.exec(e.webConfig.commitCdnUrl);return t?t[1]:null},e.setupWebConfig=function(t){t?e.webConfig=t:e.webConfig||(e.webConfig=u())},e.getEmbeddedScript=function(t){return e.U.lookup(e.appTarget.bundledpkgs||{},t)},e.targetConfigAsync=d,e.packagesConfigAsync=function(){return d().then((e=>e?e.packages:void 0))},e.CONFIG_NAME="pxt.json",e.SIMSTATE_JSON=".simstate.json",e.SERIAL_EDITOR_FILE="serial.txt",e.README_FILE="README.md",e.GITIGNORE_FILE=".gitignore",e.ASSETS_FILE="assets.json",e.CLOUD_ID="pxt/",e.BLOCKS_PROJECT_NAME="blocksprj",e.JAVASCRIPT_PROJECT_NAME="tsprj",e.PYTHON_PROJECT_NAME="pyprj",e.MAIN_BLOCKS="main.blocks",e.MAIN_TS="main.ts",e.MAIN_PY="main.py",e.DEFAULT_GROUP_NAME="other",e.TILEMAP_CODE="tilemap.g.ts",e.TILEMAP_JRES="tilemap.g.jres",e.IMAGES_CODE="images.g.ts",e.IMAGES_JRES="images.g.jres",e.TUTORIAL_CODE_START="_onCodeStart.ts",e.TUTORIAL_CODE_STOP="_onCodeStop.ts",e.TUTORIAL_INFO_FILE="tutorial-info-cache.json",e.TUTORIAL_CUSTOM_TS="tutorial.custom.ts",e.BREAKPOINT_TABLET=991,e.PALETTES_FILE="_palettes.json",e.HISTORY_FILE="_history",e.outputName=p,e.isOutputText=function(e=null){return p(e)==ts.pxtc.BINARY_HEX}}(pxt||(pxt={})),function(e){!function(t){const n="this";let r;function i(){if(r={device_while:{name:e.Util.lf("a loop that repeats while the condition is true"),tooltip:e.Util.lf("Run the same sequence of actions while the condition is met."),url:"/blocks/loops/while",category:"loops",block:{message0:e.Util.lf("while %1"),appendField:e.Util.lf("{id:while}do")}},pxt_controls_for:{name:e.Util.lf("a loop that repeats the number of times you say"),tooltip:e.Util.lf("Have the variable '{0}' take on the values from 0 to the end number, counting by 1, and do the specified blocks."),url:"/blocks/loops/for",category:"loops",block:{message0:e.Util.lf("for %1 from 0 to %2"),variable:e.Util.lf("{id:var}index"),appendField:e.Util.lf("{id:for}do")}},controls_simple_for:{name:e.Util.lf("a loop that repeats the number of times you say"),tooltip:e.Util.lf("Have the variable '{0}' take on the values from 0 to the end number, counting by 1, and do the specified blocks."),url:"/blocks/loops/for",category:"loops",block:{message0:e.Util.lf("for %1 from 0 to %2"),variable:e.Util.lf("{id:var}index"),appendField:e.Util.lf("{id:for}do")}},pxt_controls_for_of:{name:e.Util.lf("a loop that repeats for each value in an array"),tooltip:e.Util.lf("Have the variable '{0}' take the value of each item in the array one by one, and do the specified blocks."),url:"/blocks/loops/for-of",category:"loops",block:{message0:e.Util.lf("for element %1 of %2"),variable:e.Util.lf("{id:var}value"),appendField:e.Util.lf("{id:for_of}do")}},controls_for_of:{name:e.Util.lf("a loop that repeats for each value in an array"),tooltip:e.Util.lf("Have the variable '{0}' take the value of each item in the array one by one, and do the specified blocks."),url:"/blocks/loops/for-of",category:"loops",block:{message0:e.Util.lf("for element %1 of %2"),variable:e.Util.lf("{id:var}value"),appendField:e.Util.lf("{id:for_of}do")}},math_op2:{name:e.Util.lf("minimum or maximum of 2 numbers"),tooltip:{min:e.Util.lf("smaller value of 2 numbers"),max:e.Util.lf("larger value of 2 numbers")},url:"/blocks/math",operators:{op:["min","max"]},category:"math"},math_op3:{name:e.Util.lf("absolute number"),tooltip:e.Util.lf("absolute value of a number"),url:"/reference/math",category:"math",block:{message0:e.Util.lf("absolute of %1")}},math_number:{name:e.Util.lf("{id:block}number"),url:"/blocks/math/random",category:"math",tooltip:e.appTarget&&e.appTarget.compile?e.Util.lf("a decimal number"):e.Util.lf("an integer number")},math_integer:{name:e.Util.lf("{id:block}number"),url:"/blocks/math/random",category:"math",tooltip:e.Util.lf("an integer number")},math_whole_number:{name:e.Util.lf("{id:block}number"),url:"/blocks/math/random",category:"math",tooltip:e.Util.lf("a whole number")},math_number_minmax:{name:e.Util.lf("{id:block}number"),url:"/blocks/math/random",category:"math"},math_arithmetic:{name:e.Util.lf("arithmetic operation"),url:"/blocks/math",tooltip:{ADD:e.Util.lf("Return the sum of the two numbers."),MINUS:e.Util.lf("Return the difference of the two numbers."),MULTIPLY:e.Util.lf("Return the product of the two numbers."),DIVIDE:e.Util.lf("Return the quotient of the two numbers."),POWER:e.Util.lf("Return the first number raised to the power of the second number.")},operators:{OP:["ADD","MINUS","MULTIPLY","DIVIDE","POWER"]},category:"math",block:{MATH_ADDITION_SYMBOL:e.Util.lf("{id:op}+"),MATH_SUBTRACTION_SYMBOL:e.Util.lf("{id:op}-"),MATH_MULTIPLICATION_SYMBOL:e.Util.lf("{id:op}×"),MATH_DIVISION_SYMBOL:e.Util.lf("{id:op}/"),MATH_POWER_SYMBOL:e.Util.lf("{id:op}**")}},math_modulo:{name:e.Util.lf("division remainder"),tooltip:e.Util.lf("Return the remainder from dividing the two numbers."),url:"/blocks/math",category:"math",block:{MATH_MODULO_TITLE:e.Util.lf("remainder of %1 / %2")}},math_js_op:{name:e.Util.lf("math function"),tooltip:{sqrt:e.Util.lf("Returns the square root of the argument"),sin:e.Util.lf("Returns the sine of the argument"),cos:e.Util.lf("Returns the cosine of the argument"),acos:e.Util.lf("Returns the arccosine of the argument"),asine:e.Util.lf("Returns the arcsine of the argument"),tan:e.Util.lf("Returns the tangent of the argument"),atan2:e.Util.lf("Returns the arctangent of the quotient of the two arguments"),idiv:e.Util.lf("Returns the integer portion of the division operation on the two arguments"),imul:e.Util.lf("Returns the integer portion of the multiplication operation on the two arguments")},url:"/blocks/math",operators:{OP:["sqrt","sin","cos","tan","atan2","idiv","imul"]},category:"math",block:{sqrt:e.Util.lf("{id:op}square root"),sin:e.Util.lf("{id:op}sin"),cos:e.Util.lf("{id:op}cos"),asin:e.Util.lf("{id:op}asin"),acos:e.Util.lf("{id:op}acos"),tan:e.Util.lf("{id:op}tan"),atan2:e.Util.lf("{id:op}atan2"),idiv:e.Util.lf("{id:op}integer /"),imul:e.Util.lf("{id:op}integer ×")}},math_js_round:{name:e.Util.lf("rounding functions"),tooltip:{round:e.Util.lf("Increases the argument to the next higher whole number if its fractional part is more than one half"),ceil:e.Util.lf("Increases the argument to the next higher whole number"),floor:e.Util.lf("Decreases the argument to the next lower whole number"),trunc:e.Util.lf("Removes the fractional part of the argument")},url:"/blocks/math",operators:{OP:["round","ceil","floor","trunc"]},category:"math",block:{round:e.Util.lf("{id:op}round"),ceil:e.Util.lf("{id:op}ceiling"),floor:e.Util.lf("{id:op}floor"),trunc:e.Util.lf("{id:op}truncate")}},variables_change:{name:e.Util.lf("update the value of a number variable"),tooltip:e.Util.lf("Changes the value of the variable by this amount"),url:"/blocks/variables/change",category:"variables",block:{message0:e.Util.lf("change %1 by %2")}},controls_repeat_ext:{name:e.Util.lf("a loop that repeats and increments an index"),tooltip:e.Util.lf("Do some statements several times."),url:"/blocks/loops/repeat",category:"loops",block:{CONTROLS_REPEAT_TITLE:e.Util.lf("repeat %1 times"),CONTROLS_REPEAT_INPUT_DO:e.Util.lf("{id:repeat}do")}},variables_get:{name:e.Util.lf("get the value of a variable"),tooltip:e.Util.lf("Returns the value of this variable."),url:"/blocks/variables",category:"variables",block:{VARIABLES_GET_CREATE_SET:e.Util.lf("Create 'set %1'")}},variables_get_reporter:{name:e.Util.lf("get the value of a variable"),tooltip:e.Util.lf("Returns the value of this variable."),url:"/blocks/variables",category:"variables",block:{VARIABLES_GET_CREATE_SET:e.Util.lf("Create 'set %1'")}},variables_set:{name:e.Util.lf("assign the value of a variable"),tooltip:e.Util.lf("Sets this variable to be equal to the input."),url:"/blocks/variables/assign",category:"variables",block:{VARIABLES_SET:e.Util.lf("set %1 to %2")}},controls_if:{name:e.Util.lf("a conditional statement"),tooltip:{CONTROLS_IF_TOOLTIP_1:e.Util.lf("If a value is true, then do some statements."),CONTROLS_IF_TOOLTIP_2:e.Util.lf("If a value is true, then do the first block of statements. Otherwise, do the second block of statements."),CONTROLS_IF_TOOLTIP_3:e.Util.lf("If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements."),CONTROLS_IF_TOOLTIP_4:e.Util.lf("If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements. If none of the values are true, do the last block of statements.")},tooltipSearch:"CONTROLS_IF_TOOLTIP_2",url:"/blocks/logic/if",category:"logic",block:{CONTROLS_IF_MSG_IF:e.Util.lf("{id:logic}if"),CONTROLS_IF_MSG_THEN:e.Util.lf("{id:logic}then"),CONTROLS_IF_MSG_ELSE:e.Util.lf("{id:logic}else"),CONTROLS_IF_MSG_ELSEIF:e.Util.lf("{id:logic}else if")}},lists_create_with:{name:e.Util.lf("create an array"),tooltip:e.Util.lf("Creates a new array."),url:"/reference/arrays/create",category:"arrays",blockTextSearch:"LISTS_CREATE_WITH_INPUT_WITH",block:{LISTS_CREATE_EMPTY_TITLE:e.Util.lf("empty array"),LISTS_CREATE_WITH_INPUT_WITH:e.Util.lf("array of"),LISTS_CREATE_WITH_CONTAINER_TITLE_ADD:e.Util.lf("array"),LISTS_CREATE_WITH_ITEM_TITLE:e.Util.lf("value")}},lists_length:{name:e.Util.lf("array length"),tooltip:e.Util.lf("Returns the number of items in an array."),url:"/reference/arrays/length",category:"arrays",block:{LISTS_LENGTH_TITLE:e.Util.lf("length of array %1")}},lists_index_get:{name:e.Util.lf("get a value in an array"),tooltip:e.Util.lf("Returns the value at the given index in an array."),url:"/reference/arrays/get",category:"arrays",block:{message0:e.Util.lf("%1 get value at %2")}},lists_index_set:{name:e.Util.lf("set a value in an array"),tooltip:e.Util.lf("Sets the value at the given index in an array"),url:"/reference/arrays/set",category:"arrays",block:{message0:e.Util.lf("%1 set value at %2 to %3")}},logic_compare:{name:e.Util.lf("comparing two numbers"),tooltip:{LOGIC_COMPARE_TOOLTIP_EQ:e.Util.lf("Return true if both inputs equal each other."),LOGIC_COMPARE_TOOLTIP_NEQ:e.Util.lf("Return true if both inputs are not equal to each other."),LOGIC_COMPARE_TOOLTIP_LT:e.Util.lf("Return true if the first input is smaller than the second input."),LOGIC_COMPARE_TOOLTIP_LTE:e.Util.lf("Return true if the first input is smaller than or equal to the second input."),LOGIC_COMPARE_TOOLTIP_GT:e.Util.lf("Return true if the first input is greater than the second input."),LOGIC_COMPARE_TOOLTIP_GTE:e.Util.lf("Return true if the first input is greater than or equal to the second input.")},url:"/blocks/logic/boolean",category:"logic",block:{search:"= ≠ < ≤ > ≥"}},logic_operation:{name:e.Util.lf("boolean operation"),tooltip:{LOGIC_OPERATION_TOOLTIP_AND:e.Util.lf("Return true if both inputs are true."),LOGIC_OPERATION_TOOLTIP_OR:e.Util.lf("Return true if at least one of the inputs is true.")},url:"/blocks/logic/boolean",category:"logic",block:{LOGIC_OPERATION_AND:e.Util.lf("{id:op}and"),LOGIC_OPERATION_OR:e.Util.lf("{id:op}or")}},logic_negate:{name:e.Util.lf("logical negation"),tooltip:e.Util.lf("Returns true if the input is false. Returns false if the input is true."),url:"/blocks/logic/boolean",category:"logic",block:{LOGIC_NEGATE_TITLE:e.Util.lf("not %1")}},logic_boolean:{name:e.Util.lf("a `true` or `false` value"),tooltip:e.Util.lf("Returns either true or false."),url:"/blocks/logic/boolean",category:"logic",block:{LOGIC_BOOLEAN_TRUE:e.Util.lf("{id:boolean}true"),LOGIC_BOOLEAN_FALSE:e.Util.lf("{id:boolean}false")}},text:{name:e.Util.lf("a piece of text"),tooltip:e.Util.lf("A letter, word, or line of text."),url:"/types/string",category:"text",block:{search:e.Util.lf("a piece of text")}},text_length:{name:e.Util.lf("number of characters in the string"),tooltip:e.Util.lf("Returns the number of letters (including spaces) in the provided text."),url:"/reference/text/length",category:"text",block:{TEXT_LENGTH_TITLE:e.Util.lf("length of %1")}},text_join:{name:e.Util.lf("join items to create text"),tooltip:e.Util.lf("Create a piece of text by joining together any number of items."),url:"/reference/text/join",category:"text",block:{TEXT_JOIN_TITLE_CREATEWITH:e.Util.lf("join")}},procedures_defnoreturn:{name:e.Util.lf("define the function"),tooltip:e.Util.lf("Create a function."),url:"/types/function/define",category:"functions",block:{PROCEDURES_DEFNORETURN_TITLE:e.Util.lf("function"),PROCEDURE_ALREADY_EXISTS:e.Util.lf("A function named '%1' already exists.")}},procedures_callnoreturn:{name:e.Util.lf("call the function"),tooltip:e.Util.lf("Call the user-defined function."),url:"/types/function/call",category:"functions",block:{PROCEDURES_CALLNORETURN_TITLE:e.Util.lf("call function")}},function_return:{name:e.Util.lf("return a value from within a function"),tooltip:e.Util.lf("Return a value from within a user-defined function."),url:"/types/function/return",category:"functions",block:{message_with_value:e.Util.lf("return %1"),message_no_value:e.Util.lf("return")}},function_definition:{name:e.Util.lf("define the function"),tooltip:e.Util.lf("Create a function."),url:"/types/function/define",category:"functions",block:{FUNCTIONS_EDIT_OPTION:e.Util.lf("Edit Function")}},function_call:{name:e.Util.lf("call the function"),tooltip:e.Util.lf("Call the user-defined function."),url:"/types/function/call",category:"functions",block:{FUNCTIONS_CALL_TITLE:e.Util.lf("call"),FUNCTIONS_GO_TO_DEFINITION_OPTION:e.Util.lf("Go to Definition")}},function_call_output:{name:e.Util.lf("call the function with a return value"),tooltip:e.Util.lf("Call the user-defined function with a return value."),url:"/types/function/call",category:"functions",block:{}}},r[pxtc.ON_START_TYPE]={name:e.Util.lf("on start event"),tooltip:e.Util.lf("Run code when the program starts"),url:"/blocks/on-start",category:"loops",block:{message0:e.Util.lf("on start %1 %2")}},r[pxtc.PAUSE_UNTIL_TYPE]={name:e.Util.lf("pause until"),tooltip:e.Util.lf("Pause execution of code until the given boolean expression is true"),url:"/blocks/pause-until",category:"loops",block:{message0:e.Util.lf("pause until %1")}},r[pxtc.TS_BREAK_TYPE]={name:e.Util.lf("break"),tooltip:e.Util.lf("Break out of the current loop or switch"),url:"/blocks/loops/break",category:"loops",block:{message0:e.Util.lf("break")}},r[pxtc.TS_CONTINUE_TYPE]={name:e.Util.lf("continue"),tooltip:e.Util.lf("Skip current iteration and continues with the next iteration in the loop"),url:"/blocks/loops/continue",category:"loops",block:{message0:e.Util.lf("continue")}},e.Util.isTranslationMode()){const t=Blockly.Msg;e.Util.values(r).filter((e=>e.block)).forEach((n=>{const r=Object.keys(n.block);n.translationIds=e.Util.values(n.block),r.forEach((r=>e.crowdin.inContextLoadAsync(n.block[r]).then((e=>{n.block[r]=e,/^[A-Z_]+$/.test(r)&&(t[r]=e)}))))}))}}t.MATH_FUNCTIONS={unary:["sqrt","sin","cos","tan","asin","acos"],binary:["atan2"],infix:["idiv","imul"]},t.ROUNDING_FUNCTIONS=["round","ceil","floor","trunc"],t.builtinFunctionInfo={"Math.abs":{blockId:"math_op3",params:["x"]},"Math.min":{blockId:"math_op2",params:["x","y"]},"Math.max":{blockId:"math_op2",params:["x","y"]}},t.normalizeBlock=function(t,n=e.log){if(!t)return t;let r=t.replace(/(?:^|[^\\])([%$])\s+/g,"$1");return r!=t&&(n(`block has extra spaces: ${t}`),t=r),r=(t=r).replace(/([%$]\w+)\s*=\s*(\w+)/,"$1=$2"),r!=t&&(n(`block has space between %name and = : ${t}`),t=r),r=r.replace(/\s*\|\s*/g,"|"),r},t.compileInfo=function(e){const r={parameters:[],actualNameToParam:{},definitionNameToParam:{},handlerArgs:[]},i=(1==e.kind||2==e.kind)&&!e.attributes.defaultInstance,a=!!e.attributes._def,o=a?e.attributes._def.parameters.slice(0):void 0,s=a?o.length:e.parameters?e.parameters.length:0,c=t.builtinFunctionInfo[e.qName];a&&e.attributes._expandedDef&&o.push(...e.attributes._expandedDef.parameters);const l={},u=o?o.filter((e=>!e.ref||(l[e.name]=e,!1))):[];if(i&&a&&o.length){const t=l.this||o[0],i=t.name;let a;(!t.shadowBlockId||"variables_get"===t.shadowBlockId)&&(a=t.varName||e.attributes.paramDefl[i]||e.attributes.paramDefl.this),r.thisParameter={actualName:n,definitionName:i,shadowBlockId:t.shadowBlockId,type:e.namespace,defaultValue:a,definitionIndex:o.indexOf(t),fieldEditor:d(i,n),fieldOptions:p(i,n),shadowOptions:f(i,n)}}if(e.parameters){let t=i&&!l.this?1:0;e.parameters.forEach(((e,n)=>{let i;if(l[e.name]?i=l[e.name]:t<u.length&&(i=u[t],++t),i||!a){let a;e.options&&e.options.min&&e.options.max&&(a={min:e.options.min.value,max:e.options.max.value});const l=i?i.name:c?c.params[t++]:e.name,u=i&&("variables_get"===i.shadowBlockId||"lists_create_with"==i.shadowBlockId);r.parameters.push({actualName:e.name,type:e.type,defaultValue:u&&i.varName||e.default,definitionName:l,definitionIndex:i?o.indexOf(i):n,shadowBlockId:i&&i.shadowBlockId,isOptional:!!o&&o.indexOf(i)>=s,fieldEditor:d(l,e.name),fieldOptions:p(l,e.name),shadowOptions:f(l,e.name),range:a})}e.handlerParameters&&e.handlerParameters.forEach((e=>{r.handlerArgs.push({name:e.name,type:e.type,inBlockDef:!!o&&o.some((t=>t.ref&&t.name===e.name))})}))}))}return r.parameters.forEach((e=>{r.actualNameToParam[e.actualName]=e,r.definitionNameToParam[e.definitionName]=e})),r;function d(t,n){return e.attributes.paramFieldEditor&&(e.attributes.paramFieldEditor[t]||e.attributes.paramFieldEditor[n])}function p(t,n){return e.attributes.paramFieldEditorOptions&&(e.attributes.paramFieldEditorOptions[t]||e.attributes.paramFieldEditorOptions[n])}function f(t,n){return e.attributes.paramShadowOptions&&(e.attributes.paramShadowOptions[t]||e.attributes.paramShadowOptions[n])}},t.hasHandler=function(e){return e.parameters&&e.parameters.some((e=>{var t,n;return"() => void"==e.type||"Action"==e.type||!!(null===(t=e.properties)||void 0===t?void 0:t.length)||!!(null===(n=e.handlerParameters)||void 0===n?void 0:n.length)}))},t.getHelpUrl=function(t){if(t.attributes.help){const e=t.attributes.help.replace(/^\//,"");if(/^github:/.test(e))return e;if("none"!==e)return"/reference/"+e}else if(t.pkg&&!e.appTarget.bundledpkgs[t.pkg]){let e=t.qName.toLowerCase().split(".");return e[0]==t.pkg&&e.shift(),`/pkg/${t.pkg}#${encodeURIComponent(e.join("-"))}`}},t.reporterTypeForArgType=function(e){let t="argument_reporter_custom";return"boolean"!==e&&"number"!==e&&"string"!==e||(t=`argument_reporter_${e}`),/^(?:Array<(?:.+)>)|(?:(?:.+)\[\])$/.test(e)&&(t="argument_reporter_array"),t},t.defaultIconForArgType=function(e=""){switch(e){case"number":return"calculator";case"string":return"text width";case"boolean":return"random";case"Array":return"list";default:return"align justify"}},t.parseFields=function(e){return e.split("|").map(((e,t)=>{let n=/([^%]*)\s*%([a-zA-Z0-9_]+)/.exec(e);if(!n)return{n:e,ni:t};let r=n[1];return r&&(r=r.trim()),{n:e,ni:t,pre:r,p:n[2]}}))},t.blockDefinitions=function(){return r||i(),r},t.getBlockDefinition=function(e){return r||i(),r[e]}}(e.blocks||(e.blocks={}))}(pxt||(pxt={})),function(e){!function(t){function n(){return"undefined"!=typeof navigator}function r(){return n()&&/(Win32|Win64|WOW64)/i.test(navigator.platform)}function i(){return n()&&/mobi/i.test(navigator.userAgent)}function a(){return n()&&/Mac/i.test(navigator.platform)}function o(){return!!navigator&&/Linux/i.test(navigator.platform)}function s(){return n()&&/arm/i.test(navigator.platform)}function c(){return n()&&/Edge/i.test(navigator.userAgent)}function l(){return n()&&/Trident/i.test(navigator.userAgent)}function u(){return!c()&&!l()&&!!navigator&&(/Chrome/i.test(navigator.userAgent)||/Chromium/i.test(navigator.userAgent))}function d(){return!u()&&!c()&&!!navigator&&/(Macintosh|Safari|iPod|iPhone|iPad)/i.test(navigator.userAgent)}function p(){return!d()&&!!navigator&&(/Firefox/i.test(navigator.userAgent)||/Seamonkey/i.test(navigator.userAgent))}function f(){return n()&&/Opera|OPR/i.test(navigator.userAgent)}function _(){return n()&&/Midori/i.test(navigator.userAgent)}function m(){return n()&&/Epiphany/i.test(navigator.userAgent)}function g(){return"undefined"!=typeof window&&("ontouchstart"in window||navigator&&navigator.maxTouchPoints>0)}function h(){return"undefined"!=typeof window&&!!window.pxtElectron}function y(){return"undefined"!=typeof window&&!!window.ipcRenderer}function v(){return h()||y()}function b(t){var n;try{return"undefined"!=typeof window&&/^http:\/\/(localhost|127\.0\.0\.1|192\.168\.\d+\.\d+):\d+\//.test(window.location.href)&&(t||!/nolocalhost=1/.test(window.location.href))&&!(null===(n=null==e?void 0:e.webConfig)||void 0===n?void 0:n.isStatic)}catch(e){return!1}}function x(){return"undefined"!=typeof window&&!!window.PointerEvent}function k(){return r()?"windows":a()?"mac":o()&&s()?"rpi":o()?"linux":"unknown"}function S(){return c()?"edge":m()?"epiphany":_()?"midori":f()?"opera":l()?"ie":u()?"chrome":d()?"safari":p()?"firefox":"unknown"}function T(){if(!n())return null;let e=[];return f()&&(e=/(Opera|OPR)\/([0-9\.]+)/i.exec(navigator.userAgent)),m()?e=/Epiphany\/([0-9\.]+)/i.exec(navigator.userAgent):_()?e=/Midori\/([0-9\.]+)/i.exec(navigator.userAgent):d()?(e=/Version\/([0-9\.]+)/i.exec(navigator.userAgent),e||(e=/(Macintosh|iPod( touch)?|iPhone|iPad); (CPU|Intel).*?OS (X )?(\d+)/i.exec(navigator.userAgent))):e=u()?/(Chrome|Chromium)\/([0-9\.]+)/i.exec(navigator.userAgent):c()?/Edge\/([0-9\.]+)/i.exec(navigator.userAgent):l()?/(MSIE |rv:)([0-9\.]+)/i.exec(navigator.userAgent):/(Firefox|Seamonkey)\/([0-9\.]+)/i.exec(navigator.userAgent),e&&0!=e.length?e[e.length-1]:null}t.isDocumentVisible=function(){return"undefined"!=typeof window&&"visible"===document.visibilityState},t.isIFrame=function(){try{return window&&window.self!==window.top}catch(e){return!0}},t.hasNavigator=n,t.hasWindow=function(){return"undefined"!=typeof window},t.isWindows=r,t.isWindows10=function(){return n()&&/(Win32|Win64|WOW64)/i.test(navigator.platform)&&/Windows NT 10/i.test(navigator.userAgent)},t.isMobile=i,t.isIOS=function(){return n()&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1)},t.isAndroid=function(){return n()&&/android/i.test(navigator.userAgent)},t.isMac=a,t.isLinux=o,t.isARM=s,t.isEdge=c,t.isChromiumEdge=function(){return n()&&/Edg\//i.test(navigator.userAgent)},t.isIE=l,t.isChrome=u,t.isSafari=d,t.isFirefox=p,t.isOpera=f,t.isMidori=_,t.isEpiphany=m,t.isTouchEnabled=g,t.isPxtElectron=h,t.isIpcRenderer=y,t.isElectron=v,t.isWinRT=()=>"undefined"!=typeof Windows,t.isLocalHost=b,t.isLocalHostDev=function(){return b()&&!v()},t.isSkillmapEditor=function(){try{return/skill(?:s?)Map=1/.test(window.location.href)}catch(e){return!1}},t.isTabletSize=function(){return(null===window||void 0===window?void 0:window.innerWidth)<=e.BREAKPOINT_TABLET},t.isComputerSize=function(){return(null===window||void 0===window?void 0:window.innerWidth)>e.BREAKPOINT_TABLET},t.noSharedLocalStorage=function(){try{return/nosharedlocalstorage/i.test(window.location.href)}catch(e){return!1}},t.useOldTutorialLayout=function(){var t,n;if(null===(n=null===(t=e.appTarget)||void 0===t?void 0:t.appTheme)||void 0===n?void 0:n.legacyTutorial)return!0;try{return/tutorialview=old/.test(window.location.href)}catch(e){return!1}},t.hasPointerEvents=x,t.os=k,t.browser=S,t.browserVersion=T;let C=!1;function E(){return i()&&d()&&!/downloadWindowOpen=0/i.test(window.location.href)}function D(t,n,r){const a=E(),o=T(),s=parseInt(o||"0");if(a)r?r.location.href=t:window.open(t,"_self");else if(e.BrowserUtils.isSafari()&&(s<10||0==o.indexOf("10.0")||i())){let n=document.getElementById("downloader");n||(e.debug("injecting downloader iframe"),n=document.createElement("iframe"),n.id="downloader",n.style.position="absolute",n.style.right="0",n.style.bottom="0",n.style.zIndex="-1",n.style.width="1px",n.style.height="1px",document.body.appendChild(n)),n.src=t}else if(/^data:/i.test(t)&&(e.BrowserUtils.isEdge()||e.BrowserUtils.isIE())){let r=atob(t.split(",")[1]),i=e.Util.stringToUint8Array(r),a=new Blob([i],{type:"img/png"});window.navigator.msSaveOrOpenBlob(a,n)}else{let e=window.document.createElement("a");"string"==typeof e.download?(e.href=t,e.download=n,document.body.appendChild(e),e.click(),document.body.removeChild(e)):document.location.href=t}}function A(t,n){let r="data";i()&&d()&&e.appTarget.appTheme.mobileSafariDownloadProtocol&&(r=e.appTarget.appTheme.mobileSafariDownloadProtocol);const a=/downloadProtocol=([a-z0-9:/?]+)/i.exec(window.location.href);a&&(r=a[1]);return r+":"+n+";base64,"+t}function w(t,n,r={}){var i;e.debug("trigger download");const{contentType:a="application/octet-stream",userContextWindow:o,onError:s,maintainObjectURL:c}=r,l=null===(i=window.URL)||void 0===i?void 0:i.createObjectURL,u=e.appTarget.appTheme.disableBlobObjectDownload;let d;try{if(l&&!u){const r=l(new Blob([e.Util.stringToUint8Array(atob(t))],{type:a}));D(r,n,o),c?d=r:window.setTimeout((()=>window.URL.revokeObjectURL(d)),0)}else d=A(t,n),D(d,n,o)}catch(t){s&&s(t),e.debug("saving failed")}return d}function N(e){const t=document.createElement("img");return new Promise(((n,r)=>{t.onload=()=>n(t),t.onerror=()=>n(void 0),t.crossOrigin="anonymous",t.src=e}))}t.isBrowserSupported=function(){var t,n;if(!navigator)return!0;if(/bot|crawler|spider|crawling/i.test(navigator.userAgent))return!0;const r=(null===(t=e.appTarget)||void 0===t?void 0:t.unsupportedBrowsers)||(null===(n=window.pxtTargetBundle)||void 0===n?void 0:n.unsupportedBrowsers);if(null==r?void 0:r.some((e=>e.id==S())))return!1;const i=T(),a=parseInt(i||"0"),l=u()&&a>=38,g=p()&&a>=31,h=c(),y=d()&&a>=9,v=f()&&u()&&a>=21;let b=l||g||h||y||v;const x=_()||o()&&s()&&m();return b=b&&!x,b=b||/anybrowser=(true|1)/.test(window.location.href),C||(e.log(`Browser: ${S()} ${i} on ${k()}`),b||e.tickEvent("browser.unsupported",{useragent:navigator.userAgent}),C=!0),b},t.devicePixelRatio=function(){if("undefined"==typeof window||!window.screen)return 1;const e=window.screen.systemXDPI,t=window.screen.logicalXDPI;return void 0!==e&&void 0!==t&&e>t?e/t:window&&void 0!==window.devicePixelRatio?window.devicePixelRatio:1},t.browserDownloadBinText=function(e,t,n){return w(ts.pxtc.encodeBase64(e),t,n)},t.browserDownloadText=function(t,n,r){return w(ts.pxtc.encodeBase64(e.Util.toUTF8(t)),n,r)},t.isBrowserDownloadInSameWindow=E,t.isBrowserDownloadWithinUserContext=function(){const e=T(),t=parseInt(e||"0");return i()&&d()&&t>=11||/downloadUserContext=1/i.test(window.location.href)},t.browserDownloadDataUri=D,t.browserDownloadUInt8Array=function(t,n,r){return w(ts.pxtc.encodeBase64(e.Util.uint8ArrayToString(t)),n,r)},t.toDownloadDataUri=A,t.browserDownloadBase64=w,t.loadImageAsync=N,t.loadCanvasAsync=function(e){return N(e).then((e=>{const t=document.createElement("canvas");t.width=e.width,t.height=e.height;return t.getContext("2d").drawImage(e,0,0),t}))},t.scaleImageData=function(e,t){const n=document.createElement("canvas"),r=document.createElement("canvas");n.width=e.width,n.height=e.height,r.width=e.width*t,r.height=e.height*t;const i=n.getContext("2d"),a=r.getContext("2d");return i.putImageData(e,0,0),a.imageSmoothingEnabled=!1,a.scale(t,t),a.drawImage(n,0,0),a.getImageData(0,0,e.width*t,e.height*t)},t.imageDataToPNG=function(e,t=1){if(!e)return;const n=document.createElement("canvas"),r=document.createElement("canvas");n.width=e.width,n.height=e.height,r.width=e.width*t,r.height=e.height*t;const i=n.getContext("2d"),a=r.getContext("2d");return i.putImageData(e,0,0),a.imageSmoothingEnabled=!1,a.scale(t,t),a.drawImage(n,0,0),r.toDataURL("image/png")};const I=1e6;function P(t){if(/^https?:\/\//i.test(t))return t;const n=(window.MonacoPaths||{})[t];return n||(e.U.startsWith(t,e.webConfig.commitCdnUrl)?t:e.webConfig.commitCdnUrl+t)}t.encodeToPngAsync=function(t,n){const{width:r,height:i,pixelDensity:a=4,maxSize:o=I,text:s}=n||{};return new Promise(((n,c)=>{const l=new Image;l.onload=function(){const t=document.createElement("canvas"),c=t.getContext("2d");t.width=(r||l.width)*a,t.height=(i||l.height)*a,s&&(c.fillStyle="#fff",c.fillRect(0,0,t.width,t.height)),c.drawImage(l,0,0,r,i,0,0,t.width,t.height);let u=t.toDataURL("image/png");for(;u.length>o;)t.width=t.width/2>>0,t.height=t.height/2>>0,e.debug(`screenshot size ${u.length}b, shrinking to ${t.width}x${t.height}`),c.drawImage(l,0,0,r,i,0,0,t.width,t.height),u=t.toDataURL("image/png");if(s){e.lzmaCompressAsync(s).then((r=>{const i=e.Util.encodeBlobAsync(t,r);n(i.toDataURL("image/png"))}))}else n(u)},l.onerror=t=>{e.reportError("png","png rendering failed"),n(void 0)},l.src=t}))},t.resolveCdnUrl=P,t.loadStyleAsync=function(t,n){n&&(t="rtl"+t);const r="style-"+t;if(document.getElementById(r))return Promise.resolve();const i=P(t),a=e.Util.toArray(document.head.getElementsByTagName("link")).filter((e=>e.getAttribute("href")==i))[0];return a?(a.id||(a.id=r),Promise.resolve()):new Promise(((e,t)=>{const n=document.createElement("link");n.href=i,n.rel="stylesheet",n.type="text/css",n.id=r,n.addEventListener("load",(()=>e())),n.addEventListener("error",(e=>t(e))),document.head.appendChild(n)}))};let O,F,L,R={};function M(e,t){if(!e)return t;if(!t)return e;return(e.indexOf("/")==e.length-1?e.substring(0,e.length-1):e)+"/"+(0==t.indexOf("/")?t.substring(1):t)}function U(){const e=n()&&window.navigator;return e&&e.storage&&e.storage.estimate?e.storage.estimate():Promise.resolve({})}t.loadScriptAsync=function(t){const n=P(t);let r=R[n];return r||(r=R[n]=new Promise(((t,r)=>{e.debug(`script: loading ${n}`);const i=document.createElement("script");i.type="text/javascript",i.addEventListener("load",(()=>t())),i.addEventListener("error",(e=>{delete R[n],r(e)})),i.src=n,i.async=!0,document.body.appendChild(i)}))),r},t.loadAjaxAsync=function(e){return new Promise(((t,n)=>{let r=new XMLHttpRequest;r.onreadystatechange=function(){r.readyState==XMLHttpRequest.DONE&&(200==r.status?t(r.responseText):n(r.status))},r.open("GET",e,!0),r.send()}))},t.loadBlocklyAsync=function(){if(!O){e.debug("blockly: delay load");let t=e.BrowserUtils.loadStyleAsync("blockly.css",ts.pxtc.Util.isUserLanguageRtl());"undefined"==typeof Blockly&&(t=t.then((()=>e.BrowserUtils.loadScriptAsync("pxtblockly.js")))),t=t.then((()=>{e.debug("blockly: loaded")})),O=t}return O},t.patchCdn=function(t){if(!t)return t;const n=e.getOnlineCdnUrl();return n?t.replace("@cdnUrl@",n):t.replace(/@cdnUrl@\/(blob|commit)\/[a-f0-9]{40}\//,"./")},t.initTheme=function(){const t=e.appTarget.appTheme;if(t&&t.accentColor){let e=document.createElement("style");e.type="text/css",e.appendChild(document.createTextNode(`.ui.accent { color: ${t.accentColor}; }\n                .ui.inverted.menu .accent.active.item, .ui.inverted.accent.menu  { background-color: ${t.accentColor}; }`)),document.getElementsByTagName("head")[0].appendChild(e)}if(e.Util.isUserLanguageRtl()){e.debug("rtl layout"),e.BrowserUtils.addClass(document.body,"rtl"),document.body.style.direction="rtl";const t=e.Util.toArray(document.head.getElementsByTagName("link")),n=t.filter((t=>e.Util.endsWith(t.getAttribute("href"),"semantic.css")))[0];if(n){const t=n.getAttribute("data-rtl");t&&(e.debug(`swapping to ${t}`),n.setAttribute("href",t))}const r=t.filter((t=>e.Util.endsWith(t.getAttribute("href"),"blockly.css")))[0];if(r){const t=r.getAttribute("data-rtl");t&&(e.debug(`swapping to ${t}`),r.setAttribute("href",t),r.removeAttribute("data-rtl"))}}},t.changeHash=function(e,t){"#"!=e.charAt(0)&&(e="#"+e),t?window.location.hash=e:window.history.replaceState("","",e)},t.urlJoin=M,t.joinURLs=function(...e){let t;if(e)for(let n=0;n<e.length;n++)t=M(t,e[n]);return t},t.storageEstimateAsync=U,t.scheduleStorageCleanup=n()&&navigator.storage&&navigator.storage.estimate?ts.pxtc.Util.throttle((function(){U().then((t=>(e.debug(`storage estimate: ${t.usage/t.quota*100>>0}%, ${t.usage/1e6>>0}/${t.quota/1e6>>0}Mb`),t.quota&&t.usage&&t.quota>1e6&&t.usage/t.quota>.9?(e.log("quota usage exceeded, clearing translations"),e.tickEvent("storage.cleanup"),z()):Promise.resolve()))).catch((t=>{e.reportException(t)}))}),1e4,!1):()=>{},t.stressTranslationsAsync=function t(){let n="...";for(let e=0;e<16;++e)n+=n+Math.random();return console.log(`adding entry ${2*n.length} bytes`),e.U.delay(1).then((()=>K())).then((e=>e.setAsync("foobar",Math.random().toString(),"",null,void 0,n))).then((()=>e.BrowserUtils.storageEstimateAsync())).then((e=>!e.quota||e.usage/e.quota<.8?t():Promise.resolve()))};class B{constructor(){this.translations={}}key(e,t,n){return`${e}|${t}|${n||"master"}`}get(e,t,n){return this.translations[this.key(e,t,n)]}getAsync(e,t,n){return Promise.resolve(this.get(e,t,n))}set(e,t,n,r,i,a,o){this.translations[this.key(e,t,n)]={etag:r,time:i,strings:a,md:o}}setAsync(t,n,r,i,a,o){return this.set(t,n,r,i,e.Util.now(),a),Promise.resolve()}clearAsync(){return this.translations={},Promise.resolve()}}class j{constructor(e,t,n,r){this.name=e,this.version=t,this.upgradeHandler=n,this.quotaExceededHandler=r}throwIfNotOpened(){if(!this._db)throw new Error("Database not opened; call IDBWrapper.openAsync() first")}errorHandler(t,n,r){console.error(new Error(`${this.name} IDBWrapper error for ${n}: ${t.message}`)),r(t),"QuotaExceededError"==t.name&&(e.log("storage quota exceeded..."),e.tickEvent("storage.quotaexceedederror"),this.quotaExceededHandler&&this.quotaExceededHandler())}getObjectStore(e,t="readonly"){this.throwIfNotOpened();return this._db.transaction([e],t).objectStore(e)}static deleteDatabaseAsync(e){return new Promise(((t,n)=>{const r=(window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB).deleteDatabase(e);r.onsuccess=()=>t(),r.onerror=()=>n(r.error)}))}openAsync(){return new Promise(((e,t)=>{const n=(window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB).open(this.name,this.version);n.onsuccess=()=>{this._db=n.result,e()},n.onerror=()=>this.errorHandler(n.error,"open",t),n.onupgradeneeded=e=>this.upgradeHandler(e,n)}))}getAsync(e,t){return new Promise(((n,r)=>{const i=this.getObjectStore(e).get(t);i.onsuccess=()=>n(i.result),i.onerror=()=>this.errorHandler(i.error,"get",r)}))}getAllAsync(e){return new Promise(((t,n)=>{const r=this.getObjectStore(e).openCursor(),i=[];r.onsuccess=()=>{r.result?(i.push(r.result.value),r.result.continue()):t(i)},r.onerror=()=>this.errorHandler(r.error,"getAll",n)}))}setAsync(e,t){return new Promise(((n,r)=>{const i=this.getObjectStore(e,"readwrite");let a;a=void 0!==t.id&&null!==t.id?i.put(t):i.add(t),a.onsuccess=()=>n(),a.onerror=()=>this.errorHandler(a.error,"set",r)}))}deleteAsync(e,t){return new Promise(((n,r)=>{const i=this.getObjectStore(e,"readwrite").delete(t);i.onsuccess=()=>n(),i.onerror=()=>this.errorHandler(i.error,"delete",r)}))}deleteAllAsync(e){return new Promise(((t,n)=>{const r=this.getObjectStore(e,"readwrite").clear();r.onsuccess=()=>t(),r.onerror=()=>this.errorHandler(r.error,"deleteAll",n)}))}}t.IDBWrapper=j;class ${constructor(e){this.db=e,this.mem=new B}static dbName(){return`__pxt_translations_${e.appTarget.id||""}`}static createAsync(){function e(){const e=new j($.dbName(),2,((e,t)=>{t.result.createObjectStore($.TABLE,{keyPath:$.KEYPATH})}),(()=>{z().catch((e=>{}))}));return e.openAsync().then((()=>new $(e)))}return e().catch((t=>(console.log("db: failed to open database, try delete entire store..."),j.deleteDatabaseAsync($.dbName()).then((()=>e())))))}getAsync(e,t,n){e=(e||"en-US").toLowerCase();const r=this.mem.key(e,t,n),i=this.mem.get(e,t,n);return i?Promise.resolve(i):this.db.getAsync($.TABLE,r).then((r=>r?(this.mem.set(e,t,n,r.etag,r.time,r.strings),Promise.resolve(r)):Promise.resolve(void 0))).catch((e=>Promise.resolve(void 0)))}setAsync(n,r,i,a,o,s){n=(n||"en-US").toLowerCase();const c=this.mem.key(n,r,i);let l=e.Util.now();this.mem.set(n,r,i,a,l,o,s),o&&Object.keys(o).filter((e=>!o[e])).forEach((e=>delete o[e]));const u={id:c,etag:a,time:l,strings:o,md:s};return this.db.setAsync($.TABLE,u).finally((()=>t.scheduleStorageCleanup())).catch((e=>(console.log(`db: set failed (${e.message}), recycling...`),this.clearAsync())))}clearAsync(){return this.db.deleteAllAsync($.TABLE).then((()=>console.debug("db: all clean"))).catch((e=>{console.error("db: failed to delete all")}))}}function K(){return e.Util.isNodeJS?Promise.resolve(new B):(F||(F=$.createAsync().catch((()=>new B))),F)}function z(){function t(){const t=$.dbName();return j.deleteDatabaseAsync(t).then((()=>{F=void 0})).catch((n=>{e.log(`db: failed to delete ${t}`),F=void 0}))}return F?F.then((e=>e.clearAsync())).catch((e=>t().then())):t()}function J(t){const n=JSON.stringify(t)+e.appTarget.versions.pxt+"_"+e.appTarget.versions.target;return pxtc.U.sha256(n)}function q(e,t){return`${e}|${t||"master"}`}$.TABLE="files",$.KEYPATH="id",t.translationDbAsync=K,t.clearTranslationDbAsync=z,t.getTutorialCodeHash=J;class V{constructor(e){this.db=e}static dbName(){return`__pxt_tutorialinfo_${e.appTarget.id||""}`}static createAsync(){function t(){const t=new e.BrowserUtils.IDBWrapper(V.dbName(),2,((e,t)=>{t.result.createObjectStore(V.TABLE,{keyPath:V.KEYPATH})}),(()=>{e.BrowserUtils.IDBWrapper.deleteDatabaseAsync(V.dbName())}));return t.openAsync().then((()=>new V(t)))}return t().catch((n=>(console.log("db: failed to open tutorial info database, try delete entire store..."),e.BrowserUtils.IDBWrapper.deleteDatabaseAsync(V.dbName()).then((()=>t())))))}getAsync(t,n,r){const i=q(t,r),a=J(n);return this.db.getAsync(V.TABLE,i).then((t=>{if(t&&t.hash==a&&e.Util.now()-(t.time||0)<864e5)return t;this.db.deleteAsync(V.TABLE,i)}))}setAsync(t,n,r,i,a,o){e.perf.measureStart("tutorial info db setAsync");q(t,o);const s=J(r);return this.setWithHashAsync(t,n,s,i,a)}setWithHashAsync(t,n,r,i,a,o){e.perf.measureStart("tutorial info db setAsync");const s=q(t,o),c={};Object.keys(n).forEach((e=>{Object.keys(n[e]).forEach((t=>{c[t]=n[e][t]}))}));const l={id:s,time:e.Util.now(),hash:r,snippets:n,blocks:c,highlightBlocks:i,validateBlocks:a};return this.db.setAsync(V.TABLE,l).then((()=>{e.perf.measureEnd("tutorial info db setAsync")}))}clearAsync(){return this.db.deleteAllAsync(V.TABLE).then((()=>console.debug("db: all clean"))).catch((e=>{console.error("db: failed to delete all")}))}}function H(e){return e.split(/\s+/).filter((e=>!!e))}function G(){const t=new RegExp(`${e.Util.escapeForRegex(e.Util.pxtLangCookieId)}=(.*?)(?:;|$)`).exec(document.cookie);return t&&t[1]||null}V.TABLE="info",V.KEYPATH="id",t.tutorialInfoDbAsync=function(){return L||(L=V.createAsync()),L},t.clearTutorialInfoDbAsync=function(){function t(){const t=V.dbName();return j.deleteDatabaseAsync(t).then((()=>{L=void 0})).catch((n=>{e.log(`db: failed to delete ${t}`),L=void 0}))}return L?L.then((e=>e.clearAsync())).catch((e=>t().then())):t()},t.pointerEvents=x()?{up:"pointerup",down:["pointerdown"],move:"pointermove",enter:"pointerenter",leave:"pointerleave"}:g()?{up:"mouseup",down:["mousedown","touchstart"],move:"touchmove",enter:"touchenter",leave:"touchend"}:{up:"mouseup",down:["mousedown"],move:"mousemove",enter:"mouseenter",leave:"mouseleave"},t.getPageX=function(e){return"pageX"in e?e.pageX:e.changedTouches[0].pageX},t.getPageY=function(e){return"pageY"in e?e.pageY:e.changedTouches[0].pageY},t.getClientX=function(e){return"clientX"in e?e.clientX:e.changedTouches[0].clientX},t.getClientY=function(e){return"clientY"in e?e.clientY:e.changedTouches[0].clientY},t.popupWindow=function(t,n,r,i){try{const a=window.screenLeft?window.screenLeft:window.screenX,o=window.screenTop?window.screenTop:window.screenY,s=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,c=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,l="width="+r+", height="+i+", top="+(c/2-i/2+o)+", left="+(s/2-r/2+a),u=window.open(t,n,e.BrowserUtils.isIpcRenderer()?void 0:l);return u.focus&&u.focus(),u}catch(t){return e.tickEvent("pxt.popupError",{msg:t.message}),null}},t.containsClass=function(e,t){return H(t).every((t=>function(e,t){if(e.classList)return e.classList.contains(t);return!((e.className+"").split(/\s+/).indexOf(t)<0)}(e,t)))},t.addClass=function(e,t){H(t).forEach((t=>function(e,t){if(e.classList)e.classList.add(t);else{(e.className+"").split(/\s+/).indexOf(t)<0&&(e.className.baseVal+=" "+t)}}(e,t)))},t.removeClass=function(e,t){H(t).forEach((t=>function(e,t){e.classList?e.classList.remove(t):e.className.baseVal=(e.className+"").split(/\s+/).filter((e=>e!=t)).join(" ")}(e,t)))},t.getCookieLang=G,t.setCookieLang=function(t,n=!1){if(e.Util.allLanguages[t]&&t!==G()){e.tickEvent("menu.lang.setcookielang",{lang:t,docs:`${n}`});const r=new Date;r.setTime(r.getTime()+24*e.Util.langCookieExpirationDays*60*60*1e3),document.cookie=`${e.Util.pxtLangCookieId}=${t}; expires=${r.toUTCString()}; path=/`}},t.cacheBustingUrl=function(e){return e?/[?&]rnd=/.test(e)?e:`${e}${e.indexOf("?")>0?"&":"?"}rnd=${Math.random()}`:e},t.legacyCopyText=function(t){t.focus(),t.setSelectionRange(0,9999);try{const t=document.execCommand("copy");return e.debug("copy: "+t),!!t}catch(e){return!1}}}(e.BrowserUtils||(e.BrowserUtils={}))}(pxt||(pxt={})),function(e){!function(e){const t="https://staging.pxt.io";e.DEV_BACKEND=t,e.devBackendType=function(){return"https://makecode.com"===e.DEV_BACKEND?"prod":e.DEV_BACKEND===t?"staging":"http://localhost:8080"===e.DEV_BACKEND?"localhost":"prod"},e.cloudStatus={none:{value:"none"},synced:{value:"synced",icon:"cloud-saved-b",tooltip:lf("Project saved to cloud"),shortStatus:lf("saved"),longStatus:lf("Saved to cloud"),indicator:""},justSynced:{value:"justSynced",icon:"cloud-saved-b",tooltip:lf("Project saved to cloud"),shortStatus:lf("saved!"),longStatus:lf("Saved to cloud!"),indicator:""},offline:{value:"offline",icon:"cloud-error-b",tooltip:lf("Unable to connect to cloud"),shortStatus:lf("offline"),longStatus:lf("Offline"),indicator:lf("offline")},syncing:{value:"syncing",icon:"cloud-saving-b",tooltip:lf("Saving project to cloud..."),shortStatus:lf("saving..."),longStatus:lf("Saving to cloud..."),indicator:lf("syncing...")},conflict:{value:"conflict",icon:"cloud-error-b",tooltip:lf("Project was edited in two places and the changes conflict"),shortStatus:lf("conflict!"),longStatus:lf("Project has a conflict!"),indicator:"!"},localEdits:{value:"localEdits",icon:"cloud-saving-b",tooltip:lf("Project has local changes and will save to cloud soon."),shortStatus:"",longStatus:"",indicator:"*"}}}(e.cloud||(e.cloud={}))}(pxt||(pxt={})),function(e){!function(e){let t;!function(e){e[e.Failed=0]="Failed",e[e.Success=1]="Success",e[e.UserRejected=2]="UserRejected"}(t=e.WebUSBPairResult||(e.WebUSBPairResult={})),e.deployCoreAsync=void 0,e.deployFallbackAsync=void 0,e.hasDeployFn=()=>e.deployCoreAsync||e.deployFallbackAsync,e.deployAsync=(t,n)=>(e.deployCoreAsync||e.deployFallbackAsync)(t,n),e.patchCompileResultAsync=void 0,e.browserDownloadAsync=void 0,e.saveOnlyAsync=void 0,e.renderBrowserDownloadInstructions=void 0,e.renderUsbPairDialog=void 0,e.renderIncompatibleHardwareDialog=void 0,e.showUploadInstructionsAsync=void 0,e.saveProjectAsync=void 0,e.electronDeployAsync=void 0,e.webUsbPairDialogAsync=void 0,e.onTutorialCompleted=void 0,e.workspaceLoadedAsync=void 0}(e.commands||(e.commands={}))}(pxt||(pxt={})),function(e){function t(){let t;return t||(t=e.U.isNodeJS?Promise.resolve(require("lzma")):Promise.resolve(window.LZMA),t.then((t=>(t||e.reportError("lzma","failed to load"),t)))),t}e.lzmaDecompressAsync=function(n){return t().then((t=>new Promise(((r,i)=>{try{t.decompress(n,((t,n)=>{n&&e.debug("lzma decompression failed"),r(n?void 0:t)}))}catch(t){t&&e.debug("lzma decompression failed"),r(void 0)}}))))},e.lzmaCompressAsync=function(n){return t().then((t=>new Promise(((r,i)=>{try{t.compress(n,7,((t,n)=>{n&&e.reportException(n),r(n?void 0:new Uint8Array(t))}))}catch(t){e.reportException(t),r(void 0)}}))))}}(pxt||(pxt={})),function(e){!function(t){var n=pxtc.Util;let r=n.lf;const i={"pxt::mkAction":1,"pxt::dumpPerfCounters":1,"pxt::deepSleep":1,"pxt::getConfig":1,"pxtrt::mkMap":1,"pxtrt::mapSet":1,"pxtrt::stclo":1,"pxtrt::mklocRef":1,"pxtrt::stlocRef":1,"pxtrt::ldlocRef":1,"pxtrt::panic":1};function a(e="namespace"){let t="",n="",r=(r,i="")=>{n!=r&&(n&&(t+="}\n"),r&&(t+=i||e+" "+r+" {\n"),n=r)},i="    ";return{setNs:r,clear:()=>{t="",n=""},write:e=>{e.trim()?(e=e.trim().replace(/^\s*/gm,i).replace(/^(\s*)\*/gm,((e,t)=>t+" *")),t+=e+"\n"):t+="\n"},incrIndent:()=>{i+="    "},decrIndent:()=>{i=i.slice(4)},finish:()=>(r(""),t)}}function o(e){if(!e)return null;e=e.trim();let t=/^\((.*)\)/.exec(e);return t&&(e=t[1]),/^-?(\d+|0[xX][0-9a-fA-F]+)$/.test(e)?parseInt(e):null}t.nsWriter=a,t.parseCppInt=o;let s={};class c extends Error{constructor(e){super(e),this.isUserError=!0,this.message=e}}function l(e){if(!e)return"";let t="";for(let n=0;n<e.length;++n){let r=255&e[n];t+=37==r||r>127?"%"+r.toString(16):String.fromCharCode(r)}return decodeURIComponent(t)}function u(t){let n="",r=0;for(;r<t.length;r+=2)n=t[r]+t[r+1]+n;return e.Util.assert(r==t.length),n}function d(e){let t=[65,20,14,47,184,47,162,187];e:for(let n=0;n<e.length;n+=16){if(e[n]!=t[0])continue;for(let r=0;r<t.length;++r)if(e[n+r]!=t[r])continue e;let r=e[n+8]|e[n+9]<<8,i=e[n+10]|e[n+11]<<8|e[n+12]<<16|e[n+13]<<24;n+=16;let a=n+r+i;if(a>e.length)continue;let o=e.slice(n,n+r),s=e.slice(n+r,a);return{meta:l(o),text:s}}return null}function p(t){function n(t){return e.debug(t),Promise.reject(new Error(t))}let r;if(e.HF2.read32(t,0)==ts.pxtc.UF2.UF2_MAGIC_START0){let e=ts.pxtc.UF2.toBin(t);e&&(r=d(e.buf))}if(1179403647==e.HF2.read32(t,0)&&(r=d(t)),58==t[0]){r=function(e){if(!e)return;let t,n=0,r=0,i=0,a=0;if(e.split(/\r?\n/).forEach((e=>{let o=/^:10....0[0E]41140E2FB82FA2BB(....)(....)(....)(....)(..)/.exec(e);if(o)n=parseInt(u(o[1]),16),r=parseInt(u(o[2]),16),i=n+r,t=new Uint8Array(i);else if(i>0){if(o=/^:10....0[0E](.*)(..)$/.exec(e),!o)return;let n=o[1];for(;i>0&&n.length>0;)t[a++]=parseInt(n[0]+n[1],16),n=n.slice(2),i--}})),!t||0!=i||a!=t.length)return;let o=new Uint8Array(n),s=new Uint8Array(r);for(let e=0;e<n;++e)o[e]=t[e];for(let e=0;e<r;++e)s[e]=t[n+e];return{meta:l(o),text:s}}(l(t)||"")}if(!r||!r.meta||!r.text)return n("This .hex file doesn't contain source.");let i=JSON.parse(r.meta);return i?"LZMA"==i.compression?e.lzmaDecompressAsync(r.text).then((t=>{if(!t)return null;let n=t.slice(0,i.headerSize||i.metaSize||0),r=t.slice(n.length);return n&&e.Util.jsonCopyFrom(i,JSON.parse(n)),{meta:i,source:r}})):i.compression?n(`Compression type ${i.compression} not supported.`):Promise.resolve({source:l(r.text)}):n("This .hex file is not valid.")}t.PkgConflictError=c,t.getExtensionInfo=function(t){const l={__appVariant:e.appTargetVariant||""},u="dal.d.ts";let d="/source/",p="",f=[];const _=t.sortedDeps(!0).sort(((e,t)=>"this"==e.id?1:"this"==t.id?-1:n.strcmp(e.id,t.id)));for(let t of _)t.disablesVariant(e.appTargetVariant)||t.resolvedDependencies().some((t=>t.disablesVariant(e.appTargetVariant)))?(p&&(p+=", "),p+=t.id,e.debug(`disable variant ${e.appTargetVariant} due to ${t.id}`)):(f.push(t),t.addSnapshot(l,[u,".h",".cpp"]));const m=JSON.stringify(l),g=s[m];if(g){e.debug("Using cached extinfo");const t=n.flatClone(g);return t.disabledDeps=p,t}e.debug("Generating new extinfo");const h=pxtc.emptyExtInfo();h.disabledDeps=p;let y=e.appTarget.compileService;y||(y={gittag:"none",serviceId:"nocompile"}),y=n.clone(y);let v=t.getTargetOptions();v||(v={isNative:!1,hasHex:!1,switches:{}});const b=!!y.platformioIni,x="codal"==y.buildEngine||"dockercodal"==y.buildEngine,k="dockermake"==y.buildEngine||"dockercross"==y.buildEngine,S="dockerespidf"==y.buildEngine,T=!(b||x||k||S),C=v.nativeType==pxtc.NATIVE_TYPE_VM;b?d="/src/":x||k?d="/pxtapp/":S&&(d="/main/");let E="// Configuration defines\n",D="\nPXT_SHIMS_BEGIN\n",A="",w="",N='#include "pxt.h"\n',I="",P=e=>I+=`   ${F}(${O}): ${e}\n`,O=0,F="",L=a("namespace"),R=a("declare namespace"),M=a("declare namespace"),U="",B={},j={};const $={true:"1",false:"0",null:"0",NULL:"0"};function K(e){return e.trim().replace(/[\_\*]$/,"")}for(const t of f){if(t.getFiles().indexOf(u)>=0){const n=t.host().readFile(t,u);e.Util.assert(!!n,`dal.d.ts not found in ${t.id}`),n.split(/\r?\n/).forEach((e=>{let t=/^\s*(\w+) = (.*),/.exec(e);t&&($[t[1]]=t[2])}))}for(const e of t.getFiles())(["Makefile","sdkconfig.defaults","CMakeLists.txt"].indexOf(e)>=0||n.endsWith(e,".mk"))&&(h.generatedFiles["/"+e]=t.host().readFile(t,e))}let z=["0","false","PXT_UTF8"],J={};function q(e){return e.replace(/\/\/.*/,"").replace(/\/\*/,"")}v.switches.boxDebug&&(J.PXT_BOX_DEBUG=1),v.utf8&&(J.PXT_UTF8=1),v.switches.profile&&(J.PXT_PROFILE=1),v.switches.gcDebug&&(J.PXT_GC_DEBUG=1),v.switches.numFloat&&(J.PXT_USE_FLOAT=1),v.nativeType==pxtc.NATIVE_TYPE_VM&&(J.PXT_VM=1);let V=0,H=!1,G="",W="",Q="",Y=!1;function X(){R.setNs(""),R.write(""),R.write(""),(Q||W)&&(R.write(W),R.write(Q),Q="",W="")}function Z(e,t){let a;G="",W="",Q="",Y=!1;let s=-1;function c(){let e=G.replace(/Methods$/,"");return e==G?null:e}function l(e){switch(e.replace(/\s+/g,"")){case"void":return"void";case"int32_t":case"int":return"int32";case"uint32_t":case"unsigned":return"uint32";case"TNumber":case"float":case"double":return"number";case"uint16_t":return"uint16";case"int16_t":case"short":return"int16";case"uint8_t":case"byte":return"uint8";case"int8_t":case"sbyte":return"int8";case"bool":return v.shortPointers&&P("use 'boolean' not 'bool' on 8 bit targets"),"boolean";case"StringData*":case"String":case"ImageLiteral_":case"ImageLiteral":return"string";case"Action":return"() => void";case"TValue":return"any";default:return K(e)}}function u(e){switch(e=e.replace(/\s+/g,"")){case"int32_t":case"uint32_t":case"unsigned":case"uint16_t":case"int16_t":case"short":case"uint8_t":case"byte":case"int8_t":case"sbyte":case"int":case"ramint_t":return"I";case"void":return"V";case"float":return"F";case"TNumber":return"N";case"TValue":return"T";case"bool":return"B";case"double":return"D";case"ImageLiteral_":return"T";case"String":return"S";default:return n.lookup(B,e)?"I":"_"+e.replace(/[\*_]+$/,"")}}e=e.replace(/^(\s*#\s*if\s+(\w+)\s*$)([^]*?)(^\s*#\s*(elif|else|endif)\s*$)/gm,((e,t,n,r,i)=>z.indexOf(n)>=0&&!J[n]?t+r.replace(/[^\n]/g,"")+i:e)),O=0,H=!1,V=0,M.setNs(""),R.setNs(""),e.split(/\r?\n/).forEach((e=>{++O;let d=q(e);!function(e){let t=q(e);if(H&&t.indexOf("}")>=0&&(H=!1,M.write("}")),!H)return;let r=/^\s*(\w+)\s*(=\s*(.*?))?,?\s*$/.exec(t);if(r){let e=r[1],i=r[3],a="";if(i){i=i.trim();let e=n.lookup($,i);null!=e&&(a="  // "+i,i=e),V=o(i),null==V&&P("cannot determine value of "+t)}else V++,i=V+"";M.write(`    ${K(e)} = ${i},${a}`)}else M.write(e)}(e);let p=/^\s*enum\s+(|class\s+|struct\s+)(\w+)\s*({|$)/.exec(d);var f,_;if(p&&(f=p[2],_=p[3],H=!0,V=-1,M.write(""),M.write(""),(Q||W)&&(M.write(W),M.write(Q),Q="",W=""),M.write(`declare const enum ${K(f)} ${_}`),B[f]=!0,t||(L.setNs(G),L.write(`enum ${p[2]} : int;`))),function(e){return!(!H&&(/^\s*\/\*\*/.test(e)?(Y=!0,W=e+"\n",/\*\//.test(e)&&(Y=!1),0):Y?(W+=e+"\n",/\*\//.test(e)&&(Y=!1),0):!/^\s*\/\/%/.test(e)||(Q+=e+"\n",0)))}(e))return;/^typedef.*;\s*$/.test(e)&&(L.setNs(G),L.write(e));let m=/^\s*namespace\s+(\w+)/.exec(e);if(m)if(G=m[1],c()){X();let e=c();R.setNs(G,`declare interface ${e} {`)}else(Q||W)&&(X(),R.setNs(K(G)),M.setNs(K(G)));else{if(m=/^PXT_ABI\((\w+)\)/.exec(e),m&&!C&&(D+=`PXT_FNPTR(::${m[1]}),\n`,w+=`extern "C" void ${m[1]}();\n`,h.functions.push({name:m[1],argsFmt:[],value:0})),m=/^\s*PXT_EXPORT\(([:\&\w]+)\)/.exec(e),m&&(h.vmPointers||(h.vmPointers=[]),h.vmPointers.push(m[1])),m=/^#define\s+PXT_COMM_BASE\s+([0-9a-fx]+)/.exec(e),m&&(h.commBase=parseInt(m[1])),m=/^\s*(\w+)([\*\&]*\s+[\*\&]*)(\w+)\s*\(([^\(\)]*)\)\s*(;\s*$|\{|$)/.exec(e),!Q||!m){if(m=/^\s*extern const (\w+) (\w+);/.exec(e),Q&&m){let e={name:G+"::"+m[2],argsFmt:[],value:null};return h.functions.push(e),C||(D+="PXT_FNPTR(&::"+e.name+"),\n"),void(Q="")}if(m=/^\s*(\w+)\s+(\w+)\s*;/.exec(e),Q&&m){let e=pxtc.parseCommentString(Q);e.indexedInstanceNS&&(a=e,R.setNs(e.indexedInstanceNS),s=0);let t=m[1],n=m[2];if(a)return Q=Q.trim(),Q+=` fixedInstance shim=${a.indexedInstanceShim}(${s++})`,R.write(""),R.write(W),R.write(Q),R.write(`const ${n}: ${l(t)};`),W="",void(Q="")}return Q&&e.trim()?(P("declaration not understood: "+e),Q="",void(W="")):void 0}{a=null;let e=pxtc.parseCommentString(Q);G||P("missing namespace declaration");let s=(m[1]+m[2]).replace(/\s+/g,""),d=m[3],p=m[4];Q=Q.trim().replace(/ \w+\.defl=\w+/g,"");let f=[u(s)],_=[],g=p.split(/,/).filter((e=>!!e)).map((t=>{let r=function(e,t){t=t.trim();let r=/(.*)=\s*(-?\w+)$/.exec(t),i="",a="";if(r&&(i=r[2],a="?",t=r[1].trim()),r=/^(.*?)(\w+)$/.exec(t),!r)return P("invalid argument: "+t),{name:"???",type:"int"};let s=r[2];e.paramDefl[s]&&(i=e.paramDefl[s],a="?");let c=i?n.lookup($,i):null;return null!=c&&(i=c),i&&(null==o(i)&&P("Invalid default value (non-integer): "+i),Q+=` ${s}.defl=${i}`),{name:s+a,type:r[1]}}(e,t);return f.push(u(r.type)),_.push(r.type.replace(/ /g,"")),`${r.name}: ${l(r.type)}`})),y={name:G+"::"+d,argsFmt:f,value:null};if(W)if(R.setNs(K(G)),R.write(""),R.write(W),/ImageLiteral/.test(m[4])&&!/imageLiteral=/.test(Q)&&(Q+=" imageLiteral=1"),Q+=` shim=${y.name}`,R.write(Q),d=K(d),c()){let e=(g[0]||"").replace(/^.*:\s*/,"").trim();e.toLowerCase()!=c().toLowerCase()&&P(r("Invalid first argument; should be of type '{0}', but is '{1}'",c(),e)),g.shift(),0==g.length&&/\bproperty\b/.test(Q)?R.write(`${d}: ${l(s)};`):R.write(`${d}(${g.join(", ")}): ${l(s)};`)}else R.write(`function ${d}(${g.join(", ")}): ${l(s)};`);if(W="",Q="",t||(L.setNs(G),L.write(`${s} ${d}(${p});`)),h.functions.push(y),T)D+="(uint32_t)(void*)::"+y.name+",\n";else if(C){if(n.startsWith(y.name,"pxt::op_")||i[y.name]||e.expose||!n.startsWith(y.name,"pxt::")&&!n.startsWith(y.name,"pxtrt::")){const e=function(e,t){if("FiberContext*"==t[0])return"::"+e.name;let n="_wrp_"+e.name.replace(/:/g,"_");if(j[e.name])return n;j[e.name]=!0,A+=`\nvoid ${n}(FiberContext *ctx) {\n`;const r=t.length;let i=[],a=!1,o="";for(let n=0;n<r;++n){const s=e.argsFmt[n+1],c=t[n];let l="I"==s?"toInt":"B"==s?"numops::toBool":"";const u=n==r-1?"ctx->r0":`ctx->sp[${r-n-2}]`;let d="";switch(c){case"TValue":case"TNumber":break;case"Action":l="asRefAction";break;case"String":l="convertToString",d="ctx, ",a=!0;break;default:l||(l="as"+c.replace(/\*/g,""))}o+=`  ${c} a${n} = (${c}) ${l}(${d}${u});\n`,i.push("a"+n)}a&&(A+="  auto prevSP = ctx->sp;\n"),A+=o,a&&(A+="  if (panicCode) { ctx->sp = prevSP; return; }\n");const s=`::${e.name}(${i.join(", ")})`;return"V"==e.argsFmt[0]?(A+=`  ${s};\n`,A+="  ctx->r0 = NULL;\n"):"I"==e.argsFmt[0]?A+=`  ctx->r0 = fromInt(${s});\n`:"B"==e.argsFmt[0]?A+=`  ctx->r0 = fromBool(${s});\n`:A+=`  ctx->r0 = (TValue)${s};\n`,a&&(A+="  ctx->sp = prevSP;\n"),r>1&&(A+=`  ctx->sp += ${r-1};\n`),A+="}\n",n}(y,_),t=y.argsFmt.length-1;D+=`{ "${y.name}", (OpFun)(void*)${e}, ${t} },\n`}}else D+="PXT_FNPTR(::"+y.name+"),\n"}}}))}const ee=n.clone(y.yottaConfig||{}),te={},ne={},re={};function ie(t){const i=t.config.platformio;i&&i.dependencies&&n.jsonCopyFrom(h.platformio.dependencies,i.dependencies),h.npmDependencies&&t.config.npmDependencies&&n.jsonCopyFrom(h.npmDependencies,t.config.npmDependencies);const a=t.config.codal;if(x&&a)for(const t of a.libraries||[]){const i=e.github.parseRepoId(t);i||n.userError(r("codal library {0} doesn't look like github repo",t));const a=e.github.stringifyRepo(i),o=n.lookup(re,i.project);o?e.github.stringifyRepo(o)!=a&&n.userError(r("conflict between codal libraries: {0} and {1}",e.github.stringifyRepo(o),a)):re[i.project]=i}const o=t.config.yotta;if(o){if(o.dependencies&&n.jsonCopyFrom(h.yotta.dependencies,o.dependencies),o.config){const e=n.jsonFlatten(o.config);for(const i of Object.keys(e)){const a=n.lookup(ne,i),o=e[i];if(!a||a.config.yotta.configIsJustDefaults)ne[i]=t,ee[i]=o;else if(ee[i]===o);else if(!t.parent.config.yotta||!t.parent.config.yotta.ignoreConflicts){let e=new c(r("conflict on yotta setting {0} between extensions {1} and {2}",i,t.id,a.id));throw e.pkg0=a,e.pkg1=t,e.settingName=i,e}}}if(o.optionalConfig){const e=n.jsonFlatten(o.optionalConfig);for(const t of Object.keys(e)){const n=e[t];te[t]=n}}}}if(T&&v.hasHex){let e=y;n.assert(!!e.yottaCorePackage),n.assert(!!e.githubCorePackage),n.assert(!!e.gittag);let t=e.githubCorePackage+"#"+y.gittag;h.yotta.dependencies[e.yottaCorePackage]=t}if(t){let e=!1;for(let i of f){I="",ie(i),i==t?(e=!0,R.clear(),M.clear()):n.assert(!e);const a=e=>n.endsWith(e,".h"),o=".cpp",s=i.getFiles().filter(a).concat(i.getFiles().filter((e=>!a(e))));for(let e of s){const t=a(e);if(t||n.endsWith(e,o)){let a=i.config.name+"/"+e;("base"==i.config.name||/^core($|---)/.test(i.config.name))&&t&&(a=e),t&&(N+=`#include "${T?d.slice(1):""}${a}"\n`);let o=i.readFile(e);null==o&&n.userError(r("C++ file {0} is missing in extension {1}.",e,i.config.name)),F=a,Z(o,t),h.extensionFiles[d+a]=o,0==i.level&&(h.onlyPublic=!1),i.verProtocol()&&"pub"!=i.verProtocol()&&"embed"!=i.verProtocol()&&(h.onlyPublic=!1)}if(n.endsWith(e,".c")||n.endsWith(e,".S")||n.endsWith(e,".s")){let t=i.readFile(e);h.extensionFiles[d+i.config.name+"/"+e.replace(/\.S$/,".s")]=t}}I&&(U+=r("Extension {0}:\n",i.id)+I)}e||(R.clear(),M.clear())}function ae(e){return Object.keys(h.extensionFiles).concat(Object.keys(h.generatedFiles)).filter((t=>n.endsWith(t,e))).map((e=>e.slice(1)))}U&&n.userError(U),n.jsonCopyFrom(te,ee),n.iterMap(te,((e,t)=>{null===t&&delete te[e]})),Object.keys(te).filter((e=>/-/.test(e))).forEach((e=>{const t=te[e];delete te[e],te[e.replace(/-/g,"_")]=t})),!T&&y.yottaConfigCompatibility&&Object.keys(te).forEach((e=>te["YOTTA_CFG_"+e]=te[e])),te.PXT_TARGET=JSON.stringify(e.appTarget.id);const oe=n.jsonUnFlatten(te);if(k){let e={name:"pxt-app",private:!0,dependencies:h.npmDependencies};h.generatedFiles["/package.json"]=JSON.stringify(e,null,4)+"\n"}else if(S){const e=n.concatArrayLike([ae(".c"),ae(".cpp"),ae(".s")]).map((e=>e.slice(d.length-1))).concat(["main.cpp"]);e.push("pointers.cpp"),h.generatedFiles[d+"CMakeLists.txt"]="idf_component_register(\n  SRCS\n"+e.map((e=>`    "${e}"\n`)).join("")+'  INCLUDE_DIRS\n    "."\n)\n'}else if(x){let t=y,r=n.clone(t.codalDefinitions)||{},i=t.codalTarget;"string"==typeof i&&(i+=".json");let a={target:i,definitions:r,config:r,application:"pxtapp",output_folder:"build",pxt_gitrepo:t.githubCorePackage,pxt_gittag:t.gittag,libraries:n.values(re).map((e=>({name:e.project,url:"https://github.com/"+e.fullName,branch:e.tag||"master",type:"git"})))};0==a.libraries.length&&delete a.libraries,n.iterMap(n.jsonFlatten(oe),((e,t)=>{e=e.replace(/^codal\./,"device.").toUpperCase().replace(/\./g,"_"),r[e]=t})),h.generatedFiles["/codal.json"]=JSON.stringify(a,null,4)+"\n",e.debug(`codal.json: ${h.generatedFiles["/codal.json"]}`),h.codal=a}else if(b){const e=y.platformioIni.slice();e.push("lib_deps ="),n.iterMap(h.platformio.dependencies,((t,n)=>{let r=/[@#\/]/.test(n)?n:t+"@"+n;e.push("  "+r)})),h.generatedFiles["/platformio.ini"]=e.join("\n")+"\n"}else{h.yotta.config=oe;let t="pxt-app";y.yottaBinary&&(t=y.yottaBinary.replace(/-combined/,"").replace(/\.hex$/,""));let n={name:t,version:"0.0.0",description:"Auto-generated. Do not edit.",license:"n/a",dependencies:h.yotta.dependencies,targetDependencies:{},bin:"./source"};h.generatedFiles["/module.json"]=JSON.stringify(n,null,4)+"\n",e.debug(`module.json: ${h.generatedFiles["/module.json"]}`)}for(let e of Object.keys(J))E+=`#define ${e} ${J[e]}\n`;if(v.uf2Family&&(E+=`#define PXT_UF2_FAMILY ${v.uf2Family}\n`),h.generatedFiles[d+"pointers.cpp"]=N+L.finish()+w+A+D+"\nPXT_SHIMS_END\n",h.generatedFiles[d+"pxtconfig.h"]=E,e.debug(`pxtconfig.h: ${h.generatedFiles[d+"pxtconfig.h"]}`),T&&(h.generatedFiles["/config.json"]=JSON.stringify(oe,null,4)+"\n",e.debug(`yotta config.json: ${h.generatedFiles["/config.json"]}`)),h.generatedFiles[d+"main.cpp"]='\n#include "pxt.h"\n#ifdef PXT_MAIN\nPXT_MAIN\n#else\nint main() {\n    uBit.init();\n    pxt::start();\n    release_fiber();\n    return 0;   // your program will never reach this line.\n}\n#endif\n',h.generatedFiles["/Makefile"]){let e="",t=(t,n)=>{e+=`${t} = ${ae(n).join(" ")}\n`};t("PXT_C",".c"),t("PXT_CPP",".cpp"),t("PXT_S",".s"),t("PXT_HEADERS",".h"),e+="PXT_SOURCES := $(PXT_C) $(PXT_S) $(PXT_CPP)\n",e+="PXT_OBJS := $(addprefix bld/, $(PXT_C:.c=.o) $(PXT_S:.s=.o) $(PXT_CPP:.cpp=.o))\n",h.generatedFiles["/Makefile.inc"]=e}h.generatedFiles["/functions.json"]=JSON.stringify(h.functions,null,1);let se=h.extensionFiles;n.jsonCopyFrom(se,h.generatedFiles);let ce={config:y.serviceId,tag:y.gittag,replaceFiles:se,dependencies:T?h.yotta.dependencies:null},le=JSON.stringify(ce);return h.sha=n.sha256(le),h.skipCloudBuild=!!y.skipCloudBuild,h.compileData=ts.pxtc.encodeBase64(n.toUTF8(le)),h.shimsDTS=R.finish(),h.enumsDTS=M.finish(),Object.keys(s).length>10&&(s={}),s[m]=h,h},t.unpackSourceFromHexFileAsync=function(t){if(t)return e.Util.fileReadAsBufferAsync(t).then((e=>p(new Uint8Array(e))))},t.unpackSourceFromHexAsync=p}(e.cpp||(e.cpp={}))}(pxt||(pxt={})),function(e){!function(t){const n={};let r,i={};function a(i){return n.hasOwnProperty(i.sha)||(n[i.sha]=function(n){let i="";return t.showLoading(e.U.lf("Compiling (this may take a minute)...")),e.tickEvent("cppcompile.start"),function(t){if(t.skipCloudBuild)return Promise.resolve({hex:["SKIP"]});if(e.webConfig&&e.webConfig.isStatic)return e.Util.requestAsync({url:`${e.webConfig.cdnUrl}hexcache/${t.sha}.hex`}).then((t=>{if(t.text){const e={enums:[],functions:[],hex:t.text.split(/\r?\n/)};return Promise.resolve(e)}return e.log("Hex info not found in bundled hex cache"),Promise.resolve()})).catch((t=>(e.log("Error fetching hex info from bundled hex cache"),Promise.resolve())));if(!e.Cloud.localToken||!window||!e.BrowserUtils.isLocalHost())return Promise.resolve(void 0);return(n="compile/"+t.sha,e.Cloud.localRequestAsync(n,r).then((e=>e.json))).then((e=>e&&!e.notInOfflineCache&&e.hex?(e.hex=e.hex.split(/\r?\n/),e):Promise.resolve(void 0))).catch((e=>Promise.resolve(void 0)));var n,r}(n).then((a=>a?(e.tickEvent("cppcompile.cachehit"),a):function(){if(r)return r;{let t=e.getOnlineCdnUrl();if(t)return r=Promise.resolve(t);const n=e.webConfig&&e.webConfig.isStatic;return r=e.Cloud.privateGetAsync("clientconfig",n).then((e=>e.primaryCdnUrl))}}().then((t=>(i=t+"/compile/"+n.sha,e.U.httpGetTextAsync(i+".hex")))).then((e=>e),(t=>e.Cloud.privatePostAsync("compile/extension",{data:n.compileData},!0).then((t=>new Promise(((n,r)=>{let a=0;const o=8e3,s=3e5,c=e.U.now(),l=()=>{if(a++,e.U.now()-c>s)return e.log("abandoning C++ build"),e.tickEvent("cppcompile.cancel",{retry:a}),n(null),null;let r=t.hex.replace(/\.hex/,".json");return e.log(`polling C++ build ${r} (attempt #${a})`),e.tickEvent("cppcompile.poll",{retry:a}),e.Util.httpGetJsonAsync(r).then((t=>{e.log(`build log ${r.replace(/\.json$/,".log")}`),e.tickEvent("cppcompile.done",{success:(null==t?void 0:t.success)?1:0,retry:a,duration:e.U.now()-c}),t.success?(e.log("fetching "+i+".hex"),n(e.U.httpGetTextAsync(i+".hex"))):(e.log("build failed"),t.mbedresponse&&t.mbedresponse.result&&t.mbedresponse.result.exception&&e.log(t.mbedresponse.result.exception),n(null))}),(t=>(e.log(`waiting ${o/1e3|0}s for C++ build...`),setTimeout(l,o),null)))};l()})))))).then((e=>(t.hideLoading(),{hex:e&&e.split(/\r?\n/)}))))).finally((()=>{t.hideLoading()}))}(i)),n[i.sha]}function o(t,n,r,i,a=10){return t.cacheStoreAsync(r,i).then((()=>t.cacheGetAsync(n))).then((i=>{let o;try{o=JSON.parse(i||"[]")}catch(e){console.error("invalid cache entry, clearing entry"),o=[]}o=o.filter((e=>e!=r)),o.unshift(r);let s=o.slice(a);return o=o.slice(0,a),e.U.promiseMapAll(s,(e=>t.cacheStoreAsync(e,"[]"))).then((()=>t.cacheStoreAsync(n,JSON.stringify(o))))}))}function s(e,t,n){return e.cacheGetAsync(t).then((r=>{let i;try{i=JSON.parse(r||"[]")}catch(n){return console.error("invalid cache entry, clearing entry"),e.cacheStoreAsync(t,"[]")}return i[0]!=n?(i=i.filter((e=>e!=n)),i.unshift(n),e.cacheStoreAsync(t,JSON.stringify(i))):null}))}t.showLoading=e=>{},t.hideLoading=()=>{},t.storeWithLimitAsync=o,t.recordGetAsync=s,t.getHexInfoAsync=function(t,n,r){if(!n.sha)return Promise.resolve(null);const c=i[n.sha];if(c)return Promise.resolve(c);e.debug("get hex info: "+n.sha);let l="hex-"+n.sha;return t.cacheGetAsync(l).then((r=>{let i;try{i=r?JSON.parse(r):null}catch(e){console.log("invalid cache entry, clearing entry"),i=null}return i&&i.hex?(e.debug("cache hit, size="+r.length),i.hex=function(t){let n=[];for(let r=0;r<t.length;r++){let i=/^([@!])(....)$/.exec(t[r]);if(!i){n.push(t[r]);continue}let a=parseInt(i[2],16),o=t[++r],s="";if("@"==i[1]){s="";let e=parseInt(o,16);for(;e-- >0;)s+="\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"}else s=ts.pxtc.decodeBase64(o);e.Util.assert(s.length>0),e.Util.assert(s.length%16==0);for(let e=0;e<s.length;){let t=[16,a>>8&255,255&a,0];a+=16;for(let n=0;n<16;++n)t.push(s.charCodeAt(e++));let r=0;for(let e=0;e<t.length;++e)r+=t[e];t.push(255&-r);let i=":";for(let e=0;e<t.length;++e){let n=255&t[e];n<=15&&(i+="0"),i+=n.toString(16)}n.push(i.toUpperCase())}}return n}(i.hex),s(t,"hex-keys",l).then((()=>i))):a(n).then((e=>{let n=e.hex;e.hex=function(e){let t=[],n=0;for(let r=0;r<e.length;r+=n){let i=-1,a="";n=0;let o=!1;for(;n<500;){let s=/^:10(....)00(.{32})(..)$/.exec(e[r+n]);if(!s)break;let c=s[2],l=/^0+$/.test(c),u=parseInt(s[1],16);if(-1==i)o=l,t.push((o?"@":"!")+s[1]),i=u-16;else{if(l!=o)break;if(i+16!=u)break}o||(a+=c),i=u,n++}if(0==n)t.push(e[r]),n=1;else if(o)t.push(n.toString(16));else{let e="";for(let t=0;t<a.length;t+=2)e+=String.fromCharCode(parseInt(a.slice(t,t+2),16));t.push(ts.pxtc.encodeBase64(e))}}return t}(e.hex);let r=JSON.stringify(e);return e.hex=n,o(t,"hex-keys",l,r).then((()=>e))})).catch((t=>(e.reportException(t,{sha:n.sha}),Promise.resolve(null))))})).then((e=>(e&&(Object.keys(i).length>20&&(i={}),i[n.sha]=e),e)))}}(e.hexloader||(e.hexloader={}))}(pxt||(pxt={})),function(e){!function(t){function n(n,r,i={},a=null,o=null){if(t.testMode||n==t.TEST_KEY){const e={success:!0};return Promise.resolve({statusCode:200,headers:{},text:JSON.stringify(e),json:e})}return e.Util.multipartPostAsync(r,i,a,o)}function r(n,r,i,a,o){e.Util.assert(!!r&&!!i&&!!a);const s="https://api.crowdin.com/api/project/"+r+"/";return o=o||{},t.testMode?delete o.key:o.key=i,n&&(o.branch=n),s+a+"?"+Object.keys(o).map((e=>`${e}=${encodeURIComponent(o[e])}`)).join("&")}function i(e){let t=0;return function(){if(t++>10)throw new Error("Too many API calls for "+e)}}function a(t,s,c,l,u){return l=o(l),e.debug(`create directory ${t||""}/${l}`),u||(u=i(l)),n(c,r(t,s,c,"add-directory"),{json:"true",name:l}).then((n=>{if(e.debug(`crowdin resp: ${n.statusCode}`),200==n.statusCode||400==n.statusCode)return Promise.resolve();if(500==n.statusCode&&n.text){if(50===JSON.parse(n.text).error.code)return e.log("directory already exists"),Promise.resolve()}const r=n.json||JSON.parse(n.text)||{error:{}};if(404==n.statusCode&&17==r.error.code){e.log(`parent directory missing for ${l}`);const n=l.replace(/\/[^\/]+$/,"");if(n!=l)return a(t,s,c,n,u).then((()=>a(t,s,c,l,u)))}throw new Error(`cannot create directory ${t||""}/${l}: ${n.statusCode} ${JSON.stringify(r)}`)}))}function o(e){return e.replace(/\\/g,"/")}function s(e,t,n,r){const i=t.name,a=n?n+"/"+i:i;switch(t.fullName=a,t.branch=r||"",t.node_type){case"file":e.push(t);break;case"directory":(t.files||[]).forEach((t=>s(e,t,a,r)));break;case"branch":(t.files||[]).forEach((r=>s(e,r,n,t.name)))}}function c(t,n){const r=e.appTarget.versions.pxtCrowdinBranch||"",i=e.appTarget.versions.targetCrowdinBranch||"";let a=[];if(t.forEach((e=>s(a,e,""))),a=a.filter((e=>e.fullName.indexOf("/")<0?e.branch==r:e.branch==i)),n&&(a=a.filter((e=>0==e.fullName.indexOf(n)))),"core"!=e.appTarget.id){const t=e.appTarget.id+"/";a=a.filter((e=>e.fullName.indexOf("/")<0||e.fullName.substr(0,t.length)==t||e.fullName.indexOf("common-docs")>=0))}return a}function l(t,n){const i=r("",t,n,"info",{json:"true"});return e.Util.httpGetTextAsync(i).then((e=>JSON.parse(e)))}t.KEY_VARIABLE="CROWDIN_KEY",t.testMode=!1,t.TEST_KEY="!!!testmode!!!",t.setTestMode=function(){e.crowdin.testMode=!0,e.log("CROWDIN TEST MODE - files will NOT be uploaded")},t.downloadTranslationsAsync=function(t,n,i,a,s={}){const c=r(t,n,i,"info",{json:"true"}),l={};return a=o(a),e.Util.httpGetTextAsync(c).then((o=>{const c=JSON.parse(o);if(!c)throw new Error("info failed");let u=c.languages.filter((e=>"en"!=e.code));e.appTarget&&e.appTarget.appTheme&&e.appTarget.appTheme.availableLocales&&(u=u.filter((t=>e.appTarget.appTheme.availableLocales.indexOf(t.code)>-1))),e.log("languages: "+u.map((e=>e.code)).join(", "));const d=()=>{const o=u.pop();if(!o)return Promise.resolve();const c=r(t,n,i,"export-file",{file:a,language:o.code,export_translated_only:s.translatedOnly?"1":"0",export_approved_only:s.validatedOnly?"1":"0"});return e.log(`downloading ${o.name} - ${o.code} (${u.length} more)`),e.Util.httpGetTextAsync(c).then((t=>{try{const e=JSON.parse(t);e&&(l[o.code]=e)}catch(t){e.log(c+" "+t)}return d()})).then((()=>e.Util.delay(1e3)))};return d()})).then((()=>l))},t.createDirectoryAsync=a,t.uploadTranslationAsync=function t(s,c,l,u,d){e.Util.assert(!!c),e.Util.assert(!!l);const p=i(u=o(u));function f(){return _("update-file",{update_option:"update_as_unapproved"})}function _(i,o){return o.type="auto",o.json="",o.escape_quotes="0",p(),n(l,r(s,c,l,i),o,u,d).then((n=>function(n){var r,i,o;const m=n.statusCode,g=e.Util.jsonTryParse(n.text)||{};if(e.debug(`upload result: ${m}`),404==m&&g.error&&8==g.error.code)return e.log(`create new translation file: ${u}`),_("add-file",{});if(404==m&&17==(null===(r=g.error)||void 0===r?void 0:r.code))return a(s,c,l,u.replace(/\/[^\/]+$/,""),p).then((()=>f()));if(g.success||53!=(null===(i=g.error)||void 0===i?void 0:i.code)){if(429==m&&55==(null===(o=g.error)||void 0===o?void 0:o.code))return e.log("Maximum concurrent requests reached, waiting 10s and retry..."),e.U.delay(1e4).then((()=>t(s,c,l,u,d)));if(200==m||g.success)return Promise.resolve();throw new Error(`Error, upload translation: ${u}, ${m}, ${n.text}`)}return e.log(`${u} being updated, waiting 5s and retry...`),e.U.delay(5e3).then((()=>t(s,c,l,u,d)))}(n)))}return f()},t.projectInfoAsync=l,t.listFilesAsync=function(t,n,r){return e.log(`crowdin: listing files under ${r}`),l(t,n).then((t=>{if(!t)throw new Error("info failed");let n=c(t.files,r);return e.debug(`crowdin: found ${n.length} under ${r}`),n.map((e=>({fullName:e.fullName,branch:e.branch||""})))}))},t.languageStatsAsync=function(t,n,i){const a=r("",t,n,"language-status",{language:i,json:"true"});return e.Util.httpGetJsonAsync(a).then((e=>c(e.files)))},t.inContextLoadAsync=function(t){const n=document.createElement("input");n.type="text",n.setAttribute("class","hidden"),n.value=t;let r=new Promise(((r,i)=>{const a=new MutationObserver((()=>{if(t==n.value)return;const i=e.Util.rlf(n.value);n.remove(),a.disconnect(),r(i)}));a.observe(n,{attributes:!0})}));return document.body.appendChild(n),r}}(e.crowdin||(e.crowdin={}))}(pxt||(pxt={})),function(e){!function(t){function n(e){return e?e.split(/\r?\n/):[]}function r(e,t,r={}){r.ignoreWhitespace&&(e=e.replace(/[\r\n]+$/,""),t=t.replace(/[\r\n]+$/,""));const i=n(e),a=n(t),o=Math.min(r.maxDiffSize||1024,i.length+a.length);if(0==o)return[];const s=i.length>65520?Uint32Array:Uint16Array,c={};let l=0;const u=p(i),d=p(a);function p(e){const t=new s(e.length);let n=0;for(let i of e)r.ignoreWhitespace&&(i=i.replace(/\s+$/g,"").replace(/^\s+/g,"")),c.hasOwnProperty(i)?t[n]=c[i]:(++l,t[n]=l,c[i]=l),n++;return t}const f=new s(2*o+1);let _=-1;for(let e=0;e<=o;e++)null!=T(e,f)&&(_=e);if(-1==_)return null;const m=[];let g=null;for(let e=0;e<=_;e++){const t=m.length?m[m.length-1].slice(0):new s(2*_+1);if(m.push(t),g=T(e,t),null!=g)break}const h=[];let y=g;for(let e=m.length-1;e>=0;e--){const t=m[e];let n=0,r=0;y==-e||y!=e&&t[o+y-1]<t[o+y+1]?(r=y+1,n=t[o+r]):(r=y-1,n=t[o+r]+1);let s=n-y;for(let e=t[o+y]-n-1;e>=0;--e)h.push("  "+a[s+e]);r==y-1?h.push("- "+i[n-1]):s>0&&h.push("+ "+a[s-1]),y=r}if(h.reverse(),r.context==1/0||r.full)return h;let v=1,b=1,x=0;const k=[],S=r.context||3;for(;x<h.length;){let e=x;for(;e<h.length&&" "==h[e][0];)e++;if(e==h.length)break;const t=e-S,n=t-x;n>0&&(v+=n,b+=n,x=t);const r=k.length,i=v,a=b;k.push("@@");let o=x,s=0;for(;o<h.length;){if(" "==h[o][0]){if(s++,s>2*S+2){o-=S+2;break}}else s=0;o++}for(;x<o;){k.push(h[x]);switch(h[x][0]){case"-":v++;break;case"+":b++;break;case" ":v++,b++}x++}k[r]=`@@ -${i},${v-i} +${a},${b-a} @@`}return k;function T(e,t){for(let n=-e;n<=e;n+=2){let r=0;r=n==-e||n!=e&&t[o+n-1]<t[o+n+1]?t[o+n+1]:t[o+n-1]+1;let i=r-n;for(;r<u.length&&i<d.length&&u[r]==d[i];)r++,i++;if(t[o+n]=r,r>=u.length&&i>=d.length)return n}return null}}function i(e){return n(e).map((e=>e.replace(/;\s*$/,""))).join("\n")}function a(e){const t=/^@@ -(\d+),(\d+) \+(\d+),(\d+)/.exec(e);return t&&{oldStart:parseInt(t[1])-1,oldLength:parseInt(t[2]),newStart:parseInt(t[3])-1,newLength:parseInt(t[4])}}t.toLines=n,t.compute=r,t.diff3=function(t,i,a,o,s){const c=g(t),l=g(a);if(!c||!l)return;const u=n(t),d=n(a);let p=0,f=[],_=0,m=0;for(let t=0;t<c.length-1;)if(c[t]==_&&l[t]==m)f.push(u[_]),_++,m++,t++;else{let n=!0,r=!0,i=t;for(;i<c.length&&(c[i]!=_+i-t&&(n=!1),l[i]!=m+i-t&&(r=!1),null==c[i]||null==l[i]);)i++;if(e.U.assert(i<c.length),n)for(;m<l[i];)f.push(d[m++]);else if(r)for(;_<c[i];)f.push(u[_++]);else if(u.slice(_,c[i]).join("\n")==d.slice(m,l[i]).join("\n"))for(;_<c[i];)f.push(u[_++]);else{for(p++,f.push("<<<<<<< "+o);_<c[i];)f.push(u[_++]);for(f.push("=======");m<l[i];)f.push(d[m++]);f.push(">>>>>>> "+s)}t=i,_=c[i],m=l[i]}return{merged:f.join("\n"),numConflicts:p};function g(t){const n=r(i,t,{context:1/0});if(!n)return;const a=[];let o=0,s=0;for(let t of n)"+"==t[0]?o++:"-"==t[0]?(a[s]=null,s++):" "==t[0]?(a[s]=o,o++,s++):e.U.oops();return a.push(o+1),a}},t.removeTrailingSemiColumns=i,t.split=function(e,t){const n=e.split(/-{10,}/,2);if(n.length<2)return{fileA:e,fileB:void 0};let r=n[0].replace(/\n$/,""),a=n[1].replace(/^\n/,"");return t&&t.removeTrailingSemiColumns&&(r=i(r),a=i(a)),{fileA:r,fileB:a}},t.parseDiffMarker=a,t.render=function(t,n,i={}){const o=r(t,n,i);if(!o)return e.dom.el("div",null,pxtc.Util.lf("Too many differences to render diff."));const s={"@":"diff-marker"," ":"diff-unchanged","+":"diff-added","-":"diff-removed"};let c=0,l=0,u="";const d=e.dom.el("tbody"),p=e.dom.el("table",{class:"diffview "+(i.update?"update":"")},d);let f=null;return o.forEach(((t,n)=>{const p=a(t);p?(c=p.oldStart,l=p.newStart):("+"!=t[0]&&c++,"-"!=t[0]&&l++);const _=o[n+1]?o[n+1][0]:"",m=o[n+2]?o[n+2][0]:"",g=t.slice(2);let h=e.dom.el("code",null,g);if(f)h=f,f=null;else if(!("-"!=t[0]||" "!=u&&"@"!=u||"+"!=_||" "!=m&&"@"!=m&&""!=m)){const i=function(t,n){const i=r(t.split("").join("\n"),n.split("").join("\n"),{context:1/0});if(!i)return{a:e.dom.el("div",{class:"inline-diff"},e.dom.el("code",null,t)),b:e.dom.el("div",{class:"inline-diff"},e.dom.el("code",null,n))};const a=[],o=[];for(let t=0;t<i.length;){let n=t;const r=i[t][0];for(;i[n]&&i[n][0]==r;)n++;const s=i.slice(t,n).map((e=>e.slice(2))).join("");" "==r?(a.push(e.dom.el("code",{class:"ch-common"},s)),o.push(e.dom.el("code",{class:"ch-common"},s))):"-"==r?a.push(e.dom.el("code",{class:"ch-removed"},s)):"+"==r?o.push(e.dom.el("code",{class:"ch-added"},s)):e.Util.oops(),t=n}return{a:e.dom.el("div",{class:"inline-diff"},a),b:e.dom.el("div",{class:"inline-diff"},o)}}(t.slice(2),o[n+1].slice(2));h=i.a,f=i.b}if(u=t[0],i.hideMarkerLine&&"@"==u||i.hideRemoved&&"-"==u)return;const y="@"==u,v=`${s[u]}`;d.appendChild(e.dom.el("tr",{class:v},[!i.hideLineNumbers&&e.dom.el("td",{class:"line-a","data-content":c}),!i.hideLineNumbers&&e.dom.el("td",{class:"line-b","data-content":l}),y&&e.dom.el("td",{colspan:2,class:"change"},e.dom.el("code",null,t)),!i.hideMarker&&!y&&e.dom.el("td",{class:"marker","data-content":u}),!y&&e.dom.el("td",{class:"change"},h)]))})),p},t.resolveMergeConflictMarker=function(t,n,r,i){let a=e.diff.toLines(t),o=n;for(;o<a.length&&!/^<<<<<<<[^<]/.test(a[o]);)o++;let s=o+1;for(;s<a.length&&!/^=======$/.test(a[s]);)s++;let c=s+1;for(;c<a.length&&!/^>>>>>>>[^>]/.test(a[c]);)c++;if(c>=a.length)return e.debug(`diff marker mistmatch: ${a.length} -> ${o} ${s} ${c}`),t;if(a[o]=void 0,a[s]=void 0,a[c]=void 0,!r)for(let e=o;e<=s;++e)a[e]=void 0;if(!i)for(let e=s;e<=c;++e)a[e]=void 0;return a.filter((e=>void 0!==e)).join("\n")},t.mergeDiff3Config=function(t,n,r){let i=e.Util.jsonTryParse(t),a=e.Util.jsonTryParse(n),o=e.Util.jsonTryParse(r);if(i&&!o)return t;if(!i)return r||n;if(!a&&o&&(a=o),!i||!a||!o)return;delete i.installedVersion,delete a.installedVersion,delete o.installedVersion;const s={},c=e.U.unique(Object.keys(a).concat(Object.keys(i)).concat(Object.keys(o)),(e=>e));for(const t of c){const n=i[t],r=a[t],c=o[t];if(JSON.stringify(n)==JSON.stringify(c))void 0!==n&&(s[t]=n);else switch(t){case"name":s[t]=l(n,r,c);break;case"version":s[t]=e.semver.strcmp(n,c)>0?n:c;break;case"languageRestriction":case"preferredEditor":case"targetVersion":s[t]=n;break;case"public":s[t]=n&&c;break;case"files":case"testFiles":{const e=u(n||[],r||[],c||[]);if(!e)return;s[t]=e.length?e:void 0;break}case"dependencies":case"testDependencies":{const e=d(n||{},r||{},c||{});if(Object.keys(e).length)return;s[t]=e;break}case"description":if(n&&!c)s[t]=n;else{if(n||!c)return;s[t]=c}break;default:return}}return e.Package.stringifyConfig(s);function l(e,t,n){return e==t?n:n==t?e:e==lf("Untitled")?n:e}function u(t,n,r){const i=[],a=e.U.unique(n.concat(t).concat(r),(e=>e));for(const e of a){const a=t.indexOf(e)>-1,o=r.indexOf(e)>-1,s=n.indexOf(e)>-1;a==o||o==s?a&&i.push(e):o&&i.push(e)}return i}function d(t,n,r){const i={},a=e.U.unique(Object.keys(n).concat(Object.keys(t)).concat(Object.keys(r)),(e=>e));for(const o of a){const a=t[o],s=r[o],c=n[o];if(a==s)a&&(i[o]=a);else{const t=e.github.parseRepoId(a),n=e.github.parseRepoId(s);if(t&&n&&e.semver.tryParse(t.tag)&&e.semver.tryParse(n.tag)&&t.owner&&t.project&&t.owner==n.owner&&t.project==n.project){const r=e.semver.strcmp(t.tag,n.tag)>0?t.tag:n.tag;i[o]=`github:${t.owner}/${t.project}#${r}`}else s==c?a&&(i[o]=a):s&&(i[o]=s)}}return i}},t.hasMergeConflictMarker=function(e){return e&&/^(<<<<<<<[^<]|>>>>>>>[^>])/m.test(e)},t.reconstructConfig=function(t,n,r,i){let a={},o=r.tree.tree.map((e=>e.path)).filter((e=>/\.(ts|blocks|md|jres|asm|json)$/.test(e))).filter((t=>t!=e.CONFIG_NAME));return t.fileName&&(o=o.filter((e=>0===e.indexOf(t.fileName))).map((e=>e.slice(t.fileName.length+1)))),o.find((e=>/\.ts$/.test(e)))||(i.config.files.filter((e=>o.indexOf(e)<0)).forEach((e=>{o.push(e),n[e]=i.files[e]})),e.Util.jsonCopyFrom(a,i.config.dependencies)),Object.keys(a).length||(a[e.appTarget.corepkg]="*"),{name:"",files:o,dependencies:a,preferredEditor:o.find((e=>/.blocks$/.test(e)))?e.BLOCKS_PROJECT_NAME:e.JAVASCRIPT_PROJECT_NAME}}}(e.diff||(e.diff={}))}(pxt||(pxt={})),function(e){!function(t){t.extractSharedIdFromPostUrl=function(t){return e.Util.httpGetJsonAsync(t+".json").then((t=>t.post_stream&&t.post_stream.posts&&t.post_stream.posts[0]&&t.post_stream.posts[0].link_counts.map((t=>e.Cloud.parseScriptId(t.url))).filter((e=>!!e))[0]))},t.topicsByTag=function(t,n){const r=`${t=t.replace(/\/$/,"")}/tag/${n}.json`;return e.Util.httpGetJsonAsync(r).then((n=>{const r=e.Util.toDictionary(n.users,(e=>e.id.toString()));return n.topic_list.topics.map((e=>({id:e.id,title:e.title,url:`${t}/t/${e.slug}/${e.id}`,imageUrl:e.image_url,author:r[e.posters[0].user_id].username,cardType:"forumUrl"})))}))}}(e.discourse||(e.discourse={}))}(pxt||(pxt={})),function(e){!function(t){var n=pxtc.Util;let r,i={},a={};const o="\x3c!-- @CMD@ @ARGS@ --\x3e";let s={parent:o,short:o,description:"\x3c!-- desc --\x3e",activities:"\x3c!-- activities --\x3e",explicitHints:"\x3c!-- hints --\x3e",flyoutOnly:"\x3c!-- flyout --\x3e",hideIteration:"\x3c!-- iter --\x3e",codeStart:"\x3c!-- start --\x3e",codeStop:"\x3c!-- stop --\x3e",autoOpen:"\x3c!-- autoOpen --\x3e",autoexpandOff:"\x3c!-- autoexpandOff --\x3e",preferredEditor:"\x3c!-- preferredEditor --\x3e"};function c(e,t,n){return e.split(t).join(n)}function l(e){return e=c(e,"&","&amp;"),e=c(e,"<","&lt;"),e=c(e,">","&gt;"),e=c(e,'"',"&quot;"),e=c(e,"'","&#39;")}function u(e){return e?l(e.replace(/\&([#a-z0-9A-Z]+);/g,((e,t)=>{switch(t){case"amp":return"&";case"lt":return"<";case"gt":return">";case"quot":return'"';default:return"#"==t[0]?String.fromCharCode(parseInt(t.slice(1))):e}}))):e}t.htmlQuote=l,t.html2Quote=u;const d=[{rx:/^vimeo\.com\/(\d+)/i,cmd:"### @vimeo $1"},{rx:/^(www\.youtube\.com\/watch\?v=|youtu\.be\/)([\w\-]+(\#t=([0-9]+m[0-9]+s|[0-9]+m|[0-9]+s))?)/i,cmd:"### @youtube $2"}];t.requireMarked=()=>"undefined"!=typeof marked?marked:"undefined"!=typeof require?require("marked"):void 0,t.requireDOMSanitizer=()=>"undefined"!=typeof DOMPurify?DOMPurify.sanitize:"undefined"!=typeof require?require("DOMPurify").sanitize:void 0;const p=e=>`<div class='ui negative message'>${l(e)}</div>`;function f(e){let t=n.clone(i),r=n.clone(a),o=n.clone(s),c={},l={},d=e.params,f=e.theme;e.boxes=t,e.macros=r,e.settings=o,e.html=e.html.replace(/<aside\s+([^<>]+)>([^]*?)<\/aside>/g,((e,n,i)=>{let a=function(e){let t={};for(;e.trim();){let n=/\s*([^=\s]+)=("([^"]*)"|'([^']*)'|(\S*))/.exec(e);if(n){let e=n[3]||n[4]||n[5]||"";t[n[1].toLowerCase()]=e}else n=/^\s*(\S+)/.exec(e),t[n[1]]="true";e=e.slice(n[0].length)}return t}(n),s=a["data-name"]||a.id;return s?(/box/.test(a.class)?t[s]=i:/aside/.test(a.class)?t[s]=`\x3c!-- BEGIN-ASIDE ${s} --\x3e${i}\x3c!-- END-ASIDE --\x3e`:/setting/.test(a.class)?o[s]=i:/menu/.test(a.class)?c[s]=i:/toc/.test(a.class)?l[s]=i:r[s]=i,`\x3c!-- macro ${s} --\x3e`):p("id or data-name missing on macro")}));let _=(e,t)=>{let n=c.item,r={NAME:e.name};if(e.subitems)n=c["toc-dropdown"]?c["toc-dropdown"]:0==t?c["top-dropdown"]:c["inner-dropdown"],r.ITEMS=e.subitems.map((e=>_(e,t+1))).join("\n");else{if(/^-+$/.test(e.name)&&(n=c.divider),e.path&&!/^(https?:|\/)/.test(e.path))return p("Invalid link: "+e.path);r.LINK=e.path}return g(n,r,["ITEMS"])},m=[{name:lf("Docs"),href:"/docs"}];const h=e.TOC||f.TOC||[];let y=[],v=t=>{for(let e of t.subitems||[])if(v(e))return y.push(t),!0;return!(!e.filepath||!t.path||0!=e.filepath.indexOf(t.path))&&(y.push(t),!0)};h.forEach(v);let b=(t,n)=>{let r=l.item,i={NAME:t.name};return t.path&&!/^(https?:|\/)/.test(t.path)?p("Invalid link: "+t.path):(/^\//.test(t.path)&&e.versionPath&&(t.path=`/${e.versionPath}${t.path}`),i.LINK=t.path,y.indexOf(t)>=0?(i.ACTIVE="active",i.EXPANDED="true",m.push({name:t.name,href:t.path})):i.EXPANDED="false",t.subitems&&t.subitems.length>0?(r=l["toc-dropdown"]?""!==t.name?l["toc-dropdown"]:l["toc-dropdown-noLink"]:0==n?""!==t.name?l["top-dropdown"]:l["top-dropdown-noHeading"]:1==n?l["inner-dropdown"]:l["nested-dropdown"],i.ITEMS=t.subitems.map((e=>b(e,n+1))).join("\n")):/^-+$/.test(t.name)&&(r=l.divider),g(r,i,["ITEMS"]))};d.menu=(f.docMenu||[]).map((e=>_(e,0))).join("\n"),d.TOC=h.map((e=>b(e,0))).join("\n"),f.appStoreID&&(d.appstoremeta=`<meta name="apple-itunes-app" content="app-id=${n.htmlEscape(f.appStoreID)}"/>`);let x="";m.length>1&&(x=`\n            <nav class="ui breadcrumb" aria-label="${lf("Breadcrumb")}">\n                ${m.map(((e,t)=>`<a class="${t==m.length-1?"active":""} section"\n                        href="${u(e.href)}" aria-current="${t==m.length-1?"page":""}">${u(e.name)}</a>`)).join('<i class="right chevron icon divider"></i>')}\n            </nav>`),d.breadcrumb=x,f.boardName&&(d.boardname=u(f.boardName)),f.boardNickname&&(d.boardnickname=u(f.boardNickname)),f.driveDisplayName&&(d.drivename=u(f.driveDisplayName)),f.homeUrl&&(d.homeurl=u(f.homeUrl)),d.targetid=f.id||"???",d.targetname=f.name||"Microsoft MakeCode",d.docsheader=f.docsHeader||"Documentation",d.orgtitle="MakeCode";const k=f.docsLogo&&n.htmlEscape(f.docsLogo),S=(f.organizationWideLogo||f.organizationLogo)&&n.htmlEscape(f.organizationWideLogo||f.organizationLogo),T=f.organizationLogo&&n.htmlEscape(f.organizationLogo);d.targetlogo=k?`<img aria-hidden="true" role="presentation" class="ui ${f.logoWide?"small":"mini"} image" src="${k}" />`:"",d.orglogo=S?`<img aria-hidden="true" role="presentation" class="ui image" src="${S}" />`:"",d.orglogomobile=T?`<img aria-hidden="true" role="presentation" class="ui image" src="${T}" />`:"";let C=e.ghEditURLs||[];if(C.length){let e='<p style="margin-top:1em">\n',t=lf("Edit this page on GitHub");for(let n of C)e+=`<a href="${n}"><i class="write icon"></i>${t}</a><br>\n`,t=lf("Edit template of this page on GitHub");e+="</p>\n",d.github=e}else d.github="";const E=`\n            <a href="#maincontent" class="ui item link" tabindex="0" role="menuitem">${lf("Skip to main content")}</a>\n        `;d.accMenu=E;const D=lf("Print this page"),A=`\n            <button id="printbtn" class="circular ui icon right floated button hideprint" title="${D}" aria-label="${D}">\n                <i class="icon print"></i>\n            </button>\n        `;d.printBtn=A;const w=`\n            <a id="togglesidebar" class="launch icon item" tabindex="0" title="Side menu" aria-label="${lf("Side menu")}" role="menuitem" aria-expanded="false">\n                <i class="content icon"></i>\n            </a>\n        `;d.sidebarToggle=w;const N=["tocsearch1","tocsearch2"].map((e=>`\n                <input type="search" name="q" placeholder="${lf("Search...")}" aria-label="${lf("Search Documentation")}">\n                <i onclick="document.getElementById('${e}').submit();" tabindex="0" class="search link icon" aria-label="${lf("Search")}" role="button"></i>\n            `));d.searchBar1=N[0],d.searchBar2=N[1];let I="";f.accentColor&&(I+=`\n.ui.accent { color: ${f.accentColor}; }\n.ui.inverted.accent { background: ${f.accentColor}; }\n`),d.targetstyle=I,d.tocclass=f.lightToc?"lighttoc":"inverted";for(let e of Object.keys(f)){let t=f[e];void 0===d[e]&&"string"==typeof t&&(d[e]=t)}e.finish=()=>g(e.html,d,["body","menu","accMenu","TOC","prev","next","printBtn","breadcrumb","targetlogo","orglogo","orglogomobile","github","JSON","appstoremeta","sidebarToggle","searchBar1","searchBar2"])}function _(e){e.image=function(e,t,n){var r,i;if(e.startsWith("youtube:")){return'<div class="tutorial-video-embed"><iframe class="yt-embed" src="https://www.youtube.com/embed/'+e.split(":").pop()+'" title="'+n+'" frameborder="0" allowFullScreen allow="autoplay; picture-in-picture"></iframe></div>'}if(e.startsWith("azuremedia:")){let t=e.split(":")[1];const n=t.split("?");let a,o;if(n[1]){t=n[0];const e=n[1];a=null===(r=/start(?:time)?=(\d+)/i.exec(e))||void 0===r?void 0:r[1],o=null===(i=/end(?:time)?=(\d+)/i.exec(e))||void 0===i?void 0:i[1]}const s=new URL(`https://makecodeprodmediaeastus-usea.streaming.media.azure.net/${t}/manifest(format=mpd-time-csf).mpd`);return a&&(s.hash=`t=${a}`,s.searchParams.append("startTime",a)),o&&s.searchParams.append("endTime",o),`<div class="tutorial-video-embed"><video class="ams-embed" controls src="${s.toString()}" /></div>`}{let r='<img class="ui image" src="'+e+'" alt="'+n+'"';return t&&(r+=' title="'+t+'"'),r+=' loading="lazy"',r+=this.options.xhtml?"/>":">",r}},e.listitem=function(e){const t=/^\s*\[( |x)\]/i.exec(e);return t?`<li class="${" "==t[1]?"unchecked":"checked"}">`+e.slice(t[0].length)+"</li>\n":"<li>"+e+"</li>\n"},e.heading=function(e,t,n){let r=/(.*)#([\w\-]+)\s*$/.exec(e),i="";return r&&(e=r[1],i=r[2]),e&&(e=e.replace(/@(fullscreen|unplugged|showdialog|showhint)/gi,"")),e.match(/\{([\s\S]+)\}/)&&(e=e.match(/\{([\s\S]+)\}/)[1].trim()),""===i&&(i=e.toLowerCase().replace(/[^\w]+/g,"-")),`<h${t} id="${this.options.headerPrefix}${i}">${e}</h${t}>`}}function m(e,t){return e.replace(/<!--\s*@(ifn?def)\s+(\w+)\s*-->([^]*?)<!--\s*@endif\s*-->/g,((e,n,r,i)=>"ifdef"==n&&t[r]||"ifndef"==n&&!t[r]?`\x3c!-- ${n} ${r} --\x3e${i}\x3c!-- endif --\x3e`:`\x3c!-- ${n} ${r} endif --\x3e`))}function g(e,t,r=[]){return e?e.replace(/@(\w+)@/g,((e,i)=>{let a=n.lookup(t,i)||"";return a+="",r.indexOf(i)<0&&(a=u(a)),a})):""}t.prepTemplate=f,t.setupRenderer=_,t.renderConditionalMacros=m,t.renderMarkdown=function(e){let i=!0;e.pubinfo||(i=!1,e.pubinfo={});let a=e.pubinfo;if(e.theme||(e.theme={}),delete e.pubinfo.private,a.time){let e=parseInt(a.time);a.timems||(a.timems=1e3*e+""),a.humantime||(a.humantime=n.isoTime(e))}a.name&&(a.dirname=a.name.replace(/[^A-Za-z0-9_]/g,"-"),a.title=a.name),i&&(a.JSON=JSON.stringify(a,null,4).replace(/</g,"\\u003c"));let o=e.template;o=o.replace(/<!--\s*@include\s+(\S+)\s*-->/g,((t,n)=>"\x3c!-- include "+n+" --\x3e\n"+((e.theme.htmlDocIncludes||{})[n]||"")+"\n\x3c!-- end include --\x3e\n")),o=m(o,a),e.locale&&(o=y(o,e.locale).text);let s={html:o,theme:e.theme,filepath:e.filepath,versionPath:e.versionPath,ghEditURLs:e.ghEditURLs,params:a,TOC:e.TOC};f(s),r||(r=t.requireMarked());let c=new r.Renderer;_(c);const l=c.link;c.link=function(e,t,n){const r=new RegExp("^[/#]").test(e),i=r?"":"_blank";r&&s.versionPath&&(e=`/${s.versionPath}${e}`);return l.call(c,e,t,n).replace(/^<a /,`<a ${i?`target="${i}"`:""} rel="nofollow noopener" `)};let h=t.requireDOMSanitizer();r.setOptions({renderer:c,gfm:!0,tables:!0,breaks:!1,pedantic:!1,sanitize:!0,sanitizer:h,smartLists:!0,smartypants:!0});let v=e.markdown;e.repo&&(v+=`\n\`\`\`package\n${e.repo.name.replace(/^pxt-/,"")}=github:${e.repo.fullName}#${e.repo.tag||"master"}\n\`\`\`\n`),v=v.replace(/^\s*https?:\/\/(\S+)\s*$/gm,((e,t)=>{for(let e of d){let n=e.rx.exec(t);if(n)return e.cmd.replace(/\$(\d+)/g,((e,t)=>n[parseInt(t)]||""))+"\n"}return e})),v=v.replace(/@([a-z]+)@/gi,((t,r)=>{let i=a[r];return!i&&e.throwOnError&&n.userError(`unknown macro ${r}`),i||"unknown macro"}));let b=r(v);b=b.replace(/&lt;br\s*\/&gt;/gi,"<br/>"),b=b.replace(/(<img [^>]* src=")\/docs\/static\/([^">]+)"/g,((e,t,n)=>t+"/static/"+n+'"'));let x="",k=0;function S(e,t,n){let r=n;return e<=k&&(r=x+r,x="",k=0),r}if(b=b.replace(/<h(\d)[^>]+>\s*([~@])?\s*(.*?)<\/h\d>/g,((t,r,i,o)=>{let c=/^(\w+)\s+(.*)/.exec(o),l=c?c[1]:o,d=c?c[2]:"";if(d=u(d),l=u(l),r=parseInt(r),i){if("@"==i){let t=n.lookup(s.settings,l);if(null!=t)a[l]=d;else if(t=n.lookup(s.macros,l),null==t)return e.throwOnError&&n.userError(`Unknown command: @${l}`),p(`Unknown command: @${l}`);return S(r,0,g(t,{ARGS:d,CMD:l},["ARGS","CMD"]))}{if(!l){let e=x;return x="",e}let t=n.lookup(s.boxes,l);if(t){let e=t.split("@BODY@"),n=S(r,0,e[0].replace("@ARGS@",d));x=e[1];let i=t.match(/data-[^>\s]+/gi);return i&&i.indexOf("data-inferred")>=0&&(k=r),n}return e.throwOnError&&n.userError(`Unknown box: ~ ${l}`),p(`Unknown box: ~ ${l}`)}}return S(r,0,t)})),x&&(b+=x),!a.title){let e=/<h1[^<>]*>([^<>]+)<\/h1>/.exec(b);e&&(a.title=u(e[1]))}if(!a.description){let e=/<p>([^]+?)<\/p>/.exec(b);e&&(a.description=u(e[1]))}const T=/<div class="ui embed mdvid"[^<>]+?data-placeholder="([^"]+)"[^>]*\/?>/i.exec(b)||/<img class="ui [^"]*image" src="([^"]+)"[^>]*\/?>/i.exec(b);T&&(a.cardLogo=u(T[1])),a.twitter=u(e.theme.twitter||"@msmakecode");let C={main:""};b=b.replace(/<!-- BEGIN-ASIDE (\S+) -->([^]*?)<!-- END-ASIDE -->/g,((e,t,r)=>{let i=n.lookup(C,t);return C[t]=(i||"")+r,"\x3c!-- aside --\x3e"})),b=b.replace(/\n<\/code>/g,"</code>"),C.main=b,b="";for(let e of Object.keys(C))b+=(E=e+"-container",D=C[e],g(s.boxes[E]||"@BODY@",{BODY:D},["BODY"]));var E,D;a.body=b,a.name=a.title||"";for(let t of Object.keys(e.theme)){let n=e.theme[t];"string"==typeof n&&(a["theme_"+t]=n)}return s.finish()},t.embedUrl=function(e,t,n,r){return`<div style="position:relative;height:0;padding-bottom:70%;overflow:hidden;"><iframe style="position:absolute;top:0;left:0;width:100%;height:100%;" src="${`${e}#${t}:${n}`}" frameborder="0" sandbox="allow-popups allow-forms allow-scripts allow-same-origin"></iframe></div>`},t.runUrl=function(e,t,n){return`<div style="position:relative;height:0;padding-bottom:${t};overflow:hidden;"><iframe style="position:absolute;top:0;left:0;width:100%;height:100%;" src="${e}?id=${encodeURIComponent(n)}" allowfullscreen="allowfullscreen" sandbox="allow-popups allow-forms allow-scripts allow-same-origin" frameborder="0"></iframe></div>`},t.codeEmbedUrl=function(e,t,n){const r=`${e}---codeembed#pub:${t}`;return`<div style="position:relative;height:calc(${n=Math.ceil(n||300)}px + 5em);width:100%;overflow:hidden;"><iframe style="position:absolute;top:0;left:0;width:100%;height:100%;" src="${r}" allowfullscreen="allowfullscreen" frameborder="0" sandbox="allow-scripts allow-same-origin"></iframe></div>`};const h={b:1,strong:1,em:1};function y(e,t){const r={};function i(e){let i=/^(\s*)([^]*?)(\s*)$/.exec(e),a=i[2].replace(/\s+/g," ");if(""==a||/^((IE=edge,.*|width=device-width.*|(https?:\/\/|\/)[\w@\/\.]+|@[\-\w]+@|\{[^\{\}]+\}|[^a-zA-Z]*|(&nbsp;)+)\s*)+$/.test(a))return null;let o=n.lookup(t,a);return o?a=o:r[a]="",i[1]+a+i[3]}function a(e){return e.replace(/&llt;/g,"<").replace(/&ggt;/g,">")}return{text:e=(e=(e=(e="<start>"+(e=e.replace(/<([\/\w]+)([^<>]*)>/g,((e,t,n)=>{let r=t.replace(/^\//,"").toLowerCase();return 1===h[r]?"&llt;"+t+n+"&ggt;":e})))).replace(/(<([\/\w]+)([^<>]*)>)([^<>]+)/g,((e,t,n,r,o)=>{if("script"==n||"style"==n)return a(e);let s=i(a(o));return null==s?a(e):t+s}))).replace(/(<[^<>]*)(content|placeholder|alt|title)="([^"]+)"/g,((e,t,n,r)=>null==i(r)?e:t+n+'="'+r.replace(/"/g,"''")+'"'))).replace(/^<start>/g,""),missing:r}}function v(e,t){if(e.id==t)return e;for(let n of e.children){let e=v(n,t);if(e)return e}return null}function b(e,t){let n=0,r=[{level:0,id:"",title:"",start:n,text:"",children:[]}],i=(e=e.replace(/\r/g,"")).split(/\n/),a={};for(let e of i){let i=/^\s*(#+)\s*(.*?)(#(\S+)\s*)?$/.exec(e),o=null;if(t&&i)if(i[4])if(a[i[4]])i=null;else{o=v(t,i[4]);let e=t=>{t.id&&(a[t.id]=!0),t.children.forEach(e)};o&&e(o)}else i=null;if(i){let a={level:t?1:i[1].length,title:i[2].trim(),id:i[4]||"",start:n,text:"",children:[]};if(o){e="";for(let t=0;t<o.level;++t)e+="#";e+=" ",e+=a.title||o.title,e+=" #"+a.id}for(;r[r.length-1].level>=a.level;)r.pop();r[r.length-1].children.push(a),r.push(a)}r[r.length-1].text+=e+"\n",n++}return r[0]}t.translate=y,t.buildTOC=function(n){if(!n)return null;const r=e.docs.requireMarked(),i=t.requireDOMSanitizer(),a={renderer:new r.Renderer,gfm:!0,tables:!1,breaks:!1,pedantic:!1,sanitize:!0,sanitizer:i,smartLists:!1,smartypants:!1};let o={name:"dummy",subitems:[]},s=[];s.push(o);let c=r.lexer(n,a),l=!1;c.forEach((e=>{switch(e.type){case"heading":e.depth;break;case"list_start":break;case"list_item_start":case"loose_item_start":l=!0;let t={name:"",path:"",subitems:[]};return void s.push(t);case"text":let n=s[s.length-1];e.text.indexOf("[")>=0?e.text.replace(/\[(.*?)\]\((.*?)\)/i,(function(e,t,r){n.name=t,n.path=r.replace(".md","")})):l&&(n.name=e.text);break;case"list_item_end":case"loose_item_end":let r=s.pop();s[s.length-1].subitems.push(r)}l=!1}));let u=o.subitems;return u&&0!=u.length?u:null},t.visitTOC=function(e,t){e.forEach((function(e){t(e),e.subitems&&e.subitems.forEach(t)}))};let x=!1;function k(e,t){if(x||function(){function e(e,t,n){let r=k(e,t).trim();if(r!=(n=n.trim()))throw console.log(`*** Template:\n${e}\n*** Input:\n${t}\n*** Expected:\n${n}\n*** Output:\n${r}`),new Error("augment docs test fail")}x=!0;let t="\n# T0\n## Examples #ex\n### Example 1\nTEx1\n### Example 2 #ex2\nTEx2\n### Example 3\nTEx3\n\n## See also #also\nTAlso\n",n="\n# @extends\n# #ex2\nMy example\n## See Also These! #also\nMy links\n",r="\n# T0\n## Examples #ex\n### Example 1\nTEx1\n### Example 2 #ex2\nMy example\n### Example 3\nTEx3\n\n## See Also These! #also\nMy links\n",i="\n# @extends\n### #ex\nFoo\n#### Example 1\nEx1\n#### Example 2x #ex2\nEx2\n## See Also These! #also\nMy links\n",a="\n# T0\n## Examples #ex\nFoo\n#### Example 1\nEx1\n#### Example 2x #ex2\nEx2\n## See Also These! #also\nMy links\n";e(t,"",t),e(t," ",t),e(t,n,r),e(t,i,a)}(),!t)return e;let r=b(e,null),i=b(t,r),a={},o={};for(let e of i.children)n.assert(0==e.children.length),n.assert(!!e.id),a[e.id]=e.text;let s=e=>{e.id&&void 0!==a[e.id]&&(o[e.id]=!0,e.text=a[e.id],e.children=[]),e.children.forEach(s)};s(r);let c="",l=e=>{c+=e.text,e.children.forEach(l)};l(r);let u="",d=i.text.replace(/^\s*#+\s*@extends.*/gm,"").replace(/^\s*\n/gm,"");d.trim()&&(u+=d.trim()+"\n");for(let e of i.children)o[e.id]||(u+=e.text);return u&&(c+="## Couldn't apply replacement logic to:\n"+u),c}t.augmentDocs=k}(e.docs||(e.docs={}))}(pxt||(pxt={})),function(e){!function(e){e.el=function(e,t,n){const r=document.createElement(e);return t&&Object.keys(t).forEach((e=>r.setAttribute(e,t[e]+""))),function e(t){Array.isArray(t)?t.forEach((t=>e(t))):"string"==typeof t?r.appendChild(document.createTextNode(t)):t instanceof HTMLElement&&r.appendChild(t)}(n),r}}(e.dom||(e.dom={}))}(pxt||(pxt={})),function(e){!function(t){function n(e){const t=/```package\s+((.|\s)+?)\s*```/i.exec(e);let n;return t&&(n={},t[1].split("\n").map((e=>e.replace(/\s*/g,""))).filter((e=>!!e)).map((e=>e.split("="))).forEach((e=>n[e[0]]=e[1]||"*"))),n}function r(e){const t=/```config\s+((.|\s)+?)\s*```/i.exec(e);let n=[];return t&&t[1].split("\n").map((e=>e.replace(/\s*/g,""))).filter((e=>!!e)).map((e=>e.split("="))).filter((e=>"feature"==e[0]&&!!e[1])).forEach((e=>n.push(e[1]))),n.length?n:void 0}function i(t){const n=/```jres\s+((.|\s)+?)\s*```/i.exec(t);if(n){const t=n[1],r=JSON.parse(t);return{jres:t,ts:e.emitTilemapsFromJRes(r)}}}function a(t){const n=/```assetjson\s+((.|\s)+?)\s*```/i.exec(t);return n?e.tutorial.parseAssetJson(n[1]):{}}function o(t){const n=/```simtheme\s+([\s\S]*?)```/i.exec(t);return n?e.tutorial.parseSimThemeJson(n[1]):{}}function s(t){let n=e.Util.jsonTryParse(t);return n&&!Array.isArray(n)&&(n=[n]),(null==n?void 0:n.length)?n:(n=t.split(/^---$/gm).filter((e=>!!e)).map((e=>{let t={};return e.replace(/^\s*(?:-|\*)\s+(\w+)\s*:\s*(.*)$/gm,((e,n,r)=>{if("flags"==n)t[n]=r.split(",");else if("otherAction"===n){const e=r.split(",").map((e=>null==e?void 0:e.trim()));(t.otherActions||(t.otherActions=[])).push({url:e[0],editor:e[1],cardType:e[2]})}else t[n]=r;return""})),!!Object.keys(t).length&&t})).filter((e=>!!e)),(null==n?void 0:n.length)?n:void 0)}function c(t){if(!t)return[];const n=[];let r,i=!1,a="";return t.split(/\r?\n/).forEach((t=>{if(/^## /.test(t))r=t.substr(2).trim();else if(/^(### ~ |```)codecard$/.test(t))i=!0;else if(/^(### ~|```)$/.test(t)){if(i=!1,r&&a){const t=s(a);(null==t?void 0:t.length)?n.push({name:r,cards:t}):e.log("invalid gallery format")}a="",r=void 0}else i&&(a+=t+"\n")})),n.forEach((t=>t.cards.forEach((t=>{if(t.otherActions&&!t.otherActions.length&&("tutorial"==t.cardType||"example"==t.cardType)){const n=["js"];e.appTarget.appTheme.python&&n.unshift("py"),t.otherActions=n.map((e=>({url:t.url,cardType:t.cardType,editor:e})))}})))),n}t.parsePackagesFromMarkdown=n,t.parseFeaturesFromMarkdown=r,t.parseJResFromMarkdown=i,t.parseTemplateProjectJSON=a,t.parseSimThemeJSON=o,t.parseExampleMarkdown=function(t,s){if(!s)return;const c=/```(blocks?|typescript|python|spy|sim)\s+((.|\s)+?)\s*```/i.exec(s);if(!c)return;const l=n(s),u=c[1],d=c[2],p=r(s),f=i(s),_=o(s),m={name:t,filesOverride:{[e.MAIN_BLOCKS]:'<xml xmlns="http://www.w3.org/1999/xhtml"></xml>',["python"===c[1]?e.MAIN_PY:e.MAIN_TS]:d},dependencies:l,features:p,snippetType:u,source:d,simTheme:_};return m.filesOverride=Object.assign(Object.assign({},m.filesOverride),a(s)),f&&(m.filesOverride[e.TILEMAP_JRES]=f.jres,m.filesOverride[e.TILEMAP_CODE]=f.ts),m},t.parseCodeCards=s,t.parseCodeCardsHtml=function(t){let n,r=[];return Array.from(t.children).forEach((e=>{"UL"===e.tagName||"OL"===e.tagName?(n||(n={}),Array.from(e.querySelectorAll("li")).forEach((e=>{const t=e.innerText,r=/^\s*(\w+)\s*:\s*(.*)$/.exec(t);if(r){const e=r[1];n[e]=r[2].trim(),"flags"===e&&(n[e]=n[e].split(/,\s*/))}}))):"HR"==e.tagName&&(n&&r.push(n),n=void 0)})),n&&r.push(n),0===r.length&&"CODE"===t.tagName&&(r=e.Util.jsonTryParse(t.textContent)),!!(null==r?void 0:r.length)&&r},t.parseGalleryMardown=c,t.loadGalleryAsync=function(t){return e.Cloud.markdownAsync(t).then((e=>c(e)))},t.codeCardsToMarkdown=function(e){return`### ~ codecard\n\n${(e||[]).map((e=>Object.keys(e).filter((t=>!!e[t])).map((t=>"otherActions"===t?e[t].map((e=>`* otherAction: ${e.url}, ${e.editor||""}, ${e.cardType||""}`)).join("\n"):`* ${t}: ${e[t]}`)).join("\n"))).join("\n\n---\n\n")}\n\n### ~\n`}}(e.gallery||(e.gallery={}))}(pxt||(pxt={})),function(e){e.GDBServer=class{constructor(t){this.io=t,this.q=new e.U.PromiseQueue,this.dataBuf="",this.numSent=0,this.pktSize=400,this.trace=!1,this.bmpMode=!0,this.targetInfo="",this.onEvent=e=>{},this.io.onData=e=>this.onData(e)}onData(t){for(this.dataBuf+=e.U.uint8ArrayToString(t);this.dataBuf.length>0;){let e=this.dataBuf[0];if("+"==e)this.dataBuf=this.dataBuf.slice(1);else if("$"==e||"%"==e){let t=this.decodeResp(this.dataBuf.slice(1));if(null==t)break;"$"==e?(this.io.sendPacketAsync(this.buildCmd("+")),this.onResponse?this.onResponse(t):this.numSent>0&&this.io.error("unexpected response: "+t)):this.onEvent(t)}else this.io.error("invalid character: "+e)}}buildCmd(t){if("+"==t)return e.U.stringToUint8Array(t);let n="";for(let e=0;e<t.length;++e){let r=t.charAt(e);"}"==r||"#"==r||"$"==r?(n+="}",n+=String.fromCharCode(32^r.charCodeAt(0))):n+=r}let r=0;t=n;for(let e=0;e<t.length;++e)r=r+t.charCodeAt(e)&255;return n="$"+t+"#"+("0"+r.toString(16)).slice(-2),e.U.stringToUint8Array(n)}decodeResp(e){let t="";for(let n=0;n<e.length;++n){let r=e[n];if("}"==r)++n,t+=String.fromCharCode(32^e.charCodeAt(n));else if("*"==r){++n;let r=e.charCodeAt(n)-29,i=t.charAt(t.length-1);for(;r-- >0;)t+=i}else{if("#"==r){return 2==e.slice(n+1,n+3).length?(this.dataBuf=e.slice(n+3),t):null}t+=r}}return null}sendCmdOKAsync(e){return this.sendCmdAsync(e,(e=>"OK"==e))}error(e){this.io.error(e),this.io.disconnectAsync()}sendCmdAsync(t,n){this.numSent++;const r=this.buildCmd(t);return this.q.enqueue("one",(()=>null===n?this.io.sendPacketAsync(r).then((()=>null)):new Promise((i=>{this.onResponse=r=>{this.onResponse=null,this.trace&&e.log(`GDB: '${t}' -> '${r}'`),void 0===n||n(r)||this.error(`Invalid GDB command response: '${t}' -> '${r}'`),i(r)},this.io.sendPacketAsync(r)}))))}sendRCmdAsync(t){return this.sendMCmdAsync("qRcmd,"+(n=t,e.U.toHex(e.U.stringToUint8Array(n))));var n}sendMCmdAsync(t){this.numSent++;const n=this.buildCmd(t);let r="";return this.q.enqueue("one",(()=>new Promise((i=>{this.onResponse=n=>{var a;"OK"!=n&&"O"==n[0]?r+=(a=n.slice(1),e.U.uint8ArrayToString(e.U.fromHex(a))):("OK"!=n&&(r+=" - "+n),this.onResponse=null,this.trace&&e.log(`Final GDB: '${t}' -> '${r}'`),i(r))},this.io.sendPacketAsync(n)}))))}write32Async(t,n){let r=new Uint8Array(4);return e.HF2.write32(r,0,n),this.writeMemAsync(t,r)}writeMemAsync(t,n){const r=this.pktSize/2-10;return e.U.assert(n.length<r),this.sendCmdOKAsync("M"+t.toString(16)+","+n.length.toString(16)+":"+e.U.toHex(n)).then((e=>{console.log(e)}))}readMemAsync(t,n){const r=this.pktSize/2-6;if(n>r){const i=new Uint8Array(n),a=o=>{const s=Math.min(n-o,r);return 0==s?Promise.resolve(i):this.readMemAsync(t+o,s).then((t=>(e.U.memcpy(i,o,t),a(o+s))))};return a(0)}return this.sendCmdAsync("m"+t.toString(16)+","+n.toString(16)).then((t=>e.U.fromHex(t)))}initBMPAsync(){return Promise.resolve().then((()=>this.sendRCmdAsync("swdp_scan"))).then((e=>(this.targetInfo=e,this.sendCmdAsync("vAttach;1",(e=>"T"==e[0]))))).then((()=>{}))}initAsync(){return e.U.delay(1e3).then((()=>this.sendCmdAsync("!"))).then((()=>this.sendCmdAsync("qSupported"))).then((t=>{let n={};return t=(t=";"+t+";").replace(/;([^;]+)[=:]([^:;]+)/g,((e,t,r)=>(n[t]=r,";"))),this.pktSize=parseInt(n.PacketSize)||1024,e.log("GDB-server caps: "+JSON.stringify(n)+" "+t.replace(/;+/g,";")),this.bmpMode?this.initBMPAsync():this.sendCmdAsync("c").then((()=>{}))}))}}}(pxt||(pxt={})),function(e){!function(t){function n(){var n,r;return!!t.forceProxy||!e.U.isNodeJS&&!(null===(r=null===(n=null==e?void 0:e.appTarget)||void 0===n?void 0:n.cloud)||void 0===r?void 0:r.noGithubProxy)}t.token=null,t.forceProxy=!1;const r={};function i(n){var r;return n.method=null!==(r=n.method)&&void 0!==r?r:"GET",function r(i){var a;const o=e.U.clone(n);t.token&&(o.headers||(o.headers={}),o.url==I?o.headers.Authorization=`bearer ${t.token}`:(o.url=e.BrowserUtils.cacheBustingUrl(o.url),o.headers.Authorization=`token ${t.token}`));return o.allowHttpErrors=null!==(a=o.allowHttpErrors)&&void 0!==a&&a,e.U.requestAsync(o).catch((n=>{if(e.tickEvent("github.error",{statusCode:n.statusCode}),t.handleGithubNetworkError){if(t.handleGithubNetworkError(o,n))return r(!1)}throw n}))}(t.token)}function a(e){return i({url:e,method:"GET"}).then((e=>e.json))}function o(t){return e.Cloud.apiRequestWithCdnAsync({url:"gh/"+t,forceLiveEndpoint:!0}).then((e=>e.json))}function s(t){e.log(`github proxy error: ${t.message}`),e.debug(t)}t.isOrgAsync=function(e){return i({url:`https://api.github.com/orgs/${e}`,method:"GET",allowHttpErrors:!0}).then((e=>200==e.statusCode))};class c{constructor(){this.latestVersions={},this.configs={},this.packages={}}proxyWithCdnLoadPackageAsync(t,n){const r=`${t}/${n}`;let i=this.packages[r];if(i)return e.debug(`github cache ${t}/${n}/text`),Promise.resolve(i);const a=C(t);return o(A(a.slug,n,a.fileName,"text")).then((e=>this.packages[r]={files:e}))}cacheConfig(t,n){const r=e.Package.parseAndValidConfig(n);return this.configs[t]=r,e.U.clone(r)}async loadConfigAsync(t,r){r||(e.debug("dep: default to master branch"),r="master");const i=`${t}/${r}`;let a=this.configs[i];if(a)return e.debug(`github cache ${t}/${r}/config`),e.U.clone(a);if(n())try{const n=await this.proxyWithCdnLoadPackageAsync(t,r);return this.cacheConfig(i,n.files[e.CONFIG_NAME])}catch(e){s(e)}const o=await u(t,r,e.CONFIG_NAME);return this.cacheConfig(i,o)}async latestVersionAsync(t,n){let r=this.latestVersions[t];return r||(e.debug(`dep: resolve latest version of ${t}`),this.latestVersions[t]=r=await e.github.latestVersionAsync(t,n,!0,!1)),r}async loadPackageAsync(t,r){if(r||(e.debug("load pkg: default to master branch"),r="master"),n())try{return await this.proxyWithCdnLoadPackageAsync(t,r).then((t=>e.U.clone(t)))}catch(e){s(e)}return await this.githubLoadPackageAsync(t,r)}githubLoadPackageAsync(t,n){return g(t,n).then((r=>{const i=`${t}/${r}`;let a=this.packages[i];return a?(e.debug(`github cache ${t}/${n}/text`),Promise.resolve(e.U.clone(a))):(e.log(`Downloading ${t}/${n} -> ${r}`),u(t,r,e.CONFIG_NAME).then((n=>{const a={files:{}};a.files[e.CONFIG_NAME]=n;const o=JSON.parse(n);return e.U.promiseMapAll(e.allPkgFiles(o).slice(1),(e=>u(t,r,e).then((t=>{a.files[e]=t})))).then((()=>(this.packages[i]=a,e.U.clone(a))))})))}))}}function l(t,n,a){return i({url:"https://api.github.com/repos/"+A(t.slug,"contents",t.fileName,a+"?ref="+n),method:"GET"}).then((n=>{const i=n.json;return r[t.slug]=!0,i&&"base64"==i.encoding&&null!=i.content?atob(i.content):e.U.httpGetTextAsync(i.download_url)}))}function u(t,n,i){const a=C(t);return r[a.slug]?l(a,n,i):e.U.requestAsync({url:"https://raw.githubusercontent.com/"+A(a.slug,n,a.fileName,i),allowHttpErrors:!0}).then((e=>200==e.statusCode?e.text:l(a,n,i)))}function d(e,t,n,r){return i({url:/^https:/.test(e)?e:"https://api.github.com/repos/"+e,headers:n,method:r||"POST",data:t,successCodes:[200,201,202,204]}).then((e=>e.json))}function p(e,t){let n=1;for(;e.refs[t+n];)n++;return t+n}async function f(e,t,n){return await d(e+"/git/refs",{ref:"refs/heads/"+t,sha:n}),t}function _(r,i="tags",o,s){const c=C(r),l=(u=o,!!t.forceProxy||!(t.token&&!u)&&n());var u;let d=null;const p=l?e.U.httpGetJsonAsync(e.BrowserUtils.cacheBustingUrl(`${e.Cloud.apiRoot}gh/${c.slug}/refs${s?"?nocache=1":""}`)).then((t=>{let n=Object.keys(t.refs).filter((t=>e.U.startsWith(t,"refs/"+i+"/"))).map((e=>({ref:e,object:{sha:t.refs[e]}})));return d=t.refs.HEAD,n})):a(`https://api.github.com/repos/${c.slug}/git/refs/${i}/?per_page=100`);let f=e=>e.replace(/^refs\/[^\/]+\//,"");return p.then((t=>{t.sort(((t,n)=>e.semver.strcmp(f(t.ref),f(n.ref))));let n={};for(let e of t)n[f(e.ref)]=e.object.sha;return{refs:n,head:d}}),(e=>404==e.statusCode?{refs:{}}:Promise.reject(e)))}function m(e){return"commit"==e.object.type?Promise.resolve(e.object.sha):"tag"==e.object.type?a(e.object.url).then((e=>"commit"==e.object.type?e.object.sha:Promise.reject(new Error("Bad type (2nd order) "+e.object.type)))):Promise.reject(new Error("Bad type "+e.object.type))}function g(e,t){if(/^[a-f0-9]{40}$/.test(t))return Promise.resolve(t);const n=C(e);return a(`https://api.github.com/repos/${n.slug}/git/refs/tags/${t}`).then(m,(e=>a(`https://api.github.com/repos/${n.slug}/git/refs/heads/${t}`).then(m)))}async function h(e,n,r){return n||(n=await t.db.latestVersionAsync(e,r)),await t.db.loadConfigAsync(e,n)}async function y(n,r){const i=C(n);if(!i)return void e.log("Unknown GitHub syntax");if(S(i,r))return e.tickEvent("github.download.banned"),void e.log("Github repo is banned");i.tag||(i.tag=await t.db.latestVersionAsync(i.slug,r));const a=await t.db.loadPackageAsync(i.fullName,i.tag),o=N(r,n);if(o){const t=e.Package.parseAndValidConfig(a.files[e.CONFIG_NAME]);t&&(e.log(`auto-disable ${o.join(",")} due to targetconfig entry for ${n}`),t.disablesVariants=o,a.files[e.CONFIG_NAME]=e.Package.stringifyConfig(t))}return a}let v;function b(t){return e.Cloud.cdnApiUrl(`gh/${t.fullName}/icon`)}function x(e,t){var n;if(!e)return;const r={owner:e.owner.login.toLowerCase(),slug:e.full_name.toLowerCase(),fullName:((null==t?void 0:t.fullName)||e.full_name).toLowerCase(),fileName:null===(n=null==t?void 0:t.fileName)||void 0===n?void 0:n.toLocaleLowerCase(),name:e.name,description:e.description,defaultBranch:e.default_branch,tag:null==t?void 0:t.tag,updatedAt:Math.round(new Date(e.updated_at).getTime()/1e3),fork:e.fork,private:e.private};return r.status=k(r,null==t?void 0:t.config),r}function k(e,t){return e?S(e,t)?v.Banned:function(e,t){var n,r;if(function(e,t){return!(!e||!t)&&!!(e.owner&&t.approvedOrgs&&t.approvedOrgs.some((t=>t.toLowerCase()==e.owner.toLowerCase())))}(e,t))return!0;const i=null===(n=null==e?void 0:e.fullName)||void 0===n?void 0:n.toLowerCase(),a=null===(r=null==e?void 0:e.slug)||void 0===r?void 0:r.toLowerCase();return!(!(null==t?void 0:t.approvedRepoLib)||!i&&!a)&&!(!t.approvedRepoLib[i]&&!t.approvedRepoLib[a])}(e,t)?v.Approved:v.Unknown:v.Unknown}function S(e,t){var n,r;if(function(e,t){return!(!t||e&&e.owner&&(!t.bannedOrgs||!t.bannedOrgs.some((t=>t.toLowerCase()==e.owner.toLowerCase()))))}(e,t))return!0;if(!t)return!1;if(!e)return!0;const i=null===(n=e.fullName)||void 0===n?void 0:n.toLowerCase(),a=null===(r=e.slug)||void 0===r?void 0:r.toLowerCase();return!(!t.bannedRepos||!t.bannedRepos.some((e=>e&&(e.toLowerCase()==i||e.toLowerCase()==a))))}async function T(t,r){const i=C(t);if(!i)return;const c=k(i,r);if(c==v.Banned)return;if(n())try{return await function(t,n){return o(t.slug).then((e=>{if(e)return{github:!0,owner:t.owner,fullName:t.fullName,fileName:t.fileName,slug:t.slug,name:t.fileName?`${e.name}-${t.fileName}`:e.name,description:e.description,defaultBranch:e.defaultBranch||"master",tag:t.tag,status:n}})).catch((t=>{e.reportException(t)}))}(i,c)}catch(e){s(e)}return x(await a("https://api.github.com/repos/"+i.slug),{config:r,fullName:i.fullName,fileName:i.fileName,tag:i.tag})}function C(e){if(!e)return;e=(e=e.trim()).replace(/\/$/,"");const t=/^https:\/\/([^./#]+)\.github\.io\/([^/#]+)\/?$/i.exec(e);t&&(e=`github:${t[1]}/${t[2]}`),e=(e=(e=e.replace(/^github:/i,"")).replace(/^https:\/\/github\.com\//i,"")).replace(/\.git\b/i,"");const n=/^([^#\/:]+)\/([^#\/:]+)(\/([^#]+))?(#([^\/:]*))?$/.exec(e);if(!n)return;const r=n[1],i=n[2];let a=n[4];const o=n[6],s=a&&/^tree\/([^\/]+\/)/.exec(a);return s&&(a=a.slice(s[0].length)),{owner:r,project:i,slug:A(r,i),fullName:A(r,i,a),tag:o,fileName:a}}function E(e){return!!e&&"github:"==e.slice(0,7)}function D(e,t=!1){return e?"github:"+(t?e.fullName:e.fullName.toLowerCase())+(e.tag?`#${e.tag}`:""):void 0}function A(...e){return e.filter((e=>!!e)).join("/")}function w(t,n){var r;if(!t)return null;const i=C(n);if(!i)return null;t.approvedRepoLib;return t.approvedRepoLib&&(null===(r=e.U.lookup(t.approvedRepoLib,i.slug.toLowerCase()))||void 0===r?void 0:r.upgrades)}function N(e,t){const n=w(e,t)||[];if(!n)return null;for(const e of n){const t=/^dv:(.*)/.exec(e);if(t){const e=t[1].split(/,/);return e.some((e=>!/^\w+$/.test(e)))?null:e}}return null}t.MemoryGithubDb=c,t.downloadTextAsync=u,t.db=new c,t.authenticatedUserAsync=function(){return t.token?a("https://api.github.com/user"):Promise.resolve(void 0)},t.getCommitsAsync=function(e,t){return a("https://api.github.com/repos/"+C(e).slug+"/commits?sha="+t).then((e=>e.map((e=>{const t=e.commit;return t.url=e.url,t.sha=e.sha,t}))))},t.getCommitAsync=function(e,t){return a("https://api.github.com/repos/"+C(e).slug+"/git/commits/"+t).then((e=>a(e.tree.url+"?recursive=1").then((t=>(e.tree=t,e)))))},t.createObjectAsync=function(e,t,n){return d(C(e).slug+"/git/"+t+"s",n).then((e=>e.sha))},t.postCommitComment=function(e,t,n,r,i){return d(`${C(e).slug}/commits/${t}/comments`,{body:n,path:r,position:i}).then((e=>e.id))},t.fastForwardAsync=async function(e,t,n){const r=C(e);return 200==(await i({url:`https://api.github.com/repos/${r.slug}/git/refs/heads/${t}`,method:"PATCH",allowHttpErrors:!0,data:{sha:n,force:!1}})).statusCode},t.putFileAsync=async function(t,n,r){const a=C(t);await i({url:`https://api.github.com/repos/${e.github.join(a.slug,"contents",a.fileName,n)}`,method:"PUT",allowHttpErrors:!0,data:{message:lf("Initialize empty repo"),content:btoa(e.U.toUTF8(r)),branch:"master"},successCodes:[201]})},t.createTagAsync=async function(e,t,n){await d(e+"/git/refs",{ref:"refs/tags/"+t,sha:n})},t.createReleaseAsync=async function(e,t,n){await d(e+"/releases",{tag_name:t,target_commitish:n,name:t,draft:!1,prerelease:!1})},t.createPRFromBranchAsync=async function(e,t,n,r,i){const a=await d(e+"/pulls",{title:r,body:i||lf("Automatically created from MakeCode."),head:n,base:t,maintainer_can_modify:!0});return null==a?void 0:a.html_url},t.mergeAsync=function(t,n,r,a){return i({url:`https://api.github.com/repos/${C(t).slug}/merges`,method:"POST",successCodes:[201,204,409],data:{base:n,head:r,commit_message:a}}).then((n=>{if(201==n.statusCode||204==n.statusCode)return n.json.sha;if(409==n.statusCode)return null;throw e.U.userError(lf("Cannot merge in github.com/{1}; code: {2}",t,n.statusCode))}))},t.getRefAsync=function(e,t){return a("https://api.github.com/repos/"+e+"/git/refs/heads/"+(t=t||"master")).then(m).catch((e=>{404!=e.statusCode&&Promise.reject(e)}))},t.getNewBranchNameAsync=async function(e,t="patch-"){return p(await _(e,"heads"),t)},t.createNewBranchAsync=f,t.forkRepoAsync=async function(t,n,r="pr-"){const i=C(t),a=x(await d(`${i.slug}/forks`,{}),{fullName:i.fullName,fileName:i.fileName}),o=Date.now()+3e5;let s=null;for(;!s&&Date.now()<o;){await e.U.delay(1e3);try{s=await _(a.slug,"heads")}catch(e){}}if(!s)throw new Error(lf("Timeout waiting for fork"));const c=p(s,r);return await f(a.slug,c,n),a.fullName+"#"+c},t.listRefsAsync=function(e,t="tags",n,r){return _(e,t,n,r).then((e=>Object.keys(e.refs)))},t.listRefsExtAsync=_,t.pkgConfigAsync=h,t.downloadPackageAsync=y,t.downloadLatestPackageAsync=async function(t,n,r){const i=await e.packagesConfigAsync(),a=await e.github.latestVersionAsync(t.slug,i,n,r),o=`${t.fullName}#${a}`;return await e.github.downloadPackageAsync(o,i),{version:`github:${o}`,config:await h(t.fullName,a,i)}},t.cacheProjectDependenciesAsync=async function(t){var n;const r=null===(n=Object.keys(t.dependencies))||void 0===n?void 0:n.filter((e=>E(t.dependencies[e])));if(r.length){const n=await e.packagesConfigAsync();await Promise.all(r.map((async e=>{const r=t.dependencies[e];if(!await y(r,n))throw new Error(lf("Cannot load extension {0} from {1}",e,r))})))}},function(e){e[e.Unknown=0]="Unknown",e[e.Approved=1]="Approved",e[e.Banned=2]="Banned"}(v=t.GitRepoStatus||(t.GitRepoStatus={})),t.isDefaultBranch=function(e,t){return t&&t.defaultBranch?e===t.defaultBranch:/^(main|master)$/.test(e)},t.listUserReposAsync=function(){return P('{\n  viewer {\n    repositories(first: 100, affiliations: [OWNER, COLLABORATOR], orderBy: {field: PUSHED_AT, direction: DESC}) {\n      nodes {\n        name\n        description\n        full_name: nameWithOwner\n        private: isPrivate\n        fork: isFork\n        updated_at: updatedAt\n        owner {\n          login\n        }\n        defaultBranchRef {\n          name\n        }\n        pxtjson: object(expression: "HEAD:pxt.json") {\n          ... on Blob {\n            text\n          }\n        }\n        readme: object(expression: "HEAD:README.md") {\n          ... on Blob {\n            text\n          }\n        }\n      }\n    }\n  }\n}').then((t=>t.data.viewer.repositories.nodes.filter((e=>e.pxtjson)).filter((t=>{t.default_branch=t.defaultBranchRef.name;const n=e.Package.parseAndValidConfig(t.pxtjson&&t.pxtjson.text),r=t.readme&&t.readme.text;return!!n&&(n.supportedTargets?n.supportedTargets.indexOf(e.appTarget.id)>-1:r&&r.indexOf("PXT/"+e.appTarget.id)>-1)})).map((e=>x(e,{fullName:e.full_name})))))},t.createRepoAsync=function(e,t,n){return d("https://api.github.com/user/repos",{name:e,description:t,private:!!n,has_issues:!0,has_projects:!1,has_wiki:!1,allow_rebase_merge:!1,allow_merge_commit:!0,delete_branch_on_merge:!1}).then((e=>x(e)))},t.enablePagesAsync=async function(t){const n=C(t);let r;try{const e=await a(`https://api.github.com/repos/${n.slug}/pages`);e&&(r=e.html_url)}catch(e){}if(!r)try{r=(await d(`https://api.github.com/repos/${n.slug}/pages`,{source:{branch:"master",path:"/"}},{Accept:"application/vnd.github.switcheroo-preview+json"})).html_url}catch(t){e.tickEvent("github.pages.error"),e.reportException(t)}if(r){const n=await a(`https://api.github.com/repos/${t}`);if(n&&!n.homepage)try{await d(`https://api.github.com/repos/${t}`,{homepage:r},void 0,"PATCH")}catch(t){e.tickEvent("github.homepage.error")}}},t.repoIconUrl=function(e){if(e.status==v.Approved)return b(e)},t.mkRepoIconUrl=b,t.repoStatus=k,t.repoAsync=T,t.searchAsync=function(t,n){if(!n)return Promise.resolve([]);let r=t.split("|").map(C).filter((e=>!!e));return r.length>0?Promise.all(r.map((e=>T(e.fullName,n)))).then((e=>e.filter((e=>e&&e.status!=v.Banned)))):e.U.httpGetJsonAsync(`${e.Cloud.apiRoot}ghsearch/${e.appTarget.id}/${e.appTarget.platformid||e.appTarget.id}?q=${encodeURIComponent(t)}`).then((t=>t.items.map((e=>x(e,{config:n,fullName:e.full_name}))).filter((e=>e.status==v.Approved||n.allowUnapproved&&e.status==v.Unknown)).filter((t=>!e.appTarget.appTheme.githubUrl||`https://github.com/${t.fullName}`!=e.appTarget.appTheme.githubUrl.toLowerCase())))).catch((e=>[]))},t.parseRepoId=C,t.toGithubDependencyPath=function(e,t){let n="github:"+e;return t&&(n+="#"+t),n},t.isGithubId=E,t.stringifyRepo=D,t.normalizeRepoId=function(e,t){const n=C(e);if(n)return!n.tag&&t&&(n.tag=t),D(n)},t.join=A,t.upgradedPackageReference=function(t,n){const r=w(t,n);if(!r)return null;for(const i of r){const r=/^min:(.*)/.exec(i),a=r&&e.semver.tryParse(r[1]);if(a){const t=C(n),i=e.semver.tryParse(t.tag);return i&&e.semver.cmp(i,a)<0?(t.tag=r[1],e.debug(`upgrading ${n} to ${r[1]}`),D(t)):(i||e.log(`not upgrading ${n} - cannot parse version`),null)}N(t,n)||e.log(`invalid upgrade rule: ${n} -> ${i}`)}return n},t.upgradedPackageId=function(e,t){const n=N(e,t);return n?t+"?dv="+n.join(","):t},t.latestVersionAsync=function(t,n,r,i){const a=C(t);return a?T(a.slug,n).then((t=>{if(t)return _(t.slug,"tags",r,i).then((r=>{let i=Object.keys(r.refs);i=e.semver.sortLatestTags(i);const o=e.appTarget.versions&&e.semver.tryParse(e.appTarget.versions.target);if(o&&n.releases&&n.releases["v"+o.major]){const r=n.releases["v"+o.major].map((t=>e.github.parseRepoId(t))).filter((e=>e&&e.fullName.toLowerCase()==a.fullName.toLowerCase()))[0];if(r){if(i.some((e=>e==r.tag)))return e.debug(`approved release ${r.fullName}#${r.tag} for v${o.major}`),Promise.resolve(r.tag);e.reportError("packages",`approved release ${r.fullName}#${r.tag} for v${o.major} not found anymore`,{repo:t.fullName})}}return i[0]?Promise.resolve(i[0]):r.head||g(t.slug,t.defaultBranch)}))})):Promise.resolve(null)},t.resolveMonoRepoVersions=function(n){n=e.Util.clone(n);const r={};return Object.keys(n).map((e=>({id:e,ghid:t.parseRepoId(n[e])}))).filter((e=>{var t;return null===(t=e.ghid)||void 0===t?void 0:t.tag})).forEach((t=>{const{id:n,ghid:i}=t;let a=r[i.slug];a||(a=r[i.slug]={tag:i.tag,deps:[]}),a.deps.push(t),e.semver.strcmp(a.tag,i.tag)<0&&(e.debug(`dep: resolve later monorepo tag to ${e.github.stringifyRepo(i)}`),a.tag=i.tag)})),e.U.values(r).forEach((t=>t.deps.forEach((r=>{r.ghid.tag!==t.tag&&(e.debug(`dep: ${e.github.stringifyRepo(r.ghid)} -> ${t.tag}`),r.ghid.tag=t.tag,n[r.id]=e.github.stringifyRepo(r.ghid))})))),n},t.GIT_JSON=".git.json";const I="https://api.github.com/graphql";function P(e){const t=JSON.stringify({query:e});return d(I,t)}t.lookupFile=function(e,t,n){if(!t)return null;const r=A(e.fileName,n);return t.tree.tree.find((e=>e.path==r))},t.ghGraphQLQueryAsync=P,t.findPRNumberforBranchAsync=function(e,t){const n=C(e);return P(`\n{\n    repository(owner: ${JSON.stringify(n.owner)}, name: ${JSON.stringify(n.project)}) {\n        pullRequests(last: 1, states: [OPEN, MERGED], headRefName: ${JSON.stringify(t)}) {\n            edges {\n                node {\n                    number\n                    state\n                    mergeable\n                    baseRefName\n                    url\n                    isDraft\n                }\n            }\n        }\n    }\n}\n`).then((e=>{const t=e.data.repository.pullRequests.edges[0];if(t&&t.node){const e=t.node;return{number:e.number,mergeable:e.mergeable,state:e.state,title:e.title,url:e.url,base:e.baseRefName}}return{number:-1}}))},t.getPagesStatusAsync=function(e){return a(`https://api.github.com/repos/${e}/pages`).catch((e=>({status:null})))}}(e.github||(e.github={}))}(pxt||(pxt={})),function(e){let t;e.REFCNT_FLASH="0xfffe",e.VTABLE_MAGIC=249,e.ValTypeObject=4,function(e){e[e.BoxedString=1]="BoxedString",e[e.BoxedNumber=2]="BoxedNumber",e[e.BoxedBuffer=3]="BoxedBuffer",e[e.RefAction=4]="RefAction",e[e.RefImage=5]="RefImage",e[e.RefCollection=6]="RefCollection",e[e.RefRefLocal=7]="RefRefLocal",e[e.RefMap=8]="RefMap",e[e.RefMImage=9]="RefMImage",e[e.MMap=10]="MMap",e[e.BoxedString_SkipList=11]="BoxedString_SkipList",e[e.BoxedString_ASCII=12]="BoxedString_ASCII",e[e.ZPin=13]="ZPin",e[e.User0=16]="User0"}(t=e.BuiltInType||(e.BuiltInType={}))}(pxt||(pxt={})),function(e){!function(t){function n(e,t,n){e[t+0]=n>>0&255,e[t+1]=n>>8&255,e[t+2]=n>>16&255,e[t+3]=n>>24&255}function r(e,t,n){e[t+0]=n>>0&255,e[t+1]=n>>8&255}function i(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function a(e,t){return e[t]|e[t+1]<<8}function o(e){let t=new Uint8Array(4*e.length);for(let r=0;r<e.length;++r)n(t,4*r,e[r]);return t}t.HF2_CMD_BININFO=1,t.HF2_MODE_BOOTLOADER=1,t.HF2_MODE_USERSPACE=2,t.HF2_CMD_INFO=2,t.HF2_CMD_RESET_INTO_APP=3,t.HF2_CMD_RESET_INTO_BOOTLOADER=4,t.HF2_CMD_START_FLASH=5,t.HF2_CMD_WRITE_FLASH_PAGE=6,t.HF2_CMD_CHKSUM_PAGES=7,t.HF2_CMD_READ_WORDS=8,t.HF2_CMD_WRITE_WORDS=9,t.HF2_CMD_DMESG=16,t.HF2_FLAG_SERIAL_OUT=128,t.HF2_FLAG_SERIAL_ERR=192,t.HF2_FLAG_CMDPKT_LAST=64,t.HF2_FLAG_CMDPKT_BODY=0,t.HF2_FLAG_MASK=192,t.HF2_SIZE_MASK=63,t.HF2_STATUS_OK=0,t.HF2_STATUS_INVALID_CMD=1,t.HF2_STATUS_EXEC_ERR=2,t.HF2_STATUS_EVENT=128,t.HF2_CMD_JDS_CONFIG=32,t.HF2_CMD_JDS_SEND=33,t.HF2_EV_JDS_PACKET=8388640,t.CUSTOM_EV_JACDAC="jacdac",t.HF2_EV_MASK=8388608,t.write32=n,t.write16=r,t.read32=i,t.read16=a,t.encodeU32LE=o,t.decodeU32LE=function(e){let t=[];for(let n=0;n<e.length;n+=4)t.push(i(e,n));return t};let s=!1;function c(t){s?e.log("HF2: "+t):e.debug("HF2: "+t)}t.enableLog=function(){s=!0};class l{constructor(n){var r;this.io=n,this.initialized=!1,this.cmdSeq=e.U.randomUint32(),this.lock=new e.U.PromiseQueue,this.flashing=!1,this.rawMode=!1,this.maxMsgSize=63,this.bootloaderMode=!1,this.reconnectTries=0,this.autoReconnect=!1,this.icon=(null===(r=e.appTarget.appTheme.downloadDialogTheme)||void 0===r?void 0:r.deviceIcon)||"usb",this.msgs=new e.U.PromiseBuffer,this.eventHandlers={},this.jacdacAvailable=!1,this.onSerial=(e,t)=>{},this.onCustomEvent=(e,t)=>{},this.onConnectionChanged=()=>{};let a=[];n.onDeviceConnectionChanged=e=>this.disconnectAsync().then((()=>e&&this.reconnectAsync())),n.onSerial=(e,t)=>this.onSerial(e,t),n.onData=r=>{let i=r[0]&t.HF2_FLAG_MASK,o=63&r[0],s=new Uint8Array(o);if(e.U.memcpy(s,0,r,1,o),i&t.HF2_FLAG_SERIAL_OUT)this.onSerial(s,i==t.HF2_FLAG_SERIAL_ERR);else if(a.push(s),i!=t.HF2_FLAG_CMDPKT_BODY){e.U.assert(i==t.HF2_FLAG_CMDPKT_LAST);let r=0;for(let e of a)r+=e.length;let o=new Uint8Array(r),s=0;for(let t of a)e.U.memcpy(o,s,t),s+=t.length;a=[],o[2]&t.HF2_STATUS_EVENT?n.onEvent(o):this.msgs.push(o)}},n.onEvent=t=>{let n=i(t,0),r=e.U.lookup(this.eventHandlers,n+"");r?r(t.slice(4)):c("unhandled event: "+n.toString(16))},n.onError=e=>{c("recv error: "+e.message),this.autoReconnect&&(this.autoReconnect=!1,this.reconnectAsync().then((()=>{this.autoReconnect=!0}),(e=>{c("reconnect error: "+e.message)})))},this.onEvent(t.HF2_EV_JDS_PACKET,(e=>{this.onCustomEvent(t.CUSTOM_EV_JACDAC,e)}))}resetState(){this.initialized=!1,this.lock=new e.U.PromiseQueue,this.info=null,this.infoRaw=null,this.pageSize=null,this.flashSize=null,this.maxMsgSize=63,this.bootloaderMode=!1,this.msgs.drain()}onEvent(n,r){e.U.assert(!!(n&t.HF2_EV_MASK)),this.eventHandlers[n+""]=r}sendCustomEventAsync(e,n){return e==t.CUSTOM_EV_JACDAC?this.jacdacAvailable?this.talkAsync(t.HF2_CMD_JDS_SEND,n).then((()=>{})):Promise.resolve():Promise.reject(new Error("invalid custom event type"))}isConnected(){return this.io.isConnected()&&this.initialized}isConnecting(){return this.io.isConnecting()||this.io.isConnected()&&!this.initialized}reconnectAsync(){return this.resetState(),c(`reconnect raw=${this.rawMode}`),this.io.reconnectAsync().then((()=>this.initAsync())).catch((t=>{if(this.reconnectTries<5)return this.reconnectTries++,c(`error ${t.message}; reconnecting attempt #${this.reconnectTries}`),e.U.delay(500).then((()=>this.reconnectAsync()));throw t}))}disconnectAsync(){return c("disconnect"),this.io.disconnectAsync()}error(e){return this.io.error(e)}talkAsync(i,o){if(this.io.talksAsync)return this.io.talksAsync([{cmd:i,data:o}]).then((e=>e[0]));let s=8;o&&(s+=o.length);let l=new Uint8Array(s),u=65535&++this.cmdSeq;n(l,0,i),r(l,4,u),r(l,6,0),o&&e.U.memcpy(l,8,o,0,o.length);let d=0,p=()=>this.msgs.shiftAsync(1e3).then((e=>{if(a(e,0)!=u){if(d<3)return d++,c(`message out of sync, (${u} vs ${a(e,0)}); will re-try`),p();this.error("out of sync")}let n="";switch(e[3]&&(n="; info="+e[3]),e[2]){case t.HF2_STATUS_OK:return e.slice(4);case t.HF2_STATUS_INVALID_CMD:this.error("invalid command"+n);break;case t.HF2_STATUS_EXEC_ERR:this.error("execution error"+n);break;default:this.error("error "+e[2]+n)}return null}));return this.sendMsgAsync(l).then(p)}sendMsgAsync(e){return this.sendMsgCoreAsync(e)}sendSerialAsync(e,t=!1){return this.io.sendSerialAsync?this.io.sendSerialAsync(e,t):this.sendMsgCoreAsync(e,t?2:1)}sendMsgCoreAsync(e,n=0){let r=new Uint8Array(64),i=a=>{let o=e.length-a;if(o<=0)return Promise.resolve();o>63?(o=63,r[0]=t.HF2_FLAG_CMDPKT_BODY):r[0]=t.HF2_FLAG_CMDPKT_LAST,n&&(r[0]=1==n?t.HF2_FLAG_SERIAL_OUT:t.HF2_FLAG_SERIAL_ERR),r[0]|=o;for(let t=0;t<o;++t)r[t+1]=e[a+t];return this.io.sendPacketAsync(r).then((()=>i(a+o)))};return this.lock.enqueue("out",(()=>i(0)))}switchToBootloaderAsync(){return this.bootloaderMode?Promise.resolve():(c("Switching into bootloader mode"),this.io.isSwitchingToBootloader&&this.io.isSwitchingToBootloader(),this.maybeReconnectAsync().then((()=>this.talkAsync(t.HF2_CMD_START_FLASH).then((()=>{}),(e=>this.talkAsync(t.HF2_CMD_RESET_INTO_BOOTLOADER).then((()=>{}),(e=>{})).then((()=>this.reconnectAsync().catch((e=>{throw"devicenotfound"===e.type&&(e.type="repairbootloader"),e})))))))).then((()=>this.initAsync())).then((()=>{this.bootloaderMode||this.error("cannot switch into bootloader mode")})))}isFlashing(){return!!this.flashing}reflashAsync(t){c("reflash"),e.U.assert(e.appTarget.compile.useUF2);const n=t.outfiles[pxtc.BINARY_UF2],r=pxtc.UF2.parseFile(e.Util.stringToUint8Array(atob(n)));return this.flashing=!0,this.io.reconnectAsync().then((()=>this.flashAsync(r))).then((()=>e.U.delay(100))).finally((()=>this.flashing=!1)).then((()=>this.reconnectAsync()))}writeWordsAsync(n,r){return e.U.assert(r.length<=64),this.talkAsync(t.HF2_CMD_WRITE_WORDS,o([n,r.length].concat(r))).then((()=>{}))}readWordsAsync(r,i){let a=new Uint8Array(8);return n(a,0,r),n(a,4,i),e.U.assert(i<=64),this.talkAsync(t.HF2_CMD_READ_WORDS,a)}pingAsync(){return this.rawMode?Promise.resolve():this.talkAsync(t.HF2_CMD_BININFO).then((e=>{}))}maybeReconnectAsync(){return this.pingAsync().catch((e=>this.reconnectAsync().then((()=>this.pingAsync()))))}flashAsync(r){let i=Date.now(),a=0,o=i=>{if(i>=r.length)return Promise.resolve();let a=r[i],s=new Uint8Array(4+a.payloadSize);return n(s,0,a.targetAddr),e.U.memcpy(s,4,a.data,0,a.payloadSize),this.talkAsync(t.HF2_CMD_WRITE_FLASH_PAGE,s).then((()=>o(i+1)))};return this.switchToBootloaderAsync().then((()=>{let e=256*r.length;return c(`Starting flash (${Math.round(e/1024)}kB).`),a=Date.now(),this.pageSize>16384?r:u(r,((e,t)=>this.readWordsAsync(e,t)))})).then((e=>{if(e.length!=r.length){let t=256*(r=e).length;c(`Performing partial flash (${Math.round(t/1024)}kB).`)}})).then((()=>o(0))).then((()=>{let e=Date.now(),t=e-i,n=e-a;c(`Flashing done at ${Math.round(256*r.length/n*1e3/1024)} kB/s in ${t}ms (reset ${t-n}ms). Resetting.`)})).then((()=>this.talkAsync(t.HF2_CMD_RESET_INTO_APP).catch((e=>{})))).then((()=>{}))}initAsync(){return this.rawMode?(this.initialized=!0,Promise.resolve()):Promise.resolve().then((()=>this.talkAsync(t.HF2_CMD_BININFO))).then((e=>(this.bootloaderMode=e[0]==t.HF2_MODE_BOOTLOADER,this.pageSize=i(e,4),this.flashSize=i(e,8)*this.pageSize,this.maxMsgSize=i(e,12),this.familyID=i(e,16),c(`Connected; msgSize ${this.maxMsgSize}B; flash ${this.flashSize/1024}kB; ${this.bootloaderMode?"bootloader":"application"} mode; family=0x${this.familyID.toString(16)}`),this.talkAsync(t.HF2_CMD_INFO)))).then((t=>{this.infoRaw=e.Util.fromUTF8Array(t),e.debug("Info: "+this.infoRaw);let n={};("Header: "+this.infoRaw).replace(/^([\w\-]+):\s*([^\n\r]*)/gm,((e,t,r)=>(n[t.replace(/-/g,"")]=r,""))),this.info=n;let r=/v(\d\S+)(\s+(\S+))?/.exec(this.info.Header);this.info.Parsed=r?{Version:r[1],Features:r[3]||""}:{Version:"?",Features:""},c(`Board-ID: ${this.info.BoardID} v${this.info.Parsed.Version} f${this.info.Parsed.Features}`)})).then((()=>this.talkAsync(t.HF2_CMD_JDS_CONFIG,new Uint8Array([1])).then((()=>{this.jacdacAvailable=!0}),(e=>{this.jacdacAvailable=!1})))).then((()=>{this.reconnectTries=0,this.initialized=!0,this.io.onConnectionChanged()}))}}function u(t,n){if(!e.appTarget.compile.flashChecksumAddr)return Promise.resolve(t);let r=pxtc.UF2.readBytes(t,e.appTarget.compile.flashChecksumAddr,48),a=pxtc.parseChecksumBlock(r);return a?function(t){return e.appTarget.compile.flashChecksumAddr?t(e.appTarget.compile.flashChecksumAddr,12).then((n=>{let r=pxtc.parseChecksumBlock(n);return r?t(r.endMarkerPos,1).then((t=>i(t,0)!=r.endMarker?(e.log("end-marker mismatch"),null):r)):null})):Promise.resolve(null)}(n).then((e=>{if(!e)return t;let n=e.regions.filter((e=>a.regions.some((t=>e.checksum==t.checksum&&e.length==t.length&&e.start==t.start))));if(0==n.length)return t;c("skipping flash at: "+n.map((e=>`${pxtc.assembler.tohex(e.start)} (${e.length/1024}kB)`)).join(", "));let r=e=>n.some((t=>t.start<=e&&e<t.start+t.length));return t.filter((e=>!(r(e.targetAddr)&&r(e.targetAddr+e.payloadSize-1))))})):Promise.resolve(t)}t.Wrapper=l,t.mkHF2PacketIOWrapper=function(t){return e.debug("packetio: wrapper hf2"),new l(t)},t.onlyChangedBlocksAsync=u}(e.HF2||(e.HF2={}))}(pxt||(pxt={})),function(e){!function(t){var n=e.Util,r=e.HF2;const i=r.read32;let a,o,s,c,l,u,d,p,f=!1;function _(e){return e<<2|2}function m(e){return 1&e?e>>1:0!=e?2&e?e==t.taggedNull?null:e!=t.taggedFalse&&(e==t.taggedTrue||{tagged:e>>2}):{ptr:e}:void 0}function g(e,t){if(n.assert(!(3&e)),n.assert(e>=0),e<2097152){let r=new Uint8Array(t);return e-=d.start,n.memcpy(r,0,d.buf,e,t),Promise.resolve(r)}let r=p.maxMsgSize-32;if(t>r){let i=[];for(;t>0;){let n=Math.min(r,t);i.push(g(e,n)),t-=n,e+=n}return Promise.all(i).then(n.uint8ArrayConcat)}return p.readWordsAsync(e,Math.ceil(t/4)).then((e=>e.length>t?e.slice(0,t):e))}function h(t){if("object"!=typeof t||!t)return Promise.resolve(t);if("number"==typeof t.ptr){if(3&t.ptr)return Promise.resolve({unalignedPtr:t.ptr});let i=0;return g(t.ptr,56).then((a=>{i=r.read16(a,2);let o=a.length;return i==e.BuiltInType.BoxedString||i==e.BuiltInType.BoxedBuffer?o=r.read16(a,4)+6:i==e.BuiltInType.BoxedNumber&&(o=12),o>a.length?g(t.ptr+a.length,o-a.length).then((e=>n.uint8ArrayConcat([a,e]))):o<a.length?a.slice(0,o):a})).then((t=>i==e.BuiltInType.BoxedString?n.uint8ArrayToString(t.slice(6)):i==e.BuiltInType.BoxedBuffer?{type:"buffer",data:t.slice(6)}:i==e.BuiltInType.BoxedNumber?new Float64Array(t.buffer.slice(4))[0]:{type:"unknown",tag:i,refcnt:r.read16(t,0),data:t.slice(4)}))}return Promise.resolve(t)}function y(e){let t=[];for(let n of Object.keys(e))t.push(h(e[n]).then((t=>{e[n]=t})));return Promise.all(t).then((()=>{}))}function v(e){let t=a.breakpoints,n=t[0],r=1/0;for(let i of t){let t=e-i.binAddr;t>=0&&t<r&&(r=t,n=i)}return n}function b(e){if(f)return Promise.resolve();let i;return f=!0,T().then((t=>{let o=r.decodeU32LE(e)[0],c={};for(let e of a.procDebugInfo[0].locals){let i=t.globals,a=(()=>{switch(e.type){case"uint32":return r.read32(i,e.index);case"int32":return 0|r.read32(i,e.index);case"uint16":return r.read16(i,e.index);case"int16":return r.read16(i,e.index)<<16>>16;case"uint8":return i[e.index];case"int8":return i[e.index]<<24>>24;default:return null}})();null===a&&(n.assert(0==(3&e.index)),a=m(r.read32(i,e.index))),c[e.name]=a}return l=v(o),i={type:"debugger",subtype:"breakpoint",breakpointId:l.id,globals:c,stackframes:[]},s(),p.talkAsync(1888490768)})).then((e=>{!function(e,t){let r=l.binAddr,i=0,o=a.procDebugInfo.filter((e=>e.codeStartLoc<=r&&r<=e.codeEndLoc))[0];for(;o&&o!=a.procDebugInfo[0];){let a=v(r),s=n.clone(a);s.functionName=o.name,s.argumentNames=o.args&&o.args.map((e=>e.name)),t.stackframes.push({locals:{},funcInfo:s,breakpointId:a.id});let c=t.stackframes[t.stackframes.length-1],l=0;for(let t of o.locals)n.assert(t.index==l++),c.locals[t.name]=m(e[i++]);r=2147483646&e[i++];let d=u[r+""];for(let t of o.args)c.locals[t.name]=m(e[i+(o.args.length-1-t.index)]);if(!d)break;o=d.from,i+=d.stack-o.localsMark}}(r.decodeU32LE(e),i);let t=[i.globals].concat(i.stackframes.map((e=>e.locals)));return n.promiseMapAll(t,y)})).then((()=>t.postMessage(i)))}function x(){f=!1,o=new Promise(((e,t)=>{s=e}))}function k(e=!1){return Promise.resolve().then((()=>p.talkAsync(665147697,r.encodeU32LE([e?1:3])))).then(x)}function S(){return o||(o=Promise.resolve()),o}function T(){return(c?Promise.resolve(c):p.talkAsync(1409050336).then((e=>c={numGlobals:i(e,0),globalsPtr:i(e,4)}))).then((e=>p.readWordsAsync(e.globalsPtr,e.numGlobals))).then((e=>({staticState:c,globals:e})))}t.taggedUndefined=0,t.taggedNull=_(1),t.taggedFalse=_(2),t.taggedTrue=_(16),t.postMessage=e=>console.log(e),t.decodeValue=m,t.heapExpandAsync=h,t.heapExpandMapAsync=y,t.startDebugAsync=function(e,t){return p=t,p.onEvent(915601917,b),(f=!1,a=null,c=null,Promise.resolve()).then((()=>{a=e,u={};let t=[];for(let n of e.procDebugInfo)t[n.idx]=n;for(let n of e.procDebugInfo)for(let e of n.calls)u[e.addr+""]={from:n,to:t[e.procIndex],stack:e.stack}})).then((()=>{let e=a.outfiles[pxtc.BINARY_UF2],t=n.stringToUint8Array(atob(e));return d=pxtc.UF2.toBin(t),p.reflashAsync(a).then((()=>p.reconnectAsync()))})).then((()=>p.talkAsync(287358355).catch((e=>{})))).then((()=>n.delay(200))).then((()=>p.reconnectAsync())).then(x).then(S)},t.handleMessage=function(e){if(console.log("HWDBGMSG",e),"debugger"!=e.type)return;let t=!1;switch(e.subtype){case"stepinto":t=!0;case"stepover":k(t)}},t.resumeAsync=k,t.waitForHaltAsync=S,t.getHwStateAsync=T}(e.HWDBG||(e.HWDBG={}))}(pxt||(pxt={})),function(e){e.ImageConverter=class{logTime(){if(this.start){let t=Date.now()-this.start;e.debug("Icon creation: "+t+"ms")}}convert(t){this.start||(this.start=Date.now());let n=atob(t.slice(t.indexOf(",")+1)),r=n.charCodeAt(0),i=n.charCodeAt(1),a=n.charCodeAt(2);if(135===r&&(r=224|n.charCodeAt(1),i=n.charCodeAt(2)|n.charCodeAt(3)<<8,a=n.charCodeAt(4)|n.charCodeAt(5)<<8,n=n.slice(4)),225!=r&&228!=r)return null;if(this.palette||this.setPalette(e.appTarget.runtime.palette.map((function(e){const t=parseInt(e.replace(/#/,""),16);return[t>>0&255,t>>8&255,t>>16&255,255]}))),225==r)return this.genMonochrome(n,i,a);const o=(e.BrowserUtils.isEdge()||e.BrowserUtils.isIE())&&i<100&&a<100?3:1;return this.genColor(n,i,a,o)}setPalette(e){e[0][3]=0,this.palette=new Uint8Array(4*e.length);for(let t=0;t<e.length;++t)this.palette[4*t+0]=e[t][0],this.palette[4*t+1]=e[t][1],this.palette[4*t+2]=e[t][2],this.palette[4*t+3]=e[t][3]}genMonochrome(t,n,r){let i=n+3&-4,a=54+this.palette.length,o=a+i*r,s=new Uint8Array(o);s[0]=66,s[1]=77,e.HF2.write32(s,2,o),e.HF2.write32(s,10,a),e.HF2.write32(s,14,40),e.HF2.write32(s,18,n),e.HF2.write32(s,22,-r),e.HF2.write16(s,26,1),e.HF2.write16(s,28,8),e.HF2.write32(s,38,2835),e.HF2.write32(s,42,2835),e.HF2.write32(s,46,this.palette.length>>2),s.set(this.palette,54);let c=4,l=a,u=1,d=t.charCodeAt(c++);for(let e=0;e<n;++e){l=a+e;for(let e=0;e<r;++e)s[l]=d&u?1:0,l+=i,u<<=1,256==u&&(u=1,d=t.charCodeAt(c++))}return"data:image/bmp;base64,"+btoa(e.U.uint8ArrayToString(s))}genColor(t,n,r,i){const a=n*(i=Math.max(1,0|i)),o=r*i;let s=a<<2,c=138,l=c+s*o,u=new Uint8Array(l);u[0]=66,u[1]=77,e.HF2.write32(u,2,l),e.HF2.write32(u,10,c),e.HF2.write32(u,14,124),e.HF2.write32(u,18,a),e.HF2.write32(u,22,-o),e.HF2.write16(u,26,1),e.HF2.write16(u,28,32),e.HF2.write16(u,30,3),e.HF2.write32(u,38,2835),e.HF2.write32(u,42,2835),e.HF2.write32(u,54,16711680),e.HF2.write32(u,58,65280),e.HF2.write32(u,62,255),e.HF2.write32(u,66,4278190080),u[70]=66,u[71]=71,u[72]=82,u[73]=115;let d=4,p=c,f=!0;for(let e=0;e<a;e++){let n=!1;p=c+(e<<2);let a=d,l=t.charCodeAt(d++),_=n?(l>>4&15)<<2:(15&l)<<2;for(let e=0;e<o;e++)l&&(f=!1),u[p]=this.palette[_],u[p+1]=this.palette[_+1],u[p+2]=this.palette[_+2],u[p+3]=this.palette[_+3],p+=s,e%i==i-1&&(n&&(l=t.charCodeAt(d++)),n=!n,_=n?(l>>4&15)<<2:(15&l)<<2);if(f&&(u[141]=1),e%i==i-1)for(r%2||--d;3&d;)d++;else d=a}return"data:image/bmp;base64,"+btoa(e.U.uint8ArrayToString(u))}},e.convertUint8BufferToPngUri=function(t,n){const r=new e.ImageConverter,i=[];for(let e=0;e<16;e++)i.push([t[3*e+2],t[3*e+1],t[3*e+0],255]);r.setPalette(i);const a=String.fromCharCode.apply(null,n),o=`data:image/x-mkcd-f4;base64,${btoa(a)}`;return r.convert(o)}}(pxt||(pxt={})),function(e){!function(t){function n(){const e={"tsconfig.json":t.TS_CONFIG,"test.ts":`// ${lf("tests go here; this will not be compiled when this package is used as an extension.")}\n`,"_config.yml":"makecode:\n  target: @TARGET@\n  platform: @PLATFORM@\n  home_url: @HOMEURL@\ntheme: jekyll-theme-slate\ninclude:\n  - assets\n  - README.md\n",Makefile:"all: deploy\n\nbuild:\n\tpxt build\n\ndeploy:\n\tpxt deploy\n\ntest:\n\tpxt test\n",Gemfile:"source 'https://rubygems.org'\ngem 'github-pages', group: :jekyll_plugins","README.md":`\n> ${lf("Open this page at {0}","[https://@REPOOWNER@.github.io/@REPONAME@/](https://@REPOOWNER@.github.io/@REPONAME@/)")}\n\n## ${lf("Use as Extension")}\n\n${lf("This repository can be added as an **extension** in MakeCode.")}\n\n* ${lf("open [@HOMEURL@](@HOMEURL@)")}\n* ${lf("click on **New Project**")}\n* ${lf("click on **Extensions** under the gearwheel menu")}\n* ${lf("search for **https://github.com/@REPO@** and import")}\n\n## ${lf("Edit this project")}\n\n${lf("To edit this repository in MakeCode.")}\n\n* ${lf("open [@HOMEURL@](@HOMEURL@)")}\n* ${lf("click on **Import** then click on **Import URL**")}\n* ${lf("paste **https://github.com/@REPO@** and click import")}\n\n#### ${lf("Metadata (used for search, rendering)")}\n\n* for PXT/@TARGET@\n<script src="https://makecode.com/gh-pages-embed.js"><\/script><script>makeCodeRender("{{ site.makecode.home_url }}", "{{ site.github.owner_name }}/{{ site.github.repository_name }}");<\/script>\n`,".gitignore":"# MakeCode\nbuilt\nnode_modules\nyotta_modules\nyotta_targets\npxt_modules\n.pxt\n_site\n*.db\n*.tgz\n.header.json\n.simstate.json\n",".vscode/settings.json":'{\n    "editor.formatOnType": true,\n    "files.autoSave": "afterDelay",\n    "files.watcherExclude": {\n        "**/.git/objects/**": true,\n        "**/built/**": true,\n        "**/node_modules/**": true,\n        "**/yotta_modules/**": true,\n        "**/yotta_targets": true,\n        "**/pxt_modules/**": true,\n        "**/.pxt/**": true\n    },\n    "files.associations": {\n        "*.blocks": "html",\n        "*.jres": "json"\n    },\n    "search.exclude": {\n        "**/built": true,\n        "**/node_modules": true,\n        "**/yotta_modules": true,\n        "**/yotta_targets": true,\n        "**/pxt_modules": true,\n        "**/.pxt": true\n    },\n    "files.exclude": {\n        "**/pxt_modules": true,\n        "**/.pxt": true\n    }\n}',".vscode/extensions.json":'{\n    "recommendations": ["ms-edu.pxt-vscode-web"]\n}'},n=r();return n&&Object.keys(n).forEach((t=>e[t]=n[t])),e}function r(){const t=e.appTarget.bundledpkgs[e.template.TEMPLATE_PRJ];if(t){const n=e.Util.clone(t);return delete n[e.CONFIG_NAME],n}}t.TS_CONFIG='{\n    "compilerOptions": {\n        "target": "ES5",\n        "noImplicitAny": true,\n        "outDir": "built",\n        "rootDir": "."\n    },\n    "exclude": ["pxt_modules/**/*test.ts"]\n}\n',t.defaultFiles=n,t.targetTemplateFiles=r,t.TEMPLATE_PRJ="template",t.packageFiles=function(t){const r=e.appTarget.blocksprj||e.appTarget.tsprj,i=e.U.clone(r.config);delete i.installedVersion,delete i.additionalFilePath,delete i.additionalFilePaths,i.preferredEditor=i.files.find((e=>/\.blocks$/.test(e)))?e.BLOCKS_PROJECT_NAME:e.JAVASCRIPT_PROJECT_NAME,i.name=t,i.public=!0,i.version||(i.version="0.0.0");const a={},o=n();for(const e in o)a[e]=o[e];for(const e in r.files)"README.md"!=e&&(a[e]=r.files[e]);const s=Object.keys(a).filter((e=>/\.(blocks|md|ts|asm|cpp|h|py)$/.test(e)));return i.files=s.filter((e=>!/test/.test(e))),i.testFiles=s.filter((e=>/test/.test(e))),i.supportedTargets=[e.appTarget.id],a[e.CONFIG_NAME]=e.Package.stringifyConfig(i),a},t.packageFilesFixup=function(t,n){const r=JSON.parse(t[e.CONFIG_NAME]);n&&e.Util.jsonMergeFrom(r,n),e.webConfig&&(Object.keys(e.webConfig).forEach((t=>r[t.toLowerCase()]=e.webConfig[t])),r.platform=e.appTarget.platformid||e.appTarget.id,r.target=e.appTarget.id,r.docs=e.appTarget.appTheme.homeUrl||"./",r.homeurl=e.appTarget.appTheme.homeUrl||"???"),e.U.iterMap(t,((e,n)=>{n=n.replace(/@([A-Z]+)@/g,((e,t)=>r[t.toLowerCase()]||"")),t[e]=n}))}}(e.template||(e.template={}))}(pxt||(pxt={})),function(e){!function(t){let n,r;!function(e){e[e.Prefix=0]="Prefix",e[e.Postfix=1]="Postfix",e[e.Infix=2]="Infix",e[e.Block=3]="Block",e[e.NewLine=4]="NewLine"}(n=t.NT||(t.NT={})),function(e){e[e.None=0]="None",e[e.WithSpace=1]="WithSpace",e[e.NoSpace=2]="NoSpace"}(r=t.GlueMode||(t.GlueMode={}));const i=["break","case","catch","class","const","continue","debugger","default","delete","do","else","enum","export","extends","false","finally","for","function","if","import","in","instanceof","new","null","return","super","switch","this","throw","true","try","typeof","var","void","while","with"];function a(e){return"`"+e.replace(/[\\`${}]/g,(e=>"\\"+e))+"`"}function o(e){return e.length>20&&/\n/.test(e)?a(e):JSON.stringify(e)}function s(e,t,n){return{type:e,op:t,children:n}}function c(){return s(n.NewLine,"",[])}function l(e,t){return s(n.Prefix,e,t)}function u(e,t,r){return s(n.Infix,t,null==e?[r]:[e,r])}function d(e){return l(e,[])}function p(e){return s(n.Block,"",e)}function f(e){return l("",e)}function _(e,t=!1){const n=[];for(const r of e)t?(n.length>0&&n.push(d(",")),n.push(c())):n.length>0&&n.push(d(", ")),n.push(r);return t&&n.push(c()),f(n)}let m;t.backtickLit=a,t.stringLit=o,t.mkNode=s,t.mkNewLine=c,t.mkPrefix=l,t.mkPostfix=function(e,t){return s(n.Postfix,t,e)},t.mkInfix=u,t.mkText=d,t.mkBlock=p,t.mkGroup=f,t.mkStmt=function(...e){let t=e[e.length-1];return t&&t.type==n.Block||e.push(c()),f(e)},t.mkCommaSep=_,function(t){function n(e,t,n=!1,r=!1){return f(r?[u(t[0],".",d(e)),d("("),_(t.slice(1),n),d(")")]:[d(e),d("("),_(t,n),d(")")])}function r(e,t,r,i){return n(e+"."+t,r,i)}function i(t,n){return e.U.assert(2==n.length),u(n[0],t,n[1])}t.mkArrayLiteral=function(e,t){return f([d("["),_(e,t),d("]")])},t.mkNumberLiteral=function(e){return d(e.toString())},t.mkBooleanLiteral=function(e){return d(e?"true":"false")},t.mkStringLiteral=function(e){return d(o(e))},t.mkPropertyAccess=function(e,t){return f([u(t,".",d(e))])},t.mkCall=n,t.stdCall=function(e,t,r){return n(e,t,r)},t.extensionCall=function(e,t,r){return n(e,t,r,!0)},t.namespaceCall=r,t.mathCall=function(e,t){return r("Math",e,t,!1)},t.mkGlobalRef=function(e){return d(e)},t.mkSimpleCall=i,t.mkWhile=function(e,t){return f([d("while ("),e,d(")"),p(t)])},t.mkComment=function(e){return d("// "+e)},t.mkMultiComment=function(e){let t=[d("/**"),c()];return e.split("\n").forEach(((e,n,r)=>{e&&(t.push(d(" * "+e)),t.push(c()),n<r.length-1&&(t.push(d(" * ")),t.push(c())))})),f(t.concat([d(" */"),c()]))},t.mkAssign=function(e,t){return i("=",[e,t])},t.mkParenthesizedExpression=function(e){return y(h([e]).output)?e:f([d("("),e,d(")")])}}(m=t.Helpers||(t.Helpers={})),t.H=m;const g={"=":3,"+=":3,"-=":3,"?":4,":":4,"||":5,"&&":6,"|":7,"^":8,"&":9,"==":10,"!=":10,"===":10,"!==":10,"<":11,">":11,"<=":11,">=":11,">>":12,">>>":12,"<<":12,"+":13,"-":13,"*":14,"/":14,"%":14,"**":15,"!":16,"~":16,"P-":16,"P+":16,"++":16,"--":16,".":18};function h(t){let i=[],a={},o="",s="",c=[{}],l=0;function u(e){"string"==typeof e&&(l+=(e.match(/\n/g)||[]).length),o+=e}let p=f(t);return function t(r,i){if(r.type!=n.Infix){for(let e of r.children)t(e,-1);return}let a=[];function o(e){"P"==e[0]&&(e=e.slice(1)),a.push(d(e))}let s=e.U.lookup(g,r.op);if(null==s&&e.U.oops("bad infix op: "+r.op),s<i&&o("("),1==r.children.length)o(r.op),t(r.children[0],s),a.push(r.children[0]);else{let e,n=3!=s&&"**"!=r.op;t(r.children[0],n?s:s+.1),a.push(r.children[0]),e&&"number"!=e&&(o(": "),o(e)),"."==r.op?o("."):o(" "+r.op+" "),t(r.children[1],n?s+.1:s),a.push(r.children[1])}s<i&&o(")"),r.type=n.Prefix,r.op="",r.children=a}(p,-1),_(p),o||u("\n"),{output:o,sourceMap:i};function _(t){t.glueToBlock&&(h(),t.glueToBlock==r.WithSpace&&u(" "));let d=l,p=o.length;switch(t.type){case n.Infix:e.U.oops("no infix should be left");break;case n.NewLine:u("\n"+s);break;case n.Block:!function(t){let n=t.noFinalNewline?"":"\n";if(0==t.children.length)return void m(" {\n\t\n}"+n);let r=e.U.clone(c[c.length-1]||{});c.push(r),s+="    "," "!=o[o.length-1]&&m(" ");m("{\n");for(let e of t.children)_(e);s=s.slice(4),h(),m("\n}"+n),c.pop()}(t);break;case n.Prefix:t.canIndentInside?u(t.op.replace(/\n/g,"\n"+s+"    ")):u(t.op),t.children.forEach(_);break;case n.Postfix:t.children.forEach(_),t.canIndentInside?u(t.op.replace(/\n/g,"\n"+s+"    ")):u(t.op)}let f=l,g=Math.max(o.length,1);if(t.id)if(a[t.id]){const e=a[t.id];e.startLine=Math.min(e.startLine,d),e.endLine=Math.max(e.endLine,f),e.startPos=Math.min(e.startPos,p),e.endPos=Math.max(e.endPos,g)}else{const e={id:t.id,startLine:d,startPos:p,endLine:f,endPos:g};a[t.id]=e,i.push(e)}}function m(e){u(e.replace(/\n/g,"\n"+s))}function h(){o=o.replace(/\n *$/,(function(){return l--,""}))}}function y(e){if("("!==e[0]||")"!==e[e.length-1])return!1;let t=1;for(let n=1;n<e.length;n++){const r=e[n];if("("===r)t++;else if(")"===r&&(t--,0===t))return n===e.length-1}return!1}t.flattenNode=h,t.isReservedWord=function(e){return-1!==i.indexOf(e)},t.isParenthesized=y}(e.blocks||(e.blocks={}))}(pxt||(pxt={})),function(e){!function(t){const n=[".","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];t.BLOCKLY_TILESET_TYPE="BLOCKLY_TILESET_TYPE",t.TILE_PREFIX="tile",t.TILE_NAMESPACE="myTiles",t.IMAGES_NAMESPACE="myImages",t.IMAGE_PREFIX="image",t.ANIMATION_NAMESPACE="myAnimations",t.ANIMATION_PREFIX="anim",t.SONG_NAMESPACE="mySongs",t.SONG_PREFIX="song";class r{constructor(e,t,n=0,r=0,i){this.width=e,this.height=t,this.x0=n,this.y0=r,this.width||(this.width=16),this.height||(this.height=16),this.buf=i||new Uint8ClampedArray(this.dataLength())}static fromData(e){return new r(e.width,e.height,e.x0,e.y0,e.data)}set(e,t,n){if(e<this.width&&t<this.height&&e>=0&&t>=0){const r=this.coordToIndex(e,t);this.setCore(r,n)}}get(e,t){if(e<this.width&&t<this.height&&e>=0&&t>=0){const n=this.coordToIndex(e,t);return this.getCore(n)}return 0}copy(e=0,t=0,n=this.width,i=this.height){const a=new r(n,i);a.x0=e,a.y0=t;for(let r=0;r<n;r++)for(let n=0;n<i;n++)a.set(r,n,this.get(e+r,t+n));return a}apply(e,t=!1){let n;for(let r=0;r<e.width;r++)for(let i=0;i<e.height;i++)n=e.get(r,i),!n&&t||this.set(e.x0+r,e.y0+i,n)}equals(e){if(this.width===e.width&&this.height===e.height&&this.x0===e.x0&&this.y0===e.y0&&this.buf.length===e.buf.length){for(let t=0;t<this.buf.length;t++)if(this.buf[t]!==e.buf[t])return!1;return!0}return!1}data(){return{width:this.width,height:this.height,x0:this.x0,y0:this.y0,data:this.buf}}resize(e,t){return p(this,e,t)}coordToIndex(e,t){return e+t*this.width}getCore(e){const t=Math.floor(e/2);return e%2==0?15&this.buf[t]:(240&this.buf[t])>>4}setCore(e,t){const n=Math.floor(e/2);this.buf[n]=e%2==0?240&this.buf[n]|15&t:15&this.buf[n]|(15&t)<<4}dataLength(){return Math.ceil(this.width*this.height/2)}}t.Bitmap=r;class i extends r{static fromData(e){return new i(e.width,e.height,e.x0,e.y0,e.data)}copy(e=0,t=0,n=this.width,r=this.height){const a=new i(n,r);a.x0=e,a.y0=t;for(let i=0;i<n;i++)for(let n=0;n<r;n++)a.set(i,n,this.get(e+i,t+n));return a}resize(e,t){return f(this,e,t)}getCore(e){return this.buf[e]}setCore(e,t){this.buf[e]=t}dataLength(){return this.width*this.height}}t.Tilemap=i;class a{constructor(e,t,n){this.tilemap=e,this.tileset=t,this.layers=n,this.nextId=0}cloneData(){const e=this.tilemap.copy(),t={tileWidth:this.tileset.tileWidth,tiles:this.tileset.tiles.map((e=>Object.assign(Object.assign({},e),{bitmap:r.fromData(e.bitmap).copy().data()})))},n=r.fromData(this.layers).copy().data();return new a(e,t,n)}equals(t){if(!this.tilemap.equals(t.tilemap)||this.tileset.tileWidth!=t.tileset.tileWidth||this.tileset.tiles.length!=t.tileset.tiles.length||!y(this.layers,t.layers))return!1;for(let n=0;n<this.tileset.tiles.length;n++)if(!e.assetEquals(this.tileset.tiles[n],t.tileset.tiles[n]))return!1;return!0}}t.TilemapData=a;function o(e){return s(atob(e.slice(e.indexOf(",")+1)))}function s(t){let n=t.charCodeAt(0),r=t.charCodeAt(1),i=t.charCodeAt(2);135===n&&(n=224|t.charCodeAt(1),r=t.charCodeAt(2)|t.charCodeAt(3)<<8,i=t.charCodeAt(4)|t.charCodeAt(5)<<8,t=t.slice(4));const a=new e.sprite.Bitmap(r,i);let o=4;if(225===n){let e=1,n=t.charCodeAt(o++);for(let s=0;s<r;++s)for(let r=0;r<i;++r)a.set(s,r,n&e?1:0),e<<=1,256==e&&(e=1,n=t.charCodeAt(o++))}else for(let e=0;e<r;e++){for(let n=0;n<i;n+=2){let r=t.charCodeAt(o++);a.set(e,n,15&r),n!=i-1&&a.set(e,n+1,r>>4&15)}for(;3&o;)o++}return a}function c(e,t){!(e=(e=(e=e.replace(/[ `]|(?:&#96;)|(?:&#9;)|(?:hex)/g,"").trim()).replace(/^["`\(\)]*/,"").replace(/["`\(\)]*$/,"")).replace(/&#10;/g,"\n"))&&t&&(e=t);const n=parseInt(e.substr(0,2),16)|parseInt(e.substr(2,2),16)<<8,r=parseInt(e.substr(4,2),16)|parseInt(e.substr(6,2),16)<<8,a=x(e.substring(8));return i.fromData({width:n,height:r,x0:0,y0:0,data:a})}function l(e){return`${d(e.width,2)}${d(e.height,2)}${k(e.data().data)}`}function u(e,t){return(e=e.replace(/[\[\]]/g,""))?e.split(",").filter((e=>!!e.trim())).map((e=>function(e,t){if(0===(e=e.trim()).indexOf("img")){const n=_(e);return t.createNewTile(n.data())}switch(e){case"myTiles.tile0":case"myTiles.transparency16":return t.getTransparency(16);case"myTiles.transparency8":return t.getTransparency(8);case"myTiles.transparency32":return t.getTransparency(32);default:return t.resolveTile(e)}}(e,t))):[]}function d(e,t){let n=e.toString(16);const r=t<<1;for(1&n.length&&(n="0"+n);n.length<r;)n+="0";return n}function p(e,t,n){const i=new r(t,n);return i.apply(e),i}function f(e,t,n){const r=new i(t,n);return r.apply(e),r}function _(e){const t=(e=(e=(e=e.replace(/[ `]|(?:&#96;)|(?:&#9;)|(?:img)/g,"").trim()).replace(/^["`\(\)]*/,"").replace(/["`\(\)]*$/,"")).replace(/&#10;/g,"\n")).split("\n"),n=[];let i=0;for(let e=0;e<t.length;e++){const r=t[e],a=[];for(let e=0;e<r.length;e++)switch(r[e]){case"0":case".":a.push(0);break;case"1":case"#":a.push(1);break;case"2":case"T":a.push(2);break;case"3":case"t":a.push(3);break;case"4":case"N":a.push(4);break;case"5":case"n":a.push(5);break;case"6":case"G":a.push(6);break;case"7":case"g":a.push(7);break;case"8":a.push(8);break;case"9":a.push(9);break;case"a":case"A":case"R":a.push(10);break;case"b":case"B":case"P":a.push(11);break;case"c":case"C":case"p":a.push(12);break;case"d":case"D":case"O":a.push(13);break;case"e":case"E":case"Y":a.push(14);break;case"f":case"F":case"W":a.push(15);break;default:if(!/\s/.test(r[e]))return}a.length&&(n.push(a),i=Math.max(i,a.length))}const a=n.length,o=new r(i,a);for(let e=0;e<a;e++){const t=n[e];for(let n=0;n<i;n++)n<t.length?o.set(n,e,t[n]):o.set(n,e,0)}return o}function m(e){let t="";switch(e){case"python":t='img("""';break;default:t="img`"}return t}function g(e){let t="";switch(e){case"python":t+='""")';break;default:t+="`"}return t}function h(e,t){if(!e||0===e.height||0===e.width)return"";let r=m(t);if(e){const t=e.width*e.height>300?"":" ";for(let i=0;i<e.height;i++){r+="\n";for(let a=0;a<e.width;a++)r+=n[e.get(a,i)]+t}}return r+="\n",r+=g(t),r}function y(t,n){return e.sprite.Bitmap.fromData(t).equals(e.sprite.Bitmap.fromData(n))}function v(e){switch(e){case 8:return"TileScale.Eight";case 16:return"TileScale.Sixteen";case 32:return"TileScale.ThirtyTwo";default:return Math.floor(Math.log2(e)).toString()}}function b(e){switch(e=e.replace(/\s/g,"")){case"TileScale.Eight":return 8;case"TileScale.Sixteen":return 16;case"TileScale.ThirtyTwo":return 32;default:return Math.pow(2,parseInt(e))}}function x(e){let t=new Uint8ClampedArray(e.length>>1);for(let n=0;n<e.length;n+=2)t[n>>1]=parseInt(e.slice(n,n+2),16);return t}function k(e){const t="0123456789abcdef";let n="";for(let r=0;r<e.length;++r)n+=t[e[r]>>4],n+=t[15&e[r]];return n}function S(e,t,n){e[t]=255&n,e[t+1]=n>>8&255}function T(e){const t=function(e){if(e){if(6===e.length)return parseInt("0x"+e);if(7===e.length)return parseInt("0x"+e.substr(1))}return 0}(e);return[C(t),E(t),D(t)]}function C(e){return e>>16&255}function E(e){return e>>8&255}function D(e){return 255&e}t.Bitmask=class{constructor(e,t){this.width=e,this.height=t,this.mask=new Uint8Array(Math.ceil(e*t/8))}set(e,t){const n=e+this.width*t,r=n>>3,i=7&n;this.mask[r]|=1<<i}get(e,t){const n=e+this.width*t,r=n>>3,i=7&n;return this.mask[r]>>i&1}},t.encodeTilemap=function(e,t,n){return e?`tiles.createTilemap(${function(e){return e?`hex\`${l(e)}\``:"hex``"}(e.tilemap)}, ${h(r.fromData(e.layers),t)}, [${e.tileset.tiles.map((e=>function(e,t,n){if(n&&n[e.id])return n[e.id];return e.id}(e,0,n)))}], ${v(e.tileset.tileWidth)})`:"null"},t.decodeTilemap=function(t,n,r){if(!(t=e.Util.htmlUnescape(t).trim()).trim())return null;const i=(t=(t=t.substr(t.indexOf("(")+1)).substr(0,t.lastIndexOf(")"))).substr(0,t.indexOf(",")),o=(t=t.substr(i.length+1)).substr(0,t.indexOf(",")),s=(t=t.substr(o.length+1)).substr(0,t.lastIndexOf("]")+1),l=t=t.substr(s.length+1);return new a(c(i),{tiles:u(s,r),tileWidth:b(l)},_(o).data())},t.trimTilemapTileset=function(e){const t=e.tileset.tiles.slice(),n=e.tilemap,r={};r[t[0].id]=!0;for(let e=0;e<n.width;e++)for(let i=0;i<n.height;i++)r[t[n.get(e,i)].id]=!0;const i=e.editedTiles||[],a=t.filter((e=>r[e.id]||"*"===e.id.charAt(0)||-1!==i.indexOf(e.id)));if(a.length===t.length)return;const o=[];for(let e=0;e<t.length;e++)o.push(a.indexOf(t[e]));for(let e=0;e<n.width;e++)for(let t=0;t<n.height;t++)n.set(e,t,o[n.get(e,t)]);e.tileset.tiles=a},t.isEmptyTilemap=function(e){const t=e.tileset.tiles,n=e.tilemap,r=t[0].id;for(let e=0;e<n.width;e++)for(let i=0;i<n.height;i++)if(t[n.get(e,i)].id!==r)return!1;return!0},t.computeAverageColor=function(e,t){const n=t.map(T),r=[0,0,0];let i=0;for(let t=0;t<e.width;t++)for(let a=0;a<e.height;a++){const o=e.get(t,a);if(o){++i;const e=n[o];r[0]+=e[0],r[1]+=e[1],r[2]+=e[2]}}return i?"#"+function(e){let t="";for(let n=0;n<e.length;++n)t+=("0"+e[n].toString(16)).slice(-2);return t}(r.map((e=>Math.floor(e/i)))):"#00000000"},t.getBitmap=function(e,t){const n=e.apis.byQName[t];return n?o(n.attributes.jresURL):null},t.getBitmapFromJResURL=o,t.hexToBitmap=s,t.filterItems=function(e,t){const n=(t=t.filter((e=>!!e)).map((e=>e.toLowerCase()))).filter((e=>0!==e.indexOf("!"))),r=t.filter((e=>0===e.indexOf("!")&&e.length>1)).map((e=>e.substring(1)));return e.filter((e=>{return t=e,n.every((e=>{const n=`?${e}`;return t.tags.some((t=>t===e||t===n))}))&&function(e){return r.every((t=>!e.tags.some((e=>e===t))))}(e);var t}))},t.getGalleryItems=function(n,r){let i=function(t,n){return e.Util.values(t.byQName).filter((e=>4===e.kind&&e.attributes.fixedInstance&&function(e,t,n){if(t==n)return!0;let r=e.byQName[t];return!(!r||!r.extendsTypes)&&r.extendsTypes.indexOf(n)>=0}(t,e.retType,n)))}(n.apis,r);return i=i.filter((e=>e.namespace!=t.TILE_NAMESPACE)),function(t){const n=new e.ImageConverter;t.forEach((e=>{e.attributes.jresURL&&!e.attributes.iconURL&&0==e.attributes.jresURL.indexOf("data:image/x-mkcd-f")&&(e.attributes.iconURL=n.convert(e.attributes.jresURL))}))}(i),i.map((t=>{const n=(t.attributes.tags||"").split(" ").filter((e=>!!e)).map((t=>e.Util.startsWith(t,"category-")?t:t.toLowerCase()));return{qName:t.qName,src:t.attributes.iconURL,alt:t.qName,tags:n}}))},t.base64EncodeBitmap=function(t){const n=r.fromData(t),i=pxtc.f4EncodeImg(t.width,t.height,4,((e,t)=>n.get(e,t)));return btoa(e.U.uint8ArrayToString(x(i)))},t.tilemapLiteralToTilemap=c,t.hexEncodeTilemap=l,t.formatByte=d,t.resizeBitmap=p,t.resizeTilemap=f,t.imageLiteralToBitmap=_,t.encodeAnimationString=function(t,n){const r=t.map((e=>e.data)),i=new Uint8ClampedArray(8+r[0].length*r.length);S(i,0,n),S(i,2,t[0].width),S(i,4,t[0].height),S(i,6,t.length);let a=8;return r.forEach((e=>{i.set(e,a),a+=e.length})),btoa(e.sprite.uint8ArrayToHex(i))},t.addMissingTilemapTilesAndReferences=function(e,t){const n=e.getProjectTiles(t.data.tileset.tileWidth,!0);t.data.projectReferences=[];for(const r of n.tiles)t.data.tileset.tiles.some((e=>e.id===r.id))||t.data.tileset.tiles.push(r),e.isAssetUsed(r,null,[t.id])&&t.data.projectReferences.push(r.id)},t.updateTilemapReferencesFromResult=function(t,n){const r=n.data;if(r.deletedTiles)for(const e of r.deletedTiles)t.deleteTile(e);if(r.editedTiles)for(const e of r.editedTiles){const n=r.tileset.tiles.findIndex((t=>t.id===e)),i=r.tileset.tiles[n];i&&(r.tileset.tiles[n]=t.updateTile(i))}for(let e=0;e<r.tileset.tiles.length;e++){const n=r.tileset.tiles[e];n.jresData||(r.tileset.tiles[e]=t.resolveTile(n.id))}e.sprite.trimTilemapTileset(r)},t.imageLiteralFromDimensions=function(e,t,r,i){let a=m(i);const o=e*t>300?"":" ";for(let i=0;i<t;i++){a+="\n";for(let t=0;t<e;t++)a+=n[r]+o}return a+="\n",a+=g(i),a},t.bitmapToImageLiteral=h,t.bitmapEquals=y,t.tileWidthToTileScale=v,t.tileScaleToTileWidth=b,t.hexToUint8Array=x,t.uint8ArrayToHex=k,t.colorStringToRGB=T}(e.sprite||(e.sprite={}))}(pxt||(pxt={})),function(e){!function(t){!function(n){const r=new RegExp(`^\\s*${t.TILE_NAMESPACE}\\s*\\.\\s*${t.TILE_PREFIX}(\\d+)\\s*$`);class i{constructor(e,t,n){this.tilemap=e,this.tileset=t,this.layers=n,this.nextId=0}}function a(e){return(e=e.replace(/[\[\]]/g,""))?e.split(",").filter((e=>!!e.trim())).map((e=>function(e){if(0===(e=e.trim()).indexOf("img")){return{data:t.imageLiteralToBitmap(e).data()}}const n=r.exec(e);if(n)return{data:null,projectId:Number(n[1])};return{data:null,qualifiedName:e}}(e))):[]}n.LegacyTilemapData=i,n.decodeTilemap=function(n,r){var o;if(!(null==(n=null===(o=e.Util.htmlUnescape(n))||void 0===o?void 0:o.trim())?void 0:n.trim()))return new i(new t.Tilemap(16,16),{tileWidth:16,tiles:[]},new t.Bitmap(16,16).data());const s=(n=(n=n.substr(n.indexOf("(")+1)).substr(0,n.lastIndexOf(")"))).substr(0,n.indexOf(",")),c=(n=n.substr(s.length+1)).substr(0,n.indexOf(",")),l=(n=n.substr(c.length+1)).substr(0,n.lastIndexOf("]")+1),u=n=n.substr(l.length+1);return new i(t.tilemapLiteralToTilemap(s),{tiles:a(l),tileWidth:t.tileScaleToTileWidth(u)},t.imageLiteralToBitmap(c).data())},n.tileToBlocklyVariable=function(e){return`${e.projectId};${e.data.width};${e.data.height};${pxtc.Util.toHex(e.data.data)}`},n.blocklyVariableToTile=function(e){const t=e.split(";");return 4!==t.length?null:{projectId:parseInt(t[0]),data:{width:parseInt(t[1]),height:parseInt(t[2]),data:new Uint8ClampedArray(pxtc.Util.fromHex(t[3])),x0:0,y0:0}}}}(t.legacy||(t.legacy={}))}(e.sprite||(e.sprite={}))}(pxt||(pxt={})),function(e){!function(t){class n{constructor(){this.items={}}removeItem(e){delete this.items[e]}getItem(e){return this.items[e]}setItem(e,t){this.items[e]=t}clear(){this.items={}}}class r{constructor(e){this.storageId=e,this.type="localstorage"}targetKey(e){return this.storageId+"/"+e}removeItem(e){window.localStorage.removeItem(this.targetKey(e))}getItem(e){return window.localStorage[this.targetKey(e)]}setItem(e,t){window.localStorage[this.targetKey(e)]=t}clear(){let e=this.targetKey(""),t=[];for(let n=0;n<window.localStorage.length;++n){let r=window.localStorage.key(n);0==r.indexOf(e)&&t.push(r)}t.forEach((e=>window.localStorage.removeItem(e)))}}function i(){if(e.appTarget)return e.appTarget.id;const t=window.pxtConfig;if(t)return t.targetId;const n=window.pxtTargetBundle;return n?n.id:""}let a;function o(){if(a)return;const t=i();let o=!1;if(!e.shell.isSandboxMode())try{const n=e.Util.guidGen();window.localStorage[t]=n;o=window.localStorage[t]===n}catch(e){}o?(a=new r(t),e.debug(`storage: local under ${t}`)):(a=new n,e.debug("storage: in memory"))}t.storageId=i,t.setLocal=function(e,t){o(),a.setItem(e,t)},t.getLocal=function(e){return o(),a.getItem(e)},t.removeLocal=function(e){o(),a.removeItem(e)},t.clearLocal=function(){o(),a.clear()}}(e.storage||(e.storage={}))}(pxt||(pxt={})),function(e){!function(t){!function(t){const n="http://localhost:3232/api/store/";function r(){return e.BrowserUtils.isLocalHostDev()&&!e.BrowserUtils.noSharedLocalStorage()}function i(){return e.BrowserUtils.isChromiumEdge()?"chromium-edge":e.BrowserUtils.browser()}t.getAsync=async function(t,a){if(r()){t+="-"+i();const r=await e.Util.requestAsync({url:`${n}${encodeURIComponent(t)}/${encodeURIComponent(a)}`,method:"GET",allowHttpErrors:!0});if(204===r.statusCode)throw new Error(`Missing ${a} not available in ${t}`);return r.json?r.json:r.text?r.text:void 0}{const n=e.storage.getLocal(`${t}:${a}`),r=e.Util.jsonTryParse(n);return r||n}},t.setAsync=async function(t,a,o){if(void 0===o)return void await e.storage.shared.delAsync(t,a);let s="";if(s="object"==typeof o?JSON.stringify(o):o.toString(),r()){t+="-"+i();const r={type:"object"==typeof o?"json":"text",val:s},c=JSON.stringify(r);await e.Util.requestAsync({url:`${n}${encodeURIComponent(t)}/${encodeURIComponent(a)}`,method:"POST",data:c})}else e.storage.setLocal(`${t}:${a}`,s)},t.delAsync=async function(t,a){r()?(t+="-"+i(),await e.Util.requestAsync({url:`${n}${encodeURIComponent(t)}/${encodeURIComponent(a)}`,method:"DELETE",allowHttpErrors:!0})):e.storage.removeLocal(`${t}:${a}`)}}(t.shared||(t.shared={}))}(e.storage||(e.storage={}))}(pxt||(pxt={})),function(e){function t(e){let t=0;for(let n=0;n<e.length;n++)if(" "===e.charAt(n))t++;else{if("\t"!==e.charAt(n))return t;t+=4}return 0}e.getSectionsFromMarkdownMetadata=function(e){const n=e.split(/\r?\n/);let r=[],i=null,a=null,o=null,s=[],c=0;for(const e of n)if(e.trim()){if(e.startsWith("#")){const t=/^(#+)\s*(.+)$/.exec(e);if(t){l(),i={headerKind:1===t[1].length?"single":2===t[1].length?"double":"triple",header:t[2],attributes:{}},a=null,o=null,c=0;continue}}if(i){const n=t(e),r=e.trim(),l=/^[*-]\s+(?:([^:]+):)?(.*)$/.exec(r);if(!l)continue;if(Math.abs(n-c)>1&&a){if(n>c){const e={key:a,items:[]};s.length?s[s.length-1].items.push(e):(i.listAttributes||(i.listAttributes={}),i.listAttributes[a]=e),a=null,s.push(e)}else{const e=s.pop();a&&o&&(null==e||e.items.push((a+":"+o).trim()),o=null)}c=n}l&&(l[1]?(a&&o&&(s.length?s[s.length-1].items.push((a+":"+o).trim()):i.attributes[a]=o.trim()),a=l[1].toLowerCase(),o=l[2]):a&&(o+=l[2]))}}else o&&(o+="\n");return l(),r;function l(){i&&(a&&o&&(s.length?s[s.length-1].items.push((a+":"+o).trim()):i.attributes[a]=o.trim()),r.push(i)),s=[]}}}(pxt||(pxt={})),function(e){!function(t){let n;!function(e){e[e.PROD=0]="PROD",e[e.STAGING=1]="STAGING",e[e.LOCAL=2]="LOCAL"}(n||(n={}));let r=n.STAGING;t.ABSOLUTE_LINKS={PROD_BETA:"https://arcade.makecode.com/beta--multiplayer",STAGING_BETA:"https://arcade.staging.pxt.io/beta--multiplayer",LOCAL:"http://localhost:3000"},t.RELATIVE_LINKS={PROD:"/--multiplayer",BETA:"/beta--multiplayer"},t.SHORT_LINKS={PROD:"https://aka.ms/a9",PROD_BETA:"https://aka.ms/a9b",STAGING:"https://aka.ms/a9s",STAGING_BETA:"https://aka.ms/a9sb"},t.RELATIVE_LINK=()=>{if(e.BrowserUtils.isLocalHostDev())switch(r){case n.PROD:return t.ABSOLUTE_LINKS.PROD_BETA;case n.STAGING:return t.ABSOLUTE_LINKS.STAGING_BETA;case n.LOCAL:return t.ABSOLUTE_LINKS.LOCAL}return window.location.pathname.startsWith("/beta")?t.RELATIVE_LINKS.BETA:t.RELATIVE_LINKS.PROD},t.SHORT_LINK=()=>{if(e.BrowserUtils.isLocalHostDev())switch(r){case n.PROD:return t.SHORT_LINKS.PROD_BETA;case n.STAGING:return t.SHORT_LINKS.STAGING_BETA;case n.LOCAL:return t.ABSOLUTE_LINKS.LOCAL}return window.location.host.endsWith(".staging.pxt.io")?window.location.pathname.startsWith("/beta")?t.SHORT_LINKS.STAGING_BETA:t.SHORT_LINKS.STAGING:window.location.pathname.startsWith("/beta")?t.SHORT_LINKS.PROD_BETA:t.SHORT_LINKS.PROD},t.makeHostLink=function(e,n){return`${n?t.SHORT_LINK():t.RELATIVE_LINK()}?host=${encodeURIComponent(e)}`},t.makeJoinLink=function(e,n){return`${n?t.SHORT_LINK():t.RELATIVE_LINK()}?join=${encodeURIComponent(e)}`}}(e.multiplayer||(e.multiplayer={}))}(pxt||(pxt={})),function(e){!function(t){!function(t){function n(e,t,n){const r=new Uint8Array(2);new Uint16Array(r.buffer)[0]=0|n,e[t]=r[0],e[t+1]=r[1]}function r(e,t){const n=new Uint8Array(2);return n[0]=e[t],n[1]=e[t+1],new Uint16Array(n.buffer)[0]}function i(e){const t=new Uint8Array(5+7*e.steps.length);t[0]=e.steps.length,n(t,1,e.startFrequency),n(t,3,e.startVolume);for(let r=0;r<e.steps.length;r++){const i=5+7*r;t[i]=e.steps[r].waveform,n(t,i+1,e.steps[r].frequency),n(t,i+3,e.steps[r].volume),n(t,i+5,e.steps[r].duration)}return t}function a(e,t,r){const i=new Uint8Array(5+e.notes.length);n(i,0,e.startTick),n(i,2,e.endTick),i[4]=e.notes.length;for(let n=0;n<e.notes.length;n++)i[5+n]=o(e.notes[n],t,r);return i}function o(e,t,n){if(n)return e.note;let r=0;return"flat"===e.enharmonicSpelling?r=1:"sharp"===e.enharmonicSpelling&&(r=2),e.note-12*(t-2)|r<<6}function s(e){return e.drums?function(e){const t=e.drums.map(i),r=t.reduce(((e,t)=>t.length+e),0),o=e.notes.map((e=>a(e,0,!0))),s=o.reduce(((e,t)=>t.length+e),0),c=new Uint8Array(6+r+s);c[0]=e.id,c[1]=1,n(c,2,r);let l=4;for(const e of t)c.set(e,l),l+=e.length;n(c,l,s),l+=2;for(const e of o)c.set(e,l),l+=e.length;return c}(e):function(e){const t=function(e){var t,r,i,a,o,s,c,l,u;const d=new Uint8Array(28);return d[0]=e.waveform,n(d,1,e.ampEnvelope.attack),n(d,3,e.ampEnvelope.decay),n(d,5,e.ampEnvelope.sustain),n(d,7,e.ampEnvelope.release),n(d,9,e.ampEnvelope.amplitude),n(d,11,(null===(t=e.pitchEnvelope)||void 0===t?void 0:t.attack)||0),n(d,13,(null===(r=e.pitchEnvelope)||void 0===r?void 0:r.decay)||0),n(d,15,(null===(i=e.pitchEnvelope)||void 0===i?void 0:i.sustain)||0),n(d,17,(null===(a=e.pitchEnvelope)||void 0===a?void 0:a.release)||0),n(d,19,(null===(o=e.pitchEnvelope)||void 0===o?void 0:o.amplitude)||0),d[21]=(null===(s=e.ampLFO)||void 0===s?void 0:s.frequency)||0,n(d,22,(null===(c=e.ampLFO)||void 0===c?void 0:c.amplitude)||0),d[24]=(null===(l=e.pitchLFO)||void 0===l?void 0:l.frequency)||0,n(d,25,(null===(u=e.pitchLFO)||void 0===u?void 0:u.amplitude)||0),d[27]=e.octave,d}(e.instrument),r=e.notes.map((t=>a(t,e.instrument.octave,!1))),i=r.reduce(((e,t)=>t.length+e),0),o=new Uint8Array(6+t.length+i);o[0]=e.id,o[1]=0,n(o,2,t.length);let s=4;o.set(t,s),s+=t.length,n(o,s,i),s+=2;for(const e of r)o.set(e,s),s+=e.length;return o}(e)}function c(e,t){return{waveform:e[t],ampEnvelope:{attack:r(e,t+1),decay:r(e,t+3),sustain:r(e,t+5),release:r(e,t+7),amplitude:r(e,t+9)},pitchEnvelope:{attack:r(e,t+11),decay:r(e,t+13),sustain:r(e,t+15),release:r(e,t+17),amplitude:r(e,t+19)},ampLFO:{frequency:e[t+21],amplitude:r(e,22)},pitchLFO:{frequency:e[t+24],amplitude:r(e,25)},octave:e[t+27]}}function l(e,t){return e[t+1]?function(e,t){const n={id:e[t],instrument:{ampEnvelope:{attack:0,decay:0,sustain:0,release:0,amplitude:0},waveform:0},notes:[],drums:[]},i=r(e,t+2);let a=t+4;for(;a<t+4+i;)n.drums.push(u(e,a)),a+=5+7*n.drums[n.drums.length-1].steps.length;const o=r(e,a);a+=2;for(;a<t+4+i+o;)n.notes.push(d(e,a,0,!0)),a+=5+n.notes[n.notes.length-1].notes.length;return[n,a]}(e,t):function(e,t){const n={id:e[t],instrument:c(e,t+4),notes:[]},i=t+4+r(e,t+2),a=r(e,i);let o=i+2;for(;o<i+2+a;)n.notes.push(d(e,o,n.instrument.octave,!1)),o+=5+n.notes[n.notes.length-1].notes.length;return[n,o]}(e,t)}function u(e,t){const n={startFrequency:r(e,t+1),startVolume:r(e,t+3),steps:[]};for(let i=0;i<e[t];i++){const a=t+5+7*i;n.steps.push({waveform:e[a],frequency:r(e,a+1),volume:r(e,a+3),duration:r(e,a+5)})}return n}function d(e,t,n,i){const a={startTick:r(e,t),endTick:r(e,t+2),notes:[]};for(let r=0;r<e[t+4];r++)a.notes.push(p(e[t+5+r],n,i));return a}function p(e,t,n){const r=e>>6,i={note:n?e:(63&e)+12*(t-2),enharmonicSpelling:"normal"};return 1===r?i.enharmonicSpelling="flat":2===r&&(i.enharmonicSpelling="sharp"),i}function f(e,t){if(typeof e!=typeof t)return!1;if("object"!=typeof e)return e===t;if(Array.isArray(e)){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!f(e[n],t[n]))return!1;return!0}const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(const i of n){if(-1===r.indexOf(i))return!1;if(!f(e[i],t[i]))return!1}return!0}function _(e){return{ticksPerBeat:8,beatsPerMeasure:4,beatsPerMinute:120,measures:e,tracks:[{id:0,name:lf("Dog"),notes:[],iconURI:"music-editor/dog.png",instrument:{waveform:1,octave:4,ampEnvelope:{attack:10,decay:100,sustain:500,release:100,amplitude:1024},pitchLFO:{frequency:5,amplitude:0}}},{id:1,name:lf("Duck"),notes:[],iconURI:"music-editor/duck.png",instrument:{waveform:15,octave:4,ampEnvelope:{attack:5,decay:530,sustain:705,release:450,amplitude:1024},pitchEnvelope:{attack:5,decay:40,sustain:0,release:100,amplitude:40},ampLFO:{frequency:3,amplitude:20},pitchLFO:{frequency:6,amplitude:2}}},{id:2,name:lf("Cat"),notes:[],iconURI:"music-editor/cat.png",instrument:{waveform:12,octave:5,ampEnvelope:{attack:150,decay:100,sustain:365,release:400,amplitude:1024},pitchEnvelope:{attack:120,decay:300,sustain:0,release:100,amplitude:50},pitchLFO:{frequency:10,amplitude:6}}},{id:3,name:lf("Fish"),notes:[],iconURI:"music-editor/fish.png",instrument:{waveform:1,octave:3,ampEnvelope:{attack:220,decay:105,sustain:1024,release:350,amplitude:1024},ampLFO:{frequency:5,amplitude:100},pitchLFO:{frequency:1,amplitude:4}}},{id:4,name:lf("Car"),notes:[],iconURI:"music-editor/car.png",instrument:{waveform:16,octave:4,ampEnvelope:{attack:5,decay:100,sustain:1024,release:30,amplitude:1024},pitchLFO:{frequency:10,amplitude:4}}},{id:5,name:lf("Computer"),notes:[],iconURI:"music-editor/computer.png",instrument:{waveform:15,octave:2,ampEnvelope:{attack:10,decay:100,sustain:500,release:10,amplitude:1024}}},{id:6,name:lf("Burger"),notes:[],iconURI:"music-editor/burger.png",instrument:{waveform:1,octave:2,ampEnvelope:{attack:10,decay:100,sustain:500,release:100,amplitude:1024}}},{id:7,name:lf("Cherry"),notes:[],iconURI:"music-editor/cherry.png",instrument:{waveform:2,octave:3,ampEnvelope:{attack:10,decay:100,sustain:500,release:100,amplitude:1024}}},{id:8,name:lf("Lemon"),notes:[],iconURI:"music-editor/lemon.png",instrument:{waveform:14,octave:2,ampEnvelope:{attack:5,decay:70,sustain:870,release:50,amplitude:1024},pitchEnvelope:{attack:10,decay:45,sustain:0,release:100,amplitude:20},ampLFO:{frequency:1,amplitude:50},pitchLFO:{frequency:2,amplitude:1}}},{id:9,name:lf("Drums"),notes:[],iconURI:"music-editor/explosion.png",instrument:{waveform:11,octave:4,ampEnvelope:{attack:10,decay:100,sustain:500,release:100,amplitude:1024}},drums:[{startFrequency:100,startVolume:1024,steps:[{waveform:3,frequency:120,duration:10,volume:1024},{waveform:3,frequency:1,duration:100,volume:0}]},{startFrequency:200,startVolume:1024,steps:[{frequency:0,volume:0,duration:100,waveform:1}]},{startFrequency:100,startVolume:1024,steps:[{frequency:0,volume:0,duration:250,waveform:1}]},{startFrequency:175,startVolume:1024,steps:[{waveform:1,frequency:200,duration:10,volume:1024},{waveform:1,frequency:150,duration:20,volume:1024},{waveform:5,frequency:1,duration:20,volume:100},{waveform:5,frequency:1,duration:300,volume:0}]},{startFrequency:220,startVolume:1024,steps:[{waveform:1,frequency:250,duration:10,volume:1024},{waveform:1,frequency:200,duration:20,volume:1024},{waveform:5,frequency:2e3,duration:20,volume:100},{waveform:5,frequency:2e3,duration:200,volume:0}]},{startFrequency:400,startVolume:500,steps:[{frequency:450,volume:500,duration:10,waveform:5},{frequency:400,volume:20,duration:20,waveform:5}]},{startFrequency:400,startVolume:0,steps:[{frequency:450,volume:500,duration:5,waveform:5},{frequency:900,volume:5,duration:50,waveform:5},{frequency:900,volume:0,duration:250,waveform:5}]},{startFrequency:400,startVolume:0,steps:[{frequency:450,volume:500,duration:5,waveform:5},{frequency:900,volume:200,duration:50,waveform:5},{frequency:900,volume:5,duration:100,waveform:5},{frequency:900,volume:0,duration:400,waveform:5}]},{startFrequency:400,startVolume:0,steps:[{frequency:450,volume:500,duration:5,waveform:5},{frequency:900,volume:200,duration:100,waveform:5},{frequency:900,volume:5,duration:200,waveform:5},{frequency:900,volume:0,duration:500,waveform:5}]},{startFrequency:3500,startVolume:1024,steps:[{frequency:4e3,volume:0,duration:10,waveform:4},{frequency:3500,volume:800,duration:1,waveform:4},{frequency:4e3,volume:0,duration:40,waveform:4},{frequency:3500,volume:400,duration:1,waveform:4},{frequency:4e3,volume:0,duration:40,waveform:4}]},{startFrequency:2e3,startVolume:1024,steps:[{frequency:1800,volume:15,duration:100,waveform:4},{frequency:1800,volume:0,duration:200,waveform:4}]},{startFrequency:200,startVolume:200,steps:[{frequency:125,volume:200,duration:25,waveform:14},{frequency:100,volume:15,duration:50,waveform:14},{frequency:120,volume:0,duration:250,waveform:14}]},{startFrequency:300,startVolume:200,steps:[{frequency:225,volume:200,duration:25,waveform:14},{frequency:200,volume:15,duration:50,waveform:14},{frequency:220,volume:0,duration:250,waveform:14}]},{startFrequency:500,startVolume:200,steps:[{frequency:425,volume:200,duration:25,waveform:14},{frequency:400,volume:15,duration:50,waveform:14},{frequency:420,volume:0,duration:250,waveform:14}]},{startFrequency:200,startVolume:1024,steps:[{frequency:75,volume:0,duration:200,waveform:1}]},{startFrequency:300,startVolume:1024,steps:[{frequency:200,volume:0,duration:200,waveform:1}]},{startFrequency:400,startVolume:1024,steps:[{frequency:300,volume:0,duration:200,waveform:1}]},{startFrequency:200,startVolume:1024,steps:[{frequency:200,volume:15,duration:100,waveform:4},{frequency:150,volume:0,duration:200,waveform:4}]},{startFrequency:450,startVolume:1024,steps:[{frequency:350,volume:15,duration:100,waveform:4},{frequency:300,volume:0,duration:100,waveform:4}]},{startFrequency:2500,startVolume:1024,steps:[{frequency:2500,volume:100,duration:150,waveform:4},{frequency:2550,volume:0,duration:500,waveform:4}]},{startFrequency:3e3,startVolume:1024,steps:[{frequency:3e3,volume:100,duration:300,waveform:4},{frequency:3060,volume:0,duration:500,waveform:4}]},{startFrequency:800,startVolume:0,steps:[{frequency:800,volume:1024,duration:10,waveform:4},{frequency:800,volume:0,duration:490,waveform:4}]},{startFrequency:400,startVolume:0,steps:[{frequency:400,volume:1024,duration:10,waveform:4},{frequency:400,volume:0,duration:400,waveform:4}]},{startFrequency:2e3,startVolume:1024,steps:[{frequency:2e3,volume:100,duration:150,waveform:16},{frequency:2e3,volume:0,duration:200,waveform:16}]}]}]}}t.encodeSongToHex=function(t){const r=function(e){const t=e.tracks.filter((e=>e.notes.length>0)).map(s),r=t.reduce(((e,t)=>t.length+e),0),i=new Uint8Array(7+r);i[0]=0,n(i,1,e.beatsPerMinute),i[3]=e.beatsPerMeasure,i[4]=e.ticksPerBeat,i[5]=e.measures,i[6]=t.length;let a=7;for(const e of t)i.set(e,a),a+=e.length;return i}(t);return e.U.toHex(r)},t.decodeSongFromHex=function(t){return function(e){const t={beatsPerMinute:r(e,1),beatsPerMeasure:e[3],ticksPerBeat:e[4],measures:e[5],tracks:[]};let n=7;for(;n<e.length;){const[r,i]=l(e,n);n=i,t.tracks.push(r)}return t}(e.U.fromHex(t))},t.cloneSong=function(e){return Object.assign(Object.assign({},e),{tracks:e.tracks.map((e=>Object.assign(Object.assign({},e),{instrument:e.instrument&&Object.assign(Object.assign({},e.instrument),{ampEnvelope:Object.assign({},e.instrument.ampEnvelope),pitchEnvelope:e.instrument.pitchEnvelope&&Object.assign({},e.instrument.pitchEnvelope),ampLFO:e.instrument.ampLFO&&Object.assign({},e.instrument.ampLFO),pitchLFO:e.instrument.pitchLFO&&Object.assign({},e.instrument.pitchLFO)}),drums:e.drums&&e.drums.map((e=>Object.assign(Object.assign({},e),{steps:e.steps.map((e=>Object.assign({},e)))}))),notes:e.notes.map((e=>Object.assign(Object.assign({},e),{notes:e.notes.slice()})))})))})},t.songEquals=function(e,t){return f(e,t)},t.inflateSong=function(e){const t=_(1);e.tracks=t.tracks.map(((t,n)=>{const r=e.tracks.find((e=>e.id===n));return r&&(t.notes=r.notes),t}))},t.getSongInfo=function(e){return{ticksPerBeat:e.ticksPerBeat,beatsPerMeasure:e.beatsPerMeasure,beatsPerMinute:e.beatsPerMinute,measures:e.measures}},t.getEmptySong=_}(t.music||(t.music={}))}(e.assets||(e.assets={}))}(pxt||(pxt={})),function(e){const t=["name","version","description","license","dependencies","files","testFiles","testDependencies","fileDependencies","public","targetVersions","supportedTargets","preferredEditor","languageRestriction","additionalFilePath","additionalFilePaths"];class n{constructor(e,t,n,r,i){this.id=e,this._verspec=t,this.parent=n,this.depName=i,this.level=-1,this.isLoaded=!1,this.ignoreTests=!1,this.cppOnly=!1,r&&(this.level=r.level+1),this.addedBy=[r]}static stringifyConfig(e){const n=e,r={};for(const e of t)n.hasOwnProperty(e)&&(r[e]=n[e]);for(const e of Object.keys(n))r.hasOwnProperty(e)||(r[e]=n[e]);return JSON.stringify(r,null,4)+"\n"}static parseAndValidConfig(t){const n=e.Util.jsonTryParse(t);return n&&void 0!==n.name&&"string"==typeof n.name&&n.files&&Array.isArray(n.files)&&n.files.every((e=>"string"==typeof e))&&n.dependencies&&Object.keys(n.dependencies).every((e=>"string"==typeof n.dependencies[e]))&&n}static async getConfigAsync(t,n,r){if(e.github.isGithubId(r)){const t=e.github.parseRepoId(r),n=await e.packagesConfigAsync();return await e.github.repoAsync(t.fullName,n)?await e.github.pkgConfigAsync(t.fullName,t.tag,n):null}if(r.startsWith("workspace:")){r.slice("workspace:".length);return null}if(!r.startsWith("pub:")){const i=e.patching.upgradePackageReference(t,n,r),a=e.appTarget.bundledpkgs[i];return JSON.parse(a[e.CONFIG_NAME])}{const t=r.slice("pub:".length);try{const n=await e.Cloud.downloadScriptFilesAsync(t);return JSON.parse(n[e.CONFIG_NAME])}catch(t){return e.log(`Unable to fetch files for published script '${r}'`),null}}}static corePackages(){const t=e.appTarget.bundledpkgs;return Object.keys(t).map((n=>JSON.parse(t[n][e.CONFIG_NAME]))).filter((e=>!!e))}disablesVariant(e){return this.config&&this.config.disablesVariants&&this.config.disablesVariants.indexOf(e)>=0}invalid(){return/^invalid:/.test(this.version())}version(){return this.resolvedVersion||this._verspec}verProtocol(){let e=this.version().split(":");return e.length>1?e[0]:""}verArgument(){let e=this.verProtocol();return e?this.version().slice(e.length+1):this.version()}targetVersion(){return this.parent&&this.parent!=this?this.parent.targetVersion():this.config.targetVersions?this.config.targetVersions.target:void 0}async commonDownloadAsync(){const t=this.verProtocol();let n;if("pub"==t)n=await e.Cloud.downloadScriptFilesAsync(this.verArgument());else if("github"==t){const t=await e.packagesConfigAsync();n=(await e.github.downloadPackageAsync(this.verArgument(),t)).files}else if("embed"==t)n=e.getEmbeddedScript(this.verArgument());else if("pkg"==t){const t=(this.parent||this).readFile(this.verArgument()),r=e.U.jsonTryParse(t);r||e.log(`unable to find ${this.verArgument()}`),n=r}return n}writeAssetPackFiles(){const t=JSON.parse(JSON.stringify(this.config));t.files=t.files.filter((e=>e.endsWith(".jres"))),t.files.push("gallery.ts"),t.dependencies={},t.assetPack=!0,this.config=t,this.saveConfig();let n="";for(const r of t.files){const t=this.readFile(r),i=e.U.jsonTryParse(t);if(i){const[t,a]=e.emitGalleryDeclarations(i,this.getNamespaceName());this.writeFile(r,JSON.stringify(t,null,4)),n+=a}}this.writeFile("gallery.ts",n)}getNamespaceName(){let e=this,t=e.addedBy[0];const n=[];for(;t&&t!==e;)e.depName&&n.push(e.depName),e=t,t=e.addedBy[0];return n.reverse().map((e=>ts.pxtc.escapeIdentifier(e))).join(".")}host(){return this.parent._host}readFile(e){return this.host().readFile(this,e)}writeFile(e,t){this.host().writeFile(this,e,t,!0)}readGitJson(){const t=this.readFile(e.github.GIT_JSON);return e.Util.jsonTryParse(t)}resolveDep(e){return this.parent.deps.hasOwnProperty(e)?this.parent.deps[e]:null}saveConfig(){const t=e.U.clone(this.config);delete t.additionalFilePaths;const n=e.Package.stringifyConfig(t);this.host().writeFile(this,e.CONFIG_NAME,n)}setPreferredEditor(e){this.config.preferredEditor!=e&&(this.config.preferredEditor=e,this.saveConfig())}getPreferredEditor(){let t=this.config.preferredEditor;if(!t){if(!(this.getFiles().indexOf(e.MAIN_BLOCKS)>=0))return e.JAVASCRIPT_PROJECT_NAME;const t=this.readFile(e.MAIN_BLOCKS),n=this.readFile(e.MAIN_TS);return!t&&n?e.JAVASCRIPT_PROJECT_NAME:e.BLOCKS_PROJECT_NAME}return t}parseJRes(t={}){for(const n of this.getFiles())e.U.endsWith(n,".jres")&&r(JSON.parse(this.readFile(n)),t);return t}isAssetPack(){var e;return this.level>0&&!!(null===(e=this.config)||void 0===e?void 0:e.assetPack)}resolveVersionAsync(){var t;let n=this._verspec;if(e.getEmbeddedScript(this.id))this.resolvedVersion=n="embed:"+this.id;else if(n&&"*"!=n){if("github"==this.verProtocol()){const r=e.github.parseRepoId(this._verspec);if(r&&!r.tag&&this.parent){e.debug("dep: unbound github extensions, trying to resolve tag");const i=e.semver.sortLatestTags(e.Util.values((null===(t=this.parent)||void 0===t?void 0:t.deps)||{}).map((t=>e.github.parseRepoId(t.version()))).filter((e=>(null==e?void 0:e.slug)===r.slug)).map((e=>e.tag)))[0];i&&(r.tag=i,this.resolvedVersion=n=e.github.stringifyRepo(r),e.debug(`dep: github patched ${this._verspec} to ${n}`))}}}else this.configureAsInvalidPackage(lf("version not specified for {0}",this.id)),n=this._verspec;return Promise.resolve(n)}downloadAsync(){return this.resolveVersionAsync().then((t=>{if(this.invalid())e.debug(`skip download of invalid package ${this.id}`);else if(/^embed:/.test(t)||this.installedVersion!=t)return e.debug("downloading "+t),this.host().downloadPackageAsync(this).then((()=>{this.loadConfig(),this.isAssetPack()&&this.writeAssetPackFiles(),e.debug(`installed ${this.id} /${t}`)}))}))}loadConfig(){if(0!=this.level&&this.invalid())return;const t=this.readFile(e.CONFIG_NAME);t||e.U.userError(`extension ${this.id} is missing ${e.CONFIG_NAME}`),this.parseConfig(t),0!=this.level&&(this.installedVersion=this.version()),this.saveConfig()}validateConfig(){this.config.dependencies||e.U.userError("Missing dependencies in config of: "+this.id),Array.isArray(this.config.files)||e.U.userError("Missing files in config of: "+this.id),"string"==typeof this.config.name&&this.config.name||(this.config.name=lf("Untitled")),this.config.targetVersions&&this.config.targetVersions.target&&this.config.targetVersions.targetId===e.appTarget.id&&e.appTarget.versions&&e.semver.majorCmp(this.config.targetVersions.target,e.appTarget.versions.target)>0&&e.U.userError(lf("{0} requires target version {1} (you are running {2})",this.config.name,this.config.targetVersions.target,e.appTarget.versions.target))}isPackageInUse(t,n=this.readFile(e.MAIN_TS)){let r=null;const i=e.patching.computePatches(this.targetVersion(),"missingPackage");return i&&i.forEach((e=>{Object.keys(e.map).forEach((n=>{e.map[n]===t&&(r=new RegExp(n,"g"))}))})),r||(r=new RegExp(t+"\\.","g")),r.test(n)}upgradePackagesAsync(){return this.config||this.loadConfig(),e.packagesConfigAsync().then((t=>{let n=0,r={};return e.U.iterMap(this.config.dependencies,((i,a)=>{if(e.github.isGithubId(a)){const o=e.github.upgradedPackageReference(t,a);o&&o!=a&&(e.log(`upgrading dep ${i}: ${a} -> ${o}`),r[a]=o,this.config.dependencies[i]=o,n++)}})),n&&this.saveConfig(),n&&r}))}getMissingPackages(t,n){const r=e.patching.computePatches(this.targetVersion(),"missingPackage"),i={};return n&&r&&r.forEach((e=>{Object.keys(e.map).forEach((r=>{const a=new RegExp(r,"g"),o=e.map[r];n.replace(a,(e=>(t.dependencies[o]||(i[o]="*"),"")))}))})),i}findConflictsAsync(t,r){let i,a=[];return Promise.resolve().then((()=>"string"==typeof t?n.getConfigAsync(this.targetVersion(),t,r):Promise.resolve(t))).then((t=>{var n;if(i=t,i){const t=i.yotta?e.U.jsonFlatten(i.yotta.config):null;this.parent.sortedDeps().forEach((n=>{if(i.core&&n.config.core&&i.name!=n.config.name){const t=new e.cpp.PkgConflictError(lf("conflict between core extensions {0} and {1}",i.name,n.id));return t.pkg0=n,void a.push(t)}let o=!1;if(t){const r=n.config||JSON.parse(n.readFile(e.CONFIG_NAME));if(!!r&&!!r.yotta&&!!n.config.yotta.config){const s=e.U.jsonFlatten(r.yotta.config);for(const c of Object.keys(t)){const l=s[c],u=i.yotta.configIsJustDefaults||r.yotta.configIsJustDefaults;if(s.hasOwnProperty(c)&&l!==t[c]&&!u&&(!n.parent.config.yotta||!n.parent.config.yotta.ignoreConflicts)){const t=new e.cpp.PkgConflictError(lf("conflict on yotta setting {0} between extensions {1} and {2}",c,i.name,n.id));t.pkg0=n,t.settingName=c,a.push(t),o=!0}}}}if(!o&&i.name===n.id&&n._verspec!==r&&!/^file:/.test(n._verspec)&&!/^file:/.test(r)){const t=/^github:/.test(n._verspec)&&e.github.parseRepoId(n._verspec),i=/^github:/.test(r)&&e.github.parseRepoId(r);if(!t||!i||t.fullName!==i.fullName||i.tag&&e.semver.strcmp(t.tag,i.tag)<0){const t=new e.cpp.PkgConflictError(lf("version mismatch for extension {0} (added: {1}, adding: {2})",n.id,n._verspec,r));t.pkg0=n,t.isVersionConflict=!0,a.push(t)}}}))}return Object.keys(null!==(n=null==i?void 0:i.dependencies)&&void 0!==n?n:{}).reduce(((e,t)=>e.then((()=>this.findConflictsAsync(t,i.dependencies[t]))).then((e=>a.push.apply(a,e)))),Promise.resolve())})).then((()=>{const t=e=>{const n=[];return e.addedBy.forEach((e=>{e.id!==this.id&&(n.push.apply(t(e)),n.push(e))})),n},n=[];return a.forEach((a=>{n.push.apply(n,t(a.pkg0).map((t=>{const n=new e.cpp.PkgConflictError(a.isVersionConflict?lf("a dependency of {0} has a version mismatch with extension {1} (added: {1}, adding: {2})",t.id,i.name,a.pkg0._verspec,r):lf("conflict on yotta setting {0} between extensions {1} and {2}",a.settingName,i.name,a.pkg0.id));return n.pkg0=t,n})))})),a.push.apply(a,n),a=a.filter(((e,t)=>{for(let n=0;n<t;++n)if(e.pkg0.id===a[n].pkg0.id)return!1;return!0})),a}))}configureAsInvalidPackage(t){e.log(`invalid package ${this.id}: ${t}`),this._verspec="invalid:"+this.id,this.config={name:this.id,description:t,dependencies:{},files:[]}}parseConfig(t,n){try{const e=JSON.parse(t);this.config=e}catch(t){this.configureAsInvalidPackage(lf("Syntax error in pxt.json")),e.tickEvent("package.invalidConfigEncountered")}const r=JSON.stringify(this.config);for(const t in this.config.dependencies){const n=e.patching.upgradePackageReference(this.targetVersion(),t,this.config.dependencies[t]);n!=t&&(delete this.config.dependencies[t],n&&(this.config.dependencies[n]="*"))}n&&(this.config.targetVersions={target:n}),JSON.stringify(this.config)!=r&&this.saveConfig(),this.validateConfig()}patchCorePackage(){e.Util.assert(e.appTarget.simulator&&e.appTarget.simulator.dynamicBoardDefinition),e.Util.assert(0==this.level);const t=Object.keys(this.config.dependencies).filter((t=>!!t&&(t==e.BLOCKS_PROJECT_NAME||t==e.JAVASCRIPT_PROJECT_NAME||JSON.parse((e.appTarget.bundledpkgs[t]||{})[e.CONFIG_NAME]||"{}").core)));if(0==t.length){const t=e.Package.corePackages();t.length&&this.config.dependencies[t[0].name]}else t.length>1&&(t.pop(),t.forEach((t=>{e.log(`removing core package ${t}`),delete this.config.dependencies[t]})))}resolvedDependencies(){return Object.keys(this.dependencies()).map((e=>this.resolveDep(e)))}dependencies(t=!1){if(!this.config)return{};const n=e.Util.clone(this.config.dependencies||{});return 0==this.level&&this.config.testDependencies&&e.Util.iterMap(this.config.testDependencies,((t,r)=>{("*"!=r||e.appTarget.bundledpkgs[t])&&(n[t]=r)})),t&&this.config.cppDependencies&&e.Util.jsonMergeFrom(n,this.config.cppDependencies),n}async loadAsync(t=!1,r){var i;if(this.isLoaded)return;0!=this.level||e.appTarget.multiVariants||e.setAppTargetVariant(null),this.isLoaded=!0;const a=this.readFile(e.CONFIG_NAME);if(null==a?t||e.U.userError("Package not installed: "+this.id+", did you forget to run `pxt install`?"):this.parseConfig(a),0!=this.level||t||await this.upgradePackagesAsync(),t&&(await this.downloadAsync(),0!==this.level&&!this.isAssetPack()))for(const e of this.addedBy)if(null===(i=e.config.assetPacks)||void 0===i?void 0:i[this.id]){this.writeAssetPackFiles();break}if(0==this.level&&t){const t=await this.upgradePackagesAsync();t&&(Object.keys(t).forEach((t=>e.tickEvent("package.doubleload",{extension:t}))),e.log("upgraded, downloading again"),e.debug(t),await this.downloadAsync())}if(e.appTarget.simulator&&e.appTarget.simulator.dynamicBoardDefinition&&(0==this.level&&this.patchCorePackage(),this.config.compileServiceVariant&&e.setAppTargetVariant(this.config.compileServiceVariant),this.config.files.indexOf("board.json")>=0)){const t=e.appTarget.simulator.boardDefinition=JSON.parse(this.readFile("board.json"));t.id=this.config.name,e.appTarget.appTheme.boardName=t.boardName||lf("board"),e.appTarget.appTheme.driveDisplayName=t.driveDisplayName||lf("DRIVE");let n=t=>{let n=/^pkg:\/\/(.*)/.exec(t);if(n){let t=n[1],r=this.readFile(t);return e.U.toDataUri(r,e.U.getMime(t))}return t},r=e.appTarget.simulator.boardDefinition;if("object"==typeof r.visual){let e=r.visual;e.image=n(e.image),e.outlineImage=n(e.outlineImage)}}const o=(t,n)=>{var r;if(e.debug(`version spec mismatch: ${t._verspec} != ${n}`),/^github:/.test(t._verspec)&&/^github:/.test(n)){const i=e.github.parseRepoId(t._verspec),a=e.github.parseRepoId(n);if((null==i?void 0:i.slug)&&(null==i?void 0:i.slug)===(null==a?void 0:a.slug)){const o=(null==i?void 0:i.tag)||(null===(r=t.config)||void 0===r?void 0:r.version),s=a.tag;if(o&&!s)return void e.debug(`unversioned ${n}, using ${o}`);const c=e.semver.strcmp(o,a.tag);if(0==c)return void e.debug(`resolved version are ${o}`);if(c>0)return void e.debug(`auto-upgraded ${n} to ${o}`)}}/^file:/.test(t._verspec)||/^file:/.test(n)?e.debug("ignore file: mismatch issues"):t.configureAsInvalidPackage(lf("version mismatch"))},s=async(r,i,a=!1)=>{r||(r=i.dependencies(a)),e.debug(`deps: ${i.id}->${Object.keys(r).join(", ")}`),r=e.github.resolveMonoRepoVersions(r),e.debug(`deps: resolved ${i.id}->${Object.keys(r).join(", ")}`);for(let s of Object.keys(r)){let c=r[s]||"*";e.debug(`dep: load ${i.id}.${s}${a?"++":""}: ${c}`),"hw"==s&&e.hwVariant&&(s="hw---"+e.hwVariant);const l=e.github.parseRepoId(c);if(null==l?void 0:l.slug){const t=Object.values(i.parent.deps).map((t=>e.github.parseRepoId(t._verspec))).filter((e=>(null==e?void 0:e.slug)===l.slug)).map((e=>e.tag)).reduce(((t,n)=>e.semver.strcmp(t,n)>0?t:n),"0.0.0");e.debug(`dep: common repo ${l.slug} version found ${t}`),e.semver.strcmp(t,"0.0.0")>0&&(!l.tag||e.semver.strcmp(t,l.tag)>0)&&(e.debug(`dep: upgrade from ${l.tag} to ${t}`),l.tag=t,c=e.github.stringifyRepo(l,!0))}let u=i.resolveDep(s);if(u){if(u.invalid()||u._verspec===c||o(u,c),u.invalid()){u.level=Math.min(u.level,i.level+1),u.addedBy.push(i);continue}a||(u.level=Math.min(u.level,i.level+1),u.addedBy.push(i))}else u=new n(s,c,i.parent,i,s),a&&(u.cppOnly=!0),i.parent.deps[s]=u,i.parent.deps[s.replace(/---.*/,"")]=u,await u.loadAsync(t)}};if(await s(null,this),this.config.palette&&e.appTarget.runtime&&(e.appTarget.runtime.palette=e.U.clone(this.config.palette),this.config.paletteNames&&(e.appTarget.runtime.paletteNames=this.config.paletteNames)),this.config.screenSize&&e.appTarget.runtime&&(e.appTarget.runtime.screenSize=e.U.clone(this.config.screenSize)),0===this.level){const t=this.readFile(e.MAIN_TS);if(t){const n=this.getMissingPackages(this.config,t);let r=!1;for(const t of Object.keys(n)){const i=await this.findConflictsAsync(t,n[t]);if(i.length){const n=i.map((e=>e.pkg0.id)).join(", "),r=i.map((e=>e.settingName)).filter((e=>!!e)).join(", ");e.log(`skipping missing package ${t} because it conflicts with the following packages: ${n} (conflicting settings: ${r})`)}else{e.log(`adding missing package ${t}`),r=!0,this.config.dependencies[t]="*";const i={};i[t]=n[t],await s(i,this)}}r&&(this.saveConfig(),this.validateConfig())}await Promise.all(e.U.values(this.parent.deps).map((e=>s(null,e,!0))))}e.debug(`  installed ${this.id}`)}getFiles(){let t;t=0!=this.level||this.ignoreTests?this.config.files.slice(0):this.config.files.concat(this.config.testFiles||[]);const r=this.config.fileDependencies;return this.config.fileDependencies&&(t=t.filter((t=>{const i=r=>{if("!"==(r=r.trim())[0])return!i(r.slice(1));if(/^[\w-]+$/.test(r)){const e=this.parent.resolveDep(r);return!(!e||e.cppOnly)}const a=/^target:(\w+)$/.exec(r);return a?a[1]==e.appTarget.id||a[1]==e.appTarget.platformid:(n.depWarnings[r]||(n.depWarnings[r]=!0,e.log(`invalid dependency expression: ${r} in ${this.id}/${t}`)),!1)},a=e.U.lookup(r,t);return!a||!a.trim()||a.split("||").some((e=>e.split("&&").every(i)))}))),t}addSnapshot(t,n=[""]){for(let r of this.getFiles())n.some((t=>e.U.endsWith(r,t)))&&(t[this.id+"/"+r]=this.readFile(r));t[this.id+"/"+e.CONFIG_NAME]=this.readFile(e.CONFIG_NAME)}packageLocalizationStringsAsync(t){const n=e.appTarget.id,r=[this.config.name+"-jsdoc",this.config.name],i={},a=e.appTarget.appTheme||{};return this.config.skipLocalization?Promise.resolve(i):e.Util.liveLocalizationEnabled()&&"this"!=this.id&&e.appTarget.bundledpkgs[this.id]?(e.debug(`loading live translations for ${this.id}`),Promise.all(r.map((r=>e.Util.downloadLiveTranslationsAsync(t,`${n}/${r}-strings.json`,a.crowdinBranch).then((n=>{n&&Object.keys(n).length?e.Util.jsonMergeFrom(i,n):(e.tickEvent("translations.livetranslationsfailed",{filename:r}),e.Util.jsonMergeFrom(i,this.bundledStringsForFile(t,r)))})).catch((a=>{e.tickEvent("translations.livetranslationsfailed",{filename:r}),e.log(`error while downloading ${n}/${r}-strings.json`),e.Util.jsonMergeFrom(i,this.bundledStringsForFile(t,r))}))))).then((()=>i))):(r.map((e=>this.bundledStringsForFile(t,e))).filter((e=>!!e)).forEach((t=>e.Util.jsonMergeFrom(i,t))),Promise.resolve(i))}bundledStringsForFile(t,n){let r={},[i,a,o]=e.Util.normalizeLanguageCode(t);const s=this.config.files;let c=`_locales/${i}/${n}-strings.json`;if(o&&-1===s.indexOf(c)&&(c=`_locales/${o}/${n}-strings.json`),a&&-1===s.indexOf(c)&&(c=`_locales/${a}/${n}-strings.json`),s.indexOf(c)>-1)try{r=JSON.parse(this.readFile(c))}catch(n){e.reportError("extension","Extension localization JSON failed to parse",{fileName:c,lang:t,extension:this.verArgument()});"github"===this.verProtocol()&&e.tickEvent("loc.errors.json",{repo:this.verArgument(),file:c})}return r}}n.depWarnings={},e.Package=n;function r(e,t={}){let n=e["*"]||{};for(let r of Object.keys(e)){if("*"==r)continue;let i=e[r];"string"==typeof i&&(i={data:i});let a=i.namespace||n.namespace||"";a&&!a.endsWith(".")&&(a+=".");let o=i.id||a+r,s=i.icon,c=i.mimeType||n.mimeType,l=i.dataEncoding||n.dataEncoding||"base64";s||"base64"!=l||"image/png"!=c&&"image/jpeg"!=c||(s="data:"+c+";base64,"+i.data),t[o]={id:o,data:i.data,dataEncoding:l,icon:s,namespace:a,mimeType:c,tilemapTile:i.tilemapTile,displayName:i.displayName,tileset:i.tileset,tags:i.tags}}return t}e.MainPackage=class extends n{constructor(e){super("this","file:.",null,null,null),this._host=e,this.deps={},this.parent=this,this.addedBy=[this],this.level=0,this.deps[this.id]=this}installAllAsync(e){return this.loadAsync(!0,e)}sortedDeps(t=!1){let n={},r=[];const i=e=>e.config?Object.keys(e.config.cppDependencies||{}).length:0,a=o=>{if(!o||e.U.lookup(n,o.id))return;n[o.id]=!0;const s=Object.keys(o.dependencies(t)).map((e=>this.resolveDep(e)));s.sort(((t,n)=>i(n)-i(t)||e.U.strcmp(t.id,n.id))),s.forEach(a),r.push(o.id)};return a(this),r.map((e=>this.resolveDep(e)))}localizationStringsAsync(t){const n={};return Promise.all(e.Util.values(this.deps).map((e=>e.packageLocalizationStringsAsync(t).then((e=>{e&&Object.keys(e).forEach((t=>{n[t]||(n[t]=e[t])}))}))))).then((()=>{const t=e.U.getLocalizedStrings();return Object.keys(n).forEach((r=>{(e.U.startsWith(r,"{id:subcategory}")||e.U.startsWith(r,"{id:group}"))&&(t[r]||(t[r]=n[r]))})),e.U.setLocalizedStrings(t),Promise.resolve(n)}))}getTargetOptions(){let t=e.U.clone(e.appTarget.compile);return e.U.assert(!!t),t.utf8||this.sortedDeps(!0).forEach((n=>{n.config&&n.config.utf8&&(e.debug("forcing utf8 mode: pkg="+n.id),t.utf8=!0)})),t}getJRes(){if(!this._jres){this._jres={};for(const e of this.sortedDeps())e.parseJRes(this._jres);const t=(e.appTarget.runtime&&e.appTarget.runtime.palette?e.appTarget.runtime.palette:["#000000","#ffffff"]).map((e=>("000000"+parseInt(e.replace(/#/,""),16).toString(16)).slice(-6))).join("");this._jres.__palette={id:"__palette",data:t,dataEncoding:"hex",mimeType:"application/x-palette"}}return this._jres}updateJRes(){this._jres&&this.parseJRes(this._jres)}resolveBannedCategories(){if(void 0!==this._resolvedBannedCategories)return this._resolvedBannedCategories;let t=[];return e.appTarget&&e.appTarget.runtime&&e.appTarget.runtime.bannedCategories&&e.appTarget.runtime.bannedCategories.length&&(t=e.appTarget.runtime.bannedCategories.slice(),Object.keys(this.deps).map((e=>this.deps[e])).filter((e=>!!e)).map((t=>e.Util.jsonTryParse(t.readFile(e.CONFIG_NAME)))).filter((e=>e&&e.requiredCategories)).forEach((e=>e.requiredCategories.forEach((e=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)})))),this._resolvedBannedCategories=t),this._resolvedBannedCategories=t,this._resolvedBannedCategories.length||(this._resolvedBannedCategories=null),this._resolvedBannedCategories}async getCompileOptionsAsync(t=this.getTargetOptions()){let n={sourceFiles:[],fileSystem:{},target:t,name:this.config?this.config.name:""};const r=(t,n)=>{this.config.files.indexOf(t)<0&&e.U.userError(lf("please add '{0}' to \"files\" in {1}",t,e.CONFIG_NAME)),n="// Auto-generated. Do not edit.\n"+n+"\n// Auto-generated. Do not edit. Really.\n",this.host().readFile(this,t,!0)!==n&&(e.debug(`updating ${t} (size=${n.length})...`),this.host().writeFile(this,t,n,!0))};let i=!1;const a=async n=>{const a={extinfo:null,target:null},o=e.appTargetVariant;n&&e.setAppTargetVariant(n,{temporary:!0});try{let s=e.cpp.getExtensionInfo(this);i||!s.shimsDTS&&!s.enumsDTS||(i=!0,s.shimsDTS&&r("shims.d.ts",s.shimsDTS),s.enumsDTS&&r("enums.d.ts",s.enumsDTS));const c=t.isNative?await this.host().getHexInfoAsync(s):null;s=e.U.flatClone(s),t.keepCppFiles||(delete s.compileData,delete s.generatedFiles,delete s.extensionFiles),s.hexinfo=c,a.extinfo=s,a.target=e.appTarget.compile}finally{n&&e.setAppTargetVariant(o,{temporary:!0})}return a};let o;await this.loadAsync(),n.bannedCategories=this.resolveBannedCategories(),e.debug(`building: ${this.sortedDeps().map((e=>e.config.name)).join(", ")}`),o=e.appTarget.multiVariants?e.appTargetVariant?[e.appTargetVariant]:e.appTarget.alwaysMultiVariant||e.appTarget.compile.switches.multiVariant?e.appTarget.multiVariants:[e.appTarget.multiVariants[0]]:[null];let s=null;for(let t of o){s&&e.debug(`building for ${t}`);const r=await a(t),i=r.extinfo;i.appVariant=t,i.outputPrefix=1!=o.length&&t?t+"-":"",s?n.otherMultiVariants.push(r):(r.target.isNative=n.target.isNative,n.target=r.target,s=i,n.otherMultiVariants=[])}n.extinfo=s,n.target.preferredEditor=this.getPreferredEditor();if(!(e.appTarget.compile.shortPointers||"vm"==e.appTarget.compile.nativeType||this.config.binaryonly||!n.target.isNative)){const t=await this.filesToBePublishedAsync(!0),r=JSON.stringify({name:this.config.name,comment:this.config.description,status:"unpublished",scriptId:this.installedVersion,cloudId:e.CLOUD_ID+e.appTarget.id,editor:this.getPreferredEditor(),targetVersions:e.appTarget.versions}),i=JSON.stringify(t),a=await e.lzmaCompressAsync(r+i);a&&(n.embedMeta=JSON.stringify({compression:"LZMA",headerSize:r.length,textSize:i.length,name:this.config.name,eURL:e.appTarget.appTheme.embedUrl,eVER:e.appTarget.versions?e.appTarget.versions.target:"",pxtTarget:e.appTarget.id}),n.embedBlob=ts.pxtc.encodeBase64(e.U.uint8ArrayToString(a)))}for(const e of this.sortedDeps())for(const t of e.getFiles())if(/\.(ts|asm|py)$/.test(t)){let r=t;e.level>0&&(r="pxt_modules/"+e.id+"/"+t),n.sourceFiles.push(r),n.fileSystem[r]=e.readFile(t)}n.jres=this.getJRes();const c=e.appTarget.runtime&&e.appTarget.runtime.functionsOptions;return n.allowedArgumentTypes=c&&c.extraFunctionEditorTypes&&c.extraFunctionEditorTypes.map((e=>e.typeName)).concat("number","boolean","string"),n}prepareConfigToBePublished(){const t=e.U.clone(this.config);return delete t.installedVersion,delete t.additionalFilePath,delete t.additionalFilePaths,t.targetVersions||(t.targetVersions=e.Util.clone(e.appTarget.versions)),e.U.iterMap(t.dependencies,((n,r)=>{if(!r||/^(file|workspace):/.test(r)){r="*";try{const t=this.resolveDep(n).readGitJson();if(t&&t.repo){let n=e.github.parseRepoId(t.repo);n.tag=t.commit.tag||t.commit.sha,r=e.github.stringifyRepo(n)}}catch(e){}t.dependencies[n]=r}})),t}filesToBePublishedAsync(t=!1){const n={};return this.loadAsync().then((()=>{t||this.config.public||e.U.userError('Only packages with "public":true can be published');const r=this.prepareConfigToBePublished();n[e.CONFIG_NAME]=e.Package.stringifyConfig(r);for(let t of this.getFiles()){if(t==e.CONFIG_NAME)continue;let r=this.readFile(t);null==r&&e.U.userError("referenced file missing: "+t),n[t]=r}return e.U.sortObjectFields(n)}))}saveToJsonAsync(){return this.filesToBePublishedAsync(!0).then((t=>({meta:{cloudId:e.CLOUD_ID+e.appTarget.id,targetVersions:e.appTarget.versions,editor:this.getPreferredEditor(),name:this.config.name},source:JSON.stringify(t,null,2)})))}compressToFileAsync(){return this.saveToJsonAsync().then((t=>e.lzmaCompressAsync(JSON.stringify(t,null,2))))}computePartDefinitions(t){if(!t||!t.length)return{};let n={};return this.sortedDeps().forEach((r=>{let i=r.readFile("pxtparts.json");if(i)try{let a=JSON.parse(i);Object.keys(a).forEach((i=>{if(t.indexOf(i)>=0){let t=n[i]=a[i];if("string"==typeof t.visual.image&&/\.svg$/i.test(t.visual.image)){let n=r.readFile(t.visual.image);n||e.reportError("parts","invalid part definition",{error:`missing visual ${t.visual.image}`}),/^data:image\/svg\+xml/.test(n)||(n="data:image/svg+xml,"+encodeURIComponent(n)),t.visual.image=n}}}))}catch(t){e.reportError("parts","invalid pxtparts.json file")}})),n}},e.inflateJRes=r,e.allPkgFiles=function(t){return[e.CONFIG_NAME].concat(t.files||[]).concat(t.testFiles||[])},e.isPkgBeta=function(e){return e&&/\bbeta\b/.test(e.description)}}(pxt||(pxt={})),function(e){!function(t){let n,r,i,a,o,s=()=>{};function c(){if(o)return o;let t=Promise.resolve();if(n){e.debug("packetio: disconnect");const i=n;t=t.then((()=>i.disconnectAsync())).then((()=>i.io.disposeAsync())).catch((t=>{e.reportException(t)})).finally((()=>{r=void 0,n=void 0,o=void 0})),s&&(t=t.then((()=>s()))),o=t}return t}t.isActive=function(){return!!n},t.isConnected=function(){return!!(null==n?void 0:n.isConnected())},t.isConnecting=function(){return!!(null==n?void 0:n.isConnecting())},t.icon=function(){var t;return!!n&&(n.icon||(null===(t=e.appTarget.appTheme.downloadDialogTheme)||void 0===t?void 0:t.deviceIcon)||"usb")},t.unsupportedParts=function(){return(null==n?void 0:n.unsupportedParts)?n.unsupportedParts():[]},t.deviceVariant=function(){return null==n?void 0:n.devVariant},t.disconnectAsync=c,t.configureEvents=function(e,t,r){s=e,i=t,a=r,n&&(n.io.onConnectionChanged=s,n.onSerial=i,n.onCustomEvent=r)},t.sendCustomEventAsync=function(e,t){return n?n.sendCustomEventAsync(e,t):Promise.resolve()},t.initAsync=function(o=!1){if(e.debug("packetio: init "+(o?"(force)":"")),!r){let l=Promise.resolve();o&&(l=l.then((()=>c()))),r=l.then((()=>n?Promise.resolve(n):t.mkPacketIOAsync?(e.debug("packetio: new wrapper"),t.mkPacketIOAsync().then((e=>(e.onConnectionChanged=s,n=t.mkPacketIOWrapper(e),i&&(n.onSerial=i),a&&(n.onCustomEvent=a),s&&s(),n)))):(e.debug("packetio: not defined, skipping"),Promise.resolve(void 0)))).finally((()=>{r=void 0}))}return r}}(e.packetio||(e.packetio={}))}(pxt||(pxt={})),function(e){!function(t){function n(t,n,r){const i=e.semver.tryParse(t||"0.0.0")||e.semver.tryParse("0.0.0");let a=[];return Object.keys(n).filter((t=>e.semver.inRange(t,i))).forEach((e=>a=a.concat(n[e]))),r&&(a=a.filter((e=>e.type==r))),a.length?a:void 0}function r(e,t,n){let r=t;return n&&(n.filter((e=>"api"===e.type)).forEach((e=>{Object.keys(e.map).forEach((t=>{const n=new RegExp(t,"g");r=r.replace(n,e.map[t])}))})),n.filter((e=>"userenum"===e.type)).forEach((e=>{Object.keys(e.map).forEach((t=>{const n=new RegExp("enum\\s+"+t+"\\s*{","gm");r=r.replace(n,`enum ${e.map[t]} {`);const i=new RegExp(`(^|[^_a-zA-Z0-9])${t}(\\s*\\.)`,"g");r=r.replace(i,`$1${e.map[t]}$2`)}))}))),r}t.computePatches=function(t,r){const i=e.appTarget.compile?e.appTarget.compile.patches:void 0;if(i)return n(t,i,r)},t.computePyPatches=function(t,r){const i=e.appTarget.compile?e.appTarget.compile.pyPatches:void 0;if(i)return n(t,i,r)},t.upgradePackageReference=function(t,n,r){if("*"!=r)return n;const i=e.patching.computePatches(t,"package");let a=n;return i&&i.forEach((e=>{Object.keys(e.map).forEach((t=>{a==t&&(a=e.map[t])}))})),a},t.patchJavaScript=function(t,n){return r(t,n,e.patching.computePatches(t))},t.patchPython=function(t,n){return r(t,n,e.patching.computePyPatches(t))}}(e.patching||(e.patching={}))}(pxt||(pxt={})),function(e){e.react||(e.react={})}(pxt||(pxt={})),function(e){!function(t){function n(t,n){if(t){if(n){let r=t.major-n.major||t.minor-n.minor||t.patch-n.patch;if(r)return r;if(0==t.pre.length&&n.pre.length>0)return 1;if(t.pre.length>0&&0==n.pre.length)return-1;for(let i=0;i<t.pre.length+1;++i){let a=t.pre[i],o=n.pre[i];if(!a)return o?-1:0;if(!o)return 1;if(/^\d+$/.test(a)){if(!/^\d+$/.test(o))return-1;if(r=parseInt(a)-parseInt(o),r)return r}else{if(/^\d+$/.test(o))return 1;if(r=e.U.strcmp(a,o),r)return r}}return 0}return-1}return n?1:0}function r(t,n){let r=i(t)||i(n);return r||e.U.userError(e.U.lf("'{0}' doesn't look like a semantic version number",t)),r}function i(e){if(!e)return null;if("*"===e)return{major:Number.MAX_SAFE_INTEGER,minor:Number.MAX_SAFE_INTEGER,patch:Number.MAX_SAFE_INTEGER,pre:[],build:[]};/^v\d/i.test(e)&&(e=e.slice(1));let t=/^(\d+)\.(\d+)\.(\d+)(-([0-9a-zA-Z\-\.]+))?(\+([0-9a-zA-Z\-\.]+))?$/.exec(e);return t?{major:parseInt(t[1]),minor:parseInt(t[2]),patch:parseInt(t[3]),pre:t[5]?t[5].split("."):[],build:t[7]?t[7].split("."):[]}:null}function a(e){let t=e.major+"."+e.minor+"."+e.patch;return e.pre.length&&(t+="-"+e.pre.join(".")),e.build.length&&(t+="+"+e.build.join(".")),t}function o(t,r){let a=i(t),o=i(r);return a||o?n(a,o):e.U.strcmp(t,r)}function s(e,t){let r=e.split(" - ");if(2!=r.length)return!1;let a=i(r[0]),o=i(r[1]);if(!a||!o)return!1;if(!t)return!0;const s=n(a,t),c=n(t,o);return s<=0&&c<0}t.cmp=n,t.parse=r,t.tryParse=i,t.normalize=function(e){return a(r(e))},t.stringify=a,t.majorCmp=function(e,t){let n=i(e),r=i(t);return n.major-r.major},t.strcmp=o,t.inRange=s,t.sortLatestTags=function(e){const n=e.filter((e=>!!t.tryParse(e)));return n.sort(o),n.reverse(),n},t.test=function(){console.log("Test semver");let t=["0.9.0","1.0.0-0.3.7","1.0.0-alpha","1.0.0-alpha.1","1.0.0-alpha.beta","1.0.0-beta","1.0.0-beta.2","1.0.0-beta.11","1.0.0-rc.1","1.0.0-x.7.z.92","1.0.0","1.0.1","1.9.0","1.10.0","1.11.0"];for(let i=0;i<t.length;++i){let o=r(t[i]);console.log(t[i],o),e.U.assert(a(o)==t[i]);for(let a=0;a<t.length;++a){let s=n(o,r(t[a]));console.log(t[i],t[a],s),i<a?e.U.assert(s<0):i>a?e.U.assert(s>0):e.U.assert(0==s)}}const o=i("1.2.3");e.U.assert(s("0.1.2 - 2.2.3",o)),e.U.assert(s("1.2.3 - 2.2.3",o)),e.U.assert(!s("0.0.0 - 1.2.3",o)),e.U.assert(!s("1.2.4 - 4.2.3",o)),e.U.assert(!s("0.0.0 - 0.0.1",o))}}(e.semver||(e.semver={}))}(pxt||(pxt={})),function(e){!function(e){function t(t){return e.Util.values(t.byQName).filter((e=>e.attributes.block&&/^{[^:]+:[^}]+}/.test(e.attributes.block))).forEach((e=>{e.attributes.block=e.attributes.block.replace(/^{[^:]+:[^}]+}/,"")})),t}e.assert=e.Util.assert,e.oops=e.Util.oops,e.U=e.Util,e.ON_START_TYPE="pxt-on-start",e.ON_START_COMMENT="on start",e.HANDLER_COMMENT="code goes here",e.TS_STATEMENT_TYPE="typescript_statement",e.TS_DEBUGGER_TYPE="debugger_keyword",e.TS_BREAK_TYPE="break_keyword",e.TS_CONTINUE_TYPE="continue_keyword",e.TS_OUTPUT_TYPE="typescript_expression",e.TS_RETURN_STATEMENT_TYPE="function_return",e.PAUSE_UNTIL_TYPE="pxt_pause_until",e.COLLAPSED_BLOCK="pxt_collapsed_block",e.FUNCTION_DEFINITION_TYPE="function_definition",e.BINARY_JS="binary.js",e.BINARY_ASM="binary.asm",e.BINARY_HEX="binary.hex",e.BINARY_UF2="binary.uf2",e.BINARY_ELF="binary.elf",e.BINARY_PXT64="binary.pxt64",e.BINARY_ESP="binary.bin",e.BINARY_SRCMAP="binary.srcmap",e.NATIVE_TYPE_THUMB="thumb",e.NATIVE_TYPE_VM="vm",e.BuildSourceMapHelpers=function(e,t,n){const r=e=>{const t=e.split("\n").map((e=>e.length)),n=t.reduce((({lens:e,sum:t},n)=>({lens:[...e,t+n+1],sum:t+n+1})),{lens:[],sum:0}).lens;return{posToLineCol:e=>{const r=n.reduce(((t,n,r)=>e<n?t:r+1),0);return[r,t[r]-(n[r]-e)+1]},lineColToPos:(e,t)=>(n[e-1]||0)+t}},i={ts:r(t),py:r(n)},a=e=>e.endPos-e.startPos,o=(t,n)=>{const{startPos:r,endPos:i}=t;return e.filter((e=>e[n].startPos<=r&&i<=e[n].endPos))},s=(e,t)=>{const n=o(e,t);return n.reduce(((e,n)=>a(n[t])<a(e[t])?n:e),n[0])},c={ts:{allOverlaps:e=>o(e,"ts"),smallestOverlap:e=>s(e,"ts")},py:{allOverlaps:e=>o(e,"py"),smallestOverlap:e=>s(e,"py")}},l=(e,t)=>n=>{const[r,o]=(t=>[i[e].lineColToPos(t.line,t.column),t.length])(n),c=s({startPos:r,endPos:r+o},e);if(!c)return;const[l,u]=i[t].posToLineCol(c[t].startPos);return{fileName:`main.${t}`,start:c[t].startPos,length:a(c[t]),line:l,column:u}},u=l("ts","py"),d=l("py","ts");return{ts:Object.assign(Object.assign(Object.assign({},i.ts),c.ts),{locToLoc:u,getText:e=>t.substring(e.startPos,e.endPos)}),py:Object.assign(Object.assign(Object.assign({},i.py),c.py),{locToLoc:d,getText:e=>n.substring(e.startPos,e.endPos)})}},e.computeUsedParts=function(e,t,n=!1){if(!e.usedSymbols||!pxt.appTarget.simulator||!n&&!pxt.appTarget.simulator.parts)return[];const r=(e,t)=>{if(e){const n=e.split(/[ ,]+/g);t.push(...n.filter((e=>!!e&&t.indexOf(e)<0)))}};let i=[],a=[];if(Object.keys(e.usedSymbols).forEach((t=>{const n=e.usedSymbols[t];r(null==n?void 0:n.attributes.parts,i),r(null==n?void 0:n.attributes.hiddenParts,a)})),t){const e=pxt.appTarget.simulator.boardDefinition.onboardComponents;e&&("ignorebuiltin"===t?i=i.filter((t=>-1===e.indexOf(t))):"onlybuiltin"===t&&(i=i.filter((t=>e.indexOf(t)>=0))))}return i=i.filter((e=>a.indexOf(e)<0)),i.sort(),i=i.reverse(),i},e.buildSimJsInfo=function(t){var n;return{js:t.outfiles[e.BINARY_JS],targetVersion:pxt.appTarget.versions.target,fnArgs:t.usedArguments,parts:e.computeUsedParts(t,"ignorebuiltin"),usedBuiltinParts:e.computeUsedParts(t,"onlybuiltin"),allParts:e.computeUsedParts(t,void 0,!0),breakpoints:null===(n=t.breakpoints)||void 0===n?void 0:n.map((e=>e.id))}},e.blocksCategory=function(t){const n=t?t.attributes.blockNamespace||t.namespace:void 0;return n?e.Util.capitalize(n.split(".")[0]):void 0},e.getBlocksInfo=function(t,n){var r,o;let s=[];const c={},l={},u={},d={},p={};function f(t,n){const r="get"==t,i="set"==t,o="number"==n.retType,d=r?l:i?c:u,p=`${n.namespace}.${n.retType}`;let f=e.U.lookup(d,p);if(!f){const c=`@${t}@`;let l,u;if(n.attributes.blockCombineShadow){const t=n.attributes.blockCombineShadow,r=t.match(/^([^,.]*),?([^,.]*)$/);r&&3==r.length&&(l=r[1].trim(),u=r[2].trim(),0!=u.length||e.Util.endsWith(t,",")||(u=l,l=""))}const _=`${n.attributes.blockSetVariable||n.namespace.toLocaleLowerCase()}=${l||""}`,m=`value=${u||""}`;f=d[p]={attributes:{blockId:`${o?n.namespace:p}_blockCombine_${t}`,callingConvention:0,group:n.attributes.group,paramDefl:{},jsDoc:r?e.U.lf("Read value of a property on an object"):e.U.lf("Update value of property on an object")},name:c,namespace:n.namespace,fileName:n.fileName,qName:`${p}.${c}`,pkg:n.pkg,kind:2,parameters:[{name:"property",description:r?e.U.lf("the name of the property to read"):e.U.lf("the name of the property to change"),isEnum:!0,type:"@combined@"},{name:"value",description:i?e.U.lf("the new value of the property"):e.U.lf("the amount by which to change the property"),type:n.retType}].slice(0,r?1:2),retType:r?n.retType:"void",combinedProperties:[]},f.attributes.block=r?e.U.lf("%{0} %property",_):i?e.U.lf("set %{0} %property to %{1}",_,m):e.U.lf("change %{0} %property by %{1}",_,m),a(f.attributes),pxt.Util.isTranslationMode()&&(f.attributes.translationId=f.attributes.block,f.attributes.block=r?`%${_} %property`:i?`set %${_} %property to %${m}`:`change %${_} %property by %${m}`,a(f.attributes),pxt.crowdin.inContextLoadAsync(f.attributes.translationId).then((e=>{f.attributes.block=e,a(f.attributes)}))),s.push(f)}f.combinedProperties.push(n.qName)}for(let n of e.Util.values(t.byQName)){if("ENUM_GET"===n.attributes.shim&&n.attributes.enumName&&n.attributes.blockId){let e=!1;if(d[n.attributes.enumName]&&(console.warn(`Enum block ${n.attributes.blockId} trying to overwrite enum ${n.attributes.enumName}`),e=!0),n.attributes.enumMemberName||(console.warn(`Enum block ${n.attributes.blockId} should specify enumMemberName`),e=!0),n.attributes.enumPromptHint||(console.warn(`Enum block ${n.attributes.blockId} should specify enumPromptHint`),e=!0),n.attributes.enumInitialMembers&&n.attributes.enumInitialMembers.length||(console.warn(`Enum block ${n.attributes.blockId} should specify enumInitialMembers`),e=!0),e)continue;const t=parseInt(n.attributes.enumStartValue);d[n.attributes.enumName]={blockId:n.attributes.blockId,name:n.attributes.enumName,memberName:n.attributes.enumMemberName,firstValue:isNaN(t)?void 0:t,isBitMask:n.attributes.enumIsBitMask,isHash:n.attributes.enumIsHash,initialMembers:n.attributes.enumInitialMembers,promptHint:n.attributes.enumPromptHint}}if("KIND_GET"===n.attributes.shim&&n.attributes.blockId){const r=n.attributes.kindNamespace||n.attributes.blockNamespace||n.namespace;if(p[r]){console.warn(`More than one block defined for kind ${r}`);continue}const i=[];if(t.byQName[r])for(const n of e.Util.values(t.byQName))n.namespace===r&&n.attributes.isKind&&i.push(n.name);p[r]={blockId:n.attributes.blockId,name:r,memberName:n.attributes.kindMemberName||r,initialMembers:i,promptHint:n.attributes.enumPromptHint||e.Util.lf("Create a new kind..."),createFunctionName:n.attributes.kindCreateFunction||"create"}}if(n.attributes.blockCombine)/@set/.test(n.name)||f("get",n),n.isReadOnly||("number"==n.retType&&f("change",n),f("set",n));else if(n.attributes.block&&!n.attributes.fixedInstance&&7!=n.kind&&5!=n.kind&&9!=n.kind&&8!=n.kind){if(n.attributes.blockId||(n.attributes.blockId=n.qName.replace(/\./g,"_")),"true"==n.attributes.block){let t=e.U.uncapitalize(n.name);1!=n.kind&&2!=n.kind||(t+=" %"+n.namespace.toLowerCase());const s=null!==(o=null===(r=n.parameters)||void 0===r?void 0:r.filter((e=>!i(e))))&&void 0!==o?o:[];for(let e of s)t+=" %"+e.name;n.attributes.block=t,a(n.attributes)}s.push(n)}}for(let n of s){let r=e.U.lookup(t.byQName,n.namespace);if(!r)continue;let i=r.attributes,a=n.attributes;for(let e of["blockNamespace","color","blockGap"])void 0===a[e]&&i[e]&&(a[e]=i[e])}var _;return n&&((_=n).length&&(s=s.filter((e=>{let t=(e.attributes.blockNamespace||e.namespace).split(".")[0];return-1===_.indexOf(t)})))),{apis:t,blocks:s,blocksById:pxt.Util.toDictionary(s,(e=>e.attributes.blockId)),enumsByName:d,kindsByName:p}},e.tsSnippetToPySnippet=function(t,n){const r={true:"True",false:"False",null:"None"}[t];if(r)return r;if(n&&6==n.kind||!n&&t.includes(".")){const n=t.lastIndexOf("."),r=t.substr(0,n);let i=t.substr(n+1);return i=e.U.snakify(i).toUpperCase(),r?`${r}.${i}`:i}return t},e.apiLocalizationStrings={},e.localizeApisAsync=async function(n,r){const i=e.Util.userLanguage();if("en"==i)return Promise.resolve(t(n));const o=i.toLowerCase(),s=o+"|jsdoc",c=o+"|block",l=await r.localizationStringsAsync(i);e.apiLocalizationStrings&&e.Util.jsonMergeFrom(l,e.apiLocalizationStrings);const u=e.Util.values(n.byQName).filter((e=>e.attributes._translatedLanguageCode!==i));return await e.Util.promiseMapAll(u,(async t=>{var r,u,d;const p=t.attributes.useLoc||t.attributes.blockAliasFor,f=p&&n.byQName[p];t.attributes._untranslatedJsDoc&&(t.attributes.jsDoc=t.attributes._untranslatedJsDoc),t.attributes._untranslatedBlock&&(t.attributes.jsDoc=t.attributes._untranslatedBlock);const _=(e,n)=>{var r,i;return l[t.qName+e]||(null===(r=t.attributes.locs)||void 0===r?void 0:r[n])||f&&(l[f.qName+e]||(null===(i=f.attributes.locs)||void 0===i?void 0:i[n]))},m=_("",s);m&&(t.attributes._untranslatedJsDoc||(t.attributes._untranslatedJsDoc=t.attributes.jsDoc),t.attributes.jsDoc=m),null===(r=t.parameters)||void 0===r||r.forEach((e=>{const t=`|param|${e.name}`,n=_(t,o+t);n&&(e.description=n)}));const g=l["{id:category}"+e.Util.capitalize(t.qName)];let h=l[`${t.qName}|block`]||(null===(u=t.attributes.locs)||void 0===u?void 0:u[c]);if(!h&&f){const e=l[`${f.qName}|block`]||(null===(d=f.attributes.locs)||void 0===d?void 0:d[c]);t.attributes.block===(f.attributes._untranslatedBlock||f.attributes.block)&&e&&(h=e)}if(h&&pxt.Util.isTranslationMode()&&(t.attributes.translationId=h,h=await pxt.crowdin.inContextLoadAsync(h)),g)t.attributes.block?t.attributes.block=h||t.attributes.block:t.attributes.block=g,a(t.attributes);else if(t.attributes.block&&h){const e=pxt.blocks.compileInfo(t),n=t.attributes.block;if(t.attributes.block=pxt.blocks.normalizeBlock(h,(e=>{pxt.tickEvent("loc.normalized",{block:t.attributes.block,lang:i,error:e})})),t.attributes._untranslatedBlock||(t.attributes._untranslatedBlock=n),n!=t.attributes.block){a(t.attributes);(function(e,t){if(e.parameters.length!=t.parameters.length)return pxt.debug("Localized block has extra or missing parameters"),!1;for(const n of e.parameters){const e=t.actualNameToParam[n.actualName];if(!e||n.type!=e.type||n.shadowBlockId!=e.shadowBlockId||n.definitionName!=e.definitionName)return pxt.debug(`Parameter ${n.actualName} type, shadow block, or definition name does not match after localization`),!1}return!0})(e,pxt.blocks.compileInfo(t))||(pxt.reportError("loc.errors","block has non matching arguments",{block:t.attributes.blockId,lang:i,originalDefinition:n,translatedBlock:t.attributes.block}),pxt.tickEvent("loc.errors",{block:t.attributes.blockId,lang:i}),t.attributes.block=n,a(t.attributes))}}else a(t.attributes);t.attributes._translatedLanguageCode=i})),t(n)},e.emptyExtInfo=function(){let e=pxt.appTarget.compileService;e||(e={});const t=!!e.platformioIni,n="dockermake"==e.buildEngine||"dockercross"==e.buildEngine||"dockerespidf"==e.buildEngine,r={functions:[],generatedFiles:{},extensionFiles:{},sha:"",compileData:"",shimsDTS:"",enumsDTS:"",onlyPublic:!0};return t?r.platformio={dependencies:{}}:n?r.npmDependencies={}:r.yotta={config:{},dependencies:{}},r};const n=["weight","imageLiteral","topblockWeight","inlineInputModeLimit"],r=["advanced","handlerStatement","afterOnStart","optionalVariableArgs","blockHidden","constantShim","blockCombine","enumIsBitMask","enumIsHash","decompileIndirectFixedInstances","topblock","callInDebugger","duplicateShadowOnDrag","argsNullable","compileHiddenArguments"];function i(e){return"Action"===e.type||/^\([^\)]*\)\s*=>/.test(e.type)}function a(e){if(e.block){const n=e.block.split("||");e._def=t(o(n[0])),e._def||pxt.debug("Unable to parse block def for id: "+e.blockId),n[1]&&(e._expandedDef=t(o(n[1]))),n[1]&&!e._expandedDef&&pxt.debug("Unable to parse expanded block def for id: "+e.blockId)}function t(t){return e._shadowOverrides&&t.parameters.forEach((t=>{const n=e._shadowOverrides[t.name];"unset"===n?delete t.shadowBlockId:null!=n&&(t.shadowBlockId=n)})),t}}function o(e){const t=[];let n,r=0;for(;r<e.length;r++){const i=e[r],a=r;let o;switch(i){case"*":case"_":const t=d((e=>e==i)),n="_"===i?2:0;1===t.length?o={kind:1<<n,content:t}:2===t.length?o={kind:2<<n,content:t}:3===t.length?o={kind:3<<n,content:t}:r=a;break;case"`":const s=p("`");if(void 0===s){r=a;break}o={kind:256,content:s};break;case"|":o={kind:32};break;case"\\":r<e.length-1&&(o={kind:16,content:e[1+r++]});break;case"[":const c=p("]");if(void 0!==c&&"("===e[1+r++]){const e=p(")");if(void 0!==e){o={kind:512,content:c,type:e};break}}r=a;break;case"$":case"%":const l=d((e=>/[a-zA-Z0-9_=]/.test(e)),!0).split("=");if(l.length>2){r=a;break}let u;if("("===e[r+1]){const e=r;++r,u=p(")"),u||(r=e)}o={kind:"$"===i?1024:64,content:l[0],type:l[1],name:u}}o?(n&&t.push({kind:128,content:n}),n=void 0,t.push(o)):n?n+=i:n=i}n&&t.push({kind:128,content:n});const i=[],a=[];let o=[],c=0,l="",u=[];for(let e=0;e<t.length;e++){const n=t[e].kind,r=o[o.length-1];if(15&n)if(m(t[e].content),n&c)if(r&n){o.pop(),c^=n;const e=r&c|n&c;e&&o.push(e)}else f();else c|=n,o.push(n);else 144&n?l+=t[e].content:1120&n&&_();if(64==n){const n={kind:"param",name:t[e].content,shadowBlockId:t[e].type,ref:!1};t[e].name&&(n.varName=t[e].name),i.push(n),a.push(n)}else if(1024==n){const n={kind:"param",name:t[e].content,shadowBlockId:t[e].type,ref:!0};t[e].name&&(n.varName=t[e].name),i.push(n),a.push(n)}else 256==n?(m(),u.push({kind:"image",uri:t[e].content})):512==n?(m(),u.push({kind:"label",text:t[e].content,cssClass:t[e].type})):32==n&&i.push({kind:"break"})}return _(),{parts:i,parameters:a};function d(t,n=!1){let i="";for(n&&r++;r<e.length&&t(e[r]);)i+=e[r],++r;return i&&r--,i}function p(t){const n=d((e=>e!==t),!0);if(e[r+1]===t)return++r,n}function f(){let e="",t=[];for(const n of u)s(n)?(t.push({content:e,styles:0}),t.push(n),e=""):(e+=n.content,n.endingToken&&(e+=n.endingToken));u=t,e&&u.push({content:e,styles:0}),o=[],c=0}function _(){for(m(),c&&f();u.length;){const e=u.shift();if(s(e))i.push(e);else{if(!e.content)continue;const t=[];10&e.styles&&t.push("bold"),5&e.styles&&t.push("italics"),i.push({kind:"label",text:e.content,style:t})}}}function m(e){u.push({content:l,styles:c,endingToken:e}),l=""}}function s(e){return!!e.kind}let c;e.parseCommentString=function(t){let i={paramDefl:{},callingConvention:0,_source:t},o=!0;for(;o;)o=!1,t=t.replace(/\/\/%[ \t]*([\w\.-]+)(=(("[^"\n]*")|'([^'\n]*)'|([^\s]*)))?/,((t,n,r,a,s,c,l)=>{let u=s?JSON.parse(s):r?s||c||l:"true";if(u||(u=""),e.U.startsWith(n,"block.loc."))i.locs||(i.locs={}),i.locs[n.slice("block.loc.".length).toLowerCase()+"|block"]=u;else if(e.U.startsWith(n,"jsdoc.loc."))i.locs||(i.locs={}),i.locs[n.slice("jsdoc.loc.".length).toLowerCase()+"|jsdoc"]=u;else if(e.U.contains(n,".loc.")){i.locs||(i.locs={});const e=n.slice(0,n.indexOf(".loc.")),t=n.slice(n.indexOf(".loc.")+".loc.".length);i.locs[t+"|param|"+e]=u}else if(e.U.endsWith(n,".defl"))u.indexOf(" ")>-1?i.paramDefl[n.slice(0,n.length-5)]=`"${u}"`:i.paramDefl[n.slice(0,n.length-5)]=u,i.explicitDefaults||(i.explicitDefaults=[]),i.explicitDefaults.push(n.slice(0,n.length-5));else if(e.U.endsWith(n,".shadow"))i._shadowOverrides||(i._shadowOverrides={}),i._shadowOverrides[n.slice(0,n.length-7)]=u;else if(e.U.endsWith(n,".snippet")){i.paramSnippets||(i.paramSnippets={});const e=n.slice(0,n.length-8);i.paramSnippets[e]||(i.paramSnippets[e]={}),i.paramSnippets[e].ts=u}else if(e.U.endsWith(n,".pySnippet")){i.paramSnippets||(i.paramSnippets={});const e=n.slice(0,n.length-10);i.paramSnippets[e]||(i.paramSnippets[e]={}),i.paramSnippets[e].python=u}else if(e.U.endsWith(n,".fieldEditor"))i.paramFieldEditor||(i.paramFieldEditor={}),i.paramFieldEditor[n.slice(0,n.length-12)]=u;else if(e.U.contains(n,".fieldOptions.")){i.paramFieldEditorOptions||(i.paramFieldEditorOptions={});const e=n.slice(0,n.indexOf(".fieldOptions.")),t=n.slice(n.indexOf(".fieldOptions.")+14,n.length);i.paramFieldEditorOptions[e]||(i.paramFieldEditorOptions[e]={}),i.paramFieldEditorOptions[e][t]=u}else if(e.U.contains(n,".shadowOptions.")){i.paramShadowOptions||(i.paramShadowOptions={});const e=n.slice(0,n.indexOf(".shadowOptions.")),t=n.slice(n.indexOf(".shadowOptions.")+15,n.length);i.paramShadowOptions[e]||(i.paramShadowOptions[e]={}),i.paramShadowOptions[e][t]=u}else e.U.endsWith(n,".min")?(i.paramMin||(i.paramMin={}),i.paramMin[n.slice(0,n.length-4)]=u):e.U.endsWith(n,".max")?(i.paramMax||(i.paramMax={}),i.paramMax[n.slice(0,n.length-4)]=u):i[n]=u;return o=!0,"//% "}));for(let e of n)"string"==typeof i[e]&&(i[e]=parseInt(i[e]));for(let e of r)"string"==typeof i[e]&&(i[e]="true"==i[e]||"1"==i[e]);if(i.trackArgs&&(i.trackArgs=i.trackArgs.split(/[ ,]+/).map((e=>parseInt(e)||0))),i.enumInitialMembers&&(i.enumInitialMembers=i.enumInitialMembers.split(/[ ,]+/)),i.blockExternalInputs&&!i.inlineInputMode&&(i.inlineInputMode="external"),i.paramHelp={},i.jsDoc="",t=t.replace(/\/\*\*([^]*?)\*\//g,((e,t)=>(t=(t=t.replace(/\n\s*(\*\s*)?/g,"\n")).replace(/^\s*@param\s+(\w+)\s+(.*)$/gm,((e,t,n)=>{if(i.paramHelp[t]=n,!i.paramDefl[t]){let e=/\beg\.?:\s*(.+)/.exec(n);if(e&&e[1]){let n=/(?:"([^"]*)")|(?:'([^']*)')|(?:([^\s,]+))/g.exec(e[1]);if(n){let e=n[1]||n[2]||n[3];e||(e=""),e.indexOf(" ")>-1?i.paramDefl[t]=`"${e}"`:i.paramDefl[t]=e}}}return""})),i.jsDoc+=t,""))),i.jsDoc=i.jsDoc.trim(),i.async&&(i.callingConvention=1),i.promise&&(i.callingConvention=2),i.jres&&(i.whenUsed=!0),i.subcategories)try{i.subcategories=JSON.parse(i.subcategories)}catch(e){i.subcategories=void 0}if(i.groups)try{i.groups=JSON.parse(i.groups)}catch(e){i.groups=void 0}if(i.groupIcons)try{i.groupIcons=JSON.parse(i.groupIcons)}catch(e){i.groupIcons=void 0}if(i.groupHelp)try{i.groupHelp=JSON.parse(i.groupHelp)}catch(e){i.groupHelp=void 0}return a(i),i},e.parameterTypeIsArrowFunction=i,e.updateBlockDef=a,e.parseBlockDefinition=o,e.parseChecksumBlock=function(e,t=0){let n=pxt.HF2.read32(e,t);if(133083260!=(2147483647&n))return pxt.log("no checksum block magic"),null;let r=pxt.HF2.read32(e,t+4),i=pxt.HF2.read32(e,t+8);if(3&r)return pxt.log("invalid end marker position"),null;let a=1<<(255&i);if(a!=pxt.appTarget.compile.flashCodeAlign)return pxt.log("invalid page size: "+a),null;let o={magic:n,endMarkerPos:r,endMarker:i,regions:[]};for(let n=t+12;n<e.length-7;n+=8){let t={start:a*pxt.HF2.read16(e,n),length:a*pxt.HF2.read16(e,n+2),checksum:pxt.HF2.read32(e,n+4)};if(!t.length||!t.checksum)break;o.regions.push(t)}return o},function(t){function n(n){let r=e=>n[e]+(n[e+1]<<8)+(n[e+2]<<16)+(n[e+3]<<24)>>>0;if(!n||512!=n.length||r(0)!=t.UF2_MAGIC_START0||r(4)!=t.UF2_MAGIC_START1||r(n.length-4)!=t.UF2_MAGIC_END)return null;let i=r(8),a=r(16);a>476&&(a=256);let o=null,s=0,c=0;if(i&t.UF2_FLAG_FILE){let t=n.slice(32+a),i=t.indexOf(0);i>=0&&(t=t.slice(0,i)),o=e.U.fromUTF8Array(t),c=r(28)}return i&t.UF2_FLAG_FAMILY_ID_PRESENT&&(s=r(28)),{flags:i,targetAddr:r(12),payloadSize:a,blockNo:r(20),numBlocks:r(24),fileSize:c,familyId:s,data:n.slice(32,32+a),filename:o}}function r(e,t){return!!e&&(e.targetAddr<=t&&t<e.targetAddr+e.payloadSize)}function i(e,t,n){e[t]=255&n,e[t+1]=n>>8&255,e[t+2]=n>>16&255,e[t+3]=n>>24&255}function a(e){return"string"==typeof e&&(e=parseInt(e)),{currBlock:null,currPtr:-1,blocks:[],ptrs:[],filesize:0,familyId:e||0}}function o(e){for(let t=0;t<e.blocks.length;++t)i(e.blocks[t],20,t),i(e.blocks[t],24,e.blocks.length),e.filename&&i(e.blocks[t],28,e.filesize)}function s(n,r,a,o=0){let c=n.currBlock,l=r>>8,u=256-(255&r);if(a.length>u){let e=new Uint8Array(a);for(s(n,r,e.slice(0,u));u<a.length;){let t=Math.min(u+256,a.length);s(n,r+u,e.slice(u,t)),u=t}return}if(l!=n.currPtr){c=null;for(let e=0;e<n.ptrs.length;++e)if(n.ptrs[e]==l){c=n.blocks[e];break}if(!c){c=new Uint8Array(512),n.filename?o|=t.UF2_FLAG_FILE:n.familyId&&(o|=t.UF2_FLAG_FAMILY_ID_PRESENT),i(c,0,t.UF2_MAGIC_START0),i(c,4,t.UF2_MAGIC_START1),i(c,8,o),i(c,12,l<<8),i(c,16,256),i(c,20,n.blocks.length),i(c,28,n.familyId),i(c,508,t.UF2_MAGIC_END);for(let e=32;e<288;++e)c[e]=255;n.filename&&e.U.memcpy(c,288,e.U.toUTF8Array(n.filename)),n.blocks.push(c),n.ptrs.push(l)}n.currPtr=l,n.currBlock=c}let d=32+(255&r);for(let e=0;e<a.length;++e)c[d+e]=a[e];n.filesize=Math.max(n.filesize,a.length+r)}t.UF2_MAGIC_START0=171066965,t.UF2_MAGIC_START1=2656915799,t.UF2_MAGIC_END=179400496,t.UF2_FLAG_NONE=0,t.UF2_FLAG_NOFLASH=1,t.UF2_FLAG_FILE=4096,t.UF2_FLAG_FAMILY_ID_PRESENT=8192,t.parseBlock=n,t.parseFile=function(e){let t=[];for(let r=0;r<e.length;r+=512){let i=n(e.slice(r,r+512));i&&t.push(i)}return t},t.toBin=function(e,t){if(e.length<512)return null;let r=-1,i=-1,a=[];for(let o=0;o<e.length;++o){let s=512*o,c=n(e.slice(s,s+512));if(!c)continue;if(t&&c.targetAddr+256>t)break;-1==r&&(r=c.targetAddr,i=r);let l=c.targetAddr-r;l<0||l%4||l>1048576||(l>0&&a.push(new Uint8Array(l)),a.push(e.slice(s+32,s+32+c.payloadSize)),r=c.targetAddr+c.payloadSize)}let o=0;for(let e of a)o+=e.length;if(0==o)return null;let s=new Uint8Array(o),c=0;for(let e of a)for(let t=0;t<e.length;++t)s[c++]=e[t];return{buf:s,start:i}},t.readBytes=function(e,t,n){let i,a=new Uint8Array(n);for(let o=0;o<n;++o,++t)r(i,t)||(i=e.filter((e=>r(e,t)))[0]),i&&(a[o]=i.data[t-i.targetAddr]);return a},t.newBlockFile=a,t.finalizeFile=o,t.concatFiles=function(t){for(let e of t)o(e),e.filename=null;let n=a();n.blocks=e.U.concat(t.map((e=>e.blocks)));for(let e of t)e.blocks=[];return n},t.serializeFile=function(t){o(t);let n="";for(let r of t.blocks)n+=e.Util.uint8ArrayToString(r);return n},t.readBytesFromFile=function t(n,r,i){let a,o=r>>8;if(o==n.currPtr)a=n.currBlock;else{for(let e=0;e<n.ptrs.length;++e)if(n.ptrs[e]==o){a=n.blocks[e];break}a&&(n.currPtr=o,n.currBlock=a)}if(!a)return null;let s=new Uint8Array(i),c=Math.min(i,256-(255&r));e.U.memcpy(s,0,a,32+(255&r),c);let l=i-c;if(l>0){let i=t(n,r+c,l);e.U.memcpy(s,c,i)}return s},t.writeBytes=s,t.writeHex=function(e,t){let n="0000";for(let r=0;r<t.length;++r){let i=/:02000004(....)/.exec(t[r]);if(i&&(n=i[1]),i=/^:..(....)00(.*)[0-9A-F][0-9A-F]$/.exec(t[r]),i){let t=parseInt(n+i[1],16),r=i[2],a=[];for(let e=0;e<r.length;e+=2)a.push(parseInt(r[e]+r[e+1],16));s(e,t,a)}}}}(c=e.UF2||(e.UF2={}))}(e.pxtc||(e.pxtc={}))}(ts||(ts={})),function(e){!function(e){!function(e){let t;!function(e){e[e.Bundled=1]="Bundled",e[e.Github=2]="Github",e[e.ShareScript=3]="ShareScript"}(t=e.ExtensionType||(e.ExtensionType={}))}(e.service||(e.service={}))}(e.pxtc||(e.pxtc={}))}(ts||(ts={})),function(e){!function(t){let n,r;!function(e){e[e.IDE=0]="IDE",e[e.Sandbox=1]="Sandbox",e[e.Widget=2]="Widget",e[e.Controller=3]="Controller"}(n=t.EditorLayoutType||(t.EditorLayoutType={}));let i=!1,a=!1;function o(){if(void 0===r){if(e.BrowserUtils.hasWindow()){const t=/sandbox=1|#sandbox|#sandboxproject/i.test(window.location.href)||e.BrowserUtils.isIFrame(),o=/nosandbox=1/i.test(window.location.href),s=/controller=1/i.test(window.location.href)&&e.BrowserUtils.isIFrame(),c=/readonly=1/i.test(window.location.href),l=/editorlayout=(widget|sandbox|ide)/i.exec(window.location.href),u=/noproject=1/i.test(window.location.href);if(r=n.IDE,o?r=n.Widget:s?r=n.Controller:t&&(r=n.Sandbox),s&&c&&(i=!0),s&&u&&(a=!0),l)switch(l[1].toLowerCase()){case"widget":r=n.Widget;break;case"sandbox":r=n.Sandbox;break;case"ide":r=n.IDE}}else r=n.Sandbox;e.debug(`shell: layout type ${n[r]}, readonly ${l()}`)}}function s(){return o(),r==n.Sandbox}function c(){return/[?&]timeMachine=1/i.test(window.location.href)}function l(){return!e.BrowserUtils.hasWindow()||c()||s()&&!/[?&]edit=1/i.test(window.location.href)||u()&&i}function u(){return o(),r==n.Controller}t.layoutTypeClass=function(){return o(),e.shell.EditorLayoutType[r].toLowerCase()},t.isSandboxMode=s,t.isTimeMachineEmbed=c,t.isReadOnly=l,t.isNoProject=function(){return a},t.isControllerMode=u,t.isPyLangPref=function(){return"py"==e.storage.getLocal("editorlangpref")},t.getEditorLanguagePref=function(){return e.storage.getLocal("editorlangpref")},t.setEditorLanguagePref=function(t){t.match(/prj$/)&&(t=t.replace(/prj$/,"")),e.storage.setLocal("editorlangpref",t)},t.getToolboxAnimation=function(){return e.storage.getLocal("toolboxanimation")},t.setToolboxAnimation=function(){e.storage.setLocal("toolboxanimation","1")}}(e.shell||(e.shell={}))}(pxt||(pxt={})),function(e){!function(t){t.USER_VERSION="0.0.1";class n{constructor(){this.db=new e.BrowserUtils.IDBWrapper(n.databaseName,n.version,((e,t)=>{const r=t.result;e.oldVersion<1&&(r.createObjectStore(n.projectTable,{keyPath:n.projectKey}),r.createObjectStore(n.userTable,{keyPath:n.userKey}))}))}initAsync(){return this.db.openAsync()}getAllProjectsAsync(){return this.db.getAllAsync(n.projectTable).then((e=>e.map((e=>e.project)).filter((e=>!e.deleted))))}deleteProjectAsync(e){return this.getProjectAsync(e).then((e=>{e.deleted=!0,this.saveProjectAsync(e)}))}getProjectAsync(e){return this.db.getAsync(n.projectTable,e).then((e=>null==e?void 0:e.project))}saveProjectAsync(e){return this.db.setAsync(n.projectTable,{id:e.header.id,project:e})}getUserStateAsync(){return this.db.getAsync(n.userTable,"local-user").then((e=>null==e?void 0:e.user))}saveUserStateAsync(e){return this.db.setAsync(n.userTable,{id:"local-user",user:e})}}n.version=6,n.databaseName="local-skill-map",n.projectTable="projects",n.projectKey="id",n.userTable="users",n.userKey="id",t.IndexedDBWorkspace=n}(e.skillmap||(e.skillmap={}))}(pxt||(pxt={})),function(e){!function(e){e.MAX_FREQUENCY=5e3,e.MAX_VOLUME=255,e.renderSoundPath=function(r,i,a){let{startFrequency:o,endFrequency:s,startVolume:c,endVolume:l,wave:u,interpolation:d}=r;o=Math.max(Math.min(o,e.MAX_FREQUENCY),1),s=Math.max(Math.min(s,e.MAX_FREQUENCY),1),c=Math.max(Math.min(c,e.MAX_VOLUME),0),l=Math.max(Math.min(l,e.MAX_VOLUME),0);const p=new t(o+s+1);let f;switch(d){case"linear":f=e=>o+e*(s-o)/i;break;case"curve":f=e=>o+(s-o)*Math.sin(e/i*(Math.PI/2));break;case"logarithmic":f=e=>o+Math.log10(1+e/i*9)*(s-o)}"noise"===u&&(f=()=>p.randomRange(500,5e3));const _=t=>Math.max(Math.min((l-c)/i*t+c,e.MAX_VOLUME),0),m=i/2,g=t=>t/e.MAX_VOLUME*(a-2)/2,h=t=>(1-t/e.MAX_FREQUENCY)*(m-10)+10,y=["M 2 "+a/2];let v=0;for(;v<i;)y.push(n(g(_(v)),h(f(v))/2,u,!1,p)),v+=h(f(v))/2,y.push(n(g(_(v)),h(f(v))/2,u,!0,p)),v+=h(f(v))/2;return y.join(" ")},e.renderWaveSnapshot=function(r,i,a,o,s,c){const l=new t(r);"noise"===a&&(r=l.randomRange(500,5e3)),r=Math.max(Math.min(r,e.MAX_FREQUENCY),1);const u=i/e.MAX_VOLUME*(s-2)/2,d=o/(r*c/1e3)/2;let p=Math.ceil(o/(2*d));p%2==1&&p++;const f=[`M ${o/2-p*d} ${s/2}`];let _=0;for(let e=0;e<p;e++)f.push(n(u,d,a,!1,l)),_+=d,f.push(n(u,d,a,!0,l)),_+=d;return f.join(" ")};class t{constructor(e){this.seed=e,this.lfsr=e}next(){return(this.lfsr=this.lfsr>>1^46080&-(1&this.lfsr))/65535}randomRange(e,t){return e+(t-e)*this.next()}}function n(e,t,n,r,i){switch(n){case"triangle":return`l ${t/2} ${r?e:-e} l ${t/2} ${r?-e:e}`;case"square":return`v ${r?e:-e} h ${t} v ${r?-e:e}`;case"sawtooth":return r?`l ${t} ${e} v ${-e}`:`v ${-e} l ${t} ${e}`;case"sine":return`q ${t/2} ${1.9*(r?e:-e)} ${t} 0`;case"noise":const n=[],a=[],o=Math.min(4,t/4);let s=r;for(let n=0;n<t;n+=o)a.push(i.randomRange(0,e)*(s?1:-1)),s=!s;a[0]=r?e:-e,a[a.length-1]=0;let c=0,l=0;for(const e of a){let r=Math.min(o,t-l);if(n.push(`v ${e-c} h ${r}`),c=e,l+=r,l>=t)break}return n.join(" ")}}function r(e){switch(e){case"square":return 15;case"sine":return 3;case"triangle":return 1;case"noise":return 18;case"sawtooth":return 2}}function i(e,t,n){const r=new Uint8Array(2);new Uint16Array(r.buffer)[0]=0|n,e[t]=r[0],e[t+1]=r[1]}e.soundToInstructionBuffer=function(t,n,a){const{startFrequency:o,endFrequency:s,startVolume:c,endVolume:l,interpolation:u,duration:d}=t,p=[];if("linear"===t.interpolation&&"none"===t.effect)p.push({frequency:o,volume:c/e.MAX_VOLUME*1024}),p.push({frequency:s,volume:l/e.MAX_VOLUME*1024});else{n=Math.min(n,Math.floor(d/5));const r=t=>(c+t*(l-c)/d)/e.MAX_VOLUME*1024;let i;switch(u){case"linear":i=e=>o+e*(s-o)/d;break;case"curve":i=e=>o+(s-o)*Math.sin(e/d*(Math.PI/2));break;case"logarithmic":i=e=>o+Math.log10(1+e/d*9)*(s-o)}const f=d/n;for(let e=0;e<n;e++){const n={frequency:Math.max(i(e*f),1),volume:r(e*f)};"tremolo"===t.effect?n.volume=e%2==0?Math.max(n.volume-500*a,0):Math.min(n.volume+500*a,1023):"vibrato"===t.effect?n.frequency=e%2==0?Math.max(n.frequency-100*a,1):n.frequency+100*a:"warble"===t.effect&&(n.frequency=e%2==0?Math.max(n.frequency-1e3*a,1):n.frequency+1e3*a),p.push(n)}}const f=new Uint8Array(12*(p.length-1)),_=Math.floor(d/(p.length-1));for(let e=0;e<p.length-1;e++){const n=12*e;f[n]=r(t.wave),i(f,n+2,p[e].frequency),i(f,n+4,_),i(f,n+6,p[e].volume),i(f,n+8,p[e+1].volume),i(f,n+10,p[e+1].frequency)}return f}}(e.assets||(e.assets={}))}(pxt||(pxt={})),function(e){!function(t){t.createStreamAsync=function(t,n){return e.Cloud.privatePostAsync("streams",{target:t,name:n||"data"}).then((e=>e))},t.postPayloadAsync=function(t,n){return e.Util.assert(!!t.privatekey),e.Cloud.privatePostAsync(`${t.id}/data?privatekey=${t.privatekey}`,n)}}(e.streams||(e.streams={}))}(pxt||(pxt={})),function(e){!function(t){let n,r;!function(e){e[e.userSpaceOnUse=0]="userSpaceOnUse",e[e.objectBoundingBox=1]="objectBoundingBox"}(n=t.PatternUnits||(t.PatternUnits={})),function(e){e[e.em=0]="em",e[e.ex=1]="ex",e[e.px=2]="px",e[e.in=3]="in",e[e.cm=4]="cm",e[e.mm=5]="mm",e[e.pt=6]="pt",e[e.pc=7]="pc",e[e.percent=8]="percent"}(r=t.LengthUnit||(t.LengthUnit={}));class i{constructor(e){this.el=S(e)}attr(e){return Object.keys(e).forEach((t=>{this.setAttribute(t,e[t])})),this}setAttribute(e,t){return this.el.setAttribute(e,t.toString()),this}setAttributeNS(e,t,n){return this.el.setAttributeNS(e,t,n.toString()),this}id(e){return this.setAttribute("id",e)}setClass(...e){return this.setAttribute("class",e.join(" "))}appendClass(t){return e.BrowserUtils.addClass(this.el,t),this}removeClass(t){e.BrowserUtils.removeClass(this.el,t)}title(e){this.titleElement||(this.titleElement=S("title"),this.el.firstChild?this.el.insertBefore(this.titleElement,this.el.firstChild):this.el.appendChild(this.titleElement)),this.titleElement.textContent=e}setVisible(e){return this.setAttribute("visibility",e?"visible":"hidden")}}t.BaseElement=i;class a extends i{draw(e){const t=function(e){switch(e){case"text":return new d;case"circle":return new f;case"rect":return new p;case"line":return new _;case"polygon":return new h;case"polyline":return new g;case"path":return new y;default:return new u(e)}}(e);return this.el.appendChild(t.el),t}element(e,t){return t(this.draw(e)),this}group(){const e=new o;return this.el.appendChild(e.el),e}appendChild(e){this.el.appendChild(e.el)}onDown(e){return t.events.down(this.el,e),this}onUp(e){return t.events.up(this.el,e),this}onMove(e){return t.events.move(this.el,e),this}onEnter(e){return t.events.enter(this.el,e),this}onLeave(e){return t.events.leave(this.el,e),this}onClick(e){return t.events.click(this.el,e),this}}t.DrawContext=a;t.SVG=class extends a{constructor(e){super("svg"),e&&e.appendChild(this.el)}define(e){return this.defs||(this.defs=new c(this.el)),e(this.defs),this}};class o extends a{constructor(e){super("g"),e&&e.appendChild(this.el)}translate(e,t){return this.left=e,this.top=t,this.updateTransform()}scale(e){return this.scaleFactor=e,this.updateTransform()}def(){return new c(this.el)}style(){return new l(this.el)}updateTransform(){let e="";return null!=this.left&&(e+=`translate(${this.left} ${this.top})`),null!=this.scaleFactor&&(e+=` scale(${this.scaleFactor})`),this.setAttribute("transform",e),this}}t.Group=o;class s extends a{constructor(){super("pattern")}units(e){return this.setAttribute("patternUnits",e===n.objectBoundingBox?"objectBoundingBox":"userSpaceOnUse")}contentUnits(e){return this.setAttribute("patternContentUnits",e===n.objectBoundingBox?"objectBoundingBox":"userSpaceOnUse")}size(e,t){return this.setAttribute("width",e),this.setAttribute("height",t),this}}t.Pattern=s;class c extends i{constructor(e){super("defs"),e.appendChild(this.el)}create(e,t){let n;switch(e){case"path":n=new y;break;case"pattern":n=new s;break;case"radialGradient":n=new x;break;case"linearGradient":n=new b;break;case"clipPath":n=new k;break;default:n=new i(e)}return n.id(t),this.el.appendChild(n.el),n}}t.DefsElement=c;class l extends i{constructor(e){super("style"),e.appendChild(this.el)}content(e){this.el.textContent=e}}t.StyleElement=l;class u extends a{at(e,t){return this.setAttribute("x",e),this.setAttribute("y",t),this}moveTo(e,t){return this.at(e,t)}fill(e,t){return this.setAttribute("fill",e),null!=t&&this.opacity(t),this}opacity(e){return this.setAttribute("fill-opacity",e)}stroke(e,t){return this.setAttribute("stroke",e),null!=t&&this.strokeWidth(t),this}strokeWidth(e){return this.setAttribute("stroke-width",e)}strokeOpacity(e){return this.setAttribute("stroke-opacity",e)}clipPath(e){return this.setAttribute("clip-path",e)}}t.Drawable=u;class d extends u{constructor(e){super("text"),null!=e&&this.text(e)}text(e){return this.el.textContent=e,this}fontFamily(e){return this.setAttribute("font-family",e)}fontSize(e,t){return this.setAttribute("font-size",C(e,t))}offset(e,t,n){return 0!==e&&this.setAttribute("dx",C(e,n)),0!==t&&this.setAttribute("dy",C(t,n)),this}anchor(e){return this.setAttribute("text-anchor",e)}}t.Text=d;class p extends u{constructor(){super("rect")}width(e,t=r.px){return this.setAttribute("width",C(e,t))}height(e,t=r.px){return this.setAttribute("height",C(e,t))}corner(e){return this.corners(e,e)}corners(e,t){return this.setAttribute("rx",e),this.setAttribute("ry",t),this}size(e,t,n=r.px){return this.width(e,n),this.height(t,n),this}}t.Rect=p;class f extends u{constructor(){super("circle")}at(e,t){return this.setAttribute("cx",e),this.setAttribute("cy",t),this}radius(e){return this.setAttribute("r",e)}}t.Circle=f;class _ extends u{constructor(){super("line")}at(e,t,n,r){return this.from(e,t),null!=n&&null!=r&&this.to(n,r),this}from(e,t){return this.setAttribute("x1",e),this.setAttribute("y1",t),this}to(e,t){return this.setAttribute("x2",e),this.setAttribute("y2",t),this}}t.Line=_;class m extends u{points(e){return this.setAttribute("points",e)}with(e){return this.points(e.map((({x:e,y:t})=>e+" "+t)).join(","))}}t.PolyElement=m;class g extends m{constructor(){super("polyline")}}t.Polyline=g;class h extends m{constructor(){super("polygon")}}t.Polygon=h;class y extends u{constructor(){super("path"),this.d=new T}update(){return this.setAttribute("d",this.d.toAttribute())}path(e){return e(this.d),this.update()}setD(e){return this.setAttribute("d",e),this}}t.Path=y;t.Image=class extends u{constructor(){super("image")}src(e){return this.setAttributeNS("http://www.w3.org/1999/xlink","href",e)}width(e,t=r.px){return this.setAttribute("width",C(e,t))}height(e,t=r.px){return this.setAttribute("height",C(e,t))}size(e,t,n=r.px){return this.width(e,n),this.height(t,n),this}};class v extends i{units(e){return this.setAttribute("gradientUnits",e===n.objectBoundingBox?"objectBoundingBox":"userSpaceOnUse")}stop(e,t,n){const r=S("stop");return r.setAttribute("offset",e+"%"),null!=t&&r.setAttribute("stop-color",t),null!=n&&r.setAttribute("stop-opacity",n),this.el.appendChild(r),this}}t.Gradient=v;class b extends v{constructor(){super("linearGradient")}start(e,t){return this.setAttribute("x1",e),this.setAttribute("y1",t),this}end(e,t){return this.setAttribute("x2",e),this.setAttribute("y2",t),this}}t.LinearGradient=b;class x extends v{constructor(){super("radialGradient")}center(e,t){return this.setAttribute("cx",e),this.setAttribute("cy",t),this}focus(e,t,n){return this.setAttribute("fx",e),this.setAttribute("fy",t),this.setAttribute("fr",n),this}radius(e){return this.setAttribute("r",e)}}t.RadialGradient=x;class k extends a{constructor(){super("clipPath")}clipPathUnits(e){return e?this.setAttribute("clipPathUnits","objectBoundingBox"):this.setAttribute("clipPathUnits","userSpaceOnUse")}}function S(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}t.ClipPath=k;class T{constructor(){this.ops=[]}clear(){this.ops=[]}moveTo(e,t){return this.op("M",e,t)}moveBy(e,t){return this.op("m",e,t)}lineTo(e,t){return this.op("L",e,t)}lineBy(e,t){return this.op("l",e,t)}cCurveTo(e,t,n,r,i,a){return this.op("C",e,t,n,r,i,a)}cCurveBy(e,t,n,r,i,a){return this.op("c",e,t,n,r,i,a)}qCurveTo(e,t,n,r){return this.op("Q",e,t,n,r)}qCurveBy(e,t,n,r){return this.op("q",e,t,n,r)}sCurveTo(e,t,n,r){return this.op("S",e,t,n,r)}sCurveBy(e,t,n,r){return this.op("s",e,t,n,r)}tCurveTo(e,t){return this.op("T",e,t)}tCurveBy(e,t){return this.op("t",e,t)}arcTo(e,t,n,r,i,a,o){return this.op("A",e,t,n,r?1:0,i?1:0,a,o)}arcBy(e,t,n,r,i,a,o){return this.op("a",e,t,n,r?1:0,i?1:0,a,o)}close(){return this.op("z")}toAttribute(){return this.ops.map((e=>e.op+" "+e.args.join(" "))).join(" ")}op(e,...t){return this.ops.push({op:e,args:t}),this}}function C(e,t){switch(t){case r.em:return e+"em";case r.ex:return e+"ex";case r.px:return e+"px";case r.in:return e+"in";case r.cm:return e+"cm";case r.mm:return e+"mm";case r.pt:return e+"pt";case r.pc:return e+"pc";case r.percent:return e+"%";default:return e.toString()}}t.PathContext=T}(e.svgUtil||(e.svgUtil={}))}(pxt||(pxt={})),function(e){!function(e){!function(e){function t(){return"undefined"!=typeof window&&("ontouchstart"in window||navigator&&navigator.maxTouchPoints>0)}function n(){return"undefined"!=typeof window&&!!window.PointerEvent}e.isTouchEnabled=t,e.hasPointerEvents=n,e.down=function(e,r){n()?e.addEventListener("pointerdown",r):t()?(e.addEventListener("mousedown",r),e.addEventListener("touchstart",r)):e.addEventListener("mousedown",r)},e.up=function(e,r){n()?e.addEventListener("pointerup",r):(t(),e.addEventListener("mouseup",r))},e.enter=function(e,r){n()?e.addEventListener("pointerover",(e=>{r(!!(1&e.buttons))})):t()?e.addEventListener("touchstart",(e=>{r(!0)})):e.addEventListener("mouseover",(e=>{r(!!(1&e.buttons))}))},e.leave=function(e,r){n()?e.addEventListener("pointerleave",r):t()?e.addEventListener("touchend",r):e.addEventListener("mouseleave",r)},e.move=function(e,r){n()?e.addEventListener("pointermove",r):t()?e.addEventListener("touchmove",r):e.addEventListener("mousemove",r)},e.click=function(e,t){e.addEventListener("click",t)}}(e.events||(e.events={}))}(e.svgUtil||(e.svgUtil={}))}(pxt||(pxt={})),function(e){!function(e){!function(t){class n extends e.Text{at(e,t){return this.cx=e,this.cy=t,this.rePosition(),this}text(e,t=12){return super.text(e),this.fontSizePixels=t,this.setAttribute("font-size",t+"px"),this.rePosition(),this}rePosition(){null!=this.cx&&null!=this.cy&&null!=this.fontSizePixels&&(this.setAttribute("x",this.cx),this.setAttribute("y",this.cy),this.setAttribute("text-anchor","middle"),this.setAttribute("alignment-baseline","middle"))}}t.CenteredText=n}(e.helpers||(e.helpers={}))}(e.svgUtil||(e.svgUtil={}))}(pxt||(pxt={})),function(e){e.IMAGE_MIME_TYPE="image/x-mkcd-f4",e.TILEMAP_MIME_TYPE="application/mkcd-tilemap",e.ANIMATION_MIME_TYPE="application/mkcd-animation",e.SONG_MIME_TYPE="application/mkcd-song";class t{constructor(){this.assets=[],this.takenNames={},this.listeners=[]}add(e){if(this.takenNames[e.id])return this.update(e.id,e);{const t=s(e);return this.takenNames[t.id]=!0,this.takenNames[_(t)]=!0,t.meta.displayName&&t.meta.displayName!==t.id&&(this.takenNames[t.meta.displayName]&&(t.meta.displayName=this.generateNewDisplayName(t.meta.displayName)),this.takenNames[t.meta.displayName]=!0),this.assets.push(t),s(t)}}getSnapshot(e){return e?this.assets.filter((t=>e(t))).map(s):this.assets.map(s)}update(e,t){let n;if(this.takenNames[e]){p(this.lookupByID(e),t)?n=t:(this.removeByID(e),n=this.add(t),this.notifyListener(t.internalID))}else n=this.add(t);return n}removeByID(e){const t=this.lookupByID(e);this.assets=this.assets.filter((t=>t.id!==e)),delete this.takenNames[e],t&&delete this.takenNames[_(t)],(null==t?void 0:t.meta.displayName)&&delete this.takenNames[null==t?void 0:t.meta.displayName]}getByID(e){const t=this.lookupByID(e);return t&&s(t)}getByDisplayName(e){if(this.takenNames[e])for(const t of this.assets)if(t.meta.displayName===e||_(t)===e)return s(t)}isIDTaken(e){return!!this.takenNames[e]}clone(){const e=new t;return e.assets=this.getSnapshot(),e.takenNames=Object.assign({},this.takenNames),e}serializeToJRes(e={}){for(const t of this.assets)d(t,e);return e}addListener(e,t){this.listeners.push({internalID:e,callback:t})}removeListener(e){this.listeners=this.listeners.filter((t=>t.callback!==e))}diff(e){let t={before:[],after:[]},n={};for(const r of e.assets){n[r.internalID]=!0;const e=this.lookupByInternalID(r.internalID);e&&p(r,e)||(t.before.push(r),t.after.push(e))}for(const e of this.assets.filter((e=>!n[e.internalID])))t.before.push(null),t.after.push(e);return t}applyDiff(t,n=!1){const r=n?t.after:t.before,i=n?t.before:t.after;e.Util.assert(r.length===i.length);for(let e=0;e<r.length;e++)r[e]?(this.removeByInternalID(r[e].internalID),i[e]&&this.assets.push(i[e]),this.notifyListener(r[e].internalID)):(this.assets.push(i[e]),this.notifyListener(i[e].internalID));this.takenNames={};for(const t of this.assets)e.Util.assert(!this.takenNames[t.id]),this.takenNames[t.id]=!0,this.takenNames[_(t)]=!0,t.meta.displayName&&(t.meta.displayName!==t.id&&e.Util.assert(!this.takenNames[t.meta.displayName]),this.takenNames[t.meta.displayName]=!0)}lookupByID(e){for(const t of this.assets)if(t.id===e)return t;return null}lookupByInternalID(e){for(const t of this.assets)if(t.internalID===e)return t;return null}removeByInternalID(e){this.assets=this.assets.filter((t=>t.internalID!==e))}notifyListener(e){for(const t of this.listeners)t.internalID===e&&t.callback()}generateNewDisplayName(e){e=e.replace(/\d+$/,"");let t=0;for(;this.takenNames[e+t];)++t;return e+t}}class n{constructor(){this.needsRebuild=!0,this.nextID=0,this.nextInternalID=0,this.committedState={revision:0,tilemaps:new t,tiles:new t,animations:new t,images:new t,songs:new t},this.state={revision:this.nextID++,tilemaps:new t,tiles:new t,animations:new t,images:new t,songs:new t},this.gallery={revision:0,tilemaps:new t,tiles:new t,animations:new t,images:new t,songs:new t},this.undoStack=[],this.redoStack=[]}getNewInternalId(){return this.nextInternalID++}createNewImage(t=16,n=16){this.onChange();const r=this.generateNewID("image"),i=new e.sprite.Bitmap(t,n).data(),a={internalID:this.getNewInternalId(),id:r,type:"image",bitmap:i,meta:{},jresData:e.sprite.base64EncodeBitmap(i)};return this.state.images.add(a)}createNewAnimation(t=16,n=16){this.onChange();const r=this.generateNewID("animation"),i=new e.sprite.Bitmap(t,n).data(),a={internalID:this.getNewInternalId(),id:r,type:"animation",frames:[i],interval:500,meta:{}};return this.state.animations.add(a)}createNewAnimationFromData(e,t=500,n){this.onChange();const r=this.generateNewID("animation"),i={internalID:this.getNewInternalId(),id:r,type:"animation",frames:e,interval:t,meta:{displayName:n}};return this.state.animations.add(i)}getGalleryTiles(e){return this.extensionTileSets?this.extensionTileSets.map((t=>t.tileSets.find((t=>t.tileWidth===e)))).filter((e=>null==e?void 0:e.tiles.length)):null}getProjectImages(){return this.state.images.getSnapshot()}getProjectTiles(t,n){const r=this.state.tiles.getSnapshot((e=>e.bitmap.width===t));return 0===r.length?n?(this.createNewTile(new e.sprite.Bitmap(t,t).data()),this.getProjectTiles(t,!1)):null:{tileWidth:t,tiles:r}}createNewTile(t,n,r){this.onChange(),n&&!this.isNameTaken("tile",n)||(n=this.generateNewID("tile"));const i={internalID:this.getNewInternalId(),id:n,type:"tile",jresData:e.sprite.base64EncodeBitmap(t),bitmap:t,meta:{displayName:r},isProjectTile:!0};return this.state.tiles.add(i)}createNewProjectImage(t,n){this.onChange();const r={internalID:this.getNewInternalId(),id:this.generateNewID("image"),type:"image",jresData:e.sprite.base64EncodeBitmap(t),meta:{displayName:n},bitmap:t};return this.state.images.add(r)}createNewSong(t,n){this.onChange();const r={internalID:this.getNewInternalId(),id:this.generateNewID("song"),type:"song",song:e.assets.music.cloneSong(t),meta:{displayName:n}};return this.state.songs.add(r)}updateTile(t){this.onChange();const n=this.resolveProjectTileByInternalID(t.internalID);if(n){if(this.state.tiles.update(n.id,t),n.id!==t.id||!e.sprite.bitmapEquals(n.bitmap,t.bitmap))for(const e of this.getAssets("tilemap"))e.data.tileset.tiles.some((e=>e.internalID===t.internalID))&&(e.data.tileset.tiles=e.data.tileset.tiles.map((e=>e.internalID===t.internalID?t:e)),this.updateTilemap(e.id,e.data));return t}return null}deleteTile(e){this.onChange(),this.state.tiles.removeByID(e)}getProjectTilesetJRes(){const t={};return this.state.tiles.serializeToJRes(t),this.state.tilemaps.serializeToJRes(t),t["*"]={mimeType:"image/x-mkcd-f4",dataEncoding:"base64",namespace:e.sprite.TILE_NAMESPACE},t}getProjectAssetsJRes(){const t={};return this.state.images.serializeToJRes(t),this.state.animations.serializeToJRes(t),this.state.songs.serializeToJRes(t),t["*"]={mimeType:"image/x-mkcd-f4",dataEncoding:"base64",namespace:e.sprite.IMAGES_NAMESPACE},t}getTilemap(e){return this.state.tilemaps.getByID(e)}updateTilemap(e,t){const n=this.state.tilemaps.getByID(e);if(n){this.onChange();const r=Object.assign(Object.assign({},n),{data:t});return this.state.tilemaps.update(e,r),r}return null}createNewTilemap(e,t,n=16,r=16){return this.createNewTilemapFromData(this.blankTilemap(t,n,r),e)}blankTilemap(t,n=16,r=16){const i=new e.sprite.Tilemap(n,r),a=new e.sprite.Bitmap(n,r),o={tileWidth:t,tiles:[this.getTransparency(t)]};return new e.sprite.TilemapData(i,o,a.data())}resolveTile(e){return this.lookupAsset("tile",e)}resolveProjectTileByInternalID(e){return this.state.tiles.getSnapshot((t=>t.internalID===e))[0]}resolveTileByBitmap(t){const n=e.sprite.base64EncodeBitmap(t);return this.state.tiles.getSnapshot((e=>e.jresData===n))[0]}getTransparency(t){const n=e.sprite.TILE_NAMESPACE+".transparency"+t;let r=this.state.tiles.getByID(n);if(!r){const i=new e.sprite.Bitmap(t,t).data();return r={internalID:this.getNewInternalId(),id:n,type:"tile",bitmap:i,jresData:e.sprite.base64EncodeBitmap(i),meta:{},isProjectTile:!0},this.state.tiles.add(r)}return r}createNewTilemapFromData(e,t){this.onChange();const n=this.generateNewIDInternal("tilemap",t||lf("level"));return this.state.tilemaps.add({internalID:this.getNewInternalId(),id:n,type:"tilemap",meta:{displayName:t||n},data:e}),[n,e]}cloneState(){return{revision:this.state.revision,images:this.state.images.clone(),tilemaps:this.state.tilemaps.clone(),animations:this.state.animations.clone(),tiles:this.state.tiles.clone(),songs:this.state.songs.clone()}}undo(){if(this.state.revision!==this.committedState.revision&&this.pushUndo(),this.undoStack.length){const e=this.undoStack.pop();this.state.tiles.applyDiff(e.tiles,!0),this.state.images.applyDiff(e.images,!0),this.state.tilemaps.applyDiff(e.tilemaps,!0),this.state.animations.applyDiff(e.animations,!0),this.state.songs.applyDiff(e.songs,!0),this.state.revision=e.beforeRevision,this.redoStack.push(e),this.committedState=this.cloneState(),this.needsRebuild=!0}}redo(){if(this.redoStack.length){const e=this.redoStack.pop();this.state.tiles.applyDiff(e.tiles),this.state.images.applyDiff(e.images),this.state.tilemaps.applyDiff(e.tilemaps),this.state.animations.applyDiff(e.animations),this.state.songs.applyDiff(e.songs),this.state.revision=e.afterRevision,this.undoStack.push(e),this.committedState=this.cloneState(),this.needsRebuild=!0}}pushUndo(){this.undoStack.length&&this.committedState.revision===this.state.revision||(this.redoStack=[],this.undoStack.push({beforeRevision:this.committedState.revision,afterRevision:this.state.revision,tiles:this.state.tiles.diff(this.committedState.tiles),images:this.state.images.diff(this.committedState.images),tilemaps:this.state.tilemaps.diff(this.committedState.tilemaps),animations:this.state.animations.diff(this.committedState.animations),songs:this.state.songs.diff(this.committedState.songs)}),this.committedState=this.cloneState(),this.cleanupTemporaryAssets())}revision(){return this.state.revision}encodeTilemap(t,n){const r=t.tilemap.data(),i=new Uint8ClampedArray(5+r.data.length+t.layers.data.length);return i[0]=t.tileset.tileWidth,i[1]=255&r.width,i[2]=r.width>>8&255,i[3]=255&r.height,i[4]=r.height>>8&255,i.set(r.data,5),i.set(t.layers.data,5+r.data.length),{id:n,mimeType:e.TILEMAP_MIME_TYPE,data:btoa(e.sprite.uint8ArrayToHex(i)),tileset:t.tileset.tiles.map((e=>e.id))}}forceUpdate(){this.onChange()}isNameTaken(e,t){const n=t=>y(this.state,e).isIDTaken(t)||y(this.gallery,e).isIDTaken(t),r=m(e,t),i=r&&r!==t;return n(t)||i&&n(r)}isAssetUsed(t,n,r){var i,a,o;if(((null===(a=null===(i=t.meta)||void 0===i?void 0:i.blockIDs)||void 0===a?void 0:a.filter((e=>!r||(null==r?void 0:r.indexOf(e))<0)))||[]).length>0)return!0;if("tile"==t.type)for(const e of this.getAssets("tilemap"))if(!((null==r?void 0:r.indexOf(e.id))>=0)&&e.data.tileset.tiles.some((e=>e.id===t.id)))return!0;if(n){const i=e.Util.escapeForRegex(_(t)),a=e.Util.escapeForRegex(null===(o=t.meta)||void 0===o?void 0:o.displayName)||"";let s;switch(t.type){case"tile":s=`myTiles.${i}|assets.tile\`${i}\``,a&&(s+=`|assets.tile\`${a}\``);break;case"tilemap":s=`tilemap\`${i}\``;break;case"animation":s=`assets.animation\`${i}\``,a&&(s+=`|assets.animation\`${a}\``);break;case"song":s=`assets.song\`${i}\``,a&&(s+=`|assets.song\`${a}\``);break;default:s=`assets.image\`${i}\``,a&&(s+=`|assets.image\`${a}\``)}const c=new RegExp(s,"gm");let l;switch(t.type){case"tile":l=`myTiles.${i}|assets.tile("""${i}""")`,a&&(l+=`|assets.tile("""${a}""")`);break;case"tilemap":l=`assets.tilemap("""${i}""")`;break;case"animation":l=`assets.animation("""${i}""")`,a&&(l+=`|assets.animation("""${a}""")`);break;case"song":l=`assets.song("""${i}""")`,a&&(l+=`|assets.song("""${a}""")`);break;default:l=`assets.image("""${i}""")`,a&&(l+=`|assets.image("""${a}""")`)}const u=new RegExp(l,"gm");for(let e of Object.keys(n)){if((null==r?void 0:r.indexOf(e))>=0)continue;const t=n[e];if(e.match(/((?!\.g).{2}|^.{0,1})\.ts$/i)){if(t.content.match(c))return!0}else if(e.endsWith(".py")&&t.content.match(u))return!0}}return!1}lookupAsset(e,t){return y(this.state,e).getByID(t)||y(this.gallery,e).getByID(t)}lookupAssetByName(e,t){return y(this.state,e).getByDisplayName(t)}getAssets(e){return y(this.state,e).getSnapshot()}getGalleryAssets(e){return y(this.gallery,e).getSnapshot()}lookupBlockAsset(e,t){return y(this.state,e).getSnapshot((e=>{var n,r;return-1!==(null===(r=null===(n=e.meta)||void 0===n?void 0:n.blockIDs)||void 0===r?void 0:r.indexOf(t))}))[0]}updateAsset(e){switch(this.onChange(),e.type){case"tile":return this.updateTile(e);default:return y(this.state,e.type).update(e.id,e)}}duplicateAsset(e,t){var n;this.onChange();const r=s(e),i=t||(null===(n=r.meta)||void 0===n?void 0:n.displayName);let a;switch(e.type){case"image":a=this.createNewProjectImage(r.bitmap,i);break;case"tile":a=this.createNewTile(r.bitmap,null,i);break;case"tilemap":const[t,n]=this.createNewTilemapFromData(r.data,i);a=this.getTilemap(t);break;case"animation":a=this.createNewAnimationFromData(r.frames,r.interval,i);break;case"song":a=this.createNewSong(e.song,i)}return a}removeAsset(e){this.onChange(),y(this.state,e.type).removeByID(e.id)}addChangeListener(e,t){y(this.state,e.type).addListener(e.internalID,t)}removeChangeListener(e,t){y(this.state,e).removeListener(t)}loadPackage(e){const t=e.sortedDeps();this.extensionTileSets=[];for(const e of t){const t="this"===e.id,n=this.readImages(e.parseJRes(),t);for(const r of n)r.meta.package=e.id,"tile"===r.type?t?this.state.tiles.add(r):this.gallery.tiles.add(r):"image"===r.type?t?this.state.images.add(r):this.gallery.images.add(r):"animation"===r.type?t?this.state.animations.add(r):this.gallery.animations.add(r):t?this.state.songs.add(r):this.gallery.songs.add(r)}for(const n of t){const t="this"===n.id;for(const i of r(n.parseJRes()))t?this.state.tilemaps.add({internalID:this.getNewInternalId(),type:"tilemap",id:i.id,meta:{displayName:i.displayName||i.id,package:e.id},data:o(i,(e=>this.resolveTile(e)))}):this.gallery.tilemaps.add({internalID:this.getNewInternalId(),type:"tilemap",id:i.id,meta:{displayName:i.displayName||i.id,package:e.id},data:o(i,(e=>this.gallery.tiles.getByID(e)))})}this.committedState=this.cloneState(),this.undoStack=[],this.redoStack=[]}loadTilemapJRes(t,n=!1,i=!1){t=e.inflateJRes(t);const a=this.readImages(t,!i).filter((e=>"tile"===e.type));let s={};if(i)for(const e of a)this.gallery.tiles.add(e);else for(const e of a){if(n){const t=this.resolveTileByBitmap(e.bitmap);if(t){s[e.id]=t.id;continue}}const t=this.createNewTile(e.bitmap,e.id,e.meta.displayName);t.id!==e.id&&(s[e.id]=t.id)}const c=i?this.gallery:this.state;for(const e of r(t))c.tilemaps.add({internalID:this.getNewInternalId(),type:"tilemap",id:e.id,meta:{displayName:e.displayName||e.id},data:o(e,(e=>(s[e]&&(e=s[e]),this.resolveTile(e))))})}loadAssetsJRes(t,n=!1){t=e.inflateJRes(t);const r=[],i=n?this.gallery:this.state;for(const n of Object.keys(t)){const a=t[n];if(a.tilemapTile)i.tiles.add(this.generateImage(a,"tile"));else if(a.mimeType===e.IMAGE_MIME_TYPE)i.images.add(this.generateImage(a,"image"));else if(a.mimeType===e.ANIMATION_MIME_TYPE){const[e,t]=this.generateAnimation(a);t?r.push(e):i.animations.add(e)}else a.mimeType===e.SONG_MIME_TYPE&&i.songs.add(this.generateSong(a))}for(const e of r)i.animations.add(this.inflateAnimation(e,i.images.getSnapshot()))}removeInactiveBlockAssets(e){function t(t){const n=t.getSnapshot((t=>{var n;return!t.meta.displayName&&(null===(n=t.meta.blockIDs)||void 0===n?void 0:n.some((t=>-1===e.indexOf(t))))})),r=[];for(const t of n)1===t.meta.blockIDs.length?r.push(t):(t.meta.blockIDs=t.meta.blockIDs.filter((t=>-1!==e.indexOf(t))),0===t.meta.blockIDs.length&&r.push(t));for(const e of r)t.removeByID(e.id)}t(this.state.images),t(this.state.tiles),t(this.state.tilemaps),t(this.state.animations),t(this.state.songs)}clone(){var e;const t=new n;return t.committedState=c(this.committedState),t.state=c(this.state),t.gallery=c(this.gallery),t.extensionTileSets=null===(e=this.extensionTileSets)||void 0===e?void 0:e.map((e=>Object.assign(Object.assign({},e),{tileSets:e.tileSets.map((e=>Object.assign(Object.assign({},e),{tiles:e.tiles.map((e=>s(e)))})))}))),t.needsRebuild=this.needsRebuild,t.nextID=this.nextID,t.nextInternalID=this.nextInternalID,t.undoStack=this.undoStack.map((e=>l(e))),t.redoStack=this.undoStack.map((e=>l(e))),t}generateImage(t,n){return{internalID:this.getNewInternalId(),type:n,id:t.id,meta:{displayName:t.displayName,tags:t.tags},jresData:t.data,bitmap:e.sprite.getBitmapFromJResURL(`data:${e.IMAGE_MIME_TYPE};base64,${t.data}`).data()}}generateSong(t){return{internalID:this.getNewInternalId(),type:"song",id:t.id,meta:{displayName:t.displayName,tags:t.tags},song:e.assets.music.decodeSongFromHex(t.data)}}generateAnimation(e){if("json"===e.dataEncoding){let t;try{t=JSON.parse(e.data)}catch(t){console.warn("could not parse json data of '"+e.id+"'")}return[{internalID:this.getNewInternalId(),type:"animation",meta:{displayName:e.displayName,tags:e.tags},id:e.id,frames:[],frameIds:t.frames,interval:100,flippedHorizontal:t.flippedHorizontal},!0]}return[Object.assign(Object.assign({},g(e)),{internalID:this.getNewInternalId()}),!1]}inflateAnimation(t,n){return t.frames=t.frameIds.map((e=>n.find((t=>t.id===e)).bitmap)),t.flippedHorizontal&&(t.frames=t.frames.map((t=>{const n=e.sprite.Bitmap.fromData(t),r=new e.sprite.Bitmap(t.width,t.height);for(let e=0;e<r.width;e++)for(let t=0;t<r.height;t++)r.set(e,t,n.get(n.width-e-1,t));return r.data()}))),t}generateNewID(t){switch(t){case"animation":return this.generateNewIDInternal("animation",e.sprite.ANIMATION_PREFIX,e.sprite.ANIMATION_NAMESPACE);case"image":return this.generateNewIDInternal("image",e.sprite.IMAGE_PREFIX,e.sprite.IMAGES_NAMESPACE);case"tile":return this.generateNewIDInternal("tile",e.sprite.TILE_PREFIX,e.sprite.TILE_NAMESPACE);case"tilemap":return this.generateNewIDInternal("tilemap",lf("level"));case"song":return this.generateNewIDInternal("song",e.sprite.SONG_PREFIX,e.sprite.SONG_NAMESPACE)}}generateNewIDInternal(e,t,n){t=t.replace(/\d+$/,"");const r=n?n+"."+t:t;let i=1;for(;this.isNameTaken(e,r+i);)++i;return r+i}onChange(){this.needsRebuild=!0,this.state.revision=this.nextID++}readImages(t,n=!1){const r=[],i=[];for(const a of Object.keys(t)){const o=t[a];if(o.tilemapTile){const e=this.generateImage(o,"tile");e.isProjectTile=n,r.push(e)}else if(o.mimeType===e.IMAGE_MIME_TYPE)r.push(this.generateImage(o,"image"));else if(o.mimeType===e.ANIMATION_MIME_TYPE){const[e,t]=this.generateAnimation(o);t?i.push(e):r.push(e)}else o.mimeType===e.SONG_MIME_TYPE&&r.push(this.generateSong(o))}for(const e of i)r.push(this.inflateAnimation(e,r));return r}cleanupTemporaryAssets(){const e=this.state.images.getSnapshot((e=>{var t;return!e.meta.displayName&&!(null===(t=e.meta.blockIDs)||void 0===t?void 0:t.length)}));for(const t of e)this.state.images.removeByID(t.id)}}function r(t){const n=[];for(const r of Object.keys(t)){const i=t[r];i.mimeType===e.TILEMAP_MIME_TYPE&&n.push(i)}return n}function i(e,t){return`\n    helpers._registerFactory("${e}", function(name: string) {\n        switch(helpers.stringTrim(name)) {\n`+t.map((e=>e.keys.filter((e=>!!e)).map((e=>`            case "${e}":`)).join("\n")+`return ${e.expression};`)).join("\n")+"\n        }\n        return null;\n    })\n"}function a(t){return e.sprite.Bitmap.fromData(t).copy().data()}function o(t,n){const r=atob(t.data),i=e.U.fromHex(r),a=i[1]|i[2]<<8,o=i[3]|i[4]<<8,s={tileWidth:i[0],tiles:t.tileset.map((e=>n&&n(e)||{id:e}))},c=i.slice(5,5+a*o),l=new e.sprite.Tilemap(a,o,0,0,new Uint8ClampedArray(c)),u=i.slice(5+c.length),d=new e.sprite.Bitmap(a,o,0,0,new Uint8ClampedArray(u)).data();return new e.sprite.TilemapData(l,s,d)}function s(t){switch(t.meta=Object.assign({},t.meta),t.type){case"tile":case"image":return Object.assign(Object.assign({},t),{bitmap:a(t.bitmap)});case"animation":return Object.assign(Object.assign({},t),{frames:t.frames.map((e=>a(e)))});case"tilemap":return Object.assign(Object.assign({},t),{data:t.data.cloneData()});case"song":return Object.assign(Object.assign({},t),{song:e.assets.music.cloneSong(t.song)})}}function c(e){return{revision:e.revision,tilemaps:e.tilemaps.clone(),images:e.images.clone(),animations:e.animations.clone(),songs:e.songs.clone(),tiles:e.tiles.clone()}}function l(e){return Object.assign(Object.assign({},e),{animations:u(e.animations),tiles:u(e.tiles),images:u(e.images),tilemaps:u(e.tilemaps),songs:u(e.songs)})}function u(e){return Object.assign(Object.assign({},e),{before:e.before.map((e=>s(e))),after:e.after.map((e=>s(e)))})}function d(t,n){const r=t.id.substr(t.id.lastIndexOf(".")+1),i=t.meta.tags;switch(t.type){case"image":if(n[r]=t.jresData,t.meta.displayName||(null==i?void 0:i.length)){const a={data:t.jresData,mimeType:e.IMAGE_MIME_TYPE};t.meta.displayName&&(a.displayName=t.meta.displayName),(null==i?void 0:i.length)&&(a.tags=i),n[r]=a}break;case"tile":const a={data:t.jresData,mimeType:e.IMAGE_MIME_TYPE,tilemapTile:!0,displayName:t.meta.displayName};(null==i?void 0:i.length)&&(a.tags=i),n[r]=a;break;case"tilemap":const o=function(t,n,r){const i=t.tilemap.data(),a=new Uint8ClampedArray(5+i.data.length+t.layers.data.length);return a[0]=t.tileset.tileWidth,a[1]=255&i.width,a[2]=i.width>>8&255,a[3]=255&i.height,a[4]=i.height>>8&255,a.set(i.data,5),a.set(t.layers.data,5+i.data.length),{id:n,mimeType:e.TILEMAP_MIME_TYPE,data:btoa(e.sprite.uint8ArrayToHex(a)),tileset:t.tileset.tiles.map((e=>e.id)),displayName:r}}(t.data,t.id,t.meta.displayName);n[o.id]=o;break;case"animation":n[r]=function(t){var n;const r={namespace:t.id.substr(0,t.id.lastIndexOf(".")),id:t.id.substr(t.id.lastIndexOf(".")+1),mimeType:e.ANIMATION_MIME_TYPE,data:e.sprite.encodeAnimationString(t.frames,t.interval),displayName:t.meta.displayName};(null===(n=t.meta.tags)||void 0===n?void 0:n.length)&&(r.tags=t.meta.tags);return r}(t);break;case"song":const s={data:e.assets.music.encodeSongToHex(t.song),mimeType:e.SONG_MIME_TYPE,displayName:t.meta.displayName,namespace:e.sprite.SONG_NAMESPACE+"."};(null==i?void 0:i.length)&&(s.tags=i),n[r]=s}}function p(t,n){if(t==n)return!0;if(t.id!==n.id||t.type!==n.type||!e.U.arrayEquals(t.meta.tags,n.meta.tags)||!e.U.arrayEquals(t.meta.blockIDs,n.meta.blockIDs)||t.meta.displayName!==n.meta.displayName)return!1;switch(t.type){case"image":case"tile":return e.sprite.bitmapEquals(t.bitmap,n.bitmap);case"animation":const r=n;return t.interval===r.interval&&e.U.arrayEquals(t.frames,r.frames,e.sprite.bitmapEquals);case"tilemap":return t.data.equals(n.data);case"song":return e.assets.music.songEquals(t.song,n.song)}}function f(e){const t=/^\s*(?:(?:assets\s*\.\s*(image|tile|animation|tilemap|song))|(tilemap))\s*(?:`|\(""")([^`"]+)(?:`|"""\))\s*$/m.exec(e);if(t){return{type:t[1]||t[2],name:t[3].trim()}}}function _(e){return m(e.type,e.id)}function m(t,n,r=!1){let i;switch(t){case"image":i=e.sprite.IMAGES_NAMESPACE+".";break;case"tile":i=e.sprite.TILE_NAMESPACE+".";break;case"tilemap":i="";break;case"animation":i=e.sprite.ANIMATION_NAMESPACE+".";break;case"song":i=e.sprite.SONG_NAMESPACE+"."}if(i)if(n.startsWith(i)){const e=n.substr(i.length);if(-1===e.indexOf("."))return e}else if(!r)return null;return n}function g(t){const n=atob(t.data),r=new Uint8ClampedArray(e.U.fromHex(n)),i=h(r,0),a=h(r,2),o=h(r,4),s=h(r,6),c=Math.ceil(a*o/2);let l=8;const u=[];for(let e=0;e<s;e++){const e=r.slice(l,l+c);u.push({x0:0,y0:0,width:a,height:o,data:e}),l+=c}let d=t.id;return d.startsWith(t.namespace)||(d=t.namespace+"."+d,d=d.replace(/\.\./g,".")),{type:"animation",internalID:0,id:d,interval:i,frames:u,meta:{displayName:t.displayName,tags:t.tags}}}function h(e,t){return e[t]|e[t+1]<<8}function y(e,t){switch(t){case"animation":return e.animations;case"image":return e.images;case"tile":return e.tiles;case"tilemap":return e.tilemaps;case"song":return e.songs}}e.TilemapProject=n,e.emitGalleryDeclarations=function(t,n){var r;const i=Object.keys(t);let a="";const s={},c={},l={},u=e=>{let n=t[e].namespace||t["*"].namespace;const r=t[e].id||e;return n&&(n.endsWith(".")&&(n=n.slice(0,n.length-1)),!r.startsWith(n+"."))?n+"."+r:r};t["*"]&&(l["*"]=Object.assign(Object.assign({},t["*"]),{namespace:n}));for(const e of i){if("*"===e)continue;const r=t[e],i=u(e);let a=ts.pxtc.escapeIdentifier(r.displayName||i.split(".").pop());if(s[a]){const e=a;let t=2;for(;s[a];)a=e+t,t++}s[a]=!0,c[i]=n+"."+a}for(const s of i){if("*"===s)continue;const i=t[s];let d,p,f=i.mimeType||(null===(r=t["*"])||void 0===r?void 0:r.mimeType);const _=c[u(s)].split(".").pop();let m=i.tags;if(m||(m=[],-1!==_.toLowerCase().indexOf("background")&&m.push("background"),-1!==_.toLowerCase().indexOf("dialog")&&m.push("dialog"),i.tilemapTile&&m.push("tile")),f===e.IMAGE_MIME_TYPE)p="image.ofBuffer(hex``)",d=i.tilemapTile?"images._tile":"images._image";else if(f===e.ANIMATION_MIME_TYPE){p=`[${g(i).frames.map((t=>e.sprite.bitmapToImageLiteral(e.sprite.Bitmap.fromData(t),"typescript"))).join(",")}]`}else if(f===e.TILEMAP_MIME_TYPE){const t=o(i);p=e.sprite.encodeTilemap(t,"typescript",c)}else f===e.SONG_MIME_TYPE&&(p=`hex\`${i.data}\``);a+="    //% fixedInstance jres whenUsed\n",d&&(a+=`    //% blockIdentity=${d}\n`),m.length&&(a+=`    //% tags="${m.join(" ")}"\n`),a+=`    export const ${_} = ${p};\n`,"string"==typeof i?l[_]=i:(l[_]=Object.assign(Object.assign({},i),{id:c[u(s)],tags:m}),i.namespace&&(l[_].namespace=n,i.namespace.endsWith(".")&&(l[_].namespace+=".")),l[_].tileset&&(l[_].tileset=i.tileset.map((e=>c[e]||e))))}const d=lf("Auto-generated code. Do not edit.");return[l,`// ${d}\nnamespace ${n} {\n${a}\n}\n// ${d}\n`]},e.emitTilemapsFromJRes=function(t){const n=Object.keys(t);let r="";const a=[],s=[];for(const i of n){if("*"===i)continue;const n=t[i];if(n.tilemapTile){let e=i;-1!==e.indexOf(".")&&(e=e.split(".").slice(-1)[0]),r+="    //% fixedInstance jres blockIdentity=images._tile\n",r+=`    export const ${e} = image.ofBuffer(hex\`\`);\n`,s.push({keys:[n.displayName,m("tile",i,!0)],expression:i})}if(n.mimeType===e.TILEMAP_MIME_TYPE){const t=o(n);a.push({keys:[n.displayName,m("tilemap",n.id)],expression:e.sprite.encodeTilemap(t,"typescript")})}}a.length&&(r+=i("tilemap",a)),s.length&&(r+=i("tile",s));const c=lf("Auto-generated code. Do not edit.");return`// ${c}\nnamespace ${e.sprite.TILE_NAMESPACE} {\n${r}\n}\n// ${c}\n`},e.emitProjectImages=function(t){const n=Object.keys(t);let r="";const a=[],o=[],s=[];for(const r of n){if("*"===r)continue;const n=t[r];if("string"==typeof n||n.mimeType===e.IMAGE_MIME_TYPE){let t,i=[m("image",r,!0)];"string"==typeof n?t=e.sprite.bitmapToImageLiteral(e.sprite.getBitmapFromJResURL(n),"typescript"):(t=e.sprite.bitmapToImageLiteral(e.sprite.getBitmapFromJResURL(n.data),"typescript"),i.push(n.displayName)),a.push({keys:i,expression:t})}else if(n.mimeType===e.ANIMATION_MIME_TYPE){const t=g(n);o.push({keys:[n.displayName,m("animation",r,!0)],expression:`[${t.frames.map((t=>e.sprite.bitmapToImageLiteral(e.sprite.Bitmap.fromData(t),"typescript"))).join(", ")}]`})}else n.mimeType===e.SONG_MIME_TYPE&&s.push({keys:[m("song",r,!0),n.displayName],expression:`hex\`${n.data}\``})}const c=lf("Auto-generated code. Do not edit.");return r+=i("image",a),r+=i("animation",o),r+=i("song",s),`// ${c}\nnamespace ${e.sprite.IMAGES_NAMESPACE} {\n${r}\n}\n// ${c}\n`},e.cloneAsset=s,e.assetEquals=p,e.validateAssetName=function(e){return!!e&&!/[\u0000-\u001f\u0021-\u002c\u002e\u002f\u003a-\u0040\u005b-\u005e\u0060\u007b-\u007f]/.test(e)},e.getTSReferenceForAsset=function(e,t=!1){var n;let r;if(r=(null===(n=e.meta)||void 0===n?void 0:n.displayName)?e.meta.displayName:_(e),!r)return"image"===e.type||"tile"===e.type?e.id:void 0;const i=t?'("""':"`",a=t?'""")':"`";switch(e.type){case"tile":return`assets.tile${i}${r}${a}`;case"image":return`assets.image${i}${r}${a}`;case"animation":return`assets.animation${i}${r}${a}`;case"tilemap":return`tilemap${i}${r}${a}`;case"song":return`assets.song${i}${r}${a}`}},e.parseAssetTSReference=f,e.lookupProjectAssetByTSReference=function(e,t){const n=f(e);if(n){const{type:e,name:r}=n;switch(e){case"tile":return t.lookupAssetByName("tile",r);case"image":return t.lookupAssetByName("image",r);case"tilemap":return t.lookupAssetByName("tilemap",r)||t.lookupAsset("tilemap",r);case"animation":return t.lookupAssetByName("animation",r);case"song":return t.lookupAssetByName("song",r)}}},e.getDefaultAssetDisplayName=function(e){switch(e){case"image":return lf("myImage");case"tile":return lf("myTile");case"tilemap":return lf("level");case"animation":return lf("myAnim");case"song":return lf("mySong");default:return lf("asset")}},e.getShortIDForAsset=_}(pxt||(pxt={})),function(e){!function(t){t.blockColors={loops:"#107c10",logic:"#006970",math:"#712672",variables:"#A80000",functions:"#005a9e",text:"#996600",arrays:"#A94400",advanced:"#3c3c3c",addpackage:"#717171",search:"#000",debug:"#e03030",default:"#dddddd",topblocks:"#aa8f00",recipes:"#717171"},t.blockIcons={loops:"",logic:"",math:"",variables:"",functions:"",text:"",arrays:"",advancedcollapsed:"",advancedexpanded:"",more:"",addpackage:"",search:"",debug:"",default:"",topblocks:"",recipes:""};let n="";function r(e){const t=function(e,t,n){let r=0,i=0,a=0;if(0==t)r=n,i=n,a=n;else{let o=Math.floor(e/60),s=e/60-o,c=n*(1-t),l=n*(1-t*s),u=n*(1-t*(1-s));switch(o){case 1:r=l,i=n,a=c;break;case 2:r=c,i=n,a=u;break;case 3:r=c,i=l,a=n;break;case 4:r=u,i=c,a=n;break;case 5:r=n,i=c,a=l;break;case 6:case 0:r=n,i=u,a=c}}return[Math.floor(r),Math.floor(i),Math.floor(a)]}(e,.45,165.75);return`#${i(t[0])}${i(t[1])}${i(t[2])}`}function i(e){const t=e.toString(16);return 1==t.length?"0"+t:t}t.appendToolboxIconCss=function(t,r){if(!(n.indexOf(t)>-1))if(1===r.length){const i=e.Util.unicodeToChar(r);n+=`\n                .blocklyTreeIcon.${t}::before {\n                    content: "${i}";\n                }\n            `}else n+=`\n                .blocklyTreeIcon.${t} {\n                    background-image: url("${e.Util.pathJoin(e.webConfig.commitCdnUrl,encodeURI(r))}")!important;\n                    width: 30px;\n                    height: 100%;\n                    background-size: 20px !important;\n                    background-repeat: no-repeat !important;\n                    background-position: 50% 50% !important;\n                }\n            `},t.getNamespaceColor=function(t){return t=t.toLowerCase(),e.appTarget.appTheme.blockColors&&e.appTarget.appTheme.blockColors[t]?e.appTarget.appTheme.blockColors[t]:e.toolbox.blockColors[t]?e.toolbox.blockColors[t]:""},t.getNamespaceIcon=function(t){return t=t.toLowerCase(),e.appTarget.appTheme.blockIcons&&e.appTarget.appTheme.blockIcons[t]?e.appTarget.appTheme.blockIcons[t]:e.toolbox.blockIcons[t]?e.toolbox.blockIcons[t]:""},t.advancedTitle=function(){return e.Util.lf("{id:category}Advanced")},t.addPackageTitle=function(){return e.Util.lf("{id:category}Extensions")},t.recipesTitle=function(){return e.Util.lf("{id:category}Tutorials")},t.convertColor=function(e){var t;e=(t=e)?"0x"==t.substring(0,2)?"#"+t.substring(2):t:"#000000";const n=parseInt(e);return isNaN(n)?e:r(n)},t.hueToRgb=r,t.fadeColor=function(e,t,n){(e=e.replace(/[^0-9a-f]/gi,"")).length<6&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]);let r="#";for(let i=0;i<3;i++){let a=parseInt(e.substr(2*i,2),16);a=Math.round(Math.min(Math.max(0,n?a+a*t:a-a*t),255));let o=a.toString(16);r+=("00"+o).substr(o.length)}return r}}(e.toolbox||(e.toolbox={}))}(pxt||(pxt={})),function(e){!function(t){const n=/^##[^#](.*)$([\s\S]*?)(?=^##[^#]|$(?![\r\n]))/gim,r=/^###[^#](.*)$([\s\S]*?)(?=^###[^#]|$(?![\r\n]))/gim;function i(){return/``` *(sim|block|blocks|filterblocks|spy|ghost|typescript|ts|js|javascript|template|python|jres|assetjson|customts|simtheme)\s*\n([\s\S]*?)\n```/gim}function a(t,r,i){let a=r||n,l=[];if(t.replace(a,(function(e,t,n){n=n.trim();let{header:r,hint:a}=function(e,t){let n,r=e=c(e);if(t){const t=/#+ ~ tutorialhint([\s\S]*)/i;r=e.replace(t,(function(e,t){return n=t,""}))}else{const t=/(^[\s\S]*?\S)\s*((```|\[?\!\[[\s\S]+?\]\(\S+?\)\]?)[\s\S]*)/im;let i=e.match(t);i&&i.length>2&&(r=i[1].trim(),n=i[2].trim())}return{header:r,hint:n}}(n,i&&i.explicitHints);const u=o("local",n),d=s("local",n);let p={title:t.match(/^\{.*\}$/)?void 0:t.replace(/@(fullscreen|unplugged|showdialog|showhint|tutorialCompleted|resetDiff)/gi,"").trim(),contentMd:n,headerContentMd:r,localBlockConfig:u,localValidationConfig:d};return/@(fullscreen|unplugged|showdialog|showhint)/i.test(t)&&(p.showHint=!0),/@(unplugged|showdialog)/i.test(t)&&(p.showDialog=!0),/@tutorialCompleted/.test(t)&&(p.tutorialCompleted=!0),/@resetDiff/.test(t)&&(p.resetDiff=!0),a&&(p.hintContentMd=a),l.push(p),""})),0!=t.indexOf("# Not found"))return l;e.debug("tutorial not found")}function o(e,t){let n={md:"",blocks:[]};const r=new RegExp(`\`\`\`\\s*blockconfig\\.${e}\\s*\\n([\\s\\S]*?)\\n\`\`\``,"gmi");return t.replace(r,((e,t)=>(n.md+=`${t}\n`,""))),n}function s(t,n){let r;const i=new RegExp(`\`\`\`\\s*validation\\.${t}\\s*\\n([\\s\\S]*?)\\n\`\`\``,"gmi");if(n.replace(i,((e,t)=>(r=t,""))),!r||""==r)return null;return{validatorsMetadata:e.getSectionsFromMarkdownMetadata(r).map((e=>({validatorType:e.header,properties:e.attributes})))}}function c(e){if(!e)return e;return e.replace(/```(filterblocks|package|ghost|config|template|jres|assetjson|simtheme|customts|blockconfig\.local|blockconfig\.global|validation\.local|validation\.global)\s*\n([\s\S]*?)\n```/gim,"").trim()}function l(t){if(!t)return;const n=JSON.parse(t);return{[e.TILEMAP_JRES]:n[e.TILEMAP_JRES],[e.TILEMAP_CODE]:n[e.TILEMAP_CODE],[e.IMAGES_JRES]:n[e.IMAGES_JRES],[e.IMAGES_CODE]:n[e.IMAGES_CODE]}}function u(t){const n=e.Util.jsonTryParse(t);if(!n)return;const r={};return n.theme&&(r.theme=n.theme),n.palette&&(r.palette=n.palette),r}t.parseTutorial=function(t){const{metadata:i,body:d}=function(t){const n=/### @(\S+) ([ \S]+)/gi,r={},i=t.replace(n,(function(e,t,n){try{r[t]=JSON.parse(n)}catch(e){r[t]=n}return""})),a=r;void 0!==a.explicitHints&&e.appTarget.appTheme&&e.appTarget.appTheme.tutorialExplicitHints&&(a.explicitHints=!0);return{metadata:a,body:i}}(t),{steps:p,activities:f}=function(e,t){if(t&&t.activities)return function(e,t){let i=[],o=[];return e.replace(n,(function(e,n,s){let c=o.length;o.push({name:n||lf("Activity {0}",c),step:i.length});let l=a(s,r,t);return l=l.map((e=>(e.activity=c,e))),i=i.concat(l),""})),{steps:i,activities:o}}(e,t);{let n=a(e,null,t);return(!n||n.length<1)&&(n=a(e,r,t)),{steps:n,activities:null}}}(d,i),_=function(e){let t=e.match(/^#[^#](.*)$/im);return t&&t.length>1?t[1].trim():null}(d);if(!p)return;const{code:m,templateCode:g,editor:h,language:y,jres:v,assetJson:b,customTs:x,simThemeJson:k}=function(t){let n;const r=/``` *(sim|block|blocks|filterblocks|spy|ghost|typescript|ts|js|javascript|template|python|jres|assetjson|customts|simtheme)\s*\n([\s\S]*?)\n```/gim;let i,a,o,s,c,l,u=[];return t.replace(/((?!.)\s)+/g,"\n").replace(r,(function(t,n,r){switch(n){case"block":case"blocks":case"blockconfig.local":case"blockconfig.global":case"filterblocks":if(!d(e.BLOCKS_PROJECT_NAME))return;break;case"spy":case"python":if(!d(e.PYTHON_PROJECT_NAME))return;"python"==n&&(o=n);break;case"typescript":case"ts":case"javascript":case"js":if(!d(e.JAVASCRIPT_PROJECT_NAME))return;break;case"template":a=r;break;case"jres":i=r;break;case"assetjson":s=r;break;case"simtheme":l=r;break;case"customts":c=r,r=""}return u.push("python"==n?`\n${r}\n`:`{\n${r}\n}`),""})),n=n||e.BLOCKS_PROJECT_NAME,{code:u,templateCode:a,editor:n,language:o,jres:i,assetJson:s,customTs:c,simThemeJson:l};function d(t){return n&&n!=t?(e.debug("tutorial ambiguous: contains snippets of different types"),!1):(n=t,!0)}}(d);(!0===i.diffs||!1!==i.diffs&&!0!==i.noDiffs&&(h==e.BLOCKS_PROJECT_NAME&&e.appTarget.appTheme.tutorialBlocksDiff||h!=e.BLOCKS_PROJECT_NAME&&e.appTarget.appTheme.tutorialTextDiff))&&function(e,t){let n;function r(e){const t={typescript:"diff",spy:"diffspy",blocks:"diffblocks",python:"diff"},r=/\s*(\/\/|#)\s*@highlight/gm;return e?e.replace(/```(typescript|spy|python|blocks|ghost|template)((?:.|[\r\n])+)```/,(function(e,i,a){const o=n,s=/^(template|ghost)$/.test(i),c=r.test(a);return a=a.replace(/^\n+/,"").replace(/\n+$/,""),c&&(a=a.replace(r,"")),n=a,!o||c||s?e:`\`\`\`${t[i]}\n${o}\n----------\n${a}\n\`\`\``})):e}e.forEach(((e,i)=>{if((e.resetDiff||t&&t.find((e=>e.step==i)))&&(n=void 0),e.hintContentMd){const t=r(e.hintContentMd);if(t&&t!=e.hintContentMd)return void(e.hintContentMd=t)}if(e.headerContentMd){const t=r(e.headerContentMd);if(t&&t!=e.headerContentMd)return void(e.headerContentMd=t)}}))}(p,f);const S=l(b),T=u(k),C=o("global",t),E=s("global",t);return p.forEach((e=>{e.contentMd=c(e.contentMd),e.headerContentMd=c(e.headerContentMd),e.hintContentMd=c(e.hintContentMd)})),{editor:h,title:_,steps:p,activities:f,code:m,templateCode:g,metadata:i,language:y,jres:v,assetFiles:S,customTs:x,globalBlockConfig:C,globalValidationConfig:E,simTheme:T}},t.getMetadataRegex=i,t.highlight=function(e){let t=e.textContent;if(t=t.replace(/img\s*\(\s*"{3}[\s\da-f.#tngrpoyw]*"{3}\s*\)/g,'img(""" """)'),t=t.replace(/img\s*`[\s\da-f.#tngrpoyw]*`\s*/g,"img` `"),!/@highlight/.test(t))return void(e.textContent=t);e.textContent="";const n=t.split("\n");for(let t=0;t<n.length;++t){t>0&&t<n.length&&e.appendChild(document.createTextNode("\n"));let r=n[t];if(/@highlight/.test(r)){if(r=n[++t],void 0!==r){const t=document.createElement("span");t.className="highlight-line",t.textContent=r,e.appendChild(t)}}else e.appendChild(document.createTextNode(r))}},t.getTutorialOptions=function(t,n,r,i,a){var o;const s=e.tutorial.parseTutorial(t);if(!s)throw new Error(lf("Invalid tutorial format"));return{options:{tutorial:n,tutorialName:s.title||r,tutorialReportId:i,tutorialStep:0,tutorialReady:!0,tutorialHintCounter:0,tutorialStepInfo:s.steps,tutorialActivityInfo:s.activities,tutorialMd:t,tutorialCode:s.code,tutorialRecipe:!!a,templateCode:s.templateCode,autoexpandStep:!(null===(o=s.metadata)||void 0===o?void 0:o.autoexpandOff),metadata:s.metadata,language:s.language,jres:s.jres,assetFiles:s.assetFiles,customTs:s.customTs,globalBlockConfig:s.globalBlockConfig,globalValidationConfig:s.globalValidationConfig,simTheme:s.simTheme},editor:s.editor}},t.parseCachedTutorialInfo=function(t,n){let r=e.Util.jsonTryParse(t);return r?e.BrowserUtils.tutorialInfoDbAsync().then((e=>{if(n&&r[n]){const t=r[n];t.usedBlocks&&t.hash&&e.setWithHashAsync(n,t.snippetBlocks,t.hash,t.highlightBlocks,t.validateBlocks)}else for(let t of Object.keys(r)){const n=r[t];n.usedBlocks&&n.hash&&e.setWithHashAsync(t,n.snippetBlocks,n.hash,n.highlightBlocks,n.validateBlocks)}})).catch((e=>{})):Promise.resolve()},t.resolveLocalizedMarkdown=function(t,n,r){const i=(r||t.fileName||"README")+".md";let a;const[o,s,c]=e.Util.normalizeLanguageCode(e.Util.userLanguage());return a=o&&s&&c?n[`_locales/${o}/${i}`]||n[`_locales/${c}/${i}`]||n[`_locales/${s}/${i}`]:n[`_locales/${o}/${i}`],a=a||n[i],a},t.parseAssetJson=l,t.parseSimThemeJson=u,t.getTutorialHighlightedBlocks=async function(t){const n=await e.BrowserUtils.tutorialInfoDbAsync(),r=await n.getAsync(t.tutorial,t.tutorialCode);return null==r?void 0:r.highlightBlocks},t.getTutorialValidateBlocks=async function(t){const n=await e.BrowserUtils.tutorialInfoDbAsync(),r=await n.getAsync(t.tutorial,t.tutorialCode);return null==r?void 0:r.validateBlocks},t.getRequiredBlockCounts=function(e){if(!e)return;const t={},n=e["validate-exists"];return n&&n.forEach((e=>{t[e]=(t[e]||0)+1})),t},t.getTutorialStepHash=function(t){const{tutorialStepInfo:n,tutorialStep:r}=t,i=function(e){let t=[];return null==e||e.replace(/((?!.)\s)+/g,"\n").replace(/``` *(block|blocks)\s*\n([\s\S]*?)\n```/gim,(function(e,n,r){return t.push(`{\n${r}\n}`),""})),t}(n[r].hintContentMd);return e.BrowserUtils.getTutorialCodeHash(i)}}(e.tutorial||(e.tutorial={}))}(pxt||(pxt={})),function(e){!function(t){let n;t.flattenDiagnosticMessageText=function(e,t){if("string"==typeof e)return e;{let n=e,r="",i=0;for(;n;){if(i){r+=t;for(let e=0;e<i;e++)r+="  "}r+=n.messageText,i++,n=n.next}return r}},function(e){e[e.ES3=0]="ES3",e[e.ES5=1]="ES5",e[e.ES6=2]="ES6",e[e.ES2015=2]="ES2015",e[e.Latest=2]="Latest"}(n=t.ScriptTarget||(t.ScriptTarget={})),t.isIdentifierStart=function(e,t){return e>=65&&e<=90||e>=97&&e<=122||36===e||95===e||e>127&&s(e,t)},t.isIdentifierPart=function(e,t){return e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||36===e||95===e||e>127&&function(e,t){return t>=n.ES5?c(e,i):c(e,o)}(e,t)},t.reservedWords=["abstract","any","as","break","case","catch","class","continue","const","constructor","debugger","declare","default","delete","do","else","enum","export","extends","false","finally","for","from","function","get","if","implements","import","in","instanceof","interface","is","let","module","namespace","new","null","package","private","protected","public","require","global","return","set","static","super","switch","symbol","this","throw","true","try","type","typeof","var","void","while","with","yield","async","await","of","Math"],t.keywordTypes=["boolean","number","string"],t.escapeIdentifier=function(n){if(!n)return"_";let r=n.replace(/\s+/g,"_").replace(/[^a-zA-Z0-9_$]/g,(t=>e.pxtc.isIdentifierPart(t.charCodeAt(0),e.pxtc.ScriptTarget.ES5)?t:""));return r&&e.pxtc.isIdentifierStart(r.charCodeAt(0),e.pxtc.ScriptTarget.ES5)&&-1===t.reservedWords.indexOf(r)||(r="_"+r),r};const r=[170,170,181,181,186,186,192,214,216,246,248,705,710,721,736,740,748,748,750,750,880,884,886,887,890,893,902,902,904,906,908,908,910,929,931,1013,1015,1153,1162,1319,1329,1366,1369,1369,1377,1415,1488,1514,1520,1522,1568,1610,1646,1647,1649,1747,1749,1749,1765,1766,1774,1775,1786,1788,1791,1791,1808,1808,1810,1839,1869,1957,1969,1969,1994,2026,2036,2037,2042,2042,2048,2069,2074,2074,2084,2084,2088,2088,2112,2136,2208,2208,2210,2220,2308,2361,2365,2365,2384,2384,2392,2401,2417,2423,2425,2431,2437,2444,2447,2448,2451,2472,2474,2480,2482,2482,2486,2489,2493,2493,2510,2510,2524,2525,2527,2529,2544,2545,2565,2570,2575,2576,2579,2600,2602,2608,2610,2611,2613,2614,2616,2617,2649,2652,2654,2654,2674,2676,2693,2701,2703,2705,2707,2728,2730,2736,2738,2739,2741,2745,2749,2749,2768,2768,2784,2785,2821,2828,2831,2832,2835,2856,2858,2864,2866,2867,2869,2873,2877,2877,2908,2909,2911,2913,2929,2929,2947,2947,2949,2954,2958,2960,2962,2965,2969,2970,2972,2972,2974,2975,2979,2980,2984,2986,2990,3001,3024,3024,3077,3084,3086,3088,3090,3112,3114,3123,3125,3129,3133,3133,3160,3161,3168,3169,3205,3212,3214,3216,3218,3240,3242,3251,3253,3257,3261,3261,3294,3294,3296,3297,3313,3314,3333,3340,3342,3344,3346,3386,3389,3389,3406,3406,3424,3425,3450,3455,3461,3478,3482,3505,3507,3515,3517,3517,3520,3526,3585,3632,3634,3635,3648,3654,3713,3714,3716,3716,3719,3720,3722,3722,3725,3725,3732,3735,3737,3743,3745,3747,3749,3749,3751,3751,3754,3755,3757,3760,3762,3763,3773,3773,3776,3780,3782,3782,3804,3807,3840,3840,3904,3911,3913,3948,3976,3980,4096,4138,4159,4159,4176,4181,4186,4189,4193,4193,4197,4198,4206,4208,4213,4225,4238,4238,4256,4293,4295,4295,4301,4301,4304,4346,4348,4680,4682,4685,4688,4694,4696,4696,4698,4701,4704,4744,4746,4749,4752,4784,4786,4789,4792,4798,4800,4800,4802,4805,4808,4822,4824,4880,4882,4885,4888,4954,4992,5007,5024,5108,5121,5740,5743,5759,5761,5786,5792,5866,5870,5872,5888,5900,5902,5905,5920,5937,5952,5969,5984,5996,5998,6e3,6016,6067,6103,6103,6108,6108,6176,6263,6272,6312,6314,6314,6320,6389,6400,6428,6480,6509,6512,6516,6528,6571,6593,6599,6656,6678,6688,6740,6823,6823,6917,6963,6981,6987,7043,7072,7086,7087,7098,7141,7168,7203,7245,7247,7258,7293,7401,7404,7406,7409,7413,7414,7424,7615,7680,7957,7960,7965,7968,8005,8008,8013,8016,8023,8025,8025,8027,8027,8029,8029,8031,8061,8064,8116,8118,8124,8126,8126,8130,8132,8134,8140,8144,8147,8150,8155,8160,8172,8178,8180,8182,8188,8305,8305,8319,8319,8336,8348,8450,8450,8455,8455,8458,8467,8469,8469,8473,8477,8484,8484,8486,8486,8488,8488,8490,8493,8495,8505,8508,8511,8517,8521,8526,8526,8544,8584,11264,11310,11312,11358,11360,11492,11499,11502,11506,11507,11520,11557,11559,11559,11565,11565,11568,11623,11631,11631,11648,11670,11680,11686,11688,11694,11696,11702,11704,11710,11712,11718,11720,11726,11728,11734,11736,11742,11823,11823,12293,12295,12321,12329,12337,12341,12344,12348,12353,12438,12445,12447,12449,12538,12540,12543,12549,12589,12593,12686,12704,12730,12784,12799,13312,19893,19968,40908,40960,42124,42192,42237,42240,42508,42512,42527,42538,42539,42560,42606,42623,42647,42656,42735,42775,42783,42786,42888,42891,42894,42896,42899,42912,42922,43e3,43009,43011,43013,43015,43018,43020,43042,43072,43123,43138,43187,43250,43255,43259,43259,43274,43301,43312,43334,43360,43388,43396,43442,43471,43471,43520,43560,43584,43586,43588,43595,43616,43638,43642,43642,43648,43695,43697,43697,43701,43702,43705,43709,43712,43712,43714,43714,43739,43741,43744,43754,43762,43764,43777,43782,43785,43790,43793,43798,43808,43814,43816,43822,43968,44002,44032,55203,55216,55238,55243,55291,63744,64109,64112,64217,64256,64262,64275,64279,64285,64285,64287,64296,64298,64310,64312,64316,64318,64318,64320,64321,64323,64324,64326,64433,64467,64829,64848,64911,64914,64967,65008,65019,65136,65140,65142,65276,65313,65338,65345,65370,65382,65470,65474,65479,65482,65487,65490,65495,65498,65500],i=[170,170,181,181,186,186,192,214,216,246,248,705,710,721,736,740,748,748,750,750,768,884,886,887,890,893,902,902,904,906,908,908,910,929,931,1013,1015,1153,1155,1159,1162,1319,1329,1366,1369,1369,1377,1415,1425,1469,1471,1471,1473,1474,1476,1477,1479,1479,1488,1514,1520,1522,1552,1562,1568,1641,1646,1747,1749,1756,1759,1768,1770,1788,1791,1791,1808,1866,1869,1969,1984,2037,2042,2042,2048,2093,2112,2139,2208,2208,2210,2220,2276,2302,2304,2403,2406,2415,2417,2423,2425,2431,2433,2435,2437,2444,2447,2448,2451,2472,2474,2480,2482,2482,2486,2489,2492,2500,2503,2504,2507,2510,2519,2519,2524,2525,2527,2531,2534,2545,2561,2563,2565,2570,2575,2576,2579,2600,2602,2608,2610,2611,2613,2614,2616,2617,2620,2620,2622,2626,2631,2632,2635,2637,2641,2641,2649,2652,2654,2654,2662,2677,2689,2691,2693,2701,2703,2705,2707,2728,2730,2736,2738,2739,2741,2745,2748,2757,2759,2761,2763,2765,2768,2768,2784,2787,2790,2799,2817,2819,2821,2828,2831,2832,2835,2856,2858,2864,2866,2867,2869,2873,2876,2884,2887,2888,2891,2893,2902,2903,2908,2909,2911,2915,2918,2927,2929,2929,2946,2947,2949,2954,2958,2960,2962,2965,2969,2970,2972,2972,2974,2975,2979,2980,2984,2986,2990,3001,3006,3010,3014,3016,3018,3021,3024,3024,3031,3031,3046,3055,3073,3075,3077,3084,3086,3088,3090,3112,3114,3123,3125,3129,3133,3140,3142,3144,3146,3149,3157,3158,3160,3161,3168,3171,3174,3183,3202,3203,3205,3212,3214,3216,3218,3240,3242,3251,3253,3257,3260,3268,3270,3272,3274,3277,3285,3286,3294,3294,3296,3299,3302,3311,3313,3314,3330,3331,3333,3340,3342,3344,3346,3386,3389,3396,3398,3400,3402,3406,3415,3415,3424,3427,3430,3439,3450,3455,3458,3459,3461,3478,3482,3505,3507,3515,3517,3517,3520,3526,3530,3530,3535,3540,3542,3542,3544,3551,3570,3571,3585,3642,3648,3662,3664,3673,3713,3714,3716,3716,3719,3720,3722,3722,3725,3725,3732,3735,3737,3743,3745,3747,3749,3749,3751,3751,3754,3755,3757,3769,3771,3773,3776,3780,3782,3782,3784,3789,3792,3801,3804,3807,3840,3840,3864,3865,3872,3881,3893,3893,3895,3895,3897,3897,3902,3911,3913,3948,3953,3972,3974,3991,3993,4028,4038,4038,4096,4169,4176,4253,4256,4293,4295,4295,4301,4301,4304,4346,4348,4680,4682,4685,4688,4694,4696,4696,4698,4701,4704,4744,4746,4749,4752,4784,4786,4789,4792,4798,4800,4800,4802,4805,4808,4822,4824,4880,4882,4885,4888,4954,4957,4959,4992,5007,5024,5108,5121,5740,5743,5759,5761,5786,5792,5866,5870,5872,5888,5900,5902,5908,5920,5940,5952,5971,5984,5996,5998,6e3,6002,6003,6016,6099,6103,6103,6108,6109,6112,6121,6155,6157,6160,6169,6176,6263,6272,6314,6320,6389,6400,6428,6432,6443,6448,6459,6470,6509,6512,6516,6528,6571,6576,6601,6608,6617,6656,6683,6688,6750,6752,6780,6783,6793,6800,6809,6823,6823,6912,6987,6992,7001,7019,7027,7040,7155,7168,7223,7232,7241,7245,7293,7376,7378,7380,7414,7424,7654,7676,7957,7960,7965,7968,8005,8008,8013,8016,8023,8025,8025,8027,8027,8029,8029,8031,8061,8064,8116,8118,8124,8126,8126,8130,8132,8134,8140,8144,8147,8150,8155,8160,8172,8178,8180,8182,8188,8204,8205,8255,8256,8276,8276,8305,8305,8319,8319,8336,8348,8400,8412,8417,8417,8421,8432,8450,8450,8455,8455,8458,8467,8469,8469,8473,8477,8484,8484,8486,8486,8488,8488,8490,8493,8495,8505,8508,8511,8517,8521,8526,8526,8544,8584,11264,11310,11312,11358,11360,11492,11499,11507,11520,11557,11559,11559,11565,11565,11568,11623,11631,11631,11647,11670,11680,11686,11688,11694,11696,11702,11704,11710,11712,11718,11720,11726,11728,11734,11736,11742,11744,11775,11823,11823,12293,12295,12321,12335,12337,12341,12344,12348,12353,12438,12441,12442,12445,12447,12449,12538,12540,12543,12549,12589,12593,12686,12704,12730,12784,12799,13312,19893,19968,40908,40960,42124,42192,42237,42240,42508,42512,42539,42560,42607,42612,42621,42623,42647,42655,42737,42775,42783,42786,42888,42891,42894,42896,42899,42912,42922,43e3,43047,43072,43123,43136,43204,43216,43225,43232,43255,43259,43259,43264,43309,43312,43347,43360,43388,43392,43456,43471,43481,43520,43574,43584,43597,43600,43609,43616,43638,43642,43643,43648,43714,43739,43741,43744,43759,43762,43766,43777,43782,43785,43790,43793,43798,43808,43814,43816,43822,43968,44010,44012,44013,44016,44025,44032,55203,55216,55238,55243,55291,63744,64109,64112,64217,64256,64262,64275,64279,64285,64296,64298,64310,64312,64316,64318,64318,64320,64321,64323,64324,64326,64433,64467,64829,64848,64911,64914,64967,65008,65019,65024,65039,65056,65062,65075,65076,65101,65103,65136,65140,65142,65276,65296,65305,65313,65338,65343,65343,65345,65370,65382,65470,65474,65479,65482,65487,65490,65495,65498,65500],a=[170,170,181,181,186,186,192,214,216,246,248,543,546,563,592,685,688,696,699,705,720,721,736,740,750,750,890,890,902,902,904,906,908,908,910,929,931,974,976,983,986,1011,1024,1153,1164,1220,1223,1224,1227,1228,1232,1269,1272,1273,1329,1366,1369,1369,1377,1415,1488,1514,1520,1522,1569,1594,1600,1610,1649,1747,1749,1749,1765,1766,1786,1788,1808,1808,1810,1836,1920,1957,2309,2361,2365,2365,2384,2384,2392,2401,2437,2444,2447,2448,2451,2472,2474,2480,2482,2482,2486,2489,2524,2525,2527,2529,2544,2545,2565,2570,2575,2576,2579,2600,2602,2608,2610,2611,2613,2614,2616,2617,2649,2652,2654,2654,2674,2676,2693,2699,2701,2701,2703,2705,2707,2728,2730,2736,2738,2739,2741,2745,2749,2749,2768,2768,2784,2784,2821,2828,2831,2832,2835,2856,2858,2864,2866,2867,2870,2873,2877,2877,2908,2909,2911,2913,2949,2954,2958,2960,2962,2965,2969,2970,2972,2972,2974,2975,2979,2980,2984,2986,2990,2997,2999,3001,3077,3084,3086,3088,3090,3112,3114,3123,3125,3129,3168,3169,3205,3212,3214,3216,3218,3240,3242,3251,3253,3257,3294,3294,3296,3297,3333,3340,3342,3344,3346,3368,3370,3385,3424,3425,3461,3478,3482,3505,3507,3515,3517,3517,3520,3526,3585,3632,3634,3635,3648,3654,3713,3714,3716,3716,3719,3720,3722,3722,3725,3725,3732,3735,3737,3743,3745,3747,3749,3749,3751,3751,3754,3755,3757,3760,3762,3763,3773,3773,3776,3780,3782,3782,3804,3805,3840,3840,3904,3911,3913,3946,3976,3979,4096,4129,4131,4135,4137,4138,4176,4181,4256,4293,4304,4342,4352,4441,4447,4514,4520,4601,4608,4614,4616,4678,4680,4680,4682,4685,4688,4694,4696,4696,4698,4701,4704,4742,4744,4744,4746,4749,4752,4782,4784,4784,4786,4789,4792,4798,4800,4800,4802,4805,4808,4814,4816,4822,4824,4846,4848,4878,4880,4880,4882,4885,4888,4894,4896,4934,4936,4954,5024,5108,5121,5740,5743,5750,5761,5786,5792,5866,6016,6067,6176,6263,6272,6312,7680,7835,7840,7929,7936,7957,7960,7965,7968,8005,8008,8013,8016,8023,8025,8025,8027,8027,8029,8029,8031,8061,8064,8116,8118,8124,8126,8126,8130,8132,8134,8140,8144,8147,8150,8155,8160,8172,8178,8180,8182,8188,8319,8319,8450,8450,8455,8455,8458,8467,8469,8469,8473,8477,8484,8484,8486,8486,8488,8488,8490,8493,8495,8497,8499,8505,8544,8579,12293,12295,12321,12329,12337,12341,12344,12346,12353,12436,12445,12446,12449,12538,12540,12542,12549,12588,12593,12686,12704,12727,13312,19893,19968,40869,40960,42124,44032,55203,63744,64045,64256,64262,64275,64279,64285,64285,64287,64296,64298,64310,64312,64316,64318,64318,64320,64321,64323,64324,64326,64433,64467,64829,64848,64911,64914,64967,65008,65019,65136,65138,65140,65140,65142,65276,65313,65338,65345,65370,65382,65470,65474,65479,65482,65487,65490,65495,65498,65500],o=[170,170,181,181,186,186,192,214,216,246,248,543,546,563,592,685,688,696,699,705,720,721,736,740,750,750,768,846,864,866,890,890,902,902,904,906,908,908,910,929,931,974,976,983,986,1011,1024,1153,1155,1158,1164,1220,1223,1224,1227,1228,1232,1269,1272,1273,1329,1366,1369,1369,1377,1415,1425,1441,1443,1465,1467,1469,1471,1471,1473,1474,1476,1476,1488,1514,1520,1522,1569,1594,1600,1621,1632,1641,1648,1747,1749,1756,1759,1768,1770,1773,1776,1788,1808,1836,1840,1866,1920,1968,2305,2307,2309,2361,2364,2381,2384,2388,2392,2403,2406,2415,2433,2435,2437,2444,2447,2448,2451,2472,2474,2480,2482,2482,2486,2489,2492,2492,2494,2500,2503,2504,2507,2509,2519,2519,2524,2525,2527,2531,2534,2545,2562,2562,2565,2570,2575,2576,2579,2600,2602,2608,2610,2611,2613,2614,2616,2617,2620,2620,2622,2626,2631,2632,2635,2637,2649,2652,2654,2654,2662,2676,2689,2691,2693,2699,2701,2701,2703,2705,2707,2728,2730,2736,2738,2739,2741,2745,2748,2757,2759,2761,2763,2765,2768,2768,2784,2784,2790,2799,2817,2819,2821,2828,2831,2832,2835,2856,2858,2864,2866,2867,2870,2873,2876,2883,2887,2888,2891,2893,2902,2903,2908,2909,2911,2913,2918,2927,2946,2947,2949,2954,2958,2960,2962,2965,2969,2970,2972,2972,2974,2975,2979,2980,2984,2986,2990,2997,2999,3001,3006,3010,3014,3016,3018,3021,3031,3031,3047,3055,3073,3075,3077,3084,3086,3088,3090,3112,3114,3123,3125,3129,3134,3140,3142,3144,3146,3149,3157,3158,3168,3169,3174,3183,3202,3203,3205,3212,3214,3216,3218,3240,3242,3251,3253,3257,3262,3268,3270,3272,3274,3277,3285,3286,3294,3294,3296,3297,3302,3311,3330,3331,3333,3340,3342,3344,3346,3368,3370,3385,3390,3395,3398,3400,3402,3405,3415,3415,3424,3425,3430,3439,3458,3459,3461,3478,3482,3505,3507,3515,3517,3517,3520,3526,3530,3530,3535,3540,3542,3542,3544,3551,3570,3571,3585,3642,3648,3662,3664,3673,3713,3714,3716,3716,3719,3720,3722,3722,3725,3725,3732,3735,3737,3743,3745,3747,3749,3749,3751,3751,3754,3755,3757,3769,3771,3773,3776,3780,3782,3782,3784,3789,3792,3801,3804,3805,3840,3840,3864,3865,3872,3881,3893,3893,3895,3895,3897,3897,3902,3911,3913,3946,3953,3972,3974,3979,3984,3991,3993,4028,4038,4038,4096,4129,4131,4135,4137,4138,4140,4146,4150,4153,4160,4169,4176,4185,4256,4293,4304,4342,4352,4441,4447,4514,4520,4601,4608,4614,4616,4678,4680,4680,4682,4685,4688,4694,4696,4696,4698,4701,4704,4742,4744,4744,4746,4749,4752,4782,4784,4784,4786,4789,4792,4798,4800,4800,4802,4805,4808,4814,4816,4822,4824,4846,4848,4878,4880,4880,4882,4885,4888,4894,4896,4934,4936,4954,4969,4977,5024,5108,5121,5740,5743,5750,5761,5786,5792,5866,6016,6099,6112,6121,6160,6169,6176,6263,6272,6313,7680,7835,7840,7929,7936,7957,7960,7965,7968,8005,8008,8013,8016,8023,8025,8025,8027,8027,8029,8029,8031,8061,8064,8116,8118,8124,8126,8126,8130,8132,8134,8140,8144,8147,8150,8155,8160,8172,8178,8180,8182,8188,8255,8256,8319,8319,8400,8412,8417,8417,8450,8450,8455,8455,8458,8467,8469,8469,8473,8477,8484,8484,8486,8486,8488,8488,8490,8493,8495,8497,8499,8505,8544,8579,12293,12295,12321,12335,12337,12341,12344,12346,12353,12436,12441,12442,12445,12446,12449,12542,12549,12588,12593,12686,12704,12727,13312,19893,19968,40869,40960,42124,44032,55203,63744,64045,64256,64262,64275,64279,64285,64296,64298,64310,64312,64316,64318,64318,64320,64321,64323,64324,64326,64433,64467,64829,64848,64911,64914,64967,65008,65019,65056,65059,65075,65076,65101,65103,65136,65138,65140,65140,65142,65276,65296,65305,65313,65338,65343,65343,65345,65370,65381,65470,65474,65479,65482,65487,65490,65495,65498,65500];function s(e,t){return t>=n.ES5?c(e,r):c(e,a)}function c(e,t){if(e<t[0])return!1;let n,r=0,i=t.length;for(;r+1<i;){if(n=r+(i-r)/2,n-=n%2,t[n]<=e&&e<=t[n+1])return!0;e<t[n]?i=n:r=n+2}return!1}let l;t.isUnicodeIdentifierStart=s,function(e){e[e.Warning=0]="Warning",e[e.Error=1]="Error",e[e.Message=2]="Message"}(l=t.DiagnosticCategory||(t.DiagnosticCategory={}))}(e.pxtc||(e.pxtc={}))}(ts||(ts={})),function(e){!function(t){function n(){return!!navigator&&!!navigator.bluetooth&&"TextDecoder"in window&&e.appTarget.appTheme.bluetoothUartConsole&&e.appTarget.appTheme.bluetoothUartFilters&&e.appTarget.appTheme.bluetoothUartFilters.length>0}function r(){return!!navigator&&!!navigator.bluetooth&&!!e.appTarget.appTheme.bluetoothPartialFlashing}t.isAvailable=function(){return n()||r()},t.hasConsole=n,t.hasPartialFlash=r,t.isValidUUID=function(e){return/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/.test(e)};class i{constructor(e,t){this.connectionTimeout=2e4,this.connectPromise=void 0,this.id=e,this.aliveToken=t}debug(t){e.debug(`${this.id}: ${t}`)}alivePromise(e){return new Promise(((t,n)=>{this.aliveToken.isCancelled()&&n(new Error),e.then((e=>t(e)),(e=>n(e)))}))}cancelConnect(){this.connectPromise=void 0}createConnectPromise(){return Promise.resolve()}connectAsync(){return this.connectPromise||(this.connectPromise=this.alivePromise(this.createConnectPromise())),e.Util.promiseTimeout(this.connectionTimeout,this.connectPromise,"connection timeout").then((()=>this.aliveToken.throwIfCancelled())).catch((e=>{throw this.connectPromise=void 0,e}))}disconnect(){this.cancelConnect()}kill(){this.disconnect(),this.aliveToken.cancel()}}t.BLERemote=i;class a extends i{constructor(e,t,n){super(e,t.aliveToken),this.device=t,this.autoReconnect=n,this.autoReconnectDelay=1e3,this.disconnectOnAutoReconnect=!1,this.reconnectPromise=void 0,this.failedConnectionServicesVersion=-1,this.handleDisconnected=this.handleDisconnected.bind(this),this.device.device.addEventListener("gattserverdisconnected",this.handleDisconnected)}handleDisconnected(t){this.aliveToken.isCancelled()||(this.disconnect(),this.autoReconnect&&!this.reconnectPromise&&(this.reconnectPromise=e.U.delay(this.autoReconnectDelay).then((()=>this.exponentialBackoffConnectAsync(8,500))).finally((()=>this.reconnectPromise=void 0))))}exponentialBackoffConnectAsync(t,n){return this.debug("retry connect"),this.aliveToken.throwIfCancelled(),this.connectAsync().then((()=>{this.aliveToken.throwIfCancelled(),this.debug("reconnect success"),this.reconnectPromise=void 0})).catch((r=>(this.debug(`reconnect error ${r.message}`),this.aliveToken.throwIfCancelled(),this.device.isPaired?this.autoReconnect?0==t?(this.debug("give up, max tries"),void(this.reconnectPromise=void 0)):this.failedConnectionServicesVersion==this.device.servicesVersion?(this.debug("services haven't changed, giving up"),void(this.reconnectPromise=void 0)):(this.debug(`retry connect ${n}ms... (${t} tries left)`),this.device.connected&&(this.failedConnectionServicesVersion=this.device.servicesVersion),this.disconnectOnAutoReconnect&&this.device.disconnect(),e.U.delay(n).then((()=>this.exponentialBackoffConnectAsync(--t,1.8*n)))):(this.debug("autoreconnect disabled"),void(this.reconnectPromise=void 0)):(this.debug("give up, device unpaired"),void(this.reconnectPromise=void 0)))))}}t.BLEService=a;class o extends a{constructor(e,t,n,r){super(e,t,!0),this.device=t,this.serviceUUID=n,this.txCharacteristicUUID=r,this.handleValueChanged=this.handleValueChanged.bind(this)}createConnectPromise(){return this.debug("connecting"),this.device.connectAsync().then((()=>this.alivePromise(this.device.gatt.getPrimaryService(this.serviceUUID)))).then((e=>(this.debug("service connected"),this.service=e,this.alivePromise(this.service.getCharacteristic(this.txCharacteristicUUID))))).then((e=>(this.debug("tx characteristic connected"),this.txCharacteristic=e,this.txCharacteristic.addEventListener("characteristicvaluechanged",this.handleValueChanged),this.txCharacteristic.startNotifications()))).then((()=>{e.tickEvent("webble.connected",{id:this.id})}))}handlePacket(e){}handleValueChanged(e){const t=e.target.value;this.handlePacket(t)}disconnect(){if(super.disconnect(),this.txCharacteristic&&this.device&&this.device.connected)try{this.txCharacteristic.stopNotifications(),this.txCharacteristic.removeEventListener("characteristicvaluechanged",this.handleValueChanged)}catch(t){e.log(`${this.id}: error ${t.message}`)}this.service=void 0,this.txCharacteristic=void 0}}t.BLETXService=o;class s extends o{constructor(e){super("hf2",e,s.SERVICE_UUID,s.CHARACTERISTIC_TX_UUID),this.device=e}handlePacket(e){const t=e.getUint8(0);switch(192&t){case s.BLEHF2_FLAG_SERIAL_OUT:case s.BLEHF2_FLAG_SERIAL_ERR:const n=Math.min(e.byteLength-1,-193&t);let r="";for(let t=0;t<n;++t)r+=String.fromCharCode(e.getUint8(t+1));r&&window.postMessage({type:"serial",id:this.device.name||"hf2",data:r},"*")}}}s.SERVICE_UUID="b112f5e6-2679-30da-a26e-0273b6043849",s.CHARACTERISTIC_TX_UUID="b112f5e6-2679-30da-a26e-0273b604384a",s.BLEHF2_FLAG_SERIAL_OUT=128,s.BLEHF2_FLAG_SERIAL_ERR=192,t.HF2Service=s;class c extends o{constructor(e){super("uart",e,c.SERVICE_UUID,c.CHARACTERISTIC_TX_UUID),this.device=e}handlePacket(e){const t=(new window.TextDecoder).decode(e);t&&window.postMessage({type:"serial",id:this.device.name||"uart",data:t},"*")}}let l;c.SERVICE_UUID="6e400001-b5a3-f393-e0a9-e50e24dcca9e",c.CHARACTERISTIC_TX_UUID="6e400002-b5a3-f393-e0a9-e50e24dcca9e",t.UARTService=c,function(e){e[e.Idle=1]="Idle",e[e.StatusRequested=2]="StatusRequested",e[e.PairingModeRequested=4]="PairingModeRequested",e[e.RegionDALRequested=8]="RegionDALRequested",e[e.RegionMakeCodeRequested=16]="RegionMakeCodeRequested",e[e.Flash=32]="Flash",e[e.EndOfTransmision=64]="EndOfTransmision",e[e.USBFlashRequired=128]="USBFlashRequired"}(l||(l={}));class u extends a{constructor(e){super("partial flashing",e,!1),this.device=e,this.state=l.Idle,this.disconnectOnAutoReconnect=!0,this.handleCharacteristic=this.handleCharacteristic.bind(this)}clearFlashData(){this.version=0,this.mode=0,this.regions=[],this.chunkDelay=u.CHUNK_MIN_DELAY,this.hex=void 0,this.bin=void 0,this.magicOffset=void 0,this.dalHash=void 0,this.makeCodeHash=void 0,this.flashReject=void 0,this.flashResolve=void 0,this.flashOffset=void 0}createConnectPromise(){return this.debug("connecting to partial flash service"),this.device.connectAsync().then((()=>this.alivePromise(this.device.gatt.getPrimaryService(u.SERVICE_UUID)))).then((e=>(this.debug("connecting to characteristic"),this.alivePromise(e.getCharacteristic(u.CHARACTERISTIC_UUID))))).then((e=>(this.debug("starting notifications"),this.pfCharacteristic=e,this.pfCharacteristic.startNotifications(),this.pfCharacteristic.addEventListener("characteristicvaluechanged",this.handleCharacteristic),this.state==l.PairingModeRequested?(this.debug("checking pairing mode"),this.autoReconnect=!1,this.pfCharacteristic.writeValue(new Uint8Array([u.STATUS]))):Promise.resolve())))}disconnect(){if(super.disconnect(),this.flashPacketToken&&this.flashPacketToken.cancel(),this.pfCharacteristic&&this.device.connected)try{this.pfCharacteristic.stopNotifications(),this.pfCharacteristic.removeEventListener("characteristicvaluechanged",this.handleCharacteristic)}catch(t){e.log(`ble: partial flash disconnect error ${t.message}`)}this.pfCharacteristic=void 0}findMarker(e,t){if(!this.bin)return-1;for(;e+t.length<this.bin.length;e+=16){let n=!0;for(let r=0;r<t.length;++r)if(t[r]!=this.bin[e+r]){n=!1;break}if(n)return e}return-1}flashAsync(e){return this.hex?(this.debug("flashing already in progress"),Promise.resolve()):(this.device.pauseLog(),this.createFlashPromise(e).finally((()=>this.device.resumeLogOnDisconnection())))}createFlashPromise(t){if(this.hex)return this.debug("flashing already in progress"),Promise.resolve();this.clearFlashData(),this.hex=t;const n=ts.pxtc.UF2.newBlockFile();ts.pxtc.UF2.writeHex(n,this.hex.split(/\r?\n/));const r=e.appTarget.compile.flashUsableEnd;this.bin=ts.pxtc.UF2.toBin(e.U.stringToUint8Array(ts.pxtc.UF2.serializeFile(n)),r).buf,this.debug(`bin bytes ${this.bin.length}`),this.magicOffset=this.findMarker(0,u.MAGIC_MARKER),this.debug(`magic block ${this.magicOffset.toString(16)}`),this.magicOffset<0&&(this.debug("magic block not found, not a valid HEX file"),e.U.userError(lf("Invalid file"))),this.debug("bytes to flash "+(this.bin.length-this.magicOffset));const i=this.magicOffset+u.MAGIC_MARKER.length;return this.dalHash=e.Util.toHex(this.bin.slice(i,i+8)),this.makeCodeHash=e.Util.toHex(this.bin.slice(i+8,i+16)),this.debug(`DAL hash ${this.dalHash}`),this.debug(`MakeCode hash ${this.makeCodeHash}`),this.connectAsync().then((()=>new Promise(((e,t)=>(this.flashResolve=e,this.flashReject=t,this.debug("check service version"),this.state=l.StatusRequested,this.pfCharacteristic.writeValue(new Uint8Array([u.STATUS]))))))).then((()=>{}),(t=>{e.log(`pf: error ${t.message}`),this.clearFlashData()}))}checkStateTransition(e,t){return!!(this.state&t)||(this.debug(`flash cmd ${e} in state ${this.state.toString(16)} `),this.flashReject(new Error),this.clearFlashData(),!1)}handleCharacteristic(t){this.aliveToken.isCancelled()&&(this.flashReject(new Error),this.clearFlashData());const n=event.target.value,r=new Uint8Array(n.buffer),i=r[0];if(this.state!=l.Idle)switch(i){case u.STATUS:if(!this.checkStateTransition(i,l.StatusRequested|l.PairingModeRequested))return;this.version=r[1],this.mode=r[2],this.debug(`flash service version ${this.version} mode ${this.mode}`),this.debug("reading DAL region"),this.state=l.RegionDALRequested,this.pfCharacteristic.writeValue(new Uint8Array([u.REGION_INFO,u.REGION_DAL])).then((()=>{}));break;case u.REGION_INFO:if(!this.checkStateTransition(i,l.RegionDALRequested|l.RegionMakeCodeRequested))return;const t=this.regions[r[1]]={start:r[2]<<24|r[3]<<16|r[4]<<8|r[5],end:r[6]<<24|r[7]<<16|r[8]<<8|r[9],hash:e.Util.toHex(r.slice(10))};if(this.debug(`read region ${r[1]} start ${t.start.toString(16)} end ${t.end.toString(16)} hash ${t.hash}`),r[1]==u.REGION_DAL){if(t.hash!=this.dalHash)return e.tickEvent("webble.flash.DALrequired"),this.debug("DAL hash does not match, partial flashing not possible"),this.state=l.USBFlashRequired,this.flashReject(new Error("USB flashing required")),void this.clearFlashData();this.debug("DAL hash match, reading makecode region"),this.state=l.RegionMakeCodeRequested,this.pfCharacteristic.writeValue(new Uint8Array([u.REGION_INFO,u.REGION_MAKECODE])).then((()=>{}))}else if(r[1]==u.REGION_MAKECODE)if(t.start!=this.magicOffset&&(this.debug("magic offset and MakeCode region.start not matching"),e.U.userError(lf("Invalid file"))),t.hash==this.makeCodeHash)e.tickEvent("webble.flash.noop"),this.debug("MakeCode hash matches, same code!"),this.debug("restart application mode"),this.pfCharacteristic.writeValue(new Uint8Array([u.RESET,u.MODE_APPLICATION])).then((()=>{this.state=l.Idle,this.flashResolve(),this.clearFlashData()}));else{if(this.mode!=u.MODE_PAIRING)return this.debug("application mode, reset into pairing mode"),this.state=l.PairingModeRequested,this.autoReconnect=!0,void this.pfCharacteristic.writeValue(new Uint8Array([u.RESET,u.MODE_PAIRING])).then((()=>{}));this.flashOffset=t.start,this.flashPacketNumber=0,this.debug(`starting to flash from address ${this.flashOffset.toString(16)}`),this.flashNextPacket()}break;case u.FLASH_DATA:if(!this.checkStateTransition(i,l.Flash))return;switch(r[1]){case u.PACKET_OUT_OF_ORDER:this.debug("packet out of order"),this.flashPacketToken.cancel(),this.flashPacketNumber+=4,this.chunkDelay=Math.min(this.chunkDelay+10,u.CHUNK_MAX_DELAY),this.flashNextPacket();break;case u.PACKET_WRITTEN:this.chunkDelay=Math.max(this.chunkDelay-1,u.CHUNK_MIN_DELAY),this.flashOffset+=64,this.flashPacketNumber+=4,this.flashOffset>=this.bin.length?(this.debug("end transmission"),this.state=l.EndOfTransmision,this.pfCharacteristic.writeValue(new Uint8Array([u.END_OF_TRANSMISSION])).finally((()=>{this.flashResolve&&this.flashResolve(),this.clearFlashData()}))):this.flashNextPacket()}break;default:this.debug(`unknown message ${e.Util.toHex(r)}`),this.disconnect()}}flashNextPacket(){this.state=l.Flash,this.flashPacketToken=new e.Util.CancellationToken,this.flashPacketToken.startOperation();const t=this.bin.slice(this.flashOffset,this.flashOffset+64);this.debug(`flashing ${this.flashOffset.toString(16)} / ${this.bin.length.toString(16)} ${(this.flashOffset-this.magicOffset)/(this.bin.length-this.magicOffset)*100>>0}%`);let n=new Uint8Array(20);e.U.delay(this.chunkDelay).then((()=>{this.flashPacketToken.throwIfCancelled(),n[0]=u.FLASH_DATA,n[1]=this.flashOffset>>8&255,n[2]=this.flashOffset>>0&255,n[3]=this.flashPacketNumber;for(let e=0;e<16;e++)n[4+e]=t[e];return this.pfCharacteristic.writeValue(n)})).then((()=>e.U.delay(this.chunkDelay))).then((()=>{this.flashPacketToken.throwIfCancelled(),n[0]=u.FLASH_DATA,n[1]=this.flashOffset>>24&255,n[2]=this.flashOffset>>16&255,n[3]=this.flashPacketNumber+1;for(let e=0;e<16;e++)n[4+e]=t[16+e]||0;return this.pfCharacteristic.writeValue(n)})).then((()=>e.U.delay(this.chunkDelay))).then((()=>{this.flashPacketToken.throwIfCancelled(),n[0]=u.FLASH_DATA,n[1]=0,n[2]=0,n[3]=this.flashPacketNumber+2;for(let e=0;e<16;e++)n[4+e]=t[32+e]||0;return this.pfCharacteristic.writeValue(n)})).then((()=>e.U.delay(this.chunkDelay))).then((()=>{this.flashPacketToken.throwIfCancelled(),n[0]=u.FLASH_DATA,n[1]=0,n[2]=0,n[3]=this.flashPacketNumber+3;for(let e=0;e<16;e++)n[4+e]=t[48+e]||0;return this.pfCharacteristic.writeValue(n)})).then((()=>{const t=this.flashOffset,r=()=>e.U.delay(500).then((()=>{if(t!=this.flashOffset||this.flashPacketToken.isCancelled()||this.aliveToken.isCancelled()||this.state!=l.Flash)return Promise.resolve();this.debug("packet transfer deadlock, force restart"),n[0]=u.FLASH_DATA,n[1]=0,n[2]=0,n[3]=-1;for(let e=0;e<16;e++)n[4+e]=0;return this.pfCharacteristic.writeValue(n).then((()=>r()))}));r().catch((e=>{this.flashReject&&(this.flashReject(new Error("failed packet transfer")),this.clearFlashData())}))})).catch((()=>{this.flashPacketToken.resolveCancel()}))}}u.SERVICE_UUID="e97dd91d-251d-470a-a062-fa1922dfa9a8",u.CHARACTERISTIC_UUID="e97d3b10-251d-470a-a062-fa1922dfa9a8",u.REGION_INFO=0,u.FLASH_DATA=1,u.PACKET_OUT_OF_ORDER=170,u.PACKET_WRITTEN=255,u.END_OF_TRANSMISSION=2,u.STATUS=238,u.RESET=255,u.MODE_PAIRING=0,u.MODE_APPLICATION=1,u.REGION_SOFTDEVICE=0,u.REGION_DAL=1,u.REGION_MAKECODE=2,u.MAGIC_MARKER=e.Util.fromHex("708E3B92C615A841C49866C975EE5197"),u.CHUNK_MIN_DELAY=0,u.CHUNK_MAX_DELAY=75,t.PartialFlashingService=u;class d extends i{constructor(t){super("ble",new e.Util.CancellationToken),this.device=void 0,this.services=[],this.pendingResumeLogOnDisconnection=!1,this.servicesVersion=0,this.device=t,this.handleDisconnected=this.handleDisconnected.bind(this),this.handleServiceAdded=this.handleServiceAdded.bind(this),this.handleServiceChanged=this.handleServiceChanged.bind(this),this.handleServiceRemoved=this.handleServiceRemoved.bind(this),this.device.addEventListener("gattserverdisconnected",this.handleDisconnected),this.device.addEventListener("serviceadded",this.handleServiceAdded),this.device.addEventListener("servicechanged",this.handleServiceChanged),this.device.addEventListener("serviceremoved",this.handleServiceRemoved),n()&&(this.services.push(this.uartService=new c(this)),this.services.push(this.hf2Service=new s(this))),r()&&this.services.push(this.partialFlashingService=new u(this)),this.aliveToken.startOperation()}startServices(){this.services.filter((e=>e.autoReconnect)).forEach((e=>e.connectAsync().catch((()=>{}))))}pauseLog(){this.uartService&&(this.uartService.autoReconnect=!1,this.uartService.disconnect()),this.hf2Service&&(this.hf2Service.autoReconnect=!1,this.hf2Service.disconnect())}resumeLogOnDisconnection(){this.pendingResumeLogOnDisconnection=!0}resumeLog(){this.uartService&&(this.uartService.autoReconnect=!0,this.uartService.connectAsync().catch((()=>{}))),this.hf2Service&&(this.hf2Service.autoReconnect=!0,this.hf2Service.connectAsync().catch((()=>{})))}get isPaired(){return this===t.bleDevice}get name(){return this.device.name||"?"}get connected(){return this.device&&this.device.gatt&&this.device.gatt.connected}get gatt(){return this.device.gatt}createConnectPromise(){return this.debug("connecting gatt server"),this.alivePromise(this.device.gatt.connect().then((()=>this.debug("gatt server connected"))))}handleServiceAdded(e){this.debug("service added"),this.servicesVersion++}handleServiceRemoved(e){this.debug("service removed"),this.servicesVersion++}handleServiceChanged(e){this.debug("service changed"),this.servicesVersion++}handleDisconnected(t){this.debug("disconnected"),this.disconnect(),this.pendingResumeLogOnDisconnection&&(this.pendingResumeLogOnDisconnection=!1,e.U.delay(500).then((()=>this.resumeLog())))}disconnect(){if(super.disconnect(),this.services.forEach((e=>e.disconnect())),this.connected){this.debug("disconnect");try{this.device.gatt&&this.device.gatt.connected&&this.device.gatt.disconnect()}catch(e){this.debug(`gatt disconnect error ${e.message}`)}}}}function p(){if(t.bleDevice)return Promise.resolve();e.log("ble: requesting device");const i=[];return n()&&(i.push(c.SERVICE_UUID),i.push(s.SERVICE_UUID)),r()&&i.push(u.SERVICE_UUID),navigator.bluetooth.requestDevice({filters:e.appTarget.appTheme.bluetoothUartFilters,optionalServices:i}).then((n=>(e.log(`ble: received device ${n.name}`),t.bleDevice=new d(n),t.bleDevice.startServices(),t.bleDevice.connectAsync())))}t.BLEDevice=d,t.bleDevice=void 0,t.isPaired=function(){return!!t.bleDevice},t.pairAsync=function(){return t.bleDevice&&(t.bleDevice.kill(),t.bleDevice=void 0),p().catch((n=>{t.bleDevice&&t.bleDevice.aliveToken&&t.bleDevice.aliveToken.resolveCancel(),e.log(`ble: error ${n.message}`)}))},t.flashAsync=function(n,r){e.tickEvent("webble.flash");const i=n.outfiles[ts.pxtc.BINARY_HEX];return p().then((()=>t.bleDevice.partialFlashingService.flashAsync(i))).then((()=>e.tickEvent("webble.flash.success"))).catch((t=>{throw e.tickEvent("webble.fail.fail",{message:t.message}),t}))}}(e.webBluetooth||(e.webBluetooth={}))}(pxt||(pxt={})),function(e){!function(t){class n extends Error{constructor(e){super(e),this.message=e}}t.USBError=n;t.filters=[{classCode:255,subclassCode:42}];let r,i,a=!0;t.setFilters=function(e){a=!1,t.filters=e};class o{constructor(){this.ready=!1,this.connecting=!1,this.readLoopStarted=!1,this.onDeviceConnectionChanged=e=>{},this.onConnectionChanged=()=>{},this.onData=e=>{},this.onError=e=>{},this.onEvent=e=>{},this.enabled=!1,this.handleUSBConnected=this.handleUSBConnected.bind(this),this.handleUSBDisconnected=this.handleUSBDisconnected.bind(this)}enable(){this.enabled||(this.enabled=!0,this.log("registering webusb events"),navigator.usb.addEventListener("disconnect",this.handleUSBDisconnected,!1),navigator.usb.addEventListener("connect",this.handleUSBConnected,!1))}disable(){this.enabled&&(this.enabled=!1,this.log("unregistering webusb events"),navigator.usb.removeEventListener("disconnect",this.handleUSBDisconnected),navigator.usb.removeEventListener("connect",this.handleUSBConnected))}disposeAsync(){return this.disable(),Promise.resolve()}handleUSBDisconnected(e){this.log("device disconnected"),e.device==this.dev&&(this.log("clear device"),this.clearDev(),this.onDeviceConnectionChanged&&this.onDeviceConnectionChanged(!1))}handleUSBConnected(e){const t=e.device;this.log(`device connected ${t.serialNumber}`),this.dev||this.connecting||(this.log("attach device"),this.onDeviceConnectionChanged&&this.onDeviceConnectionChanged(!0))}clearDev(){this.dev&&(this.dev=null,this.epIn=null,this.epOut=null,this.onConnectionChanged&&this.onConnectionChanged())}error(t){throw new n(e.U.lf("USB error on device {0} ({1})",this.dev.productName,t))}log(t){e.debug("webusb: "+t)}disconnectAsync(){return this.ready=!1,this.dev?(this.log("close device"),this.dev.close().catch((e=>{})).then((()=>(this.clearDev(),e.U.delay(500))))):Promise.resolve()}async forgetAsync(){var e;if(!(null===(e=this.dev)||void 0===e?void 0:e.forget))return!1;try{return await this.dev.forget(),!0}catch(e){return!1}}reconnectAsync(){return this.log("reconnect"),this.setConnecting(!0),this.disconnectAsync().then(s).then((e=>this.connectAsync(e))).finally((()=>this.setConnecting(!1)))}setConnecting(e){e!=this.connecting&&(this.connecting=e,this.onConnectionChanged&&this.onConnectionChanged())}isConnecting(){return this.connecting}isConnected(){return!!this.dev&&this.ready}async connectAsync(t){if(this.log(`trying to connect (${t.length} devices)`),0==t.length){const e=new Error("Device not found.");throw e.type="devicenotfound",e}this.setConnecting(!0);try{if(this.lastKnownDeviceSerialNumber){const n=t.find((e=>e.serialNumber===this.lastKnownDeviceSerialNumber));n?(this.log("last known device spotted"),t.splice(t.indexOf(n),1),t.unshift(n)):(this.log("delay for last known device"),await e.U.delay(2e3))}for(let e=0;e<t.length;++e){const n=t[e];this.dev=n,this.log(`connect device: ${n.manufacturerName} ${n.productName}`),this.log(`serial number: ${n.serialNumber} ${this.lastKnownDeviceSerialNumber===n.serialNumber?"(last known device)":""} `);try{return void await this.initAsync()}catch(e){this.dev=void 0,this.log(`connection failed, ${e.message}`)}}const n=new Error(e.U.lf("Device in use or not found."));throw n.type="devicelocked",n}finally{this.setConnecting(!1)}}sendPacketAsync(t){return this.dev?(e.Util.assert(t.length<=64),this.epOut?this.dev.transferOut(this.epOut.endpointNumber,t).then((e=>{"ok"!=e.status&&this.error("USB OUT transfer failed")})):this.dev.controlTransferOut({requestType:"class",recipient:"interface",request:9,value:512,index:this.iface.interfaceNumber},t).then((e=>{"ok"!=e.status&&this.error("USB CTRL OUT transfer failed")}))):Promise.reject(new Error("Disconnected"))}readLoop(){if(this.readLoopStarted)return;this.readLoopStarted=!0,this.log("start read loop");let t=()=>{this.ready?this.recvPacketAsync().then((n=>{n[0]?(this.onData(n),t()):e.U.delay(500).then(t)}),(n=>{this.dev&&this.onError(n),e.U.delay(300).then(t)})):e.U.delay(300).then(t)};t()}recvPacketAsync(){let e=e=>{"ok"!=e.status&&this.error("USB IN transfer failed");let t=new Uint8Array(e.data.buffer);return 0==t.length?this.recvPacketAsync():t};return this.dev?this.epIn?this.dev.transferIn(this.epIn.endpointNumber,64).then(e):this.dev.controlTransferIn({requestType:"class",recipient:"interface",request:1,value:256,index:this.iface.interfaceNumber},64).then(e):Promise.reject(new Error("Disconnected"))}initAsync(){if(!this.dev)return Promise.reject(new Error("Disconnected"));let n=this.dev;return this.log("open device"),n.open().then((()=>(this.log("select configuration"),n.selectConfiguration(1)))).then((()=>{this.log("got "+n.configurations[0].interfaces.length+" interfaces");const r=n.configurations[0].interfaces.filter((e=>{let n=e.alternates[0];for(let e of t.filters)if((null==e.classCode||n.interfaceClass===e.classCode)&&!(null!=e.subclassCode&&n.interfaceSubclass!==e.subclassCode||null!=e.protocolCode&&n.interfaceProtocol!==e.protocolCode)){if(0==n.endpoints.length)return!0;if(2==n.endpoints.length&&n.endpoints.every((e=>64==e.packetSize)))return!0}return!1}));let i=r[r.length-1];return this.log(`${r.length} matching interfaces; picking ${i?"#"+i.interfaceNumber:"n/a"}`),i||this.error("cannot find supported USB interface"),this.altIface=i.alternates[0],this.iface=i,this.altIface.endpoints.length?(this.log("using dedicated endpoints"),this.epIn=this.altIface.endpoints.filter((e=>"in"==e.direction))[0],this.epOut=this.altIface.endpoints.filter((e=>"out"==e.direction))[0],e.Util.assert(64==this.epIn.packetSize),e.Util.assert(64==this.epOut.packetSize)):this.log("using ctrl pipe"),this.log("claim interface"),n.claimInterface(i.interfaceNumber)})).then((()=>{this.log("device ready"),this.lastKnownDeviceSerialNumber=this.dev.serialNumber,this.ready=!0,a&&this.readLoop(),this.onConnectionChanged&&this.onConnectionChanged()}))}}async function s(){e.log("webusb: get devices");try{return await navigator.usb.getDevices()||[]}catch(t){return e.reportException(t),[]}}async function c(){var t,n;if(void 0!==i)return;if(e.debug("webusb: checking availability"),!(null===(n=null===(t=e.appTarget)||void 0===t?void 0:t.compile)||void 0===n?void 0:n.webUSB))return void(i=!1);const r=await l();if(r)switch(i=!1,e.tickEvent("webusb.off",{reason:r}),r){case"electron":e.debug("webusb: off, electron");break;case"notimpl":e.debug("webusb: off, not implemented by browser");break;case"oldwindows":e.debug("webusb: off, older windows version");break;case"security":e.debug("webusb: off, security exception")}else i=!0}async function l(){if(e.BrowserUtils.isElectron())return"electron";const t=navigator.usb;if(!t)return"notimpl";let n=/Windows NT (\d+\.\d+)/.exec(navigator.userAgent);if(n&&parseFloat(n[1])<6.3)return"oldwindows";try{await t.getDevices()}catch(e){return"security"}}function u(){return void 0===i&&(console.error("checkAvailableAsync not called"),c()),!!i}t.pairAsync=function(){return navigator.usb.requestDevice({filters:t.filters}).then((e=>!!e)).catch((e=>{if("NotFoundError"!=e.name)throw e}))},t.tryGetDevicesAsync=s,t.mkWebUSBHIDPacketIOAsync=function(){return e.debug("packetio: mk webusb io"),r||(r=new o),r.enable(),Promise.resolve(r)},t.forgetDeviceAsync=async function(){return e.debug("packetio: forget webusb io"),!!r&&r.forgetAsync()},t.isEnabled=!1,t.setEnabled=function(e){u()||(e=!1),t.isEnabled=e},t.checkAvailableAsync=c,t.getReasonUnavailable=l,t.isAvailable=u}(e.usb||(e.usb={}))}(pxt||(pxt={})),function(e){!function(t){var n=e.Util;let r={};function i(e){let t={},r=0,i=new n.PromiseQueue,a=new Promise(((e,n)=>{t.ready=e}));i.enqueue("main",(()=>a));return{opAsync:function(n,a){return i.enqueue("main",(()=>new Promise(((i,o)=>{let s=""+r++;t[s]=e=>{e?e.errorMessage?o(new Error(e.errorMessage)):i(e):o(new Error("no response"))},e({id:s,op:n,arg:a})}))))},recvHandler:e=>{if(t.hasOwnProperty(e.id)){let n=t[e.id];delete t[e.id],n(e.result)}}}}function a(t){let n=new Worker(t),r=i((e=>n.postMessage(e)));return n.onmessage=t=>{e.perf.measureStart("webworker recvHandler"),r.recvHandler(t.data),e.perf.measureEnd("webworker recvHandler")},r}t.getWorker=function(e){let t=r[e];return t||(t=r[e]=a(e)),t},t.wrap=i,t.makeWebWorker=a,t.makeWebSocket=function(t,n=null){let r=new WebSocket(t),a=[],o=i((e=>{let t=JSON.stringify(e);a?a.push(t):r.send(t)}));return r.onmessage=e=>{let t=JSON.parse(e.data);n&&null==t.id?n(t):o.recvHandler(t)},r.onopen=t=>{e.debug("socket opened");for(let e of a)r.send(e);a=null},r.onclose=t=>{e.debug("socket closed")},r.onerror=t=>{e.debug("socket errored")},o}}(e.worker||(e.worker={}))}(pxt||(pxt={})),function(e){!function(t){function n(){t.apiKey||e.U.userError("YouTube API key missing")}function r(e){if(!e)return"";const t=e.medium||e.high||e.standard||e.default;return(null==t?void 0:t.url)||""}t.apiKey=void 0,t.playlistItemToCodeCard=function(e){return{name:e.snippet.title.replace(/[^-]*-/,"").trim(),description:(t=e.snippet.description,t.split(/\n\s+/,1)[0].trim()),youTubeId:e.snippet.resourceId.videoId,youTubePlaylistId:e.snippet.playlistId,imageUrl:r(e.snippet.thumbnails)};var t},t.playlistInfoAsync=function(r){n();const i=`https://www.googleapis.com/youtube/v3/playlists?part=snippet&id=${r}&key=${t.apiKey}`;return e.Util.httpGetJsonAsync(i).then((e=>e.items[0]))},t.listPlaylistVideosAsync=async function(r){n();let i,a=[];do{let n=`https://www.googleapis.com/youtube/v3/playlistItems?part=snippet&maxResults=50&playlistId=${r}&key=${t.apiKey}`;i&&(n+=`&pageToken=${i}`);const o=await e.Util.httpGetJsonAsync(n);a=a.concat(o.items),i=o.nextPageToken}while(i);return e.options.debug&&e.debug(JSON.stringify(a,null,2)),a},t.watchUrl=function(e,t){let n;return e?(n=`https://www.youtube.com/watch?v=${e}`,t&&(n+=`&list=${t}`)):t&&(n=`https://www.youtube.com/playlist?list=${t}`),n}}(e.youtube||(e.youtube={}))}(pxt||(pxt={})),function(e){!function(e){!function(t){function n(e,...t){return e.replace(/{(\d+)}/g,((e,n)=>t[+n]))}t.debug=!1,t.lf=n;let r=u("opcode name doesn't match","<name>");class i{constructor(t,n,r,i,a){this.opcode=r,this.mask=i,this.is32bit=a,this.canBeShared=!1,e.assert((r&i)==r),this.ei=t,this.code=n.replace(/\s+/g," "),this.friendlyFmt=n.replace(/\$\w+/g,(e=>this.ei.encoders[e]?this.ei.encoders[e].pretty:e));let o=c(n);this.name=o[0],this.args=o.slice(1)}emit(t){let n=t.words;if(n[0]!=this.name)return r;let i=this.opcode,a=1,o=0,s=[],c=null,l=null,d=null;for(let r=0;r<this.args.length;++r){let p=this.args[r],f=n[a++];if("$"==p[0]){let r=this.ei.encoders[p],_=null;if(r.isRegister){if(_=this.ei.registerNo(f),null==_)return u("expecting register name",f);this.ei.isPush(this.opcode)?o++:this.ei.isPop(this.opcode)&&o--}else if(r.isImmediate){if(f=f.replace(/^#/,""),_=t.bin.parseOneInt(f),null==_)return u("expecting number",f);this.ei.isAddSP(this.opcode)?o=-_/this.ei.wordSize():this.ei.isSubSP(this.opcode)&&(o=_/this.ei.wordSize())}else if(r.isRegList){if("{"!=f)return u("expecting {",f);for(_=0;"}"!=n[a];){if(f=n[a++],!f)return u("expecting }",n[a-2]);let e=this.ei.registerNo(f);if(null==e)return u("expecting register name",f);if(_&1<<e)return u("duplicate register name",f);_|=1<<e,this.ei.isPush(this.opcode)?o++:this.ei.isPop(this.opcode)&&o--,","==n[a]&&a++}f=n[a++]}else if(r.isLabel){if(f=f.replace(/^#/,""),/^[+-]?\d+$/.test(f))_=parseInt(f,10),c="rel"+_;else if(/^0x[0-9a-fA-F]+$/.test(f))_=parseInt(f,16),c="abs"+_;else if(c=f,_=this.ei.getAddressFromLabel(t.bin,this,f,r.isWordAligned),null==_){if(t.bin.finalEmit)return u("unknown label",f);_=8}if(this.ei.is32bit(this)){l=_,d=f;continue}}else e.oops();if(null==_)return u("didn't understand it",f);if(s.push(_),_=r.encode(_),null==_)return u("argument out of range or mis-aligned",f);e.assert(0==(i&_)),i|=_}else if(p!=f)return u("expecting "+p,f)}return n[a]?u("trailing tokens",n[a]):this.ei.is32bit(this)?this.ei.emit32(i,l,t.bin.normalizeExternalLabel(d)):{stack:o,opcode:i,numArgs:s,labelName:t.bin.normalizeExternalLabel(c)}}toString(){return this.friendlyFmt}}t.Instruction=i;class a{constructor(e,t){this.bin=e,this.text=t}getOpExt(){return this.instruction?this.instruction.code:""}getOp(){return this.instruction?this.instruction.name:""}update(e){this.bin.peepOps++,(e=e.replace(/^\s*/,""))||this.bin.peepDel++,e&&(e+="      "),e="    "+e,this.text=e+"; WAS: "+this.text.trim(),this.instruction=null,this.numArgs=null,this.words=c(e)||[],0==this.words.length?this.type="empty":"@"==this.words[0][0]&&(this.type="directive")}}t.Line=a;class o{constructor(e,t){this.id=e,this.description=t,this.sizeAdj=0,this.users=[]}get size(){return this.endLocation-this.startLocation-this.sizeAdj}}class s{constructor(e){this.baseOffset=0,this.checkStack=!0,this.inlineMode=!1,this.normalizeExternalLabel=e=>e,this.currLineNo=0,this.scope="",this.scopeId=0,this.errors=[],this.labels={},this.equs={},this.stackpointers={},this.stack=0,this.commPtr=0,this.peepOps=0,this.peepDel=0,this.peepCounts={},this.stats="",this.throwOnError=!1,this.disablePeepHole=!1,this.stackAtLabel={},this.codeSizeStats=!1,this.labelToObject={},this.idToObject={},this.objSuspendStart=0,this.labelsToObjectDone=!1,this.currLine=new a(this,"<start>"),this.currLine.lineNo=0,this.ei=e,this.ei.file=this}emitShort(t){e.assert(0<=t&&t<=65535),this.buf.push(t)}emitOpCode(e){this.emitShort(e)}location(){return 2*this.buf.length}pc(){return this.location()+this.baseOffset}useLabel(t){if(!this.currObject||"."==t[0]||this.objSuspendStart)return;const n=e.U.lookup(this.labelToObject,t);n&&n!=this.currObject&&n.users.length<5&&n.users.indexOf(this.currObject)<0&&n.users.push(this.currObject)}parseOneInt(t){if(!t)return null;if(/^\d+$/.test(t))return parseInt(t,10);const r=t.indexOf("-");if(r>0)return this.parseOneInt(t.slice(0,r))-this.parseOneInt(t.slice(r+1));let i=1;if(t.indexOf("*")>=0){let e=null;for(;null!=(e=/^([^\*]*)\*(.*)$/.exec(t));){let n=this.parseOneInt(e[1]);if(null==n)return null;i*=n,t=e[2]}}if("-"==t[0]?(i*=-1,t=t.slice(1)):"+"==t[0]&&(t=t.slice(1)),/^\d+$/.test(t))return i*parseInt(t,10);if(e.U.endsWith(t,"|1"))return 1|this.parseOneInt(t.slice(0,t.length-2));if(e.U.endsWith(t,"-1"))return this.parseOneInt(t.slice(0,t.length-2))-1;if(e.U.endsWith(t,"+1"))return this.parseOneInt(t.slice(0,t.length-2))+1;let a=/(.*)>>(\d+)$/.exec(t);if(a){let e=this.parseOneInt(a[1]);return e&=~(-16777216&this.baseOffset),e>>parseInt(a[2])}let o=null;if("0"==t[0])if("x"==t[1]||"X"==t[1]){let e=/^0x([a-f0-9]+)$/i.exec(t);e&&(o=parseInt(e[1],16))}else if("b"==t[1]||"B"==t[1]){let e=/^0b([01]+)$/i.exec(t);e&&(o=parseInt(e[1],2))}if(t.indexOf("@")>=0){let r=/^(\w+)@(-?\d+)$/.exec(t);r&&(1!=i&&this.directiveError(n("multiplication not supported with saved stacks")),this.stackpointers.hasOwnProperty(r[1])?o=this.ei.wordSize()*this.ei.computeStackOffset(r[1],this.stack-this.stackpointers[r[1]]+parseInt(r[2])):this.directiveError(n("saved stack not found"))),r=/^(.*)@(hi|lo|fn)$/.exec(t),r&&this.looksLikeLabel(r[1])&&(o=this.lookupLabel(r[1],!0),null!=o&&("fn"==r[2]?o=this.ei.toFnPtr(o,this.baseOffset,r[1]):(o>>=1,0<=o&&o<=65535?"hi"==r[2]?o=o>>8&255:"lo"==r[2]?o&=255:e.oops():(this.directiveError(n("@hi/lo out of range")),o=null))))}return null==o&&this.looksLikeLabel(t)&&(o=this.lookupLabel(t,!0),null!=o&&1==this.ei.postProcessRelAddress(this,1)&&(o+=this.baseOffset)),null==o||isNaN(o)?null:o*i}looksLikeLabel(e){return!/^(r\d|pc|sp|lr)$/i.test(e)&&/^[\.a-zA-Z_][\.:\w+]*$/.test(e)}scopedName(e){return"."==e[0]&&this.scope?this.scope+"$"+e:e}lookupLabel(e,t=!1){this.useLabel(e);let r=null,i=this.scopedName(e);return this.labels.hasOwnProperty(i)?(r=this.labels[i],r=this.ei.postProcessRelAddress(this,r)):this.lookupExternalLabel&&(r=this.lookupExternalLabel(e),null!=r&&(r=this.ei.postProcessAbsAddress(this,r))),null==r&&this.equs.hasOwnProperty(i)&&(r=this.equs[i]),null==r&&t&&(this.finalEmit?this.directiveError(n("unknown label: {0}",e)):r=11111),r}align(t){for(e.assert(2==t||4==t||8==t||16==t);this.location()%t!=0;)this.emitOpCode(0)}pushError(e,t=""){let r={scope:this.scope,message:n("  -> Line {2} ('{1}'), error: {0}\n{3}",e,this.currLine.text,this.currLine.lineNo,t),lineNo:this.currLine.lineNo,line:this.currLine.text,coremsg:e,hints:t};if(this.errors.push(r),this.throwOnError)throw new Error(r.message)}directiveError(e){this.pushError(e)}emitString(e,t=!1){function r(e,t){return 255&(e.charCodeAt(t)||0)}let i,a=/^\s*([\w\.]+\s*:\s*)?.\w+\s+(".*")\s*$/.exec(e);if(a&&null!=(i=l(a[2])))if(this.align(2),t)for(let e=0;e<i.length;e++)this.emitShort(i.charCodeAt(e));else for(let e=0;e<i.length+1;e+=2)this.emitShort(r(i,e+1)<<8|r(i,e));else this.directiveError(n("expecting string"))}parseNumber(e){let t=this.parseOneInt(e.shift());return null==t?null:t}parseNumbers(e){e=e.slice(1);let t=[];for(;;){let r=this.parseNumber(e);if(null==r){this.directiveError(n("cannot parse number at '{0}'",e[0]));break}if(t.push(r),","!=e[0]){if(null==e[0])break;this.directiveError(n("expecting number, got '{0}'",e[0]));break}if(e.shift(),null==e[0])break}return t}emitSpace(e){let t=this.parseNumbers(e);if(1==t.length&&t.push(0),2!=t.length)this.directiveError(n("expecting one or two numbers"));else if(t[0]%2!=0)this.directiveError(n("only even space supported"));else{let e=255&t[1];e|=e<<8;for(let n=0;n<t[0];n+=2)this.emitShort(e)}}emitBytes(e){let t=this.parseNumbers(e);t.length%2!=0&&(this.directiveError(".bytes needs an even number of arguments"),t.push(0));for(let e=0;e<t.length;e+=2){let r=t[e],i=t[e+1];0<=r&&i<=255&&0<=i&&r<=255?this.emitShort(255&r|(255&i)<<8):this.directiveError(n("expecting uint8"))}}emitHex(e){e.slice(1).forEach((e=>{if(","!=e)if(e.length%4!=0)this.directiveError(".hex needs an even number of bytes");else if(/^[a-f0-9]+$/i.test(e))for(let t=0;t<e.length;t+=4){let n=parseInt(e.slice(t,t+4),16);n=(255&n)<<8|n>>8&255,this.emitShort(n)}else this.directiveError(".hex needs a hex number")}))}handleDirective(t){let r,i=t.words,a=()=>{2!=i.length&&this.directiveError(n("expecting one argument"))};switch(i[0]){case".object":if(this.codeSizeStats)if("PUSH"==i[1])this.objSuspendStart=this.location();else if("POP"==i[1])this.objSuspendStart&&(this.currObject.sizeAdj+=this.location()-this.objSuspendStart),this.objSuspendStart=0;else{if(this.currObject&&(this.currObject.endLocation=this.location()),this.currObject=e.U.lookup(this.idToObject,i[1]),!this.currObject){const e=t.text.replace(/^[^"]*/,"");let r=i[1];i.length>2&&(r=l(e.trim()),null==r&&this.directiveError(n("expecting string in .object"))),this.currObject=new o(i[1],r),this.idToObject[i[1]]=this.currObject}this.currObject.sizeAdj=0,this.currObject.startLocation=this.location()}else;break;case".ascii":case".asciz":case".string":this.emitString(t.text);break;case".utf16":this.emitString(t.text,!0);break;case".align":if(a(),r=this.parseOneInt(i[1]),null!=r){if(0==r)return;r<=4?this.align(1<<r):this.directiveError(n("expecting 1, 2, 3 or 4 (for 2, 4, 8, or 16 byte alignment)"))}else this.directiveError(n("expecting number"));break;case".balign":if(a(),r=this.parseOneInt(i[1]),null!=r){if(1==r)return;2==r||4==r||8==r||16==r?this.align(r):this.directiveError(n("expecting 2, 4, 8, or 16"))}else this.directiveError(n("expecting number"));break;case".p2align":a(),r=this.parseOneInt(i[1]),null!=r?this.align(1<<r):this.directiveError(n("expecting number"));break;case".byte":this.emitBytes(i);break;case".hex":this.emitHex(i);break;case".hword":case".short":case".2bytes":this.parseNumbers(i).forEach((e=>{-32768<=e&&e<=65535?this.emitShort(65535&e):this.directiveError(n("expecting int16"))}));break;case".word":case".4bytes":case".long":this.parseNumbers(i).forEach((e=>{-2147483648<=e&&e<=4294967295?(this.emitShort(65535&e),this.emitShort(e>>16&65535)):this.directiveError(n("expecting int32"))}));break;case".skip":case".space":this.emitSpace(i);break;case".set":case".equ":/^\w+$/.test(i[1])||this.directiveError(n("expecting name"));const s=this.parseNumbers(i.slice(","==i[2]||"="==i[2]?2:1));1!=s.length&&this.directiveError(n("expecting one value")),void 0!==this.equs[i[1]]&&this.equs[i[1]]!=s[0]&&this.directiveError(n("redefinition of {0}",i[1])),this.equs[i[1]]=s[0];break;case".startaddr":this.location()&&this.directiveError(n(".startaddr can be only be specified at the beginning of the file")),a(),this.baseOffset=this.parseOneInt(i[1]);break;case"@stackmark":a(),this.stackpointers[i[1]]=this.stack;break;case"@stackempty":this.checkStack&&(null==this.stackpointers[i[1]]?this.directiveError(n("no such saved stack")):this.stackpointers[i[1]]!=this.stack&&this.directiveError(n("stack mismatch")));break;case"@scope":this.scope=i[1]||"",this.currLineNo=this.scope?0:this.realCurrLineNo;break;case".syntax":case"@nostackcheck":this.checkStack=!1;break;case"@dummystack":a(),this.stack+=this.parseOneInt(i[1]);break;case".section":case".global":this.stackpointers={},this.stack=0,this.scope="$S"+this.scopeId++;break;case".comm":{i=i.filter((e=>","!=e)),i.shift();let e=this.parseOneInt(i[1]),t=0;if(t=i[2]?this.parseOneInt(i[2]):4,null==this.lookupLabel(i[0])){for(this.commPtr||(this.commPtr=this.lookupExternalLabel("_pxt_comm_base")||0,this.commPtr||this.directiveError(n("PXT_COMM_BASE not defined")));this.commPtr&t-1;)this.commPtr++;this.labels[this.scopedName(i[0])]=this.commPtr-this.baseOffset,this.commPtr+=e}break}case".file":case".text":case".cpu":case".fpu":case".eabi_attribute":case".code":case".thumb_func":case".type":case".fnstart":case".save":case".size":case".fnend":case".pad":case".globl":case".local":case"@":break;default:/^\.cfi_/.test(i[0])||this.directiveError(n("unknown directive"))}}handleOneInstruction(e,t){this.codeSizeStats&&e.ldlitLabel&&this.useLabel(e.ldlitLabel);let r=t.emit(e);return!r.error&&(this.stack+=r.stack,this.checkStack&&this.stack<0&&this.pushError(n("stack underflow")),e.location=this.location(),e.opcode=r.opcode,e.stack=r.stack,this.emitOpCode(r.opcode),null!=r.opcode2&&this.emitOpCode(r.opcode2),null!=r.opcode3&&this.emitOpCode(r.opcode3),e.instruction=t,e.numArgs=r.numArgs,!0)}handleInstruction(e){if(e.instruction&&this.handleOneInstruction(e,e.instruction))return;let t=e=>this.ei.instructions.hasOwnProperty(e)?this.ei.instructions[e]:[];if(!e.instruction){let n=t(e.words[0]);for(let t=0;t<n.length;++t)if(this.handleOneInstruction(e,n[t]))return}let r=e.words[0].toLowerCase().replace(/s$/,"").replace(/[^a-z]/g,""),i="",a=t(r).concat(t(r+"s"));a.length>0&&a.forEach((t=>{let r=t.emit(e);i+=n("   Maybe: {0} ({1} at '{2}')\n",t.toString(),r.error,r.errorAt)})),this.pushError(n("assembly error"),i)}buildLine(e,t){let n=e=>{let n=new a(this,e);return n.scope=this.scope,n.lineNo=this.currLineNo,t.push(n),n},r=n(e),i=c(r.text)||[];r.words=i;let o=i[0]||"";if(":"==o.charAt(o.length-1)){let t=/^([\.\w]+):$/.exec(i[0]);if(t){if(r.type="label",r.text=t[1]+":",r.words=[t[1]],!(i.length>1))return;i.shift(),r=n(e.replace(/^[^:]*:/,"")),r.words=i,o=i[0]||""}}let s=o.charAt(0);"."==s||"@"==s?(r.type="directive","@scope"==r.words[0]&&this.handleDirective(r)):0==r.words.length?r.type="empty":r.type="instruction"}prepLines(e){this.currLineNo=0,this.realCurrLineNo=0,this.lines=[],e.split(/\r?\n/).forEach((e=>{this.errors.length>10||(this.currLineNo++,this.realCurrLineNo++,this.buildLine(e,this.lines))}))}iterLines(){this.stack=0,this.buf=[],this.scopeId=0,this.lines.forEach((t=>{if(!(this.errors.length>10)&&(this.currLine=t,0!=t.words.length))if("label"==t.type){this.currObject&&!this.labelsToObjectDone&&"."!=t.words[0][0]&&(this.labelToObject[t.words[0]]=this.currObject);let r=this.scopedName(t.words[0]);if(this.prevLabel=r,this.finalEmit){null!=this.equs[r]&&this.directiveError(n(".equ redefined as label"));let t=this.labels[r];null==t&&e.oops(),0==this.errors.length&&t!=this.location()&&e.oops(`invalid location: ${this.location()} != ${t} at ${r}`),e.assert(this.errors.length>0||t==this.location()),this.reallyFinalEmit&&(this.stackAtLabel[r]=this.stack)}else this.labels.hasOwnProperty(r)?this.directiveError(n("label redefinition")):this.inlineMode&&/^_/.test(r)?this.directiveError(n("labels starting with '_' are reserved for the compiler")):this.labels[r]=this.location();t.location=this.location()}else"directive"==t.type?this.handleDirective(t):"instruction"==t.type?this.handleInstruction(t):"empty"==t.type||e.oops()})),this.labelsToObjectDone=!0,this.currObject=null}getSourceMap(){const e={};let t="",n=0,r=0,i=0;function a(){t&&r&&(e[t]||(e[t]=[]),e[t].push(n,r,i-r)),r=0,i=0}return this.lines.forEach(((e,o)=>{const s=/^; ([\w\/\.-]+)\(([\d]+),\d+\):/.exec(e.text);s&&(a(),t=s[1],n=parseInt(s[2])),"instruction"==e.type&&(r||(r=e.location),i=e.location)})),a(),e}getCodeSizeStats(){if(!this.codeSizeStats)return"";const t=e.U.values(this.idToObject);t.sort(((e,t)=>t.size-e.size));let n=";\n; Code size:\n;\n";for(const e of t)if(n+=`; ${("         "+e.size).slice(-6)} ${e.description} [${e.id}]\n`,e.users.length>=5)n+=`;        by many, including ${e.users[0].description}\n`;else for(const t of e.users)n+=`;        by ${t.description} [${t.id}]\n`;return n}getSource(e,r=1,i=0){let a=0,o=e=>{let t=this.labels[e]||a,n=t-a;return a=t,n},s=this.buf?this.location():0,c=o("_code_end"),l=o("_helpers_end"),u=o("_vtables_end"),d=o("_literals_end"),p=a,f=s+this.baseOffset&16777215;if(i&&f>i){const e=new Error(n("program too big by {0} bytes!",f-i));throw e.ksErrorCode=9283,e}let _=n("; total bytes: {0} ({1}% of {2}k flash with {3} free)",f,(100*f/(i=i||131072)).toFixed(1),(i/1024).toFixed(1),i-f),m=n("; generated code sizes (bytes): {0} (incl. {1} user, {2} helpers, {3} vtables, {4} lits); src size {5}\n",p,c,l,u,d,s-p)+n("; assembly: {0} lines; density: {1} bytes/stmt; ({2} stmts)\n",this.lines.length,Math.round(100*c/r)/100,r)+_+"\n"+this.stats+this.getCodeSizeStats()+"\n\n",g=!1;return this.lines.forEach(((n,r)=>{if("_stored_program"==n.words[0])return m+='_stored_program: .string "..."\n',void(g=!0);if(g)return void(g=!1);let i=n.text;if(e){if("@stackempty"==n.words[0]&&this.lines[r-1].text==n.text)return;if(i=i.replace(/; WAS: .*/,""),!i.trim())return}t.debug&&("label"!=n.type&&"instruction"!=n.type||(i+=` \t; 0x${(n.location+this.baseOffset).toString(16)}`)),m+=i+"\n"})),m}peepHole(){let e=this.lines.filter((e=>"empty"!=e.type));for(let t=0;t<e.length;++t){let n=e[t];if(/^user/.test(n.scope))continue;let r=e[t+1];if(!r)continue;let i=e[t+2];"instruction"==n.type&&this.ei.peephole(n,r,i)}}clearLabels(){this.labels={},this.commPtr=0}peepPass(t){this.disablePeepHole||(this.peepOps=0,this.peepDel=0,this.peepCounts={},this.peepHole(),this.throwOnError=!0,this.finalEmit=!1,this.clearLabels(),this.iterLines(),e.assert(!this.checkStack||0==this.stack),this.finalEmit=!0,this.reallyFinalEmit=t||0==this.peepOps,this.iterLines(),this.stats+=n("; peep hole pass: {0} instructions removed and {1} updated\n",this.peepDel,this.peepOps-this.peepDel))}getLabels(){return this.userLabelsCache||(this.userLabelsCache=e.U.mapMap(this.labels,((e,t)=>t+this.baseOffset))),this.userLabelsCache}emit(t){if(e.assert(null==this.buf),this.prepLines(t),this.errors.length>0)return;if(this.clearLabels(),this.iterLines(),this.checkStack&&0!=this.stack&&this.directiveError(n("stack misaligned at the end of the file")),this.errors.length>0)return;if(this.ei.expandLdlit(this),this.clearLabels(),this.iterLines(),this.finalEmit=!0,this.reallyFinalEmit=this.disablePeepHole,this.iterLines(),this.errors.length>0)return;for(let e=0;e<5&&(pxt.debug(`Peephole OPT, pass ${e}`),this.peepPass(5==e),0!=this.peepOps);++e);pxt.debug("emit done")}}t.File=s;t.VMFile=class extends s{constructor(e){super(e)}};function c(e){let t=[],n="";e:for(let r=0;r<e.length;++r)switch(e[r]){case"[":case"]":case"!":case"{":case"}":case",":n&&(t.push(n),n=""),t.push(e[r]);break;case" ":case"\t":case"\r":case"\n":n&&(t.push(n),n="");break;case";":break e;default:n+=e[r]}return n&&(t.push(n),n=""),t[0]?t:null}function l(e){e=e.replace(/\\\\/g,"\\B").replace(/\\(['\?])/g,((e,t)=>t)).replace(/\\[z0]/g,"\0").replace(/\\x([0-9a-f][0-9a-f])/gi,((e,t)=>"\\u00"+t)).replace(/\\B/g,"\\\\");try{return JSON.parse(e)}catch(e){return null}}function u(e,t){return{stack:null,opcode:null,error:e,errorAt:t}}function d(e){return e<0||e>65535?("0x"+e.toString(16)).toLowerCase():("0x"+("000"+e.toString(16)).slice(-4)).toLowerCase()}t.AbstractProcessor=class{constructor(){this.file=null,this.addEnc=(e,t,n)=>{let r={name:e,pretty:t,encode:n,isRegister:/^\$r\d/.test(e),isImmediate:/^\$i\d/.test(e),isRegList:/^\$rl\d/.test(e),isLabel:/^\$l[a-z]/.test(e)};return this.encoders[e]=r,r},this.inrange=(e,t,n)=>Math.floor(t)!=t||t<0||t>e?null:n,this.inminmax=(e,t,n,r)=>Math.floor(n)!=n||n<e||n>t?null:r,this.inseq=(e,t)=>{let n=e.indexOf(t);return n<0?null:n},this.inrangeSigned=(e,t,n)=>{if(Math.floor(t)!=t)return null;if(t<-(e+1))return null;if(t>e)return null;return n&(e<<1|1)},this.addInst=(e,t,n,r)=>{let a=new i(this,e,t,n,r);return this.instructions.hasOwnProperty(a.name)||(this.instructions[a.name]=[]),this.instructions[a.name].push(a),a},this.encoders={},this.instructions={}}toFnPtr(e,t,n){return e}wordSize(){return-1}computeStackOffset(e,t){return t}is32bit(e){return!1}emit32(e,t,n){return null}postProcessRelAddress(e,t){return t}postProcessAbsAddress(e,t){return t}peephole(e,t,n){}registerNo(e){return null}getAddressFromLabel(e,t,n,r=!1){return null}isPop(e){return!1}isPush(e){return!1}isAddSP(e){return!1}isSubSP(e){return!1}testAssembler(){e.assert(!1)}expandLdlit(e){}},t.emitErr=u,t.expectError=function(t,n){let r=new s(t);r.emit(n),0==r.errors.length&&e.oops("ASMTEST: expecting error for: "+n)},t.tohex=d,t.expect=function(t,n){let r=[],i=n.replace(/^([0-9a-fA-F]{4,8})\s/gm,((e,t)=>(r.push(parseInt(t.slice(0,4),16)),8==t.length&&r.push(parseInt(t.slice(4,8),16)),""))),a=new s(t);a.throwOnError=!0,a.disablePeepHole=!0,a.emit(i),a.errors.length>0&&(console.debug(a.errors[0].message),e.oops("ASMTEST: not expecting errors")),a.buf.length!=r.length&&e.oops("ASMTEST: wrong buf len");for(let t=0;t<r.length;++t)a.buf[t]!=r[t]&&e.oops("ASMTEST: wrong buf content at "+t+" , exp:"+d(r[t])+", got: "+d(a.buf[t]))}}(e.assembler||(e.assembler={}))}(e.pxtc||(e.pxtc={}))}(ts||(ts={})),function(e){!function(t){var n=pxtc.Util;t.apiRoot=e.BrowserUtils.isLocalHost()||n.isNodeJS?"https://www.makecode.com/api/":"/api/",t.accessToken="",t.localToken="";let r=!0;function i(t){let r=new Error(n.lf("Cannot access {0} while offline",t));return r.isOffline=!0,e.U.delay(1e3).then((()=>Promise.reject(r)))}function a(n,r){return e.U.requestAsync({url:"/api/"+n,headers:{Authorization:t.localToken},method:r?"POST":"GET",data:r||void 0,allowHttpErrors:!0})}function o(){return e.webConfig&&!e.webConfig.isStatic&&!e.BrowserUtils.isLocalHost()&&!!e.webConfig.cdnUrl}function s(n){if(n=n.replace(/^\//,""),!o())return t.apiRoot+n;const r=new Date,i=r.getUTCFullYear()+("0"+(r.getUTCMonth()+1)).slice(-2)+("0"+r.getUTCDate()).slice(-2);return n.indexOf("?")<0?n+="?":n+="&",n+="cdn="+i,e.webConfig.cdnUrl+"/api/"+n}function c(e){return o()?(e.url=s(e.url),n.requestAsync(e).catch((t=>l(e,t)))):u(e)}function l(e,n){return 0==n.statusCode?(r&&(r=!1,t.onOffline()),i(e.url)):Promise.reject(n)}function u(r){var a;return r.url=(null===(a=e.webConfig)||void 0===a?void 0:a.isStatic)&&!r.forceLiveEndpoint?e.webConfig.relprefix+r.url:t.apiRoot+r.url,r.allowGzipPost=!0,t.isOnline()||e.BrowserUtils.isPxtElectron()?(r.headers||(r.headers={}),e.BrowserUtils.isLocalHost()?t.localToken&&(r.headers.Authorization=t.localToken):t.accessToken&&(r.headers["x-td-access-token"]=t.accessToken),n.requestAsync(r).catch((e=>l(r,e)))):i(r.url)}function d(){return navigator&&navigator.onLine}t.onOffline=()=>{},t.hasAccessToken=function(){return!!t.accessToken},t.localRequestAsync=a,t.useCdnApi=o,t.cdnApiUrl=s,t.apiRequestWithCdnAsync=c,t.privateRequestAsync=u,t.privateGetTextAsync=function(e,t){return u({url:e,headers:t}).then((e=>e.text))},t.privateGetAsync=function(e,t=!1){return u({url:e,forceLiveEndpoint:t}).then((e=>e.json))},t.downloadTargetConfigAsync=function(){if(!t.isOnline())return Promise.resolve(void 0);const n=e.appTarget.versions&&e.appTarget.versions.target,r=e.webConfig&&e.webConfig.isStatic?"targetconfig.json":`config/${e.appTarget.id}/targetconfig${n?`/v${n}`:""}`;return e.BrowserUtils.isLocalHost()?a(r).then((e=>e?e.json:void 0)):c({url:r}).then((e=>e.json))},t.downloadScriptFilesAsync=function(e){return u({url:e+"/text"+(e.startsWith("S")?`?time=${Date.now()}`:""),forceLiveEndpoint:!0}).then((e=>JSON.parse(e.text)))},t.downloadScriptMetaAsync=function(e){return u({url:e+(e.startsWith("S")?`?time=${Date.now()}`:""),forceLiveEndpoint:!0}).then((e=>JSON.parse(e.text).meta))},t.downloadBuiltSimJsInfoAsync=async function(t){const n=e.appTarget.versions&&e.appTarget.versions.target||"",r=e.U.stringifyQueryString(t+"/js",{v:"v"+n})+(t.startsWith("S")?`&time=${Date.now()}`:"");return(await u({url:r,forceLiveEndpoint:!0})).json},t.markdownAsync=async function(t,n,r){const i=e.BrowserUtils.isLocalHostDev()?0:36e5,s=24*i*7;n=n||e.Util.userLanguage();const l=await e.BrowserUtils.translationDbAsync(),d=await l.getAsync(n,t,""),p=async()=>{try{const r=await function(t,n,r){var i;const s=null===(i=e.webConfig)||void 0===i?void 0:i.isStatic,l=e.appTarget.versions&&e.appTarget.versions.target||"?";let d;if(s){d=t;const e=/\/?docs\//.test(d),n=/\.\w+$/.test(d);if(!e){const e="/"===d[0];d=`docs${e?"":"/"}${d}`}n||(d=`${d}.md`)}else d=`md/${e.appTarget.id}/${t.replace(/^\//,"")}?targetVersion=${encodeURIComponent(l)}`;"en"!=n&&(d+=`${s?"?":"&"}lang=${encodeURIComponent(n)}`);if(e.BrowserUtils.isLocalHost()&&!e.Util.liveLocalizationEnabled())return a(d).then((e=>404==e.statusCode?u({url:d,method:"GET"}).then((e=>({md:e.text,etag:e.headers.etag}))):{md:e.text,etag:void 0}));{const e=r&&!o()?{"If-None-Match":r}:void 0;return c({url:d,method:"GET",headers:e}).then((e=>({md:e.text,etag:e.headers.etag})))}}(t,n,null==d?void 0:d.etag);return!d||r.md&&d.md!==r.md?(await l.setAsync(n,t,"",r.etag,void 0,r.md),r.md):d.md}catch(e){if(r)throw e;return""}};if(d){const t=Date.now()-d.time,n=t>i;if(t>s)e.tickEvent("markdown.update.wait");else if(n&&(e.tickEvent("markdown.update.background"),p()),d.md)return d.md}return p()},t.privateDeleteAsync=function(e){return u({url:e,method:"DELETE"}).then((e=>e.json))},t.privatePostAsync=function(e,t,n=!1){return u({url:e,data:t||{},forceLiveEndpoint:n}).then((e=>e.json))},t.isLoggedIn=function(){return!!t.accessToken},t.isNavigatorOnline=d,t.isOnline=function(){return"undefined"!=typeof navigator&&d()&&(r=!0),r},t.getServiceUrl=function(){return t.apiRoot.replace(/\/api\/$/,"")},t.getUserId=function(){let e=/^0(\w+)\./.exec(t.accessToken);return e?e[1]:null},t.parseScriptId=function(t){var r;const i=e.appTarget;if(!t||!i.appTheme||!(null===(r=i.cloud)||void 0===r?void 0:r.sharing))return;let a=["makecode.com"];i.appTheme.embedUrl&&a.push(i.appTheme.embedUrl),i.appTheme.shareUrl&&a.push(i.appTheme.shareUrl),a=n.unique(a,(e=>e)).map((e=>n.escapeForRegex(n.stripUrlProtocol(e).replace(/\/$/,"")).toLowerCase()));const o=`(?:(?:https://)?(?:${a.join("|")})/)`,s=new RegExp(`^${o}?(?:v[0-9]+/)?(?:(?:api/oembed\\?url=.*%2F([^&#]*)&.*)|(?:/?([a-z0-9\\-_]+)(?:[#?&].*)?))$`,"i").exec(t.trim()),c=(null==s?void 0:s[1])||(null==s?void 0:s[2]);return/^(_.{12}|S?[0-9\-]{23})$/.test(c)?c:void 0}}(e.Cloud||(e.Cloud={}))}(pxt||(pxt={})),function(e){!function(e){e.f4EncodeImg=function(e,t,n,r){let i=[135,n,255&e,e>>8,255&t,t>>8,0,0].map(l).join(""),a=4,o=0,s=0,c=e=>{o|=e<<s,s==8-n?(i+=l(o),a++,o=0,s=0):s+=n};for(let i=0;i<e;++i){for(let e=0;e<t;++e)c(r(i,e));for(;0!=s;)c(0);if(n>1)for(;3&a;)c(0)}return i;function l(e){return("0"+e.toString(16)).slice(-2)}}}(e.pxtc||(e.pxtc={}))}(ts||(ts={})),function(e){function t(e){let t="";switch(e){case 0:t="C5";break;case 1:t="B";break;case 2:t="A";break;case 3:t="G";break;case 4:t="F";break;case 5:t="E";break;case 6:t="D";break;case 7:t="C"}return t}function n(e){let t=-1;switch(e){case"C5":t=0;break;case"B":t=1;break;case"A":t=2;break;case"G":t=3;break;case"F":t=4;break;case"E":t=5;break;case"D":t=6;break;case"C":t=7}return t}e.MelodyArray=class{constructor(e){this.numCols=8,this.numRows=8,this.polyphonic=!1,e&&(this.tempo=e),this.resetMelody()}setTempo(e){this.tempo=e}getArray(){return this.melody}setArray(e){this.melody=e}getColor(e){return 0}getValue(e,t){return this.melody[e][t]}getWidth(){return this.numCols}getHeight(){return this.numRows}updateMelody(e,t){const n=!this.melody[e][t];if(n&&!this.polyphonic)for(let e=0;e<this.numRows;e++)this.melody[e][t]=!1;this.melody[e][t]=n}getStringRepresentation(){let e="",n=new Array(this.numCols),r=0;for(let e=0;e<this.numRows;e++){let i=0;n[e]=[];for(let r=0;r<this.numCols;r++)this.melody[r][e]&&(n[e].push(t(r)),i++);i>r&&(r=i)}if(0==r)return"- - - - - - - - ";for(let t=0;t<r;t++)for(let t=0;t<this.numCols;t++)n[t]&&n[t].length>0?e+=n[t].shift()+" ":e+="- ";return e}parseNotes(e){let t=(e=e.trim()).split(" ");for(let e=0;e<t.length;e++){for(let t=0;t<this.numRows;t++)this.melody[t][e]=!1;"-"!=t[e]&&(this.melody[n(t[e])][e]=!0)}}setPolyphonic(e){this.polyphonic=e}isPolyphonic(){return this.polyphonic}resetMelody(){this.melody=new Array(this.numCols);for(let e=0;e<this.numCols;e++)this.melody[e]=new Array(this.numRows).fill(!1)}},e.rowToNote=t,e.noteToRow=n,e.getColorClass=function(e){let t="melody-default";switch(e){case 0:t="melody-red";break;case 1:t="melody-orange";break;case 2:t="melody-yellow";break;case 3:t="melody-green";break;case 4:t="melody-teal";break;case 5:t="melody-blue";break;case 6:t="melody-purple";break;case 7:t="melody-violet"}return t}}(pxtmelody||(pxtmelody={})),function(e){function t(e,t,n){return function(e,t,n){if(t)for(const n of Object.keys(t))"className"===n?e.setAttribute("class",t[n]+""):e.setAttribute(n,t[n]+"");n&&e.addEventListener("click",n);return e}(document.createElement(e),t,n)}e.MelodyGallery=class{constructor(){this.value=null,this.visible=!1,this.timeouts=[],this.numSamples=e.SampleMelodies.length,this.containerDiv=document.createElement("div"),this.containerDiv.setAttribute("id","melody-editor-gallery-outer"),this.contentDiv=document.createElement("div"),this.contentDiv.setAttribute("id","melody-editor-gallery"),this.itemBackgroundColor="#DCDCDC",this.itemBorderColor="white",this.initStyles(),this.containerDiv.appendChild(this.contentDiv),this.containerDiv.style.display="none",this.contentDiv.addEventListener("animationend",(()=>{this.visible||(this.containerDiv.style.display="none")})),this.contentDiv.addEventListener("wheel",(e=>{e.stopPropagation()}),!0)}getElement(){return this.containerDiv}getValue(){return this.value}show(e){this.pending=e,this.containerDiv.style.display="block",this.buildDom(),this.visible=!0,pxt.BrowserUtils.removeClass(this.contentDiv,"hidden-above"),pxt.BrowserUtils.addClass(this.contentDiv,"shown")}hide(){this.visible=!1,pxt.BrowserUtils.removeClass(this.contentDiv,"shown"),pxt.BrowserUtils.addClass(this.contentDiv,"hidden-above"),this.value=null,this.stopMelody()}clearDomReferences(){this.contentDiv=null,this.containerDiv=null}layout(e,t,n){this.containerDiv.style.left=e+"px",this.containerDiv.style.top=t+"px",this.containerDiv.style.height=n+"px"}buildDom(){for(;this.contentDiv.firstChild;)this.contentDiv.removeChild(this.contentDiv.firstChild);const t=e.SampleMelodies;this.buttons=[];for(let e=0;e<t.length;e++)this.mkButton(t[e],e,"255px","45px")}initStyles(){const e=document.createElement("style");e.textContent="\n            #melody-editor-gallery {\n                margin-top: -100%;\n            }\n\n            #melody-editor-gallery.hidden-above {\n                margin-top: -100%;\n                animation: slide-up 0.2s 0s ease;\n            }\n\n            #melody-editor-gallery.shown {\n                margin-top: 0px;\n                animation: slide-down 0.2s 0s ease;\n            }\n\n            @keyframes slide-down {\n                0% {\n                    margin-top: -100%;\n                }\n                100% {\n                    margin-top: 0px;\n                }\n            }\n\n            @keyframes slide-up {\n                0% {\n                    margin-top: 0px;\n                }\n                100% {\n                    margin-top: -100%;\n                }\n            }\n            ",this.containerDiv.appendChild(e)}mkButton(e,n,r,i){const a=t("div",{className:"melody-gallery-button melody-editor-card",role:"menuitem",id:`:${n}`}),o=t("i",{className:"music icon melody-icon"}),s=t("div",{className:"melody-editor-text"});s.innerText=e.name;const c=this.createColorBlock(e),l=t("div",{className:"melody-editor-button left-button",role:"button",title:e.name},(()=>this.handleSelection(e)));l.appendChild(o),l.appendChild(s),l.appendChild(c),a.appendChild(l);const u=t("div",{className:"melody-editor-button right-button",role:"button",title:lf("Preview {0}",e.name)},(()=>this.togglePlay(e,n))),d=t("i",{className:"play icon"});this.buttons[n]=d,u.appendChild(d),a.appendChild(u),this.contentDiv.appendChild(a)}handleSelection(e){if(this.pending){const t=this.pending;this.pending=void 0,t(e.notes)}}playNote(e,t,n){let r=0;switch(e){case"C5":r=523;break;case"B":r=494;break;case"A":r=440;break;case"G":r=392;break;case"F":r=349;break;case"E":r=330;break;case"D":r=294;break;case"C":r=262}this.timeouts.push(setTimeout((()=>{pxt.AudioContextManager.tone(r)}),t*this.getDuration(n))),this.timeouts.push(setTimeout((()=>{pxt.AudioContextManager.stop()}),(t+1)*this.getDuration(n)))}getDuration(e){return 6e4/e}previewMelody(e){this.stopMelody();let t=e.notes.split(" ");for(let n=0;n<t.length;n++)this.playNote(t[n],n,e.tempo)}togglePlay(e,t){let n=this.buttons[t];pxt.BrowserUtils.containsClass(n,"play icon")?(this.resetPlayIcons(),pxt.BrowserUtils.removeClass(n,"play icon"),pxt.BrowserUtils.addClass(n,"stop icon"),this.previewMelody(e),this.timeouts.push(setTimeout((()=>{pxt.BrowserUtils.removeClass(n,"stop icon"),pxt.BrowserUtils.addClass(n,"play icon")}),e.notes.split(" ").length*this.getDuration(e.tempo)))):(pxt.BrowserUtils.removeClass(n,"stop icon"),pxt.BrowserUtils.addClass(n,"play icon"),this.stopMelody())}stopMelody(){for(;this.timeouts.length;)clearTimeout(this.timeouts.shift());pxt.AudioContextManager.stop()}resetPlayIcons(){for(let e=0;e<this.numSamples;e++){let t=this.buttons[e];if(pxt.BrowserUtils.containsClass(t,"stop icon")){pxt.BrowserUtils.removeClass(t,"stop icon"),pxt.BrowserUtils.addClass(t,"play icon");break}}}createColorBlock(t){let n=document.createElement("div");pxt.BrowserUtils.addClass(n,"melody-color-block");let r=t.notes.split(" ");for(let t=0;t<r.length;t++){let i=e.getColorClass(e.noteToRow(r[t])),a=document.createElement("div");0==t?pxt.BrowserUtils.addClass(a,"left-edge sliver "+i):t==r.length-1?pxt.BrowserUtils.addClass(a,"right-edge sliver "+i):pxt.BrowserUtils.addClass(a,"sliver "+i),n.appendChild(a)}return n}}}(pxtmelody||(pxtmelody={})),function(e){class t{constructor(e,t,n){this.name=e,this.notes=t,this.tempo=n}}e.MelodyInfo=t,e.SampleMelodies=[new t(lf("Scale"),"C5 B A G F E D C",120),new t(lf("Reverse"),"C D E F G A B C5",120),new t(lf("Mystery"),"E B C5 A B G A F",120),new t(lf("Gilroy"),"A F E F D G E F",120),new t(lf("Falling"),"C5 A B G A F G E",120),new t(lf("Hopeful"),"G B A G C5 B A B",120),new t(lf("Tokyo"),"B A G A G F A C5",120),new t(lf("Paris"),"G F G A - F E D",120),new t(lf("Rising"),"E D G F B A C5 B",120),new t(lf("Sitka"),"C5 G B A F A C5 B",120)]}(pxtmelody||(pxtmelody={})),function(e){let t,n=!1;class r{constructor(e){this.db=e}loadAsync(n,r,i,a){if(!/^v\d+\.\d+\.\d+$/.test(r))return a(n,r);const o=`gh-${i}-${n}#${r}`;return t.cacheGet(o).then((i=>{if(i){const t=e.Util.jsonTryParse(i);if(t)return e.debug(`cache hit ${o}`),Promise.resolve(t)}return a(n,r).then((n=>n?(e.debug(`cached ${o}`),t.cacheSet(o,JSON.stringify(n)).then((()=>n))):n))}))}latestVersionAsync(e,t){return this.db.latestVersionAsync(e,t)}loadConfigAsync(e,t){return this.loadAsync(e,t,"pxt",((e,t)=>this.db.loadConfigAsync(e,t)))}loadPackageAsync(e,t){return this.loadAsync(e,t,"pkg",((e,t)=>this.db.loadPackageAsync(e,t)))}}class i{constructor(e){this.packageFiles=e}resolve(e,t){return""}readFile(t,n){const r="this"==t.id?n:"pxt_modules/"+t.id+"/"+n;return void 0!==this.packageFiles[r]?this.packageFiles[r]:e.appTarget.bundledpkgs[t.id]?e.appTarget.bundledpkgs[t.id][n]:null}writeFile(t,n,r){const i="this"==t.id?"":"pxt_modules/"+t.id+"/";e.debug(`write file ${i+n}`),this.packageFiles[i+n]=r}getHexInfoAsync(e){return Promise.resolve({hex:["SKIP"]})}cacheStoreAsync(e,n){return(null==t?void 0:t.cacheSet)?t.cacheSet(e,n):Promise.resolve()}cacheGetAsync(e){return(null==t?void 0:t.cacheGet)?t.cacheGet(e):Promise.resolve("")}downloadPackageAsync(r){return n?function(e){const n=null==t?void 0:t.pkgOverrideAsync;return(n?n(e.id):Promise.resolve(void 0)).then((t=>t||e.commonDownloadAsync()))}(r).then((t=>{t&&e.U.iterMap(t,((e,t)=>{this.writeFile(r,e,t)}))})):Promise.resolve()}resolveVersionAsync(e){return Promise.resolve("*")}}function a(t){if(t.target.preferredEditor==e.PYTHON_PROJECT_NAME){const n=e.U.clone(t);n.ast=!0,n.target.preferredEditor=e.JAVASCRIPT_PROJECT_NAME;for(let t of n.sourceFiles)e.U.endsWith(t,".py")&&(n.fileSystem[t.slice(0,-3)+".ts"]=" ");const r=pxtc.compile(n);t.apisInfo=pxtc.getApiInfo(r.ast,n.jres)}}function o(t,n){const r=new i(t),o=new e.MainPackage(r);return o.loadAsync().then((()=>{let e=o.getTargetOptions();return e.hasHex&&(e.isNative=n.native),o.getCompileOptionsAsync(e)})).then((t=>(s(o.targetVersion(),t),o.getPreferredEditor()===e.PYTHON_PROJECT_NAME&&c(o.targetVersion(),t),a(t),t)))}function s(t,n){if(t){e.debug(`applying TS patches relative to ${t}`);for(let r of Object.keys(n.fileSystem))if(-1==r.indexOf("/")&&e.U.endsWith(r,".ts")){const i=n.fileSystem[r],a=e.patching.patchJavaScript(t,i);i!=a&&(e.debug(`applying TS patch to ${r}`),n.fileSystem[r]=a)}}}function c(t,n){if(t){e.debug(`applying PY patches relative to ${t}`);for(let r of Object.keys(n.fileSystem))if(-1==r.indexOf("/")&&e.U.endsWith(r,".py")){const i=n.fileSystem[r],a=e.patching.patchPython(t,i);i!=a&&(e.debug(`applying PY patch to ${r}`),n.fileSystem[r]=a)}}}e.SimpleHost=i,e.prepPythonOptions=a,e.simpleInstallPackagesAsync=function(t){const n=new i(t);return new e.MainPackage(n).loadAsync(!0)},e.simpleGetCompileOptionsAsync=o,e.simpleCompileAsync=function(e,t){return o(e,"boolean"==typeof t?{native:t}:t||{}).then((e=>pxtc.compile(e))).then((e=>(e.success||(e.errors=e.diagnostics.map(ts.pxtc.getDiagnosticString).join("")||"Unknown error."),e)))},e.patchTS=s,e.patchPY=c,e.setupSimpleCompile=function(i){"undefined"==typeof global||global.btoa||(global.btoa=function(e){return Buffer.from(e,"binary").toString("base64")},global.atob=function(e){return Buffer.from(e,"base64").toString("binary")}),"undefined"!=typeof pxtTargetBundle&&(e.debug("setup app bundle"),e.setAppTarget(pxtTargetBundle)),i&&(t=i,n=!0,i.httpRequestAsync&&(e.Util.httpRequestCoreAsync=i.httpRequestAsync),e.github.forceProxy=!0,e.github.db=new r(new e.github.MemoryGithubDb)),e.debug("simple setup done")}}(pxt||(pxt={})),function(e){e.simshim=function(t,n){let r,i=ts.SyntaxKind,a=t.getTypeChecker(),o=e.cpp.nsWriter("declare namespace"),s="";for(let a of t.getSourceFiles()){if(n){let t=n(a.fileName);if(e.debug("SimShim[1]: "+t.dir),!e.U.endsWith(t.dir,"/sim")&&!e.U.startsWith(a.fileName,"sim/"))continue}else if(!e.U.startsWith(a.fileName,"sim/"))continue;e.debug("SimShim[2]: "+a.fileName);for(let e of a.statements){let t=e;e.kind==i.ModuleDeclaration&&"pxsim"==t.name.text&&(r=t,m(t.body))}}let c={};return c[e.appTarget.corepkg]=o.finish(),c;function l(e){let t;return ts.isExpression(e)&&(t=a.getContextualType(e)),t||(t=a.getTypeAtLocation(e)),t}function u(e){let t=a.typeToString(e,r,ts.TypeFormatFlags.UseFullyQualifiedType);switch(t=t.replace(/^pxsim\./,""),t){case"RefAction":return"() => void";case"RefBuffer":return"Buffer";default:return t}}function d(e){let t=pxtc.getComments(e);return/^\s*\/\/%/m.test(t)?t:null}function p(e){let t=d(e);if(!t)return;let n=e.name.getText(),r="//% shim=."+n,i=a.getTypeAtLocation(e);o.write(t),o.write(r),o.write(`public ${n}: ${u(i)};`),o.write("")}function f(e){let t=d(e);if(!t)return;a.getTypeAtLocation(e);let n=e.parameters.map((e=>e.name.getText()+": "+u(l(e))));o.write(t),o.write(`//% shim="new ${s}"`),o.write(`constructor(${n.join(", ")});`),o.write("")}function _(t,n=!1){let r=d(t);if(!r)return;let c=t.name.getText(),p=t.kind==i.MethodDeclaration||t.kind==i.GetAccessor||t.kind==i.SetAccessor,f="//% shim="+(p?"."+c:s+"::"+c),_=a.getSignatureFromDeclaration(t),m=a.getReturnTypeOfSignature(_),g=/Async$/.test(c),h=(y=m,pxtc.isObjectType(y)&&y.objectFlags&ts.ObjectFlags.Reference&&"Promise"==y.symbol.name?y.typeArguments[0]:null);var y;h?(f+=" promise",m=h,g||e.U.userError(`${s}::${c} should be called ${c}Async`)):g&&e.U.userError(`${s}::${c} doesn't return a promise`),e.debug("emitFun: "+c);let v=t.parameters.map((e=>`${e.name.getText()}${e.questionToken?"?":""}: ${u(l(e))}`)),b=c.replace(/Async$/,""),x=p?"public":"function",k=`(${v.join(", ")})`;t.kind==i.GetAccessor&&(x=n?"public":"readonly",k="",f+=" property"),p||o.setNs(s),o.write(r),o.write(f),o.write(`${x} ${b}${k}: ${u(m)};`),o.write("")}function m(e){switch(e.kind){case i.ModuleDeclaration:return function(e){let t=s;s&&(s+="."),s+=e.name.text,m(e.body),s=t}(e);case i.ModuleBlock:return e.statements.forEach(m);case i.FunctionDeclaration:return _(e);case i.ClassDeclaration:return function(e){let t=d(e);if(!t)return;o.setNs(s),o.write(t);let n=s;s&&(s+="."),s+=e.name.text;let r=n?"":"declare",a="";if(e.heritageClauses)for(let t of e.heritageClauses)t.token==i.ExtendsKeyword&&(a=" extends "+u(l(t.types[0])));o.write(`${r} class ${e.name.text}${a} {`),o.incrIndent();for(let t of e.members)switch(t.kind){case i.MethodDeclaration:_(t);break;case i.PropertyDeclaration:p(t);break;case i.Constructor:f(t);break;case i.GetAccessor:let n=e.members.some((e=>e.kind==i.SetAccessor&&e.name.getText()==t.name.getText()));_(t,n)}s=n,o.decrIndent(),o.write("}")}(e)}}}}(pxt||(pxt={})),function(e){!function(t){t.annotate=function(n,r,i){const a=t.target;t.target=i;let o=n.getSourceFiles().filter((e=>e.fileName===r))[0],s=n.getTypeChecker();function c(n,r,i=!1,a=null){let o=i||!(u(n).flags&e.TypeFlags.Void),c=a||l(n);if(n.expression&&c){let e=!1;switch(c.kind){case t.SK.PropertySignature:case t.SK.PropertyAssignment:case t.SK.PropertyDeclaration:t.isStatic(c)||(e=!0);break;case t.SK.Parameter:t.isCtorField(c)&&(e=!0);break;case t.SK.GetAccessor:case t.SK.SetAccessor:case t.SK.MethodDeclaration:case t.SK.MethodSignature:e=!0}if(e){const e=n.expression;e.kind===t.SK.PropertyAccessExpression?r.unshift(e.expression):r.unshift(n.expression)}}let d={decl:c,qName:c?t.getNodeFullName(s,c):"?",args:r,isExpression:o};t.pxtInfo(n).callInfo=d}function l(n){if(!n)return null;let r,i=s.getSymbolAtLocation(n);if(i&&(r=i.valueDeclaration,!r&&i.declarations)){let t=i.declarations[0];t&&t.kind==e.SyntaxKind.ImportEqualsDeclaration&&(i=s.getSymbolAtLocation(t.moduleReference),i&&(r=i.valueDeclaration))}if(!r&&n.kind==t.SK.PropertyAccessExpression){const e=n;r={kind:t.SK.PropertySignature,symbol:{isBogusSymbol:!0,name:e.name.getText()},name:e.name},t.pxtInfo(r).flags|=2}return r}function u(n){let r;const i=t.pxtInfo(n);return i.typeCache?i.typeCache:(e.isExpression(n)&&(r=s.getContextualType(n)),r||(r=s.getTypeAtLocation(n)),r?e.isStringLiteral(n)?r:t.checkType(r):r)}!function n(r){e.forEachChild(r,(r=>{switch(r.kind){case e.SyntaxKind.CallExpression:c(r,r.arguments.slice(0),null,l(r.expression));break;case e.SyntaxKind.PropertyAccessExpression:c(r,[]);break;case e.SyntaxKind.TaggedTemplateExpression:c(r,[r.template],!0,l(r.tag));break;case e.SyntaxKind.BinaryExpression:!function(n){const r=n.left,i=n.right;let a=u(n.left),o=u(n.right);n.operatorToken.kind!=t.SK.PlusToken&&n.operatorToken.kind!=t.SK.PlusEqualsToken||(t.isStringType(a)||t.isStringType(o)&&n.operatorToken.kind==t.SK.PlusToken)&&(t.pxtInfo(n).exprInfo={leftType:s.typeToString(a),rightType:s.typeToString(o)});switch(n.operatorToken.kind){case e.SyntaxKind.EqualsToken:case e.SyntaxKind.PlusEqualsToken:case e.SyntaxKind.MinusEqualsToken:if(r.kind==t.SK.PropertyAccessExpression){let n=l(r);n&&n.kind==t.SK.GetAccessor?(n=e.getDeclarationOfKind(n.symbol,t.SK.SetAccessor),c(r,[i],!1,n)):n&&(n.kind==t.SK.PropertySignature||n.kind==t.SK.PropertyAssignment||t.target&&t.target.switches.slowFields)&&c(r,[i])}}}(r);break;case e.SyntaxKind.Identifier:const n=l(r);if(n&&n.getSourceFile().fileName!==pxt.MAIN_TS&&n.kind==e.SyntaxKind.VariableDeclaration){const e=t.pxtInfo(r);e.flags|=4,e.commentAttrs||(e.commentAttrs=t.parseComments(n))}}n(r)}))}(o),t.target=a}}(e.pxtc||(e.pxtc={}))}(ts||(ts={})),function(e){!function(e){function t(e){let t='"';for(let n=0;n<e.length;++n){let r=255&e.charCodeAt(n),i=String.fromCharCode(r);t+="\\"==i||'"'==i?"\\"+i:"\n"==i?"\\n":r<=15?"\\x0"+r.toString(16):r<32||r>127?"\\x"+r.toString(16):i}return t+'"'}e.asmStringLiteral=t;function n(n){let r="pxt::string_inline_ascii_vt",i=e.target.utf8?e.U.toUTF8(n,!0):n,a="";if(i!==n)if(n.length>16){r="pxt::string_skiplist16_packed_vt";let o=[],s=0;for(let t=0;t+16<=n.length;t+=16)s+=e.U.toUTF8(n.slice(t,t+16),!0).length,o.push(s);a=`\n    .short ${i.length}, ${n.length}\n    .short ${o.map((e=>e.toString())).join(", ")}\n    .string ${t(i)}\n`}else r="pxt::string_inline_utf8_vt";return a||(a=`\n    .short ${i.length}\n    .string ${t(i)}\n`),{vt:r,asm:a}}function r(e,t=""){return`\n                .word ${e.length>>1}${t}\n                .hex ${e}${e.length%4==0?"":"00"}\n        `}e.AssemblerSnippets=class{nop(){return"TBD(nop)"}reg_gets_imm(e,t){return"TBD(reg_gets_imm)"}proc_setup(e,t){return"TBD(proc_setup)"}push_fixed(e){return"TBD(push_fixed)"}push_local(e){return"TBD(push_local)"}push_locals(e){return"TBD(push_locals)"}pop_fixed(e){return"TBD(pop_fixed)"}pop_locals(e){return"TBD(pop_locals)"}proc_return(){return"TBD(proc_return)"}debugger_stmt(e){return""}debugger_bkpt(e){return""}debugger_proc(e){return""}unconditional_branch(e){return"TBD(unconditional_branch)"}beq(e){return"TBD(beq)"}bne(e){return"TBD(bne)"}cmp(e,t){return"TBD(cmp)"}cmp_zero(e){return"TBD(cmp_zero)"}arithmetic(){return""}load_reg_src_off(e,t,n,r,i,a){return"TBD(load_reg_src_off)"}rt_call(e,t,n){return"TBD(rt_call)"}call_lbl(e,t){return"TBD(call_lbl)"}call_reg(e){return"TBD(call_reg)"}helper_prologue(){return"TBD(lambda_prologue)"}helper_epilogue(){return"TBD(lambda_epilogue)"}pop_clean(e){return"TBD"}load_ptr_full(e,t){return"TBD(load_ptr_full)"}emit_int(e,t){return"TBD(emit_int)"}obj_header(e){return`.word ${e}`}string_literal(e,t){const r=n(t);return`\n            .balign 4\n            .object ${e}\n            ${e}: ${this.obj_header(r.vt)}\n            ${r.asm}\n`}hex_literal(e,t){return`\n.balign ${/f{16}/i.test(t)?8:4}\n.object ${e}\n${e}: ${this.obj_header("pxt::buffer_vt")}\n${r(t)}\n`}},e.utf8AsmStringLiteral=n,e.hexLiteralAsm=r,e.numBytes=function(e){let t=0;for(let n=e;n>0;n>>>=8)t++;return t||1};e.ProctoAssembler=class{constructor(t,n,r){this.resText="",this.exprStack=[],this.calls=[],this.proc=null,this.baseStackSize=0,this.labelledHelpers={},this.write=t=>{this.resText+=e.asmline(t)},this.t=t,this.bin=n,this.proc=r,this.proc&&this.work()}emitHelpers(){this.emitLambdaTrampoline(),this.emitArrayMethods(),this.emitFieldMethods(),this.emitBindHelper()}redirectOutput(t){let n=this.write,r="";this.write=t=>r+=e.asmline(t);try{t()}finally{this.write=n}return r}stackSize(){return this.baseStackSize+this.exprStack.length}stackAlignmentNeeded(t=0){if(!e.target.stackAlign)return 0;let n=e.target.stackAlign-(this.stackSize()+t&e.target.stackAlign-1);return n==e.target.stackAlign?0:n}getAssembly(){return this.resText}work(){this.write(`\n;\n; Function ${this.proc.getFullName()}\n;\n`);let t=this.proc.label();this.write(`.object ${t} ${JSON.stringify(this.proc.getFullName())}`);let n=t+"_pre",r=t+"_bkpt",i=t+"_locals",a=t+"_end";this.write(`${n}:`),this.emitLambdaWrapper(this.proc.isRoot),this.write(".section code"),this.write(`${t}:`),this.proc.classInfo&&this.proc.info.thisParameter&&!e.target.switches.skipClassCheck&&!e.target.switches.noThisCheckOpt&&(this.write("mov r7, lr"),this.write("ldr r0, [sp, #0]"),this.emitInstanceOf(this.proc.classInfo,"validate"),this.write("mov lr, r7")),this.write(`\n${t}_nochk:\n    @stackmark func\n    @stackmark args\n`),this.proc.fillDebugInfo=t=>{let o=t.getLabels();this.proc.debugInfo={locals:(1==this.proc.seqNo?this.bin.globals:this.proc.locals).map((e=>e.getDebugInfo())),args:this.proc.args.map((e=>e.getDebugInfo())),name:this.proc.getName(),codeStartLoc:e.U.lookup(o,i),codeEndLoc:e.U.lookup(o,a),bkptLoc:e.U.lookup(o,r),localsMark:e.U.lookup(t.stackAtLabel,i),idx:this.proc.seqNo,calls:this.calls,size:e.U.lookup(o,a)+2-e.U.lookup(o,n)};for(let n of this.calls)n.addr=e.U.lookup(o,n.callLabel),n.stack=e.U.lookup(t.stackAtLabel,n.callLabel),n.callLabel=void 0;for(let n=0;n<this.proc.body.length;++n){let r=this.proc.body[n].breakpointInfo;if(r){let n=e.U.lookup(t.stackAtLabel,`__brkp_${r.id}`);n!==this.proc.debugInfo.localsMark&&(console.log(r),console.log(t.stackAtLabel),e.U.oops(`offset doesn't match: ${n} != ${this.proc.debugInfo.localsMark}`))}}},this.bin.breakpoints&&this.write(this.t.debugger_proc(r)),this.baseStackSize=1;let o=this.proc.locals.length;this.write("push {lr}"),this.write(".locals:\n"),this.proc.perfCounterNo&&(this.write(this.t.emit_int(this.proc.perfCounterNo,"r0")),this.write("bl pxt::startPerfCounter")),this.write(this.t.proc_setup(o)),this.baseStackSize+=o,this.write("@stackmark locals"),this.write(`${i}:`);for(let t=0;t<this.proc.body.length;++t){let n=this.proc.body[t];switch(n.stmtKind){case e.ir.SK.Expr:this.emitExpr(n.expr);break;case e.ir.SK.StackEmpty:if(this.exprStack.length>0){for(let e of this.proc.body.slice(t-4,t+1))console.log(`PREVSTMT ${e.toString().trim()}`);for(let e of this.exprStack)console.log(`EXPRSTACK ${e.currUses}/${e.totalUses} E: ${e.toString()}`);e.oops("stack should be empty")}this.write("@stackempty locals");break;case e.ir.SK.Jmp:this.emitJmp(n);break;case e.ir.SK.Label:this.write(n.lblName+":"),this.validateJmpStack(n);break;case e.ir.SK.Comment:this.write(`; ${n.expr.data}`);break;case e.ir.SK.Breakpoint:if(this.bin.breakpoints){let e=`__brkp_${n.breakpointInfo.id}`;n.breakpointInfo.isDebuggerStmt?this.write(this.t.debugger_stmt(e)):this.write(this.t.debugger_bkpt(e))}break;default:e.oops()}}e.assert(0<=o&&o<127),o>0&&this.write(this.t.pop_locals(o)),this.proc.perfCounterNo&&(this.write("mov r4, r0"),this.write(this.t.emit_int(this.proc.perfCounterNo,"r0")),this.write("bl pxt::stopPerfCounter"),this.write("mov r0, r4")),this.write(`${a}:`),this.write(this.t.proc_return()),this.write("@stackempty func"),this.write("@stackempty args"),this.write("; endfun")}mkLbl(e){let t=e+this.bin.lblNo++;return"_"!=t[0]&&(t="."+t),t}dumpStack(){let e="[";for(let t of this.exprStack)e+=t.sharingInfo()+": "+t.toString()+"; ";return e+="]",e}terminate(t){e.assert(t.exprKind==e.ir.EK.SharedRef);let n=t.args[0];e.U.assert(n.currUses!=n.totalUses),e.U.assert(this.exprStack[0]===n,"term at top");let r=1;for(;r<this.exprStack.length;){let e=this.exprStack[r];if(e.currUses!=e.totalUses)break;r++}return this.write(`@dummystack ${r}`),this.write(this.t.pop_locals(r)),r}validateJmpStack(t,n=0){let r=this.exprStack.length-n;null==t.lblStackSize?t.lblStackSize=r:t.lblStackSize!=r&&(console.log(t.lblStackSize,r),console.log(this.dumpStack()),e.U.oops("stack misaligned at: "+t.lblName))}emitJmp(t){let n=0;if(t.jmpMode==e.ir.JmpMode.Always)t.expr&&this.emitExpr(t.expr),t.terminateExpr&&(n=this.terminate(t.terminateExpr)),this.write(this.t.unconditional_branch(t.lblName)+" ; with expression");else{let r=this.mkLbl("jmpz");this.emitExpr(t.expr),(t.expr.exprKind!=e.ir.EK.RuntimeCall||"thumb::subs"!==t.expr.data&&!e.U.startsWith(t.expr.data,"_cmp_"))&&this.write(this.t.cmp_zero("r0")),t.jmpMode==e.ir.JmpMode.IfNotZero?this.write(this.t.beq(r)):this.write(this.t.bne(r)),t.terminateExpr&&(n=this.terminate(t.terminateExpr)),this.write(this.t.unconditional_branch(t.lblName)),this.write(r+":")}this.validateJmpStack(t.lbl,n)}clearStack(e=!1){let t=0;for(;this.exprStack.length>0&&this.exprStack[0].currUses==this.exprStack[0].totalUses;)t++,this.exprStack.shift();if(t&&this.write(this.t.pop_locals(t)),!e){let e=this.exprStack.filter((e=>e.currUses==e.totalUses&&-1!=e.irCurrUses));if(e.length>0){this.write(this.t.reg_gets_imm("r7",0));for(let t of e)t.irCurrUses=-1,this.write(this.loadFromExprStack("r7",t,0,!0))}}}emitExprInto(t,n){switch(t.exprKind){case e.ir.EK.NumberLiteral:"number"==typeof t.data?this.write(this.t.emit_int(t.data,n)):e.oops();break;case e.ir.EK.PointerLiteral:this.write(this.t.load_ptr_full(t.data,n));break;case e.ir.EK.SharedRef:let r=t.args[0];e.U.assert(!!r.currUses),e.U.assert(r.currUses<r.totalUses),r.currUses++;let i=this.exprStack.indexOf(r);if(e.U.assert(i>=0),0==i&&r.totalUses==r.currUses)this.write(this.t.pop_fixed([n])+` ; tmpref @${this.exprStack.length}`),this.exprStack.shift(),this.clearStack();else{let e=i.toString()+":"+this.exprStack.length;this.write(this.t.load_reg_src_off(n,"sp",e,!0)+" ; tmpref @"+(this.exprStack.length-i))}break;case e.ir.EK.CellRef:let a=t.data;if(a.isGlobal()){let e=this.bitSizeInfo(a.bitSize),t="#"+a.index;(e.needsSignExt||a.index>=e.immLimit)&&(this.write(this.t.emit_int(a.index,n)),t=n),this.write(this.t.load_reg_src_off("r7","r6","#0")),this.write(this.t.load_reg_src_off(n,"r7",t,!1,!1,e))}else{let[e,t,r]=this.cellref(a);this.write(this.t.load_reg_src_off(n,e,t,r))}break;default:e.oops()}}bitSizeInfo(t){let n={size:e.sizeOfBitSize(t),immLimit:128};return 1==n.size?n.immLimit=32:2==n.size&&(n.immLimit=64),1!=t&&3!=t||(n.needsSignExt=!0),n}emitExpr(t){switch(t.exprKind){case e.ir.EK.JmpValue:this.write("; jmp value (already in r0)");break;case e.ir.EK.Nop:this.write(this.t.nop());break;case e.ir.EK.FieldAccess:return this.emitExpr(t.args[0]),this.emitFieldAccess(t);case e.ir.EK.Store:return this.emitStore(t.args[0],t.args[1]);case e.ir.EK.RuntimeCall:return this.emitRtCall(t);case e.ir.EK.ProcCall:return this.emitProcCall(t);case e.ir.EK.SharedDef:return this.emitSharedDef(t);case e.ir.EK.Sequence:return t.args.forEach((e=>this.emitExpr(e))),this.clearStack();case e.ir.EK.InstanceOf:return this.emitExpr(t.args[0]),this.emitInstanceOf(t.data,t.jsInfo);default:return this.emitExprInto(t,"r0")}}emitFieldAccess(t,n=!1){let r=t.data,i=(n?"st":"ld")+"fld_"+r.classInfo.id+"_"+r.name;r.needsCheck&&!e.target.switches.skipClassCheck&&(this.emitInstanceOf(r.classInfo,"validate"),i+="_chk");let a=4*r.idx+4,o="#"+a;a>124&&(this.write(this.t.emit_int(a,"r3")),o="r3"),n?this.write(`str r1, [r0, ${o}]`):this.write(`ldr r0, [r0, ${o}]`)}writeFailBranch(){this.write(".fail:"),this.write("mov r1, lr"),this.write(this.t.callCPP("pxt::failedCast"))}emitClassCall(t){let n=t.virtualIndex+e.firstMethodOffset();this.write(this.t.emit_int(4*n,"r1"));let r=t.classInfo,i="";t.isThis&&(i+="_this"),this.emitLabelledHelper("classCall_"+r.id+i,(()=>{this.write("ldr r0, [sp, #0] ; ld-this"),this.loadVTable(),e.target.switches.skipClassCheck||t.isThis||this.checkSubtype(r),this.write("ldr r1, [r3, r1] ; ld-method"),this.write("bx r1 ; keep lr from caller"),this.writeFailBranch()}))}helperObject(e){return`.object _pxt_helper_${e.replace(/[^\w]+/g,"_")} "helper: ${e}"`}emitBindHelper(){this.write(`\n                ${this.helperObject("bind")}\n                .section code\n                _pxt_bind_helper:\n                    push {r0, r2}\n                    movs r0, #2\n                    ldlit r1, _pxt_bind_lit\n                    ${this.t.callCPP("pxt::mkAction")}\n                    pop {r1, r2}\n                    str r1, [r0, #12]\n                    str r2, [r0, #16]\n                    bx r4 ; return\n\n                _pxt_bind_lit:\n                    ${this.t.obj_header("pxt::RefAction_vtable")}\n                    .short 0, 0 ; no captured vars\n                    .word .bindCode@fn\n                .bindCode:\n                    ; r0-bind object, r4-#args\n                    cmp r4, #12\n                    bge .fail\n                    lsls r3, r4, #2\n                    ldlit r2, _pxt_copy_list\n                    ldr r1, [r2, r3]\n\n                    ldr r3, [r0, #12]\n                    ldr r2, [r0, #16]\n                    adds r4, r4, #1\n                    bx r1\n            `),this.writeFailBranch(),this.write("_pxt_copy_list:"),this.write(e.U.range(12).map((e=>`.word _pxt_bind_${e}@fn`)).join("\n"));for(let e=0;e<12;e++){this.write(`\n                _pxt_bind_${e}:\n                    sub sp, #4\n                `);for(let t=0;t<e;++t)this.write(`ldr r1, [sp, #4*${t+1}]`),this.write(`str r1, [sp, #4*${t}]`);this.write(`\n                    push {r3} ; this-ptr\n                    mov r1, lr\n                    str r1, [sp, #4*${e+1}] ; store LR\n                    blx r2\n                    ldr r1, [sp, #4*${e+1}]\n                    add sp, #8\n                    bx r1\n                `)}}ifaceCallCore(t,n,r=!1){this.write("\n                ldr r2, [r3, #12] ; load mult\n                movs r7, r2\n                beq .objlit ; built-in types have mult=0\n                muls r7, r1\n                lsrs r7, r2\n                lsls r7, r7, #1 ; r7 - hash offset\n                ldr r3, [r3, #4] ; iface table\n                adds r3, r3, r7\n                ; r0-this, r1-method idx, r2-free, r3-hash entry, r4-num args, r7-free\n                ");for(let t=0;t<e.vtLookups;++t)t>0&&this.write("    adds r3, #2"),this.write("\n                ldrh r2, [r3, #0] ; r2-offset of descriptor\n                ldrh r7, [r2, r3] ; r7-method idx\n                cmp r7, r1\n                beq .hit\n                ");"get"==n?(this.write("movs r0, #0 ; undefined"),this.write("bx lr")):this.write("b .fail2"),this.write("\n            .hit:\n                adds r3, r3, r2 ; r3-descriptor\n                ldr r2, [r3, #4]\n                lsls r7, r2, #31\n                beq .field\n            ");const i=this.t.emit_int(t,"r4")+"\n     bx r2";if("set"==n?this.write(`\n                    ; check for next descriptor\n                    ldrh r7, [r3, #8]\n                    cmp r7, r1\n                    bne .fail2 ; no setter!\n                    ldr r2, [r3, #12]\n                    ${i}\n                `):(this.write("\n                    ; check if it's getter\n                    ldrh r7, [r3, #2]\n                    cmp r7, #1\n                "),"get"==n?this.write(`\n                        bne .bind\n                        ${i}\n                    .bind:\n                        mov r4, lr\n                        bl _pxt_bind_helper\n                    `):this.write(`\n                        beq .doublecall\n                        ${i}\n                    .doublecall:\n                        ; call getter\n                        movs r4, #1\n                        push {r0, lr}\n                        blx r2\n                        pop {r1, r2}\n                        mov lr, r2\n                        b .moveArgs\n                    `)),r||(this.write(`\n                .objlit:\n                    ldrh r2, [r3, #8]\n                    cmp r2, #${pxt.BuiltInType.RefMap}\n                    bne .fail\n                    mov r4, lr\n                `),"set"==n&&this.write("ldr r2, [sp, #4] ; ld-val"),this.write(this.t.callCPP("set"==n?"pxtrt::mapSet":"pxtrt::mapGet")),n?this.write("bx r4"):(this.write("mov lr, r4"),this.write("b .moveArgs"))),this.write(".field:"),"set"==n?this.write("\n                        ldr r3, [sp, #4] ; ld-val\n                        str r3, [r0, r2] ; store field\n                        bx lr\n                    "):"get"==n?this.write("\n                        ldr r0, [r0, r2] ; load field\n                        bx lr\n                    "):this.write("\n                        ldr r0, [r0, r2] ; load field\n                    "),!n){this.write(".moveArgs:");for(let e=0;e<t;++e)e==t-1?this.write("movs r1, r0"):this.write(`ldr r1, [sp, #4*${e+1}]`),this.write(`str r1, [sp, #4*${e}]`);this.lambdaCall(t-1)}r&&this.write(".objlit:"),this.writeFailBranch(),this.write(`\n            .fail2:\n                ${this.t.callCPP("pxt::missingProperty")}\n            `)}emitIfaceCall(t,n,r=""){e.U.assert(t.ifaceIndex>0),this.write(this.t.emit_int(t.ifaceIndex,"r1")),this.emitLabelledHelper("ifacecall"+n+"_"+r,(()=>{this.write("ldr r0, [sp, #0] ; ld-this"),this.loadVTable(),this.ifaceCallCore(n,r)}))}checkSubtype(e,t=".fail",n="r2"){e.classNo?(this.write(`ldrh ${n}, [r3, #8]`),this.write(`cmp ${n}, #${e.classNo}`),e.classNo==e.lastSubtypeNo?this.write(`bne ${t}`):(this.write(`blt ${t}`),this.write(`cmp ${n}, #${e.lastSubtypeNo}`),this.write(`bgt ${t}`))):this.write(`b ${t} ; always fails; class never instantiated`)}loadVTable(e="r2",t=".fail",n=".fail"){this.write(`lsls ${e}, r0, #30`),this.write(`bne ${t}`),this.write("cmp r0, #0"),this.write(`beq ${n}`),this.write("ldr r3, [r0, #0]"),this.write("; vtable in R3")}emitInstanceOf(t,n){let r="inst_"+t.id+"_"+n;this.emitLabelledHelper(r,(()=>{"validateNullable"==n?this.loadVTable("r2",".tagged",".undefined"):this.loadVTable("r2",".fail",".fail"),this.checkSubtype(t),"bool"==n?(this.write(`movs r0, #${e.taggedTrue}`),this.write("bx lr"),this.write(".fail:"),this.write(`movs r0, #${e.taggedFalse}`),this.write("bx lr")):"validate"==n?(this.write("bx lr"),this.writeFailBranch()):"validateNullable"==n?(this.write(".undefined:"),this.write("bx lr"),this.write(".tagged:"),this.write(`cmp r0, #${e.taggedNull} ; check for null`),this.write("bne .fail"),this.write("movs r0, #0"),this.write("bx lr"),this.writeFailBranch()):e.U.oops()}))}emitSharedDef(t){let n=t.args[0];if(e.U.assert(n.totalUses>=1),e.U.assert(0===n.currUses),n.currUses=1,1==n.totalUses)return this.emitExpr(n);this.emitExpr(n),this.exprStack.unshift(n),this.write(this.t.push_local("r0")+"; tmpstore @"+this.exprStack.length)}clearArgs(t,n){t.length,n.length;let r=t.concat(n);for(let t of r)0==t.currUses&&1==t.totalUses||(console.log(t.toString()),console.log(r.map((e=>e.toString()))),e.U.oops(`wrong uses: ${t.currUses} ${t.totalUses}`)),t.currUses=1;this.clearStack()}builtInClassNo(e){return{id:"builtin"+e,classNo:e,lastSubtypeNo:e}}emitBeginTry(e){this.emitExprInto(e.args[0],"r0"),this.write("bl _pxt_save_exception_state")}emitRtCall(t,n=null){let r=t.data;if("pxt::beginTry"==r)return this.emitBeginTry(t);let i=t.mask||{refMask:0},a=i.conversions||[],o=t.args.map(((e,t)=>({idx:t,expr:e,isSimple:e.isLiteral(),isRef:0!=(i.refMask&1<<t),conv:a.find((e=>e.argIdx==t))})));e.U.assert(o.length<=4);let s=!1;for(let t of e.U.reversed(o))t.expr.isPure()?t.isSimple||t.isRef||s&&!t.expr.isStateless()||(t.isSimple=!0):s=!0;for(let e of o)e.conv&&(e.isSimple=!1);let c=o.filter((e=>!e.isSimple));if(c.every((e=>e.expr.isPure()&&!e.isRef&&!e.conv))){for(let e of c)e.isSimple=!0;c=[]}let l=c[0],u=!0;if(1!=c.length||l.conv||l.isRef){for(let e of c)this.pushArg(e.expr);this.alignExprStack(0);let t=c.filter((e=>!!e.conv));if(t.length){const n=this.redirectOutput((()=>{let n=0;e.target.switches.inlineConversions||(this.t.stackAligned()?n+=2:n+=1);for(let r of t){if(e.isThumb()&&"pxt::toInt"==r.conv.method){this.write(this.loadFromExprStack("r0",r.expr,n)),this.write("asrs r0, r0, #1");let t=e.target.switches.inlineConversions?r.expr.getId():n;this.write("bcs .isint"+t),this.write("lsls r0, r0, #1"),this.alignedCall(r.conv.method,"",n),this.write(".isint"+t+":"),this.write(this.t.push_fixed(["r0"]))}else this.write(this.loadFromExprStack("r0",r.expr,n)),r.conv.refTag?e.target.switches.skipClassCheck||this.emitInstanceOf(this.builtInClassNo(r.conv.refTag),r.conv.refTagNullable?"validateNullable":"validate"):(this.alignedCall(r.conv.method,"",n),r.conv.returnsRef&&this.write(this.loadFromExprStack("r0",r.expr,n,!0))),this.write(this.t.push_fixed(["r0"]));n++}for(let r of e.U.reversed(t))n--,this.write(this.t.pop_fixed(["r"+r.idx]));for(let e of c)e.conv||this.write(this.loadFromExprStack("r"+e.idx,e.expr,n))}));e.target.switches.inlineConversions?this.write(n):this.emitHelper(this.t.helper_prologue()+n+this.t.helper_epilogue(),"conv")}else for(let e of c)this.write(this.loadFromExprStack("r"+e.idx,e.expr))}else this.emitExpr(l.expr),0!=l.idx&&this.write(this.t.mov("r"+l.idx,"r0")),u=!1;for(let e of o)e.isSimple&&this.emitExprInto(e.expr,"r"+e.idx);n?n():"langsupp::ignore"!=r&&this.alignedCall(r,"",0,!0),u&&this.clearArgs(c.filter((e=>!e.isRef)).map((e=>e.expr)),c.filter((e=>e.isRef)).map((e=>e.expr)))}alignedCall(t,n="",r=0,i=!1){(e.U.startsWith(t,"_cmp_")||e.U.startsWith(t,"_pxt_"))&&(i=!1),this.write(this.t.call_lbl(t,i,this.stackAlignmentNeeded(r))+n)}emitLabelledHelper(e,t){if(this.labelledHelpers[e])this.write(this.t.call_lbl(this.labelledHelpers[e]));else{let n=this.redirectOutput(t);this.emitHelper(n,e),this.labelledHelpers[e]=this.bin.codeHelpers[n]}}emitHelper(e,t="hlp"){if(!this.bin.codeHelpers[e]){let n=Object.keys(this.bin.codeHelpers).length;this.bin.codeHelpers[e]=`_${t}_${n}`}this.write(this.t.call_lbl(this.bin.codeHelpers[e]))}pushToExprStack(e){e.totalUses=1,e.currUses=0,this.exprStack.unshift(e)}pushArg(e){this.clearStack(!0);this.exprStack.length;this.emitExpr(e),this.clearStack(!0),this.write(this.t.push_local("r0")+" ; proc-arg"),this.pushToExprStack(e)}loadFromExprStack(t,n,r=0,i=!1){let a=this.exprStack.indexOf(n);return e.assert(a>=0),this.t.load_reg_src_off(t,"sp",(a+r).toString(),!0,i)+" ; estack\n"}pushDummy(){let t=e.ir.numlit(0);t.totalUses=1,t.currUses=1,this.exprStack.unshift(t)}alignExprStack(e){let t=this.stackAlignmentNeeded(e);if(t)for(let e=0;e<t;++e)this.write("push {r5} ; align"),this.pushDummy()}emitFieldMethods(){for(let t of["get","set"]){this.write(`\n                ${this.helperObject(t)}\n                .section code\n                _pxt_map_${t}:\n                `),this.loadVTable("r4"),this.checkSubtype(this.builtInClassNo(pxt.BuiltInType.RefMap),".notmap","r4"),this.write(this.t.callCPPPush("set"==t?"pxtrt::mapSetByString":"pxtrt::mapGetByString")),this.write(".notmap:");let n="set"==t?2:1,r=!1;this.write("mov r4, r3 ; save VT"),"set"==t?(e.target.stackAlign&&(r=!0,this.write("push {lr} ; align")),this.write("\n                            push {r0, r2, lr}\n                            mov r0, r1\n                        ")):this.write("\n                            push {r0, lr}\n                            mov r0, r1\n                        "),this.write("\n                    bl pxtrt::lookupMapKey\n                    mov r1, r0 ; put key index in r1\n                    ldr r0, [sp, #0] ; restore obj pointer\n                    mov r3, r4 ; restore vt\n                    bl .dowork\n                "),this.write(this.t.pop_locals(n+(r?1:0))),this.write("pop {pc}"),this.write(".dowork:"),this.ifaceCallCore(n,t,!0)}}emitArrayMethod(t,n){this.write(`\n            ${this.helperObject(t+" "+(n?"buffer":"array"))}\n            .section code\n            _pxt_${n?"buffer":"array"}_${t}:\n            `),this.loadVTable("r4");let r=this.builtInClassNo(n?pxt.BuiltInType.BoxedBuffer:pxt.BuiltInType.RefCollection);e.target.switches.skipClassCheck||this.checkSubtype(r,".fail","r4");const i=e.isStackMachine()||e.target.runtimeIsARM||n?"ldr":"ldrh";this.write(`\n                asrs r1, r1, #1\n                bcc .notint\n                ${i} r4, [r0, #${n?4:8}]\n                cmp r1, r4\n                bhs .oob\n            `);let a="r1";n?(a="#8",this.write("\n                    adds r4, r0, r1\n                ")):this.write("\n                    lsls r1, r1, #2\n                    ldr r4, [r0, #4]\n                ");let o=n?"b":"",s=n&&"get"==t?"lsls r0, r0, #1\nadds r0, #1":"";"set"==t?this.write(`\n                        str${o} r2, [r4, ${a}]\n                        bx lr\n                    `):this.write(`\n                        ldr${o} r0, [r4, ${a}]\n                        ${s}\n                        bx lr\n                    `),this.write(`\n            .notint:\n                lsls r1, r1, #1\n                ${this.t.pushLR()}\n                push {r0, r2}\n                mov r0, r1\n                ${this.t.callCPP("pxt::toInt")}\n                mov r1, r0\n                pop {r0, r2}\n            .doop:\n                ${this.t.callCPP(`Array_::${t}At`)}\n                ${s}\n                ${this.t.popPC()}\n            `),this.writeFailBranch(),"get"==t?this.write(`\n                    .oob:\n                        movs r0, #${n?1:0} ; 0 or undefined\n                        bx lr\n                `):this.write(`\n                    .oob:\n                        ${this.t.pushLR()}\n                        b .doop\n                `)}emitArrayMethods(){for(let e of["get","set"])this.emitArrayMethod(e,!0),this.emitArrayMethod(e,!1)}emitLambdaTrampoline(){let t=e.target.stackAlign?"r3,":"";this.write(`\n            ${this.helperObject("trampoline")}\n            .section code\n            _pxt_lambda_trampoline:\n                push {${t} r4, r5, r6, r7, lr}\n                mov r4, r8\n                mov r5, r9\n                mov r6, r10\n                mov r7, r11\n                push {r4, r5, r6, r7} ; save high registers\n                mov r4, r1\n                mov r5, r2\n                mov r6, r3\n                mov r7, r0\n                `),this.emitInstanceOf(this.builtInClassNo(pxt.BuiltInType.RefAction),"validate"),this.write(`\n                mov r0, sp\n                push {r4, r5, r6, r7} ; push args and the lambda\n                mov r1, sp\n                bl pxt::pushThreadContext\n                mov r6, r0          ; save ctx or globals\n                mov r5, r7          ; save lambda for closure\n                mov r0, r5          ; also save lambda pointer in r0 - needed by pxt::bindMethod\n                ldr r1, [r5, #8]    ; ld fnptr\n                movs r4, #3         ; 3 args\n                blx r1              ; execute the actual lambda\n                mov r7, r0          ; save result\n                @dummystack 4\n                add sp, #4*4        ; remove arguments and lambda\n                mov r0, r6   ; or pop the thread context\n                bl pxt::popThreadContext\n                mov r0, r7 ; restore result\n                pop {r4, r5, r6, r7} ; restore high registers\n                mov r8, r4\n                mov r9, r5\n                mov r10, r6\n                mov r11, r7\n                pop {${t} r4, r5, r6, r7, pc}`),this.write(`\n            ${this.helperObject("exn")}\n            .section code\n            ; r0 - try frame\n            ; r1 - handler PC\n            _pxt_save_exception_state:\n                push {r0, lr}\n                ${this.t.callCPP("pxt::beginTry")}\n                pop {r1, r4}\n                str r1, [r0, #1*4] ; PC\n                mov r1, sp\n                str r1, [r0, #2*4] ; SP\n                str r5, [r0, #3*4] ; lambda ptr\n                bx r4\n                `),this.write("\n            .section code\n            ; r0 - try frame\n            ; r1 - thread context\n            _pxt_restore_exception_state:\n                mov r6, r1\n                ldr r1, [r0, #2*4] ; SP\n                mov sp, r1\n                ldr r5, [r0, #3*4] ; lambda ptr\n                ldr r1, [r0, #1*4] ; PC\n                movs r0, #1\n                orrs r1, r0\n                bx r1\n                "),this.write(`\n            ${this.helperObject("stringconv")}\n            .section code\n            _pxt_stringConv:\n            `),this.loadVTable(),this.checkSubtype(this.builtInClassNo(pxt.BuiltInType.BoxedString),".notstring"),this.write(`\n                bx lr\n\n            .notstring: ; no string, but vtable in r3\n                ldr r7, [r3, #4*${e.firstMethodOffset()-1}]\n                cmp r7, #0\n                beq .fail\n                push {r0, lr}\n                movs r4, #1\n                blx r7\n                str r0, [sp, #0]\n                b .numops\n\n            .fail: ; not an object or no toString\n                push {r0, lr}\n            .numops:\n                ${this.t.callCPP("numops::toString")}\n                pop {r1}\n                pop {pc}\n            `)}emitProcCall(t){let n=[],r=null,i="",a=t.data;if(a.proc&&a.proc.inlineBody)return this.emitExpr(a.proc.inlineSelf(t.args));let o=-1==a.virtualIndex,s=!1;for(let r of e.U.reversed(t.args)){if(r.isPure()){if(!s||r.isStateless())continue}else s=!0;n.push(r)}if(n.reverse(),n.length<=1){let e=n[0];e&&(r=e,this.clearStack(!0),this.emitExpr(e),e==t.args[t.args.length-1]?i="r0":(i="r3",this.write(this.t.mov("r3","r0")))),n=[]}else for(let e of n)this.pushArg(e);this.alignExprStack(t.args.length);let c=["r1","r2","r3","r4"],l=[];if(n.length){let e=-1;for(let t of n)e=Math.max(this.exprStack.indexOf(t),e);if(e++,e<=c.length){c=c.slice(0,e),this.write(this.t.pop_fixed(c)),l=this.exprStack.splice(0,e);let t=[];for(let r=e-1;r>=0;--r)n.indexOf(l[r])<0&&(t.push(c[r]),this.exprStack.unshift(l[r]));t.length&&this.write(this.t.push_fixed(t))}else c=null,this.write(this.t.reg_gets_imm("r7",0))}let u=e.U.reversed(t.args);o&&u.unshift(u.pop());for(let t of u)if(n.indexOf(t)>=0){if(c)this.write(this.t.push_fixed([c[l.indexOf(t)]]));else{this.write(this.loadFromExprStack("r0",t)),this.write(this.t.push_local("r0")+" ; re-push"),this.write(this.loadFromExprStack("r7",t,1,!0));let n=this.exprStack.indexOf(t),r=e.ir.numlit(0);r.currUses=1,r.totalUses=1,this.exprStack[n]=r}this.exprStack.unshift(t)}else t===r?(this.write(this.t.push_local(i)+" ; the one arg"),this.pushToExprStack(t)):this.pushArg(t);let d=this.mkLbl("_proccall"),p=-1;if(o){let e=t.args.length-1;this.write(this.loadFromExprStack("r0",t.args[0])),this.emitLabelledHelper("lambda_call"+e,(()=>{this.lambdaCall(e),this.writeFailBranch()}))}else if(null!=a.virtualIndex||null!=a.ifaceIndex)null!=a.ifaceIndex?a.isSet?(e.assert(2==t.args.length),this.emitIfaceCall(a,t.args.length,"set")):this.emitIfaceCall(a,t.args.length,a.noArgs?"get":""):this.emitClassCall(a),this.write(d+":");else{let e=a.proc;p=e.seqNo,this.write(this.t.call_lbl(e.label()+(a.isThis?"_nochk":""))),this.write(d+":")}this.calls.push({procIndex:p,stack:0,addr:0,callLabel:d}),o&&t.args[0].isStateless()?this.clearArgs([t.args[0]],t.args.slice(1)):this.clearArgs([],t.args)}lambdaCall(t){this.write("; lambda call"),this.loadVTable(),e.target.switches.skipClassCheck||this.checkSubtype(this.builtInClassNo(pxt.BuiltInType.RefAction)),this.write(`\n                movs r4, #${t}\n                ldrh r1, [r0, #4]\n                cmp r1, #0\n                bne .pushR5\n                ldr r1, [r0, #8]\n                bx r1 ; keep lr from the caller\n            .pushR5:\n                sub sp, #8\n            `);for(let e=0;e<t;++e)this.write(`ldr r1, [sp, #4*${e+2}]`),this.write(`str r1, [sp, #4*${e}]`);this.write(`\n                str r5, [sp, #4*${t}]\n                mov r1, lr\n                str r1, [sp, #4*${t+1}]\n                mov r5, r0\n                ldr r7, [r5, #8]\n                blx r7 ; exec actual lambda\n                ldr r4, [sp, #4*${t+1}] ; restore what was in LR\n                ldr r5, [sp, #4*${t}] ; restore lambda ctx\n            `);for(let e=0;e<t;++e)this.write(`ldr r1, [sp, #4*${e}]`),this.write(`str r1, [sp, #4*${e+2}]`);this.write("\n                add sp, #8\n                bx r4\n            "),this.write("; end lambda call")}emitStore(t,n){switch(t.exprKind){case e.ir.EK.CellRef:let r=t.data;if(this.emitExpr(n),r.isGlobal()){let e=this.bitSizeInfo(r.bitSize),t="#"+r.index;r.index>=e.immLimit&&(this.write(this.t.emit_int(r.index,"r1")),t="r1"),this.write(this.t.load_reg_src_off("r7","r6","#0")),this.write(this.t.load_reg_src_off("r0","r7",t,!1,!0,e))}else{let[e,t,n]=this.cellref(r);this.write(this.t.load_reg_src_off("r0",e,t,n,!0))}break;case e.ir.EK.FieldAccess:this.emitRtCall(e.ir.rtcall("dummy",[t.args[0],n]),(()=>this.emitFieldAccess(t,!0)));break;default:e.oops()}}cellref(t){if(t.isGlobal())throw e.oops();if(t.iscap){let n=t.index+3;return e.assert(0<=n&&n<32),["r5",n.toString(),!0]}if(t.isarg){return["sp","args@"+t.index.toString()+":"+this.baseStackSize,!1]}return["sp","locals@"+t.index,!1]}emitLambdaWrapper(e){if(this.write(""),this.write(".section code"),this.write(".balign 4"),e&&(this.proc.info.usedAsValue=!0),!this.proc.info.usedAsValue&&!this.proc.info.usedAsIface)return;this.proc.info.usedAsValue&&(this.write(this.proc.label()+"_Lit:"),this.write(this.t.obj_header("pxt::RefAction_vtable")),this.write(".short 0, 0 ; no captured vars"),this.write(`.word ${this.proc.label()}_args@fn`)),this.write(`${this.proc.label()}_args:`);let t=this.proc.args.length;if(0==t)return;this.write(`cmp r4, #${t}`),this.write(`bge ${this.proc.label()}_nochk`);let n=this.stackAlignmentNeeded(t+1),r=n?t+2:t+1;this.write("push {lr}"),this.emitLabelledHelper(`expand_args_${t}`,(()=>{this.write("movs r0, #0"),this.write("movs r1, #0"),n&&this.write("push {r0}");for(let e=t;e>0;e--)e!=t&&(this.write(`cmp r4, #${e}`),this.write(`blt .zero${e}`),this.write(`ldr r0, [sp, #${r-1}*4]`),this.write(`str r1, [sp, #${r-1}*4] ; clear existing`),this.write(`.zero${e}:`)),this.write("push {r0}");this.write("bx lr")})),this.write(`bl ${this.proc.label()}_nochk`);let i=t+(n?1:0);this.write(`@dummystack ${i}`),this.write(`add sp, #4*${i}`),this.write("pop {pc}")}emitCallRaw(t){let n=e.hexfile.lookupFunc(t);e.assert(!!n,"unimplemented raw function: "+t),this.alignedCall(t)}}}(e.pxtc||(e.pxtc={}))}(ts||(ts={})),function(e){!function(e){const t={"numops::adds":"+","numops::subs":"-","numops::div":"/","numops::mod":"%","numops::muls":"*","numops::ands":"&","numops::orrs":"|","numops::eors":"^","numops::bnot":"~","numops::lsls":"<<","numops::asrs":">>","numops::lsrs":">>>","numops::le":"<=","numops::lt":"<","numops::lt_bool":"<","numops::ge":">=","numops::gt":">","numops::eq":"==","pxt::eq_bool":"==","pxt::eqq_bool":"===","numops::eqq":"===","numops::neqq":"!==","numops::neq":"!="},n={"pxsim.Boolean_":"","pxsim.pxtcore":"","pxsim.String_":"","pxsim.ImageMethods":"","pxsim.Array_":"","pxsim.pxtrt":"","pxsim.numops":""},r={"pxsim.Array_.getAt":"","pxsim.Array_.length":"","pxsim.Array_.mk":"","pxsim.Array_.push":"","pxsim.Boolean_.bang":"","pxsim.String_.concat":"","pxsim.String_.stringConv":"","pxsim.numops.toBool":"","pxsim.numops.toBoolDecr":"","pxsim.pxtcore.mkAction":"","pxsim.pxtcore.mkClassInstance":"","pxsim.pxtrt.ldlocRef":"","pxsim.pxtrt.mapGetByString":"","pxsim.pxtrt.stclo":"","pxsim.pxtrt.stlocRef":""};function i(e){let t="";for(let n of Object.keys(e)){const r=n.replace(/\./g,"_");e[n]=r,t+=`const ${r} = ${n};\n`}return t}function a(e){"pxt."==(e=e.replace(/::/g,".")).slice(0,4)&&(e="pxtcore."+e.slice(4));const t="pxsim."+e;if(r.hasOwnProperty(t))return r[t];const i=t.lastIndexOf(".");if(i>0){const e=t.slice(0,i);if(n.hasOwnProperty(e))return n[e]+t.slice(i)}return t}e.isBuiltinSimOp=function(n){return!!e.U.lookup(t,n.replace(/\./g,"::"))},e.shimToJs=a;const o=["runtime","oops","doNothing","pxsim","globals","maybeYield","setupDebugger","isBreakFrame","breakpoint","trace","checkStack","leave","checkResumeConsumed","setupResume","setupLambda","checkSubtype","failedCast","buildResume","mkVTable","bind","leaveAccessor"];e.jsEmit=function(s,c){let l="(function (ectx) {\n'use strict';\n";for(let e of o)l+=`const ${e} = ectx.${e};\n`;l+="const __this = runtime;\n",l+="const pxtrt = pxsim.pxtrt;\n",l+="let yieldSteps = 1;\n",l+="ectx.setupYield(function() { yieldSteps = 100; })\n",l+="pxsim.setTitle("+JSON.stringify(s.getTitle())+");\n";let u={},d={};for(let e of c.configData||[])u[e.key+""]=e.value,d[e.name]=e.key;l+="pxsim.setConfigData("+JSON.stringify(u,null,1)+", "+JSON.stringify(d,null,1)+");\n",l+="pxtrt.mapKeyNames = "+JSON.stringify(s.ifaceMembers,null,1)+";\n";const p=s.setPerfCounters(["SysScreen"]);l+="__this.setupPerfCounters("+JSON.stringify(p,null,1)+");\n",l+=i(r),l+=i(n);let f=0,_=0;s.procs.forEach((n=>{let r;n.cachedJS?(r=n.cachedJS,f+=r.length):(r=function(n,r){if(r.cachedJS)return r.cachedJS;let i="",o=e=>{i+=e+"\n"},s=e=>{i+="    "+e+"\n"},c=e.ir.EK,l=[],u=0,d={},p="";o(`\nfunction ${r.label()}(s) {\nlet r0 = s.r0, step = s.pc;\ns.pc = -1;\n`),r.perfCounterNo&&o(`if (step == 0) __this.startPerfCounter(${r.perfCounterNo});\n`);o("\nwhile (true) {\nif (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;\nswitch (step) {\n  case 0:\n"),r.locals.forEach((e=>{s(`${v(e)} = undefined;`)})),r.args.length&&(s("if (s.lambdaArgs) {"),r.args.forEach(((e,t)=>{s(`  ${v(e)} = (s.lambdaArgs[${t}]);`)})),s("  s.lambdaArgs = null;"),s("}"));r.classInfo&&r.info.thisParameter&&(s("r0 = s.arg0;"),E(r.classInfo,"validate"));let f=0,_=[];for(let t of r.body)t.stmtKind==e.ir.SK.Label&&t.lblNumUses>0&&(t.lblId=++f);let m=0;for(let t of r.body){switch(t.stmtKind){case e.ir.SK.Expr:T(t.expr);break;case e.ir.SK.StackEmpty:P();break;case e.ir.SK.Jmp:let n=!1;for(let i=m+1;i<r.body.length&&r.body[i].stmtKind==e.ir.SK.Label;++i)if(t.lbl==r.body[i]){n=!0;break}b(t,n);break;case e.ir.SK.Label:t.lblNumUses>0&&o(`  case ${t.lblId}:`);break;case e.ir.SK.Comment:o(`// ${t.expr.data}`);break;case e.ir.SK.Breakpoint:y(t);break;default:e.oops()}m++}P(),r.perfCounterNo&&o(`__this.stopPerfCounter(${r.perfCounterNo});\n`);r.isGetter()?s("return leaveAccessor(s, r0)"):s("return leave(s, r0)");o("  default: oops()"),o("} } }");let g=e.nodeLocationInfo(r.action);g.functionName=r.getName(),g.argumentNames=r.args&&r.args.map((e=>e.getName())),o(`${r.label()}.info = ${JSON.stringify(g)}`),r.isGetter()&&o(`${r.label()}.isGetter = true;`);r.isRoot&&o(`${r.label()}.continuations = [ ${_.join(",")} ]`);return o(h(r.label()+"_mk",r.label(),u,Object.keys(d))),o(p),r.cachedJS=i,i;function h(e,t,n,r){let i="";i+=`\nfunction ${e}(s) {\n    checkStack(s.depth);\n    return {\n        parent: s, fn: ${t}, depth: s.depth + 1,\n        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,\n`;for(let e=0;e<n;++e)i+=`  tmp_${e}: undefined,\n`;for(let e of r)i+=`  ${e}: undefined,\n`;return i+="} }\n",i}function y(e){let t,i=e.breakpointInfo.id;if(s(`s.lastBrkId = ${i};`),n.breakpoints){t=++f;let a=`return breakpoint(s, ${t}, ${i}, r0);`;e.breakpointInfo.isDebuggerStmt?s(a):(s(`if ((breakpoints[0] && isBreakFrame(s)) || breakpoints[${i}]) ${a}`),n.trace&&s(`else return trace(${i}, s, ${t}, ${r.label()}.info);`))}else{if(!n.trace)return;t=++f,s(`return trace(${i}, s, ${t}, ${r.label()}.info);`)}o(`  case ${t}:`)}function v(e){if(e.isGlobal())return"globals."+e.uniqueName();if(e.iscap)return`s.caps[${e.index}]`;const t=e.uniqueName();return d[t]=!0,"s."+t}function b(t,n){if(t.lbl.lblNumUses==e.ir.lblNumUsesJmpNext||n)return e.assert(t.jmpMode==e.ir.JmpMode.Always),void(t.expr&&T(t.expr));e.assert(t.lbl.lblNumUses>0);let r=`{ step = ${t.lbl.lblId}; continue; }`;t.jmpMode==e.ir.JmpMode.Always?(t.expr&&T(t.expr),s(r)):(T(t.expr),t.jmpMode==e.ir.JmpMode.IfNotZero?s(`if (r0) ${r}`):s(`if (!r0) ${r}`))}function x(e){switch(e.exprKind){case c.NumberLiteral:case c.PointerLiteral:case c.SharedRef:case c.CellRef:return!0;default:return!1}}function k(e){return x(e)?S(e):(T(e),"r0")}function S(t){switch(t.exprKind){case c.NumberLiteral:if(!0===t.data)return"true";if(!1===t.data)return"false";if(null===t.data)return"null";if(void 0===t.data)return"undefined";if("number"==typeof t.data)return t.data+"";throw e.oops("invalid data: "+typeof t.data);case c.PointerLiteral:if(t.ptrlabel())return t.ptrlabel().lblId+"";if(null!=t.hexlit())return p+=`const ${t.data} = pxsim.BufferMethods.createBufferFromHex("${t.hexlit()}")\n`,t.data;if("string"==typeof t.jsInfo)return t.jsInfo;e.U.oops();case c.SharedRef:let n=t.args[0];e.U.assert(!!n.currUses),e.U.assert(n.currUses<n.totalUses),n.currUses++;let r=l.indexOf(n);return e.U.assert(r>=0),"s.tmp_"+r;case c.CellRef:return v(t.data);default:throw e.oops()}}function T(e){switch(e.exprKind){case c.JmpValue:s("// jmp value (already in r0)");break;case c.Nop:s("// nop");break;case c.FieldAccess:let t=e.data,n=t.shimName,r=k(e.args[0]);return n?void s(`r0 = ${r}${n};`):void s(`r0 = ${r}.fields["${t.name}"];`);case c.Store:return I(e.args[0],e.args[1]);case c.RuntimeCall:return A(e);case c.ProcCall:return w(e);case c.SharedDef:return D(e);case c.Sequence:return e.args.forEach(T);case c.InstanceOf:return T(e.args[0]),void E(e.data,e.jsInfo);default:s(`r0 = ${S(e)};`)}}function C(e,t="r0"){return`checkSubtype(${t}, ${`${e.id}_VT`})`}function E(t,n,r="r0"){"bool"==n?s(`r0 = ${C(t)};`):"validate"==n?s(`if (!${C(t,r)}) failedCast(${r});`):e.U.oops()}function D(t){let n=t.args[0];if(e.U.assert(n.totalUses>=1),e.U.assert(0===n.currUses),n.currUses=1,1==n.totalUses)return T(n);{const e=l.length;l.push(n);let t=k(n);"r0"!=t&&(t="r0 = "+t),s(`s.tmp_${e} = ${t};`)}}function A(n){let r=e.ir.flattenArgs(n.args);r.precomp.forEach(T);let i=n.data,c=r.flattened.map(S);if("langsupp::ignore"==i)return;let l="";if(l="."==i[0]?`${c[0]}${i}(${c.slice(1).join(", ")})`:"="==i[0]?`(${c[0]})${i.slice(1)} = (${c[1]})`:e.U.startsWith(i,"new ")?`new ${a(i.slice(4))}(${c.join(", ")})`:e.U.lookup(t,i)?2==c.length?`(${c[0]} ${e.U.lookup(t,i)} ${c[1]})`:`(${e.U.lookup(t,i)} ${c[0]})`:`${a(i)}(${c.join(", ")})`,0==n.callingConvention)s(`r0 = ${l};`);else{let e=++f;_.push(e),"String_::stringConv"==i&&s(`if ((${c[0]}) && (${c[0]}).vtable) {`),2==n.callingConvention?s(`(function(cb) { ${l}.then(cb) })(buildResume(s, ${e}));`):(s(`setupResume(s, ${e});`),s(`${l};`)),s("checkResumeConsumed();"),s("return;"),"String_::stringConv"==i&&s(`} else { s.retval = (${c[0]}) + ""; }`),o(`  case ${e}:`),s("r0 = s.retval;")}}function w(t){const i=t.data,a=i.proc;if(a&&a.inlineBody)return T(a.inlineSelf(t.args));const c=e.ir.rtcall("<frame>",[]);c.totalUses=1,c.currUses=0;const u=l.length;l.push(c);const d=`s.tmp_${u}`,p=++f,_=-1==i.virtualIndex;if(a)s(`${d} = ${a.label()}_mk(s);`);else{let a="generic";null!=i.ifaceIndex?a="if_"+n.ifaceMembers[i.ifaceIndex]:_?a="lambda":null!=i.virtualIndex?a=i.classInfo.id+"_v"+i.virtualIndex:e.U.oops();const o=t.args.length;a+="_"+o+"_mk",n.recordHelper(r.usingCtx,a,(()=>{const t=e.U.range(o).map((e=>"arg"+e));return h(a,"null",5,t)})),s(`${d} = ${a}(s);`)}t.args.forEach(((e,t)=>{let n=`arg${t}`;_&&(n=0==t?"argL":"arg"+(t-1)),s(`${d}.${n} = ${k(e)};`)}));let m=`s.pc = ${p}; return ${d};`;if(null!=i.callLocationIndex&&(m=`s.callLocIdx = ${i.callLocationIndex}; ${m}`),null!=i.ifaceIndex){e.U.assert(null==a);const r=n.ifaceMembers[i.ifaceIndex];e.U.assert(!!r,`no name for ${i.ifaceIndex}`),s(`if (!${d}.arg0.vtable.iface) {`);let o=t.args.map(((e,t)=>`${d}.arg${t}`));o.splice(1,0,JSON.stringify(r));const c=`pxsim_pxtrt.map${i.isSet?"Set":"Get"}ByString`;i.noArgs?s(`  s.retval = ${c}(${o.join(", ")});`):(e.U.assert(!i.isSet),s(`  setupLambda(${d}, ${c}(${o.slice(0,2).join(", ")}), ${t.args.length});`),s(`  ${m}`)),s("} else {"),s(`  ${d}.fn = ${d}.arg0.vtable.iface["${i.isSet?"set/":""}${r}"];`);let l=`${d}.arg0.fields["${r}"]`;i.isSet?(s(`  if (${d}.fn === null) { ${l} = ${d}.arg1; }`),s(`  else if (${d}.fn === undefined) { failedCast(${d}.arg0) } `)):i.noArgs?(s(`  if (${d}.fn == null) { s.retval = ${l}; }`),s(`  else if (!${d}.fn.isGetter) { s.retval = bind(${d}); }`)):(s(`  if (${d}.fn == null) { setupLambda(${d}, ${l}, ${t.args.length}); ${m} }`),s(`  else if (${d}.fn.isGetter) { ${d}.stage2Call = true; ${m}; }`)),s(` else { ${m} }`),s("}"),m=""}else if(-1==i.virtualIndex)e.U.assert(null==a),s(`setupLambda(${d}, ${d}.argL);`);else if(null!=i.virtualIndex){e.U.assert(null==a),e.assert(i.virtualIndex>=0),E(i.classInfo,"validate",d+".arg0");const t=i.classInfo.vtable[i.virtualIndex];s(`${d}.fn = ${d}.arg0.vtable.methods.${t.getName()};`)}else e.U.assert(null!=a);m&&s(m),o(`  case ${p}:`),s("r0 = s.retval;"),c.currUses=1}function N(t){switch(t){case 0:return"";case 1:return"pxtrt.toInt8";case 3:return"pxtrt.toInt16";case 5:return"pxtrt.toInt32";case 2:return"pxtrt.toUInt8";case 4:return"pxtrt.toUInt16";case 6:return"pxtrt.toUInt32";default:throw e.oops()}}function I(t,n){switch(t.exprKind){case c.CellRef:let r=t.data,i=k(n);s(`${v(r)} = ${N(r.bitSize)}(${i});`);break;case c.FieldAccess:let a=t.data,o=a.shimName;o||(o=`.fields["${a.name}"]`),T(e.ir.rtcall("="+o,[t.args[0],n]));break;default:e.oops()}}function P(){for(let t of l)t.totalUses!==t.currUses&&e.oops();u=Math.max(l.length,u),l=[]}}(s,n),_+=r.length),l+="\n"+r+"\n"})),l+=e.U.values(s.codeHelpers).join("\n")+"\n",s.usedClassInfos.forEach((t=>{l+=function(t){e.U.assert(void 0!==t.classNo),e.U.assert(void 0!==t.lastSubtypeNo);let n=parseInt(t.attrs.maxBgInstances);n||(n=null);let r=`const ${t.id}_VT = mkVTable({\n  name: ${JSON.stringify(e.getName(t.decl))},\n  numFields: ${t.allfields.length},\n  classNo: ${t.classNo},\n  lastSubtypeNo: ${t.lastSubtypeNo},\n  maxBgInstances: ${n},\n  methods: {\n`;for(let e of t.vtable)r+=`    "${e.getName()}": ${e.label()},\n`;r+="  },\n",r+="  iface: {\n";for(let e of t.itable)r+=`    "${e.name}": ${e.proc?e.proc.label():"null"},\n`,e.setProc?r+=`    "set/${e.name}": ${e.setProc.label()},\n`:e.proc||(r+=`    "set/${e.name}": null,\n`);return r+="  },\n",t.toStringMethod&&(r+="  toStringMethod: "+t.toStringMethod.label()+",\n"),r+="});\n",r}(t)})),c.breakpoints&&(l+=`\nconst breakpoints = setupDebugger(${c.breakpoints.length}, [${s.globals.filter((e=>e.isUserVariable)).map((e=>`"${e.uniqueName()}"`)).join(",")}])\n`),l+=`\nreturn ${s.procs[0]?s.procs[0].label():"null"}\n})\n`;const m=l.length,g=e=>(100*e/m).toFixed(2)+"%",h=`// total=${l.length} new=${g(_)} cached=${g(f)} other=${g(m-_-f)}\n`;s.writeFile(e.BINARY_JS,h+l)}}(e.pxtc||(e.pxtc={}))}(ts||(ts={})),function(e){!function(e){e.thumbCmpMap={"numops::lt":"_cmp_lt","numops::gt":"_cmp_gt","numops::le":"_cmp_le","numops::ge":"_cmp_ge","numops::eq":"_cmp_eq","numops::eqq":"_cmp_eqq","numops::neq":"_cmp_neq","numops::neqq":"_cmp_neqq"};const t={"numops::adds":"_numops_adds","numops::subs":"_numops_subs","numops::orrs":"_numops_orrs","numops::eors":"_numops_eors","numops::ands":"_numops_ands","numops::lsls":"_numops_lsls","numops::asrs":"_numops_asrs","numops::lsrs":"_numops_lsrs","pxt::toInt":"_numops_toInt","pxt::fromInt":"_numops_fromInt"};class n extends e.AssemblerSnippets{stackAligned(){return e.target.stackAlign&&e.target.stackAlign>1}pushLR(){return this.stackAligned()?"push {lr, r5}  ; r5 for align":"push {lr}"}popPC(){return this.stackAligned()?"pop {pc, r5}  ; r5 for align":"pop {pc}"}nop(){return"nop"}mov(e,t){return`mov ${e}, ${t}`}helper_ret(){return"bx r4"}reg_gets_imm(e,t){return`movs ${e}, #${t}`}push_fixed(e){return"push {"+e.join(", ")+"}"}pop_fixed(e){return"pop {"+e.join(", ")+"}"}proc_setup(e,t){let n="";if(e>0){n+="    movs r0, #0\n";for(let t=0;t<e;++t)n+="    push {r0} ;loc\n"}return n}proc_return(){return"pop {pc}"}debugger_stmt(t){return e.oops(),`\n    @stackempty locals\n    ldr r0, [r6, #0] ; debugger\n    subs r0, r0, #4  ; debugger\n${t}:\n    ldr r0, [r0, #0] ; debugger\n`}debugger_bkpt(t){return e.oops(),`\n    @stackempty locals\n    ldr r0, [r6, #0] ; brk\n${t}:\n    ldr r0, [r0, #0] ; brk\n`}debugger_proc(t){return e.oops(),`\n    ldr r0, [r6, #0]  ; brk-entry\n    ldr r0, [r0, #4]  ; brk-entry\n${t}:`}push_local(e){return`push {${e}}`}push_locals(e){return`sub sp, #4*${e} ; push locals ${e} (align)`}pop_locals(e){return`add sp, #4*${e} ; pop locals ${e}`}unconditional_branch(e){return"bb "+e}beq(e){return"beq "+e}bne(e){return"bne "+e}cmp(e,t){return"cmp "+e+", "+t}cmp_zero(e){return"cmp "+e+", #0"}load_reg_src_off(e,t,n,r,i,a){n=n.replace(/:\d+$/,""),r&&(n=`#4*${n}`);let o="str",s="ldr";return a&&(32==a.immLimit?o="strb":64==a.immLimit&&(o="strh"),s=a.needsSignExt?o.replace("str","ldrs"):o.replace("str","ldr")),i?`${o} ${e}, [${t}, ${n}]`:`${s} ${e}, [${t}, ${n}]`}rt_call(e,t,n){return e+" "+t+", "+n}alignedCall(e,t){return t?`${this.push_locals(t)}\nbl ${e}\n${this.pop_locals(t)}`:"bl "+e}call_lbl(n,r,i){let a=e.U.lookup(t,n);return a&&(n=a,r=!1),!r&&n.indexOf("::")>0&&(r=!0),r?this.callCPP(n,i):this.alignedCall(n,i)}call_reg(e){return"blx "+e}helper_prologue(){return`\n    @stackmark args\n    ${this.pushLR()}\n`}helper_epilogue(){return`\n    ${this.popPC()}\n    @stackempty args\n`}load_ptr_full(t,n){return e.assert(!!t),`\n    ldlit ${n}, ${t}\n`}load_vtable(e,t){return`ldr ${e}, [${t}, #0]`}lambda_init(){return"\n    mov r5, r0\n    mov r4, lr\n    bl pxtrt::getGlobalsPtr\n    mov r6, r0\n    bx r4\n"}saveThreadStack(){return"mov r7, sp\n    str r7, [r6, #4]\n"}restoreThreadStack(){return e.target.switches.gcDebug?"movs r7, #0\n    str r7, [r6, #4]\n":""}callCPPPush(e){return this.pushLR()+"\n"+this.callCPP(e)+"\n"+this.popPC()+"\n"}callCPP(e,t){return this.saveThreadStack()+this.alignedCall(e,t)+"\n"+this.restoreThreadStack()}inline_decr(e){return`\n    lsls r1, r0, #30\n    bne .tag${e}\n    bl _pxt_decr\n.tag${e}:\n`}arithmetic(){let t="";const n=e=>{let t=".boxed:\n";return t+=`\n                    ${this.pushLR()}\n                    push {r0, r1}\n                    ${this.saveThreadStack()}\n                    ${e}\n                    ${this.restoreThreadStack()}\n                    add sp, #8\n                    ${this.popPC()}\n                `,t},r=e=>{t+=`\n_numops_${e}:\n    @scope _numops_${e}\n    lsls r2, r0, #31\n    beq .boxed\n    lsls r2, r1, #31\n    beq .boxed\n`},i=e=>{t+="    blx lr\n",t+=n(`bl numops::${e}`)};for(let e of["adds","subs"])r(e),t+=`\n    subs r2, r1, #1\n    ${e} r2, r0, r2\n    bvs .boxed\n    movs r0, r2\n`,i(e);for(let e of["ands","orrs","eors"])r(e),t+=`    ${e} r0, r1\n`,"eors"==e&&(t+="    adds r0, r0, #1\n"),i(e);for(let e of["lsls","lsrs","asrs"])r(e),t+="\n    ; r3 := (r1 >> 1) & 0x1f\n    lsls r3, r1, #26\n    lsrs r3, r3, #27\n","asrs"==e?t+="\n    asrs r0, r3\n    movs r2, #1\n    orrs r0, r2\n":(t+="lsrs"==e?"\n    asrs r2, r0, #1\n    lsrs r2, r3\n    lsrs r3, r2, #30\n    bne .boxed\n":"\n    asrs r2, r0, #1\n    lsls r2, r3\n    lsrs r3, r2, #30\n    beq .ok\n    cmp r3, #3\n    bne .boxed\n.ok:\n",t+="\n    lsls r0, r2, #1\n    adds r0, r0, #1\n"),i(e);t+=`\n@scope _numops_toInt\n_numops_toInt:\n    asrs r0, r0, #1\n    bcc .over\n    blx lr\n.over:\n    lsls r0, r0, #1\n    ${this.callCPPPush("pxt::toInt")}\n\n_numops_fromInt:\n    lsls r2, r0, #1\n    asrs r1, r2, #1\n    cmp r0, r1\n    bne .over2\n    adds r0, r2, #1\n    blx lr\n.over2:\n    ${this.callCPPPush("pxt::fromInt")}\n`;for(let r of Object.keys(e.thumbCmpMap))r=r.replace(/.*::/,""),t+=`\n.section code\n.object _pxt_helper_cmp_${r}\n_cmp_${r}:\n    lsls r2, r0, #31\n    beq .boxed\n    lsls r2, r1, #31\n    beq .boxed\n    subs r0, r1\n    b${r.replace("qq","q").replace("neq","ne")} .true\n.false:\n    movs r0, #0\n    bx lr\n.true:\n    movs r0, #1\n    bx lr\n`,t+=n(`\n                        bl numops::${r}\n                        bl numops::toBoolDecr\n                        cmp r0, #0`);return t}emit_int(t,n){let r=!1;function i(t){e.assert(0<=t&&t<=255);let i="";return r?t&&(i=`adds ${n}, #${t}\n`):i=`movs ${n}, #${t}\n`,r=!0,i}function a(e=8){return`lsls ${n}, ${n}, #${e}\n`}e.assert(null!=t);let o=Math.floor(t),s=!1;o<0&&(s=!0,o=-o);let c=0;if(o>255){let t=o;for(;0==(1&t);)t>>>=1,c++;e.numBytes(t)<e.numBytes(o)?o=t:c=0}let l="";switch(e.numBytes(o)){case 4:l+=i(o>>>24&255),l+=a();case 3:l+=i(o>>>16&255),l+=a();case 2:l+=i(o>>>8&255),l+=a();case 1:l+=i(255&o);break;default:e.oops()}return c&&(l+=a(c)),s&&(l+=`negs ${n}, ${n}\n`),l.split("\n").length>4?`ldlit ${n}, ${Math.floor(t)}\n`:l}}e.ThumbSnippets=n}(e.pxtc||(e.pxtc={}))}(ts||(ts={})),function(e){!function(t){const n={"pxtrt::mapSetGeneric":"mapset","pxtrt::mapGetGeneric":"mapget"},r={};function i(e,n,r){const i=t.computeHashMultiplier(e.itable.map((e=>e.idx))),a=t.U.toArray(i.mapping);for(;3&a.length;)a.push(0);let o=`\n${c(e)}_start:\n        .short ${8*e.allfields.length+8}  ; size in bytes\n        .byte ${pxt.ValTypeObject}, ${pxt.VTABLE_MAGIC} ; magic\n        .short ${a.length} ; entries in iface hashmap\n        .short ${e.lastSubtypeNo||e.classNo} ; last sub class-id\n        .short ${e.classNo} ; class-id\n        .short 0 ; reserved\n        .word ${i.mult} ; hash-mult\n`;l()?o+="\n            .word pxt::RefRecord_destroy\n            .word pxt::RefRecord_print\n            .word pxt::RefRecord_scan\n            .word pxt::RefRecord_gcsize\n            .word 0,0,0,0 ; keep in sync with VM_NUM_CPP_METHODS\n":o+="\n            .word 0,0, 0,0, 0,0, 0,0 ; space for 4 (VM_NUM_CPP_METHODS) native methods\n",o+=`\n        .balign 4\n${e.id}_IfaceVT:\n`;const s=a.length>>2;let u="",d=s,p={};for(let t of e.itable){p[t.idx+""]=d;const e=t.proc?t.proc.isGetter()?1:2:0;u+=`  .short ${t.idx}, ${e} ; ${t.name}\n`,u+=`  .word ${t.proc?t.proc.vtLabel()+"@fn":t.info}\n`,d+=1,t.setProc&&(u+=`  .short ${t.idx}, 2 ; set ${t.name}\n`,u+=`  .word ${t.setProc.vtLabel()}@fn\n`,d+=1)}u+="  .word 0, 0, 0, 0 ; the end\n",d+=1;for(let e=0;e<a.length;++e)r.itEntries++,a[e]&&r.itFullEntries++;return o+="  .short "+t.U.toArray(a).map(((e,t)=>p[e+""]||s)).join(", ")+"\n",o+=u,o+="\n",o}let a;function o(e){const t=e.getTime()/1e3;return`${t>>>0}, ${t/4294967296|0}`}!function(e){e[e.Invalid=0]="Invalid",e[e.InfoHeader=1]="InfoHeader",e[e.OpCodeMap=2]="OpCodeMap",e[e.NumberLiterals=3]="NumberLiterals",e[e.ConfigData=4]="ConfigData",e[e.IfaceMemberNames=5]="IfaceMemberNames",e[e.NumberBoxes=6]="NumberBoxes",e[e.Function=32]="Function",e[e.Literal=33]="Literal",e[e.VTable=34]="VTable"}(a||(a={}));let s={};function c(e){return e.classNo||(s[e.id]=e),e.id+"_VT"}function l(){return t.target.useESP}function u(e){return l()?`0xffffffff, ${e}`:`0xffffffff, 0xffffffff ; -> ${e}`}t.vmEmit=function(d,p,f){let _=`; VM start\n_img_start:\n${t.hexfile.hexPrelude()}\n`;s={};const m={dblText:[],dblBoxText:[],dbls:{},opcodeMap:{},opcodes:t.vm.opcodes.map((e=>"pxt::op_"+e.replace(/ .*/,"")))};for(m.opcodes.unshift(null);m.opcodes.length<128;)m.opcodes.push(null);let g=0;function h(e,t,n,r,i=0){if(_+=`\n; --- ${e}\n.section code\n    .set ${e} = ${g}\n`,r)for(let e of r)_+=`    .set ${e} = ${g}\n`;_+=`\n_start_${e}:\n    .byte ${t}, 0x00\n    .short ${i}\n    .word _end_${e}-_start_${e}\n`,_+=n(),_+=`\n.balign 8\n_end_${e}:\n`,g++}const y=new Date(0);let v=t.U.toUTF8(p.name,!0);v.length>100&&(v=v.slice(0,100));let b=v.length+1;1&b&&b++;const x=128-b;h("_info",a.InfoHeader,(()=>`\n                ; magic - \\0 added by assembler\n                .string "\\nPXT64\\n"\n                .hex 5471fe2b5e213768 ; magic\n                .hex ${t.hexfile.hexTemplateHash()} ; hex template hash\n                .hex 0000000000000000 ; @SRCHASH@\n                .word ${d.globalsWords}   ; num. globals\n                .word ${d.nonPtrGlobals} ; non-ptr globals\n                .word 0, 0 ; last usage time\n                .word ${o(y)} ; installation time\n                .word ${o(y)} ; publication time - TODO\n                .word _img_end-_img_start ; total image size\n                .space 60 ; reserved\n                .string ${JSON.stringify(v)}\n                .space ${x} ; pad to 128 bytes\n`)),d.procs.forEach((e=>{h(e.label(),a.Function,(()=>function(e,i,a){let o="";const s=e=>{o+=e+"\n"},d=e=>{o+="    "+e+"\n"},p=t.ir.EK;let f=[],_=[],m=!1,g=0,h=0;const y=8388607;pxt.options.debug&&console.log("EMIT",a.toString());v(),o="";for(let e of f)e.reset();return m=!0,t.U.assert(0==h),v(),o;function v(){s(`;\n; ${a.getFullName()}\n;`),d(".section code"),i.procs[0]==a&&s("; main"),d(`.word ${u("pxt::RefAction_vtable")}`),d(`.short 0, ${a.args.length} ; #args`),d(`.short ${a.captured.length}, 0 ; #cap`),d(".word .fnstart-_img_start, 0  ; func+possible padding"),g=a.locals.length+_.length,d(".fnstart:"),d(`pushmany ${g} ; incl. ${_.length} tmps`);for(let e of a.body)switch(e.stmtKind){case t.ir.SK.Expr:C(e.expr);break;case t.ir.SK.StackEmpty:w();for(let e of _)e&&t.oops(`uses: ${e.currUses}/${e.totalUses} ${e.toString()}`);break;case t.ir.SK.Jmp:b(e);break;case t.ir.SK.Label:s(`${e.lblName}:`);break;case t.ir.SK.Comment:s(`; ${e.expr.data}`);break;case t.ir.SK.Breakpoint:break;default:t.oops()}d(`ret ${a.args.length}, ${g}`)}function b(e){let n=e.lbl.lblName;e.jmpMode==t.ir.JmpMode.Always?(e.expr&&C(e.expr),d(`jmp ${n}`)):(C(e.expr),e.jmpMode==t.ir.JmpMode.IfNotZero?d(`jmpnz ${n}`):e.jmpMode==t.ir.JmpMode.IfZero?d(`jmpz ${n}`):t.oops())}function x(e){if(e.isGlobal())return t.U.assert(0==(3&e.index)),"glb "+(e.index>>2)+` ; ${e.getName()}`;if(e.iscap)return"cap "+e.index+` ; ${e.getName()}`;if(e.isarg){let n=a.args.length-e.index-1;return t.assert(n>=0,"arg#"+n),`loc ${h+g+2+n} ; ${e.getName()}`}{let n=e.index+_.length;return t.assert(!m||n<g,"cell#"+n),t.assert(n>=0,"cell#"+n),`loc ${h+n}`}}function k(n){const r=t.hexfile.lookupFunc(n);r||t.U.oops("missing function: "+n);let i=e.opcodeMap[r.name];null==i&&(i=e.opcodes.length,e.opcodes.push(r.name),e.opcodeMap[r.name]=i,r.value=i),d(`callrt ${n}`)}function S(e,n){"bool"==n?d(`checkinst ${c(e)}`):t.U.oops()}function T(n){switch(n.exprKind){case p.NumberLiteral:const r=t.taggedSpecial(n.data);if(null!=r)d(`ldspecial ${r} ; ${n.data}`);else{let r=n.data,i=0,a=0;const o=r<<1>>1!=r;if((0|r)==r){if(Math.abs(r)<=y)return void d(r<0?"ldintneg "+-r:`ldint ${r}`);i=(r<<1|1)>>>0,a=r<0?1:0}else{let e=new Float64Array(1);e[0]=r;let t=new Uint32Array(e.buffer);t[1]+=65536,i=t[0],a=t[1]}let s=i+","+a,c=t.U.lookup(e.dbls,s);if(null==c){if(c=e.dblText.length,e.dblText.push(`.word ${i}, ${a}  ; ${c}: ${n.data}`),o){const t="pxt::number_vt";e.dblBoxText.push(`.word ${l()?t:`0xffffffff ; ${t}`}\n`);let n=new Float64Array(1);n[0]=r;let i=new Uint32Array(n.buffer);e.dblBoxText.push(`.word ${i[0]}, ${i[1]} ; ${r}\n`)}e.dbls[s]=c}d(`ldnumber ${c} ; ${n.data}`)}return;case p.PointerLiteral:return void d(`ldlit ${n.data}`);case p.SharedRef:let i=n.args[0];(!i.currUses||i.currUses>=i.totalUses)&&(console.log(i.sharingInfo()),t.U.assert(!1)),i.currUses++;let a=_.indexOf(i);return a<0&&(console.log(_,i),t.assert(!1)),d(`ldloc ${a+h}`+(i.currUses==i.totalUses?" ; LAST":"")),void w();case p.CellRef:return void d("ld"+x(n.data));case p.InstanceOf:C(n.args[0]),S(n.data,n.jsInfo);break;default:throw t.oops("kind: "+n.exprKind)}}function C(e){switch(e.exprKind){case p.JmpValue:d("; jmp value (already in r0)");break;case p.Nop:d("; nop");break;case p.FieldAccess:let t=e.data;C(e.args[0]),d(`ldfld ${t.idx}, ${c(t.classInfo)}`);break;case p.Store:return I(e.args[0],e.args[1]);case p.RuntimeCall:return A(e);case p.ProcCall:return N(e);case p.SharedDef:return E(e);case p.Sequence:return e.args.forEach(C);default:return T(e)}}function E(e){let n=e.args[0];if(t.U.assert(n.totalUses>=1),t.U.assert(0===n.currUses),n.currUses=1,f.push(n),1==n.totalUses)return C(n);{C(n);let e=-1;for(let t=0;t<_.length;++t)if(null==_[t]){e=t;break}e<0?(m&&(console.log(n,_),t.assert(!1,"missed tmp")),e=_.length,_.push(n)):_[e]=n,d(`stloc ${e+h}`)}}function D(){d("push"),h++}function A(e){let i=e.data;if("pxt::beginTry"==i)return void d(`try ${e.args[0].data}`);i=t.U.lookup(r,i)||i,w();let a=t.U.lookup(n,i),o=e.args,s=0;if("pxt::mkClassInstance"!=i){for(let e=0;e<o.length;++e)C(o[e]),e<o.length-1&&(D(),s++);"langsupp::ignore"==i?s&&d(`popmany ${s} ; ignore`):a?d(a):k(i),h-=s}else d(`newobj ${o[0].data}`)}function w(){for(let e=0;e<_.length;++e){let t=_[e];t&&t.currUses==t.totalUses&&(m||f.push(t),_[e]=null)}}function N(e){let n=e.data,r=n.proc;if(r&&r.inlineBody){const t=r.inlineSelf(e.args);return pxt.options.debug&&console.log("INLINE",e.toString(),"->",t.toString()),C(t)}let a=0;const o=e.args.slice(),s=-1==n.virtualIndex?o.shift():null;for(let e of o)C(e),D(),a++;let c=o.length;if(s)C(s),d(`callind ${c}`);else if(null!=n.ifaceIndex){let e=n.ifaceIndex+" ; ."+i.ifaceMembers[n.ifaceIndex];n.isSet?(d(`callset ${e}`),t.U.assert(2==c)):n.noArgs?(d(`callget ${e}`),t.U.assert(1==c)):d(`calliface ${c}, ${e}`)}else null!=n.virtualIndex?t.U.oops():d(`callproc ${r.label()}`);h-=a}function I(e,n){switch(e.exprKind){case p.CellRef:C(n);let r=e.data,i="st"+x(r);if(r.isGlobal()&&0!=r.bitSize){const e=t.sizeOfBitSize(r.bitSize)|(t.isBitSizeSigned(r.bitSize)?16:0);d("bitconv "+e)}d(i);break;case p.FieldAccess:let a=e.data;C(e.args[0]),D(),C(n),d(`stfld ${a.idx}, ${c(a.classInfo)}`),h--;break;default:t.oops()}}}(m,d,e)),[e.label()+"_Lit"])})),_+="_code_end:\n\n",_+="_helpers_end:\n\n",d.usedClassInfos.forEach((e=>{h(c(e),a.VTable,(()=>i(e,0,d)))})),t.U.values(s).forEach((e=>{e.itable=[],e.classNo=65520,h(c(e),a.VTable,(()=>i(e,0,d)))})),s={};let k=0;h("ifaceMemberNames",a.IfaceMemberNames,(()=>`    .word ${d.ifaceMembers.length} ; num. entries\n`+d.ifaceMembers.map((e=>`    .word ${d.emitString(e)}  ; ${k++} .${e}`)).join("\n"))),_+="_vtables_end:\n\n",t.U.iterMap(d.hexlits,((e,n)=>{h(n,a.Literal,(()=>`.word ${u("pxt::buffer_vt")}\n`+t.hexLiteralAsm(e)),[],pxt.BuiltInType.BoxedBuffer)})),t.U.unique(d.ifaceMembers.concat(Object.keys(d.strings)),(e=>e)).forEach((e=>{const n=t.utf8AsmStringLiteral(e);let r=pxt.BuiltInType.BoxedString;"pxt::string_inline_ascii_vt"==n.vt?r=pxt.BuiltInType.BoxedString_ASCII:"pxt::string_skiplist16_packed_vt"==n.vt?r=pxt.BuiltInType.BoxedString_SkipList:"pxt::string_inline_utf8_vt"==n.vt?r=pxt.BuiltInType.BoxedString:t.oops("invalid vt");const i=`.word ${u(n.vt)}\n`+n.asm;h(d.strings[e],a.Literal,(()=>i),[],r)})),h("numberBoxes",a.NumberBoxes,(()=>m.dblBoxText.join("\n")+"\n.word 0, 0, 0 ; dummy entry to make sure not empty")),h("numberLiterals",a.NumberLiterals,(()=>m.dblText.join("\n")+"\n.word 0, 0 ; dummy entry to make sure not empty"));const S=f.configData||[];h("configData",a.ConfigData,(()=>S.map((e=>`    .word ${e.key}, ${e.value}  ; ${e.name}=${e.value}`)).join("\n")+"\n    .word 0, 0"));let T=m.opcodes.map((e=>null==e?"":e)).join("\0")+"\0",C="";for(;T;){let e=T.slice(0,64);T=T.slice(64),1&e.length&&(e+="\0"),C+=".hex "+t.U.toHex(t.U.stringToUint8Array(e))+"\n"}h("opcodeMap",a.OpCodeMap,(()=>C)),_+="_literals_end:\n",_+="_img_end:\n",_+="\n; The end.\n",d.writeFile(t.BINARY_ASM,_);let E=t.assemble(p.target,d,_);const D=E.thumbFile.getSourceMap(),A=function(e){const n=[83,82,67,77,136,21,78,45,170,134,153,113,0,0,0,0];for(const r of Object.keys(e)){for(const e of t.U.stringToUint8Array(r))n.push(e);n.push(0);const a=e[r];let o=0,s=0;for(let e=0;e<a.length;e+=3)i(a[e]-o),i(a[e+1]-s>>1),i(a[e+2]>>1),o=a[e],s=a[e+1];n.push(255)}n.push(0),1&n.length&&n.push(0);const r=[];for(let e=0;e<n.length;e+=2)r.push(n[e]|n[e+1]<<8);return r;function i(e){if(0<=e&&e<240)n.push(e);else{let t=240;e<0&&(e=-e,t|=8);const r=n.length;n.push(null);let i=0;for(;0!=e;)n.push(255&e),e>>>=8,i++;n[r]=t|i}}}(D);E.src&&d.writeFile(t.BINARY_ASM,`; srcmap size: ${A.length<<1} bytes\n`+E.src);{let e="";for(let t of E.buf)e+=String.fromCharCode(255&t,t>>8);const n=t.U.sha256(e);for(let e=0;e<4;++e)E.buf[16+e]=parseInt(n.slice(4*e,4*e+4),16);D.__meta={name:p.name,programHash:E.buf[16]|E.buf[17]<<16}}if(d.writeFile(t.BINARY_SRCMAP,JSON.stringify(D)),pxt.options.debug){let e=E.thumbFile.peepCounts,t=Object.keys(e);t.sort(((t,n)=>e[n]-e[t]));for(let n of t.slice(0,50))console.log(`${n}  ${e[n]}`)}if(E.buf){let n="";const r=E.buf;for(;15&r.length;)r.push(0);t.U.pushRange(r,A);for(let e of r)n+=String.fromCharCode(255&e,e>>8);if(n=e.pxtc.encodeBase64(n),l()){d.writeFile(t.BINARY_PXT64,n);const i=t.hexfile.patchHex(d,r,!1,!!t.target.useUF2)[0];d.writeFile(pxt.outputName(t.target),e.pxtc.encodeBase64(i))}else d.writeFile(pxt.outputName(t.target),n)}}}(e.pxtc||(e.pxtc={}))}(ts||(ts={})),function(e){!function(t){!function(n){let r,i;!function(e){e.DecompileLiterals="decompileLiterals",e.TaggedTemplate="taggedTemplate",e.DecompileIndirectFixedInstances="decompileIndirectFixedInstances",e.DecompileArgumentAsString="decompileArgumentAsString"}(r=n.DecompileParamKeys||(n.DecompileParamKeys={})),function(e){e[e.SingleLine=0]="SingleLine",e[e.MultiLine=1]="MultiLine"}(i=n.CommentKind||(n.CommentKind={})),n.FILE_TOO_LARGE_CODE=9266,n.DECOMPILER_ERROR=9267;const a=e.SyntaxKind,o=/^[^\f\n\r\t\v\u00a0\u1680\u180e\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]*$/,s=/^(?:Array<(.+)>)|(?:(.+)\[\])$/,c="math_number",l="math_number_minmax",u="math_integer",d="math_whole_number",p="text",f="logic_boolean",_={"+":{type:"math_arithmetic",op:"ADD"},"-":{type:"math_arithmetic",op:"MINUS"},"/":{type:"math_arithmetic",op:"DIVIDE"},"*":{type:"math_arithmetic",op:"MULTIPLY"},"**":{type:"math_arithmetic",op:"POWER"},"%":{type:"math_modulo",leftName:"DIVIDEND",rightName:"DIVISOR"},"<":{type:"logic_compare",op:"LT"},"<=":{type:"logic_compare",op:"LTE"},">":{type:"logic_compare",op:"GT"},">=":{type:"logic_compare",op:"GTE"},"==":{type:"logic_compare",op:"EQ"},"===":{type:"logic_compare",op:"EQ"},"!=":{type:"logic_compare",op:"NEQ"},"!==":{type:"logic_compare",op:"NEQ"},"&&":{type:"logic_operation",op:"AND"},"||":{type:"logic_operation",op:"OR"}},m=/^\s*\/\/\s*(.*)$/,g=/^\s*(?:(?:(?:\/\*\*?)|(?:\*))(?!\/))?\s*(.*?)(?:\*?\*\/)?$/;class h{constructor(e){this.renames=e,this.renames.sort(((e,t)=>e.span.start-t.span.start))}getRenamesInSpan(e,t){const n=[];for(const r of this.renames){if(r.span.start>t)break;r.span.start>=e&&n.push(r)}return n}getRenameForPosition(e){for(const t of this.renames){if(t.span.start>e)return;if(t.span.start===e)return t}}}function y(e,t,n=!0){if(1===e.length&&"x"!==e&&"y"!==e&&"z"!==e){const r=e.charCodeAt(0);if(r>=97&&r<=122){const e=r-97;for(let r=1;r<26;r++){const i=String.fromCharCode(97+(e+r)%26);if("x"!==i&&"y"!==i&&"z"!==i&&!t[i])return n&&(t[i]=!0),i}}}for(let r=2;;r++){const i=e+r;if(!t[i])return n&&(t[i]=!0),i}}let v;function b(n,i,o=!1,s=!1){switch(n.kind){case a.WhileStatement:case a.IfStatement:case a.Block:return;case a.ExpressionStatement:return b(n.expression,i,o,s);case a.VariableStatement:return function(e,t){for(const n of e.declarationList.declarations){const e=c(n,t);if(e)return e}return}(n,i);case a.CallExpression:return function(n,i,o=!1,s=!1){const c=t.pxtInfo(n).callInfo;if(!c)return t.Util.lf("Function call not supported in the blocks");const l=i.attrs(c);let u;e.isIdentifier(n.expression)&&(u=i.declaredFunctions[n.expression.text]);if(!o&&c.isExpression&&!u){if(i.aliasBlocks[c.qName])c.decompilerBlockAlias=i.aliasBlocks[c.qName];else if(!i.opts.snippetMode)return t.Util.lf("No output expressions as statements")}if("Math.pow"==c.qName)return;if(pxt.Util.startsWith(c.qName,"Math.")){if(R(c.qName.substring(5)))return}if(l.blockId===t.PAUSE_UNTIL_TYPE){const e=n.arguments[0];if(1===n.arguments.length&&y(e))return;return t.Util.lf("Predicates must be inline expressions that return a value")}const d=N(c,l);if(d&&!l.handlerStatement&&!s)return t.Util.lf("Events must be top level");if(!l.blockId||!l.block){const e=pxt.blocks.builtinFunctionInfo[c.qName];if(!e)return u?u.parameters.length!==c.args.length?t.Util.lf("Function calls in blocks must have the same number of arguments as the function definition"):void 0:t.Util.lf("Call statements must have a valid declared function");l.blockId=e.blockId}const p=O(c,i.blocks),f=i.blocks.apis.byQName[c.qName],_=pxt.blocks.compileInfo(f),m=_.parameters.length+(_.thisParameter?1:0);if(l.imageLiteral||l.gridLiteral){if(c.args.length-m>1)return t.Util.lf("Function call has more arguments than are supported by its block");let e=n.arguments[0];if(e.kind!=a.StringLiteral&&e.kind!=a.NoSubstitutionTemplateLiteral)return t.Util.lf("Only string literals supported for image literals");const r=(e.text||"").replace(/\s+/g,""),i=l.imageLiteralRows||5,o=(l.imageLiteralColumns||5)*(l.imageLiteral||l.gridLiteral),s=o*i;return o*i!=r.length?t.Util.lf("Invalid image pattern ({0} expected vs {1} actual)",s,r.length):void 0}const g=c.args.length-m;if(g>0&&!h()){let e=g;if(d&&e--,l.defaultInstance&&e--,e>0)return t.Util.lf("Function call has more arguments than are supported by its block")}if(_.parameters.length||d){let e;const t=l.defaultInstance||!!_.thisParameter;if(p.forEach(((n,r)=>{e||t&&0===r||(t&&r--,e=v(n))})),e)return e}if(f){const e=i.blocks.apis.byQName[f.namespace];if(e&&e.attributes.fixedInstances&&!e.attributes.decompileIndirectFixedInstances&&c.args.length){const e=t.pxtInfo(c.args[0]).callInfo;if(!e||!i.attrs(e).fixedInstance)return t.Util.lf("Fixed instance APIs can only be called directly from the fixed instance")}}return;function h(){if(l.mutatePropertyEnum&&2===g&&c.args.length>=2){const e=c.args[c.args.length-2],t=c.args[c.args.length-1];if(e.kind===a.ArrayLiteralExpression&&P(t)){const n=[];if(!e.elements.some((e=>e.kind!==a.PropertyAccessExpression||e.expression.kind!==a.Identifier||(n.push(e.name.text),e.expression.text!==l.mutatePropertyEnum)))){const e=T(t);if(e){const t=e[0];return t.length===n.length&&!n.some((e=>-1===t.indexOf(e)))}}}}return!1}function y(e){if(e.kind!==a.FunctionExpression&&e.kind!==a.ArrowFunction)return!1;const n=e;if(function(e){switch(e.kind){case a.BinaryExpression:{const t=e.operatorToken.kind;return t!=a.PlusEqualsToken&&t!=a.MinusEqualsToken&&t!=a.EqualsToken}case a.PrefixUnaryExpression:{const t=e.operator;return t!=a.PlusPlusToken&&t!=a.MinusMinusToken}case a.PostfixUnaryExpression:{const t=e.operator;return t!=a.PlusPlusToken&&t!=a.MinusMinusToken}case a.CallExpression:{const n=t.pxtInfo(e).callInfo;return t.assert(!!n),n.isExpression}case a.Identifier:case a.ParenthesizedExpression:case a.NumericLiteral:case a.StringLiteral:case a.NoSubstitutionTemplateLiteral:case a.TrueKeyword:case a.FalseKeyword:case a.NullKeyword:case a.TaggedTemplateExpression:return!0;default:return!1}}(n.body))return!0;const r=n.body;if(1===r.statements.length){if(D(r.statements[0]).kind===a.ReturnStatement)return!0}return!1}function v(e){const n=D(e.value),o=e.info,s=e.param;if(o.isEnum){if(c(n))return;if(n.kind===a.CallExpression){const e=t.pxtInfo(n).callInfo,r=i.attrs(e);if(e&&"TD_ID"===r.shim&&e.args&&1===e.args.length){if(c(D(e.args[0])))return}}else if(n.kind===a.Identifier){const e=t.pxtInfo(n).commentAttrs;if(e&&e.enumIdentity)return}return t.Util.lf("Enum arguments may only be literal property access expressions")}if(I(n)&&(s.fieldEditor||s.shadowBlockId)){let e=!(!s.fieldOptions||!s.fieldOptions[r.DecompileLiterals]);if(!e&&s.shadowBlockId){const t=i.blocks.blocksById[s.shadowBlockId];if(t&&t.parameters&&t.parameters.length){const n=t.parameters[0].name;e=!t.attributes.paramFieldEditorOptions||!t.attributes.paramFieldEditorOptions[n]||!!t.attributes.paramFieldEditorOptions[n][r.DecompileLiterals]}else e=!0}if(!e)return t.Util.lf("Field editor does not support literal arguments")}else if(n.kind===a.TaggedTemplateExpression&&s.fieldEditor){let e=s.fieldOptions&&s.fieldOptions[r.TaggedTemplate];if(!e)return t.Util.lf("Tagged templates only supported in custom fields with param.fieldOptions.taggedTemplate set");const i=D(n.tag).getText(),o=e.split(";").map((e=>e.trim()));if(-1===o.indexOf(i))return t.Util.lf("Function only supports template literals with tag '{0}'",o.join(", "));if(n.template.kind!==a.NoSubstitutionTemplateLiteral)return t.Util.lf("Tagged template literals cannot have substitutions")}else if(n.kind===a.ArrowFunction){const e=n;if(e.parameters.length)if("objectdestructuring"===l.mutate){const n=D(e.parameters[0]);if(n.kind===a.Parameter&&n.name.kind!==a.ObjectBindingPattern)return t.Util.lf("Object destructuring mutation callbacks can only have destructuring patters as arguments")}else for(const n of e.parameters)if(n.name.kind!==a.Identifier)return t.Util.lf("Only identifiers allowed as function arguments")}else if(i.blocks.apis.byQName[o.type]){if(i.blocks.apis.byQName[o.type].attributes.fixedInstances){if(L(s))return;if(s.shadowBlockId){const e=i.blocks.blocksById[s.shadowBlockId];if(e){const t=pxt.blocks.compileInfo(e);if(t.parameters&&L(t.parameters[0]))return}}const e=t.pxtInfo(n).callInfo;if(e&&i.attrs(e).fixedInstance)return;return t.Util.lf("Arguments of a fixed instance type must be a reference to a fixed instance declaration")}}return;function c(e){const t=o.type.split("."),n=[];for(;e.kind===a.PropertyAccessExpression;)n.unshift(e.name.text),e=e.expression;if(e.kind!==a.Identifier)return!1;n.unshift(e.text);for(let e=0;e<t.length;e++)if(t[e]!==n[e])return!1;return!0}}}(n,i,o,s);case a.VariableDeclaration:return c(n,i);case a.PostfixUnaryExpression:case a.PrefixUnaryExpression:return function(e){if(e.operand.kind!=a.Identifier)return t.Util.lf("-- and ++ may only be used on an identifier");if(e.operator!==a.PlusPlusToken&&e.operator!==a.MinusMinusToken)return t.Util.lf("Only ++ and -- supported as prefix or postfix unary operators in a statement");return}(n);case a.FunctionExpression:case a.ArrowFunction:return function(e,n){let r=!1;if(e.parameters.length){let i=E(e)[0];if(i&&t.pxtInfo(i).callInfo){let o=t.pxtInfo(i).callInfo;r="objectdestructuring"===n.attrs(o).mutate?e.parameters[0].name.kind!==a.ObjectBindingPattern:e.parameters.some((e=>e.name.kind!==a.Identifier))}}if(r)return t.Util.lf("Unsupported parameters in error function");return}(n,i);case a.BinaryExpression:return function(e,n){if(e.left.kind===a.ElementAccessExpression){if(e.operatorToken.kind!==a.EqualsToken)return t.Util.lf("Element access expressions may only be assigned to using the equals operator")}else{if(e.left.kind===a.PropertyAccessExpression)return e.operatorToken.kind!==a.EqualsToken&&e.operatorToken.kind!==a.PlusEqualsToken?t.Util.lf("Property access expressions may only be assigned to using the = and += operators"):C(e.left,n);if(e.left.kind!==a.Identifier)return t.Util.lf("This expression cannot be assigned to");switch(e.operatorToken.kind){case a.EqualsToken:return C(e.right,n);case a.PlusEqualsToken:case a.MinusEqualsToken:return;default:return t.Util.lf("Unsupported operator token in statement {0}",a[e.operatorToken.kind])}}return}(n,i);case a.ForStatement:return function(e){if(!e.initializer||!e.incrementor||!e.condition)return t.Util.lf("for loops must have an initializer, incrementor, and condition");if(e.initializer.kind!==a.VariableDeclarationList)return t.Util.lf("only variable declarations are permitted in for loop initializers");const n=e.initializer;if(!n.declarations)return t.Util.lf("for loop with out-of-scope variables not supported");if(1!=n.declarations.length)return t.Util.lf("for loop with multiple variables not supported");const r=n.declarations[0];if(r.initializer.kind!==a.NumericLiteral||"0"!==r.initializer.text)return t.Util.lf("for loop initializers must be initialized to 0");const i=r.name.text;if(!s(i))return t.Util.lf("for loop incrementors may only increment the variable declared in the initializer");if(e.condition.kind!==a.BinaryExpression)return t.Util.lf("for loop conditionals must be binary comparison operations");const o=e.condition;if(o.left.kind!==a.Identifier||o.left.text!==i)return t.Util.lf("left side of for loop conditional must be the variable declared in the initializer");if(o.operatorToken.kind!==a.LessThanToken&&o.operatorToken.kind!==a.LessThanEqualsToken)return t.Util.lf("for loop conditional operator must be either < or <=");return;function s(t){if(e.incrementor.kind===a.PostfixUnaryExpression||e.incrementor.kind===a.PrefixUnaryExpression){const n=e.incrementor;if(n.operator===a.PlusPlusToken&&n.operand.kind===a.Identifier)return n.operand.text===t}return!1}}(n);case a.ForOfStatement:return function(e){if(e.initializer.kind!==a.VariableDeclarationList)return t.Util.lf("only variable declarations are permitted in for of loop initializers");return}(n);case a.FunctionDeclaration:return function(e,n){if(!n)return t.Util.lf("Function declarations must be top level");if(e.parameters.length>0&&i.opts.allowedArgumentTypes)for(const n of e.parameters){if(n.initializer||n.questionToken)return t.Util.lf("Function parameters cannot be optional");const e=n.type?n.type.getText():void 0;if(!e)return t.Util.lf("Function parameters must declare a type");const r=j(e);if(-1===i.opts.allowedArgumentTypes.indexOf(r)&&!t.U.endsWith(r,"[]"))return t.Util.lf("Only types that can be added in blocks can be used for function arguments")}return}(n,s);case a.EnumDeclaration:return function(e,n){if(!n)return t.Util.lf("Enum declarations must be top level");const r=e.name.text;if(!i.blocks.enumsByName[r])return t.Util.lf("Enum declarations in user code must have a block");let o=!1;if(e.members.forEach((e=>{if(e.name.kind!==a.Identifier&&(o=!0),!o&&e.initializer){if(e.initializer.kind===a.NumericLiteral)return;if(e.initializer.kind===a.BinaryExpression){const t=e.initializer;if(t.operatorToken.kind===a.LessThanLessThanToken&&t.left.kind===a.NumericLiteral&&t.right.kind===a.NumericLiteral&&"1"==t.left.text)return}o=!0}})),o)return t.Util.lf("Invalid initializer for enum member");return}(n,s);case a.ModuleDeclaration:return function(e){const t=x(e,i);if(!t)return;return k(e)?t:void 0}(n);case a.ReturnStatement:return function(n){if(r(n))return;return t.Util.lf("Return statements can only be used within top-level function declarations");function r(t){const n=e.getEnclosingBlockScopeContainer(t);if(n)switch(n.kind){case a.SourceFile:case a.ArrowFunction:case a.FunctionExpression:return!1;case a.FunctionDeclaration:return n.parent&&n.parent.kind===a.SourceFile&&!b(n,i,!1,!0);default:return r(n)}return!1}}(n);case a.BreakStatement:case a.ContinueStatement:case a.DebuggerStatement:case a.EmptyStatement:return}return t.Util.lf("Unsupported statement in block: {0}",a[n.kind]);function c(e,n){let r;return e.name.kind!==a.Identifier?r=t.Util.lf("Variable declarations may not use binding patterns"):e.initializer?S(e)||(r=C(e.initializer,n)):r=t.Util.lf("Variable declarations must have an initializer"),r}}function x(n,r){if(!e.isModuleBlock(n.body))return t.Util.lf("Namespaces cannot be nested.");const i=r.blocks.kindsByName[n.name.text];if(!i)return t.Util.lf("Only namespaces with 'kind' blocks can be decompiled");const o=t.Util.lf("Namespaces may only contain valid 'kind' exports");for(const t of n.body.statements){if($(t))return o;if(!e.isVariableStatement(t)||!t.declarationList.declarations)return o;{const n=1===t.declarationList.declarations.length,r=t.modifiers&&1===t.modifiers.length&&t.modifiers[0].kind===a.ExportKeyword,s=t.declarationList.flags&e.NodeFlags.Const;if(!(n&&r&&s))return o;{const n=t.declarationList.declarations[0];if(!n.initializer||!e.isCallExpression(n.initializer)||!e.isIdentifier(n.name))return o;const r=n.initializer;if(r.arguments.length)return o;if(e.isPropertyAccessExpression(r.expression)&&e.isIdentifier(r.expression.expression)){if(r.expression.expression.text!==i.name||r.expression.name.text!==i.createFunctionName)return o}else{if(!e.isIdentifier(r.expression))return o;if(r.expression.text!==i.createFunctionName)return o}}}}}function k(n){if(!e.isModuleBlock(n.body))return t.Util.lf("Namespaces cannot be nested.");if(n.name.text!==pxt.sprite.TILE_NAMESPACE)return t.Util.lf("Tileset namespace must be named myTiles");const r=t.Util.lf("The myTiles namespace can only export tile variables with image literal initializers and no duplicate ids"),i=t.Util.lf("Tileset members must have a blockIdentity comment and no other annotations"),o=new RegExp(`${pxt.sprite.TILE_PREFIX}(\\d+)`),s=[],c=/^\s*\/\/%\s*blockIdentity=[^\s]+\s*$/;for(const t of n.body.statements){const n=e.getLeadingCommentRangesOfNode(t,t.getSourceFile());if(!n||!n.length)return i;{const e=n.map((e=>t.getSourceFile().text.substr(e.pos,e.end-e.pos))).filter((e=>!!e));if(1!==e.length||!c.test(e[0]))return i}if(!e.isVariableStatement(t)||!t.declarationList.declarations)return r;{const n=1===t.declarationList.declarations.length,i=t.modifiers&&1===t.modifiers.length&&t.modifiers[0].kind===a.ExportKeyword,c=t.declarationList.flags&e.NodeFlags.Const;if(!(n&&i&&c))return r;{const n=t.declarationList.declarations[0];if(!n.initializer||!e.isTaggedTemplateExpression(n.initializer)||!e.isIdentifier(n.name))return r;const i=n.initializer;if(!e.isIdentifier(i.tag)||"img"!==i.tag.text)return r;const a=o.exec(n.name.text);if(!a||-1!==s.indexOf(a[1]))return r;s.push(a[1])}}}}function S(n){if(n.initializer){if(n.initializer.kind===e.SyntaxKind.NullKeyword||n.initializer.kind===e.SyntaxKind.FalseKeyword||function(e){return e.kind===a.ArrayLiteralExpression&&0===e.elements.length}(n.initializer))return!0;if(e.isStringOrNumericLiteral(n.initializer)){const e=n.initializer.getText();return"0"===e||A(e)}{const e=t.pxtInfo(n.initializer).callInfo;if(e&&e.isAutoCreate)return!0}}return!1}function T(e){if(1===e.parameters.length&&e.parameters[0].name.kind===a.ObjectBindingPattern){const n=e.parameters[0].name.elements,r={};return[n.map((e=>{if(t(e.propertyName)&&t(e.name)){const t=e.name.text;if(e.propertyName){const n=e.propertyName.text;return r[n]=t,n}return t}return""})),r]}return;function t(e){return!e||e.kind===a.Identifier}}function C(n,r){switch(n.kind){case a.NumericLiteral:case a.TrueKeyword:case a.FalseKeyword:case a.ExpressionStatement:case a.ArrayLiteralExpression:case a.ElementAccessExpression:return;case a.ParenthesizedExpression:return C(n.expression,r);case a.StringLiteral:case a.FirstTemplateToken:case a.NoSubstitutionTemplateLiteral:return function(e){const n=e.text;return o.test(n)?void 0:t.Util.lf("Only whitespace character allowed in string literals is space")}(n);case a.Identifier:const s=t.pxtInfo(n);return(i=n)&&i.kind===a.Identifier&&"undefined"===i.text?t.Util.lf("Undefined is not supported in blocks"):!w(n)||s.commentAttrs&&s.commentAttrs.blockIdentity&&s.commentAttrs.enumIdentity?void 0:t.Util.lf("Variable is declared in another file");case a.BinaryExpression:const c=n.operatorToken.getText();return _[c]?void 0:t.Util.lf("Could not find operator {0}",c);case a.PrefixUnaryExpression:const l=n.operator;return l===a.MinusToken||l===a.PlusToken||l===a.ExclamationToken?void 0:t.Util.lf("Unsupported prefix unary operator{0}",l);case a.PropertyAccessExpression:return function(n,r){const i=t.pxtInfo(n).callInfo;if(i){const o=r.attrs(i),s=r.compInfo(i);if(o.blockIdentity||"lists_length"===o.blockId||"text_length"===o.blockId)return;if(i.decl.kind===a.EnumMember){if(n.expression.kind===a.Identifier){const e=n.expression.text;if(r.declaredEnums[e])return}const[e,i]=E(n);let o=!0;if(e){const n=t.pxtInfo(e).callInfo;if(n&&n.args){const e=r.blocks.apis.byQName[n.qName],t=1==e.kind||2==e.kind;e&&n.args.forEach(((n,r)=>{if(n===i){e.parameters[t?r-1:r].isEnum&&(o=!1)}}))}}return o?t.Util.lf("Enum value without a corresponding block"):void 0}if(o.fixedInstance&&n.parent){if(n.parent.parent&&n.parent.kind===a.PropertyAccessExpression&&n.parent.parent.kind===a.CallExpression){if(n.parent.parent.expression===n.parent)return}else if(n.parent.kind===a.CallExpression&&n.parent.expression!==n)return}else{if(o.blockCombine||o.blockId&&s&&s.thisParameter)return C(n.expression,r);if(e.isIdentifier(n.expression)&&r.declaredKinds[n.expression.text]){const e=n.name.text,t=r.declaredKinds[n.expression.text];if(t&&(-1!==t.kindInfo.initialMembers.indexOf(e)||-1!==t.declaredNames.indexOf(e)))return}}}return t.Util.lf("No call info found")}(n,r);case a.CallExpression:return b(n,r,!0,void 0);case a.TaggedTemplateExpression:return function(e,n){const r=t.pxtInfo(e).callInfo;if(!r)return t.Util.lf("Invalid tagged template");const i=n.attrs(r);if(!i.blockIdentity)return t.Util.lf("Tagged template does not have blockIdentity set");const a=n.blocks.apis.byQName[i.blockIdentity];if(!a)return t.Util.lf("Could not find blockIdentity for tagged template");if(1!==pxt.blocks.compileInfo(a).parameters.length)return t.Util.lf("Tagged template functions must have 1 argument");return}(n,r);case a.AsExpression:return function(n){if("any"===n.type.getText().trim()&&(e.isStringOrNumericLiteral(n.expression)||n.expression.kind===a.TrueKeyword||n.expression.kind===a.FalseKeyword)){const[e]=E(n);if(e.kind===a.BinaryExpression)switch(e.operatorToken.kind){case a.EqualsEqualsToken:case a.EqualsEqualsEqualsToken:case a.ExclamationEqualsToken:case a.ExclamationEqualsEqualsToken:case a.LessThanToken:case a.LessThanEqualsToken:case a.GreaterThanToken:case a.GreaterThanEqualsToken:return}}return t.Util.lf("Casting not supported in blocks")}(n)}var i;return t.Util.lf("Unsupported syntax kind for output expression block: {0}",a[n.kind])}function E(e){return e.parent?e.parent.kind===a.ParenthesizedExpression?E(e.parent):[e.parent,e]:[void 0,e]}function D(e){for(;e.kind===a.ParenthesizedExpression;)e=e.expression;return e}function A(e){return'""'===e||"''"===e||"``"===e}function w(e){return!!(4&t.pxtInfo(e).flags)}function N(e,n){if(n.blockId===t.PAUSE_UNTIL_TYPE)return!1;e.decl.parameters;return e.args.some(((e,t)=>e&&P(e)))}function I(e){if(!e)return!1;switch(e.kind){case a.ParenthesizedExpression:return I(e.expression);case a.ArrayLiteralExpression:const t=e;for(const e of t.elements)if(!I(e)&&e.kind!==a.TaggedTemplateExpression)return!1;return!0;case a.NumericLiteral:case a.StringLiteral:case a.NoSubstitutionTemplateLiteral:case a.TrueKeyword:case a.FalseKeyword:return!0;case a.PrefixUnaryExpression:const n=e;return(n.operator===a.PlusToken||n.operator===a.MinusToken)&&I(n.operand);default:return!1}}function P(e){return e.kind===a.ArrowFunction||e.kind===a.FunctionExpression}function O(e,t){const n=[],r=t.apis.byQName[e.qName];if(r){const i=t.apis.byQName[e.qName].attributes,a=pxt.blocks.compileInfo(r);pxt.blocks.builtinFunctionInfo[e.qName];let o=i.imageLiteral?1:0;a.thisParameter?n.push({value:D(e.args[0]),info:null,param:a.thisParameter}):i.defaultInstance&&n.push({value:D(e.args[0]),info:r.parameters[0],param:{definitionName:"__instance__",actualName:"this"}});const s=!(!a.thisParameter&&!i.defaultInstance);s&&o++;for(let t=o;t<e.args.length;t++)n.push({value:D(e.args[t]),info:r.parameters[s?t-1:t],param:a.parameters[t-o]})}return n}function F(e){return e.body.statements.map((e=>{const t=e.declarationList.declarations[0];return{name:t.name.text,initializer:t.initializer.getText()}}))}function L(e){return e&&e.fieldOptions&&e.fieldOptions[r.DecompileIndirectFixedInstances]}function R(e){return M(e)||U(e)||B(e)||-1!==pxt.blocks.MATH_FUNCTIONS.binary.indexOf(e)}function M(e){return-1!==pxt.blocks.MATH_FUNCTIONS.unary.indexOf(e)}function U(e){return-1!==pxt.blocks.MATH_FUNCTIONS.infix.indexOf(e)}function B(e){return-1!==pxt.blocks.ROUNDING_FUNCTIONS.indexOf(e)}function j(e){const t=s.exec(e);return t?`${t[1]||t[2]}[]`:e}function $(t){const n=e.getLeadingCommentRangesOfNode(t,t.getSourceFile());return!(!n||!n.length)}function K(t,n,r=!1){const a=[],o=t.getFullText();if(n&&n.length)for(const s of n){const n=e.getLineOfLocalPosition(t,s.end),c=e.getStartPositionOfLine(n+1,t)||o.length,l=e.getStartPositionOfLine(n+2,t)||o.length,u=!r&&!o.substr(c,l-c).trim();let d=o.substr(s.pos,s.end-s.pos);if(d&&(d=d.replace(/\r\n/g,"\n")),s.kind===e.SyntaxKind.SingleLineCommentTrivia){const e=m.exec(d);e?a.push({kind:i.SingleLine,text:e[1],start:s.pos,end:s.end,hasTrailingNewline:!!s.hasTrailingNewLine,followedByEmptyLine:u,isTrailingComment:r}):a.push({kind:i.SingleLine,text:"",start:s.pos,end:s.end,hasTrailingNewline:!!s.hasTrailingNewLine,followedByEmptyLine:u,isTrailingComment:r})}else{const e=d.split("\n").map((e=>{const t=g.exec(e);return t?t[1]:""}));a.push({kind:i.MultiLine,lines:e,start:s.pos,end:s.end,hasTrailingNewline:!!s.hasTrailingNewLine,followedByEmptyLine:u,isTrailingComment:r})}}return a}function z(e){let n="";for(const r of e)if(r.kind===i.SingleLine){if(r.text===t.ON_START_COMMENT||r.text===t.HANDLER_COMMENT)continue;n+=r.text.trim()+"\n"}else for(const e of r.lines)n+=e.trim()+"\n";return n.trim()}function J(e){const[t]=E(e);return!t||t.kind==a.SourceFile||(t.kind==a.ExpressionStatement?J(t):t.kind==a.VariableDeclarationList&&J(t.parent))}function q(t){const n=t.getFullText(),r=e.createScanner(t.languageVersion,!1,t.languageVariant,n,void 0,t.getFullStart());let i,o,s=[];for(;r.getTextPos()<t.end;){const c=r.scan();if(c===a.SingleLineCommentTrivia||c===a.MultiLineCommentTrivia){i=e.getLeadingCommentRanges(n,r.getTokenPos())||[],o=e.getTrailingCommentRanges(n,r.getTokenPos())||[],o=o.filter((e=>!i.some((t=>t.pos===e.pos)))),s.push(...K(t,i,!1)),s.push(...K(t,o,!0));for(const e of s)e.end>r.getTextPos()&&r.setTextPos(e.end)}}return s.sort(((e,t)=>e.start-t.start)),s}function V(e,t){let n;for(let r=0;r<t.length;r++)n=t[r],!n.owner&&n.start>=e.pos&&n.end<=e.end&&(n.owner=e)}function H(e){let t=!1;if("expr"===e.value.kind){const n=e.value;if(n.type===c&&e.shadowType===l&&(n.type=l,n.fields[0].name="SLIDER",n.mutation=e.shadowMutation),t=n.type===e.shadowType,!t)switch(n.type){case"math_number":case"math_number_minmax":case"math_integer":case"math_whole_number":case"logic_boolean":case"text":t=!e.shadowType}}return t}n.RenameMap=h,n.buildRenameMap=function(n,r,{declarations:i,takenNames:a}={declarations:"variables",takenNames:{}}){let o=e.createLanguageService(new t.LSHost(n));const s=[];let c=(function t(n){e.forEachChild(n,(n=>{if(e.isDeclarationName(n)&&("all"===i||e.isVariableDeclaration(n.parent))){const e=n.getText();if(a[e]){const t=y(e,a),i=o.findRenameLocations(r.fileName,n.pos+1,!1,!1);i&&i.forEach((n=>{s.push({name:t,diff:t.length-e.length,span:n.textSpan})}))}else a[e]=!0}t(n)}))}(r),a);return[new h(s),c]},n.getNewName=y,function(e){e[e.None=0]="None",e[e.InBlocksOnly=1]="InBlocksOnly",e[e.InTextBlocks=2]="InTextBlocks"}(v||(v={})),n.decompileToBlocks=function(o,s,m,g){let h=0,y=s.statements;const L={blocksInfo:o,outfiles:{},diagnostics:[],success:!0,times:{}};m.generateSourceMap&&(L.blockSourceMap=[]);const $={blocks:o,declaredFunctions:{},declaredEnums:{},declaredKinds:{},functionParamIds:{},attrs:oe,compInfo:function(e){const t=o.apis.byQName[e.qName];if(t)return pxt.blocks.compileInfo(t);return},localReporters:[],tileset:[],opts:m||{},aliasBlocks:{}};s.getFullText();let K="";const G=[],W={},Q=[],Y=[],X=(()=>{let e=0;return()=>""+e++})(),Z=o.apis.byQName;Object.keys(Z).forEach((e=>{const t=Z[e];t.attributes.blockAliasFor&&Z[t.attributes.blockAliasFor]&&($.aliasBlocks[t.attributes.blockAliasFor]=t.qName)}));const ee=q(s),te=n=>{if(n.kind!==a.FunctionDeclaration||b(n,$,!1,!0))if(n.kind!==a.EnumDeclaration||b(n,$,!1,!0))if(e.isModuleDeclaration(n))if(x(n,$))k(n)||($.tileset=F(n).map((({name:e,initializer:t})=>({projectId:parseInt(e.substr(pxt.sprite.TILE_PREFIX.length)),data:pxt.sprite.imageLiteralToBitmap(t).data()}))));else{const e=n.name.text,t=F(n);$.declaredKinds[e]&&$.declaredKinds[e].declaredNames.push(...t.map((({name:e})=>e)))}else n.kind===a.Block&&e.forEachChild(n,te);else{const e=n.name.text;$.declaredEnums[e]=!0,function(e){const n=[];return e.members.forEach((e=>{t.U.assert(e.name.kind===a.Identifier);const r=e.name.text;let i;if(e.initializer)if(e.initializer.kind===a.NumericLiteral)i=parseInt(e.initializer.text);else{const n=e.initializer;t.U.assert(n.left.kind===a.NumericLiteral),t.U.assert("1"===n.left.text),t.U.assert(n.operatorToken.kind===a.LessThanLessThanToken),t.U.assert(n.right.kind===a.NumericLiteral);i=1<<parseInt(n.right.text)}else i=0===n.length?0:n[n.length-1][1]+1;n.push([r,i])})),n}(n).forEach((([t,n])=>{G.push({name:n+t,type:e})}))}else $.declaredFunctions[et(n.name)]=n};Object.keys(o.kindsByName).forEach((e=>{const t=o.kindsByName[e];$.declaredKinds[e]={kindInfo:t,declaredNames:[]}})),e.forEachChild(s,te);const ne=()=>(Math.PI*Math.random()).toString(36).slice(2);let re;Object.keys($.declaredFunctions).forEach((e=>{$.functionParamIds[e]={},$.declaredFunctions[e].parameters.forEach((t=>{$.functionParamIds[e][t.name.getText()]=ne()+ne()}))})),Object.keys($.declaredKinds).forEach((e=>{const t="KIND_"+e;$.declaredKinds[e].declaredNames.forEach((e=>G.push({name:e,type:t})))})),(G.length||$.tileset.length)&&(ie("<variables>"),G.forEach((e=>{ie(`<variable type="${t.U.htmlEscape(e.type)}">${t.U.htmlEscape(e.name)}</variable>`)})),$.tileset.forEach((e=>{ie(`<variable type="${pxt.sprite.BLOCKLY_TILESET_TYPE}">${pxt.sprite.legacy.tileToBlocklyVariable(e)}</variable>`)})),ie("</variables>"));try{re=Qe(y,void 0,!0,void 0,!m.snippetMode);for(const e of ee)e.owner||Q.push({refId:X(),comment:[e]})}catch(r){if(!r.programTooLarge)return pxt.reportException(r),L.success=!1,L.diagnostics=t.patchUpDiagnostics([{file:s,start:s.getFullStart(),length:s.getFullWidth(),messageText:r.message,category:e.DiagnosticCategory.Error,code:n.DECOMPILER_ERROR}]),L;L.success=!1,L.diagnostics=t.patchUpDiagnostics([{file:s,start:s.getFullStart(),length:s.getFullWidth(),messageText:r.message,category:e.DiagnosticCategory.Error,code:n.FILE_TOO_LARGE_CODE}])}return re?me(re):m.snippetMode||y.length||(ke(e.pxtc.ON_START_TYPE,de(e.pxtc.ON_START_TYPE,y[0])),Se()),Q.forEach((e=>{!function(e){let n=0;const r=z(e.comment);if(r.trim()){const i=r.split("\n");i.forEach((e=>n=Math.max(n,e.length)));const a=Math.max(Math.min(10*n,480),160);ie(`<comment h="${Math.max(Math.min(40*i.length,360),120)}" w="${a}" data="${t.U.htmlEscape(e.refId)}">`),ie(t.U.htmlEscape(r)),ie("</comment>")}}(e)})),L.outfiles[s.fileName.replace(/(\.blocks)?\.\w*$/i,"")+".blocks"]=`<xml xmlns="http://www.w3.org/1999/xhtml">\n${K}</xml>`,L;function ie(e,t="\n"){K+=e+t}function ae(n,r){const i=r||`Language feature "${n.getFullText().trim()}"" not supported in blocks`,a=t.patchUpDiagnostics([{file:s,start:n.getFullStart(),length:n.getFullWidth(),messageText:i,category:e.DiagnosticCategory.Error,code:1001}]);pxt.debug(`decompilation error: ${i}`),t.U.pushRange(L.diagnostics,a),L.success=!1}function oe(e){const n=o.apis.byQName[e.decompilerBlockAlias||e.qName];if(n){const e=n.attributes;if(!e.blockId||o.blocksById[e.blockId]||e.blockId===t.PAUSE_UNTIL_TYPE)return n.attributes}else if(e.decl){const n=t.parseComments(e.decl);if(n)return n}return{paramDefl:{},callingConvention:0}}function se(n){const r=n.expression,i=t.pxtInfo(r).callInfo,a=oe(i);if(a.blockAllowMultiple)return;if(a.blockHandlerKey)return a.blockHandlerKey;const o=i.args.filter((t=>!e.isArrowFunction(t)&&!P(t))).map((e=>ce(e))).join("$$");return a.blockId+"-"+o}function ce(e){if(!e)return"";switch(e.kind){case a.ParenthesizedExpression:case a.AsExpression:return ce(e.expression);case a.Identifier:return e.text;case a.StringLiteral:case a.FirstTemplateToken:case a.NoSubstitutionTemplateLiteral:return`"${e.text}"`;case a.NumericLiteral:return e.text;case a.TrueKeyword:return"true";case a.FalseKeyword:return"false";case a.BinaryExpression:return`{${ce(e.left)}${e.operatorToken.getText()}${ce(e.right)}}`;case a.PrefixUnaryExpression:return e.operator+ce(e.operand);case a.PropertyAccessExpression:return ce(e.expression)+"."+ce(e.name);case a.ArrayLiteralExpression:return`[${e.elements.map((e=>ce(e)))}]`;case a.ElementAccessExpression:return`${e.expression}[${e.argumentExpression}]`;case a.TaggedTemplateExpression:return`${ce(e.tag)}\`${e.template.getText()}\``;case a.CallExpression:return`${ce(e.expression)}(${e.arguments.map(ce).join(",")})`;default:return e.getText()}}function le(){if(h++,h>1500){let e=new Error(t.Util.lf("Could not decompile because the script is too large"));throw e.programTooLarge=!0,e}}function ue(t,n){if(t==e.pxtc.ON_START_TYPE)return"xRRgvHNlG#rZ^u`HECiY";const r=function(){const e="!#$%()*+,-./:;=?@[]^_`{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=e.length,n=[];for(let r=0;r<20;r++)n[r]=e.charAt(Math.random()*t);return n.join("")}();if(n){const e=n.getFullStart();L.blockSourceMap.push({id:r,startPos:e,endPos:e+n.getFullWidth()})}return r}function de(e,t){const n={kind:"statement",type:e};return L.blockSourceMap&&(n.id=ue(e,t)),n}function pe(e,t){return{kind:"expr",type:e}}function fe(e,t,n,r){return(!n||n===c)&&r&&r.min&&r.max&&(n=l),{kind:"value",name:e,value:t,shadowType:n,shadowMutation:r}}function _e(e){if(e.expression.kind==a.CallExpression){const n=e.expression,r=t.pxtInfo(n).callInfo;if(!r)return ae(e),!1;const i=oe(r);return i.blockId&&!i.handlerStatement&&!r.isExpression&&N(r,i)}return!1}function me(e){e&&(ke(e.type,e),he(e),void 0!==e.data&&ie(`<data>${t.U.htmlEscape(e.data)}</data>`),e.handlers&&e.handlers.forEach(be),e.next&&(ie("<next>"),me(e.next),ie("</next>")),void 0!==e.comment&&ie(`<comment pinned="false">${t.U.htmlEscape(z(e.comment))}</comment>`),Se())}function ge(e,t){ie("<mutation ",""),Object.keys(e).forEach((t=>{void 0!==e[t]&&ie(`${t}="${e[t]}" `,"")})),t?(ie(">"),t.forEach((e=>{ie(`<${e.nodeName} `,""),Object.keys(e.attributes).forEach((t=>{ie(`${t}="${e.attributes[t]}" `,"")})),ie("/>")})),ie("</mutation>")):ie("/>")}function he(e){e.mutation&&ge(e.mutation,e.mutationChildren),e.fields&&e.fields.forEach(ve),e.inputs&&e.inputs.forEach(ye)}function ye(e){if(ie(`<value name="${e.name}">`),H(e))xe(e.value,!0);else{if(void 0!==e.shadowType)switch(e.shadowType){case c:case u:case d:ie(`<shadow type="${e.shadowType}"><field name="NUM">0</field></shadow>`);break;case l:ie('<shadow type="math_number_minmax">'),e.shadowMutation&&ge(e.shadowMutation),ie('<field name="SLIDER">0</field></shadow>');break;case f:ie('<shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow>');break;case p:ie('<shadow type="text"><field name="TEXT"></field></shadow>');break;default:ie(`<shadow type="${e.shadowType}"/>`)}xe(e.value)}ie("</value>")}function ve(e){ie(`<field name="${t.U.htmlEscape(e.name)}">${t.U.htmlEscape(e.value.toString())}</field>`)}function be(e){ie(`<statement name="${t.U.htmlEscape(e.name)}">`),me(e.statement),ie("</statement>")}function xe(e,n=!1){if("text"===e.kind){ie(e.value)}else{const r=e,i=n||r.isShadow,a=i?"shadow":"block";i||le(),ie(`<${a} ${r.id?`id="${r.id}" `:""}type="${t.U.htmlEscape(r.type)}">`),he(r),ie(`</${a}>`)}}function ke(e,n){le();ie(`<block ${n&&n.id?`id="${n.id}" `:""}type="${t.U.htmlEscape(e)}">`)}function Se(){ie("</block>")}function Te(e){if(C(e,$))return Ee(e);switch(e.kind){case a.ExpressionStatement:case a.ParenthesizedExpression:return Te(e.expression);case a.Identifier:return function(e){if(w(e)){const n=t.pxtInfo(e);return je(o.apis.byQName[n.commentAttrs.blockIdentity],n.commentAttrs.enumIdentity)}const n=et(e),r=e.text;let i=null;return $.localReporters.some((e=>{for(let t=0;t<e.length;++t)if(e[t].name===r)return i=e[t],!0;return!1})),i?Re(n,i.type,!1):(Xe(n,v.InBlocksOnly),Fe("variables_get","VAR",n))}(e);case a.StringLiteral:case a.FirstTemplateToken:case a.NoSubstitutionTemplateLiteral:return Pe(e.text);case a.NumericLiteral:return Ie(e.text);case a.TrueKeyword:return Oe(!0);case a.FalseKeyword:return Oe(!1);case a.BinaryExpression:return function(e){const t=e.operatorToken.getText(),n=_[t];if(De(e))return we(e);const r=n.leftName||"A",i=n.rightName||"B";let a,o;"&&"===t||"||"===t?(a=Je(r,e.left),o=Je(i,e.right)):(a=Ne(r,e.left,c),o=Ne(i,e.right,c));const s=pe(n.type);s.fields=[],n.op&&s.fields.push(Me("OP",n.op));return s.inputs=[a,o],s}(e);case a.PrefixUnaryExpression:return function(e){switch(e.operator){case a.ExclamationToken:const t=pe("logic_negate");return t.inputs=[Je("BOOL",e.operand)],t;case a.PlusToken:return Te(e.operand);case a.MinusToken:return e.operand.kind==a.NumericLiteral?Ie("-"+e.operand.text):Ue(e.operand);default:ae(e)}return}(e);case a.PropertyAccessExpression:return Be(e);case a.ArrayLiteralExpression:return function(e){const t=pe("lists_create_with");return t.inputs=e.elements.map(((e,t)=>Ne("ADD"+t,e))),t.mutation={items:e.elements.length.toString()},t}(e);case a.ElementAccessExpression:return function(e){const t=pe("lists_index_get");return t.inputs=[Ne("LIST",e.expression),Ne("INDEX",e.argumentExpression,c)],t}(e);case a.TaggedTemplateExpression:return function(e){const n=t.pxtInfo(e).callInfo;let i;const s=function(e){if(e.parent&&e.parent.kind===a.CallExpression){const n=e.parent,r=t.pxtInfo(n).callInfo,i=n.arguments.indexOf(e);if(r&&-1!==i){const e=o.apis.byQName[r.qName];if(e){const t=pxt.blocks.compileInfo(e);return t&&t.parameters[i]}}}return}(e);if(s&&s.shadowBlockId){const e=$.blocks.blocksById[s.shadowBlockId];e&&"TD_ID"===e.attributes.shim&&(i=e)}i||(i=$.blocks.apis.byQName[oe(n).blockIdentity]);const c=pxt.blocks.compileInfo(i),l=pe(i.attributes.blockId);let u;const d=c.parameters[0];u=d.fieldOptions&&d.fieldOptions[r.DecompileArgumentAsString]?e.getText():e.template.text;return l.fields=[Me(d.actualName,u)],l}(e);case a.CallExpression:return Ke(e,void 0,void 0,!0);case a.AsExpression:return Te(e.expression);default:ae(e,t.Util.lf("Unsupported syntax kind for output expression block: {0}",a[e.kind]))}}function Ce(e,t,n){if(g){const r=g.getRenamesInSpan(t,n);if(r.length){let n=0;r.forEach((r=>{const i=r.span.start+n-t,a=i+r.span.length;n+=r.diff,e=e.slice(0,i)+r.name+e.slice(a)}))}}return e}function Ee(e){const n=Ce(e.getFullText(),e.getFullStart(),e.getEnd()).trim();return Ze(e),V(e,ee),Fe(t.TS_OUTPUT_TYPE,"EXPRESSION",n)}function De(e){if(e.kind===a.BinaryExpression){const n=e;if("+"===n.operatorToken.getText()||n.operatorToken.kind==a.PlusEqualsToken){return!!t.pxtInfo(e).exprInfo}}return!1}function Ae(e,t){De(e)?(Ae(e.left,t),Ae(e.right,t)):t.push(e)}function we(e){const t=[];Ae(e,t);const n=[];for(let e=0;e<t.length;e++)(e>0||!A(t[e].getText()))&&n.push(Ne("ADD"+n.length,t[e],p));const r=pe("text_join");return r.inputs=n,r.mutation={items:n.length.toString()},r}function Ne(e,t,n,r){let i;if(i="number"==typeof t?Ie(t.toString()):"boolean"==typeof t?Oe(t):"string"==typeof t?Pe(t):Te(t),"expr"==i.kind&&"math_number"==i.type){const e=i.fields[0].value;"math_integer"==n&&e%1==0&&(i.type="math_integer"),"math_whole_number"==n&&e%1==0&&e>0&&(i.type="math_whole_number")}return fe(e,i,n,r)}function Ie(e){return Fe("math_number","NUM",e)}function Pe(e){return Fe("text","TEXT",e)}function Oe(e){return Fe("logic_boolean","BOOL",e?"TRUE":"FALSE")}function Fe(e,t,n,r){const i=pe(e);return i.fields=[Me(t,n)],i.isShadow=r,i}function Le(e,t){return fe(e,Fe("variables_get_reporter","VAR",t,!0),"variables_get_reporter")}function Re(e,t,n){const r=pxt.blocks.reporterTypeForArgType(t),i=Fe(r,"VALUE",e,n);return"argument_reporter_custom"===r&&(i.mutation={typename:t}),i}function Me(e,t){return{kind:"field",name:e,value:t}}function Ue(e){const t=pe("math_arithmetic");return t.inputs=[Ne("A",0,c),Ne("B",e,c)],t.fields=[Me("OP","MINUS")],t}function Be(e,n=!1,r){let i=t.pxtInfo(e).callInfo;if(!i)return void ae(e);if(e.expression.kind===a.Identifier){const t=e.expression.text;if($.declaredEnums[t]){const n=o.enumsByName[t];if(n&&n.blockId)return Fe(n.blockId,"MEMBER",e.name.text)}else if($.declaredKinds[t]){return Fe($.declaredKinds[t].kindInfo.blockId,"MEMBER",e.name.text)}}const s=oe(i);if(r=s.blockId||r,s.blockCombine)return function(e,t){return He(e,t,null,"@get@")}(e,e);if("lists_length"===s.blockId||"text_length"===s.blockId){const n=pe(t.U.htmlEscape(s.blockId));return n.inputs=[Ne("VALUE",e.expression)],n}let c=t.U.htmlEscape(s.blockId||i.qName);const[l]=E(e),u=l&&t.pxtInfo(l).callInfo;if(n||!r&&!s.blockIdentity||u&&u.qName===s.blockIdentity)return{kind:"text",value:c};s.enumval&&u&&s.useEnumVal&&(c=s.enumval);const d=$.compInfo(i);if(r&&d&&d.thisParameter){const n=pe(r);return n.inputs=[Ne(t.U.htmlEscape(d.thisParameter.definitionName),e.expression,d.thisParameter.shadowBlockId)],n}return je(s.blockIdentity?o.apis.byQName[s.blockIdentity]:o.blocksById[r],c)}function je(e,n){let r=/(?:%|\$)([a-zA-Z0-9_]+)/.exec(e.attributes.block);const i=pe(t.U.htmlEscape(e.attributes.blockId));return i.fields=[{kind:"field",name:t.U.htmlEscape(r[1]),value:n}],i}function $e(t,n){let r,a=[];for(let e=0;e<ee.length&&(r=ee[e],!r.owner&&r.start>=t.pos&&r.end<=t.end&&(r.owner=t,r.ownerStatement=n,a.push(r)),!(r.start>t.end));e++);if(r&&r.isTrailingComment){const i=e.getLineAndCharacterOfPosition(s,t.end),o=e.getLineAndCharacterOfPosition(s,r.start);if(i.line===o.line){if(r.ownerStatement){r.ownerStatement.comment.splice(r.ownerStatement.comment.indexOf(r),1);for(const e of Q)e.comment.splice(e.comment.indexOf(r),1)}r.owner=t,r.ownerStatement=n,a.push(r)}}if(a.length){const e=[];if(J(t)){let t=[];const n=[];a.forEach(((e,r)=>{let o=e.owner&&e.start<e.owner.getStart();e.kind===i.MultiLine&&o&&(t.length&&(n.push(t),t=[]),r!=a.length-1)?n.push([e]):(t.push(e),e.followedByEmptyLine&&o&&(n.push(t),t=[]))})),a=t,n.forEach((t=>{const n=X();e.push(n),Q.push({comment:t,refId:n})}))}n&&(e.length&&(n.data?n.data+=";"+e.join(";"):n.data=e.join(";")),a&&a.length&&(n.comment?n.comment=n.comment.concat(a):n.comment=a))}}function Ke(n,i,s,_=!1,m=!1){const g=n;let h,y=!1;const x=b(g,$,_,m);if(x)h=ze(g,void 0,x);else switch(g.kind){case a.Block:return Qe(g.statements,i,m);case a.ExpressionStatement:return Ke(g.expression,i,s||g,_,m);case a.VariableStatement:if(h=Qe(g.declarationList.declarations,void 0,!1,s||g),!h)return k();y=!0;break;case a.FunctionExpression:case a.ArrowFunction:return function(e,t){return Ke(e.body,t)}(g,i);case a.BinaryExpression:h=function(e){e.left.text;switch(e.operatorToken.kind){case a.EqualsToken:return e.left.kind===a.Identifier?qe(e,e.left,e.right):e.left.kind==a.PropertyAccessExpression?Ve(e,e.left,e.right,"@set@"):function(e,t,n){const r=de("lists_index_set",e);return r.inputs=[Ne("LIST",t.expression),Ne("INDEX",t.argumentExpression,c),Ne("VALUE",n)],r}(e,e.left,e.right);case a.PlusEqualsToken:if(De(e)){const t=de("variables_set",e),n=et(e.left);return Xe(n,v.InBlocksOnly),t.inputs=[fe("VALUE",we(e),c)],t.fields=[Me("VAR",n)],t}return e.left.kind==a.PropertyAccessExpression?Ve(e,e.left,e.right,"@change@"):qe(e,e.left,e.right,!0);case a.MinusEqualsToken:const n=de("variables_change",e);return n.inputs=[fe("VALUE",Ue(e.right),c)],n.fields=[Me("VAR",et(e.left))],n;default:return void ae(e,t.Util.lf("Unsupported operator token in statement {0}",a[e.operatorToken.kind]))}}(g);break;case a.PostfixUnaryExpression:case a.PrefixUnaryExpression:h=function(e){const t=e.operator===a.PlusPlusToken;if(!t&&e.operator!==a.MinusMinusToken)return void ae(e);return qe(e,e.operand,t?1:-1,!0)}(g);break;case a.VariableDeclaration:const n=g;if(S(n))return function(e){Y.push([et(e.name),e])}(n),k();h=function(e){if(function(e){if(e.name.kind!==a.Identifier)return ae(e,t.Util.lf("Variable declarations may not use binding patterns")),!1;if(!e.initializer)return ae(e,t.Util.lf("Variable declarations must have an initializer")),!1;return!0}(e))return qe(e,e.name,e.initializer);return}(g);break;case a.WhileStatement:h=function(e){const t=de("device_while",e);return t.inputs=[Je("COND",e.expression)],t.handlers=[{name:"DO",statement:Ke(e.statement)}],t}(g);break;case a.IfStatement:h=function(e){let t=We(e);const n=de("controls_if",e);if(n.mutation={elseif:(t.ifStatements.length-1).toString(),else:t.elseStatement?"1":"0"},n.inputs=[],n.handlers=[],t.ifStatements.forEach(((e,t)=>{let r=Ke(e.thenStatement);n.inputs.push(Je("IF"+t,e.expression)),n.handlers.push({name:"DO"+t,statement:r})})),t.elseStatement){let e=Ke(t.elseStatement);n.handlers.push({name:"ELSE",statement:e})}return n}(g);break;case a.ForStatement:h=function(t){const n=t.initializer,r=(n.declarations[0].name.text,t.condition),i=et(n.declarations[0].name);let o;if(r.operatorToken.kind!==a.LessThanToken||l(t.statement))if(o=de("pxt_controls_for",t),o.fields=[],o.inputs=[],o.handlers=[],o.inputs=[Le("VAR",i)],r.operatorToken.kind===a.LessThanToken){const e=D(r.right);if(e.kind===a.NumericLiteral){const t=Ie(parseFloat(e.text)-1+"");o.inputs.push(fe("TO",t,d))}else{const t=pe("math_arithmetic");t.fields=[Me("OP","MINUS")],t.inputs=[Ne("A",e,c),Ne("B",1,c)],o.inputs.push(fe("TO",t,d))}}else r.operatorToken.kind===a.LessThanEqualsToken&&o.inputs.push(Ne("TO",r.right,d));else o=de("controls_repeat_ext",t),o.fields=[],o.inputs=[Ne("TIMES",r.right,d)],o.handlers=[];const s=Ke(t.statement);return o.handlers=[{name:"DO",statement:s}],o;function l(t){return t.kind===a.Identifier&&et(t)===i||e.forEachChild(t,l)}}(g);break;case a.ForOfStatement:h=function(e){const t=et(e.initializer.declarations[0].name),n=de("pxt_controls_for_of",e);n.inputs=[Ne("LIST",e.expression),Le("VAR",t)];const r=Ke(e.statement);return n.handlers=[{name:"DO",statement:r}],n}(g);break;case a.FunctionDeclaration:h=function(e){const t=et(e.name);$.localReporters.push(e.parameters.map((e=>({name:e.name.getText(),type:e.type.getText()}))));const n=Ke(e.body);let r;$.localReporters.pop(),r=de("function_definition",e),r.mutation={name:t},e.parameters&&(r.mutationChildren=[],e.parameters.forEach((e=>{const n=e.name.getText();let i=j(e.type.getText());pxt.U.endsWith(i,"[]")&&(i="Array"),r.mutationChildren.push({nodeName:"arg",attributes:{name:n,type:i,id:$.functionParamIds[t][n]}})})));return r.handlers=[{name:"STACK",statement:n}],r}(g);break;case a.CallExpression:h=function(n,i){const s=t.pxtInfo(n).callInfo,_=oe(s);if("Math.pow"==s.qName){const e=pe("math_arithmetic");return e.inputs=[fe("A",Te(n.arguments[0]),c),fe("B",Te(n.arguments[1]),c)],e.fields=[Me("OP","POWER")],e}if(pxt.Util.startsWith(s.qName,"Math.")){const e=s.qName.substring(5);if(R(e)){let t;if(B(e))t=pe("math_js_round");else{let n;t=pe("math_js_op"),n=M(e)?"unary":U(e)?"infix":"binary",t.mutation={"op-type":n}}return t.inputs=s.args.map(((e,t)=>fe("ARG"+t,Te(e),"math_number"))),t.fields=[Me("OP",e)],t}}if(_.blockId===t.PAUSE_UNTIL_TYPE){const e=de(t.PAUSE_UNTIL_TYPE,n),r=n.arguments[0];let i;return i=r.body.kind===a.Block?r.body.statements[0].expression:r.body,e.inputs=[fe("PREDICATE",Te(i),"logic_boolean")],e}if(!_.blockId||!_.block){const e=pxt.blocks.builtinFunctionInfo[s.qName];if(!e){const e=et(n.expression);if($.declaredFunctions[e]){let t,r=!0;if(s.isExpression){const[e]=E(n);r=e&&e.kind===a.ExpressionStatement}return t=de(r?"function_call":"function_call_output",n),s.args.length&&(t.mutationChildren=[],t.inputs=[],$.declaredFunctions[e].parameters.forEach(((n,r)=>{const i=n.name.getText(),a=$.functionParamIds[e][i];let o=j(n.type.getText());pxt.U.endsWith(o,"[]")&&(o="Array"),t.mutationChildren.push({nodeName:"arg",attributes:{name:i,type:o,id:a}});const c=fe(a,Te(s.args[r]));t.inputs.push(c)}))),t.mutation={name:e},t}return ze(n)}_.blockId=e.blockId}if(_.imageLiteral||_.gridLiteral)return function(e,n){let r=e.arguments[0];if(r.kind!=a.StringLiteral&&r.kind!=a.NoSubstitutionTemplateLiteral)return void ae(e);const i=oe(n),o=de(i.blockId,e);o.fields=[];const s=(r.text||"").replace(/\s+/g,""),c=(i.imageLiteralColumns||5)*(i.imageLiteral||i.gridLiteral),l=i.imageLiteralRows||5,u=c*l;if(u!=s.length)return void ae(e,t.Util.lf("Invalid image pattern ({0} expected vs {1} actual)",u,s.length));let d="";for(let e=0;e<l;++e){for(let t=0;t<c;++t)d+=/[#*1]/.test(s[e*c+t])?"#":".";d+="\n"}return o.fields.push(Me("LEDS",`\`${d}\``)),o}(n,s);e.isFunctionLike(s.decl);const m=O(s,$.blocks),g=$.blocks.apis.byQName[s.decompilerBlockAlias||s.qName],h=pxt.blocks.compileInfo(g),y=i?pe(_.blockId):de(_.blockId,n),v=e=>(y.inputs||(y.inputs=[])).push(e),b=e=>(y.fields||(y.fields=[])).push(e);"Math.max"==s.qName&&b({kind:"field",name:"op",value:"max"});let x=0;if(m.forEach(((e,n)=>{let i,m=e.value;const g=e.param,k=e.info,S=h.parameters[h.thisParameter?n-1:n],C=S&&S.range;if(C){const e=C.min,t=C.max;i={min:e.toString(),max:t.toString()}}if(0===n&&_.defaultInstance){if(m.getText()===_.defaultInstance)return;y.mutation={showing:"true"}}if(_.mutatePropertyEnum&&n===s.args.length-2)return;let E;if(g&&g.isOptional&&++x,g&&g.shadowBlockId&&(E=o.blocksById[g.shadowBlockId]),m.kind===a.CallExpression){const e=t.pxtInfo(m).callInfo,n=e&&oe(e);n&&"TD_ID"===n.shim&&k.isEnum&&(m=D(e.args[0]))}if(g&&k&&k.isEnum&&m.kind===a.Identifier)b(Me(t.U.htmlEscape(g.definitionName),t.pxtInfo(m).commentAttrs.enumIdentity));else if(g&&g.fieldOptions&&g.fieldOptions[r.DecompileArgumentAsString])b(Me(t.U.htmlEscape(g.definitionName),t.Util.htmlEscape(m.getText())));else switch(m.kind){case a.FunctionExpression:case a.ArrowFunction:const e=function(e){const n=T(e);if(n)return{callbackproperties:n[0].join(","),renamemap:t.Util.htmlEscape(JSON.stringify(n[1]))};return}(m);let x=!1;if(e)y.mutation=e;else{let e=m;const t=o.blocksById[_.blockId].parameters[h.thisParameter?n-1:n],r=(e,t)=>{"reporter"===_.draggableParameters?v(function(e,t,n){const r=pxt.blocks.reporterTypeForArgType(n);return fe(e,Re(t,n,!0),r)}("HANDLER_DRAG_PARAM_"+e.name,t,e.type)):v(Le("HANDLER_DRAG_PARAM_"+e.name,t))};if(e.parameters.length&&(_.optionalVariableArgs?(y.mutation={numargs:e.parameters.length.toString()},e.parameters.forEach(((e,t)=>{y.mutation["arg"+t]=e.name.text}))):e.parameters.forEach(((e,n)=>{const i=t.handlerParameters[n];_.draggableParameters?r(i,e.name.text):b(Me("HANDLER_"+i.name,e.name.text))}))),_.draggableParameters){if(e.parameters.length<t.handlerParameters.length)for(let n=e.parameters.length;n<t.handlerParameters.length;n++){const e=t.handlerParameters[n];r(e,e.name)}"reporter"===_.draggableParameters&&($.localReporters.push(t.handlerParameters),x=!0)}}const S=Ke(m);(y.handlers||(y.handlers=[])).push({name:"HANDLER",statement:S}),x&&$.localReporters.pop();break;case a.PropertyAccessExpression:const C=t.pxtInfo(m).callInfo,D=t.U.htmlEscape(g.definitionName),A=oe(C);E&&"TD_ID"===E.attributes.shim?v(fe(D,Be(m,!1,g.shadowBlockId),g.shadowBlockId,i)):k&&k.isEnum||C&&(A.fixedInstance||A.blockIdentity===s.qName)?b(Me(D,Be(m,!0).value)):v(Ne(D,m,g.shadowBlockId,i));break;case a.BinaryExpression:if(g&&g.shadowOptions&&g.shadowOptions.toString){const e=m;if(e.operatorToken.kind===a.PlusToken&&function(e){if(e.kind===a.StringLiteral||e.kind===a.NoSubstitutionTemplateLiteral)return""===e.text;return!1}(e.left)){v(Ne(t.U.htmlEscape(g.definitionName),e.right,g.shadowBlockId||"text"));break}}v(Ne(t.U.htmlEscape(g.definitionName),m,g.shadowBlockId,i));break;default:let w;const N=t.U.htmlEscape(g.definitionName);let P=!0;if("Math.random"==s.qName)w=fe(N,function(e){switch(e.kind){case a.NumericLiteral:return Ie((parseInt(e.text)-1).toString());case a.BinaryExpression:const t=e;if(t.operatorToken.kind==a.PlusToken&&"1"==t.right.text)return Te(t.left);default:return Te(e)}}(m),c,i),P=!1;else if(I(m)){const e="text"==g.fieldEditor?m.text:m.getText(),n=g.shadowBlockId&&!function(e){switch(e){case c:case l:case u:case d:case p:case f:return!0;default:return!1}}(g.shadowBlockId);if(Ge(g)&&g.fieldOptions.onParentBlock)return void b(Me(N,e));if(n){const n=function(e){if(o.blocksById[e]){const t=pxt.blocks.compileInfo(o.blocksById[e]);if(!t.thisParameter&&1===t.parameters.length)return t.parameters[0]}return}(g.shadowBlockId);if(n&&Ge(n)){const r=Fe(g.shadowBlockId,n.definitionName,e,!0);g.shadowOptions&&(r.mutation={customfield:t.Util.htmlEscape(JSON.stringify(g.shadowOptions))}),w=fe(N,r,g.shadowBlockId,i),P=!1}}}else if(m.kind===a.TaggedTemplateExpression&&g.fieldOptions&&g.fieldOptions[r.TaggedTemplate])return void b(Me(N,t.Util.htmlEscape(m.getText())));P&&(w=Ne(N,m,g.shadowBlockId,i)),v(w)}})),x)if(y.mutation||(y.mutation={}),_.compileHiddenArguments){let e=0,n=0;for(const r of m){const i=t.U.htmlEscape(r.param.definitionName),a=y.inputs.find((e=>e.name===i));r.param.isOptional?a&&!H(a)&&(n=Math.max(r.param.definitionIndex-e+1,n)):e++}y.mutation._expanded=n.toString()}else y.mutation._expanded=x.toString();return y}(g,_);break;case a.DebuggerStatement:h=function(e){return de(t.TS_DEBUGGER_TYPE,e)}(g);break;case a.BreakStatement:h=function(e){return de(t.TS_BREAK_TYPE,e)}(g);break;case a.ContinueStatement:h=function(e){return de(t.TS_CONTINUE_TYPE,e)}(g);break;case a.EmptyStatement:h=void 0;break;case a.EnumDeclaration:case a.ModuleDeclaration:return V(g,ee),k();case a.ReturnStatement:h=function(e){const n=de(t.TS_RETURN_STATEMENT_TYPE,e);e.expression?n.inputs=[fe("RETURN_VALUE",Te(e.expression),c)]:n.mutation={no_return_value:"true"};return n}(g);break;default:return void ae(g,i?t.Util.lf("Unsupported statement in block: {0}",a[g.kind]):t.Util.lf("Statement kind unsupported in blocks: {0}",a[g.kind]))}if(h){let e=h;for(;e.next;)e=e.next;e.next=k(),e.next&&(e.next.prev=e)}return y||$e(s||g,h),h;function k(){if(i&&i.length)return Ke(i.shift(),i,void 0,!1,m)}}function ze(e,n,r){m.errorOnGreyBlocks&&ae(e);const i=de(t.TS_STATEMENT_TYPE,e);i.mutation={},Ze(e);let o=e.getText();o=Ce(o,e.getStart(),e.getEnd()),V(e,ee),n&&(o=n+o);const s=[];if(e.kind===a.VariableStatement)for(const t of e.declarationList.declarations)s.push(et(t.name));else e.kind===a.VariableDeclaration&&s.push(et(e.name));s.length&&(i.mutation.declaredvars=s.join(","));const c=o.split("\n");return i.mutation.numlines=c.length.toString(),r&&m.includeGreyBlockMessages&&(i.mutation.error=t.U.htmlEscape(r)),c.forEach(((e,n)=>{i.mutation[`line${n}`]=t.U.htmlEscape(e)})),i}function Je(n,r){if(function(n){const r=D(n);switch(r.kind){case a.TrueKeyword:case a.FalseKeyword:case a.Identifier:case a.ElementAccessExpression:return;case a.BinaryExpression:return i(r);case a.CallExpression:return o(r);case a.PrefixUnaryExpression:if(r.operator===a.ExclamationToken)return;default:return t.Util.lf("Conditions must evaluate to booleans or identifiers")}function i(e){switch(e.operatorToken.kind){case a.EqualsEqualsToken:case a.EqualsEqualsEqualsToken:case a.ExclamationEqualsToken:case a.ExclamationEqualsEqualsToken:case a.LessThanToken:case a.LessThanEqualsToken:case a.GreaterThanToken:case a.GreaterThanEqualsToken:case a.AmpersandAmpersandToken:case a.BarBarToken:return;default:return t.Util.lf("Binary expressions in conditionals must evaluate to booleans")}}function o(n){const r=t.pxtInfo(n).callInfo;if(r){const t=$.blocks.apis.byQName[r.qName];if(t&&"boolean"==t.retType)return;if(e.isIdentifier(n.expression)&&$.declaredFunctions[n.expression.text])return}return t.Util.lf("Only functions that return booleans are allowed as conditions")}}(r)){return fe(n,Ee(r),f)}return Ne(n,r,f)}function qe(e,t,n,r=!1,i=!1){const a=et(t);Xe(a,v.InBlocksOnly);const o=de(r?"variables_change":"variables_set",e.parent||e);return o.inputs=[Ne("VALUE",n,c)],o.fields=[Me("VAR",a)],o}function Ve(e,t,n,r){return He(e,t,n,r)}function He(e,n,r,i){const a=t.pxtInfo(n).callInfo,o=$.blocks.apis.byQName[a?a.qName:""];if(!o||!o.attributes.blockCombine)return void ae(n);const s=`${o.namespace}.${o.retType}.${i}`,c=$.blocks.blocks.find((e=>e.qName==s)),l=r?de(c.attributes.blockId,e):pe(c.attributes.blockId),u=c.attributes._def.parameters;let d=a.qName;return c.combinedProperties&&c.combinedProperties.forEach((e=>{0===e.indexOf(a.qName)&&"@"===e.charAt(a.qName.length)&&(d=e)})),l.inputs=[Ne(u[0].name,n.expression)],l.fields=[Me(u[1].name,d)],r&&l.inputs.push(Ne(u[2].name,r)),l}function Ge(e){return e&&e.fieldOptions&&e.fieldOptions[r.DecompileLiterals]}function We(e){let t={ifStatements:[{expression:e.expression,thenStatement:e.thenStatement}],elseStatement:e.elseStatement};if(e.elseStatement&&e.elseStatement.kind==a.IfStatement){let n=We(e.elseStatement);t.ifStatements=t.ifStatements.concat(n.ifStatements),t.elseStatement=n.elseStatement}return t}function Qe(t,n,r=!1,i,o=!1){const s=[],c=n||[];for(let e=t.length-1;e>=0;e--){const n=t[e];(n.kind===a.FunctionDeclaration||n.kind==a.ExpressionStatement&&_e(n))&&!b(n,$,!1,r)?s.unshift(n):c.unshift(n)}const l=[],u={};for(const e of s){const t=e.kind===a.FunctionDeclaration?void 0:se(e);t&&u[t]?l.push(Ke(e,void 0,void 0,!1,!1)):(u[t]=!0,l.push(Ke(e,void 0,void 0,!1,r)))}if(l.forEach(me),c.length){const t=c.shift(),n=Ke(t,c,i,!1,r);if(o){let r=n,i=t;if(Y.forEach((([e,n])=>{if(W[e]===v.InBlocksOnly)return;let a;n.initializer;a=W[e]===v.InTextBlocks?ze(n,"let "):qe(t,n.name,n.initializer,!1,!0),a.next=r,r=a,i=n,$e(i.parent,r)})),r){const t=de(e.pxtc.ON_START_TYPE,i);return t.handlers=[{name:"HANDLER",statement:r}],t}Ye(n)}return n}o&&Ye(void 0)}function Ye(t){m.alwaysEmitOnStart&&(ke(e.pxtc.ON_START_TYPE,t),Se())}function Xe(e,t){W[e]!==v.InTextBlocks&&(W[e]=t)}function Ze(t){e.forEachChild(t,(e=>{e.kind===a.Identifier&&Xe(et(e),v.InTextBlocks),Ze(e)}))}function et(e){if(g){const t=g.getRenameForPosition(e.getStart());if(t)return t.name}return e.text}},n.getLeadingComments=function(t,n,r){return K(n,r||e.getLeadingCommentRangesOfNode(t,n))},n.getTrailingComments=function(t,n){return K(n,e.getTrailingCommentRanges(n.getFullText(),t.end))},n.getCommentsForStatement=function(e,t){let n,r=[];for(let i=0;i<t.length&&(n=t[i],!n.owner&&n.start>=e.pos&&n.end<=e.end&&(n.owner=e,r.push(n)),!(n.start>e.end));i++);return r},n.buildCommentMap=q}(t.decompiler||(t.decompiler={}))}(e.pxtc||(e.pxtc={}))}(ts||(ts={})),function(e){!function(e){!function(e){function t(e,n){var r;switch(e){case"void":return"None";case"boolean":return"bool";case"string":return"str"}if(null===(r=n.byQName[e])||void 0===r?void 0:r.pyQName)return n.byQName[e].pyQName;const i=/^(?:Array<(.+)>)|(?:(.+)\[\])|(?:\[.+\])$/.exec(e);return i?`List[${t(i[1]||i[2],n)}]`:e}function n(e,t){return`\`\`\`${t?"python":"ts"}\n${e}\n\`\`\``}e.displayStringForSymbol=function(e,r,i){if(e){switch(e.kind){case 3:case 1:return function(e,r,i){let a="";3===e.kind?a+=r?"def ":"function ":a+="(method) ";a+=r?e.pyQName:e.qName;let o="";e.parameters&&e.parameters.length&&(o=e.parameters.map((e=>`${e.name}: ${r?e.pyTypeString:e.type}`)).join(", "));let s=e.retType||"void";r&&(s=t(s,i));return n(`${a}(${o}): ${s}`,r)}(e,r,i);case 6:case 7:return function(e,t){const r=t?e.pyQName:e.qName;if(6===e.kind)return n(`enum ${r}`,t);let i=`(enum member) ${r}`;e.attributes.enumval&&(i+=` = ${e.attributes.enumval}`);return n(i,!1)}(e,r);case 5:return function(e,t){return n(`namespace ${t?e.pyQName:e.qName}`,!1)}(e,r);case 9:return function(e,t){return n(`interface ${t?e.pyQName:e.qName}`,!1)}(e,r);case 8:return function(e,t){return n(`class ${t?e.pyQName:e.qName}`,t)}(e,r);case 4:return function(e,r,i){let a=r?e.pyQName:`let ${e.qName}`;if(e.retType){let o=e.retType;return r&&(o=t(o,i)),n(`${a}: ${o}`,r)}return n(a,r)}(e,r,i);case 2:return function(e,r,i){const a=`(property) ${r?e.pyQName:e.qName}`;if(e.retType){let o=e.retType;return r&&(o=t(o,i)),n(`${a}: ${o}`,!1)}return n(a,!1)}(e,r,i)}return`**${e.qName}**`}},e.displayStringForKeyword=function(e,t){return`\`\`\`${t?"py":"ts"}\n(keyword) ${e}\n\`\`\``}}(e.service||(e.service={}))}(e.pxtc||(e.pxtc={}))}(ts||(ts={})),function(e){!function(e){!function(t){const n={r0:0,r1:1,r2:2,r3:3,r4:4,r5:5,r6:6,r7:7,r8:8,r9:9,r10:10,r11:10,r12:12,sp:13,r13:13,lr:14,r14:14,pc:15,r15:15};class r extends e.assembler.AbstractProcessor{constructor(){super(),this.addEnc("$r0","R0-7",(e=>this.inrange(7,e,e))),this.addEnc("$r1","R0-7",(e=>this.inrange(7,e,e<<3))),this.addEnc("$r2","R0-15",(e=>this.inrange(15,e,7&e|(8&e)<<4))),this.addEnc("$r3","R0-15",(e=>this.inrange(15,e,e<<3))),this.addEnc("$r4","R0-7",(e=>this.inrange(7,e,e<<6))),this.addEnc("$r5","R0-7",(e=>this.inrange(7,e,e<<8))),this.addEnc("$r01","R0-7",(e=>this.inrange(7,e,e|e<<3))),this.addEnc("$i0","#0-255",(e=>this.inrange(255,e,e))),this.addEnc("$i1","#0-1020",(e=>this.inrange(255,e/4,e>>2))),this.addEnc("$i2","#0-510",(e=>this.inrange(127,e/4,e>>2))),this.addEnc("$i3","#0-7",(e=>this.inrange(7,e,e<<6))),this.addEnc("$i4","#0-31",(e=>this.inrange(31,e,e<<6))),this.addEnc("$i5","#0-124",(e=>this.inrange(31,e/4,e>>2<<6))),this.addEnc("$i6","#1-32",(e=>0==e?null:32==e?0:this.inrange(31,e,e<<6))),this.addEnc("$i7","#0-62",(e=>this.inrange(31,e/2,e>>1<<6))),this.addEnc("$i32","#0-2^32",(e=>1)),this.addEnc("$rl0","{R0-7,...}",(e=>this.inrange(255,e,e))),this.addEnc("$rl1","{LR,R0-7,...}",(e=>16384&e?this.inrange(255,-16385&e,256|255&e):this.inrange(255,e,e))),this.addEnc("$rl2","{PC,R0-7,...}",(e=>32768&e?this.inrange(255,-32769&e,256|255&e):this.inrange(255,e,e))),this.addEnc("$la","LABEL",(e=>this.inrange(255,e/4,e>>2))).isWordAligned=!0,this.addEnc("$lb","LABEL",(e=>this.inrangeSigned(127,e/2,e>>1))),this.addEnc("$lb11","LABEL",(e=>this.inrangeSigned(1023,e/2,e>>1))),this.addInst("adcs  $r0, $r1",16704,65472),this.addInst("add   $r2, $r3",17408,65280),this.addInst("add   $r5, pc, $i1",40960,63488),this.addInst("add   $r5, sp, $i1",43008,63488),this.addInst("add   sp, $i2",45056,65408).canBeShared=!0,this.addInst("adds  $r0, $r1, $i3",7168,65024),this.addInst("adds  $r0, $r1, $r4",6144,65024),this.addInst("adds  $r01, $r4",6144,65024),this.addInst("adds  $r5, $i0",12288,63488),this.addInst("adr   $r5, $la",40960,63488),this.addInst("ands  $r0, $r1",16384,65472),this.addInst("asrs  $r0, $r1",16640,65472),this.addInst("asrs  $r0, $r1, $i6",4096,63488),this.addInst("bics  $r0, $r1",17280,65472),this.addInst("bkpt  $i0",48640,65280),this.addInst("blx   $r3",18304,65415),this.addInst("bx    $r3",18176,65408),this.addInst("cmn   $r0, $r1",17088,65472),this.addInst("cmp   $r0, $r1",17024,65472),this.addInst("cmp   $r2, $r3",17664,65280),this.addInst("cmp   $r5, $i0",10240,63488),this.addInst("eors  $r0, $r1",16448,65472),this.addInst("ldmia $r5!, $rl0",51200,63488),this.addInst("ldmia $r5, $rl0",51200,63488),this.addInst("ldr   $r0, [$r1, $i5]",26624,63488),this.addInst("ldr   $r0, [$r1, $r4]",22528,65024),this.addInst("ldr   $r5, [pc, $i1]",18432,63488),this.addInst("ldr   $r5, $la",18432,63488),this.addInst("ldr   $r5, [sp, $i1]",38912,63488).canBeShared=!0,this.addInst("ldr   $r5, [sp]",38912,63488).canBeShared=!0,this.addInst("ldrb  $r0, [$r1, $i4]",30720,63488),this.addInst("ldrb  $r0, [$r1, $r4]",23552,65024),this.addInst("ldrh  $r0, [$r1, $i7]",34816,63488),this.addInst("ldrh  $r0, [$r1, $r4]",23040,65024),this.addInst("ldrsb $r0, [$r1, $r4]",22016,65024),this.addInst("ldrsh $r0, [$r1, $r4]",24064,65024),this.addInst("lsls  $r0, $r1",16512,65472),this.addInst("lsls  $r0, $r1, $i4",0,63488),this.addInst("lsrs  $r0, $r1",16576,65472),this.addInst("lsrs  $r0, $r1, $i6",2048,63488),this.addInst("mov   $r2, $r3",17920,65280),this.addInst("movs  $r0, $r1",0,65472),this.addInst("movs  $r5, $i0",8192,63488),this.addInst("muls  $r0, $r1",17216,65472),this.addInst("mvns  $r0, $r1",17344,65472),this.addInst("negs  $r0, $r1",16960,65472),this.addInst("nop",18112,65535),this.addInst("orrs  $r0, $r1",17152,65472),this.addInst("pop   $rl2",48128,65024),this.addInst("push  $rl1",46080,65024),this.addInst("rev   $r0, $r1",47616,65472),this.addInst("rev16 $r0, $r1",47680,65472),this.addInst("revsh $r0, $r1",47808,65472),this.addInst("rors  $r0, $r1",16832,65472),this.addInst("sbcs  $r0, $r1",16768,65472),this.addInst("sev",48960,65535),this.addInst("stm   $r5!, $rl0",49152,63488),this.addInst("stmia $r5!, $rl0",49152,63488),this.addInst("stmea $r5!, $rl0",49152,63488),this.addInst("str   $r0, [$r1, $i5]",24576,63488).canBeShared=!0,this.addInst("str   $r0, [$r1]",24576,63488).canBeShared=!0,this.addInst("str   $r0, [$r1, $r4]",20480,65024),this.addInst("str   $r5, [sp, $i1]",36864,63488).canBeShared=!0,this.addInst("str   $r5, [sp]",36864,63488).canBeShared=!0,this.addInst("strb  $r0, [$r1, $i4]",28672,63488),this.addInst("strb  $r0, [$r1, $r4]",21504,65024),this.addInst("strh  $r0, [$r1, $i7]",32768,63488),this.addInst("strh  $r0, [$r1, $r4]",20992,65024),this.addInst("sub   sp, $i2",45184,65408),this.addInst("subs  $r0, $r1, $i3",7680,65024),this.addInst("subs  $r0, $r1, $r4",6656,65024),this.addInst("subs  $r01, $r4",6656,65024),this.addInst("subs  $r5, $i0",14336,63488),this.addInst("svc   $i0",57088,65280),this.addInst("sxtb  $r0, $r1",45632,65472),this.addInst("sxth  $r0, $r1",45568,65472),this.addInst("tst   $r0, $r1",16896,65472),this.addInst("udf   $i0",56832,65280),this.addInst("uxtb  $r0, $r1",45760,65472),this.addInst("uxth  $r0, $r1",45696,65472),this.addInst("wfe",48928,65535),this.addInst("wfi",48944,65535),this.addInst("yield",48912,65535),this.addInst("cpsid i",46706,65535),this.addInst("cpsie i",46690,65535),this.addInst("beq   $lb",53248,65280),this.addInst("bne   $lb",53504,65280),this.addInst("bcs   $lb",53760,65280),this.addInst("bcc   $lb",54016,65280),this.addInst("bmi   $lb",54272,65280),this.addInst("bpl   $lb",54528,65280),this.addInst("bvs   $lb",54784,65280),this.addInst("bvc   $lb",55040,65280),this.addInst("bhi   $lb",55296,65280),this.addInst("bls   $lb",55552,65280),this.addInst("bge   $lb",55808,65280),this.addInst("blt   $lb",56064,65280),this.addInst("bgt   $lb",56320,65280),this.addInst("ble   $lb",56576,65280),this.addInst("bhs   $lb",53760,65280),this.addInst("blo   $lb",54016,65280),this.addInst("b     $lb11",57344,63488),this.addInst("bal   $lb11",57344,63488),this.addInst("bl    $lb",61440,63488,!0),this.addInst("bb    $lb",57344,63488,!0),this.addInst("ldlit   $r5, $i32",18432,63488)}toFnPtr(t,n,r){return e.target.runtimeIsARM&&/::/.test(r)?t+n&-2:t+n|1}wordSize(){return 4}is32bit(e){return"bl"==e.name||"bb"==e.name}postProcessAbsAddress(e,t){return t^=1,t-=e.baseOffset}emit32(t,n,r){let i=!!(n%2);i&&(n=n+1&-4);let a=n>>1;if(e.assert(null!=a),(0|a)!=a||!(-2097152<a&&a<2097152))return e.assembler.emitErr("jump out of range",r);let o=2047&a,s=a>>11&1023;return{opcode:4026531840&a?62464|s:61440|s,opcode2:i?59392|o:63488|o,stack:0,numArgs:[n],labelName:r}}expandLdlit(t){let n,r=!1,i=[],a={},o=1;for(let s=0;s<t.lines.length;++s){let c=t.lines[s];if(i.push(c),"instruction"==c.type&&c.instruction&&"ldlit"==c.instruction.name){if(!n){let e=c.location+900,i=s+1;for(;i<t.lines.length&&!(t.lines[i].location>e);++i){let e=t.lines[i].getOp();("b"==e||"bb"==e||"pop"==e&&"pc"==t.lines[i].words[2])&&(n=t.lines[i])}if(n)r=!1;else for(r=!0;--i>s;)if("instruction"==t.lines[i].type){n=t.lines[i];break}}let i=c.words[1],l="#"+c.words[3],u=e.U.lookup(a,l);u||(u="_ldlit_"+ ++o,a[l]=u),c.ldlitLabel=c.words[3],c.update(`ldr ${i}, ${u} ; ${c.ldlitLabel}`)}if(c===n){n=null;let e=[],s="_jmpwords_"+ ++o;r&&e.push("bb "+s),e.push(".object PUSH"),e.push(".balign 4");for(let t of Object.keys(a)){let n=a[t];e.push(n+": .word "+t.slice(1))}r&&e.push(s+":"),e.push(".object POP");for(let n of e){t.buildLine(n,i);let e=i[i.length-1];e.scope=c.scope,e.lineNo=c.lineNo}a={}}}t.lines=i}getAddressFromLabel(e,t,n,r=!1){let i=e.lookupLabel(n);if(null==i)return null;let a=e.location()+4;return r&&(a&=4294967292),i-a}isPop(e){return 48128==e}isPush(e){return 46080==e}isAddSP(e){return 45056==e}isSubSP(e){return 45184==e}peephole(t,n,r){let a=this.encoders.$lb11,o=this.encoders.$lb;function s(e,t){return null!=e.encode(t.numArgs[0]+8)&&null!=e.encode(t.numArgs[0]-8)&&null!=e.encode(t.numArgs[0])}let c=t.getOp(),l=!1;"bne"!=c&&"beq"!=c||("b"==n.getOp()&&0==t.numArgs[0]&&(l=!0),"bb"==n.getOp()&&2==t.numArgs[0]&&(l=!0)),"bb"==c&&s(a,t)?t.update("b "+t.words[1]):"b"==c&&-2==t.numArgs[0]?t.update(""):"bne"==c&&l&&s(o,n)?(t.update("beq "+n.words[1]),n.update("")):"beq"==c&&l&&s(o,n)?(t.update("bne "+n.words[1]),n.update("")):"push"!=c||16384!=t.numArgs[0]||"push"!=n.getOp()||16384&n.numArgs[0]?"pop"==c&&"pop"==n.getOp()&&32768==n.numArgs[0]?(t.update(t.text.replace("}",", pc}")),n.update("")):"push"==c&&"pop"==n.getOp()&&t.numArgs[0]==n.numArgs[0]?(e.assert(t.numArgs[0]>0),t.update(""),n.update("")):"push"==c&&"pop"==n.getOp()&&4==t.words.length&&4==n.words.length?(e.assert("{"==t.words[1]),t.update("mov "+n.words[2]+", "+t.words[2]),n.update("")):r&&"movs $r5, $i0"==t.getOpExt()&&"mov $r0, $r1"==n.getOpExt()&&t.numArgs[0]==n.numArgs[1]&&function(e,t){return!!("pop"==e.getOp()&&e.numArgs[0]&1<<t)}(r,t.numArgs[0])?(t.update("movs r"+n.numArgs[0]+", #"+t.numArgs[1]),n.update("")):"pop"==c&&i(t)>=0&&"push"==n.getOp()&&i(t)==i(n)?(t.update("ldr r"+i(t)+", [sp, #0]"),n.update("")):"push"==c&&"ldr $r5, [sp, $i1]"==n.getOpExt()&&i(t)==n.numArgs[0]&&0==n.numArgs[1]?n.update(""):r&&"push"==c&&i(t)>=0&&function(e,t){return"movs $r5, $i0"==e.getOpExt()&&e.numArgs[0]!=t}(n,i(t))&&"pop"==r.getOp()&&i(t)==i(r)&&(t.update(""),r.update("")):(t.update(n.text.replace("{","{lr, ")),n.update(""))}registerNo(e){if(!e)return null;e=e.toLowerCase();const t=n[e];return void 0===t?null:t}testAssembler(){e.assembler.expectError(this,"lsl r0, r0, #8"),e.assembler.expectError(this,"push {pc,lr}"),e.assembler.expectError(this,"push {r17}"),e.assembler.expectError(this,"mov r0, r1 foo"),e.assembler.expectError(this,"movs r14, #100"),e.assembler.expectError(this,"push {r0"),e.assembler.expectError(this,"push lr,r0}"),e.assembler.expectError(this,"pop {lr,r0}"),e.assembler.expectError(this,"b #+11"),e.assembler.expectError(this,"b #+102400"),e.assembler.expectError(this,"bne undefined_label"),e.assembler.expectError(this,".foobar"),e.assembler.expect(this,"0200      lsls    r0, r0, #8\nb500      push    {lr}\n2064      movs    r0, #100        ; 0x64\nb401      push    {r0}\nbc08      pop     {r3}\nb501      push    {r0, lr}\nbd20      pop {r5, pc}\nbc01      pop {r0}\n4770      bx      lr\n0000      .balign 4\ne6c0      .word   -72000\nfffe\n"),e.assembler.expect(this,"4291      cmp     r1, r2\nd100      bne     l6\ne000      b       l8\n1840  l6: adds    r0, r0, r1\n4718  l8: bx      r3\n"),e.assembler.expect(this,"          @stackmark base\nb403      push    {r0, r1}\n          @stackmark locals\n9801      ldr     r0, [sp, locals@1]\nb401      push    {r0}\n9802      ldr     r0, [sp, locals@1]\nbc01      pop     {r0}\n          @stackempty locals\n9901      ldr     r1, [sp, locals@1]\n9102      str     r1, [sp, base@0]\n          @stackempty locals\nb002      add     sp, #8\n          @stackempty base\n"),e.assembler.expect(this,"b090      sub sp, #4*16\nb010      add sp, #4*16\n"),e.assembler.expect(this,'6261      .string "abc"\n0063      \n'),e.assembler.expect(this,'6261      .string "abcde"\n6463      \n0065      \n'),e.assembler.expect(this,"3042      adds r0, 0x42\n1c0d      adds r5, r1, #0\nd100      bne #0\n2800      cmp r0, #0\n6b28      ldr r0, [r5, #48]\n0200      lsls r0, r0, #8\n2063      movs r0, 0x63\n4240      negs r0, r0\n46c0      nop\nb500      push {lr}\nb401      push {r0}\nb402      push {r1}\nb404      push {r2}\nb408      push {r3}\nb520      push {r5, lr}\nbd00      pop {pc}\nbc01      pop {r0}\nbc02      pop {r1}\nbc04      pop {r2}\nbc08      pop {r3}\nbd20      pop {r5, pc}\n9003      str r0, [sp, #4*3]\n")}}function i(t){e.assert("push"==t.getOp()||"pop"==t.getOp());let n=0,r=-1,i=t.numArgs[0];for(;i>0;)1&i&&(r=-1==r?n:-2),i>>=1,n++;return r>=0?r:-1}t.ThumbProcessor=r}(e.thumb||(e.thumb={}))}(e.pxtc||(e.pxtc={}))}(ts||(ts={})),function(e){!function(t){!function(n){let r,i=t.Util;i.assert;!function(e){e[e.None=0]="None",e[e.NumberLiteral=1]="NumberLiteral",e[e.PointerLiteral=2]="PointerLiteral",e[e.RuntimeCall=3]="RuntimeCall",e[e.ProcCall=4]="ProcCall",e[e.SharedRef=5]="SharedRef",e[e.SharedDef=6]="SharedDef",e[e.FieldAccess=7]="FieldAccess",e[e.Store=8]="Store",e[e.CellRef=9]="CellRef",e[e.Sequence=10]="Sequence",e[e.JmpValue=11]="JmpValue",e[e.Nop=12]="Nop",e[e.InstanceOf=13]="InstanceOf"}(r=n.EK||(n.EK={}));let a,o,s=0;class c{isExpr(){return!1}isStmt(){return!1}getId(){return this._id||(this._id=++s),this._id}}n.Node=c;class l extends c{constructor(e,t,n){super(),this.exprKind=e,this.args=t,this.data=n,this.callingConvention=0}static clone(e){let t=new l(e.exprKind,e.args?e.args.slice(0):null,e.data);return e.jsInfo&&(t.jsInfo=e.jsInfo),e.totalUses&&(t.totalUses=e.totalUses,t.currUses=e.currUses),t.callingConvention=e.callingConvention,t.mask=e.mask,t.isStringLiteral=e.isStringLiteral,t}reset(){this.currUses=0,this.prevTotalUses&&(this.totalUses=this.prevTotalUses)}ptrlabel(){return this.jsInfo instanceof u?this.jsInfo:null}hexlit(){const e=this.jsInfo;return null!=e.hexlit?e.hexlit:null}isExpr(){return!0}isPure(){return this.isStateless()||this.exprKind==r.CellRef}isLiteral(){switch(this.exprKind){case r.NumberLiteral:case r.PointerLiteral:return!0;default:return!1}}isStateless(){switch(this.exprKind){case r.NumberLiteral:case r.PointerLiteral:case r.SharedRef:return!0;default:return!1}}sharingInfo(){let e=this,t=this.getId();return this.exprKind!=r.SharedRef&&this.exprKind!=r.SharedDef||(e=this.args[0],e?t=e.getId():e={currUses:"",totalUses:""}),`${e.currUses}/${e.totalUses} #${t}`}toString(){return d(this)}canUpdateCells(){switch(this.exprKind){case r.NumberLiteral:case r.PointerLiteral:case r.CellRef:case r.JmpValue:case r.SharedRef:case r.Nop:return!1;case r.SharedDef:case r.FieldAccess:case r.InstanceOf:return this.args[0].canUpdateCells();case r.RuntimeCall:case r.ProcCall:case r.Sequence:case r.Store:return!0;default:throw t.oops()}}}n.Expr=l,function(e){e[e.None=0]="None",e[e.Expr=1]="Expr",e[e.Label=2]="Label",e[e.Jmp=3]="Jmp",e[e.StackEmpty=4]="StackEmpty",e[e.Breakpoint=5]="Breakpoint",e[e.Comment=6]="Comment"}(a=n.SK||(n.SK={})),function(e){e[e.Always=1]="Always",e[e.IfZero=2]="IfZero",e[e.IfNotZero=3]="IfNotZero"}(o=n.JmpMode||(n.JmpMode={})),n.lblNumUsesJmpNext=-101;class u extends c{constructor(e,t){super(),this.stmtKind=e,this.expr=t}isStmt(){return!0}toString(){return d(this)}}function d(e){return function e(i){if(i.isExpr()){let n=i,a=n.args?n.args[0]:null;switch(n.exprKind){case r.NumberLiteral:case r.PointerLiteral:return n.data+"";case r.CellRef:return n.data.toString();case r.JmpValue:return"JMPVALUE";case r.Nop:return"NOP";case r.SharedRef:return`SHARED_REF(#${a.getId()})`;case r.SharedDef:return`SHARED_DEF(#${a.getId()} u(${a.totalUses}): ${e(a)})`;case r.FieldAccess:return`${e(a)}.${n.data.name}`;case r.RuntimeCall:return n.data+"("+n.args.map(e).join(", ")+")";case r.ProcCall:let i=n.data,o="";return o=null!=i.ifaceIndex?`IFACE@${i.ifaceIndex}`:null!=i.virtualIndex?`VTABLE@${i.virtualIndex}`:t.getDeclName(i.proc.action),o+"("+n.args.map(e).join(", ")+")";case r.Sequence:return"("+n.args.map(e).join("; ")+")";case r.InstanceOf:return"("+e(n.args[0])+" instanceof "+n.data.id+")";case r.Store:return`{ ${e(n.args[0])} := ${e(n.args[1])} }`;default:throw t.oops()}}else{let r=i,a=r.expr?e(r.expr):"{null}";switch(r.stmtKind){case n.SK.Expr:return"    "+a+"\n";case n.SK.Jmp:let e=`goto ${r.lblName}\n`;switch(r.jmpMode){case o.Always:return r.expr?`    { JMPVALUE := ${a} } ${e}`:"    "+e;case o.IfZero:return`    if (! ${a}) ${e}`;case o.IfNotZero:return`    if (${a}) ${e}`;default:throw t.oops()}case n.SK.StackEmpty:return"    ;\n";case n.SK.Breakpoint:return"    // brk "+r.breakpointInfo.id+"\n";case n.SK.Comment:return"    // "+r.expr.data+"\n";case n.SK.Label:return r.lblName+":\n";default:throw t.oops()}}}(e)}n.Stmt=u;class p{constructor(e,n,r){this.index=e,this.def=n,this.info=r,this.isarg=!1,this.iscap=!1,this._isLocal=!1,this._isGlobal=!1,this._debugType="?",this.isUserVariable=!1,this.bitSize=0,n&&(t.isInPxtModules(n)||(this.isUserVariable=!0),r&&t.setCellProps(this))}getName(){return t.getDeclName(this.def)}getDebugInfo(){return{name:this.getName(),type:this._debugType,index:this.index}}toString(){let e="";return this.def&&(e+=this.getName()||"?"),this.isarg&&(e="ARG "+e),"["+e+"]"}uniqueName(){return this.isarg?"arg"+this.index:this.getName().replace(/[^\w]/g,"_")+"___"+t.getNodeId(this.def)}isLocal(){return this._isLocal}isGlobal(){return this._isGlobal}loadCore(){return h(r.CellRef,null,this)}load(){let e=this.loadCore();return t.target.isNative&&!t.isStackMachine()&&0!=this.bitSize?6==this.bitSize?v("pxt::fromUInt",[e]):v("pxt::fromInt",[e]):this.isByRefLocal()?v("pxtrt::ldlocRef",[e]):e}isByRefLocal(){return this.isLocal()&&this.info.captured&&this.info.written}storeDirect(e){return h(r.Store,[this.loadCore(),e])}storeByRef(e){if(this.isByRefLocal())return v("pxtrt::stlocRef",[this.loadCore(),e]);if(t.target.isNative&&!t.isStackMachine()&&0!=this.bitSize){let t=6==this.bitSize?"pxt::toUInt":"pxt::toInt";return this.storeDirect(v(t,[e],1))}return this.storeDirect(e)}get isTemporary(){return!1}}n.Cell=p;class f extends p{constructor(e,t){super(e,null,null),this.index=e,this.owningProc=t,this.uid=f.unnamedCellCounter++}getName(){return"unnamed"+this.uid}uniqueName(){return this.getName()+"___U"+this.index}isByRefLocal(){return!1}get isTemporary(){return!0}}function _(e){const t=()=>{if(!e.args)return 0;let t=0;for(let n of e.args)t+=_(n);return e.mask&&e.mask.conversions&&(t+=4*e.mask.conversions.length),t};switch(e.exprKind){case r.NumberLiteral:return 2;case r.PointerLiteral:return 6;case r.RuntimeCall:return t()+2+2+4;case r.CellRef:return 2;case r.FieldAccess:return t()+(e.data.needsCheck?4:0)+2;case r.ProcCall:case r.SharedRef:case r.SharedDef:case r.Store:case r.Sequence:case r.JmpValue:case r.Nop:case r.InstanceOf:return 1e6;default:throw i.oops()}}function m(e){switch((e=l.clone(e)).exprKind){case r.PointerLiteral:case r.NumberLiteral:return e;case r.RuntimeCall:for(let t=0;t<e.args.length;++t)e.args[t]=m(e.args[t]);return e;case r.CellRef:const t=e.data;return t.repl?(t.replUses++,t.repl):e;case r.FieldAccess:return e.args[0]=m(e.args[0]),e;default:throw i.oops()}}f.unnamedCellCounter=0,n.UnnamedCell=f;function g(e,t){return new u(e,t)}function h(e,t,n){return new l(e,t,n)}function y(e,t){let n=h(r.PointerLiteral,null,e);return n.jsInfo=t,n}function v(e,t,n=0){let i=h(r.RuntimeCall,t,e);return n&&(i.mask={refMask:n}),i}function b(e,a=!1,o=!1){let s=!!a&&e.some((e=>e.canUpdateCells())),c=[];for(let t of i.reversed(e))t.isStateless()||(t.exprKind!=r.CellRef||s)&&(t.canUpdateCells()&&(s=!0),c.push(t));c.reverse(),t.isStackMachine()&&!o&&(c=[]);let l=[],u=e.map((e=>{if(c.indexOf(e)>=0){let t=e,i=e;return e.exprKind==r.SharedDef?(e.args[0].totalUses++,t=n.op(r.SharedRef,[e.args[0]])):(t=n.op(r.SharedRef,[e]),i=n.op(r.SharedDef,[e]),e.totalUses=2,e.currUses=0),l.push(i),t}return e}));return{precomp:l,flattened:u}}n.Procedure=class extends c{constructor(){super(...arguments),this.numArgs=0,this.info=null,this.seqNo=-1,this.isRoot=!1,this.locals=[],this.captured=[],this.args=[],this.parent=null,this.debugInfo=null,this.fillDebugInfo=null,this.classInfo=null,this.perfCounterName=null,this.perfCounterNo=0,this.body=[],this.lblNo=0,this.action=null,this.cachedJS=null,this.usingCtx=null}reset(){this.body=[],this.lblNo=0,this.locals=[],this.captured=[],this.args=[]}isGetter(){return this.action&&this.action.kind==e.SyntaxKind.GetAccessor}vtLabel(){return this.label()+(t.isStackMachine()?"":"_args")}label(){return t.getFunctionLabel(this.action)}toString(){return`\nPROC ${t.getDeclName(this.action)}\n${this.body.map((e=>e.toString())).join("")}\n`}emit(e){this.body.push(e)}emitExpr(e){this.emit(g(a.Expr,e))}mkLabel(e){let t=g(a.Label,null);return t.lblName="."+e+"_"+this.lblNo+++"_"+this.seqNo,t.lbl=t,t}emitLbl(e){this.emit(e)}emitLblDirect(e){let t=g(a.Label,null);t.lblName=e,t.lbl=t,this.emit(t)}getFullName(){let n=t.getDeclName(this.action);if(this.action){let t=e.pxtc.nodeLocationInfo(this.action);n=t.fileName.replace("pxt_modules/","")+"("+(t.line+1)+","+(t.column+1)+"): "+n}return n}getName(){return(this.action&&this.action.name?this.action.name.text:null)||"inline"}mkLocal(e,t){let n=new p(this.locals.length,e,t);return this.locals.push(n),n}mkLocalUnnamed(){let e=new f(this.locals.length,this);return this.locals.push(e),e}localIndex(e,t=!1){return this.captured.filter((t=>t.def==e))[0]||this.locals.filter((t=>t.def==e))[0]||(t?null:this.args.filter((t=>t.def==e))[0])}stackEmpty(){this.emit(g(a.StackEmpty,null))}emitJmpZ(e,t){this.emitJmp(e,t,o.IfZero)}emitJmp(e,t,n=o.Always,i=null){let s=g(a.Jmp,t);s.jmpMode=n,i&&i.exprKind==r.NumberLiteral&&(i=null),s.terminateExpr=i,"string"==typeof e?s.lblName=e:(s.lbl=e,s.lblName=s.lbl.lblName),this.emit(s)}inlineSelf(e){const{precomp:t,flattened:n}=b(e,!1,!0);i.assert(n.length==this.args.length),this.args.map(((e,t)=>{e.repl=n[t],e.replUses=0}));const a=m(this.inlineBody);return this.args.forEach(((e,t)=>{e.repl.exprKind==r.SharedRef&&(e.repl.args[0].prevTotalUses||(e.repl.args[0].prevTotalUses=e.repl.args[0].totalUses),e.repl.args[0].totalUses+=e.replUses-1),e.repl=null,e.replUses=0})),t.length?(t.push(a),h(r.Sequence,t)):a}resolve(){let e=(e,t)=>{if(e.args)for(let n=0;n<e.args.length;++n)e.args[n]=t(e.args[n])},a=t=>{switch(t.exprKind){case r.SharedDef:throw i.oops();case r.SharedRef:let e=t.args[0];if(e.totalUses)return e.totalUses--,t;{e.totalUses=-1,e.currUses=0,e.irCurrUses=0;let n=l.clone(t);return n.exprKind=r.SharedDef,n.args[0]=a(n.args[0]),n}}return e(t,a),t},o=t=>{if(t.exprKind==r.SharedRef)return t;switch(e(t,o),t.exprKind){case r.Sequence:t.args=t.args.filter(((e,n)=>n==t.args.length-1||!e.isPure()||(e.exprKind==r.SharedRef&&e.args[0].totalUses>0&&e.args[0].totalUses--,!1)))}return t},s=t=>{switch(t.exprKind){case r.SharedDef:let e=t.args[0];if(i.assert(e.totalUses<0,"arg.totalUses < 0"),i.assert(0===e.currUses,"arg.currUses === 0"),-1==e.totalUses)return s(e);e.totalUses=1;break;case r.SharedRef:return i.assert(t.args[0].totalUses>0,"e.args[0].totalUses > 0"),t.args[0].totalUses++,t;case r.PointerLiteral:const n=t.ptrlabel();n&&(n.lblNumUses||(n.lblNumUses=0),n.lblNumUses++)}return e(t,s),t},c=t=>{switch(t.exprKind){case r.SharedDef:e(t,c);case r.SharedRef:let n=t.args[0];return i.assert(n.totalUses>0,"arg.totalUses > 0"),1==n.totalUses?(i.assert(t.exprKind==r.SharedDef),n):(n.irCurrUses++,t);default:return e(t,c),t}};this.body=this.body.filter((e=>!e.expr||(e.expr=o(a(e.expr)),e.stmtKind!=n.SK.Expr||!e.expr.isPure())));let u=i.toDictionary(this.body.filter((e=>e.stmtKind==n.SK.Label)),(e=>e.lblName));for(let e=0;e<this.body.length;++e)this.body[e].stmtNo=e;for(let e of this.body)switch(e.expr&&(e.expr=s(e.expr)),e.stmtKind){case n.SK.Expr:break;case n.SK.Jmp:e.lbl=i.lookup(u,e.lblName),e.lbl||t.oops("missing label: "+e.lblName),e.lbl.lblNumUses?e.lbl.lblNumUses++:e.lbl.lblNumUses=1;break;case n.SK.StackEmpty:case n.SK.Label:case n.SK.Breakpoint:case n.SK.Comment:break;default:t.oops()}let d=[],p=null,f=!t.target.debugMode,m=null;for(let e of this.body)e.expr&&(e.expr=o(c(e.expr))),p&&p.lbl==e&&p.stmtKind==n.SK.Jmp&&e.stmtKind==n.SK.Label&&p.jmpMode==n.JmpMode.Always&&1==e.lblNumUses&&(e.lblNumUses=n.lblNumUsesJmpNext),p=e,e.stmtKind==n.SK.Breakpoint?d[e.breakpointInfo.id]=e.breakpointInfo:f&&(e.stmtKind==n.SK.Jmp?e.expr&&(m?f=!1:m=e.expr):e.stmtKind==n.SK.StackEmpty||(e.stmtKind==n.SK.Label?e.lblNumUses!=n.lblNumUsesJmpNext&&(f=!1):f=!1));if(f&&m){_(m)<=4*this.args.length+4+2+(t.target.isNative?4:30)&&(this.inlineBody=m)}pxt.options.debug&&pxt.debug(this.toString())}},n.iterExpr=function e(t,n){if(n(t),t.args)for(let r of t.args)e(r,n)},n.stmt=g,n.comment=function(e){return g(a.Comment,y(e,e))},n.op=h,n.numlit=function(e){return h(r.NumberLiteral,null,e)},n.shared=function(e){switch(e.exprKind){case r.SharedRef:e=e.args[0];break;case r.NumberLiteral:return e}return h(r.SharedRef,[e])},n.ptrlit=y,n.rtcall=v,n.rtcallMask=function(e,t,n,r){i.startsWith(e,"@nomask@")&&(e=e.slice(8),t=0);let a=v(e,r,t);return a.callingConvention=n,a},n.flattenArgs=b}(t.ir||(t.ir={}))}(e.pxtc||(e.pxtc={}))}(ts||(ts={})),function(e){!function(t){class n{constructor(e,t){this.wave=e,this.id=t,this.flags=0,this.resetAll()}refresh(){this.flags&=-9,!this.proc||this.usedActions||w(this.proc.action)?this.proc&&!this.proc.cachedJS?this.resetEmit():this.usedNodes&&(this.flags|=32):this.resetEmit(),this.classInfo&&this.classInfo.reset()}resetEmit(){this.flags&=-41,this.proc&&this.proc.classInfo&&this.proc.classInfo.ctor==this.proc&&(this.proc.classInfo.ctor=null),this.functionInfo=null,this.variableInfo=null,this.classInfo=null,this.callInfo=null,this.proc=null,this.cell=null,this.exprInfo=null,this.usedNodes=null,this.usedActions=null}resetTSC(){this.flags&=16,this.typeCache=null,this.symbolCache=null,this.commentAttrs=null,this.valueOverride=null,this.declCache=void 0,this.fullName=null,this.constantFolded=void 0}resetAll(){this.resetTSC(),this.resetEmit()}}let r;function i(e){return e<<2|2}t.PxtNode=n,function(e){e[e.Enum=0]="Enum",e[e.Number=1]="Number",e[e.String=2]="String",e[e.Boolean=3]="Boolean",e[e.Unsupported=4]="Unsupported"}(r||(r={})),t.taggedUndefined=0,t.taggedNull=i(1),t.taggedFalse=i(2),t.taggedNaN=i(3),t.taggedTrue=i(16),t.thumbArithmeticInstr={adds:!0,subs:!0,muls:!0,ands:!0,orrs:!0,eors:!0,lsls:!0,asrs:!0,lsrs:!0},t.numberArithmeticInstr={div:!0,mod:!0,le:!0,lt:!0,ge:!0,gt:!0,eq:!0,neq:!0};const a={"Array_::getAt":{name:"_pxt_array_get",argsFmt:["T","T","T"],value:0},"Array_::setAt":{name:"_pxt_array_set",argsFmt:["T","T","T","T"],value:0},"BufferMethods::getByte":{name:"_pxt_buffer_get",argsFmt:["T","T","T"],value:0},"BufferMethods::setByte":{name:"_pxt_buffer_set",argsFmt:["T","T","T","I"],value:0},"pxtrt::mapGetGeneric":{name:"_pxt_map_get",argsFmt:["T","T","S"],value:0},"pxtrt::mapSetGeneric":{name:"_pxt_map_set",argsFmt:["T","T","S","T"],value:0}};let o=t.ir.EK;t.SK=e.SyntaxKind,t.numReservedGlobals=1;let s=0,c=1;function l(n){if(n.pxt)return!!(16&n.pxt.flags);const r=e.getSourceFileOfNode(n);return!!r&&t.isPxtModulesFilename(r.fileName)}function u(e){if(e.pxt){const n=e.pxt;return n.wave!=c&&(n.wave=c,t.compileOptions&&t.compileOptions.skipPxtModulesTSC&&16&n.flags?t.compileOptions.skipPxtModulesEmit?n.refresh():n.resetEmit():n.resetAll()),n}{const t=new n(c,++s);return l(e)&&(t.flags|=16),e.pxt=t,t}}function d(e){return u(e).id}function p(t){return t?e.SyntaxKind[t.kind]:"<null>"}function f(e,t,n=!1){let r=new Error(t);if(r.ksEmitterUserError=!0,r.ksErrorCode=e,n&&j)return M||(M=t,B=e),r;throw r}function _(){return t.target.isNative&&t.target.nativeType==t.NATIVE_TYPE_VM}function m(){return t.target.isNative&&t.target.nativeType!=t.NATIVE_TYPE_VM}function g(){return t.target.isNative&&t.target.nativeType==t.NATIVE_TYPE_THUMB}function h(e){return m()?t.ir.rtcall("pxt::fromInt",[e]):e}function y(e){return m()?t.ir.rtcall("pxt::fromBool",[e]):e}function v(e){switch(e){case 0:return t.target.shortPointers?2:4;case 1:return 1;case 3:return 2;case 5:return 4;case 2:return 1;case 4:return 2;case 6:return 4;default:throw t.oops()}}function b(e){switch(e){case 1:case 3:case 5:return!0;case 2:case 4:case 6:return!1;default:throw t.oops()}}function x(e){switch(e.kind){case t.SK.TemplateHead:case t.SK.TemplateMiddle:case t.SK.TemplateTail:case t.SK.StringLiteral:case t.SK.NoSubstitutionTemplateLiteral:return!0;default:return!1}}function k(e){return e&&e.modifiers&&e.modifiers.some((e=>e.kind==t.SK.StaticKeyword))}function S(e){return e.modifiers&&e.modifiers.some((e=>e.kind==t.SK.ReadonlyKeyword))}function T(e,t){return e.explicitDefaults?e.explicitDefaults.indexOf(t)<0?null:e.paramDefl[t]:null}function C(e){if(!e)return null;switch(e.kind){case t.SK.MethodDeclaration:return"";case t.SK.Constructor:return"new/";case t.SK.GetAccessor:return"get/";case t.SK.SetAccessor:return"set/";default:return null}}function E(e){return C(e)+q(e)}function D(e){return null!=C(e)}function A(e){return e?D(e)?e:A(e.parent):null}function w(e){let n=e,r=!1;for(;;)switch(n=n.parent,n||f(9229,U("cannot determine parent of {0}",p(e))),n.kind){case t.SK.MethodDeclaration:case t.SK.Constructor:case t.SK.GetAccessor:case t.SK.SetAccessor:case t.SK.FunctionDeclaration:case t.SK.ArrowFunction:case t.SK.FunctionExpression:return n;case t.SK.WhileStatement:case t.SK.DoStatement:case t.SK.ForInStatement:case t.SK.ForOfStatement:case t.SK.ForStatement:r=!0;break;case t.SK.SourceFile:return r?R:null}}function N(e){return"objectFlags"in e}function I(e){return!!e&&(e.kind==t.SK.VariableDeclaration||e.kind==t.SK.BindingElement&&I(e.parent.parent))}function P(e){return!!e&&(I(e)&&!w(e)||e.kind==t.SK.PropertyDeclaration&&k(e))}function O(e){return!!e&&(e.kind==t.SK.Parameter||e.kind==t.SK.BindingElement&&O(e.parent.parent))}t.isInPxtModules=l,t.pxtInfo=u,t.getNodeId=d,t.stringKind=p,t.isStackMachine=_,t.needsNumberConversions=m,t.isThumb=g,t.sizeOfBitSize=v,t.isBitSizeSigned=b,t.setCellProps=function(n){var r;if(n._isLocal=I(r=n.def)&&!P(r)||O(n.def),n._isGlobal=P(n.def),!n.def.isThisParameter){let r=ee(n.def);r.flags&e.TypeFlags.Void&&t.oops("void-typed variable, "+n.toString()),n.bitSize=function(e){if(!e||!e.type)return 0;if(!de(ee(e)))return 0;if(e.type.kind!=t.SK.TypeReference)return 0;switch(e.type.typeName.getText()){case"int8":return 1;case"int16":return 3;case"int32":return 5;case"uint8":return 2;case"uint16":return 4;case"uint32":return 6;default:return 0}}(n.def),0!=n.bitSize?n._debugType=(b(n.bitSize)?"int":"uint")+8*v(n.bitSize):ue(r)?n._debugType="string":r.flags&e.TypeFlags.NumberLike&&(n._debugType="number")}n.isLocal()&&0!=n.bitSize&&(n.bitSize=0,f(9256,U("bit sizes are not supported for locals and parameters")))},t.isStatic=k,t.isReadOnly=S,t.getExplicitDefault=T,t.isObjectType=N;class F{constructor(e,t){this.id=e,this.decl=t,this.baseClassInfo=null,this.allfields=[],this.methods={},this.attrs=J(t),this.reset()}reset(){this.vtable=null,this.itable=null}get isUsed(){return!!(8&u(this.decl).flags)}allMethods(){const e=[];for(let t of Object.keys(this.methods))for(let n of this.methods[t])e.push(n);return e}usedMethods(){const e=[];for(let t of Object.keys(this.methods))for(let n of this.methods[t]){8&u(n).flags&&e.push(n)}return e}}t.ClassInfo=F;let L,R,M,U=t.assembler.lf,B=0,j=0;function $(e,n){const r=u(n);return null==r.fullName&&(r.fullName=t.getFullName(e,n.symbol)),r.fullName}function K(n){n.kind==t.SK.VariableDeclaration&&(n=n.parent.parent);let r=t=>{const n=e.getSourceFileOfNode(t);if(!n)return"";const r=e.getLeadingCommentRangesOfNode(t,n);if(!r)return"";return r.map((e=>n.text.slice(e.pos,e.end))).join("\n")};return n.symbol&&n.symbol.declarations&&n.symbol.declarations.length>1?n.symbol.declarations.map(r).join("\n"):r(n)}function z(e){let n="";for(let t of e.declarations)n+=K(t);return t.parseCommentString(n)}function J(e){const n=e?u(e):null;if(!n||2&n.flags)return t.parseCommentString("");if(n.commentAttrs)return n.commentAttrs;let r=t.parseCommentString(K(e));return r._name=q(e),n.commentAttrs=r,r}function q(e){return e.name&&e.name.kind==t.SK.Identifier?e.name.text:"???"}function V(t){if(N(t)&&t.objectFlags&e.ObjectFlags.Reference){let e=t;if(e.typeArguments&&e.typeArguments.length)return e.target}return null}function H(t){return!!N(t)&&(t.objectFlags&e.ObjectFlags.Reference&&t.symbol&&"Array"==t.symbol.name)}function G(t){return!!N(t)&&(!!(t.objectFlags&e.ObjectFlags.Interface)||!!(t.objectFlags&e.ObjectFlags.Anonymous))}function W(t){return!!t.isThisType||!!N(t)&&!!(t.objectFlags&e.ObjectFlags.Class||t.symbol&&t.symbol.flags&e.SymbolFlags.Class)}function Q(e){let t=V(e);return W(t||e)}function Y(t,n=-1){return H(t)?t.typeArguments[0]:L.getIndexTypeOfType(t,e.IndexKind.Number)}function X(e){return e}function Z(e){return null===e?t.taggedNull:void 0===e?t.taggedUndefined:!1===e?t.taggedFalse:!0===e?t.taggedTrue:isNaN(e)?t.taggedNaN:null}function ee(t){let n;const r=u(t);if(r.typeCache)return r.typeCache;if(e.isExpression(t)&&(n=L.getContextualType(t)),!n)try{n=L.getTypeAtLocation(t)}catch(e){f(9203,U("Unknown type for expression"))}return n?(r.typeCache=n,n):n}function te(t){if(!(t.flags&e.TypeFlags.Union))return r.Unsupported;let n,i=!0;return t.types.forEach((t=>{if(void 0===n)t.flags&e.TypeFlags.NumberLike?n=r.Number:t.flags&e.TypeFlags.BooleanLike?n=r.Boolean:t.flags&e.TypeFlags.StringLike?n=r.String:t.flags&e.TypeFlags.EnumLike&&(n=r.Enum);else switch(n){case r.Number:i=i&&!!(t.flags&e.TypeFlags.NumberLike);break;case r.Boolean:i=i&&!!(t.flags&e.TypeFlags.BooleanLike);break;case r.String:i=i&&!!(t.flags&e.TypeFlags.StringLike);break;case r.Enum:i=i&&!!(t.flags&e.TypeFlags.EnumLike)}})),i?n:r.Unsupported}function ne(t){let n=L.getSignatureFromDeclaration(t);return!(L.getReturnTypeOfSignature(n).flags&e.TypeFlags.Void)}function re(e){return!(!e||!e.name)}function ie(e){if(!e)return"";switch(e.kind){case t.SK.ModuleBlock:return ie(e.parent);case t.SK.ClassDeclaration:case t.SK.ModuleDeclaration:return ie(e.parent)+e.name.text+".";default:return""}}function ae(e){let n=re(e)?e.name.text:null;if(!n){if(e.kind!=t.SK.Constructor){for(let t=e.parent;t;t=t.parent)if(re(t))return ae(t)+".inline";return"inline"}n="constructor"}return ie(e.parent)+n}function oe(e){return ae(e).replace(/[^\w]+/g,"_")}function se(e){return oe(e)+"__P"+d(e)}t.getNodeFullName=$,t.getComments=K,t.parseCommentsOnSymbol=z,t.parseComments=J,t.getName=q,t.checkType=X,t.taggedSpecial=Z,t.getDeclName=ae,t.getFunctionLabel=se;class ce{constructor(e){this.decl=e,this.capturedVars=[]}get isUsed(){return!!(8&u(this.decl).flags)}}function le(e,t,n){return!!(e.flags&t)||te(e)===n}function ue(t){return le(t,e.TypeFlags.String|e.TypeFlags.StringLiteral,r.String)}function de(t){return le(t,e.TypeFlags.Number|e.TypeFlags.NumberLiteral,r.Number)}t.FunctionAddInfo=ce,t.compileBinary=function(n,r,i,s){t.compilerHooks.preBinary&&t.compilerHooks.preBinary(n,r,i),t.target=r.target,t.compileOptions=r,t.target.debugMode=!!r.breakpoints;const b=e.createDiagnosticCollection();L=n.getTypeChecker();let C=t.U.cpuUs(),N=[],K=[],V={},X={},te=null,re=null,ie=!1,le=[];if(c++,r.target.isNative){if(!r.extinfo||!r.extinfo.hexinfo)return{diagnostics:[{file:n.getSourceFiles()[0],start:0,length:0,category:t.DiagnosticCategory.Error,code:9043,messageText:U("The hex file is not available, please connect to internet and try again.")}],emittedFiles:[],emitSkipped:!0};let e=r.extinfo,i=r.target;if(e&&e.disabledDeps){const t=(r.otherMultiVariants||[]).find((e=>e.extinfo&&!e.extinfo.disabledDeps));t&&(pxt.debug(`using alternative extinfo (due to ${e.disabledDeps})`),e=t.extinfo,i=t.target)}t.hexfile.setupFor(i,e||t.emptyExtInfo()),t.hexfile.setupInlineAssembly(r)}let ge,he=new pe;function ye(){he.reset(),ge=null,i.breakpoints=[{id:0,isDebuggerStmt:!1,fileName:"bogus",start:0,length:0,line:0,column:0}],i.procCallLocations=[]}he.trace=r.trace,he.breakpoints=r.breakpoints,he.name=r.name,he.target=r.target,r.computeUsedSymbols&&(i.usedSymbols={},i.usedArguments={}),r.computeUsedParts&&(i.usedParts=[]);let ve=[];if(!r.forceEmit||0==i.diagnostics.length){let e=n.getSourceFiles().slice();const t=e.find((e=>e.fileName===pxt.MAIN_TS));t&&(e=e.filter((e=>e.fileName!==pxt.MAIN_TS)),e.push(t));const r=e.find((e=>e.fileName===pxt.TUTORIAL_CODE_STOP));r&&(e=e.filter((e=>e.fileName!==pxt.TUTORIAL_CODE_STOP)),e.push(r)),e.forEach((e=>{e.statements.forEach((e=>{ve.push(e)}))}))}let be=n.getSourceFiles().filter((e=>t.Util.endsWith(e.fileName,s)))[0],xe={kind:t.SK.FunctionDeclaration,parameters:[],name:{text:"<main>",pos:0,end:0},body:{kind:t.SK.Block,statements:ve},parent:be,pos:0,end:0};R=xe;const ke=u(xe);for(ke.flags|=3,rt(xe),N=[],ye(),ie=!0,xn(xe);kt(),!Ue(););!function(){let e=he.globals.slice(0);e.forEach(((e,t)=>e.index=t));const n=e=>0==e?10:v(e);e.sort(((e,t)=>n(e.bitSize)-n(t.bitSize)||e.index-t.index));let r=4*t.numReservedGlobals,i=0;for(let t of e){const e=_()?0:t.bitSize;let n=v(e);for(;r&n-1;)r++;i||0!=e||(i=r),t.index=r,r+=n}he.globalsWords=r+3>>2,he.nonPtrGlobals=i?i>>2:he.globalsWords}(),ie=!1,function(){for(let e of he.usedClassInfos)Be(e);let e=Object.keys(he.ifaceMemberMap);e.sort(t.U.strcmp),e.unshift(""),he.emitString(""),he.ifaceMembers=e,he.ifaceMemberMap={};let n=0;for(let t of e)he.ifaceMemberMap[t]=n++;for(let e of he.usedClassInfos)for(let t of e.itable)t.idx=Oe(t.name);for(let e of he.usedClassInfos)e.lastSubtypeNo=void 0,e.classNo=void 0;let r=pxt.BuiltInType.User0;const i=e=>{t.U.assert(!e.classNo),e.classNo=r++;for(let t of e.derivedClasses)t.isUsed&&i(t);e.lastSubtypeNo=r-1};for(let e of he.usedClassInfos){let t=e;for(;t.baseClassInfo;)t=t.baseClassInfo;t.classNo||i(t)}}();let Se=t.U.cpuUs();i.times.pass0=Se-C;let Te=b.getDiagnostics();ye(),ie=!1,he.finalPass=!0,kn(xe),t.U.assert(0==N.length),i.configData=[];for(let e of Object.keys(X))X["!"+e]||i.configData.push({name:e.replace(/^\!/,""),key:X[e].key,value:X[e].value});i.configData.sort(((e,t)=>e.key-t.key));let Ce=t.U.cpuUs();if(i.times.pass1=Ce-Se,yn(xe,(function(){if(r.noEmit)return;he.writeFile=(e,t)=>{i.outfiles[e]=t};for(let e of he.procs)e.cachedJS&&!e.inlineBody||e.resolve();t.target.isNative&&(he.procs=he.procs.filter((e=>!(e.inlineBody&&!e.info.usedAsIface&&!e.info.usedAsValue))));r.target.isNative?([...r.otherMultiVariants||[],r].forEach((({extinfo:e})=>{e.yotta&&he.writeFile("yotta.json",JSON.stringify(e.yotta,null,2)),e.codal&&he.writeFile("codal.json",JSON.stringify(e.codal,null,2)),e.platformio&&he.writeFile("platformio.json",JSON.stringify(e.platformio,null,2))})),r.target.nativeType==t.NATIVE_TYPE_VM?t.vmEmit(he,r,i):t.processorEmit(he,r,i)):t.jsEmit(he,i);he.writeFile=void 0})),i.times.passFinal=t.U.cpuUs()-Ce,r.ast){let e=t.U.cpuUs();t.annotate(n,s,t.target),i.times.passAnnotate=t.U.cpuUs()-e}return t.compileOptions=null,0==Te.length&&(Te=b.getDiagnostics()),t.compilerHooks.postBinary&&t.compilerHooks.postBinary(n,r,i),{diagnostics:Te,emittedFiles:void 0,emitSkipped:!!r.noEmit};function Ee(t,n,r,i,a,o,s){b.add(e.createDiagnosticForNode(n,{code:r,message:i,key:i.replace(/^[a-zA-Z]+/g,"_"),category:t},a,o,s))}function De(e,n,r,i,a,o){Ee(t.DiagnosticCategory.Error,e,n,r,i,a,o)}function Ae(t,n,r=9202){if(n)return f(r,n);t||f(r,U("Sorry, this language feature is not supported"));let i=p(t),a=!1,o=null;switch(t.kind){case e.SyntaxKind.ForInStatement:i=U("for in loops");break;case e.SyntaxKind.ForOfStatement:i=U("for of loops"),a=!0;break;case e.SyntaxKind.PropertyAccessExpression:i=U("property access");break;case e.SyntaxKind.DeleteExpression:i=U("delete");break;case e.SyntaxKind.GetAccessor:i=U("get accessor method"),a=!0;break;case e.SyntaxKind.SetAccessor:i=U("set accessor method"),a=!0;break;case e.SyntaxKind.TaggedTemplateExpression:i=U("tagged templates");break;case e.SyntaxKind.SpreadElement:i=U("spread");break;case e.SyntaxKind.TryStatement:case e.SyntaxKind.CatchClause:case e.SyntaxKind.FinallyKeyword:case e.SyntaxKind.ThrowStatement:i=U("throwing and catching exceptions");break;case e.SyntaxKind.ClassExpression:i=U("class expressions"),o=U("declare a class as class C {} not let C = class {}")}let s="";return s=a?U("{0} not currently supported",i):U("{0} not supported",e.SyntaxKind[t.kind]),o&&(s+=" - "+o),f(r,s)}function we(e){return d(e)+""}function Ne(e){const t=u(e);return t.functionInfo||(t.functionInfo=new ce(e)),t.functionInfo}function Ie(e){const t=u(e);return t.variableInfo||(t.variableInfo={}),t.variableInfo}function Pe(e,t=!1){let n=Ie(e);t&&(n.written=!0);let r=w(e);if(null==r||r==ge.action);else{let t=ge.action;for(;t&&t!=r;){let n=Ne(t);n.capturedVars.indexOf(e)<0&&n.capturedVars.push(e),t=w(t)}n.captured=!0}}function Oe(e,n=!1){return function(e,n,r,i,a){return me(e,i,a,(e=>{r&&(t.U.lookup(e.explicitlyUsedIfaceMembers,n)||(t.U.assert(!e.finalPass),e.explicitlyUsedIfaceMembers[n]=!0));let i=t.U.lookup(e.ifaceMemberMap,n);return null!=i||(t.U.assert(!e.finalPass),i=e.ifaceMemberMap[n]=-1,e.emitString(n)),i}))}(he,e,n,ie,re)}function Fe(t){t.flags&e.TypeFlags.Void&&f(9203,U("void-typed variables not supported"))}function Le(e){const n=u(e);Fe(ee(e)),n.cell||(n.cell=new t.ir.Cell(null,e,Ie(e))),he.globals.indexOf(n.cell)<0&&he.globals.push(n.cell)}function Re(e){if(P(e)){rt(e);const t=u(e);return t.cell||Le(e),t.cell}{let t=ge.localIndex(e);return t||(he.finalPass?f(9204,U("cannot locate identifer")):t=ge.mkLocal(e,Ie(e))),t}}function Me(e){return e.kind==t.SK.MethodDeclaration&&0==e.parameters.length&&"toString"==q(e)}function Ue(){ie=!1;const e=he.usedClassInfos.length;for(let e of he.usedClassInfos){for(let r of e.allMethods()){const e=u(r),i=Ne(r);8&e.flags?i.virtualParent&&it(i.virtualParent.decl):(i.virtualParent&&i.virtualParent.isUsed||Me(r)||(n=q(r),null!=t.U.lookup(he.explicitlyUsedIfaceMembers,n)))&&it(r)}const r=ht(e.decl);r&&it(r)}var n;return ie=!0,0==N.length&&e==he.usedClassInfos.length}function Be(e){if(t.assert(e.isUsed,"inf.isUsed"),e.vtable)return e.vtable;let n=e.baseClassInfo?Be(e.baseClassInfo).slice(0):[];e.derivedClasses=[],e.baseClassInfo&&e.baseClassInfo.derivedClasses.push(e);for(let r of e.usedMethods()){he.numMethods++;let i=Ne(r);const a=J(r);if(Me(r)&&!a.shim&&(e.toStringMethod=mt(r),e.toStringMethod.info.usedAsIface=!0),i.virtualParent){he.numVirtMethods++;let e=E(r),a=!1,o=mt(r);t.U.assert(!!o);for(let t=0;t<n.length;++t)E(n[t].action)==e&&(n[t]=o,i.virtualIndex=t,a=!0);a||(i.virtualIndex=n.length,n.push(o))}}e.vtable=n,e.itable=[];const r={};for(let t of e.allfields){let n=q(t),i=Lt(e,t,!1);r[n]=!0,e.itable.push({name:n,info:(i.idx+1)*(_()?1:4),idx:Oe(n),proc:null})}for(let n=e;n;n=n.baseClassInfo)for(let r of n.usedMethods()){const n=q(r);if(J(r).shim)continue;const i=mt(r),a=e.itable.find((e=>e.name==n)),o=r.kind==t.SK.SetAccessor,s=r.kind==t.SK.GetAccessor;a?(o&&!a.setProc?a.setProc=i:s&&!a.proc&&(a.proc=i),a.info=0):e.itable.push({name:n,info:0,idx:Oe(n),proc:o?null:i,setProc:o?i:null}),i.info.usedAsIface=!0}return e.vtable}function je(e){if(32&e.flags||16&e.flags&&t.compileOptions.skipPxtModulesEmit)throw i.needsFullRecompile=!0,f(9200,U("full recompile required"))}function $e(e,n=null){n||(n=e.symbol.valueDeclaration);const r=u(n);if(!r.classInfo){const e=oe(n)+"__C"+d(n),i=new F(e,n);r.classInfo=i,i.attrs.autoCreate&&(V[i.attrs.autoCreate]=!0),i.baseClassInfo=function(e){if(e.heritageClauses)for(let n of e.heritageClauses)switch(n.token){case t.SK.ExtendsKeyword:if(!n.types||1!=n.types.length)throw f(9228,U("invalid extends clause"));let r=ee(n.types[0]);if(r&&W(r))return L.getTypeAtLocation(e),$e(r);throw f(9228,U("cannot inherit from this type"));case t.SK.ImplementsKeyword:break;default:throw f(9228,U("invalid heritage clause"))}return null}(n);const a=i.baseClassInfo?t.U.toDictionary(i.baseClassInfo.allfields,(e=>q(e))):{},o=(e,t=i.baseClassInfo)=>t?t.methods[e]||o(e,t.baseClassInfo):null;for(let e of n.members)if(e.kind==t.SK.PropertyDeclaration){let n=e;k(n)||i.allfields.push(n);const r=q(n);(o(r)||t.U.lookup(a,r))&&De(n,9279,U("redefinition of '{0}' as field",r))}else if(e.kind==t.SK.Constructor)for(let t of e.parameters)fe(t)&&i.allfields.push(t);else if(D(e)){let n=Ne(e);n.parentClassInfo=i,n.isUsed&&yt(i);const r=q(e);i.methods.hasOwnProperty(r)||(i.methods[r]=[]),i.methods[r].push(e);const o=t.U.lookup(a,r);if(o){const e=u(o);64&e.flags||(e.flags|=64,8&e.flags&&Oe(r,!0),je(e))}}i.baseClassInfo&&(i.allfields=i.baseClassInfo.allfields.concat(i.allfields),function(e){for(let n of e.allMethods()){let r=null;const i=E(n),a=q(n);for(let t=e.baseClassInfo;t;t=t.baseClassInfo)if(t.methods.hasOwnProperty(a))for(let e of t.methods[a])E(e)==i&&(r=e);if(r){let e=Ne(n),i=Ne(r);r.parameters.length!=n.parameters.length&&De(n,9255,U("the overriding method is currently required to have the same number of arguments as the base one")),e.virtualParent=i,i.virtualParent||(je(u(r)),i.virtualParent=i),t.assert(i.virtualParent==i,"pinf.virtualParent == pinf")}}}(i))}return r.classInfo}function Ke(e){if(!e)return!1;if(x(e))return!1;switch(e.kind){case t.SK.ArrayLiteralExpression:return e.elements.some(Ke);default:return null==zt(e)}}function ze(e){const t=Kt(e);if(t)return Wt(t.val);if(P(e)){if(J(e).shim)return ut(e,e,[])}let n=Re(e);return Pe(e),n.load()}function Je(e){J(e).shim&&f(9207,U("built-in functions cannot be yet used as values; did you forget ()?"));let n=Ne(e);return qe(n),n.location?n.location.load():(t.assert(!he.finalPass||0==n.capturedVars.length,"!bin.finalPass || info.capturedVars.length == 0"),n.usedAsValue=!0,it(e),xt(e))}function qe(e){void 0===e.usedBeforeDecl?e.usedBeforeDecl=!0:he.finalPass&&e.usedBeforeDecl&&e.capturedVars.length&&w(e.decl)&&!e.alreadyEmitted&&f(9278,U("function referenced before all variables it uses are defined"))}function Ve(e){const n=st(e),r=Kt(n);if(r)return Wt(r.val);if(n&&(I(n)||O(n)))return ze(n);if(n&&n.kind==t.SK.FunctionDeclaration)return Je(n);if("undefined"==e.text)return Wt(void 0);throw Ae(e,U("Unknown or undeclared identifier"),9235)}function He(e){let n=A(e);n||f(9208,U("'this' used outside of a method"));let r=Ne(n);return r.thisParameter||t.oops("no this"),ze(r.thisParameter)}function Ge(e){let n;if(""==e)n=t.ir.rtcall("String_::mkEmpty",[]);else{let r=function(e){return function(e,t,n,r){return me(e,n,r,(e=>e.emitString(t)))}(he,e,ie,re)}(e);n=t.ir.ptrlit(r,JSON.stringify(e))}return n.isStringLiteral=!0,n}function We(e){let n=ct(e),r=vn(e);return t.target.isNative||x(e)?Ot(r,n):(r=t.ir.rtcallMask("String_::stringConv",1,1,[r]),Ot(r,!0))}function Qe(e){let n=0,r=(e,t)=>function(e){return x(e)&&""==e.text}(t)?e:(n++,Xt("String_::concat",[Ot(e,!0),We(t)],null)),i=u(We(e.head)).valueOverride;for(let t of e.templateSpans)i=r(i,t.expression),i=r(i,t.literal);return 0==n?Xt("String_::concat",[Ot(i,!0),Ot(t.ir.rtcall("String_::mkEmpty",[]),!1)],null):i}function Ye(e){let n=st(e);const r=Kt(n);if(r)return Wt(r.val);if(n.kind==t.SK.SetAccessor&&(n=Xe(n)),n.kind==t.SK.GetAccessor)return pt(e,e,[],null,n);if(n.kind==t.SK.EnumMember)throw f(9210,U("Cannot compute enum value"));if(n.kind==t.SK.PropertySignature||n.kind==t.SK.PropertyAssignment)return pt(e,e,[],null,n,e.expression);if(n.kind==t.SK.PropertyDeclaration||n.kind==t.SK.Parameter){if(k(n))return ze(n);if(Ze(n))return pt(e,e,[],null,n,e.expression);{let n=function(e){const n=ee(e.expression);if(Q(n)){const r=$e(n);let i=e.expression.kind==t.SK.ThisKeyword;return t.target.switches.noThisCheckOpt&&(i=!1),Lt(r,Rt(r,e.name.text),!i)}throw Ae(e,U("bad field access"),9247)}(e);return t.ir.op(o.FieldAccess,[vn(e.expression)],n)}}if(D(n)||n.kind==t.SK.MethodSignature)throw f(9211,U("cannot use method as lambda; did you forget '()' ?"));if(n.kind==t.SK.FunctionDeclaration)return Je(n);if(I(n))return ze(n);throw Ae(e,U("Unknown property access for {0}",p(n)),9237)}function Xe(n){const r=e.getDeclarationOfKind(n.symbol,t.SK.GetAccessor);if(null==r)throw f(9281,U("setter currently requires a corresponding getter"));return r}function Ze(e){if(e.kind==t.SK.Parameter||e.kind==t.SK.PropertyDeclaration){const n=u(e);return!!t.target.switches.slowFields||!!(64&n.flags)}return!1}function et(t,n=null){let r=ee(t.expression),i={callingConvention:0,paramDefl:{}},a=null,o=!1;if(!n&&ue(r)?a="String_::charAt":H(r)?a=n?"Array_::setAt":"Array_::getAt":G(r)&&(i=z(r.symbol),a=n?i.indexerSet:i.indexerGet),!a&&r.flags&(e.TypeFlags.Any|e.TypeFlags.StructuredOrTypeVariable)&&(a=n?"pxtrt::mapSetGeneric":"pxtrt::mapGetGeneric",o=!0),a){if(o||Qt(t.argumentExpression)){return Xt(a,[t.expression,t.argumentExpression],i,n?[n]:[])}throw Ae(t,U("non-numeric indexer on {0}",a),9238)}throw Ae(t,U("unsupported indexer"),9239)}function tt(n){let i=function(e){return!!P(e)&&(!Ke(e.initializer)||!!J(e).whenUsed)}(n)||function(e){return e.kind==t.SK.FunctionDeclaration&&!w(e)||D(e)}(n)||e.isClassDeclaration(n);return!t.target.switches.noTreeShake&&(!(r.testMode&&i&&!l(n))&&i)}function nt(e){if(!tt(e))return!0;const t=u(e);return he.finalPass?!!(8&t.flags):t==re}function rt(e){var t;if(!e)return;const n=u(e);if(n.classInfo)yt(n.classInfo);else{if(r.computeUsedSymbols&&e.symbol&&(i.usedSymbols[$(L,e)]=null),r.computeUsedParts&&(null===(t=n.commentAttrs)||void 0===t?void 0:t.parts)){const e=n.commentAttrs.parts.split(/[ ,]+/g);for(const t of e)-1===i.usedParts.indexOf(t)&&i.usedParts.push(t)}_()&&D(e)&&Oe(q(e),!0),at(e),8&n.flags||(n.flags|=8,tt(e)&&N.push(e))}}function it(e){rt(e)}function at(e){ie&&(re?re.usedNodes[we(e)]=e:t.U.oops("no using ctx for: "+q(e)))}function ot(t){if(!t)return null;const n=u(t);if(void 0!==n.declCache)return n.declCache;let r,i=L.getSymbolAtLocation(t);if(i&&(r=i.valueDeclaration,!r&&i.declarations)){let t=i.declarations[0];t&&t.kind==e.SyntaxKind.ImportEqualsDeclaration&&(i=L.getSymbolAtLocation(t.moduleReference),i&&(r=i.valueDeclaration))}return r}function st(e){let n=ot(e);if(rt(n),!n&&e&&e.kind==t.SK.PropertyAccessExpression){const r=e;n={kind:t.SK.PropertySignature,symbol:{isBogusSymbol:!0,name:r.name.getText()},name:r.name},u(n).flags|=2}return ke.declCache=n||null,n}function ct(e){return e.kind==t.SK.NullKeyword||e.kind==t.SK.NumericLiteral?!!e.isRefOverride:!x(e)}function lt(e){t.assert(e.length<=8,"args.length <= 8");let n=0;return e.forEach(((e,t)=>{ct(e)&&(n|=1<<t)})),n}function ut(n,i,a){let o=J(n),s=!(ee(i).flags&e.TypeFlags.Void),c=o.shim;if(c.indexOf("(")>=0){let e=/(.*)\((.*)\)$/.exec(c);if(e){a.length&&t.U.userError("no arguments expected");let s=[];if(e[2].replace(/\s/g,"")){for(let n of e[2].split(/,/)){let e=parseInt(n);isNaN(e)&&(e=Ht(i,n),null==e&&(e=qt(i,n)),null==e&&t.U.userError("invalid argument: "+n+" in "+c)),s.push(t.ir.numlit(e))}s.length>4&&t.U.userError("too many args")}return c=e[1],r.target.isNative&&t.hexfile.validateShim(ae(n),c,o,!0,s.map((e=>!0))),t.ir.rtcallMask(c,0,o.callingConvention,s)}}return"TD_NOOP"==c?(t.assert(!s,"!hasRet"),t.target.switches.profile&&"perfCounter"==o.shimArgument&&(a[0]&&a[0].kind==t.SK.StringLiteral&&(ge.perfCounterName=a[0].text),ge.perfCounterName||(ge.perfCounterName=ge.getFullName())),Wt(void 0)):"TD_ID"==c||"ENUM_GET"===c?(t.assert(1==a.length,"args.length == 1"),vn(a[0])):(r.target.shimRenames&&t.U.lookup(r.target.shimRenames,c)&&(c=r.target.shimRenames[c]),r.target.isNative&&t.hexfile.validateShim(ae(n),c,o,s,a.map(Qt)),Xt(c,a,o))}function dt(e,n,r){if(!e)return;let i=e.getParameters(),a=n.length;i.length>n.length&&i.slice(n.length).forEach((e=>{if(e.valueDeclaration&&e.valueDeclaration.kind==t.SK.Parameter){let i=e.valueDeclaration;if(i.initializer)(function(e){switch(e.kind){case t.SK.UndefinedKeyword:case t.SK.NullKeyword:case t.SK.TrueKeyword:case t.SK.FalseKeyword:case t.SK.NumericLiteral:return!0;case t.SK.PropertyAccessExpression:return vn(e).exprKind==o.NumberLiteral;default:return!1}})(i.initializer)||f(9212,U("only numbers, null, true and false supported as default arguments")),n.push(i.initializer);else{let e=T(r,q(i)),t=e?Wt(parseInt(e)):null;null==t&&(t=Wt(void 0)),n.push(Ot(t))}}else f(9213,U("unsupported default argument (shouldn't happen)"))}));for(let e=0;e<a;e++){let r=i[e];r&&r.valueDeclaration&&r.valueDeclaration.kind==t.SK.Parameter&&(n[e],r.valueDeclaration)}r.imageLiteral&&(x(n[0])||f(9214,U("Only image literals (string literals) supported here; {0}",p(n[0]))),n[0]=function(e){e||(e="0 0 0 0 0\n0 0 0 0 0\n0 0 0 0 0\n0 0 0 0 0\n0 0 0 0 0\n");let n=0,r=0,i=0,a="",o=0;e+="\n";for(let t=0;t<e.length;++t)switch(e[t]){case".":case"_":case"0":a+="0,",n++,o++;break;case"#":case"*":case"1":a+="255,",n++,o++;break;case"\t":case"\r":case" ":break;case"\n":n&&(0==r?r=n:n!=r&&f(9205,U("lines in image literal have to have the same width (got {0} and then {1} pixels)",r,n)),n=0,i++);break;default:f(9206,U("Only 0 . _ (off) and 1 # * (on) are allowed in image literals"))}let s="_img"+he.lblNo++;o%2!=0&&(a+="0"),he.otherLiterals.push(`\n.balign 4\n${s}: .short 0xffff\n        .short ${r}, ${i}\n        .byte ${a}\n`);let c="new pxsim.Image("+r+", ["+a+"])";return{kind:t.SK.NumericLiteral,imageLiteral:s,jsLit:c}}(n[0].text))}function pt(n,r,a,o,s=null,c=null){var l;s||(s=st(r));let u=!1,d=!1,p=!1;const m=n===r;if(s)switch(s.kind){case t.SK.PropertySignature:case t.SK.PropertyAssignment:case t.SK.PropertyDeclaration:case t.SK.MethodSignature:u=!0;break;case t.SK.Parameter:fe(s)&&(u=!0);break;case t.SK.GetAccessor:case t.SK.SetAccessor:case t.SK.MethodDeclaration:u=!0,d=!0,p=k(s);break;case t.SK.FunctionDeclaration:p=!0;break;case t.SK.ModuleDeclaration:break;default:s=null}else r.kind==t.SK.PropertyAccessExpression&&(u=!0);t.target.switches.slowMethods&&(d=!1);const g=J(s);let h=a.slice(0);if(u&&k(s)&&(u=!1),u&&!c&&r.kind==t.SK.PropertyAccessExpression&&(c=r.expression),i.usedArguments&&g.trackArgs){let e=c?[c].concat(h):h,n=g.trackArgs.map((t=>e[t])).map((e=>{let n=st(e);return!n||n.kind!=t.SK.EnumMember&&n.kind!=t.SK.VariableDeclaration?e&&e.kind==t.SK.StringLiteral?e.text:"*":$(L,n)})).join(","),r=$(L,s),a=i.usedArguments[r];a||(a=i.usedArguments[r]=[]),a.indexOf(n)<0&&a.push(n)}function y(){let e=gt(s,n,h.map((e=>vn(e)))),r=e.data;return h[0]&&r.proc&&r.proc.classInfo&&(r.isThis=h[0].kind==t.SK.ThisKeyword),e}if(dt(o,h,g),p){if(!Ne(s).location)return g.shim&&!At(s)?ut(s,n,h):(it(s),y())}if(r.kind==t.SK.SuperKeyword){let e=ge.classInfo.baseClassInfo.ctor;for(let t=ge.classInfo.baseClassInfo;t&&!e;t=t.baseClassInfo)e=t.ctor;if(!e&&he.finalPass)throw f(9280,U("super() call requires an explicit constructor in base class"));let t=h.map((e=>vn(e)));return t.unshift(He(r)),ft(e,n,t)}if(u){if(t.U.assert(!k(s)),c?h.unshift(c):Ae(n,U("strange method call"),9241),!s){t.U.assert(r.kind==t.SK.PropertyAccessExpression);const e=r.name.text;return _t(h.map((e=>vn(e))),{ifaceIndex:Oe(e,!0),callLocationIndex:Tn(n),noArgs:m})}let i=Ne(s);if(i.parentClassInfo&&yt(i.parentClassInfo),it(s),c.kind==t.SK.SuperKeyword)return y();const a=!!i.virtualParent,o=!!_()||!!t.target.switches.slowMethods;if(a&&!o)return s.kind==t.SK.MethodDeclaration?t.U.assert(!m):s.kind==t.SK.GetAccessor||s.kind==t.SK.SetAccessor?t.U.assert(m):t.U.assert(!1),t.U.assert(!he.finalPass||null!=i.virtualIndex,"!bin.finalPass || info.virtualIndex != null"),_t(h.map((e=>vn(e))),{classInfo:i.parentClassInfo,virtualIndex:i.virtualIndex,noArgs:m,isThis:h[0].kind==t.SK.ThisKeyword});if(g.shim&&!At(s))return ut(s,n,h);if(g.helper){let r,i=L.getSymbolsInScope(n,e.SymbolFlags.Module);for(let e of i)if("helpers"==e.name)for(let n of e.declarations||[e.valueDeclaration])if(n.kind==t.SK.ModuleDeclaration)for(let e of n.body.statements)(null===(l=e.symbol)||void 0===l?void 0:l.name)==g.helper&&(r=e);return r||f(9215,U("helpers.{0} not found",g.helper)),r.kind!=t.SK.FunctionDeclaration&&f(9216,U("helpers.{0} isn't a function",g.helper)),it(s=r),y()}return a||t.target.switches.slowMethods||!d?_t(h.map((e=>vn(e))),{ifaceIndex:Oe(q(s),!0),isSet:m&&2==h.length,callLocationIndex:Tn(n),noArgs:m}):(t.U.assert(s.kind!=t.SK.MethodSignature),y())}return s&&s.kind==t.SK.ModuleDeclaration&&("String"==q(s)?f(9219,U('to convert X to string use: X + ""')):f(9220,U("namespaces cannot be called directly"))),h.unshift(r),t.U.assert(!m),_t(h.map((e=>vn(e))),{virtualIndex:-1,callLocationIndex:Tn(n),noArgs:m})}function ft(e,n,r){t.U.assert(!he.finalPass||!!e);let i={proc:e,callLocationIndex:Tn(n),virtualIndex:null,ifaceIndex:null};return t.ir.op(o.ProcCall,r,i)}function _t(e,n){return t.ir.op(o.ProcCall,e,n)}function mt(e){return u(e).proc}function gt(e,n,r){const i=mt(e);if(e.kind==t.SK.FunctionDeclaration){qe(Ne(e))}return t.assert(!!i||!he.finalPass,"!!proc || !bin.finalPass"),ft(i,n,r)}function ht(e){return e.members.filter((e=>e.kind==t.SK.Constructor))[0]}function yt(e){if(at(e.decl),e.isUsed)return;u(e.decl).flags|=8,e.baseClassInfo&&yt(e.baseClassInfo),he.usedClassInfos.push(e)}function vt(n){function i(e){return/^[0-9a-f]$/i.test(e)}let a=st(n.tag);if(!a)throw Ae(n,U("invalid tagged template"),9265);let o,s=J(a),c={decl:a,qName:a?$(L,a):"?",args:[n.template],isExpression:!0};function l(a){o=function(n,a){let o=te;if("_"==a[0]&&"_"==a[1]&&r.jres[a]&&(o=r.jres[a],a=""),""==a&&o){let n=/font\/x-mkcd-b(\d+)/.exec(o.mimeType);if(n)if(he.finalPass){let e=parseInt(n[1]),r=atob(o.data),i=he.usedChars,s="",c="";for(let t=0;t<r.length;t+=e){let n=r.charCodeAt(t)+(r.charCodeAt(t+1)<<8);(n<128||i[n>>5]&1<<(31&n))&&(s+=r.slice(t,t+e),c+=n+", ")}a=t.U.toHex(t.U.stringToUint8Array(s))}else a="aabbccdd";else o.dataEncoding&&"base64"!=o.dataEncoding?"hex"==o.dataEncoding?a=o.data:f(9271,U("invalid jres encoding '{0}' on '{1}'",o.dataEncoding,o.id)):a=t.U.toHex(t.U.stringToUint8Array(e.pxtc.decodeBase64(o.data)))}if(/^e[14]/i.test(a)&&n.parent&&n.parent.kind==t.SK.CallExpression&&"image.ofBuffer"==n.parent.expression.getText()){const e=/^e([14])(..)(..)..(.*)/i.exec(a);a=`870${e[1]}${e[2]}00${e[3]}000000${e[4]}`}let s="";for(let e=0;e<a.length;++e){let t=a[e];if(!i(t)){if(/^[\s\.]$/.test(t))continue;throw Ae(n,U("invalid character in hex literal '{0}'",t),9265)}i(a[e+1])&&(s+=t+a[e+1],e++)}if(t.target.isNative){const e=he.emitHexLiteral(s.toLowerCase());return t.ir.ptrlit(e,e)}{const e="_hex"+we(n);return t.ir.ptrlit(e,{hexlit:s.toLowerCase()})}}(n,a(n.template.text))}if(u(n).callInfo=c,n.template.kind!=t.SK.NoSubstitutionTemplateLiteral)throw Ae(n,U("substitution not supported in hex literal",s.shim),9265);switch(s.shim){case"@hex":l((e=>e));break;case"@f4":l((function(e){if(!Array.isArray(s.groups))throw Ae(n,U("missing groups in @f4 literal"),9272);let r=[],i=[],a={},o=0;s.groups.forEach(((e,t)=>{for(let n of e)a[n]=t})),e+="\n";for(let c=0;c<e.length;++c){let l=e[c];switch(l){case" ":case"\t":break;case"\n":i.length>0&&(r.push(i),o=Math.max(i.length,o),i=[]);break;default:let e=t.U.lookup(a,l);if(null==e){if(2!=s.groups.length)throw Ae(n,U("invalid character in image literal: '{0}'",e),9273);e=1}i.push(e)}}let c=8;return s.groups.length<=2?c=1:s.groups.length<=16&&(c=4),t.f4EncodeImg(o,r.length,c,((e,t)=>r[t][e]||0))}));break;default:if(void 0===s.shim&&s.helper)return function(n,r){var i;let a,o=L.getSymbolsInScope(n,e.SymbolFlags.Module);for(let e of o)if("helpers"==e.name)for(let n of e.declarations||[e.valueDeclaration])if(n.kind==t.SK.ModuleDeclaration)for(let e of n.body.statements)(null===(i=e.symbol)||void 0===i?void 0:i.name)==r.helper&&(a=e);a||f(9215,U("helpers.{0} not found",r.helper));a.kind!=t.SK.FunctionDeclaration&&f(9216,U("helpers.{0} isn't a function",r.helper));const s=a;return it(s),gt(s,n,[Ge(n.text)])}(n.template,s);throw Ae(n,U("invalid shim '{0}' on tagged template",s.shim),9265)}return s.helper&&(o=t.ir.rtcall(s.helper,[o])),o}function bt(e){let n=e.parameters.slice(0);if(!k(e)&&D(e)){let r=Ne(e);r.thisParameter||(r.thisParameter={kind:t.SK.Parameter,name:{text:"this"},isThisParameter:!0,parent:e}),n.unshift(r.thisParameter)}return n}function xt(e,n=!1){let r=se(e);return t.ir.ptrlit(r+"_Lit",r)}function kt(){for(ge=mt(xe);N.length>0;){xn(N.pop())}}function St(){const e=le;if(e.length>0){le=[];for(let t of e){const e=ge;try{Ct(t)}finally{ge=e}}}}function Tt(e){he.finalPass&&e.functionsToDefine&&t.U.pushRange(le,e.functionsToDefine)}function Ct(e){const n=Ne(e);let r=null;if(he.finalPass){if(n.alreadyEmitted)return t.U.assert(n.usedBeforeDecl),null;n.alreadyEmitted=!0}let i=e.kind==t.SK.ArrowFunction||e.kind==t.SK.FunctionExpression,a=n.capturedVars.slice(0),s=a.map(((e,n)=>{let r=new t.ir.Cell(n,e,Ie(e));return r.iscap=!0,r}));void 0===n.usedBeforeDecl&&(n.usedBeforeDecl=!1),a.length>0?(t.assert(null!=w(e),"getEnclosingFunction(node) != null)"),r=t.ir.shared(t.ir.rtcall("pxt::mkAction",[t.ir.numlit(a.length),xt(e,!0)])),n.usedAsValue=!0,a.forEach(((e,n)=>{let i=ge.localIndex(e);i||f(9223,U("cannot find captured value: {0}",L.symbolToString(e.symbol)));let a=i.loadCore();ge.emitExpr(t.ir.rtcall("pxtrt::stclo",[r,t.ir.numlit(n),a]))})),e.kind==t.SK.FunctionDeclaration&&(n.location=ge.mkLocal(e,Ie(e)),ge.emitExpr(n.location.storeDirect(r)),r=null)):i&&(r=xt(e),n.usedAsValue=!0),t.assert(!!r==i,"!!lit == isExpression");let c=mt(e);if(c)ge=c,ge.reset();else{t.assert(!he.finalPass,"!bin.finalPass");const r=u(e),i=new t.ir.Procedure;i.isRoot=!!(1&r.flags),i.action=e,i.info=n,r.proc=i,i.usingCtx=re,ge=i,function(e,t,n,r){me(e,n,r,(e=>e.addProc(t)))}(he,i,ie,re)}ge.captured=s;const l=[];if(e.parent.kind==t.SK.ClassDeclaration){let n=$e(null,e.parent);if(ge.classInfo?t.assert(ge.classInfo==n,"proc.classInfo == classInfo"):ge.classInfo=n,e.kind==t.SK.Constructor){if(n.baseClassInfo)for(let e of n.baseClassInfo.decl.members)e.kind==t.SK.Constructor&&it(e);n.ctor?t.assert(n.ctor==ge,"classInfo.ctor == proc"):n.ctor=ge;for(let e of n.allfields)if(e.kind==t.SK.PropertyDeclaration&&!k(e)){let t=e;t.initializer&&l.push(t)}}}const d=[],p=[];ge.args=bt(e).map(((n,r)=>{n.name.kind===t.SK.ObjectBindingPattern&&d.push(n),e.kind==t.SK.Constructor&&fe(n)&&p.push(n);let i=new t.ir.Cell(r,n,Ie(n));return Tt(i.info),i.isarg=!0,i})),ge.args.forEach((e=>{if(e.isByRefLocal()){let n=t.ir.shared(t.ir.rtcall("pxtrt::mklocRef",[]));ge.emitExpr(t.ir.rtcall("pxtrt::stlocRef",[n,e.loadCore()],1)),ge.emitExpr(e.storeDirect(n))}})),d.forEach((e=>mn(e)));for(let e of p){let r=Lt(ge.classInfo,Rt(ge.classInfo,q(e)),!1),i=t.ir.op(o.FieldAccess,[ze(n.thisParameter)],r);ge.emitExpr(t.ir.op(o.Store,[i,ze(e)]))}for(let e of l){let r=Lt(ge.classInfo,Rt(ge.classInfo,q(e)),!1),i=t.ir.op(o.FieldAccess,[ze(n.thisParameter)],r);ge.emitExpr(t.ir.op(o.Store,[i,vn(e.initializer)]))}if(St(),e.body.kind==t.SK.Block){if(kn(e.body),ne(ge.action)){const n=ge.body[ge.body.length-1];n&&n.stmtKind==t.ir.SK.Jmp&&n.jmpMode==t.ir.JmpMode.Always||ge.emitJmp(on(e).ret,Wt(void 0),t.ir.JmpMode.Always)}}else{let n=vn(e.body);ge.emitJmp(on(e).ret,n,t.ir.JmpMode.Always)}ge.emitLblDirect(on(e).ret),ge.stackEmpty();let _=ge.mkLabel("final");if(ne(ge.action)?ge.emitJmp(_):ge.emitJmp(_,Wt(void 0)),ge.emitLbl(_),n.capturedVars.length&&n.usedBeforeDecl&&e.kind==t.SK.FunctionDeclaration&&!he.finalPass){n.capturedVars.sort(((e,t)=>t.pos-e.pos));const t=Ie(n.capturedVars[0]);t.functionsToDefine||(t.functionsToDefine=[]),t.functionsToDefine.push(e)}return t.assert(!he.finalPass||0==N.length,"!bin.finalPass || usedWorkList.length == 0"),r}function Et(e){let n=t.ir.shared(e);return ge.emitExpr(n),n}function Dt(){return Et(t.ir.op(o.JmpValue,[]))}function At(e){if(r.target.isNative)return!1;let n=e;return n.body&&(n.body.kind!=t.SK.Block||n.body.statements.length>0)}function wt(n){if(!nt(n))return;if(32&u(n).flags)return;let i=J(n);if(null!=i.shim){if("@"==i.shim[0])return;if(r.target.isNative&&t.hexfile.validateShim(ae(n),i.shim,i,ne(n),bt(n).map((e=>_e(ee(e))))),!At(n))return}if(e.isInAmbientContext(n))return;if(!n.body)return;let a=null,o=ge;try{a=Ct(n)}finally{ge=o}return a}function Nt(){}function It(e){let t=e;t.needsIRCache=!0,K.push(t)}function Pt(e,n=null){let r=K.length;return e.kind!=t.SK.PropertyAccessExpression&&e.kind!=t.SK.ElementAccessExpression||It(e.expression),n&&It(n),K.length==r?Nt:()=>{for(let e=r;e<K.length;++e)K[e].cachedIR=null,K[e].needsIRCache=!1;K.splice(r,K.length-r)}}function Ot(e,n=!1){let r={kind:t.SK.NullKeyword,isRefOverride:n};return u(r).valueOverride=e,r}function Ft(e,n,r,i=null){let a=Pt(e),o=i?vn(i):Wt(1),s=t.ir.shared(vn(e)),c=t.ir.shared(Bt(n,s,o));return Mt(e,Ot(c,!0)),a(),r?s:c}function Lt(e,n,r=!0){k(n)&&t.U.oops("fieldIndex on static field: "+q(n));let i=J(n),a=e.allfields.indexOf(n);return a<0&&he.finalPass&&t.U.oops("missing field"),{idx:a,name:q(n),isRef:!0,shimName:i.shim,classInfo:e,needsCheck:r}}function Rt(e,t){const n=e.allfields.filter((e=>e.name.text==t))[0];return n||f(9224,U("field {0} not found",t)),n}function Mt(n,r,i=!1){let a=st(n),s=P(a);if(n.kind==t.SK.Identifier||s)if(a&&(s||I(a)||O(a))){let e=Re(a);Pe(a,!0),ge.emitExpr(e.storeByRef(vn(r)))}else Ae(n,U("bad target identifier"),9248);else if(n.kind==t.SK.PropertyAccessExpression){let i=st(n);if(!i||i.kind!=t.SK.GetAccessor&&i.kind!=t.SK.SetAccessor)if(i&&(i.kind==t.SK.PropertySignature||i.kind==t.SK.PropertyAssignment||Ze(i)))ge.emitExpr(pt(n,n,[r],null,i));else{let e=vn(n);ge.emitExpr(t.ir.op(o.Store,[e,vn(r)]))}else Xe(i),i=e.getDeclarationOfKind(i.symbol,t.SK.SetAccessor),i||Ae(n,U("setter not available"),9253),ge.emitExpr(pt(n,n,[r],null,i))}else if(n.kind==t.SK.ElementAccessExpression)ge.emitExpr(et(n,r));else if(n.kind==t.SK.ArrayLiteralExpression)if(r.kind==t.SK.ArrayLiteralExpression){const e=r.elements.map((e=>{const n=t.ir.shared(vn(e));return ge.emitExpr(n),n}));n.elements.forEach(((t,n)=>{Mt(t,Ot(e[n]))}))}else{const e=t.ir.shared(vn(r));n.elements.forEach(((n,r)=>{Mt(n,Ot(Yt("Array_::getAt",[e,t.ir.numlit(r)])))}))}else Ae(n,U("bad assignment target"),9249)}function Ut(e){if(g())switch(e){case"numops::adds":case"numops::subs":case"numops::eors":case"numops::ands":case"numops::orrs":return"@nomask@"+e}if(_())switch(e){case"pxt::switch_eq":return"numops::eq"}return e}function Bt(e,t,n){return Yt(Ut(e),[t,n])}function jt(e){if(e.kind==t.SK.Identifier)return e.text;if(e.kind==t.SK.PropertyAccessExpression){const t=e,n=jt(t.expression);if(n)return n+"."+t.name.text}return null}function $t(e,t){if(!t)return null;const n=t.val;switch(jt(e)){case"Math.floor":return{val:Math.floor(n)};case"Math.ceil":return{val:Math.ceil(n)};case"Math.round":return{val:Math.round(n)}}return null}function Kt(n){if(!n)return null;const r=u(n);if(void 0!==r.constantFolded)return r.constantFolded;if(I(n)&&n.parent.flags&e.NodeFlags.Const){const e=n;e.initializer&&(r.constantFolded=zt(e.initializer))}else if(n.kind==t.SK.EnumMember){const e=n,i=function(e){let n=J(e).enumval;if(!n){let t=L.getConstantValue(e);if(null==t)return null;n=t+""}return/^[+-]?\d+$/.test(n)||/^0x[A-Fa-f\d]{2,8}$/.test(n)?n:(t.U.userError("enumval only support number literals"),"0")}(e);if(null==i)r.constantFolded=zt(e.initializer);else{const e=parseInt(i);isNaN(e)||(r.constantFolded={val:e})}}else if(n.kind==t.SK.PropertyDeclaration&&k(n)&&S(n)){const e=n;r.constantFolded=zt(e.initializer)}return r.constantFolded}function zt(e){if(!e)return null;const n=u(e);if(void 0===n.constantFolded){n.constantFolded=null;const r=function(e){if(!e)return null;switch(e.kind){case t.SK.PrefixUnaryExpression:{const n=e,r=zt(n.operand);return function(e,n){if(!n)return null;const r=n.val;switch(e){case t.SK.PlusToken:return{val:+r};case t.SK.MinusToken:return{val:-r};case t.SK.TildeToken:return{val:~r};case t.SK.ExclamationToken:return{val:!r};default:return null}}(n.operator,r)}case t.SK.BinaryExpression:{const n=e,r=zt(n.left);if(!r)return null;const i=zt(n.right);return i?function(e,n,r){if(!n||!r)return null;const i=n.val,a=r.val;switch(e){case t.SK.PlusToken:return{val:i+a};case t.SK.MinusToken:return{val:i-a};case t.SK.SlashToken:return{val:i/a};case t.SK.PercentToken:return{val:i%a};case t.SK.AsteriskToken:return{val:i*a};case t.SK.AsteriskAsteriskToken:return{val:i**a};case t.SK.AmpersandToken:return{val:i&a};case t.SK.BarToken:return{val:i|a};case t.SK.CaretToken:return{val:i^a};case t.SK.LessThanLessThanToken:return{val:i<<a};case t.SK.GreaterThanGreaterThanToken:return{val:i>>a};case t.SK.GreaterThanGreaterThanGreaterThanToken:return{val:i>>>a};case t.SK.LessThanEqualsToken:return{val:i<=a};case t.SK.LessThanToken:return{val:i<a};case t.SK.GreaterThanEqualsToken:return{val:i>=a};case t.SK.GreaterThanToken:return{val:i>a};case t.SK.EqualsEqualsToken:return{val:i==a};case t.SK.EqualsEqualsEqualsToken:return{val:i===a};case t.SK.ExclamationEqualsEqualsToken:return{val:i!==a};case t.SK.ExclamationEqualsToken:return{val:i!=a};case t.SK.BarBarToken:return{val:i||a};case t.SK.AmpersandAmpersandToken:return{val:i&&a};default:return null}}(n.operatorToken.kind,r,i):null}case t.SK.NumericLiteral:{const t=parseFloat(e.text);return isNaN(t)?null:{val:t}}case t.SK.NullKeyword:return{val:null};case t.SK.TrueKeyword:return{val:!0};case t.SK.FalseKeyword:return{val:!1};case t.SK.UndefinedKeyword:return{val:void 0};case t.SK.CallExpression:{const t=e;return 1==t.arguments.length?$t(t.expression,zt(t.arguments[0])):null}case t.SK.PropertyAccessExpression:case t.SK.Identifier:return Kt(ot(e));case t.SK.AsExpression:return zt(e.expression);default:return null}}(e);n.constantFolded=r}return n.constantFolded}function Jt(e){let n=t.target.switches.boxDebug,r=null;if(n)try{t.target.switches.boxDebug=!1,r=vn(e)}finally{t.target.switches.boxDebug=n}else r=vn(e);let i=Gt(r);if(void 0===i)throw f(9267,U("a constant number-like expression is required here"));return i}function qt(e,t){let n=Vt(e,t,"userconfig");return null==n&&(n=Vt(e,t,"config")),n}function Vt(n,r,i){let a=L.getSymbolsInScope(n,e.SymbolFlags.Module).filter((e=>e.name==i&&!!e.valueDeclaration))[0];if(!a)return null;for(let e of a.valueDeclaration.body.statements)if(e.kind==t.SK.VariableStatement){let t=e;for(let e of t.declarationList.declarations)if(e.symbol.name==r)return Jt(e.initializer)}return null}function Ht(t,n){let r=L.getSymbolsInScope(t,e.SymbolFlags.Enum).filter((e=>"DAL"==e.name&&!!e.valueDeclaration))[0];if(!r)return null;let i=r.valueDeclaration.members.filter((e=>e.symbol.name==n))[0];return i?L.getConstantValue(i):null}function Gt(e){if(e.exprKind==t.ir.EK.NumberLiteral){let n=e.data;if(r.target.isNative&&!_()){if(n==t.taggedNull||n==t.taggedUndefined||n==t.taggedFalse)return 0;if(n==t.taggedTrue)return 1;if("number"==typeof n)return n>>1}else if("number"==typeof n)return n}else if(e.exprKind==t.ir.EK.RuntimeCall&&2==e.args.length){let t=Gt(e.args[0]),n=Gt(e.args[1]);if(void 0===t||void 0===n)return;switch(e.data){case"numops::orrs":return t|n;case"numops::adds":return t+n;default:return void console.log(e)}}}function Wt(e){if(r.target.isNative&&!_()){const r=Z(e);if(null!=r)return t.ir.numlit(r);if("number"==typeof e){if(n=e,!t.target.switches.boxDebug&&(0|n)==n&&-1073741824<=n&&n<=1073741823)return t.ir.numlit(e<<1|1);{let n=he.emitDouble(e);return t.ir.ptrlit(n,JSON.stringify(e))}}throw t.U.oops("bad literal: "+e)}return t.ir.numlit(e);var n}function Qt(e){if(e.kind==t.SK.NullKeyword){let t=u(e).valueOverride;if(null!=t)return t.exprKind==o.NumberLiteral?!r.target.isNative||!!(1&t.data):t.exprKind==o.RuntimeCall&&"pxt::ptrOfLiteral"==t.data?t.args[0].exprKind==o.PointerLiteral&&!isNaN(parseFloat(t.args[0].jsInfo)):t.exprKind==o.PointerLiteral&&!isNaN(parseFloat(t.jsInfo))}return e.kind==t.SK.NumericLiteral||_e(ee(e))}function Yt(e,n){return t.ir.rtcallMask(e,(1<<n.length)-1,0,n)}function Xt(e,n,i,s=null){let c=[],l=t.hexfile.lookupFunc(e);if(g()){let n=t.U.lookup(a,e);n&&(l=n,e=n.name)}l&&(c=l.argsFmt),s&&(n=n.concat(s));let u=lt(n),d=[],p=n.map(((n,r)=>{let a=vn(n);if(!m())return a;let s=c[r+1],l=Qt(n);if(!s&&e.indexOf("::")<0&&(s=l?"I":"_"),s){if("_"==s[0]||"T"==s||"N"==s){let e=function(e){switch(e){case"_Buffer":return pxt.BuiltInType.BoxedBuffer;case"_Image":return t.target.imageRefTag||pxt.BuiltInType.RefImage;case"_Action":return pxt.BuiltInType.RefAction;case"_RefCollection":return pxt.BuiltInType.RefCollection;default:return null}}(s);return e&&d.push({argIdx:r,method:"_validate",refTag:e,refTagNullable:!!i.argsNullable}),a}if("I"==s)return a.exprKind==o.NumberLiteral&&"number"==typeof a.data?t.ir.numlit(a.data>>1):(d.push({argIdx:r,method:"pxt::toInt"}),a);if("B"==s)return u&=~(1<<r),an(n,a);if("S"==s)return a.isStringLiteral||(d.push({argIdx:r,method:"_pxt_stringConv",returnsRef:!0}),u|=1<<r),a;if("F"==s||"D"==s)return"D"==s&&t.U.oops("double arguments not yet supported"),l||t.U.userError("argsFmt=...F/D... but argument not a number in "+e),d.push({argIdx:r,method:"D"==s?"pxt::toDouble":"pxt::toFloat"}),a;throw t.U.oops("invalid format specifier: "+s)}throw t.U.userError("not enough args for "+e)})),f=t.ir.rtcallMask(e,u,i?i.callingConvention:0,p);if(f.mask||(f.mask={refMask:0}),f.mask.conversions=d,r.target.isNative){let e=c[0];"I"==e?f=h(f):"B"==e?f=y(f):"F"==e?f=function(e){return m()?t.ir.rtcall("pxt::fromFloat",[e]):e}(f):"D"==e&&(t.U.oops("double returns not yet supported"),f=function(e){return m()?t.ir.rtcall("pxt::fromDouble",[e]):e}(f))}return f}function Zt(n){he.numStmts++;const a=t.assembler.debug||t.target.switches.size||t.target.sourceMap;let o=!!r.breakpoints;if(!a&&!o)return;const s=e.getSourceFileOfNode(n);if(r.justMyCode&&l(s)&&(o=!1),!a&&!o)return;let c=n.pos;for(;/^\s$/.exec(s.text[c]);)c++;for(;"/"==s.text[c]&&"/"==s.text[c+1];){for(;s.text[c]&&"\n"!=s.text[c];)c++;c++}const u=e.getLineAndCharacterOfPosition(s,c);if(a){let e=n.end;e-c>80&&(e=c+80);const r=s.text.slice(c,e).trim().replace(/\n[^]*/,"...");ge.emit(t.ir.comment(`${s.fileName.replace(/pxt_modules\//,"")}(${u.line+1},${u.character+1}): ${r}`))}if(!o)return;const d=e.getLineAndCharacterOfPosition(s,n.end),p={id:i.breakpoints.length,isDebuggerStmt:n.kind==t.SK.DebuggerStatement,fileName:s.fileName,start:c,length:n.end-c,line:u.line,endLine:d.line,column:u.character,endColumn:d.character};i.breakpoints.push(p);const f=t.ir.stmt(t.ir.SK.Breakpoint,null);f.breakpointInfo=p,ge.emit(f)}function en(e,n){switch(n){case t.SK.PlusToken:return"numops::adds";case t.SK.MinusToken:return"numops::subs";case t.SK.SlashToken:return"numops::div";case t.SK.PercentToken:return"numops::mod";case t.SK.AsteriskToken:return"numops::muls";case t.SK.AsteriskAsteriskToken:return"Math_::pow";case t.SK.AmpersandToken:return"numops::ands";case t.SK.BarToken:return"numops::orrs";case t.SK.CaretToken:return"numops::eors";case t.SK.LessThanLessThanToken:return"numops::lsls";case t.SK.GreaterThanGreaterThanToken:return"numops::asrs";case t.SK.GreaterThanGreaterThanGreaterThanToken:return"numops::lsrs";case t.SK.LessThanEqualsToken:return"numops::le";case t.SK.LessThanToken:return"numops::lt";case t.SK.GreaterThanEqualsToken:return"numops::ge";case t.SK.GreaterThanToken:return"numops::gt";case t.SK.EqualsEqualsToken:return"numops::eq";case t.SK.EqualsEqualsEqualsToken:return"numops::eqq";case t.SK.ExclamationEqualsEqualsToken:return"numops::neqq";case t.SK.ExclamationEqualsToken:return"numops::neq";default:return null}}function tn(e){if(e.operatorToken.kind==t.SK.EqualsToken)return function(e){let n=e.right;e.parent.kind==t.SK.ExpressionStatement&&(n=null);let r=Pt(e.left,n);Mt(e.left,e.right,!0);let i=n?vn(n):Wt(void 0);return r(),i}(e);const n=zt(e);if(n)return Wt(n.val);let r=null,i=null;e.operatorToken.kind!=t.SK.PlusToken&&e.operatorToken.kind!=t.SK.PlusEqualsToken||(r=ee(e.left),i=ee(e.right),(ue(r)||ue(i)&&e.operatorToken.kind==t.SK.PlusToken)&&(u(e).exprInfo={leftType:L.typeToString(r),rightType:L.typeToString(i)}));if(e.operatorToken.kind==t.SK.CommaToken){if(sn(e.left))return vn(e.right);{let n=cn(e.left);return t.ir.op(o.Sequence,[n,vn(e.right)])}}switch(e.operatorToken.kind){case t.SK.BarBarToken:case t.SK.AmpersandAmpersandToken:return function(e){let n=vn(e.left),r=(ue(ee(e.left)),ge.mkLabel("lazy"));n=t.ir.shared(n);let i=t.ir.rtcall("numops::toBool",[n]),a=ge.mkLabel("lazySkip"),o=e.operatorToken.kind==t.SK.BarBarToken?t.ir.JmpMode.IfZero:e.operatorToken.kind==t.SK.AmpersandAmpersandToken?t.ir.JmpMode.IfNotZero:t.U.oops();return ge.emitJmp(a,i,o),ge.emitJmp(r,n,t.ir.JmpMode.Always,n),ge.emitLbl(a),ge.emitExpr(Yt("langsupp::ignore",[n])),ge.emitJmp(r,vn(e.right),t.ir.JmpMode.Always),ge.emitLbl(r),Dt()}(e);case t.SK.InstanceOfKeyword:return function(e){let n=ee(e.right),r=Q(n)?st(e.right):null;r&&r.kind==t.SK.ClassDeclaration||f(9275,U("unsupported instanceof expression"));let i=$e(n,r);yt(i);let a=t.ir.op(t.ir.EK.InstanceOf,[vn(e.left)],i);return a.jsInfo="bool",a}(e)}if(e.operatorToken.kind==t.SK.PlusToken&&(ue(r)||ue(i)))return Xt("String_::concat",[We(e.left),We(e.right)],null);if(e.operatorToken.kind==t.SK.PlusEqualsToken&&ue(r)){let n=Pt(e.left),r=t.ir.shared(Xt("String_::concat",[We(e.left),We(e.right)],null));return Mt(e.left,Ot(r)),n(),r}let a=function(e){switch(e){case t.SK.PlusEqualsToken:return t.SK.PlusToken;case t.SK.MinusEqualsToken:return t.SK.MinusToken;case t.SK.AsteriskEqualsToken:return t.SK.AsteriskToken;case t.SK.AsteriskAsteriskEqualsToken:return t.SK.AsteriskAsteriskToken;case t.SK.SlashEqualsToken:return t.SK.SlashToken;case t.SK.PercentEqualsToken:return t.SK.PercentToken;case t.SK.LessThanLessThanEqualsToken:return t.SK.LessThanLessThanToken;case t.SK.GreaterThanGreaterThanEqualsToken:return t.SK.GreaterThanGreaterThanToken;case t.SK.GreaterThanGreaterThanGreaterThanEqualsToken:return t.SK.GreaterThanGreaterThanGreaterThanToken;case t.SK.AmpersandEqualsToken:return t.SK.AmpersandToken;case t.SK.BarEqualsToken:return t.SK.BarToken;case t.SK.CaretEqualsToken:return t.SK.CaretToken;default:return t.SK.Unknown}}(e.operatorToken.kind),s=en(0,a||e.operatorToken.kind);return s||Ae(e.operatorToken,U("unsupported operator"),9250),a?Ft(e.left,s,!1,e.right):(n=>{n=Ut(n);let r=[e.left,e.right];return t.ir.rtcallMask(n,lt(r),0,r.map((e=>vn(e))))})(s)}function nn(e){e.statements.forEach(kn)}function rn(t){if(t.flags&e.NodeFlags.Let||t.flags&e.NodeFlags.Const)return!0;throw f(9260,U("variable needs to be defined using 'let' instead of 'var'"))}function an(e,n=null){if(!n&&g()&&e.kind==t.SK.BinaryExpression){let n=e,r=t.U.lookup(t.thumbCmpMap,en(0,n.operatorToken.kind));if(r)return t.ir.rtcall(r,[vn(n.left),vn(n.right)])}return n||(n=vn(e)),_()?n:t.ir.rtcall("numops::toBoolDecr",[n])}function on(e){let t=d(e);return{fortop:".fortop."+t,cont:".cont."+t,brk:".brk."+t,ret:".ret."+t}}function sn(e){if(!e)return!0;switch(e.kind){case t.SK.Identifier:case t.SK.StringLiteral:case t.SK.NumericLiteral:case t.SK.NullKeyword:return!0}return!1}function cn(e){return vn(e)}function ln(e){if(sn(e))return;Zt(e);let t=cn(e);ge.emitExpr(t),ge.stackEmpty()}function un(e=1){for(;e--;)ge.emitExpr(Yt("pxt::endTry",[]))}function dn(){f(9282,U("jumps (return, break, continue) through finally blocks not supported yet"))}function pn(t){let n=0;if(t.kind==e.SyntaxKind.Block&&t.parent)if(t.parent.kind==e.SyntaxKind.CatchClause){t.parent.parent.finallyBlock&&(n++,dn())}else if(t.parent.kind==e.SyntaxKind.TryStatement){const e=t.parent;e.tryBlock==t&&(e.catchClause&&n++,e.finallyBlock&&(n++,dn()))}return n}function fn(e){switch(e.kind){case t.SK.WhileStatement:case t.SK.ForInStatement:case t.SK.ForOfStatement:case t.SK.ForStatement:case t.SK.DoStatement:return!0;default:return!1}}function _n(e,n,i){if(e.name.kind===t.SK.ObjectBindingPattern||e.name.kind==t.SK.ArrayBindingPattern)return n||(n=e.initializer?t.ir.shared(vn(e.initializer)):ze(e),i=e.initializer?ee(e.initializer):ee(e)),e.name.elements.forEach((e=>_n(e,n,i))),ge.stackEmpty(),null;if(!nt(e))return null;if(Kt(e))return null;let a;if(P(e)?(Le(e),a=Re(e)):a=ge.mkLocal(e,Ie(e)),Tt(a.info),a.isByRefLocal()&&ge.emitExpr(a.storeDirect(t.ir.rtcall("pxtrt::mklocRef",[]))),Fe(ee(e)),e.kind===t.SK.BindingElement){Zt(e);let[t,r]=gn(e,n,i);ge.emitExpr(a.storeByRef(t))}else if(e.initializer){if(Zt(e),P(e)){let n=J(e).jres;if(n){"true"==n&&(n=$(L,e));let i=t.U.lookup(r.jres||{},n);i?te=i:f(9270,U("resource '{0}' not found in any .jres file",n))}}e.initializer,ge.emitExpr(a.storeByRef(vn(e.initializer))),te=null,ge.stackEmpty()}else(function(e){for(;e;){if(fn(e))return!0;e=e.parent}return!1})(e)&&(Zt(e),ge.emitExpr(a.storeByRef(Wt(void 0))),ge.stackEmpty());return a}function mn(e){return _n(e,null,null)}function gn(e,n,r){const i=e.parent.parent;if(i.kind===t.SK.BindingElement){const e=gn(i,n,r);n=e[0],r=e[1]}if(e.parent.kind==t.SK.ArrayBindingPattern){const i=e.parent.elements.indexOf(e);e.dotDotDotToken&&f(9203,U("spread operator not supported yet"));const a=Y(r,i);return[Yt("Array_::getAt",[n,t.ir.numlit(i)]),a]}return function(e,n,r,i){const a=L.getPropertyOfType(r,i);t.U.assert(!!a,"field sym");const s=L.getTypeOfSymbolAtLocation(a,e);let c;if(Q(r)){const e=$e(r);c=t.ir.op(o.FieldAccess,[n],Lt(e,Rt(e,i)))}else c=_t([n],{ifaceIndex:Oe(i,!0),callLocationIndex:Tn(e),noArgs:!0});return[c,s]}(e,n,r,(e.propertyName||e.name).text)}function hn(e){!function(e,n){const r=e=>{e&&e.kind==t.SK.ClassDeclaration&&f(9261,U("Interface with same name as a class not supported"))};if(r(n.symbol.valueDeclaration),n.symbol.declarations&&n.symbol.declarations.forEach(r),n.heritageClauses)for(let e of n.heritageClauses)switch(e.token){case t.SK.ExtendsKeyword:W(ee(e.types[0]))&&f(9262,U("Extending a class by an interface not supported."))}}(0,e);let n=J(e);n.autoCreate&&(V[n.autoCreate]=!0)}function yn(e,t){let n=M;j++;try{M=null;let r=t(e);return M&&f(B,M),M=n,j--,r}catch(t){return j--,M=null,De(e,t.ksErrorCode||9200,t.message),pxt.debug(t.stack),null}}function vn(e,n=!0){let r=e;if(n&&r.cachedIR)return r.cachedIR;let i=yn(r,bn)||Wt(void 0);return n&&r.needsIRCache?(r.cachedIR=t.ir.shared(i),r.cachedIR):i}function bn(n){let r=function(n){switch(n.kind){case t.SK.NullKeyword:let r=u(n).valueOverride;return r||Wt(null);case t.SK.TrueKeyword:return Wt(!0);case t.SK.FalseKeyword:return Wt(!1);case t.SK.TemplateHead:case t.SK.TemplateMiddle:case t.SK.TemplateTail:case t.SK.NumericLiteral:case t.SK.StringLiteral:case t.SK.NoSubstitutionTemplateLiteral:return function(e){if(e.kind==t.SK.NumericLiteral)return e.imageLiteral?t.ir.ptrlit(e.imageLiteral,e.jsLit):Wt(parseFloat(e.text));if(x(e))return Ge(e.text);throw t.oops()}(n);case t.SK.TaggedTemplateExpression:return vt(n);case t.SK.PropertyAccessExpression:return Ye(n);case t.SK.BinaryExpression:return tn(n);case t.SK.PrefixUnaryExpression:return function(e){const n=zt(e);if(n)return Wt(n.val);switch(e.operator){case t.SK.ExclamationToken:return y(t.ir.rtcall("Boolean_::bang",[an(e.operand)]));case t.SK.PlusPlusToken:return Ft(e.operand,"numops::adds",!1);case t.SK.MinusMinusToken:return Ft(e.operand,"numops::subs",!1);case t.SK.PlusToken:case t.SK.MinusToken:{let n=vn(e.operand),r=Gt(n);return null!=r?Wt(-r):e.operator==t.SK.MinusToken?Bt("numops::subs",Wt(0),n):Bt("numops::subs",n,Wt(0))}case t.SK.TildeToken:{let t=vn(e.operand),n=Gt(t);return null!=n?Wt(~n):Yt(Ut("numops::bnot"),[t])}default:throw Ae(e,U("unsupported prefix unary operation"),9245)}}(n);case t.SK.PostfixUnaryExpression:return function(e){if(de(ee(e.operand)))switch(e.operator){case t.SK.PlusPlusToken:return Ft(e.operand,"numops::adds",!0);case t.SK.MinusMinusToken:return Ft(e.operand,"numops::subs",!0)}throw Ae(e,U("unsupported postfix unary operation"),9246)}(n);case t.SK.ElementAccessExpression:return et(n);case t.SK.ParenthesizedExpression:return function(e){return vn(e.expression)}(n);case t.SK.TypeAssertionExpression:return function(e){return e.expression,vn(e.expression)}(n);case t.SK.ArrayLiteralExpression:return function(e){Y(ee(e));let n=t.ir.shared(t.ir.rtcall("Array_::mk",[]));for(let r of e.elements){let e=ct(r)?2:0;ge.emitExpr(t.ir.rtcall("Array_::push",[n,vn(r)],e))}return n}(n);case t.SK.NewExpression:return function(e){let n=L.getTypeAtLocation(e);if(n&&H(n))throw t.oops();if(n&&Q(n)){let n,r=st(e.expression);r.kind!=t.SK.ClassDeclaration&&f(9221,U("new expression only supported on class types"));let i=$e(ee(e),r);for(let e=i;e&&(n=ht(e.decl),!n);e=e.baseClassInfo);yt(i);let a=i.id+"_VT",o=t.ir.rtcall("pxt::mkClassInstance",[t.ir.ptrlit(a,a)]);if(n){o=Et(o),rt(n);let r=(e.arguments||[]).slice(0),i=J(n);dt(L.getResolvedSignature(e),r,i);let a=r.map((e=>vn(e)));return i.shim?t.ir.rtcall(i.shim,a):(a.unshift(o),ge.emitExpr(gt(n,e,a)),o)}return e.arguments&&e.arguments.length&&f(9222,U("constructor with arguments not found")),o}throw Ae(e,U("unknown type for new"),9243)}(n);case t.SK.SuperKeyword:case t.SK.ThisKeyword:return He(n);case t.SK.CallExpression:return function(e){const t=L.getResolvedSignature(e);return pt(e,e.expression,e.arguments,t)}(n);case t.SK.FunctionExpression:case t.SK.ArrowFunction:return wt(n);case t.SK.Identifier:return Ve(n);case t.SK.ConditionalExpression:return function(e){let n=ge.mkLabel("condexprz"),r=ge.mkLabel("condexprfin");return ge.emitJmp(n,an(e.condition),t.ir.JmpMode.IfZero),ge.emitJmp(r,vn(e.whenTrue),t.ir.JmpMode.Always),ge.emitLbl(n),ge.emitJmp(r,vn(e.whenFalse),t.ir.JmpMode.Always),ge.emitLbl(r),Dt()}(n);case t.SK.AsExpression:return function(e){return e.expression,vn(e.expression)}(n);case t.SK.TemplateExpression:return Qe(n);case t.SK.ObjectLiteralExpression:return function(e){let n=t.ir.shared(t.ir.rtcall("pxtrt::mkMap",[]));return e.properties.forEach((e=>{let r,i;if(t.assert(!e.questionToken),e.kind==t.SK.ShorthandPropertyAssignment){const n=e;t.assert(!n.equalsToken&&!n.objectAssignmentInitializer),r=e.name.text;const a=L.getShorthandAssignmentValueSymbol(e),o=a&&a.valueDeclaration&&a.valueDeclaration.name;if(!o||o.kind!=t.SK.Identifier)throw Ae(e);i=Ve(o)}else{if(e.name.kind==t.SK.ComputedPropertyName){const t=e.name.expression;return void ge.emitExpr(Xt("pxtrt::mapSetByString",[Ot(n,!0),t,e.initializer],null))}r=e.name.kind==t.SK.StringLiteral?e.name.text:e.name.getText(),i=vn(e.initializer)}const a=t.target.isNative?t.ir.numlit(Oe(r)):t.ir.ptrlit(null,JSON.stringify(r)),o=[n,a,i];ge.emitExpr(t.ir.rtcall(t.target.isNative?"pxtrt::mapSet":"pxtrt::mapSetByString",o))})),n}(n);case t.SK.TypeOfExpression:return function(e){return Xt("pxt::typeOf",[e.expression],null)}(n);case e.SyntaxKind.DeleteExpression:return function(e){let n,r;if(e.expression.kind==t.SK.PropertyAccessExpression){const t=e.expression;n=t.expression,r=Ot(Ge(t.name.text))}else{if(e.expression.kind!=t.SK.ElementAccessExpression)throw f(9276,U("expression not supported as argument to 'delete'"));{const t=e.expression;n=t.expression,r=t.argumentExpression}}const i=ee(n);if(W(i))throw f(9277,U("'delete' not supported on class types"));if(H(i))throw f(9277,U("'delete' not supported on array"));return Xt("pxtrt::mapDeleteByString",[n,r],null)}(n);default:return Ae(n),null}}(n);if(r.isExpr())return r;throw new Error("expecting expression")}function xn(n){const r=u(n);if(r.usedNodes){ie=!1;for(let e of t.U.values(r.usedNodes))rt(e);for(let e of r.usedActions)e(he);ie=!0}else P(n)||e.isClassDeclaration(n)?(ie=!1,re=r,re.usedNodes=null,re.usedActions=null,P(n)&&!Kt(n)&&Le(n),kn(n),ie=!0):(re=r,re.usedNodes={},re.usedActions=[],kn(n),re=null)}function kn(e){yn(e,Sn)}function Sn(n){switch(n.kind){case t.SK.SourceFile:return function(e){e.statements.forEach(kn)}(n);case t.SK.InterfaceDeclaration:return hn(n);case t.SK.VariableStatement:return function(n){function r(e){let n=t.U.lookup(X,e.name);if(n||(n=e,X[e.name]=n),n.value!=e.value)throw f(9269,U("conflicting values for config.{0}",e.name))}if(n.declarationList.flags&e.NodeFlags.Const){let e=n.parent&&n.parent.kind==t.SK.ModuleBlock?q(n.parent.parent):"?";if("config"==e||"userconfig"==e)for(let t of n.declarationList.declarations){let i=ae(t);if(!t.initializer)continue;let a=Jt(t.initializer),o=Ht(n,"CFG_"+i);if(null==o||0==o)throw f(9268,U("can't find DAL.CFG_{0}",i));"userconfig"==e&&(i="!"+i),r({name:i,key:o,value:a})}}e.isInAmbientContext(n)||(rn(n.declarationList),n.declarationList.declarations.forEach(kn))}(n);case t.SK.ModuleDeclaration:return function(e){kn(e.body)}(n);case t.SK.EnumDeclaration:return;case t.SK.FunctionDeclaration:case t.SK.Constructor:case t.SK.MethodDeclaration:return void wt(n);case t.SK.ExpressionStatement:return function(e){ln(e.expression)}(n);case t.SK.Block:case t.SK.ModuleBlock:return nn(n);case t.SK.VariableDeclaration:return mn(n),void St();case t.SK.IfStatement:return function(e){Zt(e);let t=ge.mkLabel("else");ge.emitJmpZ(t,an(e.expression)),kn(e.thenStatement);let n=ge.mkLabel("afterif");ge.emitJmp(n),ge.emitLbl(t),e.elseStatement&&kn(e.elseStatement),ge.emitLbl(n)}(n);case t.SK.WhileStatement:return function(e){Zt(e);let t=on(e);ge.emitLblDirect(t.cont),Zt(e.expression),ge.emitJmpZ(t.brk,an(e.expression)),kn(e.statement),ge.emitJmp(t.cont),ge.emitLblDirect(t.brk)}(n);case t.SK.DoStatement:return function(e){Zt(e);let t=on(e);ge.emitLblDirect(t.cont),kn(e.statement),Zt(e.expression),ge.emitJmpZ(t.brk,an(e.expression)),ge.emitJmp(t.cont),ge.emitLblDirect(t.brk)}(n);case t.SK.ForStatement:return function(e){e.initializer&&e.initializer.kind==t.SK.VariableDeclarationList?(rn(e.initializer),e.initializer.declarations.forEach(kn)):ln(e.initializer),Zt(e);let n=on(e);ge.emitLblDirect(n.fortop),e.condition&&(Zt(e.condition),ge.emitJmpZ(n.brk,an(e.condition))),kn(e.statement),ge.emitLblDirect(n.cont),ln(e.incrementor),ge.emitJmp(n.fortop),ge.emitLblDirect(n.brk)}(n);case t.SK.ForOfStatement:return function(e){if(!e.initializer||e.initializer.kind!=t.SK.VariableDeclarationList)return void Ae(e,"only a single variable may be used to iterate a collection");let n=e.initializer;if(1!=n.declarations.length)return void Ae(e,"only a single variable may be used to iterate a collection");rn(n);let r=ee(e.expression),i="",a="";if(ue(r))i="String_::charAt",a="String_::length";else{if(!H(r))return void Ae(e.expression,"cannot use for...of with this expression");i="Array_::getAt",a="Array_::length"}rt(n.declarations[0]);const o=mn(n.declarations[0]);t.U.assert(!!o||!he.finalPass),ge.stackEmpty();let s=ge.mkLocalUnnamed();ge.emitExpr(s.storeByRef(vn(e.expression)));let c=ge.mkLocalUnnamed();ge.emitExpr(c.storeByRef(Wt(0))),ge.stackEmpty(),Zt(e);let l=on(e);ge.emitLblDirect(l.fortop);let u=t.ir.rtcall(a,[s.loadCore()]),d=Bt("numops::lt_bool",c.load(),h(u));ge.emitJmpZ(l.brk,d);let p=e=>m()?t.ir.rtcall("pxt::toInt",[e]):e;o&&(ge.emitExpr(o.storeByRef(t.ir.rtcall(i,[s.loadCore(),p(c.loadCore())]))),Zt(e.initializer)),St(),kn(e.statement),ge.emitLblDirect(l.cont),ge.emitExpr(c.storeByRef(Bt("numops::adds",c.load(),Wt(1)))),ge.emitJmp(l.fortop),ge.emitLblDirect(l.brk),ge.emitExpr(s.storeByRef(Wt(void 0)))}(n);case t.SK.ContinueStatement:case t.SK.BreakStatement:return function(n){Zt(n);let r=n.label?n.label.text:null,i=n.kind==t.SK.BreakStatement,a=0,o=function n(o){return o?r&&o.kind==t.SK.LabeledStatement&&o.label.text==r?o.statement:o.kind==t.SK.SwitchStatement&&!r&&i||!r&&e.isIterationStatement(o,!1)?o:(a+=pn(o),n(o.parent)):null}(n);if(o){let r=on(o);un(a),n.kind==t.SK.ContinueStatement?e.isIterationStatement(o,!1)?ge.emitJmp(r.cont):De(n,9231,U("continue on non-loop")):n.kind==t.SK.BreakStatement?ge.emitJmp(r.brk):t.oops()}else De(n,9230,U("cannot find outer loop"))}(n);case t.SK.LabeledStatement:return function(e){let t=on(e.statement);kn(e.statement),ge.emitLblDirect(t.brk)}(n);case t.SK.ReturnStatement:return function(e){Zt(e);let n=null;e.expression?n=vn(e.expression):ne(ge.action)&&(n=Wt(void 0));let r=0;for(let t=e;t&&t!=ge.action;t=t.parent)r+=pn(t);un(r),ge.emitJmp(on(ge.action).ret,n,t.ir.JmpMode.Always)}(n);case t.SK.ClassDeclaration:return function(e){const t=$e(null,e);t.isUsed&&he.usedClassInfos.indexOf(t)<0&&he.usedClassInfos.push(t),e.members.forEach(kn)}(n);case t.SK.PropertyDeclaration:case t.SK.PropertyAssignment:return function(e){if(k(e))mn(e);else if(e.initializer){let t=$e(ee(e.parent));he.finalPass&&t.isUsed&&!t.ctor&&f(9209,U("class field initializers currently require an explicit constructor"))}}(n);case t.SK.SwitchStatement:return function(e){Zt(e);let n,r=on(e),i=t.ir.shared(vn(e.expression)),a=e.caseBlock.clauses.map((e=>{let r=ge.mkLabel("switch");if(e.kind==t.SK.CaseClause){let n=e,a=vn(n.expression),o=ct(n.expression)?1:0,s=t.ir.rtcallMask(Ut("pxt::switch_eq"),o,0,[a,i]);ge.emitJmp(r,s,t.ir.JmpMode.IfNotZero,i)}else e.kind==t.SK.DefaultClause?(t.assert(!n,"!defaultLabel"),n=r):t.oops();return r}));n?ge.emitJmp(n,i):ge.emitJmp(r.brk,i),e.caseBlock.clauses.forEach(((e,t)=>{ge.emitLbl(a[t]),e.statements.forEach(kn)})),ge.emitLblDirect(r.brk)}(n);case t.SK.TypeAliasDeclaration:return;case e.SyntaxKind.TryStatement:return function(e){const n=e=>Yt("pxt::beginTry",[t.ir.ptrlit(e.lblName,e)]);Zt(e);const r=ge.mkLabel("catch");r.lblName="_catch_"+d(e);const i=ge.mkLabel("finally");if(i.lblName="_finally_"+d(e),e.finallyBlock&&ge.emitExpr(n(i)),e.catchClause&&ge.emitExpr(n(r)),ge.stackEmpty(),nn(e.tryBlock),ge.stackEmpty(),e.catchClause){const t=ge.mkLabel("catchend");un(),ge.emitJmp(t),ge.emitLbl(r);const n=e.catchClause.variableDeclaration;if(n){mn(n);const e=Re(n);ge.emitExpr(e.storeByRef(Yt("pxt::getThrownValue",[])))}St(),nn(e.catchClause.block),ge.emitLbl(t)}e.finallyBlock&&(un(),ge.emitLbl(i),nn(e.finallyBlock),ge.emitExpr(Yt("pxt::endFinally",[])))}(n);case e.SyntaxKind.ThrowStatement:return function(e){Zt(e),ge.emitExpr(Yt("pxt::throwValue",[vn(e.expression)]))}(n);case t.SK.DebuggerStatement:return function(e){Zt(e)}(n);case t.SK.GetAccessor:case t.SK.SetAccessor:return function(e){wt(e)}(n);case t.SK.ImportEqualsDeclaration:case t.SK.EmptyStatement:case t.SK.SemicolonClassElement:return;default:Ae(n)}}function Tn(e){return i.procCallLocations.push(t.nodeLocationInfo(e))-1}},t.isStringType=ue;class pe{constructor(){this.procs=[],this.globals=[],this.finalPass=!1,this.writeFile=(e,t)=>{},this.usedClassInfos=[],this.numStmts=1,this.commSize=0,this.itEntries=0,this.itFullEntries=0,this.numMethods=0,this.numVirtMethods=0,this.usedChars=new Uint32Array(2048),this.explicitlyUsedIfaceMembers={},this.ifaceMemberMap={},this.strings={},this.hexlits={},this.doubles={},this.otherLiterals=[],this.codeHelpers={},this.lblNo=0}reset(){this.lblNo=0,this.otherLiterals=[],this.strings={},this.hexlits={},this.doubles={},this.numStmts=0}getTitle(){const e=this.name||t.U.lf("Untitled");return e.length>=90?e.slice(0,87)+"...":e}addProc(e){t.assert(!this.finalPass,"!this.finalPass"),this.procs.push(e),e.seqNo=this.procs.length}recordHelper(e,t,n){const r=e=>{e.codeHelpers[t]||(e.codeHelpers[t]=n(e))};r(this),this.recordAction(e,r)}recordAction(e,n){e?e.usedActions&&e.usedActions.push(n):t.U.oops("no using ctx!")}emitLabelled(e,n,r){let i=t.U.lookup(n,e);if(null!=i)return i;let a=r+this.lblNo++;return n[e]=a,a}emitDouble(e){return this.emitLabelled(t.target.switches.numFloat?function(e){let n=new Float32Array(1);return n[0]=e,t.U.toHex(new Uint8Array(n.buffer))}(e):function(e){let n=new Float64Array(1);return n[0]=e,t.U.toHex(new Uint8Array(n.buffer))}(e),this.doubles,"_dbl")}emitString(e){if(!this.finalPass)for(let t=0;t<e.length;++t){const n=e.charCodeAt(t);n>=128&&(this.usedChars[n>>5]|=1<<(31&n))}return this.emitLabelled(e,this.strings,"_str")}emitHexLiteral(e){return this.emitLabelled(e,this.hexlits,"_hexlit")}setPerfCounters(e){if(!t.target.switches.profile)return[];const n=e.slice();return this.procs.forEach((e=>{e.perfCounterName&&(t.U.assert(t.target.switches.profile),e.perfCounterNo=n.length,n.push(e.perfCounterName))})),n}}function fe(e){if(!e.modifiers)return!1;if(e.parent.kind!=t.SK.Constructor)return!1;for(let n of e.modifiers)if(n.kind==t.SK.PrivateKeyword||n.kind==t.SK.PublicKeyword||n.kind==t.SK.ProtectedKeyword)return!0;return!1}function _e(t){return t.flags&e.TypeFlags.Union?t.types.every((e=>_e(e))):!!(t.flags&(e.TypeFlags.NumberLike|e.TypeFlags.EnumLike|e.TypeFlags.BooleanLike))}function me(e,t,n,r){const i=r(e);return t&&e.recordAction(n,r),i}t.Binary=pe,t.isCtorField=fe}(e.pxtc||(e.pxtc={}))}(ts||(ts={})),function(ts){var pxtc;(function(pxtc){function getTsCompilerOptions(e){let t=ts.getDefaultCompilerOptions();return t.target=ts.ScriptTarget.ES5,t.module=ts.ModuleKind.None,t.noImplicitAny=!0,t.noImplicitReturns=!0,t.allowUnreachableCode=!0,t}function nodeLocationInfo(e){let t=ts.getSourceFileOfNode(e);const n=e.getStart?e.getStart():e.pos,{line:r,character:i}=ts.getLineAndCharacterOfPosition(t,n),{line:a,character:o}=ts.getLineAndCharacterOfPosition(t,e.end);return{start:n,length:e.end-n,line:r,column:i,endLine:a,endColumn:o,fileName:t.fileName}}function patchUpDiagnostics(e,t=!1){t&&(e=e.filter((e=>5012!==e.code)));let n=e.filter((e=>1148==e.code));return n.length>0&&(e=n),e.map((e=>{if(!e.file){return{code:e.code,start:e.start,length:e.length,line:0,column:0,messageText:ts.flattenDiagnosticMessageText(e.messageText,"\n"),category:e.category,fileName:"?"}}const t=ts.getLineAndCharacterOfPosition(e.file,e.start);let n={code:e.code,start:e.start,length:e.length,line:t.line,column:t.character,messageText:ts.flattenDiagnosticMessageText(e.messageText,"\n"),category:e.category,fileName:e.file.fileName};return 1148==n.code&&(n.messageText=pxtc.Util.lf("all symbols in top-level scope are always exported; please use a namespace if you want to export only some")),n}))}function py2tsIfNecessary(e){if(e.target.preferredEditor==pxt.PYTHON_PROJECT_NAME){return pxtc.transpile.pyToTs(e)}}function mkCompileResult(){return{outfiles:{},diagnostics:[],success:!1,times:{}}}function storeGeneratedFiles(e,t){for(let n of e.generatedFiles||[])t.outfiles[n]=e.fileSystem[n]}function runConversionsAndStoreResults(e,t){const n=pxtc.U.cpuUs();t||(t=mkCompileResult());const r=py2tsIfNecessary(e);r&&(t=Object.assign(Object.assign({},t),{diagnostics:r.diagnostics,sourceMap:r.sourceMap,globalNames:r.globalNames})),storeGeneratedFiles(e,t),e.sourceFiles||(e.sourceFiles=Object.keys(e.fileSystem));const i=e.sourceFiles.indexOf(pxt.MAIN_TS);i>=0&&(e.sourceFiles.splice(i,1),e.sourceFiles.push(pxt.MAIN_TS));const a=e.sourceFiles.indexOf(pxt.TUTORIAL_CODE_STOP);return a>=0&&(e.sourceFiles.splice(a,1),e.sourceFiles.push(pxt.TUTORIAL_CODE_STOP)),t.times.conversions=pxtc.U.cpuUs()-n,t}function timesToMs(e){for(let t of Object.keys(e.times))e.times[t]=Math.round(e.times[t])/1e3}function buildProgram(e,t){let n={};for(let t in e.fileSystem)n[normalizePath(t)]=e.fileSystem[t];let r=getTsCompilerOptions(e),i={getSourceFile:(e,t,r)=>{e=normalizePath(e);let i="";return n.hasOwnProperty(e)?i=n[e]:r&&r("File not found: "+e),null==i&&(r("File not found: "+e),i=""),ts.createSourceFile(e,i,t,true)},fileExists:e=>(e=normalizePath(e),n.hasOwnProperty(e)),getCanonicalFileName:e=>e,getDefaultLibFileName:()=>"no-default-lib.d.ts",writeFile:(e,n,r,i)=>{t.outfiles[e]=n},getCurrentDirectory:()=>".",useCaseSensitiveFileNames:()=>!0,getNewLine:()=>"\n",readFile:e=>(e=normalizePath(e),n[e]||""),directoryExists:e=>!0,getDirectories:()=>[]},a=e.sourceFiles.filter((e=>pxtc.U.endsWith(e,".ts")));return ts.createProgram(a,r,i)}function isPxtModulesFilename(e){return pxtc.U.startsWith(e,"pxt_modules/")}function compile(opts,service){pxtc.compilerHooks||(pxtc.compilerHooks={},opts.target.compilerExtension&&eval(opts.target.compilerExtension)),pxtc.compilerHooks.init&&pxtc.compilerHooks.init(opts,service);let startTime=pxtc.U.cpuUs(),res=mkCompileResult(),program;if(service)storeGeneratedFiles(opts,res),program=service.getProgram();else{if(runConversionsAndStoreResults(opts,res),res.diagnostics.length>0)return res;program=buildProgram(opts,res)}const entryPoint=opts.sourceFiles.filter((e=>pxtc.U.endsWith(e,".ts"))).pop().replace(/.*\//,"");if(res.diagnostics=patchUpDiagnostics(program.getSyntacticDiagnostics(),opts.ignoreFileResolutionErrors),res.diagnostics.length>0)return opts.forceEmit&&(pxt.debug("syntactic errors, forcing emit"),pxtc.compileBinary(program,opts,res,entryPoint)),res;res.diagnostics=patchUpDiagnostics(program.getOptionsDiagnostics().concat(pxtc.Util.toArray(program.getGlobalDiagnostics())),opts.ignoreFileResolutionErrors);const semStart=pxtc.U.cpuUs();0==res.diagnostics.length&&(res.diagnostics=patchUpDiagnostics(program.getSemanticDiagnostics(),opts.ignoreFileResolutionErrors));const emitStart=pxtc.U.cpuUs();if(res.times["typescript-syn"]=semStart-startTime,res.times["typescript-sem"]=emitStart-semStart,res.times.typescript=emitStart-startTime,opts.ast&&(res.ast=program),opts.ast||opts.forceEmit||0==res.diagnostics.length){const e=pxtc.compileBinary(program,opts,res,entryPoint);res.times.compilebinary=pxtc.U.cpuUs()-emitStart,res.diagnostics=res.diagnostics.concat(patchUpDiagnostics(e.diagnostics))}0==res.diagnostics.length&&(res.success=!0);for(let e of opts.sourceFiles)pxtc.Util.startsWith(e,"built/")&&(res.outfiles[e.slice(6)]=opts.fileSystem[e]);return res.times.all=pxtc.U.cpuUs()-startTime,pxt.tickEvent("compile",res.times),res}function decompile(e,t,n,r=!1){let i=e.getSourceFile(n);pxtc.annotate(e,n,pxtc.target||pxt.appTarget&&pxt.appTarget.compile);const a=pxtc.getApiInfo(e,t.jres),o=pxtc.getBlocksInfo(a,t.bannedCategories),s={snippetMode:t.snippetMode||!1,alwaysEmitOnStart:t.alwaysDecompileOnStart,includeGreyBlockMessages:r,generateSourceMap:void 0!==t.generateSourceMap?t.generateSourceMap:!!t.ast,allowedArgumentTypes:t.allowedArgumentTypes||["number","boolean","string"],errorOnGreyBlocks:!!t.errorOnGreyBlocks},[c,l]=pxtc.decompiler.buildRenameMap(e,i,{declarations:"variables",takenNames:{}});return pxtc.decompiler.decompileToBlocks(o,i,s,c)}function decompileSnippets(e,t,n=!1){const r=pxtc.getApiInfo(e,t.jres),i=pxtc.getBlocksInfo(r,t.bannedCategories),a=new pxtc.decompiler.RenameMap([]),o={snippetMode:t.snippetMode||!1,alwaysEmitOnStart:t.alwaysDecompileOnStart,includeGreyBlockMessages:n,generateSourceMap:void 0!==t.generateSourceMap?t.generateSourceMap:!!t.ast,allowedArgumentTypes:t.allowedArgumentTypes||["number","boolean","string"],errorOnGreyBlocks:!!t.errorOnGreyBlocks};let s;const c=[];if(t.sourceTexts)for(let e=0;e<t.sourceTexts.length;e++){t.fileSystem[pxt.MAIN_TS]=t.sourceTexts[e],t.fileSystem[pxt.MAIN_BLOCKS]="";let n=getTSProgram(t,s);const r=n.getSourceFile(pxt.MAIN_TS),l=pxtc.decompiler.decompileToBlocks(i,r,o,a);c.push(l.outfiles[pxt.MAIN_BLOCKS]),s=n}return c}function getTSProgram(e,t){let n={},r={};for(let t in e.fileSystem)r[normalizePath(t)]=e.fileSystem[t];let i=getTsCompilerOptions(e),a={getSourceFile:(e,t,n)=>{e=normalizePath(e);let i="";return r.hasOwnProperty(e)?i=r[e]:n&&n("File not found: "+e),null==i&&(n("File not found: "+e),i=""),ts.createSourceFile(e,i,t,true)},fileExists:e=>(e=normalizePath(e),r.hasOwnProperty(e)),getCanonicalFileName:e=>e,getDefaultLibFileName:()=>"no-default-lib.d.ts",writeFile:(e,t,r,i)=>{n[e]=t},getCurrentDirectory:()=>".",useCaseSensitiveFileNames:()=>!0,getNewLine:()=>"\n",readFile:e=>(e=normalizePath(e),r[e]||""),directoryExists:e=>!0,getDirectories:()=>[]};e.sourceFiles||(e.sourceFiles=Object.keys(e.fileSystem));let o=e.sourceFiles.filter((e=>pxtc.U.endsWith(e,".ts"))),s=o.filter((e=>e!=pxt.MAIN_TS)),c=!1;o.length>s.length&&(o=s,o.push(pxt.MAIN_TS),c=!0);const l=o.indexOf(pxt.TUTORIAL_CODE_STOP);l>=0&&(o.splice(l,1),o.push(pxt.TUTORIAL_CODE_STOP));const u=ts.createProgram(o,i,a,t);return pxtc.annotate(u,pxt.MAIN_TS,pxtc.target||pxt.appTarget&&pxt.appTarget.compile),u}function normalizePath(e){e=e.replace(/\\/g,"/");const t=[];return e.split("/").forEach((e=>{".."===e&&t.length?t.pop():"."!==e&&t.push(e)})),t.join("/")}pxtc.getTsCompilerOptions=getTsCompilerOptions,pxtc.nodeLocationInfo=nodeLocationInfo,pxtc.patchUpDiagnostics=patchUpDiagnostics,pxtc.py2tsIfNecessary=py2tsIfNecessary,pxtc.storeGeneratedFiles=storeGeneratedFiles,pxtc.runConversionsAndStoreResults=runConversionsAndStoreResults,pxtc.timesToMs=timesToMs,pxtc.isPxtModulesFilename=isPxtModulesFilename,pxtc.compile=compile,pxtc.decompile=decompile,pxtc.decompileSnippets=decompileSnippets,pxtc.getTSProgram=getTSProgram})(pxtc=ts.pxtc||(ts.pxtc={}))}(ts||(ts={})),function(e){!function(t){const n=["type","offset","vaddr","paddr","filesz","memsz","flags","align"],r=e.HF2.read32,i=e.HF2.read16,a=4096;t.parse=function(t){1179403647!=r(t,0)&&e.U.userError("no magic"),1!=t[4]&&e.U.userError("not 32 bit"),1!=t[5]&&e.U.userError("not little endian"),1!=t[6]&&e.U.userError("bad version"),2!=i(t,16)&&e.U.userError("wrong object type"),40!=i(t,18)&&e.U.userError("not ARM");let o=r(t,28);r(t,32),0==o&&e.U.userError("expecting program headers");let s=i(t,42),c=i(t,44),l=e.U.range(c).map((e=>function(e){let i={},a=e;for(let a of n)i[a]=r(t,e),e+=4;let o=i;return o._filepos=a,o}(o+e*s))),u=t.length+1;for(;15&u;)u++;let d=0;for(let e of l)1==e.type&&(d=Math.max(d,e.vaddr+e.memsz));let p=(d+a-1&-4096)+(4095&u),f=-1;for(let e of l)4==e.type&&(f=e._filepos);return{imageMemStart:p,imageFileStart:u,phOffset:f,template:t}},t.patch=function(t,r){let i=new Uint8Array(t.imageFileStart+r.length);return i.fill(0),e.U.memcpy(i,0,t.template),e.U.memcpy(i,t.imageFileStart,r),function(t,r){let i=r._filepos;for(let a of n)e.HF2.write32(t,i,r[a]||0),i+=4}(i,{_filepos:t.phOffset,type:1,offset:t.imageFileStart,vaddr:t.imageMemStart,paddr:t.imageMemStart,filesz:r.length,memsz:r.length,flags:5,align:a}),i}}(e.elf||(e.elf={}))}(pxt||(pxt={})),function(e){!function(t){const n=e.HF2.read32,r=e.HF2.read16,i=[{name:"esp32",chipId:0,memmap:[{from:0,to:65536,id:"PADDING"},{from:1061158912,to:1065353216,id:"DROM"},{from:1065353216,to:1069547520,id:"EXTRAM_DATA"},{from:1073217536,to:1073225728,id:"RTC_DRAM"},{from:1073283072,to:1073741824,id:"BYTE_ACCESSIBLE"},{from:1073405952,to:1073741824,id:"DRAM"},{from:1073610752,to:1073741820,id:"DIRAM_DRAM"},{from:1073741824,to:1074200576,id:"IROM"},{from:1074200576,to:1074233344,id:"CACHE_PRO"},{from:1074233344,to:1074266112,id:"CACHE_APP"},{from:1074266112,to:1074397184,id:"IRAM"},{from:1074397184,to:1074528252,id:"DIRAM_IRAM"},{from:1074528256,to:1074536448,id:"RTC_IRAM"},{from:1074593792,to:1077936128,id:"IROM"},{from:1342177280,to:1342185472,id:"RTC_DATA"}]},{name:"esp32-s2",chipId:2,memmap:[{from:0,to:65536,id:"PADDING"},{from:1056964608,to:1073217536,id:"DROM"},{from:1062207488,to:1073217536,id:"EXTRAM_DATA"},{from:1073340416,to:1073348608,id:"RTC_DRAM"},{from:1073340416,to:1073741824,id:"BYTE_ACCESSIBLE"},{from:1073340416,to:1074208768,id:"MEM_INTERNAL"},{from:1073414144,to:1073741824,id:"DRAM"},{from:1073741824,to:1073848576,id:"IROM_MASK"},{from:1073872896,to:1074200576,id:"IRAM"},{from:1074200576,to:1074208768,id:"RTC_IRAM"},{from:1074266112,to:1082130432,id:"IROM"},{from:1342177280,to:1342185472,id:"RTC_DATA"}]},{name:"esp32-s3",chipId:4,memmap:[{from:0,to:65536,id:"PADDING"},{from:1006632960,to:1023410176,id:"DROM"},{from:1023410176,to:1040187392,id:"EXTRAM_DATA"},{from:1611653120,to:1611661312,id:"RTC_DRAM"},{from:1070104576,to:1070596096,id:"BYTE_ACCESSIBLE"},{from:1070104576,to:1077813248,id:"MEM_INTERNAL"},{from:1070104576,to:1070596096,id:"DRAM"},{from:1073741824,to:1073848576,id:"IROM_MASK"},{from:1077346304,to:1077805056,id:"IRAM"},{from:1611653120,to:1611661312,id:"RTC_IRAM"},{from:1107296256,to:1115684864,id:"IROM"},{from:1342177280,to:1342185472,id:"RTC_DATA"}]},{name:"esp32-c3",chipId:5,memmap:[{from:0,to:65536,id:"PADDING"},{from:1006632960,to:1015021568,id:"DROM"},{from:1070071808,to:1070465024,id:"DRAM"},{from:1070104576,to:1070596096,id:"BYTE_ACCESSIBLE"},{from:1072693248,to:1072824320,id:"DROM_MASK"},{from:1073741824,to:1074135040,id:"IROM_MASK"},{from:1107296256,to:1115684864,id:"IROM"},{from:1077395456,to:1077805056,id:"IRAM"},{from:1342177280,to:1342185472,id:"RTC_IRAM"},{from:1342177280,to:1342185472,id:"RTC_DRAM"},{from:1611653120,to:1611661312,id:"MEM_INTERNAL2"}]}];function a(t){return`0x${t.addr.toString(16)} 0x${t.data.length.toString(16)} bytes; ${t.isDROM?"drom ":""}${t.isMapped?"mapped ":""}${e.U.toHex(t.data.slice(0,20))}...`}function o(t){if(233!=t[0])throw new Error("ESP: invalid magic: "+t[0]);let a=24;const o=r(t,12),s=i.find((e=>e.chipId==o));if(!s)throw new Error("ESP: unknown chipid: "+o);const c={header:t.slice(0,a),chipName:s.name,segments:[]},l=t[1];for(let r=0;r<l;++r){const r=n(t,a),i=n(t,a+4);a+=8;const o=t.slice(a,a+i);if(o.length!=i)throw new Error("too short file");if(a+=i,u(r,"PADDING"))continue;const s=c.segments.filter((e=>e.addr+e.data.length==r))[0];s?s.data=e.U.uint8ArrayConcat([s.data,o]):c.segments.push({addr:r,isMapped:u(r,"DROM")||u(r,"IROM"),isDROM:u(r,"DROM"),data:o})}return c;function u(e,t){return s.memmap.some((n=>n.id==t&&n.from<=e&&e<=n.to))}}function s(t){const n=e.U.flatClone(t);return n.segments=n.segments.map(e.U.flatClone),n}t.toBuffer=function(t,n=!0){let r=(t=function(t){const n=65535;(t=s(t)).segments.sort(((e,t)=>e.addr-t.addr)),e.debug("esp padding:\n"+t.segments.map(a).join("\n")+"\n");const r=t.segments.filter((e=>e.isMapped)),i=t.segments.filter((e=>!e.isMapped));t.segments=[];let o=t.header.length;for(const t of r){const r=t.addr+t.data.length&n;if(r<36){const n=new Uint8Array(36-r);t.data=e.U.uint8ArrayConcat([t.data,n])}}for(;r.length>0;){let e=r[0];const i=c(e);if(i>0)e=l(i);else{if((o+8&n)!=(e.addr&n))throw new Error(`pad oops 0 ${o}+8 != ${e.addr} (mod mask)`);r.shift()}if(t.segments.push(e),o+=8+e.data.length,3&o)throw new Error("pad oops 1")}return t.segments=t.segments.concat(i),e.debug("esp padded:\n"+t.segments.map(a).join("\n")+"\n"),t;function c(e){let t=(e.addr-8&n)-o&n;return 0==t?0:(t-=8,t<0&&(t+=65536),t)}function l(e){if(!i.length||e<=8)return{addr:0,isMapped:!1,isDROM:!1,data:new Uint8Array(e)};const t=i[0],n={addr:t.addr,isMapped:t.isMapped,isDROM:t.isDROM,data:t.data.slice(0,e)};return t.data=t.data.slice(e),t.addr+=n.data.length,0==t.data.length&&i.shift(),n}}(t)).header.length;for(const e of t.segments)r+=8+e.data.length;r=r+16&-16;let i=new Uint8Array(r);i.set(t.header),i[1]=t.segments.length;let o=t.header.length,c=239;for(const n of t.segments){e.HF2.write32(i,o,n.addr),e.HF2.write32(i,o+4,n.data.length),i.set(n.data,o+8),o+=8+n.data.length;for(let e=0;e<n.data.length;++e)c^=n.data[e]}if(i[i.length-1]=c,n){i[23]=1;const t=ts.pxtc.BrowserImpl.sha256buffer(i);i=e.U.uint8ArrayConcat([i,e.U.fromHex(t)])}else i[23]=0;return i},t.parseBuffer=o,t.parseB64=function(t){return o(e.U.stringToUint8Array(atob(t.join(""))))},t.cloneStruct=s}(e.esp||(e.esp={}))}(pxt||(pxt={})),function(e){!function(t){let n;!function(e){e[e.None=0]="None",e[e.Whitespace=1]="Whitespace",e[e.Identifier=2]="Identifier",e[e.Keyword=3]="Keyword",e[e.Operator=4]="Operator",e[e.CommentLine=5]="CommentLine",e[e.CommentBlock=6]="CommentBlock",e[e.NewLine=7]="NewLine",e[e.Literal=8]="Literal",e[e.Tree=9]="Tree",e[e.Block=10]="Block",e[e.EOF=11]="EOF"}(n||(n={}));let r="";let i=e.SyntaxKind;function a(e){switch(e){case i.CommaToken:return 2;case i.EqualsToken:case i.PlusEqualsToken:case i.MinusEqualsToken:case i.AsteriskEqualsToken:case i.AsteriskAsteriskEqualsToken:case i.SlashEqualsToken:case i.PercentEqualsToken:case i.LessThanLessThanEqualsToken:case i.GreaterThanGreaterThanEqualsToken:case i.GreaterThanGreaterThanGreaterThanEqualsToken:case i.AmpersandEqualsToken:case i.BarEqualsToken:case i.CaretEqualsToken:return 5;case i.QuestionToken:case i.ColonToken:return 7;case i.BarBarToken:return 10;case i.AmpersandAmpersandToken:return 20;case i.BarToken:return 30;case i.CaretToken:return 40;case i.AmpersandToken:return 50;case i.EqualsEqualsToken:case i.ExclamationEqualsToken:case i.EqualsEqualsEqualsToken:case i.ExclamationEqualsEqualsToken:return 60;case i.LessThanToken:case i.GreaterThanToken:case i.LessThanEqualsToken:case i.GreaterThanEqualsToken:case i.InstanceOfKeyword:case i.InKeyword:case i.AsKeyword:return 70;case i.LessThanLessThanToken:case i.GreaterThanGreaterThanToken:case i.GreaterThanGreaterThanGreaterThanToken:return 80;case i.PlusToken:case i.MinusToken:return 90;case i.AsteriskToken:case i.SlashToken:case i.PercentToken:return 100;case i.AsteriskAsteriskToken:return 101;case i.DotToken:return 120;default:return 0}}function o(e){switch(e){case i.EndOfFileToken:return n.EOF;case i.SingleLineCommentTrivia:return n.CommentLine;case i.MultiLineCommentTrivia:return n.CommentBlock;case i.NewLineTrivia:return n.NewLine;case i.WhitespaceTrivia:return n.Whitespace;case i.ShebangTrivia:case i.ConflictMarkerTrivia:return n.CommentBlock;case i.NumericLiteral:case i.StringLiteral:case i.RegularExpressionLiteral:case i.NoSubstitutionTemplateLiteral:case i.TemplateHead:case i.TemplateMiddle:case i.TemplateTail:return n.Literal;case i.Identifier:return n.Identifier;default:return e<i.Identifier?n.Operator:n.Keyword}}function s(e,t){for(;e[t]&&e[t].kind==n.Whitespace;)t++;return t}function c(){return{kind:n.EOF,synKind:i.EndOfFileToken,pos:0,lineNo:0,text:""}}function l(e,t){return{kind:n.Whitespace,synKind:i.WhitespaceTrivia,pos:e.pos-t.length,lineNo:e.lineNo,text:t}}function u(e){return{kind:n.Block,synKind:i.OpenBraceToken,pos:e[0].pos,lineNo:e[0].lineNo,stmts:[{tokens:e}],text:"{",endToken:null}}function d(e){if(!e)return!1;switch(e.synKind){case i.IfKeyword:case i.ElseKeyword:case i.LetKeyword:case i.ConstKeyword:case i.VarKeyword:case i.DoKeyword:case i.WhileKeyword:case i.SwitchKeyword:case i.CaseKeyword:case i.DefaultKeyword:case i.ForKeyword:case i.ReturnKeyword:case i.BreakKeyword:case i.ContinueKeyword:case i.TryKeyword:case i.CatchKeyword:case i.FinallyKeyword:case i.DeleteKeyword:case i.FunctionKeyword:case i.ClassKeyword:case i.YieldKeyword:case i.DebuggerKeyword:return!0;default:return!1}}function p(e,r,o=null){let s,f=[],_=0,g=!1;for(e=e.concat([c()]);e[_].kind!=n.EOF;){let n=_;C(),t.Util.assert(_>n,`Error at ${e[_].text}`),h(e.slice(n,_))}return f;function h(e){if(r&&(e=m(e)),0==e.length)return;e.forEach(v),e=y(e);if(r&&f.length>0){let n=f[f.length-1].tokens[0].synKind,r=e[0].synKind;if(n==i.IfKeyword&&r==i.ElseKeyword||n==i.TryKeyword&&r==i.CatchKeyword||n==i.TryKeyword&&r==i.FinallyKeyword||n==i.CatchKeyword&&r==i.FinallyKeyword)return e.unshift(l(e[0]," ")),void t.Util.pushRange(f[f.length-1].tokens,e)}f.push({tokens:e})}function y(e){let t=[],r=0;for(;r<e.length;)if(e[r].blockSpanLength){let o=e.slice(r,r+e[r].blockSpanLength),s=!!o[0].blockSpanIsVirtual;delete o[0].blockSpanLength,delete o[0].blockSpanIsVirtual,r+=o.length,o=y(o),s?t.push((a=o,{kind:n.Tree,synKind:i.WhitespaceTrivia,pos:a[0].pos,lineNo:a[0].lineNo,children:a,endToken:null,text:""})):(t.push(l(o[0]," ")),t.push(u(m(o))))}else t.push(e[r++]);var a;return t}function v(e){if(e.kind==n.Tree){let n=e;n.children=t.Util.concat(p(n.children,!1,n).map((e=>e.tokens)))}}function b(t=!1){for(;;)switch(_++,e[_].kind){case n.Whitespace:case n.CommentBlock:case n.CommentLine:break;case n.NewLine:if(t)break;break;default:return}}function x(){for(;e[_].kind==n.Whitespace;)_++;e[_].kind==n.NewLine&&_++}function k(){for(;;)switch(_++,e[_].kind){case n.EOF:return;case n.Tree:if(e[_].synKind==i.OpenBraceToken)return _--,void T()}}function S(){t.Util.assert(e[_].synKind==i.OpenBraceToken);let r=e[_];t.Util.assert(r.kind==n.Tree);let a=e[_];a.stmts=p(r.children,!0,s),delete r.children,a.kind=n.Block,_++,g=!0}function T(){let t=_+1;b(),e[_].synKind==i.OpenBraceToken?(S(),x()):(C(),e[t].blockSpanLength=_-t)}function C(){for(;;){let c=e[_],l=_;if(s=c,g=!1,c.kind==n.EOF)return;if(r&&c.synKind==i.SemicolonToken)return _++,void x();if(c.synKind==i.EqualsGreaterThanToken){if(b(),e[_].synKind==i.OpenBraceToken){S();continue}{let t=_;C();let r=_;for(;e[r].kind==n.NewLine;)r--;return e[t].blockSpanLength=r-t,void(e[t].blockSpanIsVirtual=!0)}}if(r&&a(c.synKind)){let t=_;if(b(),!d(e[_]))continue;_=t}if(r&&c.kind==n.NewLine){if(b(),c=e[_],a(c.synKind)&&c.synKind!=i.PlusToken&&c.synKind!=i.MinusToken)continue;return void(_=l+1)}if(c.synKind==i.OpenBraceToken&&o&&o.synKind==i.ClassKeyword){let t=_-1;for(;t>=0&&e[t].kind==n.Whitespace;)t--;if(t<0||e[t].synKind!=i.EqualsToken)return _--,void T()}switch(t.Util.assert(l==_),c.synKind){case i.ForKeyword:case i.WhileKeyword:case i.IfKeyword:case i.CatchKeyword:if(b(),e[_].synKind!=i.OpenParenToken)continue;return void T();case i.DoKeyword:if(T(),_--,b(),e[_].synKind==i.WhileKeyword){_++;continue}return;case i.ElseKeyword:if(b(),e[_].synKind==i.IfKeyword)continue;return _=l,void T();case i.TryKeyword:case i.FinallyKeyword:return void T();case i.ClassKeyword:case i.NamespaceKeyword:case i.ModuleKeyword:case i.InterfaceKeyword:case i.FunctionKeyword:return void k()}t.Util.assert(!g,"forgot continue/return after expectBlock"),_++}}}function f(e){return e&&(e.kind==n.Whitespace||e.kind==n.NewLine)}function _(e){let t=[],r=!1;for(let i=0;i<e.length;++i)r&&(i=s(e,i)),e[i]&&(t.push(e[i]),r=e[i].kind==n.NewLine);return t}function m(e){for(e=e.slice(0);f(e[0]);)e.shift();for(;f(e[e.length-1]);)e.pop();return e}function g(e,t){if(t.synKind==i.NoSubstitutionTemplateLiteral&&/^`[\s\.#01]*`$/.test(t.text)){let n=t.text.slice(1,t.text.length-1).split("\n").map((e=>e.replace(/\s/g,""))).filter((e=>!!e));if(n.length<4||n.length>5)return;let r=Math.floor((Math.max(...n.map((e=>e.length)))+2)/5);r<=0&&(r=1);let i="`\n";for(let t=0;t<5;++t){let a=n[t]||"";for(;a.length<5*r;)a+=".";a=a.replace(/0/g,"."),a=a.replace(/1/g,"#"),a=a.replace(/...../g,(e=>"/"+e)),i+=e+a.replace(/./g,(e=>" "+e)).replace(/\//g," ").slice(3)+"\n"}i+=e+"`",t.text=i}}t.toStr=function e(t){return Array.isArray(t)?"[[ "+t.map(e).join("  ")+" ]]":"string"==typeof t.text?JSON.stringify(t.text):t+""},t.format=function(t,u){let d=function(t){r=t;let a=e.createScanner(e.ScriptTarget.Latest,!1,e.LanguageVariant.Standard,t,(e=>{let t=a.getTextPos();console.log("scanner error",t,e.message)})),s=[],c=0,l=-1;for(;;){let e=a.scan();if(e==i.CloseBraceToken&&c==l&&(l=-1,e=a.reScanTemplateToken()),e==i.SlashEqualsToken){let t=a.reScanSlashToken();t==i.RegularExpressionLiteral&&(e=t)}e==i.GreaterThanToken&&(e=a.reScanGreaterToken());let t={kind:o(e),synKind:e,lineNo:0,pos:a.getTokenPos(),text:a.getTokenText()};if(e==i.OpenBraceToken&&c++,e==i.CloseBraceToken&&--c<0&&(c=-1e7),s.push(t),e!=i.TemplateHead&&e!=i.TemplateMiddle||(l=c),t.kind==n.EOF)break}return{tokens:s,braceBalance:c}}(t).tokens;d=function(e,t){let r=[],a=!0,o=1;for(let c=0;c<e.length;++c){if(a){let a=c;if(c=s(e,c),e[c].kind==n.NewLine){let a=!1;t>=0&&e[c].pos>=t&&(t=-1,a=!0),r.push({text:"",kind:n.CommentLine,pos:e[c].pos,lineNo:o,synKind:i.SingleLineCommentTrivia,isCursor:a})}else c=a}r.push(e[c]),e[c].lineNo=o,e[c].kind==n.NewLine?(a=!0,o++):a=!1,t>=0&&e[c].pos>=t&&(t=-1)}return r}(d,u),d=function(e){let t=[];t.push({synKind:i.EndOfFileToken,token:{children:[]}});let r=(e,r)=>{let i=e;i.children=[],i.kind=n.Tree,t.push({synKind:r,token:i})};for(let a=0;a<e.length;++a){let o=e[a],s=t[t.length-1];switch(s.token.children.push(o),o.kind){case n.Operator:switch(o.synKind){case i.OpenBraceToken:case i.OpenParenToken:case i.OpenBracketToken:r(o,o.synKind+1);break;case i.CloseBraceToken:case i.CloseParenToken:case i.CloseBracketToken:for(s.token.children.pop();;){if(s=t.pop(),s.synKind==o.synKind){s.token.endToken=o;break}if(0==t.length||s.synKind==i.CloseBraceToken){t.push(s);break}}}}}return t[0].token.children}(d);let f=p(d,!0),m="",h="",y=-1,v=0;return f.forEach(k),f.forEach((e=>e.tokens.forEach(b))),-1==y&&(y=h.length),{formatted:h,pos:y};function b(e){if(e.kind==n.Tree){let t=e;e.synKind,i.OpenBraceToken,t.children.forEach(b)}else e.kind==n.Block&&e.stmts.forEach((e=>e.tokens.forEach(b)))}function x(e,t){if(v==e.lineNo)t();else{v=e.lineNo;let n=m;m+="    ",t(),m=n}}function k(e){let t=_(e.tokens);1!=t.length||t[0].isCursor||""!=t[0].text?(h+=m,x(t[0],(()=>{T(t)})),"\n"!=h[h.length-1]&&(h+="\n")):h+="\n"}function S(e){-1==y&&e.pos+e.text.length>=u&&(y=h.length+(u-e.pos)),h+=e.text}function T(e){e=function(e){let t=[],r=0,o=c();for(e=e.concat([c()]);r<e.length;){r=s(e,r);let c=e[r];if(c.kind==n.EOF)break;let d=s(e,r+1);if(c.kind==n.NewLine&&e[d].synKind==i.OpenBraceToken){r=d;continue}let p=!0,f=0==t.length?(u=c,{kind:n.NewLine,synKind:i.NewLineTrivia,pos:u.pos,lineNo:u.lineNo,text:"\n"}):t[t.length-1];switch(f.synKind){case i.ExclamationToken:case i.TildeToken:case i.DotToken:p=!1;break;case i.PlusToken:case i.MinusToken:case i.PlusPlusToken:case i.MinusMinusToken:f.isPrefix&&(p=!1)}switch(c.synKind){case i.DotToken:case i.CommaToken:case i.NewLineTrivia:case i.ColonToken:case i.SemicolonToken:case i.OpenBracketToken:p=!1;break;case i.PlusPlusToken:case i.MinusMinusToken:f.kind!=n.Tree&&f.kind!=n.Identifier&&f.kind!=n.Keyword||(p=!1);case i.PlusToken:case i.MinusToken:(o.kind==n.EOF||a(o.synKind)||o.synKind==i.SemicolonToken)&&(c.isPrefix=!0);break;case i.OpenParenToken:if(f.kind==n.Identifier&&(p=!1),f.kind==n.Keyword)switch(f.synKind){case i.IfKeyword:case i.ForKeyword:case i.WhileKeyword:case i.SwitchKeyword:case i.ReturnKeyword:case i.ThrowKeyword:case i.CatchKeyword:break;default:p=!1}}f.kind==n.NewLine&&(p=!1),p&&t.push(l(c," ")),t.push(c),c.kind!=n.NewLine&&(o=c),r++}var u;return t}(e);for(let t=0;t<e.length;++t){let r=e[t];switch(g(m,r),S(r),r.kind){case n.Tree:let i=r;x(r,(()=>{T(_(i.children))})),i.endToken&&S(i.endToken);break;case n.Block:let a=r;0==a.stmts.length?h+=" ":(h+="\n",a.stmts.forEach(k),h+=m.slice(4)),a.endToken?S(a.endToken):h+="}";break;case n.NewLine:if(e[t+1]&&e[t+1].kind==n.CommentLine&&""==e[t+1].text&&!e[t+1].isCursor)break;t==e.length-1?h+=m.slice(4):h+=m;break;case n.Whitespace:}}}}}(e.pxtc||(e.pxtc={}))}(ts||(ts={})),function(e){!function(t){let n;function r(e,n){if(!n.packedSource)return;let r=e.currPtr+4096&-256,i=new Uint8Array(256);for(let a=0;a<n.packedSource.length;a+=256){for(let e=0;e<256;++e)i[e]=n.packedSource.charCodeAt(a+e);t.UF2.writeBytes(e,r,i,t.UF2.UF2_FLAG_NOFLASH),r+=256}}!function(e){e.asmTotalSource="";let n={},i=[];let a={commBase:0,funcInfo:{},codeStartIdx:-1,codePaddingSize:0,sha:null,codeStartAddrPadded:void 0,hexlines:void 0,jmpStartAddr:void 0,jmpStartIdx:void 0,codeStartAddr:void 0,elfInfo:void 0,espInfo:void 0};function o(e){let n="",r=0;for(;r<e.length;r+=2)n=e[r]+e[r+1]+n;return t.assert(r==e.length),n}function s(e){if(!(e=e.replace(/^[\s:]/,"")))return[];let n=[];if(e.replace(/([a-f0-9][a-f0-9])/gi,(e=>(n.push(parseInt(e,16)),""))))throw t.oops("bad bytes "+e);return n}function c(e){return e.flashCodeAlign||1024}e.getCommBase=function(){return a.commBase},e.getStartAddress=function(){return a.codeStartAddrPadded},e.setupInlineAssembly=function(r){n={};let i=r.sourceFiles.filter((e=>t.U.endsWith(e,".asm")));e.asmTotalSource="";let a=0;for(let t of i){let i=r.fileSystem[t];i.replace(/^\s*(\w+):/gm,((e,t)=>(n[t]=!0,"")));let o=".object inlineasm\n.section code\n@stackmark func\n@scope user"+a+++"\n"+i+"\n@stackempty func\n@scope\n";e.asmTotalSource+=o}},e.parseHexBytes=s,e.parseHexRecord=function(e){let t=s(e);return{len:t[0],addr:t[1]<<8|t[2],type:t[3],data:t.slice(4,t.length-1),checksum:t[t.length-1]}},e.flashCodeAlign=c;const l="0108010842424242010801083ed8e98d";function u(e){return a.funcInfo[e]}function d(){let e=a.sha?a.sha.slice(0,16):"";for(;e.length<16;)e+="0";return e.toUpperCase()}function p(e){let t=0,n=":";return e.forEach((e=>t+=e)),e.push(255&-t),e.forEach((e=>n+=("0"+e.toString(16)).slice(-2))),n.toUpperCase()}e.setupFor=function(e,n){if(a=i.find((e=>e.sha==n.sha)),a)return;a={commBase:0,funcInfo:{},codeStartIdx:-1,codePaddingSize:0,sha:null,codeStartAddrPadded:void 0,hexlines:void 0,jmpStartAddr:void 0,jmpStartIdx:void 0,codeStartAddr:void 0,elfInfo:void 0,espInfo:void 0},i.length>10&&(i=[]),i.push(a);let r=n.functions;a.commBase=n.commBase||0,a.sha=n.sha;const u=n.hexinfo.hex;if(a.hexlines=u,t.target.nativeType==t.NATIVE_TYPE_VM){a.codeStartAddr=0,a.codeStartAddrPadded=0,a.jmpStartAddr=-1,a.jmpStartIdx=-1;for(let e of r)a.funcInfo[e.name]=e,e.value=16777215;if(t.target.useESP){const e=pxt.esp.parseB64(u),r=t.U.fromHex(l),i=(e,t)=>{for(let n=0;n<r.length;++n)if(e[t+n]!=r[n])return!1;return!0},o=e.segments.filter((e=>e.isDROM));t.U.assert(1==o.length);let s=!1;const c=o[0];a.codeStartAddr=c.addr+c.data.length,a.codeStartAddrPadded=a.codeStartAddr+255&-256,a.codePaddingSize=a.codeStartAddrPadded-a.codeStartAddr,pxt.debug(`user code start: 0x${a.codeStartAddrPadded.toString(16)}; dromlen=${c.data.length} pad=${a.codePaddingSize}`);for(let e=0;e<c.data.length;e+=32)if(i(c.data,e)){s=!0,e+=r.length;const t=e;for(let t of n.vmPointers||[])"0"!=t&&(t=t.replace(/^&/,""),a.funcInfo[t]={name:t,argsFmt:[],value:pxt.HF2.read32(c.data,e)},e+=4);pxt.HF2.write32(c.data,t,a.codeStartAddrPadded);break}t.U.assert(s||0==(n.vmPointers||[]).length),a.espInfo=e,a.codeStartAddrPadded=0}return}if(u.length<=2){const e=t.U.fromHex(u[0]);if(e[2]<=2&&96==e[3]){const t=1610612736,n=4096,r=e.length+n-1&~(n-1);a.elfInfo={template:e,imageMemStart:t+r,imageFileStart:r,phOffset:-1e3}}else a.elfInfo=pxt.elf.parse(e);a.codeStartAddr=a.elfInfo.imageMemStart,a.codeStartAddrPadded=a.elfInfo.imageMemStart;let n=u[0].indexOf(l);return n<0&&t.oops("no jmp table in elf"),a.jmpStartAddr=n/2,a.jmpStartIdx=-1,h(u[0].slice(n+32,n+32+8*r.length+16)),void y()}!function(e){for(let n=0;n<e.length;++n)if("2"==e[n][8]){let r=/^:02....02(....)..$/.exec(e[n]);t.U.assert(!!r);let i=16*parseInt(r[1],16);t.U.assert(0==(65535&i)),e[n]=p([2,0,0,4,0,i>>16])}}(u);let d=0,f="0000",_=0,m=0;a.codeStartAddr=0;let g=()=>{if(!a.codeStartAddr){let n=s(u[m]),r=16-(_+n[0]&15)&15;if(r)if(15&n[2]){let e=_+n[0],t=[r,e>>8,255&e,0];for(let e=0;e<r;++e)t.push(0);m++,u.splice(m,0,p(t)),a.codeStartAddr=e+r}else{if(16!=n[0]){for(n.pop(),n[0]=16;n.length<20;)n.push(0);u[m]=p(n)}a.codeStartAddr=_+16}else a.codeStartAddr=_+n[0];a.codeStartIdx=m+1;const i=c(e);a.codeStartAddrPadded=(a.codeStartAddr&~(i-1))+i;const o=a.codeStartAddrPadded-a.codeStartAddr;t.assert(0==(15&o)),a.codePaddingSize=o}};for(;d<u.length;++d){let t=/:02000004(....)/.exec(u[d]);if(t&&(f=t[1]),t=/^:..(....)00/.exec(u[d]),t){let n=parseInt(f+t[1],16);!e.flashUsableEnd&&_&&n-_>65536&&g(),e.flashUsableEnd&&n>=e.flashUsableEnd&&g(),m=d,_=n}/^:00000001/.test(u[d])&&g(),t=/^:10....000108010842424242010801083ED8E98D/.exec(u[d]),t&&(a.jmpStartAddr=_,a.jmpStartIdx=d)}pxt.debug(`code start: ${a.codeStartAddrPadded}, jmptbl: ${a.jmpStartAddr}`),a.jmpStartAddr||t.oops("No hex start"),a.codeStartAddr||t.oops("No hex end"),a.funcInfo={};for(let e=a.jmpStartIdx+1;e<u.length;++e){let t=/^:..(....)00(.{4,})/.exec(u[e]);if(t&&(h(t[2]),0==r.length))break}return void y();function h(n){let i=e.shortPointers?4:8;for(;n.length>=i;){let s=n.slice(0,i),c=parseInt(o(s),16);n=n.slice(i);let l=r.shift();if(!l)break;a.funcInfo[l.name]=l,c||t.U.oops("No value for "+l.name+" / "+s),0==l.argsFmt.length?c^=1:e.runtimeIsARM||e.nativeType!=t.NATIVE_TYPE_THUMB||1&c||t.U.oops("Non-thumb addr for "+l.name+" / "+s),l.value=c}}function y(){r.length&&t.oops("premature EOF in hex file; missing: "+r.map((e=>e.name)).join(", "))}},e.validateShim=function(e,r,i,a,o){if("TD_ID"==r||"TD_NOOP"==r||"ENUM_GET"==r)return;if(t.U.lookup(n,r))return;let s=`${e}(...) (shim=${r})`,c=u(r);if(c){a?"V"==c.argsFmt[0]&&t.U.userError("expecting function for "+s):"V"!=c.argsFmt[0]&&t.U.userError("expecting procedure for "+s);for(let e=0;e<o.length;++e){c.argsFmt[e+1]||t.U.userError("excessive parameters passed to "+s)}o.length!=c.argsFmt.length-1&&t.U.userError(`not enough arguments for ${s} (got ${o.length}; fmt=${c.argsFmt.join(",")})`)}else t.U.userError("function not found: "+s)},e.lookupFunc=u,e.lookupFunctionAddr=function(e){if("_pxt_comm_base"==e)return a.commBase;let t=u(e);return t?t.value:null},e.hexTemplateHash=d,e.hexPrelude=function(){return`    .startaddr 0x${a.codeStartAddrPadded.toString(16)}\n`},e.hexBytes=p,e.patchHex=function(e,n,i,s){let c=a.hexlines.slice(0,a.codeStartIdx);if(!e.target.useESP){let r=2*n.length+7>>3;t.assert(r<64e3,"program too large, bytes: "+2*n.length),n[17]=r,n[20]=e.commSize}let l=[];for(let e=0;e<a.codePaddingSize>>1;++e)l.push(0);n=l.concat(n);let u=0;function f(e,t){let n=[16,t>>8&255,255&t,0];for(let t=0;t<8;++t)n.push(255&(e[u]||0)),n.push((e[u]||0)>>>8),u++;return n}let _=[16912,0,65535&a.codeStartAddrPadded,a.codeStartAddrPadded>>>16],m=d();for(let e=0;e<4;++e)_.push(parseInt(o(m.slice(4*e,4*e+4)),16));let g=s?t.UF2.newBlockFile(t.target.uf2Family):null;if(a.elfInfo){let r=new Uint8Array(2*n.length);for(let e=0;e<n.length;++e)pxt.HF2.write16(r,2*e,n[e]);let i=pxt.elf.patch(a.elfInfo,r);for(let e=0;e<_.length;++e)pxt.HF2.write16(i,2*e+a.jmpStartAddr,_[e]);if(g&&!e.target.switches.rawELF){let n=e.name||"pxt";return n=n.replace(/[^a-zA-Z0-9\-\.]+/g,"_"),g.filename="Projects/"+n+".elf",t.UF2.writeBytes(g,0,i),[t.UF2.serializeFile(g)]}return[t.U.uint8ArrayToString(i)]}if(a.espInfo){const i=pxt.esp.cloneStruct(a.espInfo),o=i.segments.find((e=>e.isDROM));let s=o.data.length;const c=new Uint8Array(s+2*n.length+255&-256);c.set(o.data);for(let e=0;e<n.length;++e)pxt.HF2.write16(c,s,n[e]),s+=2;o.data=c;const l=pxt.esp.toBuffer(i);return g?(t.UF2.writeBytes(g,0,l),r(g,e),[t.UF2.serializeFile(g)]):[t.U.uint8ArrayToString(l)]}if(g){if(t.UF2.writeHex(g,c),t.UF2.writeBytes(g,a.jmpStartAddr,f(_,a.jmpStartIdx).slice(4)),e.checksumBlock){let n=[];for(let t of e.checksumBlock)n.push(255&t,t>>8);t.UF2.writeBytes(g,e.target.flashChecksumAddr,n)}}else c[a.jmpStartIdx]=p(f(_,a.jmpStartAddr)),e.checksumBlock&&t.U.oops("checksum block in HEX not implemented yet");u=0,i&&(c=[]);let h=a.codeStartAddr,y=h-16>>16;for(;u<n.length;)g?t.UF2.writeBytes(g,h,f(n,h).slice(4)):(h>>16!=y&&(y=h>>16,c.push(p([2,0,0,4,y>>8,255&y]))),c.push(p(f(n,h)))),h+=16;if(!i){let e=a.hexlines.slice(a.codeStartIdx);g?t.UF2.writeHex(g,e):t.Util.pushRange(c,e)}if(!g&&e.target.moveHexEof){for(;!c[c.length-1];)c.pop();":00000001FF"==c[c.length-1]&&c.pop()}if(e.packedSource)if(g)r(g,e);else{let t=0;for(let n=0;n<e.packedSource.length;n+=16){let r=[16,t>>8&255,255&t,14];for(let t=0;t<16;++t)r.push(255&(e.packedSource.charCodeAt(n+t)||0));c.push(p(r)),t+=16}}return!g&&e.target.moveHexEof&&c.push(":00000001FF"),g?[t.UF2.serializeFile(g)]:c}}(n=t.hexfile||(t.hexfile={})),t.hexDump=function(e,t=0){function n(e,t=8){let n=e.toString(16);for(;n.length<t;)n="0"+n;return n}let r="";for(let i=0;i<e.length;i+=16){r+=n(t+i)+": ";let a="";for(let t=0;t<16;t++){0==(3&t)&&(r+=" ");let o=e[i+t];null!=o?(r+=n(o,2)+" ",a+=32<=o&&o<127?String.fromCharCode(o):"."):r+="   "}r+=" "+a+"\n"}return r},t.asmline=function(e){return e.indexOf("\n")>=0?(e=e.replace(/^\s*/gm,"").replace(/^(.*)$/gm,((e,t)=>";"==t[0]&&" "==t[1]||/:\*$/.test(t)?t:"    "+t)))+"\n":(/(^[\s;])|(:$)/.test(e)||(e="    "+e),e+"\n")},t.firstMethodOffset=function(){return 9};const i=[21078089,22513679,15655169,18636881,19658081,21486649,21919277,20041213,20548751,16180187,18361627,19338023,19772677,16506547,23530697,22998697,21225203,19815283,23679599,19822889,21136133,19540043,21837031,18095489,23924267,23434627,22582379,21584111,22615171,23403001,19640683,19998031,18460439,20105387,17595791,16482043,23199959,18881641,21578371,22765747,20170273,16547639,16434589,21435019,20226751,19506731,21454393,23224541,23431973,23745511];function a(e){let n=32;t.U.assert(t.U.unique(e,(e=>""+e)).length==e.length,"non unique");for(let r=2;;r<<=1){if(n--,r<e.length)continue;let a,o=-1,s=-1;for(let c of i){let i=c<<8|n,l=new Uint16Array(r+t.vtLookups+1);t.U.assert(0==(1&l.length));let u=0,d=[];for(let r of e){t.U.assert(r>0);let e=Math.imul(r,i)>>>n;d.push(e);let a=!1;for(let n=0;n<t.vtLookups;n++){if(!l[e+n]){a=!0,l[e+n]=r;break}u++}if(!a){u=-1;break}}(-1==o||o>u)&&(o=u,s=i,a=l)}if(o>=0)return{mult:s,mapping:a,size:r}}}function o(e,n,r,i){const o=a(e.itable.map((e=>e.idx)));let s=t.target.shortPointers?".short":".word",c=`\n        .object ${e.id}_VT\n        .balign 4\n${e.id}_VT:\n        .short ${4*e.allfields.length+4}  ; size in bytes\n        .byte ${pxt.ValTypeObject}, ${pxt.VTABLE_MAGIC} ; magic\n        ${s} ${e.id}_IfaceVT\n        .short ${e.classNo} ; class-id\n        .short 0 ; reserved\n        .word ${o.mult} ; hash-mult\n`,l=e=>{"0"!=e&&(e+="@fn"),c+=`        ${s} ${e}\n`};l("pxt::RefRecord_destroy"),l("pxt::RefRecord_print"),l("pxt::RefRecord_scan"),l("pxt::RefRecord_gcsize");let u=e.toStringMethod;l(u?u.vtLabel():"0");for(let t of e.vtable)l(t.label()+"_nochk");c+=`\n        .balign ${t.target.shortPointers?2:4}\n${e.id}_IfaceVT:\n`;const d=2*o.mapping.length;let p="",f=d,_={};for(let t of e.itable){_[t.idx+""]=f;const e=t.proc?t.proc.isGetter()?1:2:0;p+=`  .short ${t.idx}, ${e} ; ${t.name}\n`,p+=`  .word ${t.proc?t.proc.vtLabel()+"@fn":t.info}\n`,f+=8,t.setProc&&(p+=`  .short ${t.idx}, 0 ; set ${t.name}\n`,p+=`  .word ${t.setProc.vtLabel()}@fn\n`,f+=8)}p+="  .word 0, 0 ; the end\n",f+=8;let m=o.mapping;for(let e=0;e<m.length;++e)r.itEntries++,m[e]&&r.itFullEntries++;return c+="  .short "+t.U.toArray(m).map(((e,t)=>(_[e+""]||d)-2*t)).join(", ")+"\n",c+=p,c+="\n",c}t.vtLookups=3,t.computeHashMultiplier=a,t.vtableToAsm=o;const s=["GC"];function c(e,r,i){let a=`\n    .short ${e.globalsWords}   ; num. globals\n    .short 0 ; patched with number of 64 bit words resulting from assembly\n    .word _pxt_config_data\n    .short 0 ; patched with comm section size\n    .short ${e.nonPtrGlobals} ; number of globals that are not pointers (they come first)\n    .word _pxt_iface_member_names\n    .word _pxt_lambda_trampoline@fn\n    .word _pxt_perf_counters\n    .word _pxt_restore_exception_state@fn\n    .word ${e.emitString(e.getTitle())} ; name\n`,c=null;c=new t.ThumbSnippets;const l=e.setPerfCounters(s);e.procs.forEach((n=>{let r=new t.ProctoAssembler(c,e,n);a+="\n"+r.getAssembly()+"\n"}));let u=new t.ProctoAssembler(c,e,null);u.emitHelpers(),a+="\n"+u.getAssembly()+"\n",a+=n.asmTotalSource,a+="_code_end:\n\n",t.U.iterMap(e.codeHelpers,((e,t)=>{a+=`    .section code\n    .object _code_helper_${t}\n${t}:\n${e}\n`})),a+=c.arithmetic(),a+="_helpers_end:\n\n",e.usedClassInfos.forEach((t=>{a+=o(t,0,e)})),a+="\n.balign 4\n.object _pxt_iface_member_names\n_pxt_iface_member_names:\n",a+=`    .word ${e.ifaceMembers.length}\n`;let d=0;for(let t of e.ifaceMembers){let n=e.emitString(t);a+=`    .word ${n}  ; ${d++} .${t}\n`}a+="    .word 0\n",a+="_vtables_end:\n\n",a+="\n.balign 4\n.object _pxt_config_data\n_pxt_config_data:\n";const p=i.configData||[];for(let e of p)a+=`    .word ${e.key}, ${e.value}  ; ${e.name}=${e.value}\n`;a+="    .word 0\n\n",function(e,n){const r=t.U.unique(n.ifaceMembers.concat(Object.keys(n.strings)),(e=>e));for(let t of r)n.otherLiterals.push(e.string_literal(n.strings[t],t));for(let t of Object.keys(n.doubles)){let r=n.doubles[t];n.otherLiterals.push(`\n.object ${r}\n.balign 4\n${r}: ${e.obj_header("pxt::number_vt")}\n        .hex ${t}\n`)}for(let t of Object.keys(n.hexlits))n.otherLiterals.push(e.hex_literal(n.hexlits[t],t)),n.otherLiterals.push()}(c,e),a+=e.otherLiterals.join(""),a+="\n.balign 4\n.section code\n.object _perf_counters\n_pxt_perf_counters:\n",a+=`    .word ${l.length}\n`;let f="";for(let e=0;e<l.length;++e){let t=".perf"+e;a+=`    .word ${t}\n`,f+=`${t}: .string ${JSON.stringify(l[e])}\n`}return a+=f,a+="_literals_end:\n",a}function l(e){let r;return r=e.nativeType==t.NATIVE_TYPE_VM?new t.assembler.VMFile(new t.vm.VmProcessor(e)):new t.assembler.File(new t.thumb.ThumbProcessor),r.ei.testAssembler(),e.switches.noPeepHole&&(r.disablePeepHole=!0),e.switches.size&&(r.codeSizeStats=!0),r.lookupExternalLabel=n.lookupFunctionAddr,r.normalizeExternalLabel=e=>{let t=n.lookupFunc(e);return t?t.name:e},r}function u(e){if(e.errors.length>0){let n="";throw e.errors.forEach((e=>{let r=/^user(\d+)/.exec(e.scope);if(r){parseInt(r[1]);n+=t.U.lf("At inline assembly:\n"),n+=e.message}})),n?(console.log(t.U.lf("errors in inline assembly")),console.log(n),new Error(e.errors[0].message)):new Error(e.errors[0].message)}}t.processorInlineAssemble=function(e,t){let n=l(e);n.disablePeepHole=!0,n.emit(t),u(n);let r=[];for(let e=0;e<n.buf.length;e+=2)r.push(((n.buf[e+1]||0)<<16|n.buf[e])>>>0);return r};function d(e,t,n){let r=l(e);return r.emit(n),n=`; Interface tables: ${t.itFullEntries}/${t.itEntries} (${Math.round(100*t.itFullEntries/t.itEntries)}%)\n; Virtual methods: ${t.numVirtMethods} / ${t.numMethods}\n`+r.getSource(!0,t.numStmts,e.flashEnd),u(r),{src:n,buf:r.buf,thumbFile:r}}function p(r,i,a,o){const s=a.extinfo.disabledDeps;r=s?`${n.hexPrelude()}\n; compilation disabled on this variant due to ${a.extinfo.disabledDeps}\n.hex 718E3B92C615A841C49866C975EE5197\n.string "${a.extinfo.disabledDeps}"`:`; start\n${n.hexPrelude()}\n    .hex 708E3B92C615A841C49866C975EE5197 ; magic number\n    .hex ${n.hexTemplateHash()} ; hex template hash\n    .hex 873266330af9dbdb ; replaced in binary by program hash\n`+r,a.embedBlob&&(i.packedSource=function(e,n){let r=t.Util.toUTF8(e),i=(r.length,n.length,"A/¸/¢»");return i+=t.U.uint8ArrayToString([255&r.length,r.length>>8,255&n.length,n.length>>8,0,0,0,0]),i+=r,i+=n,i.length%2&&(i+="\0"),i}(a.embedMeta,e.pxtc.decodeBase64(a.embedBlob)),!i.target.noSourceInFlash&&i.packedSource.length<4e4&&(r+=function(e){let t="";for(let n=0;n<e.length;++n){let r=255&e.charCodeAt(n);t+=r<=15?"0"+r.toString(16):r.toString(16)}return`\n    .balign 16\n    .object _stored_program\n_stored_program: .hex ${t}\n`}(i.packedSource),i.packedSource=null));const c=n.flashCodeAlign(a.target);if(!s&&a.target.flashChecksumAddr){let e=0;for(;c>1<<e;)e++;let t=parseInt(n.hexTemplateHash().slice(8,16),16);const i=n.getStartAddress()/c;t=4294967040&t|e;let o=0,s=i;a.target.flashChecksumAddr<n.getStartAddress()&&(o=Math.ceil((a.target.flashChecksumAddr+32)/c),s-=o),r+=`\n    .balign 4\n__end_marker:\n    .word ${t}\n\n; ------- this will get removed from the final binary ------\n__flash_checksums:\n    .word 0x87eeb07c ; magic\n    .word __end_marker ; end marker position\n    .word ${t} ; end marker\n    ; template region\n    .short ${o}, ${s}\n    .word 0x${n.hexTemplateHash().slice(0,8)}\n    ; user region\n    .short ${i}, 0xffff\n    .hex 87326633 ; replaced later\n    .word 0x0 ; terminator\n`}const l=a.extinfo.outputPrefix||"";i.writeFile(l+t.BINARY_ASM,r);const u=d(a.target,i,r);if(u.thumbFile.commPtr&&(i.commSize=u.thumbFile.commPtr-n.getCommBase()),u.src&&i.writeFile(l+t.BINARY_ASM,u.src),s)return void f();const p=o.configData||[];if(p.some((e=>"BOOTLOADER_BOARD_ID"==e.name))){let e="const uint32_t configData[] = {\n";e+="    0x1e9e10f1, 0x20227a79, // magic\n",e+=`    ${p.length}, 0, // num. entries; reserved\n`;for(let t of p)e+=`    ${t.key}, 0x${t.value.toString(16)}, // ${t.name}\n`;e+="    0, 0\n};\n",i.writeFile(l+"config.c",e)}if(u.buf){const e=u.buf;let n="";for(let t=0;t<e.length;++t)n+=String.fromCharCode(255&e[t],e[t]>>8);const r=t.U.sha256(n).slice(0,16),o=t.U.range(4).map((e=>parseInt(r.slice(2*e,2*e+2),16)));t.U.assert(12935==e[12]);for(let t=0;t<o.length;++t)e[12+t]=o[t];if(a.target.flashChecksumAddr){let n=u.thumbFile.lookupLabel("__flash_checksums")/2;t.U.assert(n==e.length-16);let r=e.slice(e.length-16);e.splice(e.length-16,16);let a=Math.ceil(2*e.length/c);t.U.assert(12935==r[r.length-4]),r[r.length-4]=o[0],r[r.length-3]=o[1],r[r.length-5]=a,i.checksumBlock=r}f()}if(!o.procDebugInfo){for(let e of o.breakpoints){let n=t.U.lookup(u.thumbFile.getLabels(),"__brkp_"+e.id);null!=n&&(e.binAddr=n)}for(let e of i.procs)e.fillDebugInfo(u.thumbFile);if(o.procDebugInfo=i.procs.map((e=>e.debugInfo)),i.target.switches.size){const n=[];for(const r of i.procs){const i=e.pxtc.nodeLocationInfo(r.action),a=[i.fileName.replace("pxt_modules/",""),t.getDeclName(r.action),r.debugInfo.size,"function",i.line+1];n.push(a.map((e=>`"${e}"`)).join(","))}n.sort(),n.unshift("filename,name,size,type,line"),i.writeFile(l+"size.csv",n.join("\n"))}}function f(){if(pxt.isOutputText(t.target)){const e=n.patchHex(i,u.buf,!1,!1).join("\r\n")+"\r\n";i.writeFile(l+pxt.outputName(t.target),e)}else{const r=e.pxtc.encodeBase64(n.patchHex(i,u.buf,!1,!!t.target.useUF2)[0]);i.writeFile(l+pxt.outputName(t.target),r)}}}t.assemble=d,t.processorEmit=function(e,r,i){var a,o;const s=c(e,0,i),l=t.U.flatClone(r);n.setupFor(r.target,r.extinfo||t.emptyExtInfo()),p(s,e,r,i),i.builtVariants||(i.builtVariants=[]),i.builtVariants.push(null===(a=r.extinfo)||void 0===a?void 0:a.appVariant);const u=l.otherMultiVariants||[];if(u.length)try{for(let r of u){const a=t.U.flatClone(l);a.extinfo=r.extinfo,r.target.isNative=!0,a.target=r.target,n.setupFor(a.target,a.extinfo),p(s,e,a,i),i.builtVariants.push(null===(o=r.extinfo)||void 0===o?void 0:o.appVariant)}}finally{n.setupFor(l.target,l.extinfo)}},t.validateShim=n.validateShim}(e.pxtc||(e.pxtc={}))}(ts||(ts={})),function(e){!function(e){e.getHelpForKeyword=function(e,t){const n={abstract:null,any:null,as:null,break:null,case:null,catch:null,class:null,continue:null,const:null,constructor:null,debugger:null,declare:null,delete:null,do:null,else:null,enum:null,export:null,extends:null,false:lf("Represents the negative outcome of a logical expression"),finally:null,for:null,from:null,function:null,get:null,if:null,implements:null,in:null,instanceof:null,interface:null,is:null,let:null,namespace:null,new:null,null:null,private:null,protected:null,public:null,return:null,set:null,static:null,super:null,switch:null,this:null,throw:null,true:lf("Represents the positive outcome of a logical expression"),try:null,type:null,typeof:null,undefined:null,void:null,while:null,with:null,of:null};if(t){return{True:n.true,False:n.false,None:null,abs:null,all:null,any:null,ascii:null,bin:null,bool:null,bytearray:null,bytes:null,callable:null,chr:null,classmethod:null,compile:null,complex:null,copyright:null,credits:null,delattr:null,dict:null,dir:null,divmod:null,enumerate:null,eval:null,exec:null,exit:null,filter:null,float:null,format:null,frozenset:null,getattr:null,globals:null,hasattr:null,hash:null,help:null,hex:null,id:null,input:null,int:null,isinstance:null,issubclass:null,iter:null,len:null,license:null,list:null,locals:null,map:null,max:null,memoryview:null,min:null,next:null,object:null,oct:null,open:null,ord:null,pow:null,print:null,property:null,quit:null,range:null,repr:null,reversed:null,round:null,set:null,setattr:null,slice:null,sorted:null,staticmethod:null,str:null,sum:null,super:null,tuple:null,type:null,vars:null}[e]}return n[e]}}(e.pxtc||(e.pxtc={}))}(ts||(ts={})),function(e){!function(e){e.LSHost=class{constructor(e){this.p=e}getCompilationSettings(){const e=this.p.getCompilerOptions();return e.noLib=!0,e}getNewLine(){return"\n"}getScriptFileNames(){return this.p.getSourceFiles().map((e=>e.fileName))}getScriptVersion(e){return"0"}getScriptSnapshot(e){const t=this.p.getSourceFile(e);return{getLength:()=>t.getFullText().length,getText:()=>t.getFullText(),getChangeRange:()=>{}}}getCurrentDirectory(){return"."}getDefaultLibFileName(e){return""}useCaseSensitiveFileNames(){return!0}}}(e.pxtc||(e.pxtc={}))}(ts||(ts={})),function(e){!function(t){!function(n){function r(e){var t,r;const i=null===(r=null===(t=null==e?void 0:e.pxt)||void 0===t?void 0:t.callInfo)||void 0===r?void 0:r.qName;return n.lastApiInfo.apis.byQName[i]}function i(e,t,r){if(!e||t<0)return;let i=e.parameters[t];if(e.attributes._def){const a=e.attributes._def.parameters[t].shadowBlockId;if(a){const e=r.blocksById[a],t=n.lastApiInfo.apis.byQName[e.qName];"TD_ID"===t.attributes.shim&&1===t.parameters.length&&(i=t.parameters[0])}}return i}function a(r,i,a,o,s=!1){const c={};o.forEach((e=>{var t,n;let r=e.symbol.retType;if(s)if(7==e.symbol.kind)r=e.symbol.namespace;else if(4==e.symbol.kind){const i=null===(n=null===(t=e.symbol.attributes)||void 0===t?void 0:t.enumIdentity)||void 0===n?void 0:n.split(".");(null==i?void 0:i.length)>1&&(r=i[0])}c[r]=[...c[r]||[],e]}));const l=c[r]||[];let u=[];for(let r of l){const o=m(r.symbol,i,e.SymbolFlags.Enum);if(o){const e=a.getTypeOfSymbolAtLocation(o,i),r=t.getEnumMembers(a,e).map((e=>t.enumMemberToQName(a,e))).map((e=>n.lastApiInfo.apis.byQName[e]));u=[...u,...r]}}return[...l,...p(u,1)]}function o(t){return t.flags&e.SymbolFlags.Variable?4:t.flags&e.SymbolFlags.Class?8:t.flags&e.SymbolFlags.Enum?6:t.flags&e.SymbolFlags.EnumMember?7:t.flags&e.SymbolFlags.Method?1:t.flags&e.SymbolFlags.Module?5:t.flags&e.SymbolFlags.Property?2:0}function s(e){return{kind:0,name:e,pyName:e,qName:e,pyQName:e,namespace:"",attributes:{callingConvention:0,paramDefl:{}},fileName:pxt.MAIN_TS,parameters:[],retType:"any"}}function c(e,t){var n,r;let i=e.getName(),a=/(.*)\.(.*)/.exec(i),s=a?a[2]:i,c=a?a[1]:"",l=null!==(r=null===(n=t.getSymbol())||void 0===n?void 0:n.getName())&&void 0!==r?r:"any";return{kind:o(e),name:s,pyName:s,qName:i,pyQName:i,namespace:c,attributes:{callingConvention:0,paramDefl:{}},fileName:pxt.MAIN_TS,parameters:[],retType:l}}function l(e,t,n){if(e)return t.byQName[n.getFullyQualifiedName(e)]}function u(e,n){return e.weight!==n.weight?n.weight-e.weight:t.compareSymbols(e.symbol,n.symbol)}function d(e,t){return{symbol:e,weight:t}}function p(e,t){return e.map((e=>d(e,t)))}function f(t,n){var r;if(t.flags&e.TypeFlags.NumberLiteral)return"Number";if(t.flags&e.TypeFlags.StringLiteral)return"String";if(t.flags&e.TypeFlags.BooleanLiteral)return"Boolean";const i=n.typeToString(t);return null!==(r={number:"Number",string:"String",boolean:"Boolean"}[i])&&void 0!==r?r:i}function _(e,t){return"."===t.charAt(0)&&(t=t.substr(1)),e.substr(0,e.lastIndexOf(".")+1)+t}function m(e,t,r){const i=n.service&&n.service.getProgram().getTypeChecker();if(!i)return null;const a=i.getSymbolsInScope(t,r);for(let t of a)if(t.escapedName.toString()===e.qName)return t;return null}function g({symbol:e}){return!(/^__/.test(e.name)||/^__/.test(e.namespace)||e.attributes.hidden||e.attributes.deprecated||"TD_ID"==e.attributes.shim||e.attributes.blockAliasFor)}n.getCallSymbol=r,n.getParameter=i,n.getApisForTsType=a,n.getBasicKindDefault=function(e,n){switch(e){case t.SK.StringKeyword:return'""';case t.SK.NumberKeyword:return"0";case t.SK.BooleanKeyword:return n?"False":"false";case t.SK.ArrayType:return"[]";case t.SK.NullKeyword:return n?"None":"null";default:return}},n.tsSymbolToPxtSymbolKind=o,n.makePxtSymbolFromKeyword=s,n.makePxtSymbolFromTsSymbol=c,n.getPxtSymbolFromTsSymbol=l,n.compareCompletionSymbols=u,n.completionSymbol=d,n.completionSymbols=p,n.getNodeAndSymbolAtLocation=function(e,n,r,i){const a=e.getSourceFile(n),o=e.getTypeChecker(),s=t.findInnerMostNodeAtPosition(a,r);if(s){const e=o.getSymbolAtLocation(s);if(e){return[s,l(e,i,o)]}}return null},n.tsTypeToPxtTypeString=f,n.filenameWithExtension=_,n.getWordAtPosition=function(e,t){let n=t,r=t;for(;n>0&&i(n);)--n;for(;r<e.length-1&&i(r);)++r;return n!=r?{text:e.substring(n+1,r),start:n+1,end:r}:null;function i(t){const n=e.charCodeAt(t);return n>=65&&n<=90||n>=97&&n<=122}},n.getTsSymbolFromPxtSymbol=m,n.getDefaultEnumValue=function(e,r){const i=n.service&&n.service.getProgram().getTypeChecker(),a=t.getEnumMembers(i,e);for(const e of a)if(e.name.kind===t.SK.Identifier){const a=t.enumMemberToQName(i,e),o=n.lastApiInfo.apis.byQName[a];return o?o.attributes.alias?r&&o.attributes.pyAlias||o.attributes.alias:r?o.pyQName:o.qName:a}return"0"},n.getCompletions=function(o){var m,h;const{fileName:y,fileContent:v,position:b,wordStartPos:x,wordEndPos:k,runtime:S}=o;let T=v;v&&n.host.setFile(y,v);const C=_(y,"ts"),E={startPos:x,endPos:k},D=/\.py$/.test(y),A={entries:[],isMemberCompletion:!1,isNewIdentifierLocation:!0,isTypeLocation:!1,namespace:[]};let w=T.lastIndexOf("\n",b-1);w=Math.max(0,w);const N=T.substring(w+1,b),I=D?"#":"//";if(N.trim().startsWith(I))return A;let P=-1,O=-1;for(let e=b-1;e>=0;--e){if("."==T[e]){P=e;break}if(!/\w/.test(T[e]))break;-1==O&&(O=e)}P==b-1?T=T.slice(0,b)+"_"+T.slice(b):-1==O&&(T=T.slice(0,b)+"_"+T.slice(b),O=b);const F=-1!==P;A.isMemberCompletion=F;const L=F?T.slice(P+1,k):T.slice(x,k);F&&(O=P);const R={};let M=n.cloneCompileOpts(n.host.opts);M.fileSystem[y]=T,n.addApiInfo(M),M.syntaxInfo={position:O,type:A.isMemberCompletion?"memberCompletion":"identifierCompletion"};let U,B=[];if(D){const e=t.transpile.pyToTs(M);if(e.syntaxInfo&&e.syntaxInfo.symbols&&(B=p(e.syntaxInfo.symbols,1)),e.globalNames&&(n.lastGlobalNames=e.globalNames),!B.length&&e.globalNames&&(B=p(pxt.U.values(e.globalNames),1)),Object.keys(e.outfiles).forEach((t=>{t===C&&n.host.setFile(t,e.outfiles[t])})),e.sourceMap){const n=T,r=e.outfiles[C]||"",i=t.BuildSourceMapHelpers(e.sourceMap,r,n).py.smallestOverlap(E);i&&(U=i.ts.startPos)}!F&&B.length>50&&(B=B.filter((e=>(D?e.symbol.pyQName:e.symbol.qName).toLowerCase().indexOf(L.toLowerCase())>=0))),M.ast=!0;t.compile(M,n.service)}else{U=b,M.ast=!0,n.host.setOpts(M);n.runConversionsAndCompileUsingService()}const j=n.service.getProgram(),$=j.getSourceFile(C),K=j.getTypeChecker();let z=t.findInnerMostNodeAtPosition($,U);if(t.decompiler.buildCommentMap($).some((e=>e.start<=b&&b<=e.end)))return A;if(z){if([t.SK.StringLiteral,t.SK.FirstTemplateToken,t.SK.NoSubstitutionTemplateLiteral].some((e=>z.kind===e)))return A}A.namespace=t.getCurrentNamespaces(z);let J=!1;if(F){const e=t.findInnerMostNodeAtPosition($,D?U:P-1);if(e){let t;const r=K.getSymbolAtLocation(e);if(t=(null===(m=null==r?void 0:r.members)||void 0===m?void 0:m.size)>0?K.getDeclaredTypeOfSymbol(r):r?K.getTypeOfSymbolAtLocation(r,e):K.getTypeAtLocation(e),t){const e=t.symbol?K.getFullyQualifiedName(t.symbol):f(t,K);if(e){B=t.getApparentProperties().map((t=>e+"."+t.getName())).map((e=>n.lastApiInfo.apis.byQName[e])).filter((e=>!!e)).map((e=>d(e,1))),J=!0}}}}const q=pxt.U.values(n.lastApiInfo.apis.byQName);if(0===B.length){B=p(q.filter((e=>(D?e.pyQName:e.qName).toLowerCase().indexOf(L.toLowerCase())>=0)),1)}if(!D&&!J){z=t.findInnerMostNodeAtPosition($,x),z||(z=$.getSourceFile());let r=e.SymbolFlags.Variable,i=K.getSymbolsInScope(z,r),a=z.getText();"_"!==a&&(i=i.filter((e=>e.name.indexOf(a)>=0)));let o=i.map((e=>{let t=l(e,n.lastApiInfo.apis,K);if(!t){t=c(e,K.getTypeOfSymbolAtLocation(e,z))}return t})).filter((e=>!!e)).map((e=>d(e,1)));o.forEach((e=>e.weight+=5)),B=[...B,...o]}const V=t.getParentCallExpression(z);if(V){let e=t.findCurrentCallArgIdx(V,z,U);if(e>=0){const t=n.blocksInfoOp(n.lastApiInfo.apis,S.bannedCategories),o=r(V);if(o){e>=o.parameters.length&&(e=o.parameters.length-1);const n=i(o,e,t);if(n){a(n.type,V,K,B,n.isEnum).forEach((e=>e.weight=10))}}}}if(!F){let e;if(D){let t=pxt.py.keywords;e=Object.keys(t)}else e=[...ts.pxtc.reservedWords,...ts.pxtc.keywordTypes];let t=e.filter((e=>e.indexOf(L)>=0)).map(s).map((e=>d(e,0)));B=[...B,...t]}let H={};H=D&&n.lastGlobalNames?n.lastGlobalNames:n.lastApiInfo.apis.byQName,B.map((e=>!e.symbol.attributes.alias||F&&7===e.symbol.kind?e:d(n.lastApiInfo.apis.byQName[e.symbol.attributes.alias],e.weight))).filter(g).forEach((e=>{R[e.symbol.qName]=e})),B=pxt.Util.values(R).filter((e=>!!e&&!!e.symbol)),B.sort(u),o.light&&B.length>100&&(B=B.splice(0,100));const{bannedCategories:G,screenSize:W}=o.runtime,Q={takenNames:H,blocksInfo:n.blocksInfoOp(n.lastApiInfo.apis,G),screenSize:W,apis:n.lastApiInfo.apis,checker:null===(h=null===n.service||void 0===n.service?void 0:n.service.getProgram())||void 0===h?void 0:h.getTypeChecker()};return B.forEach((t=>function(t,r,i){const a=n.lastApiInfo.decls[t.qName];if(e.isFunctionLike(a)&&(t.snippetAddsDefinitions||r&&!t.pySnippet||!r&&!t.snippet)){const e=n.getSnippet(i,t,a,r),o=n.snippetStringify(e),s=n.snippetStringify(e,!0),c=n.snippetAddsDefinitions(e);r?(t.pySnippet=o,t.pySnippetWithMarkers=s):(t.snippet=o,t.snippetWithMarkers=s),t.snippetAddsDefinitions=c}}(t.symbol,D,Q))),A.entries=B.map((e=>e.symbol)),A}}(t.service||(t.service={}))}(e.pxtc||(e.pxtc={}))}(ts||(ts={})),function(e){!function(t){let n=function(t){let n=i(t);e.sys.write(n)};function r(e){for(const t of e)n(t)}function i(n){let r;if(void 0!==n.file){let t=n;const{line:i,character:a}=e.getLineAndCharacterOfPosition(t.file,t.start),o=t.file.fileName;r=Object.assign({fileName:o,line:i,column:a},t)}else r=Object.assign({fileName:void 0,line:void 0,column:void 0},n);return function(n){let r="";n.fileName&&(r+=`${n.fileName}(${n.line+1},${n.column+1}): `);let i=e.sys?e.sys.newLine:"\n";const a=t.DiagnosticCategory[n.category].toLowerCase();return r+=`${a} TS${n.code}: ${t.flattenDiagnosticMessageText(n.messageText,i)}${i}`,r}(r)}function a(t,n){const r=e.createCompilerHost(n);return r.getDefaultLibFileName=()=>"node_modules/pxt-core/pxtcompiler/ext-typescript/lib/lib.d.ts",e.createProgram(t,n,r)}function o(e){let n=e.getSyntacticDiagnostics();return 0===n.length&&(n=e.getOptionsDiagnostics().concat(t.Util.toArray(e.getGlobalDiagnostics())),0===n.length&&(n=e.getSemanticDiagnostics())),n.slice(0)}t.getDiagnosticString=i,t.plainTscCompileDir=function(t){const i=e.parseCommandLine([]);let s=e.findConfigFile(t,e.sys.fileExists);const c=function(){let n=e.sys.readFile(s);const a=e.parseConfigFileTextToJson(s,n),o=a.config;if(!o)return r([a.error]),void e.sys.exit(e.ExitStatus.DiagnosticsPresent_OutputsSkipped);const c=e.parseJsonConfigFileContent(o,e.sys,t,i.options,s);if(c.errors.length>0)return r(c.errors),void e.sys.exit(e.ExitStatus.DiagnosticsPresent_OutputsSkipped);return c}();let l=a(c.fileNames,c.options);return o(l).forEach(n),l},t.plainTscCompileFiles=a,t.getProgramDiagnostics=o}(e.pxtc||(e.pxtc={}))}(ts||(ts={})),function(e){!function(t){function n(t){if(!t||!t.kind)return null;switch(t.kind){case e.SyntaxKind.StringKeyword:return"str";case e.SyntaxKind.NumberKeyword:return"number";case e.SyntaxKind.BooleanKeyword:return"bool";case e.SyntaxKind.VoidKeyword:return"None";case e.SyntaxKind.FunctionType:return function(e){let t=n(e.type);return`(${e.parameters.map((e=>e.type)).map(n).join(", ")}) -> ${t}`}(t);case e.SyntaxKind.ArrayType:return`List[${n(t.elementType)}]`;case e.SyntaxKind.TypeReference:{let e=t;return e.typeName&&e.typeName.getText?e.typeName.getText():""}case e.SyntaxKind.AnyKeyword:return"any";default:return pxt.tickEvent("depython.todo.tstypenodetopytype",{kind:t.kind}),""}}function r(t){if(!t||!t.flags)return null;switch(t.flags){case e.TypeFlags.String:return"str";case e.TypeFlags.Number:return"number";case e.TypeFlags.Boolean:return"bool";case e.TypeFlags.Void:return"None";case e.TypeFlags.Any:return"any";default:return pxt.tickEvent("depython.todo.tstypetopytype",{kind:t.flags}),""}}function i(i,a,o){function s(t,n,r=!1){let a=i.getTypeAtLocation(n);if(!a)return"None";r&&(a=a.getCallSignatures()[0].getReturnType());const o=i.typeToString(a,void 0,e.TypeFormatFlags.UseFullyQualifiedType);return/^\d/.test(o)?"number":"this"==o?l(i,a.symbol):o}let c=function(e){switch(e.kind){case t.SK.MethodDeclaration:case t.SK.MethodSignature:return 1;case t.SK.PropertyDeclaration:case t.SK.PropertySignature:case t.SK.GetAccessor:case t.SK.SetAccessor:return 2;case t.SK.Constructor:case t.SK.FunctionDeclaration:return 3;case t.SK.VariableDeclaration:return 4;case t.SK.ModuleDeclaration:return 5;case t.SK.EnumDeclaration:return 6;case t.SK.EnumMember:return 7;case t.SK.ClassDeclaration:return 8;case t.SK.InterfaceDeclaration:return 9;default:return 0}}(o);if(0!=c){let l=o,u=t.parseComments(l);if(u.weight<0)return null;let d,p=/^(.*)\.(.*)/.exec(a),f=3==c||1==c,_=null,m=null,g=e.getSourceFileOfNode(o);if(g){let e=/^pxt_modules\/([^\/]+)/.exec(g.fileName);e&&(_=e[1])}if(8==c||9==c){let e=o;if(d=[],e.heritageClauses)for(let t of e.heritageClauses)if(t.types)for(let e of t.types)d.push(s(0,e))}6!=c&&7!==c||(d||(d=[])).push("Number");let h={kind:c,qName:a,namespace:p?p[1]:"",name:p?p[2]:a,fileName:o.getSourceFile().fileName,attributes:u,pkg:_,pkgs:m,extendsTypes:d,retType:o.kind==e.SyntaxKind.Constructor?"void":5==c?"":s(l.type,l,f),parameters:f?t.Util.toArray(l.parameters).map(((a,o)=>{let c,l,d=t.getName(a),p=u.paramHelp[d]||"",f=u.paramMin&&u.paramMin[d],_=u.paramMax&&u.paramMax[d];/\beg\.?:\s*(.+)/.exec(p);if(a.type&&a.type.kind===t.SK.FunctionType){const n=i.getSignatureFromDeclaration(a.type).getParameters();"objectdestructuring"===u.mutate?(t.assert(n.length>0),c=i.getTypeAtLocation(n[0].valueDeclaration).getProperties().map((e=>({name:e.getName(),type:i.typeToString(i.getTypeOfSymbolAtLocation(e,n[0].valueDeclaration))})))):l=n.map(((t,n)=>({name:t.getName(),type:i.typeToString(i.getTypeOfSymbolAtLocation(t,a),void 0,e.TypeFormatFlags.UseFullyQualifiedType)})))}let m={};const g=i.getTypeAtLocation(a);let h=g&&!!(g.flags&(e.TypeFlags.Enum|e.TypeFlags.EnumLiteral));if(u.block&&u.paramShadowOptions){const e=[];u.block.replace(/%(\w+)/g,((t,n)=>(e.push(n),""))),u.paramShadowOptions[e[o]]&&(m.fieldEditorOptions={value:u.paramShadowOptions[e[o]]})}f&&(m.min={value:f}),_&&(m.max={value:_});const y=a.type&&n(a.type)||g&&r(g)||"unknown",v=a.initializer?a.initializer.getText():t.getExplicitDefault(u,d)||(a.questionToken?"undefined":void 0);return{name:d,description:p,type:s(a.type,a),pyTypeString:y,initializer:v,default:u.paramDefl[d],properties:c,handlerParameters:l,options:m,isEnum:h}})):null,snippet:e.isFunctionLike(o)?null:void 0};switch(h.kind){case 7:h.pyName=t.U.snakify(h.name).toUpperCase();break;case 4:case 1:case 2:case 3:h.pyName=t.U.snakify(h.name);break;case 6:case 8:case 9:case 5:default:h.pyName=h.name}return(o.kind===t.SK.GetAccessor||(o.kind===t.SK.PropertyDeclaration||o.kind===t.SK.PropertySignature)&&t.isReadonly(o))&&(h.isReadOnly=!0),h}return null}function a(e){return!!e.attributes.block&&!!e.attributes.blockId}let o;function s(e,n){function r(t){return-t(e)+t(n)}let i=r((e=>a(e)?1:-1));return i||(i=r((e=>e.namespace?-1:1)),i||(o||(o={},o[4]=100,o[5]=101,o[3]=99,o[2]=98,o[1]=97,o[8]=89,o[6]=81,o[7]=80),i=r((e=>o[e.kind]||0)),i||(i=r((e=>e.attributes.weight||50)),i||t.U.strcmp(e.name,n.name))))}function c(e,n,r=!1){const a={byQName:{},jres:n},o={},s=e.getTypeChecker(),c=e=>{var n,r;if(e.kind!=t.SK.VariableStatement){if(t.isExported(e)){if(!e.symbol)return void console.warn("no symbol",e);let c=l(s,e.symbol);e.kind==t.SK.SetAccessor&&(c+="@set"),o[c]=e;let u=i(s,c,e);if(u){let i=t.U.lookup(a.byQName,c);if(i)if(9==i.kind&&9!=u.kind)a.byQName[c+"@type"]=i;else if(9!=i.kind&&9==u.kind)a.byQName[c+"@type"]=u,u=i;else{const e=null===(n=i.attributes._source)||void 0===n?void 0:n.trim(),a=null===(r=u.attributes._source)||void 0===r?void 0:r.trim();let o=e+"\n"+a;e&&(null==a?void 0:a.indexOf(e))>=0?o=a:a&&(null==e?void 0:e.indexOf(a))>=0&&(o=e),u.attributes=t.parseCommentString(o),5===i.kind&&(u.pkgs=i.pkgs||[],i.pkg!==u.pkg&&(u.pkgs.find((e=>e===i.pkg))||u.pkgs.push(i.pkg))),i.extendsTypes&&(u.extendsTypes=u.extendsTypes||[],i.extendsTypes.forEach((e=>{-1===u.extendsTypes.indexOf(e)&&u.extendsTypes.push(e)})))}!e.parent||e.parent.kind!=t.SK.ClassDeclaration&&e.parent.kind!=t.SK.InterfaceDeclaration||t.isStatic(e)||(u.isInstance=!0),a.byQName[c]=u}}if(e.kind==t.SK.ModuleDeclaration){let n=e;if(n.body.kind==t.SK.ModuleBlock){n.body.statements.forEach(c)}else n.body.kind==t.SK.ModuleDeclaration&&c(n.body)}else if(e.kind==t.SK.InterfaceDeclaration){e.members.forEach(c)}else if(e.kind==t.SK.ClassDeclaration){e.members.forEach(c)}else if(e.kind==t.SK.EnumDeclaration){e.members.forEach(c)}}else{e.declarationList.declarations.forEach(c)}};for(let t of e.getSourceFiles())t.statements.forEach(c);let u=[];for(let e in a.byQName){let r=a.byQName[e];r.qName=e,r.attributes._source=null,r.extendsTypes&&r.extendsTypes.length&&u.push(r);let i=r.attributes.jres;if(i){"true"==i&&(i=e);let a=t.U.lookup(n||{},i);a&&a.icon&&!r.attributes.iconURL&&(r.attributes.iconURL=a.icon),a&&a.data&&!r.attributes.jresURL&&(r.attributes.jresURL="data:"+a.mimeType+";base64,"+a.data)}if(r.pyName){let e=t.U.lookup(t.ts2PyFunNameMap,r.qName);if(e&&e.n)r.pyQName=e.n,r.pySnippet=e.snippet,r.pySnippetName=e.n,r.pySnippetWithMarkers=void 0;else if(r.namespace){let e=a.byQName[r.namespace];e?r.pyQName=e.pyQName+"."+r.pyName:(pxt.log("namespace missing: "+r.namespace),r.pyQName=r.namespace+"."+r.pyName)}else r.pyQName=r.pyName}}let d={},p=e=>{if(t.U.lookup(d,e.qName))return;d[e.qName]=!0;let n={};n[e.qName]=!0;for(let t of e.extendsTypes||[]){n[t]=!0;let e=a.byQName[t];if(e){p(e);for(let t of e.extendsTypes)n[t]=!0}}e.extendsTypes=Object.keys(n)};return u.forEach(p),r&&delete a.byQName["Array.map"],{apis:a,decls:o}}function l(e,t){return t.isBogusSymbol?t.name:e.getFullyQualifiedName(t)}t.placeholderChar="◊",t.ts2PyFunNameMap={"Math.trunc":{n:"int",t:e.SyntaxKind.NumberKeyword,snippet:"int(0)"},"Math.min":{n:"min",t:e.SyntaxKind.NumberKeyword,snippet:"min(0, 0)"},"Math.max":{n:"max",t:e.SyntaxKind.NumberKeyword,snippet:"max(0, 0)"},"Math.abs":{n:"abs",t:e.SyntaxKind.NumberKeyword,snippet:"abs(0)"},"console.log":{n:"print",t:e.SyntaxKind.VoidKeyword,snippet:'print(":)")'},".length":{n:"len",t:e.SyntaxKind.NumberKeyword},".toLowerCase()":{n:"string.lower",t:e.SyntaxKind.StringKeyword},".toUpperCase()":{n:"string.upper",t:e.SyntaxKind.StringKeyword},".charCodeAt(0)":{n:"ord",t:e.SyntaxKind.NumberKeyword},"pins.createBuffer":{n:"bytearray",t:e.SyntaxKind.Unknown},"pins.createBufferFromArray":{n:"bytes",t:e.SyntaxKind.Unknown},"control.createBuffer":{n:"bytearray",t:e.SyntaxKind.Unknown},"control.createBufferFromArray":{n:"bytes",t:e.SyntaxKind.Unknown},"!!":{n:"bool",t:e.SyntaxKind.BooleanKeyword},"Array.indexOf":{n:"Array.index",t:e.SyntaxKind.Unknown},"Array.push":{n:"Array.append",t:e.SyntaxKind.Unknown},parseInt:{n:"int",t:e.SyntaxKind.NumberKeyword,snippet:'int("0")'},"_py.range":{n:"range",t:e.SyntaxKind.Unknown,snippet:"range(4)"}},t.emitPyTypeFromTypeNode=n,t.emitPyTypeFromTsType=r,t.genDocs=function(n,r,i={}){pxt.debug(`generating docs for ${n}`),pxt.debug(JSON.stringify(Object.keys(r.byQName),null,2));const a={},o=t.Util.values(r.byQName),c=o.filter((e=>7==e.kind)).sort(s),l={},u={},d={},p=t=>{if(i.locs&&t.qName&&!/^__/.test(t.name)){if(pxt.debug(`loc: ${t.qName}`),7!=t.kind){const n=e.pxtc.blocksCategory(t);n&&(u[`{id:category}${n}`]=n)}t.attributes.jsDoc&&(d[t.qName]=t.attributes.jsDoc),t.attributes.block&&(u[`${t.qName}|block`]=t.attributes.block),t.attributes.group&&(u[`{id:group}${t.attributes.group}`]=t.attributes.group),t.attributes.subcategory&&(u[`{id:subcategory}${t.attributes.subcategory}`]=t.attributes.subcategory),t.parameters&&t.parameters.filter((e=>!!e.description)).forEach((e=>{d[`${t.qName}|param|${e.name}`]=e.description}))}},f=(e,t)=>{if(!i.locs)return;const r={};Object.keys(e).sort().forEach((t=>r[t]=e[t])),a[n+t+"-strings.json"]=JSON.stringify(r,null,2)};for(const e of o){if(5==e.kind){if(!o.filter((t=>t.namespace==e.name&&!!t.attributes.jsDoc))[0])continue;e.attributes.block||(e.attributes.block=e.name)}p(e)}return i.locs&&c.forEach((e=>{e.attributes.block&&(u[`${e.qName}|block`]=e.attributes.block),e.attributes.jsDoc&&(u[e.qName]=e.attributes.jsDoc)})),f(u,""),f(d,"-jsdoc"),i.pxtsnippet&&(i.pxtsnippet.forEach((e=>function(e,t){const n=["label","title","hint","errorMessage"];t[e.label]=e.label,e.questions.forEach((e=>{n.forEach((n=>{e[n]&&(t[e[n]]=e[n])}))}))}(e,l))),f(l,"-snippet")),a},t.hasBlock=a,t.compareSymbols=s,t.getApiInfo=function(e,t,n=!1){return c(e,t,n).apis},t.internalGetApiInfo=c,t.getFullName=l}(e.pxtc||(e.pxtc={}))}(ts||(ts={})),function(e){!function(t){!function(n){let r,i,a={fileSystem:{},sourceFiles:[],target:{isNative:!1,hasHex:!1,switches:{}}};class o{constructor(){this.opts=a,this.fileVersions={},this.projectVer=0,this.pxtModulesOK=null}getProjectVersion(){return this.projectVer+""}setFile(e,t){this.opts.fileSystem[e]!=t&&(this.fileVersions[e]=(this.fileVersions[e]||0)+1,this.opts.fileSystem[e]=t,this.projectVer++)}reset(){this.setOpts(a),this.pxtModulesOK=null}setOpts(e){t.Util.iterMap(e.fileSystem,((e,t)=>{this.opts.fileSystem[e]!=t&&(this.fileVersions[e]=(this.fileVersions[e]||0)+1)})),this.opts=Object.assign(Object.assign({},e),{fileSystem:Object.assign({},e.fileSystem)}),this.projectVer++}getCompilationSettings(){return t.getTsCompilerOptions(this.opts)}getScriptFileNames(){return this.opts.sourceFiles.filter((e=>t.U.endsWith(e,".ts")))}getScriptVersion(e){return(this.fileVersions[e]||0).toString()}getScriptSnapshot(t){let n=this.opts.fileSystem[t];return null!=n?e.ScriptSnapshot.fromString(n):null}getNewLine(){return"\n"}getCurrentDirectory(){return"."}getDefaultLibFileName(e){return"no-default-lib.d.ts"}log(e){console.log("LOG",e)}trace(e){console.log("TRACE",e)}error(e){console.error("ERROR",e)}useCaseSensitiveFileNames(){return!0}}function s(e,r){return e?(n.lastLocBlocksInfo||(n.lastLocBlocksInfo=t.getBlocksInfo(e,r)),n.lastLocBlocksInfo):(n.lastBlocksInfo||(n.lastBlocksInfo=t.getBlocksInfo(n.lastApiInfo.apis,r)),n.lastBlocksInfo)}function c(e){return n.lastApiInfo||(n.lastApiInfo=t.internalGetApiInfo(n.service.getProgram(),e.jres)),n.lastApiInfo}function l(e){if(!e.apisInfo){const n=c(e);e.apisInfo=t.U.clone(n.apis)}}function u(e){let t=pxt.U.flatClone(e);return t.fileSystem=pxt.U.flatClone(t.fileSystem),t}n.blocksInfoOp=s,n.getLastApiInfo=c,n.addApiInfo=l,n.cloneCompileOpts=u,n.IsOpErr=function(e){return!!e.errorMessage};const d={reset:()=>{n.service=e.createLanguageService(n.host),n.lastApiInfo=void 0,n.lastGlobalNames=void 0,n.host.reset()},setOptions:e=>{n.host.setOpts(e.options)},syntaxInfo:e=>{var r,i,a;let o=e.fileContent;e.fileContent&&n.host.setFile(e.fileName,e.fileContent);let s=u(n.host.opts);s.fileSystem[e.fileName]=o,l(s),s.syntaxInfo={position:e.position,type:e.infoType};const d=e.fileName.endsWith(".py"),f="symbol"===s.syntaxInfo.type,_="signature"===s.syntaxInfo.type;if(d){let e=t.transpile.pyToTs(s);e.globalNames&&(n.lastGlobalNames=e.globalNames)}else{s.ast=!0,n.host.setOpts(s);p();const i=n.service.getProgram(),a=i.getSourceFile(e.fileName),o=i.getTypeChecker();if(f||_){let i=t.findInnerMostNodeAtPosition(a,e.position);if(i)if(f){const e=o.getSymbolAtLocation(i);if(e){let t=n.getPxtSymbolFromTsSymbol(e,s.apisInfo,o);s.syntaxInfo.symbols=[t],s.syntaxInfo.beginPos=i.getStart(),s.syntaxInfo.endPos=i.getEnd()}}else if(_){const n=null===(r=null==i?void 0:i.pxt)||void 0===r?void 0:r.callInfo;if(n){const r=s.apisInfo.byQName[n.qName];s.syntaxInfo.symbols=[r],s.syntaxInfo.beginPos=i.getStart(),s.syntaxInfo.endPos=i.getEnd();const a=t.getParentCallExpression(i);if(a){const n=t.findCurrentCallArgIdx(a,i,e.position);s.syntaxInfo.auxResult=n}}}}}if(f&&!(null===(i=s.syntaxInfo.symbols)||void 0===i?void 0:i.length)){const r=n.getWordAtPosition(e.fileContent,e.position);if(r)if(d&&"range"===r.text){const e=c(s).apis;e.byQName["_py.range"]&&(s.syntaxInfo.symbols=[e.byQName["_py.range"]],s.syntaxInfo.beginPos=r.start,s.syntaxInfo.endPos=r.end)}else{const e=t.getHelpForKeyword(r.text,d);e&&(s.syntaxInfo.auxResult={documentation:e,displayString:n.displayStringForKeyword(r.text,d)},s.syntaxInfo.beginPos=r.start,s.syntaxInfo.endPos=r.end)}}if(null===(a=s.syntaxInfo.symbols)||void 0===a?void 0:a.length){const e=c(s).apis;d&&(s.syntaxInfo.symbols=s.syntaxInfo.symbols.map((t=>e.byQName[t.qName]||t))),f&&(s.syntaxInfo.auxResult=s.syntaxInfo.symbols.map((t=>n.displayStringForSymbol(t,d,e))))}return s.syntaxInfo},getCompletions:e=>n.getCompletions(e),compile:e=>{n.host.setOpts(e.options);const r=p();return t.timesToMs(r),r},decompile:e=>(n.host.setOpts(e.options),t.decompile(n.service.getProgram(),e.options,e.fileName,!1)),pydecompile:e=>(n.host.setOpts(e.options),t.transpile.tsToPy(n.service.getProgram(),e.fileName)),decompileSnippets:e=>(n.host.setOpts(e.options),t.decompileSnippets(n.service.getProgram(),e.options,!1)),assemble:e=>({words:t.processorInlineAssemble(n.host.opts.target,e.fileContent)}),py2ts:e=>(l(e.options),t.transpile.pyToTs(e.options)),fileDiags:e=>t.patchUpDiagnostics(function(e){if(!/\.ts$/.test(e))return[];let t=n.service.getSyntacticDiagnostics(e);return t&&t.length||(t=n.service.getSemanticDiagnostics(e)),t||(t=[]),t}(e.fileName)),allDiags:()=>{let e=p();return t.timesToMs(e),n.host.opts.target.switches.time&&console.log("DIAG-TIME",e.times),e},format:e=>{const n=e.format;return t.format(n.input,n.pos)},apiInfo:()=>{if(n.lastBlocksInfo=void 0,r=void 0,n.host.opts!==a)return n.lastApiInfo=t.internalGetApiInfo(n.service.getProgram(),n.host.opts.jres),n.lastApiInfo.apis},snippet:t=>{const r=t.snippet;if(!n.lastApiInfo)return;const i=n.lastApiInfo.apis.byQName[r.qName],a=n.lastApiInfo.decls[r.qName];if(!i||!a||!e.isFunctionLike(a))return;const o=!!r.python;let c={};c=o&&n.lastGlobalNames?n.lastGlobalNames:n.lastApiInfo.apis.byQName;const{bannedCategories:l,screenSize:u}=t.runtime,{apis:d}=n.lastApiInfo,p={apis:d,blocksInfo:s(d,l),takenNames:c,bannedCategories:l,screenSize:u,checker:n.service&&n.service.getProgram().getTypeChecker()},f=n.getSnippet(p,i,a,o);return n.snippetStringify(f)},blocksInfo:e=>s(e,e.blocks&&e.blocks.bannedCategories),apiSearch:e=>{const t=e.search,i=s(t.localizedApis,e.blocks&&e.blocks.bannedCategories);t.localizedStrings&&pxt.Util.setLocalizedStrings(t.localizedStrings);const a=(e,t,n)=>{if(e)return"string"==typeof e?e:t?e[t]:Object.keys(e).map((t=>e[t])).join(" ")},o=e=>{var t;if(null===(t=e.attributes)||void 0===t?void 0:t._def){let t=[];const n=e.attributes._def,r=pxt.blocks.compileInfo(e);for(let e of n.parts)switch(e.kind){case"label":t.push(e.text);break;case"param":let n=r.definitionNameToParam[e.name];t.push((null==n?void 0:n.defaultValue)||e.varName||(null==n?void 0:n.actualName)||e.name)}return t.join(" ")}return e.attributes.block},c=e=>{var t;const n=null===(t=e.attributes)||void 0===t?void 0:t.paramHelp;return n&&Object.keys(n).map((e=>n[e])).join(" "),""};if(!n.builtinItems){n.builtinItems=[],n.blockDefinitions=pxt.blocks.blockDefinitions();for(const e in n.blockDefinitions){const t=n.blockDefinitions[e];if(t.operators)for(const r in t.operators){t.operators[r].forEach((i=>n.builtinItems.push({id:e,name:t.name,jsdoc:"string"==typeof t.tooltip?t.tooltip:t.tooltip[i],block:i,field:[r,i],builtinBlock:!0})))}else n.builtinItems.push({id:e,name:t.name,jsdoc:a(t.tooltip,t.tooltipSearch),block:a(t.block,t.blockTextSearch),builtinBlock:!0})}}let l;if(!r||t.subset){const e={};let a=[];t.subset&&(n.tbSubset=t.subset,a=n.builtinItems.filter((e=>!!n.tbSubset[e.id]))),n.tbSubset?l=i.blocks.filter((e=>!!n.tbSubset[e.attributes.blockId])):(l=i.blocks,a=n.builtinItems);let s=l.map((e=>({id:e.attributes.blockId,qName:e.qName,name:e.name,namespace:e.namespace,block:o(e),params:c(e),jsdoc:e.attributes.jsDoc,localizedCategory:n.tbSubset&&"string"==typeof n.tbSubset[e.attributes.blockId]?n.tbSubset[e.attributes.blockId]:void 0}))),u={};a.forEach((e=>u[e.id]=!0)),s=s.filter((e=>!(e.id in u)));let d=0;l.forEach((t=>{const n=e[t.qName]=(e=>{const t=e.attributes.weight||50,n=i.apis.byQName[e.namespace];return(1e3*(n&&n.attributes.weight||50)+t)*(n&&n.attributes.advanced||e.attributes.advanced?1:1e6)})(t);d=Math.max(d,n)})),s=s.concat(a);r=new Fuse(s,{shouldSort:!0,threshold:.6,location:0,distance:100,maxPatternLength:16,minMatchCharLength:2,findAllMatches:!1,caseSensitive:!1,keys:[{name:"name",weight:.3},{name:"namespace",weight:.1},{name:"localizedCategory",weight:.1},{name:"block",weight:.4375},{name:"params",weight:.0625},{name:"jsdoc",weight:.0625}],sortFn:function(t,n){const r=t.qName?1-e[t.item.qName]/d:1,i=n.qName?1-e[n.item.qName]/d:1;return t.score*(1+r/10)-n.score*(1+i/10)}})}return r.search(t.term).slice(0,7)},projectSearch:e=>{const t=e.projectSearch,n=t.headers;if(!i){i=new Fuse(n,{shouldSort:!0,threshold:.6,location:0,distance:100,maxPatternLength:16,minMatchCharLength:2,findAllMatches:!1,caseSensitive:!1,keys:[{name:"name",weight:.3}]})}return i.search(t.term)},projectSearchClear:()=>{i=void 0}};function p(){l(n.host.opts);const e=t.U.flatClone(n.host.opts.fileSystem);let r=t.runConversionsAndStoreResults(n.host.opts);(null==r?void 0:r.globalNames)&&(n.lastGlobalNames=r.globalNames);const i=n.host.opts.fileSystem;n.host.opts.fileSystem=e;for(let e of Object.keys(i))n.host.setFile(e,i[e]);if(0==r.diagnostics.length){n.host.opts.skipPxtModulesEmit=!1,n.host.opts.skipPxtModulesTSC=!1;const e=n.host.opts.target.isNative?"native":"js";!n.host.opts.target.switches.noIncr&&n.host.pxtModulesOK&&(n.host.opts.skipPxtModulesTSC=!0,n.host.opts.noEmit?n.host.opts.skipPxtModulesEmit=!0:n.host.opts.target.isNative?n.host.opts.skipPxtModulesEmit=!1:"js"!=n.host.pxtModulesOK||n.host.opts.breakpoints&&!n.host.opts.justMyCode||(n.host.opts.skipPxtModulesEmit=!0));let i=t.compile(n.host.opts,n.service);if(r=Object.assign({sourceMap:r.sourceMap},i),(r.needsFullRecompile||(!r.success||r.diagnostics.length)&&n.host.opts.clearIncrBuildAndRetryOnError)&&(pxt.debug("triggering full recompile"),pxt.tickEvent("compile.fullrecompile"),n.host.opts.skipPxtModulesEmit=!1,i=t.compile(n.host.opts,n.service),r=Object.assign({sourceMap:r.sourceMap},i)),r.diagnostics.every((e=>!t.isPxtModulesFilename(e.fileName)))&&(n.host.pxtModulesOK=e),r.ast){let e=t.internalGetApiInfo(r.ast);e&&(n.lastApiInfo=e)}}return r}n.runConversionsAndCompileUsingService=p,n.performOperation=function(t,r){n.service||(n.host=new o,n.service=e.createLanguageService(n.host));let i=null;if(d.hasOwnProperty(t))try{i=(0,d[t])(r)||{}}catch(e){i={errorMessage:e.stack}}else i={errorMessage:"No such operation: "+t};return i}}(t.service||(t.service={}))}(e.pxtc||(e.pxtc={}))}(ts||(ts={})),function(e){!function(t){!function(n){function r(e){return"object"==typeof e&&void 0!==e.default}function i(e){return"object"==typeof e&&"number"==typeof e.length}function a(e,t=!1){const n={};let s=1;return function e(c){if(r(c)){if(t){if(o(c.default))return e(c.default);const t=a(c.default,!1);let r=n[t];if(r&&!c.isLiteral||(r=s,s++,n[t]=r),t.indexOf(".")>=0&&t.indexOf(" ")<0){let e=t.split(".");return e[e.length-1]="${"+r+":"+e[e.length-1]+"}",e.join(".")}return"${"+r+":"+t+"}"}return e(c.default)}return i(c)?c.map((t=>e(t))).join(""):c}(e)}function o(e){return!!r(e)||!!i(e)&&e.map(o).reduce(((e,t)=>e||t),!1)}function s(e){return e.attributes.shim&&"@"==e.attributes.shim[0]||e.attributes.pyConvertToTaggedTemplate}n.snippetStringify=a,n.snippetHasReplacementPoints=o,n.snippetAddsDefinitions=function e(t){return r(t)?t.isDefinition||e(t.default):!!i(t)&&t.map(e).reduce(((e,t)=>e||t),!1)},n.getSnippet=function r(i,o,c,l,u=0){var d,p;let{apis:f,takenNames:_,blocksInfo:m,screenSize:g,checker:h}=i;const y=pxt.py.INDENT,v=l?"python":"typescript";let b=o.namespace,x=!1,k="",S=0,T=[];if(s(o))return l?`${o.name}(""" """)`:`${o.name}\`\``;let C="";C=c.kind==t.SK.Constructor?B(c.symbol)||c.parent.name.getText():B(c.symbol)||c.name.getText(),l&&(C=t.U.snakify(C));const E=o.attributes;if("TD_ID"===E.shim&&u&&c.parameters.length)return M(c.parameters[0]);const D=o,A=pxt.blocks.compileInfo(D),w=m.blocksById,N=(null===(d=E._def)||void 0===d?void 0:d.parameters.filter((e=>!!A.definitionNameToParam[e.name])).map((e=>A.definitionNameToParam[e.name].actualName)))||[],I=c.parameters?c.parameters.filter((e=>!e.initializer&&!e.questionToken||N.indexOf(e.name.getText())>=0)):[],P=I.map(M).map((e=>({default:e,isLiteral:!0})));if(D.attributes.block)if(D.attributes.defaultInstance)b=D.attributes.defaultInstance,l&&b&&(b=t.U.snakify(b));else if("variables_get"===(null===(p=A.thisParameter)||void 0===p?void 0:p.shadowBlockId))b=A.thisParameter.defaultValue||A.thisParameter.definitionName,l&&b&&(b=t.U.snakify(b));else if(D.namespace){const e=f.byQName[D.namespace];if(e.attributes.fixedInstances){let n,r=t.Util.values(f.byQName),i=function(e){return r.filter((e=>e.extendsTypes)).filter((t=>t.extendsTypes.reduce(((t,n)=>t||-1!=n.indexOf(e)),!1))).reduce(((e,t)=>e.concat(t.extendsTypes)),[])},a=r.filter((e=>4===e.kind&&e.attributes.fixedInstance));const o=a.filter((t=>t.retType==e.qName)).sort(((e,t)=>e.name.localeCompare(t.name)));if(o.length)n=o[0];else{n=a.filter((t=>-1!==i(e.qName).indexOf(t.retType))).sort(((e,t)=>e.name.localeCompare(t.name)))[0]}n?(b=`${j(n)}`,k=n.namespace):k=e.namespace,k&&(x=!0)}else if(1==D.kind||2==D.kind){if(A.thisParameter){let e;A.thisParameter.definitionName&&(e=A.thisParameter.definitionName,e=e[0].toUpperCase()+e.substring(1),e=`my${e}`),b=A.thisParameter.defaultValue||e,l&&b&&(b=t.U.snakify(b))}}else if(8===e.kind)return}const O=E&&(l?E.pySnippet:E.snippet);let F;if(O)F=[O],b=void 0;else if(F=[C],(null==P?void 0:P.length)||1==D.kind||3==D.kind||8==D.kind){const e=P.reduce(((e,t)=>[...e,e.length?", ":"",t]),[]);F=F.concat(["(",...e,")"])}let L=b?[b,".",...F]:F;if(L=x?[function(e){const t=e.indexOf(".");return t<0?e:e.substring(0,t)}(k),".",...L]:L,E&&E.blockSetVariable)if(l){L=[{default:R(t.U.snakify(E.blockSetVariable)),isDefinition:!0}," = ",...L]}else{L=["let ",{default:R(E.blockSetVariable),isDefinition:!0}," = ",...L]}return[T,L];function R(t){return _[t]?e.pxtc.decompiler.getNewName(t,_,!1):t}function M(a){var s,c;const d=a.type;if(!d)return l?"None":"null";const p=a.name.kind===t.SK.Identifier?a.name.text:void 0,_=null===(s=E.paramSnippets)||void 0===s?void 0:s[p];if(_)if(l){if(_.python)return _.python}else if(_.ts)return _.ts;const m=null===(c=null==E?void 0:E.paramDefl)||void 0===c?void 0:c[p];if(m){let e;if(d.kind==t.SK.AnyKeyword){const n=m.toUpperCase();e=Number.isNaN(+n)?"FALSE"==n||"TRUE"==n?t.SK.BooleanKeyword:n.includes(".")?t.SK.EnumKeyword:t.SK.StringKeyword:t.SK.NumberKeyword}if(d.kind===t.SK.StringKeyword||e===t.SK.StringKeyword)return 0!=m.indexOf('"')?`"${m}"`:m;const r=null==h?void 0:h.getTypeAtLocation(a),i=n.getPxtSymbolFromTsSymbol(null==r?void 0:r.symbol,f,h);return(null==i?void 0:i.attributes.fixedInstances)&&l?pxt.Util.snakify(m):l?t.tsSnippetToPySnippet(m,i):m}let y=function(e){var t,n;const r=pxt.blocks.compileInfo(o),i=null===(t=r.parameters)||void 0===t?void 0:t.find((t=>t.actualName===e));if(!(null==i?void 0:i.shadowBlockId))return null;let a=w[i.shadowBlockId];if(!a)return null;const s=null===(n=a.attributes)||void 0===n?void 0:n.paramFieldEditor;if(!s)return null;const c=s[e];if(!c)return null;const l=a.attributes.paramFieldEditorOptions||{};switch(c){case"sprite":return function(e){const t={initColor:0,initWidth:16,initHeight:16};if(null==e?void 0:e.sizes){const n=e.sizes.split(";"),r=[];for(let e=0;e<n.length;e++){const t=n[e].split(",");if(2!==t.length)continue;let i=parseInt(t[0]),a=parseInt(t[1]);isNaN(i)||isNaN(a)||(i<0&&g&&(i=g.width),a<0&&g&&(a=g.height),r.push([i,a]))}r.length>0&&(t.initWidth=r[0][0],t.initHeight=r[0][1])}return t.initColor=n(null==e?void 0:e.initColor,t.initColor),t.initWidth=n(null==e?void 0:e.initWidth,t.initWidth),t.initHeight=n(null==e?void 0:e.initHeight,t.initHeight),pxt.sprite.imageLiteralFromDimensions(t.initWidth,t.initHeight,t.initColor,v);function n(e,t){const n=parseInt(e);return isNaN(n)?t:n}}(l[e])}return null}(p);if(y)return y;let b=function(e){let t=(E._shadowOverrides||{})[e];if(!t){const n=pxt.blocks.compileInfo(o);for(const r of n.parameters)if(r.actualName===e){t=r.shadowBlockId;break}}if(!t)return null;let n=w[t];if(!n)return null;if("TD_ID"===n.attributes.shim&&n.parameters.length){let e=n.parameters[0].type;n=f.byQName[e]||n}return n}(p);if(b){let s=n.getTsSymbolFromPxtSymbol(b,a,e.SymbolFlags.Enum);if(s){let e=h.getTypeOfSymbolAtLocation(s,a);if(e){let t=U(e);if(t)return t}}const c=b.attributes;if("KIND_GET"===c.shim&&c.blockId){const e=c.kindNamespace||o.namespace,n=t.Util.values(f.byQName).find((t=>t.namespace===e&&t.attributes.isKind));if(n)return l?n.pyQName:n.qName}if(u<3&&n.lastApiInfo.decls[b.qName]){let e=r(i,b,n.lastApiInfo.decls[b.qName],l,u+1);if(e)return e}}if(d.kind===t.SK.StringKeyword&&"leds"===p)return l?'"""\n. . . . .\n. . . . .\n. . # . .\n. . . . .\n. . . . .\n"""':"`\n. . . . .\n. . . . .\n. . # . .\n. . . . .\n. . . . .\n`";if(d.kind===t.SK.FunctionType){const e=d;let t=h?h.getSignatureFromDeclaration(e):void 0;return t?$(t,!0):K(p)}const x=n.getBasicKindDefault(d.kind,l);if(void 0!==x)return x;let k=h&&h.getTypeAtLocation(a);if(k){let e=U(k);if(e)return e}return l?"None":"null"}function U(r){if(r.symbol&&r.symbol.flags&e.SymbolFlags.Enum){return n.getDefaultEnumValue(r,l)}const i=n.getPxtSymbolFromTsSymbol(r.symbol,f,h);if(t.isObjectType(r)){const t=i&&i.attributes&&(l?i.attributes.pySnippet:i.attributes.snippet);if(t)return t;if(r.objectFlags&e.ObjectFlags.Anonymous){const t=h.getSignaturesOfType(r,e.SignatureKind.Call);return t&&t.length?$(t[0],!1):K()}}if(r.flags&e.TypeFlags.NumberLike)return"0";if(i&&i.attributes.fixedInstances){const e=function(e){return pxt.Util.values(f.byQName).filter((t=>4===t.kind&&t.attributes.fixedInstance&&function(e,t,n){if(t==n)return!0;let r=e.byQName[t];return!(!r||!r.extendsTypes)&&r.extendsTypes.indexOf(n)>=0}(f,t.retType,e.qName)))}(i);if(e.length){const t=e[0];return l?t.pyQName:t.qName}}}function B(e){if(h){const n=t.getFullName(h,e),r=f.byQName[n];if(r)return j(r)}}function j(e){return l?e.pyName:e.name}function $(n,r){let i="",o=h.getReturnTypeOfSignature(n);if(o.flags&e.TypeFlags.NumberLike?i="return 0":o.flags&e.TypeFlags.StringLike?i='return ""':o.flags&(e.TypeFlags.Boolean|e.TypeFlags.BooleanLiteral)&&(i=l?"return False":"return false"),l){let o;o=E.optionalVariableArgs?"()":`(${n.parameters.map((e=>e.name)).join(", ")})`;let s=C||"fn";S++>0&&(s+=S),r&&!/^on/i.test(s)&&(s="on"+pxt.Util.capitalize(s));const c=I.filter((t=>{const n=h&&h.getTypeAtLocation(t);return!!(n&&n.symbol&&n.symbol.flags&e.SymbolFlags.Enum)})).map((e=>{const t=a(M(e)).toLowerCase(),n=t.lastIndexOf(".");return-1!==n?t.substr(n+1):t})).join("_");return c&&(s+="_"+c),s=t.U.snakify(s),s=R(s),T=[...T,T.length?"\n":"","def ",{default:s,isDefinition:!0},o,`:\n${y}`,{default:i||"pass"},"\n"],{default:s}}{let t="()";if(!E.optionalVariableArgs){let r=e.mapToDisplayParts((t=>{h.getSymbolDisplayBuilder().buildSignatureDisplay(n,t,void 0,e.TypeFormatFlags.UseFullyQualifiedType)})),i=e.displayPartsToString(r);t=i.substr(0,i.lastIndexOf(":"))}return["function",t,` {\n${y}`,{default:i},"\n}"]}}function K(e){return l?(e=e||"fn",e=R(e=t.U.snakify(e)),T=[...T,T.length?"\n":"","def ",{default:e,isDefinition:!0},`():\n${y}`,{default:"pass"},"\n"],{default:e}):"function () {}"}},n.isTaggedTemplate=s}(t.service||(t.service={}))}(e.pxtc||(e.pxtc={}))}(ts||(ts={})),function(e){!function(e){!function(e){const t=e=>`main.${e}`;e.pyToTs=function(e,n=t("py")){return pxt.py.py2ts(e)},e.tsToPy=function(e,n=t("ts")){return pxt.py.decompileToPython(e,n)}}(e.transpile||(e.transpile={}))}(e.pxtc||(e.pxtc={}))}(ts||(ts={})),function(e){!function(t){let n;function r(e,t){if(!e)return;const i=t(e);if(i===n.Continue)return r(e.parent,t);if(i===n.Abort)return;if(i===n.Found)return e;return i}function i(t){return r(t,(t=>e.isModuleDeclaration(t)?n.Found:n.Continue))}t.getParentCallExpression=function(t){return r(t,(t=>e.isCallExpression(t)?n.Found:e.isBlock(t)?n.Abort:n.Continue))},t.findCurrentCallArgIdx=function(e,t,n){let r=e.arguments.map((e=>e===t)).indexOf(!0);if(r>=0)return r;if(!(e.arguments.pos<=n&&n<e.end))return-1;if(0===e.arguments.length)return 0;r=0;for(let t of e.arguments){if(!(t.end<=n))break;r++}return e.arguments.hasTrailingComma||(r=Math.max(0,r-1)),r},function(e){e[e.Found=0]="Found",e[e.Continue=1]="Continue",e[e.Abort=2]="Abort"}(n=t.TraverseCheck||(t.TraverseCheck={})),t.traverseUp=r,t.enumMemberToQName=function(e,n){if(n.name.kind===t.SK.Identifier)return e.getFullyQualifiedName(e.getSymbolAtLocation(n.name))},t.findInnerMostNodeAtPosition=function n(r,i){for(let t of r.getChildren()){if(t.kind>=e.SyntaxKind.FirstPunctuation&&t.kind<=e.SyntaxKind.LastPunctuation)continue;let r=t.getStart(),a=t.getEnd();if(r<=i&&i<a)return n(t,i)}return r&&r.kind===t.SK.SourceFile?null:r},t.getParentNamespace=i,t.getCurrentNamespaces=function e(t){if(!t)return[];let n=i(t);if(!n)return[];let r=n.name.getText();return[...e(n.parent),r]},t.getEnumMembers=function(e,n){if(e&&n.symbol&&n.symbol.declarations&&n.symbol.declarations.length)for(let e=0;e<n.symbol.declarations.length;e++){const r=n.symbol.declarations[e];if(r.kind===t.SK.EnumDeclaration){return r.members}}},t.isExported=function(e){if(e.modifiers&&e.modifiers.some((e=>e.kind==t.SK.PrivateKeyword||e.kind==t.SK.ProtectedKeyword)))return!1;let n=e.symbol;if(!n)return!1;for(;;){let e=n.parent;if(!e)break;n=e}let r=n.valueDeclaration||n.declarations[0];return r.kind==t.SK.VariableDeclaration&&(r=r.parent.parent),!(!r.parent||r.parent.kind!=t.SK.SourceFile)},t.isReadonly=function(e){return e.modifiers&&e.modifiers.some((e=>e.kind==t.SK.ReadonlyKeyword))}}(e.pxtc||(e.pxtc={}))}(ts||(ts={})),function(e){!function(e){!function(t){const n=e.assembler.emitErr,r=n("opcode name doesn't match","<name>");class i extends e.assembler.Instruction{constructor(e,t,n){super(e,t,n,n,!1)}emit(t){let i=t.words;if(i[0]!=this.name)return r;let a=this.opcode,o=1,s=[],c=null,l=null;for(let r=0;r<this.args.length;++r){let u=this.args[r],d=i[o++];if("$"==u[0]){let r=this.ei.encoders[u],i=null;if(r.isImmediate||r.isLabel){if(!d)return n("expecting number",d);if(d=d.replace(/^#/,""),i=t.bin.parseOneInt(d),null==i)return n("expecting number",d)}else e.oops();if(null==i)return n("didn't understand it",d);e.U.assert(i>=0),11111!=i&&"$lbl"==u&&(i-=t.bin.location()+2,i>>=1),s.push(i);const o=i;if(i=r.encode(i),null==i)return n(`argument (${o}) out of range or mis-aligned`,d);"$i3"==u?i=l|i<<6:"$i5"==u&&(i=l|i<<8),"$i2"==u||"$i4"==u?l=i:"$rt"==u?(11111!=i&&i>4096&&e.U.oops("label: "+d+" v="+i),a=32768|i,"callrt.p"==this.name&&(a|=8192)):t.isLong||i<0||i>255?(t.isLong=!0,"$lbl"==u&&(i-=1),a=i>>9&65535|49152,c=this.opcode+(i<<7)&65535):a=this.opcode+(i<<7)&65535}else if(u!=d)return n("expecting "+u,d)}return i[o]?n("trailing tokens",i[o]):{stack:0,opcode:a,opcode2:c,numArgs:s,labelName:t.bin.normalizeExternalLabel(null)}}}t.VmInstruction=i,t.withPush={},t.opcodes=["stloc     $i1","ldloc     $i1","stfld     $i4, $i5","ldfld     $i4, $i5","newobj    $i1","ldcap     $i1","bitconv   $i1","stglb     $i1","ldglb     $i1","ldint     $i1","ldintneg  $i1","ldspecial $i1","ldnumber  $i1","ldlit     $i1","checkinst $i1","mapget","mapset","ret       $i2, $i3","popmany   $i1","pushmany  $i1","callind   $i1","callproc  $i1","calliface $i2, $i3","callget   $i1","callset   $i1","jmp       $lbl","jmpnz     $lbl","jmpz      $lbl","try       $lbl","push","pop"];class a extends e.assembler.AbstractProcessor{constructor(e){super(),this.addEnc("$i1","#0-8388607",(e=>this.inrange(8388607,e,e))),this.addEnc("$i2","#0-31",(e=>this.inrange(31,e,e))),this.addEnc("$i3","#0-262143",(e=>this.inrange(262143,e,e))),this.addEnc("$i4","#0-255",(e=>this.inrange(255,e,e))),this.addEnc("$i5","#0-32767",(e=>this.inrange(32767,e,e))),this.addEnc("$lbl","LABEL",(e=>this.inminmax(-4194304,4194303,e,e))).isLabel=!0,this.addEnc("$rt","SHIM",(e=>this.inrange(8388607,e,e))).isLabel=!0;let n=1,r=!0;for(let e of t.opcodes.concat(["callrt $rt"])){let a=new i(this,e,n);this.instructions[a.name]=[a],(r||"callrt"==a.name)&&(t.withPush[a.name]=!0,a=new i(this,e.replace(/\w+/,(e=>e+".p")),64|n),this.instructions[a.name]=[a]),"mapset.p"==a.name&&(r=!1),n++}}testAssembler(){}postProcessRelAddress(e,t){return t}postProcessAbsAddress(e,t){return t}getAddressFromLabel(e,t,n,r=!1){let i=e.lookupLabel(n);return null==i?null:t.is32bit?i:i-(e.pc()+2)}toFnPtr(e,t){return e}wordSize(){return 8}peephole(e,n,r){let i=e.getOp(),a="";if(n){a=n.getOp();let e=i+";"+a,t=this.file.peepCounts;t[e]=(t[e]||0)+1}"stloc"==i&&"ldloc"==a&&e.numArgs[0]==n.numArgs[0]?(/LAST/.test(n.text)&&e.update(""),n.update("")):t.withPush[i]&&"push"==a&&(e.update(e.text.replace(/\w+/,(e=>e+".p"))),n.update(""))}}t.VmProcessor=a}(e.vm||(e.vm={}))}(e.pxtc||(e.pxtc={}))}(ts||(ts={})),function(e){!function(e){let t;!function(e){e[e.NonLocal=0]="NonLocal",e[e.Global=1]="Global"}(t=e.VarModifier||(e.VarModifier={})),e.isIndex=function(e){return"Index"===e.kind},e.isSubscript=function(e){return"Subscript"===e.kind}}(e.py||(e.py={}))}(pxt||(pxt={})),function(e){!function(t){var n=e.blocks;let r,i,a,o,s,c,l,u,d,p,f=0,_=0,m=0,g="???";function h(e){return null==e}function y(e){return null!=e}function v(t){return e.tickEvent("python.todo.statement",{kind:t.kind}),n.mkStmt(n.mkText("TODO: "+t.kind))}function b(t){return e.tickEvent("python.todo.expression",{kind:t.kind}),n.mkText(" {TODO: "+t.kind+"} ")}const x=F({primType:"string"}),k=F({primType:"number"}),S=F({primType:"boolean"}),T=F({primType:"void"}),C=F({primType:"any"});let E;const D={str:x,string:x,number:k,bool:S,void:T,any:C};function A(e){switch(e){case ts.SyntaxKind.StringKeyword:return x;case ts.SyntaxKind.NumberKeyword:return k;case ts.SyntaxKind.BooleanKeyword:return S;case ts.SyntaxKind.VoidKeyword:return T;case ts.SyntaxKind.AnyKeyword:return C;default:return E}}function w(t){let n=e.U.flatClone(t);return delete n.pyAST,delete n.pyInstanceType,delete n.pyRetType,delete n.pySymbolType,delete n.moduleTypeMarker,delete n.declared,n.parameters&&(n.parameters=n.parameters.map((t=>(delete(t=e.U.flatClone(t)).pyType,t)))),n}function N(t){if("("==t[0]&&e.U.endsWith(t,")"))return N(t.slice(1,-1));const n=t.indexOf(" => ");if(n>0){const e=t.slice(n+4);if(-1==e.indexOf(")[]")){const r=N(e),i=t.slice(1,n-1);return R(r,(i?i.split(/, /):[]).map((e=>N(e.replace(/\w+\??: /,"")))))}}if(e.U.endsWith(t,"[]"))return L(N(t.slice(0,-2)));if("_py.Array"===t)return L(C);const r=e.U.lookup(D,t);if(r)return r;if(!!t&&!isNaN(t))return k;if("T"==t||"U"==t)return F({primType:"'"+t});if(t.indexOf("|")>=0){return F({primType:"@union",typeArgs:t.split("|").map((e=>e.trim())).map(N)})}let i=P(t+"@type")||P(t);return i?7==i.kind?k:8==i.kind||9==i.kind?i.pyInstanceType||F({classType:i}):6==i.kind?k:(W(null,9502,e.U.lf("'{0}' is not a type near '{1}'",t,g||"???")),F({primType:t})):(W(null,9501,e.U.lf("unknown type '{0}' near '{1}'",t,g||"???")),F({primType:t}))}function I(t){var n;if(!t.pySymbolType){if(g=t.pyQName,t.parameters){pxtc.service.isTaggedTemplate(t)&&(t.parameters=[{name:"literal",description:"",type:"string",options:{}}]);for(let e of t.parameters)e.pyType||(e.pyType=N(e.type))}const r=t.pyRetType;if(he(t))t.pyRetType=F({moduleType:t});else if(t.retType)if((null===(n=t.qName)||void 0===n?void 0:n.endsWith(".__constructor"))&&"void"===t.retType){const e=O(t.qName.substring(0,t.qName.lastIndexOf(".")));t.pyRetType=e?F({classType:e}):N(t.retType)}else t.pyRetType=N(t.retType);else t.pyRetType||(e.U.oops("no type for: "+t.pyQName),t.pyRetType=F({}));if(r&&ee(t.pyAST,r,t.pyRetType),3==t.kind||1==t.kind){let n=t.parameters.map((e=>e.pyType));if(n.some(h))return W(null,9526,e.U.lf("function symbol is missing parameter types near '{1}'",g||"???")),F({});t.pySymbolType=R(t.pyRetType,n.filter(y))}else t.pySymbolType=t.pyRetType;8!=t.kind&&9!=t.kind||(t.pyInstanceType=F({classType:t})),g=void 0}return t.pySymbolType}function P(t){return e.U.lookup(i,t)||e.U.lookup(r,t)}function O(e){var t;if(!e)return;let n=P(e);if(n)I(n);else if(e.indexOf(".")&&!e.endsWith(".__constructor")){const n=e.substring(0,e.lastIndexOf(".")),r=O(n);if(8===(null==r?void 0:r.kind)&&(null===(t=r.extendsTypes)||void 0===t?void 0:t.length))return O(r.extendsTypes[0]+e.substring(n.length))}return n}function F(t={}){let n=e.U.flatClone(t);return n.tid=++_,n}function L(e){return F({primType:"@array",typeArgs:[e]})}function R(e,t){return F({primType:"@fn"+t.length,typeArgs:[e].concat(t)})}function M(t){return!!e.U.startsWith(t.primType||"","@fn")}function U(t){return!!t.primType&&!e.U.startsWith(t.primType,"@")}function B(t){return!!e.U.startsWith(t.primType||"","@union")}function j(){return a.currFun||a.currClass||a.currModule}function $(){let e=j();for(;e&&e.parent;)e=e.parent;return e}function K(){return"main"==a.currModule.name&&!a.currFun&&!a.currClass}function z(t,n,r){const i=O(n);return i||W(t,9503,e.U.lf("No module named '{0}'",n)),i}function J(e,n,r,i){i||(i=j());let a=i.vars[e],o=null==a?void 0:a.symbol;if(!o){let n=V(i);n&&(n+=".");let s=n+e;o="ClassDef"===i.kind?oe(2,s):!se(i)||r!==t.VarModifier.Global&&r!==t.VarModifier.NonLocal?se(i)?ae(4,e):oe(4,s):oe(4,e),a={symbol:o,modifier:r},i.vars[e]=a}for(let e of Object.keys(n))o[e]=n[e];return a}function q(e){return e.unifyWith?(e.unifyWith=q(e.unifyWith),e.unifyWith):e}function V(e){let t=e,n="";t.parent&&"FunctionDef"!==t.parent.kind&&"AsyncFunctionDef"!==t.parent.kind&&(n=V(t.parent),n?n+=".":n="");let r=e;return"Module"==e.kind&&"main"==r.name?"":r.name?n+r.name:n+"?"+e.kind}function H(t){let n=e.U.lookup(De,t);if(n)return n;for(let n of e.U.values(a.currModule.vars)){let r=n.symbol;if(r.isImport){if(r.expandsTo==t)return r.pyName||W(null,9553,lf("missing pyName")),r.pyName;if(r.isImport&&e.U.startsWith(t,(r.expandsTo||"")+"."))return r.pyName+t.slice(r.expandsTo.length)}}return t}function G(e){return(e=q(e)).primType?e.typeArgs&&"@array"==e.primType?G(e.typeArgs[0])+"[]":M(e)&&e.typeArgs?"("+e.typeArgs.slice(1).map((e=>"_: "+G(e))).join(", ")+") => "+G(e.typeArgs[0]):B(e)&&e.typeArgs?e.typeArgs.map(G).join(" | "):e.primType+"":e.classType&&e.classType.pyQName?H(e.classType.pyQName)+"":e.moduleType&&e.moduleType.pyQName?H(e.moduleType.pyQName)+"":"any"}function W(e,t,n){c.push(function(e,t,n,r){return e||(e=o),e&&a&&a.currModule?{fileName:s,start:e.startPos,length:e.endPos-e.startPos,line:void 0,column:void 0,code:n,category:t,messageText:r}:{fileName:s,start:0,length:0,line:void 0,column:void 0,code:n,category:t,messageText:r}}(e,pxtc.DiagnosticCategory.Error,t,n))}function Q(e){return e.primType?e.primType:e.classType?e.classType:e.moduleType?(e.moduleType.moduleTypeMarker||(e.moduleType.moduleTypeMarker={}),e.moduleType.moduleTypeMarker):null}function Y(e){return!Q(q(e))}function X(t,n,r){var i;(n=q(n)).classType!=r&&(Y(n)?n.classType=r:ee(t,n,(I(i=r),i.pyInstanceType||W(null,9527,e.U.lf("Instance type symbol '{0}' is missing pyInstanceType",i)),i.pyInstanceType)))}function Z(e,t){ee(e,ge(e),t)}function ee(t,n,r){if(n===r)return;if((n=q(n))===(r=q(r))||ie(n)||ie(r))return;if("any"===n.primType)return void(n.unifyWith=r);const i=Q(n),a=Q(r);if(i&&a)if(i===a){if(n.unifyWith=r,n.typeArgs&&r.typeArgs)for(let e=0;e<Math.min(n.typeArgs.length,r.typeArgs.length);++e)ee(t,n.typeArgs[e],r.typeArgs[e]);n.unifyWith=r}else!function(t,n,r){W(t,9500,e.U.lf("types not compatible: {0} and {1}",G(n),G(r)))}(t,n,r);else i&&!a?ee(t,r,n):(m++,n.unifyWith=r)}function te(e,t){const n=q(e),r=q(t);if(n===r)return!0;const i=Q(n),a=Q(r);if(i===a)return!0;if(i&&a){if(re(i)&&re(a)&&i.extendsTypes&&i.extendsTypes.length&&i.extendsTypes.some((e=>e===a.qName)))return!0;if(B(r)){for(let e of r.typeArgs||[])if(te(n,e))return!0;return!1}}return!1}function ne(e,t){const n=q(ge(e)),r=q(t);te(n,r)||(M(n)||M(r)||U(n)||U(r))&&ee(e,n,r)}function re(e){return!!(null==e?void 0:e.name)}function ie(e){var t;return!!(null===(t=null==e?void 0:e.primType)||void 0===t?void 0:t.startsWith("'"))}function ae(e,t){let n=/(.*)\.(.*)/.exec(t),r=n?n[2]:t;return{kind:e,name:r,pyName:r,qName:t,pyQName:t,namespace:n?n[1]:"",attributes:{},pyRetType:F()}}function oe(t,n){let r=i[n];return r?(r.kind=t,r):(r=ae(t,n),r.pyQName||W(null,9527,e.U.lf("Symbol '{0}' is missing pyQName",n)),i[r.pyQName]=r,r)}function se(e){let t=e;for(;t;){if("FunctionDef"==t.kind)return!0;t=t.parent}return!1}function ce(t,n,r){if(!n.symInfo){let i=V(n);e.U.endsWith(i,".__init__")&&(i=i.slice(0,-9)+".__constructor"),se(r=r||j())?n.symInfo=ae(t,i):n.symInfo=oe(t,i);const a=n.symInfo;a.pyAST=n,a.pyName||W(null,9528,e.U.lf("Symbol '{0}' is missing pyName",a.qName||a.name)),r.vars[a.pyName]={symbol:a}}return n.symInfo}function le(t){let n=t.symInfo.qName;return e.U.values(i).filter((e=>e.namespace==n&&2==e.kind))}function ue(t,n,r,i=!1,a=!1){let o;o="__init__"===n?t.pyQName+".__constructor":n.startsWith(t.pyQName+".")?n:t.pyQName+"."+n;let s=O(o);if(s)return s;if(!a)for(let i of t.extendsTypes||[]){let a=O(i);if(a){a==t&&e.U.userError("field lookup loop on: "+a.qName+" / "+n);let i=ue(a,n,r,!0);if(i)return i}}if(!i&&t.pyAST&&"ClassDef"==t.pyAST.kind){let e=oe(2,o);return e.isInstance=!r,e}return null}function de(t,n,r=!1){const i=ge(t),o=function(e){let t=q(e);return[t.classType,...pe(t.primType),t.moduleType].filter(y)}(i);for(let c of o){let o=!!i.moduleType,l=ue(c,n,o,r);if(l)return o?l.isInstance&&W(null,9505,e.U.lf("the field '{0}' of '{1}' is not static",n,c.pyQName)):qe(t)?l.isProtected=!0:"Name"==(s=t).kind&&"self"==s.id&&(a.currClass||W(null,9529,e.U.lf("no class context found for {0}",l.pyQName)),l.namespace!=a.currClass.symInfo.qName&&(l.isProtected=!0)),l}var s;return null}function pe(e){let t=[];return"@array"==e?t=[P("_py.Array"),P("Array")]:"string"==e&&(t=[P("_py.String"),P("String")]),t.filter((e=>!!e))}function fe(t){let n=j(),r=e.U.lookup(n.vars,t);if(r)return r;for(;n;){let r=e.U.lookup(n.vars,t);if(r)return r;do{n=n.parent}while(n&&"ClassDef"==n.kind)}return null}function _e(e){if(!e)return null;const t=e.indexOf(".");if(t>0){const n=fe(e.slice(0,t)),r=null==n?void 0:n.symbol;r&&r.pyQName!=r.pyName&&(e=r.pyQName+e.slice(t))}else{const t=fe(e);if(t)return t}let n=O(e);return n?{symbol:n}:void 0}function me(e){var t;return null===(t=_e(e))||void 0===t?void 0:t.symbol}function ge(e){return e.tsType?q(e.tsType):(e.tsType=F(),e.tsType)}function he(e){if(!e)return!1;switch(e.kind){case 5:case 9:case 8:case 6:return!0;default:return!1}}function ye(t){const n=e.U.flatClone(a);let r;try{r=t()}finally{a=n}return r}function ve(e,t){return 0==t.length?n.mkText(""):n.mkGroup([n.mkText("/* TODO: "+e+" "),n.mkGroup(t),n.mkText(" */"),n.mkNewLine()])}function be(e){let t=tt(e.value);return e.arg?n.mkInfix(n.mkText(e.arg),"=",t):n.mkGroup([n.mkText("**"),t])}function xe(n){if(!n)return F();let r=Ue(n);if(r){let t=P(r+"@type")||P(r);if(t){if(I(t),6==t.kind)return k;if(t.pyInstanceType)return t.pyInstanceType}else if(D[r])return D[r];W(n,9506,e.U.lf("cannot find type '{0}'",r))}else if(t.isSubscript(n)){if("List"===Ue(n.value)&&t.isIndex(n.slice)){return L(xe(n.slice.value))}}return W(n,9507,e.U.lf("invalid type syntax")),F({})}function ke(e){return e.pyName&&"_"==e.pyName[0]?e.isProtected?n.mkText("protected "):n.mkText("private "):n.mkText("")}const Se={Sub:1,Div:1,Pow:1,LShift:1,RShift:1,BitOr:1,BitXor:1,BitAnd:1,FloorDiv:1,Mult:1},Te={Eq:1,NotEq:1,Lt:1,LtE:1,Gt:1,GtE:1},Ce={Add:"+",Sub:"-",Mult:"*",MatMult:"Math.matrixMult",Div:"/",Mod:"%",Pow:"**",LShift:"<<",RShift:">>",BitOr:"|",BitXor:"^",BitAnd:"&",FloorDiv:"Math.idiv",And:"&&",Or:"||",Eq:"==",NotEq:"!=",Lt:"<",LtE:"<=",Gt:">",GtE:">=",Is:"===",IsNot:"!==",In:"py.In",NotIn:"py.NotIn"},Ee={Invert:"~",Not:"!",UAdd:"P+",USub:"P-"},De={"adafruit_bus_device.i2c_device.I2CDevice":"pins.I2CDevice"};function Ae(e){a.blockDepth++;const t=n.mkBlock(e.map(nt));return a.blockDepth--,t}function we(e){e.vars||(e.vars={},e.parent=j(),e.blockDepth=a.blockDepth)}function Ne(e,t=!1){return"any"===G(e)?t?n.mkText(": any"):n.mkText(""):n.mkText(": "+G(e))}function Ie(e,t){try{return ye(t)}catch(t){return console.log(t),n.mkStmt(ve(`conversion failed for ${e.name||e.kind}`,[]))}}function Pe(e){if(!e||!e.pyAST)return!1;if("FunctionDef"!=e.pyAST.kind)return!1;const t=e.pyAST;return!(!t.callers||1!=t.callers.length)&&!t.callers[0].inCalledPosition}function Oe(t,r=!1){return Ie(t,(()=>{var i,o,s,c;const l=!!a.currClass&&!a.currFun,u=K(),d=!!a.currFun;we(t);const p=me(V(t)),_=ce(l?1:3,t);if(!r&&(p&&p.declared===f&&W(t,9520,lf("Duplicate function declaration")),_.declared=f,Pe(_)))return n.mkText("");l&&(_.isInstance=!0),a.currFun=t;let m="",g=t.name;let h=[ve("decorators",t.decorator_list.filter((e=>"property"==Ue(e)?(m="get",!1):"Attribute"!=e.kind||"setter"!=e.attr||"Name"!=e.value.kind||(g=e.value.id,m="set",!1))).map(tt))];if(t.body.length>=1&&"Raise"==t.body[0].kind&&(t.alwaysThrows=!0),l)if(a.currClass||W(t,9531,lf("method '{0}' is missing current class context",_.pyQName)),_.pyRetType||W(t,9532,lf("method '{0}' is missing a return type",_.pyQName)),"__init__"==t.name)h.push(n.mkText("constructor")),X(t,_.pyRetType,a.currClass.symInfo);else{if("__get__"==g||"__set__"==g){let e=t.vars.value,n=null==e?void 0:e.symbol;if("__set__"==g&&n){let e=ue(a.currClass.symInfo,"__get__",!1);e&&e.pyAST&&"FunctionDef"==e.pyAST.kind&&ee(t,n.pyRetType,e.pyRetType)}g=g.replace(/_/g,"")}m||(m="_"==g[0]?_.isProtected?"protected":"private":"public",t.symInfo.isStatic&&(m+=" static")),h.push(n.mkText(m+" "),je(g))}else e.U.assert(!m),"_"==t.name[0]||u||r||d?h.push(n.mkText("function "),je(g)):h.push(n.mkText("export function "),je(g));let y="__init__"==t.name?void 0:t.returns?xe(t.returns):_.pyRetType;h.push(function(t,r){var i;const a=t.args;a.kwonlyargs.length&&W(t,9517,e.U.lf("keyword-only arguments not supported yet"));let o=a.args.slice();if(r?"self"!==(null===(i=o[0])||void 0===i?void 0:i.arg)?t.symInfo.isStatic=!0:o.shift():o.some((e=>"self"==e.arg))&&W(t,9519,e.U.lf("non-methods cannot have an argument called 'self'")),!t.symInfo.parameters){let r=a.defaults.length-o.length;t.symInfo.parameters=o.map((i=>{i.annotation||W(t,9519,e.U.lf("Arg '{0}' missing annotation",i.arg));let o=xe(i.annotation),s="";return r>=0&&(s=n.flattenNode([tt(a.defaults[r])]).output,ee(i,o,ge(a.defaults[r]))),r++,{name:i.arg,description:"",type:"",initializer:s,default:s,pyType:o}}))}let s=t.symInfo.parameters.map((r=>{let i=J(r.name,{isParam:!0}),a=null==i?void 0:i.symbol;r.pyType||W(t,9530,e.U.lf("parameter '{0}' missing pyType",r.name)),ee(t,I(a),r.pyType);let o=[je(r.name),Ne(r.pyType,!0)];return r.default&&o.push(n.mkText(" = "+r.default)),n.mkGroup(o)}));return a.vararg&&s.push(n.mkText("TODO *"+a.vararg.arg)),a.kwarg&&s.push(n.mkText("TODO **"+a.kwarg.arg)),n.H.mkParenthesizedExpression(n.mkCommaSep(s))}(t,l),y&&q(y)!=T?Ne(y):n.mkText("")),I(_);let v=t.body.map(nt);if("__init__"==t.name){if(a.currClass||W(t,9533,lf("__init__ method '{0}' is missing current class context",_.pyQName)),null===(i=a.currClass)||void 0===i?void 0:i.baseClass){const e=t.body[0],n=a.currClass.baseClass.pyQName+".__constructor";(null===(c=null===(s=null===(o=e.value)||void 0===o?void 0:o.func)||void 0===s?void 0:s.symbolInfo)||void 0===c?void 0:c.pyQName)!==n&&W(t,9575,lf("Sub classes must call 'super().__init__' as the first statement inside an __init__ method"))}for(let e of le(a.currClass)){let t=e.pyAST;t&&t.value&&v.push(n.mkStmt(n.mkText(`this.${Me(e.pyName)} = `),tt(t.value)))}}const b=ot(t);h.push(n.mkBlock(b.concat(v)));let x=n.mkGroup(h);return r?h[h.length-1].noFinalNewline=!0:x=n.mkStmt(x),x}))}const Fe={FunctionDef:e=>Oe(e),ClassDef:t=>Ie(t,(()=>{we(t);const r=ce(8,t);e.U.assert(!a.currClass);let i=K();a.currClass=t,t.isNamespace=t.decorator_list.some((e=>"Name"==e.kind&&"namespace"==e.id));let o=t.isNamespace?[n.mkText("namespace "),je(t.name)]:[ve("keywords",t.keywords.map(be)),ve("decorators",t.decorator_list.map(tt)),n.mkText(i?"class ":"export class "),je(t.name)];if(!t.isNamespace&&t.bases.length>0)if("Enum"==Ue(t.bases[0]))t.isEnum=!0;else{o.push(n.mkText(" extends ")),o.push(n.mkCommaSep(t.bases.map(tt)));let e=function(e){let t=me(Be(e));return t&&t.pyAST&&"ClassDef"==t.pyAST.kind?t.pyAST:null}(t.bases[0]);if(e)t.baseClass=e.symInfo,r.extendsTypes=[e.symInfo.pyQName];else{const e=Ue(t.bases[0]);if(e){const n=me(e),i=O(e);t.baseClass=n||i,t.baseClass&&(r.extendsTypes=[t.baseClass.pyQName])}}}const s=t.body.filter((e=>t.isNamespace||"FunctionDef"===e.kind)),c=t.isNamespace?[]:t.body.filter((e=>-1===s.indexOf(e)&&"Pass"!==e.kind));let l=Ae(s);o.push(l);let u=!1;if(c.length){u=!0;const e=Ae(c),r=n.mkStmt(n.mkGroup([n.mkText(`public static __init${t.name}() `),e]));l.children.unshift(r)}if(!t.isNamespace){const e=le(t).map((e=>(e.pyName&&e.pyRetType||W(t,9535,lf("field definition missing py name or return type",e.qName)),e))),r=e.filter((e=>!e.isInstance)),i=e.filter((e=>e.isInstance)).map((e=>n.mkStmt(ke(e),je(e.pyName),Ne(e.pyRetType)))),a=r.map((e=>n.mkGroup([n.mkStmt(ke(e),n.mkText("static "),je(e.pyName),Ne(e.pyRetType)),ft(Me(t.name),Me(e.pyName),G(e.pyRetType))])));l.children=a.concat(i).concat(l.children)}return u&&(o=[n.mkStmt(n.mkGroup(o)),n.mkStmt(n.mkText(`${t.name}.__init${t.name}()`))]),n.mkStmt(n.mkGroup(o))})),Return:e=>{if(e.value){let t=a.currFun;return t&&(t.symInfo.pyRetType||W(e,9536,lf("function '{0}' missing return type",t.symInfo.pyQName)),Z(e.value,t.symInfo.pyRetType)),n.mkStmt(n.mkText("return "),tt(e.value))}return n.mkStmt(n.mkText("return"))},AugAssign:e=>{let t=Ce[e.op];return t.length>3?n.mkStmt(n.mkInfix(tt(e.target),"=",n.H.mkCall(t,[tt(e.target),tt(e.value)]))):n.mkStmt(tt(e.target),n.mkText(" "+t+"= "),tt(e.value))},Assign:e=>Le(e),AnnAssign:e=>Le(e),For:t=>{if(e.U.assert(0==t.orelse.length),t.target.forTargetEndPos=t.endPos,$e(t.iter,"range")){let e=t.iter,r=tt(t.target),i=je(Be(t.target));Z(t.target,k);let a=1==e.args.length?n.mkText("0"):tt(e.args[0]),o=tt(e.args[1==e.args.length?0:1]);if(e.args.length<=2)return n.mkStmt(n.mkText("for ("),n.mkInfix(r,"=",a),n.mkText("; "),n.mkInfix(i,"<",o),n.mkText("; "),n.mkPostfix([i],"++"),n.mkText(")"),Ae(t.body));let s="Num"===e.args[2].kind?e.args[2].n:void 0;if(null==s&&"UnaryOp"===e.args[2].kind){const t=e.args[2];"Num"===t.operand.kind&&("UAdd"===t.op?s=t.operand.n:"USub"===t.op&&(s=-t.operand.n))}if(void 0!==s){const c=s>0?"<":">";return n.mkStmt(n.mkText("for ("),n.mkInfix(r,"=",a),n.mkText("; "),n.mkInfix(i,c,o),n.mkText("; "),n.mkInfix(i,"+=",tt(e.args[2])),n.mkText(")"),Ae(t.body))}}if(f>1){const e=ge(t.target);Z(t.iter,ge(t.iter)==x?e:L(e))}return n.mkStmt(n.mkText("for ("),tt(t.target),n.mkText(" of "),tt(t.iter),n.mkText(")"),Ae(t.body))},While:t=>(e.U.assert(0==t.orelse.length),n.mkStmt(n.mkText("while ("),tt(t.test),n.mkText(")"),Ae(t.body))),If:t=>{let r=t=>{let i=[n.mkText("if ("),tt(t.test),n.mkText(")"),Ae(t.body)];return t.orelse.length&&(i[i.length-1].noFinalNewline=!0,1==t.orelse.length&&"If"==t.orelse[0].kind?(i.push(n.mkText(" else ")),e.U.pushRange(i,r(t.orelse[0]))):i.push(n.mkText(" else"),Ae(t.orelse))),i};return n.mkStmt(n.mkGroup(r(t)))},With:t=>{if(1==t.items.length&&function(e,t){let n=ge(e);return!(!n.classType||n.classType.pyQName!=t)||G(n)==t}(t.items[0].context_expr,"pins.I2CDevice")){let r=t.items[0],i=[],a=tt(r.context_expr);if(r.optional_vars){let e=Ue(r.optional_vars);if(e){let o=J(e,{isLocal:!0}),s=null==o?void 0:o.symbol;e=Me(e),i.push(n.mkStmt(n.mkText("const "+e+" = "),a)),s.pyRetType||W(t,9537,lf("function '{0}' missing return type",s.pyQName)),Z(r.context_expr,s.pyRetType),a=n.mkText(e)}}return i.push(n.mkStmt(n.mkInfix(a,".",n.mkText("begin()")))),e.U.pushRange(i,t.body.map(nt)),i.push(n.mkStmt(n.mkInfix(a,".",n.mkText("end()")))),n.mkGroup(i)}let r=[],i=t.items.map(((e,t)=>{let i="with"+t;if(e.optional_vars){let t=Be(e.optional_vars);J(t,{isLocal:!0}),i=Me(t)}return r.push(n.mkStmt(n.mkText(i+".end()"))),n.mkStmt(n.mkText("const "+i+" = "),n.mkInfix(tt(e.context_expr),".",n.mkText("begin()")))}));return e.U.pushRange(i,t.body.map(nt)),e.U.pushRange(i,r),n.mkBlock(i)},Raise:e=>{let t,r=e.exc||e.cause;if(!r)return n.mkStmt(n.mkText("throw"));if(r&&"Call"==r.kind){let e=r;1==e.args.length&&(t=tt(e.args[0]))}return t||(t=n.mkGroup([n.mkText("`"),tt(r),n.mkText("`")])),n.mkStmt(n.H.mkCall("control.fail",[t]))},Assert:e=>(e.msg||W(e,9537,lf("assert missing message")),n.mkStmt(n.H.mkCall("control.assert",[e.test,e.msg].filter((e=>!!e)).map(tt)))),Import:e=>{for(let t of e.names)t.asname&&J(t.asname,{expandsTo:t.name}),z(e,t.name);return n.mkText("")},ImportFrom:e=>{let t=[];for(let r of e.names)if("*"==r.name)e.module||W(e,9538,lf("import missing module name")),J(e.module,{isImportStar:!0});else{let i=e.module+"."+r.name,a=O(i),o=r.asname||r.name;he(a)?(J(o,{isImport:a,expandsTo:i}),t.push(n.mkStmt(n.mkText(`import ${Me(o)} = ${i}`)))):J(o,{expandsTo:i})}return n.mkGroup(t)},ExprStmt:e=>{return"Str"==e.value.kind?((t=e.value.s).trim().split(/\n/).length<=1?t=t.trim():t+="\n",n.mkStmt(n.mkText("/** "+t+" */"))):n.mkStmt(tt(e.value));var t},Pass:e=>n.mkStmt(n.mkText("")),Break:e=>n.mkStmt(n.mkText("break")),Continue:e=>n.mkStmt(n.mkText("continue")),Delete:t=>(W(t,9550,e.U.lf("delete statements are unsupported")),v(t)),Try:e=>{let t=[n.mkText("try"),Ae(e.body.concat(e.orelse))];for(let r of e.handlers)t.push(n.mkText("catch ("),r.name?je(r.name):n.mkText("_")),r.type&&t.push(n.mkText("/* instanceof "),tt(r.type),n.mkText(" */")),t.push(n.mkText(")"),Ae(r.body));return e.finalbody.length&&t.push(n.mkText("finally"),Ae(e.finalbody)),n.mkStmt(n.mkGroup(t))},AsyncFunctionDef:t=>(W(t,9551,e.U.lf("async function definitions are unsupported")),v(t)),AsyncFor:t=>(W(t,9552,e.U.lf("async for statements are unsupported")),v(t)),AsyncWith:t=>(W(t,9553,e.U.lf("async with statements are unsupported")),v(t)),Global:r=>{const i=$();j();for(const n of r.names){e.U.lookup(i.vars,n)||W(r,9521,e.U.lf("No binding found for global variable"));J(n,{},t.VarModifier.Global).firstRefPos<r.startPos&&W(r,9522,e.U.lf("Variable referenced before global declaration"))}return n.mkStmt(n.mkText(""))},Nonlocal:r=>{const i=$(),a=j();for(const n of r.names){const o=at(n,a);o&&o!==i&&o.vars[n].modifier!==t.VarModifier.Global||W(r,9523,e.U.lf("No binding found for nonlocal variable"));J(n,{},t.VarModifier.NonLocal).firstRefPos<r.startPos&&W(r,9524,e.U.lf("Variable referenced before nonlocal declaration"))}return n.mkStmt(n.mkText(""))}};function Le(t){let r,i,o,s;if("Assign"===t.kind){if(1!=t.targets.length)return W(t,9553,e.U.lf("multi-target assignment statements are unsupported")),v(t);s=t.targets[0],o=t.value,r=null,i=null}else{if("AnnAssign"!==t.kind)return t;s=t.target,o=t.value||null,r=t.annotation,i=xe(r),Z(s,i)}let c,l="",u=!!o&&$e(o,"const"),d=Ue(s)||"";if(K()||a.currClass||a.currFun||"_"==d[0]||(l="export "),d&&a.currClass&&!a.currFun){u=!(!o||!a.currClass.isNamespace);let e=ue(a.currClass.symInfo,d,!0);if(e||W(t,9544,lf("cannot get class field")),0==f)return n.mkText("/* skip for now */");e.pyRetType||W(t,9539,lf("function '{0}' missing return type",e.pyQName)),Z(s,e.pyRetType),e.isInstance=!1,a.currClass.isNamespace&&(l=`export ${u?"const":"let"} `)}if(!o)return W(t,9555,e.U.lf("unable to determine value of assignment")),v(t);if(Z(s,ge(o)),u)return J(Be(s),{}),/^static /.test(l)||/const/.test(l)||(l+="const "),n.mkStmt(n.mkText(l),n.mkInfix(tt(s),"=",tt(o)));if(!l&&"Tuple"==s.kind)return function(t,r,i){if(r.elts.filter((e=>"Name"!==e.kind)).length)return W(t,9556,e.U.lf("non-trivial tuple assignment unsupported")),v(t);const a=r.elts.map(Ue).map((e=>e?j().vars[e]:void 0));if(a.some((e=>void 0!==(null==e?void 0:e.modifier)))){const e=function(){const e=j();return void 0===e.nextHelperVariableId&&(e.nextHelperVariableId=0),"___tempvar"+e.nextHelperVariableId++}(),t=[n.mkStmt(n.mkInfix(n.mkGroup([n.mkText("let "),n.mkText(e)]),"=",tt(i)))];for(let i=0;i<a.length;i++){const a=o(r.elts[i]);t.push(n.mkStmt(n.mkInfix(a,"=",n.mkGroup([n.mkText(e),n.mkText(`[${i}]`)]))))}return n.mkGroup(t)}{let e=[n.mkText("let "),n.mkText("[")],t=r.elts.map((e=>e)).map((e=>o(e,!0)));return e.push(n.mkCommaSep(t)),e.push(n.mkText("]")),n.mkStmt(n.mkInfix(n.mkGroup(e),"=",tt(i)))}function o(e,t=!1){Ge(e,"identifierCompletion"),ge(e);Ye(e);return Re(e,t)}}(t,s,o);if("Name"===s.kind){const e=j().vars[d],t=null==e?void 0:e.symbol;t&&4===t.kind&&void 0===e.modifier&&(void 0===e.firstAssignPos||e.firstAssignPos>s.startPos)&&(e.firstAssignPos=s.startPos,e.firstAssignDepth=a.blockDepth)}if(r&&i&&("NameConstant"===o.kind&&null===o.value||"List"===o.kind&&0===o.elts.length)){const e=G(i);c=n.mkInfix(tt(s),":",n.mkText(e))}return c||(c=tt(s)),n.mkStmt(n.mkText(l),n.mkInfix(c,"=",tt(o)))}function Re(e,t=!1){var r,i;let o=e.id,s=_e(o),c=null==s?void 0:s.symbol,l=j().vars[o],u=null==l?void 0:l.symbol;return void 0===e.isdef&&(!c||4===c.kind&&c!==u?(a.currClass&&!a.currFun?(e.isdef=!1,s=J(o,{})):(e.isdef=!0,s=J(o,{isLocal:!0})),c=s.symbol):e.isdef=!1,e.symbolInfo=c,e.tsType||W(e,9540,lf("definition missing ts type")),c.pyRetType||W(e,9568,lf("missing py return type")),ee(e,e.tsType,c.pyRetType)),e.isdef&&st(s,j())&&(e.isdef=!1),Xe(s,e),e.isdef&&!t?n.mkGroup([n.mkText("let "),je(o)]):!(null==c?void 0:c.namespace)||!(null==c?void 0:c.qName)||(null===(r=a.currClass)||void 0===r?void 0:r.isNamespace)&&(null===(i=a.currClass)||void 0===i?void 0:i.name)===(null==c?void 0:c.namespace)?je(o):je(c.qName)}function Me(e){return n.isReservedWord(e)?e+"_":e||e}function Ue(e){var t;if("Name"==e.kind){let t=e.id,n=fe(t),r=null==n?void 0:n.symbol;if(r){if(r.expandsTo)return r.expandsTo;if(a.currClass&&!a.currFun&&!(null==n?void 0:n.modifier)&&r.qName)return r.qName}return t}if("Attribute"==e.kind){let t=Ue(e.value);if(t)return t+"."+e.attr}if(qe(e)&&(null===(t=a.currClass)||void 0===t?void 0:t.baseClass))return a.currClass.baseClass.qName}function Be(e){let t=Ue(e);return t||W(null,9542,lf("Cannot get name of unknown expression kind '{0}'",e.kind)),t}function je(e){return"self"==e?n.mkText("this"):n.mkText(Me(e))}function $e(e,t){if("Call"!=e.kind)return!1;return Ue(e.func)===t}function Ke(t,r,i){let a=Ce[r];return e.U.assert(!!a),a.length>3?n.H.mkCall(a,[t,i]):n.mkInfix(t,a,i)}const ze={memoryview:{n:"",t:E},const:{n:"",t:k},"micropython.const":{n:"",t:k}};const Je=function(){let e={};return Object.keys(pxtc.ts2PyFunNameMap).forEach((t=>{let n=pxtc.ts2PyFunNameMap[t];if(n&&n.n){let r={n:t,t:A(n.t),scale:n.scale};e[n.n]=r}})),Object.keys(ze).forEach((t=>{e[t]=ze[t]})),e}();function qe(e){return $e(e,"super")&&0==e.args.length}function Ve(e){return e.type==n.NT.Prefix&&'"'==e.op[0]?n.mkText(n.backtickLit(JSON.parse(e.op))):e}function He(e){return u&&e.startPos<=u.position&&u.position<=e.endPos}function Ge(e,t){f>100&&u&&null==d&&(u.type==t||"symbol"==u.type)&&He(e)&&(d=e,p=j())}function We(e,t){if(t&&t.pyAST&&"FunctionDef"==t.pyAST.kind){let n=t.pyAST;n.callers||(n.callers=[]),n.callers.indexOf(e)<0&&n.callers.push(e)}}const Qe={BoolOp:e=>{let t=tt(e.values[0]);for(let n=1;n<e.values.length;++n)t=Ke(t,e.op,tt(e.values[n]));return t},BinOp:e=>{let t=function(e){if("Mod"==e.op&&"Str"==e.left.kind&&("Tuple"==e.right.kind||"List"==e.right.kind)){let t=e.left.s,r=e.right.elts;r=r.slice();let i=[n.mkText("`")];return t.replace(/([^%]+)|(%[\d\.]*([a-zA-Z%]))/g,((e,t,a,o)=>{if(t)i.push(n.mkText(t.replace(/[`\\$]/g,(e=>"\\"+e))));else{let e=r.shift(),t=e?tt(e):n.mkText("???");i.push(n.mkText("${"),t,n.mkText("}"))}return""})),i.push(n.mkText("`")),n.mkGroup(i)}return null}(e);if(t)return t;const r=tt(e.left),i=tt(e.right);return ut(e.left)&&ut(e.right)&&"Add"===e.op?n.H.extensionCall("concat",[r,i],!1):(t=Ke(r,e.op,i),Se[e.op]&&(Z(e.left,k),Z(e.right,k),e.tsType||W(e,9570,lf("binary op missing ts type")),ee(e,e.tsType,k)),t)},UnaryOp:t=>{let r=Ee[t.op];return e.U.assert(!!r),n.mkInfix(null,r,tt(t.operand))},Lambda:t=>(W(t,9574,e.U.lf("lambda expressions are not supported yet")),b(t)),IfExp:e=>n.mkInfix(n.mkInfix(tt(e.test),"?",tt(e.body)),":",tt(e.orelse)),Dict:e=>{a.blockDepth++;const t=e.keys.map(((t,r)=>{const i=e.values[r];return void 0===t?b(e):n.mkStmt(n.mkInfix(tt(t),":",tt(i)),n.mkText(","))})),r=n.mkBlock(t);return a.blockDepth--,r},Set:e=>b(e),ListComp:e=>b(e),SetComp:e=>b(e),DictComp:e=>b(e),GeneratorExp:e=>{if(1==e.generators.length&&"Comprehension"==e.generators[0].kind){let t=e.generators[0];if(0==t.ifs.length)return ye((()=>{let r=Be(t.target);return J(r,{isParam:!0}),n.mkInfix(tt(t.iter),".",n.H.mkCall("map",[n.mkGroup([je(r),n.mkText(" => "),tt(e.elt)])]))}))}return b(e)},Await:e=>b(e),Yield:e=>b(e),YieldFrom:e=>b(e),Compare:e=>{if(1==e.ops.length&&("In"==e.ops[0]||"NotIn"==e.ops[0])){q(ge(e.comparators[0]))==x&&Z(e.left,x);let t=n.mkInfix(tt(e.comparators[0]),".",n.H.mkCall("indexOf",[tt(e.left)]));return n.mkInfix(t,"In"==e.ops[0]?">=":"<",n.mkText("0"))}let t=tt(e.left),r=tt(e.comparators[0]);const i=(e,i,a)=>{Te[e]&&dt(i)&&dt(a)&&n.flattenNode([t])!==n.flattenNode([r])&&(t=n.H.mkParenthesizedExpression(n.mkGroup([t,n.mkText(" as any")])),r=n.H.mkParenthesizedExpression(n.mkGroup([r,n.mkText(" as any")])))};i(e.ops[0],e.left,e.comparators[0]);let a=Ke(t,e.ops[0],r);for(let n=1;n<e.ops.length;++n)t=tt(e.comparators[n-1]),r=tt(e.comparators[n]),i(e.ops[n],e.comparators[n-1],e.comparators[n]),a=Ke(a,"And",Ke(t,e.ops[n],r));return a},Call:t=>{var r,i,o,s,c;t.func.inCalledPosition=!0;let l,f,_=Ue(t.func),m=me(_),g=m&&8==m.kind,h=m,y="";if(g)h=me(m.pyQName+".__constructor"),h||(h=ce(3,pt(null==m?void 0:m.pyAST)));else if("Attribute"==t.func.kind){let e=t.func;f=e.value,l=ge(f),(l.classType||l.primType)&&(y=e.attr,h=de(f,y,!0),h&&(y=h.name))}let v=t.args.slice();if("super"==_&&0==v.length)return a.currClass&&a.currClass.baseClass&&(t.tsType||W(t,9543,lf("call expr missing ts type")),X(t,t.tsType,a.currClass.baseClass)),n.mkText("super");if($e(t,"int")&&1===v.length&&v[0]){const e=v[0],t=tt(e),r=ge(e);if("string"===r.primType)return n.mkGroup([n.mkText("parseInt"),n.mkText("("),t,n.mkText(")")]);if("number"===r.primType)return n.mkGroup([n.mkInfix(n.mkText("Math"),".",n.mkText("trunc")),n.mkText("("),t,n.mkText(")")])}if(!h){let t=e.U.lookup(Je,_);if(t&&(y=""),y&&(_=G(l)+"."+y,t=e.U.lookup(Je,_),t||"@array"!=Q(q(l))||(_="Array."+y,t=e.U.lookup(Je,_))),y="",t)if("."==t.n[0]&&v.length){if(f=v.shift(),l=ge(f),y=t.n.slice(1),h=de(f,y),h&&2==h.kind)return n.mkInfix(tt(f),".",n.mkText(y))}else h=O(t.n)}if($e(t,"str"))return ee(t,t.tsType,x),n.mkInfix(n.mkText('""'),"+",tt(t.args[0]));const b="Attribute"===t.func.kind&&qe(t.func.value);!h&&b&&(h=O(_));const k="__init__"===(null===(r=a.currFun)||void 0===r?void 0:r.name)&&"__constructor"===(null==h?void 0:h.name)&&(null===(o=null===(i=a.currClass)||void 0===i?void 0:i.baseClass)||void 0===o?void 0:o.pyQName)===(null==h?void 0:h.namespace)&&b;k&&(h=me((null===(c=null===(s=a.currClass)||void 0===s?void 0:s.baseClass)||void 0===c?void 0:c.pyQName)+".__constructor")),h||W(t,9508,e.U.lf("can't find called function '{0}'",_));let S,T=h?h.parameters:null,E=[];if(T){for(v.length>T.length&&W(t,9510,e.U.lf("too many arguments in call to '{0}'",h.pyQName));v.length<T.length;)v.push(null);v=v.slice(0,T.length);for(let n of t.keywords){let t=T.findIndex((e=>e.name==n.arg));t<0?W(n,9511,e.U.lf("'{0}' doesn't have argument named '{1}'",h.pyQName,n.arg)):null!=v[t]?W(n,9512,e.U.lf("argument '{0} already specified in call to '{1}'",n.arg,h.pyQName)):v[t]=n.value}for(let e=v.length-1;e>=0&&(T[e].initializer&&null==v[e]);e--)v.pop();for(let r=0;r<v.length;++r){let i=v[r];if(null!=i||T[r].initializer)if(i){T[r].pyType||W(t,9545,lf("formal arg missing py type"));const e=T[r].pyType;"any"!==e.primType&&ne(i,e),"Name"==i.kind&&Pe(i.symbolInfo)?E.push(Oe(i.symbolInfo.pyAST,!0)):E.push(tt(i))}else T[r].initializer||W(t,9547,lf("formal arg missing initializer")),E.push(n.mkText(T[r].initializer));else W(t,9513,e.U.lf("missing argument '{0}' in call to '{1}'",T[r].name,h.pyQName)),E.push(n.mkText("null"))}}else h&&W(t,9509,e.U.lf("calling non-function")),E=v.map(tt);if(!d&&u&&"signature"==u.type&&He(t)){d=t,p=j(),u.auxResult=0;for(let e=0;e<v.length;++e){u.auxResult=e;let t=v[e];if(!t)break;if(t.startPos<=u.position&&u.position<=t.endPos)break}}if(h)if(h.pyRetType||W(t,9549,lf("function missing pyRetType")),f&&ut(f)&&l?function(e,t,n){switch(t.qName){case"Array.pop":case"Array.removeAt":case"Array.shift":case"Array.find":case"Array.get":case"Array._pickRandom":Z(e,n.typeArgs[0]);break;case"Array.concat":case"Array.slice":case"Array.filter":case"Array.fill":Z(e,n);break;case"Array.reduce":if("Call"===e.kind&&e.args.length>1){const t=ge(e.args[1]);t&&Z(e,t)}break;case"Array.map":Z(e,L(C));break;default:Z(e,t.pyRetType)}}(t,h,l):Z(t,h.pyRetType),t.symbolInfo=h,h.attributes.py2tsOverride){const e=function(e){const t=new RegExp(/([^\$]*\()?([^\$\(]*)\$(\d)(?:(?:(?:=(\d+|'[a-zA-Z0-9_]*'|false|true|null|undefined))|(\?)|))/,"y"),n=[];let r,i=0;do{i=t.lastIndex,r=t.exec(e),r&&(r[1]&&n.push({kind:"text",text:r[1]}),n.push({kind:"arg",prefix:r[2],index:parseInt(r[3]),default:r[4],isOptional:!!r[5]}))}while(r);null!=i?n.push({kind:"text",text:e.substr(i)}):n.push({kind:"text",text:e});return{parts:n}}(h.attributes.py2tsOverride);if(e){y&&!f&&W(t,9550,lf("missing recv"));let r=function(e,t,r){const i=[];for(const r of e.parts)if("text"===r.kind)i.push(n.mkText(r.text));else if(t[r.index]||r.default)r.prefix&&i.push(n.mkText(r.prefix)),t[r.index]?i.push(t[r.index]):i.push(n.mkText(r.default));else if(!r.isOptional)return;if(r)return n.mkInfix(r,".",n.mkGroup(i));return n.mkGroup(i)}(e,E,y?tt(f):void 0);return r||W(t,9555,lf("buildOverride failed unexpectedly")),r}}else if(h.attributes.pyHelper)return n.mkGroup([n.mkInfix(n.mkText("_py"),".",n.mkText(h.attributes.pyHelper)),n.mkText("("),n.mkCommaSep(f?[tt(f)].concat(E):E),n.mkText(")")]);k?S=n.mkText("super"):y?(S=n.mkInfix(tt(f),".",n.mkText(y)),Ge(t.func,"memberCompletion")):S=tt(t.func);let D=[S,n.mkText("("),n.mkCommaSep(E),n.mkText(")")];return h&&1==E.length&&pxtc.service.isTaggedTemplate(h)&&(D=[S,Ve(E[0])]),g&&(m&&m.pyQName||W(t,9551,lf("missing namedSymbol or pyQName")),D[0]=n.mkText(H(m.pyQName)),D.unshift(n.mkText("new "))),n.mkGroup(D)},Num:e=>(e.tsType||W(e,9556,lf("tsType missing")),ee(e,e.tsType,k),n.mkText(e.ns)),Str:e=>(e.tsType||W(e,9557,lf("tsType missing")),ee(e,e.tsType,x),n.mkText(n.stringLit(e.s))),FormattedValue:e=>b(e),JoinedStr:e=>b(e),Bytes:t=>n.mkText(`hex\`${e.U.toHex(new Uint8Array(t.s))}\``),NameConstant:e=>(null!==e.value&&(e.tsType||W(e,9558,lf("tsType missing")),ee(e,e.tsType,S)),n.mkText(JSON.stringify(e.value))),Ellipsis:e=>b(e),Constant:e=>b(e),Attribute:t=>{let r=tt(t.value),i=ge(t.value),a=de(t.value,t.attr),o=t.attr;if(Ge(t,"memberCompletion"),a)t.symbolInfo=a,We(t,a),t.tsType&&a.pyRetType||W(t,9559,lf("tsType or pyRetType missing")),ee(t,t.tsType,a.pyRetType),o=a.name;else if(i.moduleType){let n=O(i.moduleType.pyQName+"."+t.attr);n?(t.symbolInfo=n,We(t,n),Z(t,I(n)),o=n.name):W(t,9514,e.U.lf("module '{0}' has no attribute '{1}'",i.moduleType.pyQName,t.attr))}else f>2&&W(t,9515,e.U.lf("unknown object type; cannot lookup attribute '{0}'",t.attr));return n.mkInfix(r,".",n.mkText(Me(o)))},Subscript:e=>{if("Index"==e.slice.kind){const t=q(ge(e.value));if(ut(e.value)){Z(e,t.typeArgs[0])}else"string"===t.primType?Z(e,t):f>2&&Y(ge(e))&&Z(e,C);let r=e.slice.value;return f>2&&Y(ge(r))&&Z(r,k),n.mkGroup([tt(e.value),n.mkText("["),tt(r),n.mkText("]")])}if("Slice"==e.slice.kind){const t=ge(e.value);Z(e,t);let r=e.slice;if(r.step){const i="string"===(null==t?void 0:t.primType);return n.H.mkCall(i?"_py.stringSlice":"_py.slice",[tt(e.value),r.lower?tt(r.lower):n.mkText("null"),r.upper?tt(r.upper):n.mkText("null"),tt(r.step)])}return n.mkInfix(tt(e.value),".",n.H.mkCall("slice",[r.lower?tt(r.lower):n.mkText("0"),r.upper?tt(r.upper):null].filter(y)))}return b(e)},Starred:e=>n.mkGroup([n.mkText("... "),tt(e.value)]),Name:e=>{if(Ge(e,"identifierCompletion"),"self"==e.id&&a.currClass)return e.tsType||W(e,9560,lf("missing tsType")),X(e,e.tsType,a.currClass.symInfo),n.mkText("this");let t=Ye(e),r=null==t?void 0:t.symbol;if(r&&r.isImport)return je(r.name);if(Xe(t,e),e.ctx.indexOf("Load")>=0){if(!r)return je(Be(e));if(!(null==r?void 0:r.qName))return W(e,9561,lf("missing qName")),je("unknown");return je(r.qName.replace("@type",""))}return Re(e)},List:Ze,Tuple:Ze};function Ye(t){let n=_e(t.id),r=null==n?void 0:n.symbol;if(!n){let r=e.U.lookup(Je,t.id);r&&(n=_e(r.n))}if(n&&r){if(t.symbolInfo=r,t.tsType||W(t,9562,lf("missing tsType")),ee(t,t.tsType,I(r)),r.isImport)return n;We(t,r),t.forTargetEndPos&&n.forVariableEndPos!==t.forTargetEndPos&&(n.forVariableEndPos?n.lastRefPos=n.forVariableEndPos+1:n.forVariableEndPos=t.forTargetEndPos)}else f>0&&W(t,9516,e.U.lf("name '{0}' is not defined",t.id));return n}function Xe(e,n){if(e){if(e.modifier===t.VarModifier.Global){const t=$();t&&t.vars[e.symbol.name]&&(e=t.vars[e.symbol.name])}else if(e.modifier===t.VarModifier.NonLocal){const t=at(e.symbol.name,j());t&&(e=t.vars[e.symbol.name])}(void 0===e.firstRefPos||e.firstRefPos>n.startPos)&&(e.firstRefPos=n.startPos),(void 0===e.lastRefPos||e.lastRefPos<n.startPos)&&(e.lastRefPos=n.startPos)}}function Ze(e){return e.tsType||W(e,9563,lf("missing tsType")),ee(e,e.tsType,L(e.elts[0]?ge(e.elts[0]):F())),n.mkGroup([n.mkText("["),n.mkCommaSep(e.elts.map(tt)),n.mkText("]")])}function et(e){return`${e.startPos}:${e.endPos}`}function tt(t){o=t;let n=Qe[t.kind];n||e.U.oops(t.kind+" - unknown expr"),ge(t);const r=n(t);return r.id=et(t),r}function nt(t){o=t;let r=Fe[t.kind];r||e.U.oops(t.kind+" - unknown stmt");let i=(t._comments||[]).map((e=>e.value)),a=r(t);return i.length&&(a=n.mkGroup(i.map((e=>n.mkStmt(n.H.mkComment(e)))).concat(a))),a.id=et(t),a}function rt(e){return!e||(e.type==n.NT.Prefix&&""==e.op?e.children.every(rt):e.type==n.NT.NewLine)}function it(e){const t=je(e.name),r=G(I(e));return n.mkStmt(n.mkGroup([n.mkText("let "),t,n.mkText(": "+r+";")]))}function at(e,n){if(!n)return;const r=n.vars&&n.vars[e];return r&&r.modifier!=t.VarModifier.NonLocal?n:at(e,n.parent)}function ot(e){const t=[];let n;for(const r of Object.keys(e.vars))n=e.vars[r],st(n,e)&&t.push(it(null==n?void 0:n.symbol));return t}function st(e,t){return!!(4===e.symbol.kind&&!e.symbol.isParam&&void 0===e.modifier&&(e.lastRefPos>e.forVariableEndPos||e.firstRefPos<e.firstAssignPos||e.firstAssignDepth>t.blockDepth)&&!(function(e){return"Module"===e.kind&&"main"===e.name}(t)&&0===e.firstAssignDepth))}function ct(t){if(e.U.assert("Module"==t.kind),t.tsBody)return;var r;a={currClass:void 0,currFun:void 0,currModule:r=t,blockDepth:0},s=r.tsFilename.replace(/\.ts$/,".py"),t.vars||(t.vars={});let i=ot(t).concat(t.body.map(nt));return i.every(rt)?void 0:"main"==t.name?i:[n.mkText("namespace "+t.name+" "),n.mkBlock(i)]}function lt(e){f=e,c=[],m=0,o=void 0}function ut(e){const t=q(ge(e));return t&&"@array"===t.primType}function dt(e){switch(e.kind){case"Num":case"Str":return!0;case"NameConstant":return null!==e.value}return!1}function pt(e,t=e.symInfo){var n;const r=P(t.pyQName+".__constructor");if(!r&&(null===(n=t.extendsTypes)||void 0===n?void 0:n.length)){const n=me(t.extendsTypes[0])||O(t.extendsTypes[0]);if(n)return pt(e,n)}const i={kind:"FunctionDef",name:"__init__",startPos:e.startPos,endPos:e.endPos,parent:e,body:[],args:{kind:"Arguments",startPos:0,endPos:0,args:[{startPos:0,endPos:0,kind:"Arg",arg:"self"}],kw_defaults:[],kwonlyargs:[],defaults:[]},decorator_list:[],vars:{},symInfo:ae(3,e.symInfo.qName+".__constructor")};return i.symInfo.parameters=[],i.symInfo.pyRetType=F({classType:e.symInfo}),r&&(i.args.args.push(...r.parameters.map((e=>({startPos:0,endPos:0,kind:"Arg",arg:e.name})))),i.symInfo.parameters.push(...r.parameters.map((e=>{if(e.pyType)return e;return Object.assign(Object.assign({},e),{pyType:N(e.type)})})))),i}function ft(e,t,r){const i=`___${t}_is_set`,a=`___${t}`;return n.mkStmt(n.mkStmt(n.mkText(`private ${i}: boolean`)),n.mkStmt(n.mkText(`private ${a}: ${r}`)),n.mkStmt(n.mkText(`get ${t}(): ${r}`),n.mkBlock([n.mkText(`return this.${i} ? this.${a} : ${e}.${t}`)])),n.mkStmt(n.mkText(`set ${t}(value: ${r})`),n.mkBlock([n.mkStmt(n.mkText(`this.${i} = true`)),n.mkStmt(n.mkText(`this.${a} = value`))])))}t.py2ts=function(a){let o=[];const f={};c=[],e.U.assert(!!a.sourceFiles,"missing sourceFiles! Cannot convert py to ts");let _=a.sourceFiles.filter((t=>e.U.endsWith(t,".py")));if(0==_.length)return{outfiles:f,diagnostics:c,success:0===c.length,sourceMap:[]};let g=(e,t)=>e.substr(0,e.length-t.length),h=e.U.toDictionary(_,(e=>g(e,".py"))),y=a.sourceFiles.filter((t=>e.U.endsWith(t,".ts"))).filter((e=>g(e,".ts")in h));e.U.assert(!!a.apisInfo,"missing apisInfo! Cannot convert py to ts"),s=_[0],function(t,n){i={},r={};let a=e.U.toDictionary(n,(e=>e));for(let n of e.U.values(t.byQName)){if(a.hasOwnProperty(n.fileName))continue;let t=n;t.extendsTypes&&(t.extendsTypes=t.extendsTypes.filter((e=>e!=t.qName))),t.pyQName&&t.qName||W(null,9526,e.U.lf("Symbol '{0}' is missing qName for '{1}'",t.name,t.pyQName?"ts":"py")),r[t.pyQName]=t,r[t.qName]=t}E=N("Buffer")}(a.apisInfo,y),l=a,u=void 0,a.generatedFiles||(a.generatedFiles=[]);for(const t of _){let n=t,r=t.replace(/\.py$/,"").replace(/.*\//,""),i=a.fileSystem[t];try{s=t;let a=e.py.lex(i),l=e.py.parse(i,n,a);e.U.pushRange(c,l.diagnostics),o.push({kind:"Module",body:l.stmts,blockDepth:0,name:r,source:i,tsFilename:n.replace(/\.py$/,".ts")})}catch(e){console.log("Parse error",e)}}const v=c;for(let e=0;e<5;++e){lt(e);for(let e of o)try{ct(e)}catch(e){console.log("Conv pass error",e)}if(0==m)break}lt(1e3),d=void 0,u=a.syntaxInfo||{position:0,type:"symbol"};let b=[];for(let e of o)try{let t=ct(e);if(!t)continue;let r=n.flattenNode(t);function x(e){let t=e.id.split(":");if(2!=t.length)return;let n=t.map((e=>parseInt(e)));return{py:{startPos:n[0],endPos:n[1]},ts:{startPos:e.startPos,endPos:e.endPos}}}a.sourceFiles.push(e.tsFilename),a.generatedFiles.push(e.tsFilename),a.fileSystem[e.tsFilename]=r.output,f[e.tsFilename]=r.output,b=r.sourceMap.map(x).filter((e=>!!e))}catch(e){console.log("Conv error",e)}c=v.concat(c);let k={};const S=e.U.values(r).concat(e.U.values(i));let T=[];const C=e=>{if((e=>{switch(e.kind){case 6:case 7:case 4:case 3:case 5:return!0;case 2:case 1:return!e.isInstance;default:return!1}})(e)&&T.indexOf(e)<0){let t=w(e);k[t.qName||t.name]=t}};for(let t=p;t;t=t.parent)t&&t.vars&&e.U.values(t.vars).map((e=>e.symbol)).forEach(C);if(S.forEach(C),u&&d){if(d=d,u.beginPos=d.startPos,u.endPos=d.endPos,u.symbols||(u.symbols=[]),T=u.symbols.slice(),"memberCompletion"==u.type&&"Attribute"==d.kind){const e=ge(d.value);if(e.moduleType)for(let t of S)t.isInstance||t.namespace!=e.moduleType.qName||u.symbols.push(t);else if(e.classType||e.primType){const t=e.classType||pe(e.primType).reduce(((e,t)=>e||t),null);if(t){t.extendsTypes&&t.qName||W(null,9567,lf("missing extendsTypes or qName"));let e=t.extendsTypes.concat(t.qName);for(let t of S)t.isInstance&&e.indexOf(t.namespace)>=0&&u.symbols.push(t)}}}else if("identifierCompletion"==u.type)u.symbols=e.U.values(k);else{let e=d.symbolInfo;e&&u.symbols.push(e)}u.symbols=u.symbols.map(w)}let D=function(){for(let e of c)t.patchPosition(e,a.fileSystem[e.fileName]);return c}();return{outfiles:f,success:0===D.length,diagnostics:D,syntaxInfo:u,globalNames:k,sourceMap:b}}}(e.py||(e.py={}))}(pxt||(pxt={})),function(e){!function(t){let n;!function(e){e[e.Id=0]="Id",e[e.Op=1]="Op",e[e.Keyword=2]="Keyword",e[e.Number=3]="Number",e[e.String=4]="String",e[e.NewLine=5]="NewLine",e[e.Comment=6]="Comment",e[e.Indent=7]="Indent",e[e.Dedent=8]="Dedent",e[e.EOF=9]="EOF",e[e.Error=10]="Error"}(n=t.TokenType||(t.TokenType={})),t.keywords={False:!0,None:!0,True:!0,and:!0,as:!0,assert:!0,async:!0,await:!0,break:!0,class:!0,continue:!0,def:!0,del:!0,elif:!0,else:!0,except:!0,finally:!0,for:!0,from:!0,global:!0,if:!0,import:!0,in:!0,is:!0,lambda:!0,nonlocal:!0,not:!0,or:!0,pass:!0,raise:!0,return:!0,try:!0,while:!0,with:!0,yield:!0};let r,i,a=[];const o={"%":"Mod","&":"BitAnd","*":"Mult","**":"Pow","+":"Add","-":"Sub","/":"Div","//":"FloorDiv","<<":"LShift",">>":"RShift","@":"MatMult","^":"BitXor","|":"BitOr"},s={"!":"Bang","!=":"NotEq","(":"LParen",")":"RParen",",":"Comma","->":"Arrow",".":"Dot",":":"Colon",";":"Semicolon","<":"Lt","<=":"LtE","=":"Assign","==":"Eq",">":"Gt",">=":"GtE","[":"LSquare","]":"RSquare","{":"LBracket","}":"RBracket","~":"Invert"},c={b:/^[_0-1]$/,B:/^[_0-1]$/,o:/^[_0-7]$/,O:/^[_0-7]$/,x:/^[_0-9a-fA-F]$/,X:/^[_0-9a-fA-F]$/},l={b:2,B:2,o:8,O:8,x:16,X:16};let u,d,p=0,f=0;function _(e,t){let n=0,r=0;for(let i=0;i<e;++i)10==t.charCodeAt(i)&&(n++,r=i);return{line:n,column:e-r-1}}function m(e){switch(e.type){case n.Id:return`id(${e.value})`;case n.Op:return"'"+i[e.value]+"'";case n.Keyword:return e.value;case n.Number:return`num(${e.value})`;case n.String:return e.stringPrefix+JSON.stringify(e.value);case n.NewLine:return"<nl>";case n.Comment:return`/* ${e.value} */`;case n.Indent:return"indent"+e.value;case n.Dedent:return"dedent";case n.Error:return`[ERR: ${e.value}]`;case n.EOF:return"End of file";default:return"???"}}t.position=_,t.patchPosition=function(e,t){if(!e.start&&!e.length)return e.start=0,e.length=0,e.line=0,void(e.column=0);let n=_(e.start,t);e.line=n.line,e.column=n.column,e.length>0&&(n=_(e.start+e.length-1,t),e.endLine=n.line,e.endColumn=n.column+2)},t.tokenToString=m,t.friendlyTokenToString=function(e,t){let n=e.endPos-e.startPos,r="";return r=0==n?m(e):n>20?"`"+t.slice(e.startPos,e.startPos+20)+"`...":"`"+t.slice(e.startPos,e.endPos)+"`",r=r.replace(/\r/g,"").replace(/\n/g,"\\n").replace(/\t/g,"\\t"),r},t.tokensToString=function(e){let t="",r=0;for(let i of e){let e=m(i);r+e.length>70&&(r=0,t+="\n"),0!=r&&(t+=" "),t+=e,r+=e.length,i.type!=n.NewLine&&i.type!=n.Comment||(r=0,t+="\n")}return t},t.lex=function(_){for(0==a.length&&function(){const n={'"':k,"'":k,"#":E,"\\":C,".":A};r=e.U.clone(s);for(let e of Object.keys(o))r[e]=o[e],r[e+"="]=o[e]+"Assign";i={};for(let e of Object.keys(r))i[r[e]]=e;for(let e=0;e<128;++e)if(t.rx.isIdentifierStart(e))a[e]=h;else{let i=String.fromCharCode(e);if(n.hasOwnProperty(i))a[e]=n[i];else if(r.hasOwnProperty(i)){let t=!1,n=r[i];for(let e of Object.keys(r))e!=i&&e.startsWith(i)&&(t=!0);a[e]=t?()=>v(n):()=>y(n)}else t.rx.isSpace(e)?a[e]=()=>{}:13==e?a[e]=()=>{10==d.charCodeAt(p)&&p++,S()}:t.rx.isNewline(e)?a[e]=S:w(e)?a[e]=D:a[e]=N}}(),d=_,u=[],p=0,f=0,T();p<d.length;){f=p;const e=d.charCodeAt(p++);e<128?a[e]():t.rx.isIdentifierStart(e)?h():t.rx.isSpace(e)||(t.rx.isNewline(e)?S():N())}return f=p,S(),m(n.EOF,""),u;function m(e,t,n){let r={type:e,value:t,startPos:f,endPos:p,auxValue:n};return u.push(r),r}function g(e){m(n.Error,e)}function h(){for(;t.rx.isIdentifierChar(d.charCodeAt(p));)p++;let e=d.slice(f,p),r=d.charCodeAt(p);t.keywords.hasOwnProperty(e)?m(n.Keyword,e):34==r||39==r?x(e):m(n.Id,e)}function y(e){m(n.Op,e)}function v(e){let t=d.slice(f,p+1);if(2==t.length&&r.hasOwnProperty(t)){let n=d.slice(f,p+2);3==n.length&&r.hasOwnProperty(n)?(p+=2,e=r[n]):(p++,e=r[t])}y(e)}function b(e){switch(e){case 97:return 7;case 98:return 8;case 102:return 12;case 110:return 10;case 114:return 13;case 116:return 9;case 118:return 11;default:return 0}}function x(r){const i=d.charCodeAt(p++);let a=!1;d.charCodeAt(p)==i&&d.charCodeAt(p+1)==i&&(p+=2,a=!0);let o=(r=r.toLowerCase()).indexOf("r")>=0,s="",c="";for(;;){const n=d.charCodeAt(p++);if(n==i){if(!a)break;if(d.charCodeAt(p)==i&&d.charCodeAt(p+1)==i){p+=2;break}c+="\\"+String.fromCharCode(i),s+=String.fromCharCode(i)}else if(92==n){let n=d.charCodeAt(p++);if(13==n&&10==d.charCodeAt(p)&&(n=10,p++),34==n||39==n||92==n)o&&(c+="\\",s+="\\"),c+="\\"+String.fromCharCode(n),s+=String.fromCharCode(n);else if(!o&&b(n))c+="\\"+String.fromCharCode(n),s+=String.fromCharCode(b(n));else if(t.rx.isNewline(n))o&&(s+="\\"+String.fromCharCode(n),c+="\\\\",c+=10==n?"\\n":"\\u"+("0000"+n.toString(16)).slice(-4));else if(o||48!=n)if(o||117!=n&&120!=n)c+="\\\\"+String.fromCharCode(n),s+="\\"+String.fromCharCode(n);else{let t=117==n?4:2,r=d.slice(p,p+t);p+=t;let i=parseInt(r,16);isNaN(i)&&g(e.U.lf("invalid unicode or hex escape")),c+="\\"+String.fromCharCode(n)+r,s+=String.fromCharCode(i)}else c+="\\\\x00",s+="\0"}else{if(isNaN(n)){g(e.U.lf("end of file in a string"));break}if(t.rx.isNewline(n)&&!a){g(e.U.lf("new line in a string"));break}s+=String.fromCharCode(n),c+=String.fromCharCode(n)}}let l=m(n.String,s);l.quoted=c,l.stringPrefix=r}function k(){p--,x("")}function S(){m(n.NewLine,""),T()}function T(){let e=0;for(;;){const t=d.charCodeAt(p);if(9!=t){if(32!=t)break;e++,p++}else e=e+8&-8,p++}m(n.Indent,""+e)}function C(){let n=d.charCodeAt(p);t.rx.isNewline(n)?(p++,13==n&&10==d.charCodeAt(p)&&p++):g(e.U.lf("unexpected character after line continuation character"))}function E(){for(m(n.NewLine,"");p<d.length&&!t.rx.isNewline(d.charCodeAt(p));)p++;m(n.Comment,d.slice(f+1,p)),13==d.charCodeAt(p)&&10==d.charCodeAt(p+1)&&p++,p++,T()}function D(){let t=d[f],r="";if("0"==t){let i=d[p];const a=c[i];if(a){for(p++;;){const e=d[p];if(!a.test(e))break;r+=e,p++}if(r){let a=parseInt(r,l[i]);isNaN(a)&&g(e.U.lf("invalid number")),m(n.Number,t+i+r,a)}else g(e.U.lf("expecting numbers to follow 0b, 0o, 0x"));return}}let i=!1,a=!1,o=!1;for(p=f;;){const e=d.charCodeAt(p);if(!o||43!=e&&45!=e)if(o=!1,95==e||w(e));else if(a||i||46!=e){if(a||69!=e&&101!=e)break;a=!0,o=!0}else i=!0;else;r+=String.fromCharCode(e),p++}!i&&!a&&"0"==t&&r.length>1&&!/^0+/.test(r)&&g(e.U.lf("unexpected leading zero"));let s=parseFloat(r);isNaN(s)&&g(e.U.lf("invalid number")),m(n.Number,r,s)}function A(){w(d.charCodeAt(p))?D():m(n.Op,"Dot")}function w(e){return 48<=e&&e<=57}function N(){g(e.U.lf("invalid token"))}}}(e.py||(e.py={}))}(pxt||(pxt={})),function(e){!function(t){let n,r,i,a,o,s,c,l,u;function d(){return r[o]}function p(){for(;r[o];o++){let i=r[o];if(i.type!=t.TokenType.Comment){if(n>=0&&i.type==t.TokenType.Op)switch(i.value){case"LParen":case"LSquare":case"LBracket":n++;break;case"RParen":case"RSquare":case"RBracket":n--}if(i.type!=t.TokenType.Error){if(n>0){if(i.type==t.TokenType.NewLine||i.type==t.TokenType.Indent)continue}else if(i.type==t.TokenType.Indent){if(r[o+1].type==t.TokenType.NewLine){o++;continue}let n=parseInt(i.value),a=c[c.length-1];if(n==a)continue;if(n>a)return void c.push(n);{i.type=t.TokenType.Dedent;let a=0;for(;c.length;){let t=c[c.length-1];if(!(t>n)){for(t!=n&&_(9552,e.U.lf("inconsitent indentation"));a>1;)r.splice(o,0,i),a--;return}c.pop(),a++}}}return}_(9551,i.value)}else s.push(i)}}function f(){l=d(),l.type!=t.TokenType.EOF&&(o++,p())}function _(n,r){r||(r=e.U.lf("invalid syntax")),n||(n=9550);const o=d(),s={code:n,category:pxtc.DiagnosticCategory.Error,messageText:e.U.lf("{0} near {1}",r,t.friendlyTokenToString(o,i)),fileName:a,start:o.startPos,length:o.endPos?o.endPos-o.startPos:0,line:0,column:0};t.patchPosition(s,i),u.push(s),9572!=n&&u.length>100&&e.U.userError(e.U.lf("too many parse errors"))}function m(n,r){const i=d();(i.type==n&&i.value==r||(_(9553,e.U.lf("expecting {0}",t.tokenToString(function(e,t){return{type:e,value:t,startPos:0,endPos:0}}(n,r)))),i.type!=t.TokenType.NewLine))&&f()}function g(){m(t.TokenType.NewLine,"")}function h(e){m(t.TokenType.Keyword,e)}function y(e){m(t.TokenType.Op,e)}function v(){let e=d();return e.type==t.TokenType.Keyword?e.value:""}function b(){let e=d();return e.type==t.TokenType.Op?e.value:""}const x={if:function e(){let t=T("If");f(),t.test=V(),t.body=S(),"elif"==v()?t.orelse=[e()]:t.orelse=E();return C(t)},while:function(){let e=T("While");return h("while"),e.test=V(),e.body=S(),e.orelse=E(),C(e)},for:function(){let e=T("For");return h("for"),e.target=B(),j(e.target),h("in"),e.iter=U(),e.body=S(),e.orelse=E(),C(e)},try:function(){let e=T("Try");h("try"),e.body=S(),e.handlers=[];let t=!1;for(;"except"==v();){let n=T("ExceptHandler");e.handlers.push(n),f(),"Colon"!=b()?(t&&_(),n.type=V(),"as"==v()?(f(),n.name=ve()):n.name=void 0):(t=!0,n.type=void 0,n.name=void 0),n.body=S()}e.orelse=E(),0==e.handlers.length&&e.orelse.length&&_();"finally"==v()?(f(),e.finalbody=S()):e.finalbody=[];return C(e)},with:function(){let t=T("With");return h("with"),t.items=ge(e.U.lf("with item"),D),t.body=S(),C(t)},def:function(){let e=T("FunctionDef");h("def"),e.name=ve(),y("LParen"),e.args=J(!0),y("RParen"),e.returns=void 0,"Arrow"==b()&&(f(),e.returns=V());return e.body=S(),C(e)},class:function(){let e=T("ClassDef");if(h("class"),e.name=ve(),"LParen"==b()){let t=be();e.bases=t.args,e.keywords=t.keywords}else e.bases=[],e.keywords=[];return e.body=S(),C(e)}},k={del:function(){let t=T("Delete");return h("del"),t.targets=me(e.U.lf("expression"),oe),C(t)},pass:function(){let e=T("Pass");return h("pass"),C(e)},break:function(){let e=T("Break");return f(),C(e)},continue:function(){let e=T("Continue");return f(),C(e)},return:function(){let e=T("Return");f(),w()?e.value=void 0:e.value=U();return C(e)},raise:function(){let e=T("Raise");h("raise"),e.exc=void 0,e.cause=void 0,w()||(e.exc=V(),"from"==v()&&(f(),e.cause=V()));return C(e)},global:N,nonlocal:function(){let e=N();return e.kind="Nonlocal",e},import:function(){let t=T("Import");return f(),t.names=ge(e.U.lf("import name"),P),C(t)},from:function(){let n=T("ImportFrom");f(),n.level=F(),d().type==t.TokenType.Id?n.module=I():n.module=void 0;n.level||n.module||_();if(h("import"),"Mult"==b()){f();let e=T("Alias");e.name="*",n.names=[e]}else"LParen"==b()?(f(),n.names=me(e.U.lf("import name"),O),y("RParen")):n.names=me(e.U.lf("import name"),O);return C(n)},assert:function(){let e=T("Assert");f(),e.test=V(),"Comma"==b()?(f(),e.msg=V()):e.msg=void 0;return C(e)},yield:function(){d();if(f(),"from"==v()){let e=T("YieldFrom");return e.value=V(),A(C(e))}let e=T("Yield");w()||(e.value=U());return A(C(e))}};function S(){return y("Colon"),function(){if(d().type==t.TokenType.NewLine){let n;if(f(),d().type!=t.TokenType.Indent)_(9554,e.U.lf("expected an indented block")),n=z();else{const r=parseInt(d().value);for(f(),n=z();;){if(d().type==t.TokenType.Dedent){const e=isNaN(r)||parseInt(d().value)<r;if(f(),e)break}if(e.U.pushRange(n,z()),d().type==t.TokenType.EOF)break}}return n}return K()}()}function T(e,t){let n=t||d();return{startPos:n.startPos,endPos:n.endPos,kind:e}}function C(e){return e.endPos=l.endPos,e}function E(){return"else"==v()?(f(),S()):[]}function D(){let e=T("WithItem");return e.context_expr=V(),e.optional_vars=void 0,"as"==v()&&(f(),e.optional_vars=oe()),C(e)}function A(e){let t=T("ExprStmt");return t.startPos=e.startPos,t.endPos=e.endPos,t.value=e,t}function w(){let e=d();return e.type==t.TokenType.NewLine||e.type==t.TokenType.Op&&"Semicolon"==e.value}function N(){let e=T("Global");for(f(),e.names=[];e.names.push(ve()),"Comma"==b();)f();return C(e)}function I(){let e="";for(;;){if(e+=ve(),"Dot"!=b())return e;e+=".",f()}}function P(){let e=T("Alias");return e.name=I(),"as"==v()?(f(),e.asname=ve()):e.asname=void 0,C(e)}function O(){let e=T("Alias");return e.name=ve(),"as"==v()?(f(),e.asname=ve()):e.asname=void 0,C(e)}function F(){let e=0;for(;;)if("Dot"==b())e+=1,f();else{if("Ellipsis"!=b())return e;e+=3,f()}}function L(e,t){let n=T("Tuple",e);return n.elts=t,C(n)}function R(t){let n=d(),r=me(e.U.lf("expression"),t),i=r[0];return 1!=r.length?L(n,r):i}function M(){return R(ce)}function U(){return R(V)}function B(){return R(oe)}function j(e){if("Tuple"==e.kind){e.elts.forEach(j)}else e.ctx="Store"}function $(){let n=e.U.lookup(k,v());return n?n():function(){let n=d(),r=M(),i=b();if("Assign"==i){let e=T("Assign");for(e.targets=[r];;){if(f(),r=M(),i=b(),"Assign"!=i){e.value=r;break}e.targets.push(r)}return e.targets.forEach(j),C(e)}if("Colon"==i){let e=T("AnnAssign");return e.target=r,f(),e.annotation=V(),"Assign"==b()&&(f(),e.value=V()),e.simple=n.type==t.TokenType.Id&&"Name"==r.kind?1:0,j(e.target),C(e)}if(e.U.endsWith(i,"Assign")){let e=T("AugAssign");return e.target=r,e.op=i.replace("Assign",""),f(),e.value=U(),j(e.target),C(e)}if("Semicolon"==i||d().type==t.TokenType.NewLine){let e=T("ExprStmt");return e.value=r,C(e)}return _(9555,e.U.lf("unexpected token")),f(),null}()}function K(){let e=[$()];for(;"Semicolon"==b()&&(f(),d().type!=t.TokenType.NewLine);)e.push($());return g(),e.filter((e=>!!e))}function z(){const r=u.length,i=d().type==t.TokenType.Indent;i&&(f(),_(9573,e.U.lf("unexpected indent")));let a=[];for(;"MatMult"==b();)f(),a.push(ke()),g();let o=v(),c=e.U.lookup(x,v()),p=[],m=s;if(s=[],"class"==o||"def"==o){let e=c();e.decorator_list=a,p=[e]}else a.length?_(9556,e.U.lf("decorators not allowed here")):p=c?[c()]:K();m.length&&p.length&&(p[0]._comments=m);if(u.length>r){for(n=-1;l.type!=t.TokenType.Dedent&&l.type!=t.TokenType.NewLine&&(f(),d().type!=t.TokenType.EOF););i&&d().type===t.TokenType.Dedent&&f(),n=0}return p}function J(n){let r=T("Arguments");for(r.args=[],r.defaults=[],r.kwonlyargs=[],r.kw_defaults=[],r.vararg=void 0;;){let n=b();if("Colon"==n||"RParen"==n)break;if("Mult"==n)r.vararg&&_(9557,e.U.lf("multiple *arg")),f(),d().type==t.TokenType.Id?r.vararg=i():r.vararg=void 0;else if("Pow"==n)r.kwarg&&_(9558,e.U.lf("multiple **arg")),f(),r.kwarg=i();else{r.kwarg&&_(9559,e.U.lf("arguments after **"));let t,n=i();"Assign"==b()&&(f(),t=V()),void 0!==r.vararg&&t?(r.kwonlyargs.push(n),r.kw_defaults.push(t)):(r.args.push(n),t?r.defaults.push(t):r.defaults.length&&_(9560,e.U.lf("non-default argument follows default argument")))}if("Comma"!=b())break;f()}return r.kwarg||(r.kwarg=void 0),r.vararg||(r.vararg=void 0),C(r);function i(){let e=T("Arg");return e.arg=ve(),e.annotation=void 0,n&&"Colon"==b()&&(f(),e.annotation=V()),e}}function q(e){let t=T("Lambda");return f(),t.args=J(!1),y("Colon"),t.body=e?le():V(),C(t)}function V(){if("lambda"==v())return q();let e=d(),t=W();if("if"==v()){let n=T("IfExp",e);return n.body=t,h("if"),n.test=W(),h("else"),n.orelse=V(),C(n)}return t}function H(e,t){let n=d(),r=t();if(v()==e){let i=T("BoolOp",n);for(i.op="or"==e?"Or":"And",i.values=[r];v()==e;)h(e),i.values.push(t());return C(i)}return r}function G(){return H("and",Q)}function W(){return H("or",G)}function Q(){if("not"==v()){let e=T("UnaryOp");return f(),e.op="Not",e.operand=Q(),C(e)}return function(){let e=d(),t=oe();if(!X())return t;let n=T("Compare",e);n.left=t,n.comparators=[],n.ops=[];for(;;){let e=X();if(!e)break;f(),"NotIn"==e?h("in"):"Is"==e&&"not"==v()&&(f(),e="IsNot"),n.ops.push(e),n.comparators.push(oe())}return C(n)}()}const Y={Lt:"Lt",Gt:"Gt",Eq:"Eq",GtE:"GtE",LtE:"LtE",NotEq:"NotEq",in:"In",not:"NotIn",is:"Is"};function X(){return Y[b()]||Y[v()]||null}const Z={Invert:"Invert",Sub:"USub",Add:"UAdd"};function ee(e,t){let n=d(),r=e();for(;;){let i=b();if(!(i&&t.indexOf(","+i+",")>=0))return r;{let t=T("BinOp",n);t.left=r,t.op=i,f(),t.right=e(),r=t}}}function te(){return ee(Se,",Mult,MatMult,Div,Mod,FloorDiv,")}function ne(){return ee(te,",Add,Sub,")}function re(){return ee(ne,",LShift,RShift,")}function ie(){return ee(re,",BitAnd,")}function ae(){return ee(ie,",BitXor,")}function oe(){return ee(ae,",BitOr,")}function se(){let t,n=d();if("Colon"!=b()&&(t=V()),"Colon"==b()){let e=T("Slice",n);e.lower=t,f();let r=b();return e.upper="Colon"!=r&&"Comma"!=r&&"RSquare"!=r?V():void 0,e.step=void 0,"Colon"==b()&&(f(),r=b(),"Comma"!=r&&"RSquare"!=r&&(e.step=V())),C(e)}{t||_(9570,e.U.lf("unable to parse lower subscript"));let n=T("Index");return n.value=t,C(n)}}function ce(){if("Mult"==b()){let e=T("Starred");return e.value=oe(),C(e)}return V()}function le(){return"lambda"==v()?q(!0):W()}function ue(){let e=[];for(;;){let t=T("Comprehension");for(t.is_async=0,e.push(t),h("for"),t.target=B(),j(t.target),h("in"),t.iter=W(),t.ifs=[];"if"==v();)f(),t.ifs.push(le());if("for"!=v())return e}}function de(){let t=d();if("Mult"==b()){let e=T("Starred");return f(),e.value=V(),C(e)}if("Pow"==b()){let e=T("Keyword");return f(),e.arg=void 0,e.value=V(),C(e)}let n=V();if("Assign"==b()){"Name"!=n.kind&&_(9561,e.U.lf("invalid keyword argument; did you mean ==?")),f();let r=T("Keyword",t);return r.arg=n.id||"???",r.value=V(),C(r)}if("for"==v()){let e=T("GeneratorExp",t);return e.elt=n,e.generators=ue(),C(e)}return n}function pe(){let e=T("NameConstant");return e.value=null,f(),C(e)}function fe(){let n=d();if(n.type==t.TokenType.Id){let e=T("Name");return f(),e.id=n.value,e.ctx="Load",C(e)}if(n.type==t.TokenType.Number){let e=T("Num");return f(),e.ns=n.value,e.n=n.auxValue,C(e)}if(n.type==t.TokenType.String){f();let r=n.value;for(;d().type==t.TokenType.String;)r+=d().value,f();if("b"==n.stringPrefix){let t=T("Bytes",n);return t.s=e.U.toArray(e.U.stringToUint8Array(r)),C(t)}{let e=T("Str",n);return e.s=r,C(e)}}if(n.type==t.TokenType.Keyword){if("None"==n.value||"True"==n.value||"False"==n.value){let e=T("NameConstant");return f(),e.value="True"==n.value||"False"!=n.value&&null,C(e)}return _(9564,e.U.lf("expecting atom")),pe()}if(n.type==t.TokenType.Op){let t=n.value;return"LParen"==t?ye("RParen","Tuple","GeneratorExp"):"LSquare"==t?ye("RSquare","List","ListComp"):"LBracket"==t?function(){let t=d();if(f(),"Pow"==b())return f(),r(void 0,oe());if("RBracket"==b()){let e=T("Dict",t);return f(),e.keys=[],e.values=[],C(e)}{let n=ce();return"Starred"!=n.kind&&"Colon"==b()?(f(),r(n,V())):function(n){if("for"==v()){"Starred"==n.kind&&_(9562,e.U.lf("iterable unpacking cannot be used in comprehension"));let r=T("SetComp",t);return r.elt=n,r.generators=ue(),C(r)}let r=T("Set",t);if(r.elts=[n],"Comma"==b()){let t=he("RBracket",e.U.lf("set element"),ce);r.elts=[n].concat(t)}else y("RBracket");return C(r)}(n)}function n(){if("Pow"==b())return f(),[null,oe()];{let e=V();return y("Colon"),[e,V()]}}function r(r,i){if("for"==v()){r||_(9563,e.U.lf("dict unpacking cannot be used in dict comprehension"));let n=T("DictComp",t);return n.key=r,n.value=i,n.generators=ue(),C(n)}let a=T("Dict",t);if(a.keys=[r],a.values=[i],"Comma"==b()){let t=he("RBracket",e.U.lf("dict element"),n);for(let e of t)e.length>=2&&e[0]&&e[1]&&(a.keys.push(e[0]),a.values.push(e[1]))}else y("RBracket");return C(a)}}():(_(9565,e.U.lf("unexpected operator")),pe())}return _(9566,e.U.lf("unexpected token")),pe()}function _e(){let n=b();return"RParen"==n||"RSquare"==n||"RBracket"==n||"Colon"==n||"Semicolon"==n||(!!e.U.endsWith(n,"Assign")||("in"==v()||d().type==t.TokenType.NewLine))}function me(t,n){let r=[];if(_e())return r;for(;;){r.push(n());let i="Comma"==b();if(i&&f(),_e())return r;if(!i)return _(9567,e.U.lf("expecting {0}",t)),r}}function ge(e,t){let n=[];for(;n.push(t()),"Comma"==b();)f();return n}function he(t,n,r){f();let i=[];if(b()!=t)for(;;){i.push(r());let a="Comma"==b();if(a&&f(),b()==t)break;if(!a){_(9568,e.U.lf("expecting {0}",n));break}}return y(t),i}function ye(t,n,r){let i=d();if(f(),b()==t){f();let e=T(n,i);return e.elts=[],C(e)}let a=ce();if("for"==v()){let e=T(r,i);return e.elt=a,e.generators=ue(),y(t),C(e)}if("Comma"==b()){let r=T(n,i);return f(),r.elts=me(e.U.lf("expression"),ce),r.elts.unshift(a),y(t),C(r)}if(y(t),"List"==n){let e=T(n,i);return e.elts=[a],C(e)}return a}function ve(){let n=d();return n.type!=t.TokenType.Id&&_(9569,e.U.lf("expecting identifier")),f(),n.value}function be(){let t=he("RParen",e.U.lf("argument"),de),n=[],r=[];for(let i of t)"Keyword"==i.kind?r.push(i):(r.length&&_(9570,e.U.lf("positional argument follows keyword argument")),n.push(i));return{args:n,keywords:r}}function xe(t,n){let r=b();if("LParen"==r){let e=T("Call",t);e.func=n;let r=be();return e.args=r.args,e.keywords=r.keywords,C(e)}if("LSquare"==r){let r=d(),i=T("Subscript",t);i.value=n;let a=he("RSquare",e.U.lf("subscript"),se);if(0==a.length)_(9571,e.U.lf("need non-empty index list"));else if(1==a.length)i.slice=a[0];else if(a.every((e=>"Index"==e.kind))){let e=a[0];e.value=L(r,a.map((e=>e.value))),i.slice=e}else{let e=T("ExtSlice",r);e.dims=a,i.slice=C(e)}return C(i)}if("Dot"==r){let e=T("Attribute",t);return e.value=n,f(),e.attr=ve(),C(e)}return n}function ke(){let e=d(),t=fe();for(;;){let n=xe(e,t);if(n===t)return t;t=n}}function Se(){if(Z[b()]){let e=T("UnaryOp");return e.op=Z[b()],f(),e.operand=Se(),C(e)}return function(){d();let e=ke();if("Pow"==b()){let t=T("BinOp");return f(),t.left=e,t.op="Pow",t.right=Se(),C(t)}return e}()}const Te={kind:1,id:2,n:3,s:4,func:5,key:6,elt:7,elts:8,keys:9,left:10,ops:11,comparators:12,names:13,items:14,test:15,targets:16,dims:17,context_expr:18,name:19,bases:20,type:21,inClass:22,target:23,annotation:24,simple:25,op:26,operand:27,right:28,values:29,iter:30,ifs:31,is_async:32,value:33,slice:34,attr:35,generators:36,args:37,keywords:38,body:39,handlers:40,orelse:41,finalbody:42,decorator_list:43,kwonlyargs:44,kw_defaults:45,defaults:46,arg:47},Ce={lineno:1,col_offset:1,startPos:1,endPos:1,kind:1},Ee={body:1,orelse:1,finalbody:1},De={_comments:1,ctx:1,ns:1};t.dump=function(t,n=!1){const r=(t,i)=>{if(Array.isArray(i)){let e="";for(let n=0;n<i.length;++n)n>0&&(e+=", "),e+=r(t,i[n]);return"["+e+"]"}if(!i||!i.kind)return JSON.stringify(i);let a="",o=Object.keys(i);o.sort(((t,n)=>(Te[t]||100)-(Te[n]||100)||e.U.strcmp(t,n)));for(let s of o)if(!(e.U.lookup(Ce,s)||n&&e.U.lookup(De,s)))if(a&&(a+=", "),a+=s+"=",Array.isArray(i[s])&&i[s].length&&e.U.lookup(Ee,s)){a+="[\n";let e=t+"  ";for(let t of i[s])a+=e+r(e,t)+"\n";a+=t+"]"}else if("_comments"==s){a+="[\n";let e=t+"  ";for(let t of i[s])a+=e+JSON.stringify(t.value)+"\n";a+=t+"]"}else a+=r(t,i[s]);return i.kind+"("+a+")"};let i="";for(let e of t)i+=r("",e)+"\n";return i},t.parse=function(f,m,g){i=f,a=m,r=g,n=0,o=0,s=[],c=[0],u=[];let h=[];try{if(l=r[0],p(),d().type!=t.TokenType.EOF)for(h=z();d().type!=t.TokenType.EOF;)e.U.pushRange(h,z())}catch(t){_(9572,e.U.lf("exception: {0}",t.message))}return{stmts:h,diagnostics:u}}}(e.py||(e.py={}))}(pxt||(pxt={})),function(e){!function(t){function n(e,t,n){const r={fileName:e.getSourceFile().fileName,start:e.getStart(),length:e.getEnd()-e.getStart(),line:void 0,column:void 0,code:t,category:pxtc.DiagnosticCategory.Error,messageText:n},i=new Error(n);throw i.pyDiagnostic=r,i}t.decompileToPython=function(r,i){let a={blocksInfo:void 0,outfiles:{},diagnostics:[],success:!0,times:{}};try{let o=function(r,i){const a=r.getTypeChecker(),o=(new ts.pxtc.LSHost(r),r.getSourceFile(i)),s=pxtc.decompiler.buildCommentMap(o),c=e.U.toSet(_(),(e=>e)),[l,u]=ts.pxtc.decompiler.buildRenameMap(r,o,{takenNames:c,declarations:"all"}),d=pxtc.getApiInfo(r),p=e.U.mapMap(d.byQName,((e,t)=>t.fileName==i?void 0:t)),f=t.computeScopeVariableLookup(o);return S(o);function _(){return["ArithmeticError","AssertionError","AttributeError","BaseException","BlockingIOError","BrokenPipeError","BufferError","BytesWarning","ChildProcessError","ConnectionAbortedError","ConnectionError","ConnectionRefusedError","ConnectionResetError","DeprecationWarning","EOFError","Ellipsis","EnvironmentError","Exception","False","FileExistsError","FileNotFoundError","FloatingPointError","FutureWarning","GeneratorExit","IOError","ImportError","ImportWarning","IndentationError","IndexError","InterruptedError","IsADirectoryError","KeyError","KeyboardInterrupt","LookupError","MemoryError","NameError","None","NotADirectoryError","NotImplemented","NotImplementedError","OSError","OverflowError","PendingDeprecationWarning","PermissionError","ProcessLookupError","RecursionError","ReferenceError","ResourceWarning","RuntimeError","RuntimeWarning","StopAsyncIteration","StopIteration","SyntaxError","SyntaxWarning","SystemError","SystemExit","TabError","TimeoutError","True","TypeError","UnboundLocalError","UnicodeDecodeError","UnicodeEncodeError","UnicodeError","UnicodeTranslateError","UnicodeWarning","UserWarning","ValueError","Warning","ZeroDivisionError","_","__build_class__","__debug__","__doc__","__import__","__loader__","__name__","__package__","__spec__","abs","all","any","ascii","bin","bool","bytearray","bytes","callable","chr","classmethod","compile","complex","copyright","credits","delattr","dict","dir","divmod","enumerate","eval","exec","exit","filter","float","format","frozenset","getattr","globals","hasattr","hash","help","hex","id","input","int","isinstance","issubclass","iter","len","license","list","locals","map","max","memoryview","min","next","object","oct","open","ord","pow","print","property","quit","range","repr","reversed","round","set","setattr","slice","sorted","staticmethod","str","sum","super","tuple","type","vars","zip",...Object.keys(e.py.keywords)]}function m(e){if(!e.getSourceFile())return null;let t=e.getText();return p[t]||null}function g(e){if(!e.getSourceFile())return null;let t=e.getText();const n=a.getSymbolAtLocation(e);n&&(t=a.getFullyQualifiedName(n));let r=p[t];if(r&&r.attributes.alias)return r.attributes.alias;if(r&&r.pyQName){if(r.isInstance){if(ts.isPropertyAccessExpression(e))return null;const t=new RegExp(`(?:^|.)${r.namespace}.(.+)`).exec(r.pyQName);if(t)return t[1]}return r.pyQName}return t in pxtc.ts2PyFunNameMap?pxtc.ts2PyFunNameMap[t].n:null}function h(t){let r=g(t);if(r)return r;if(!ts.isIdentifier(t))return e.tickEvent("depython.todo.advancedname"),n(t,3001,"Unsupported advanced name format: "+t.getText());let i=t.text;if(t.getSourceFile()){const e=l.getRenameForPosition(t.getStart());e&&(i=e.name)}return i}function y(e){return"string"!=typeof e&&(e=h(e)),u[e]?pxtc.decompiler.getNewName(e,u):(u[e]=!0,e)}function v(e,t){return 0!=(e.flags&t)}function b(e,t){return v(a.getTypeAtLocation(e),t)}function x(e){return b(e,ts.TypeFlags.StringLike)}function k(e){return b(e,ts.TypeFlags.NumberLike)}function S(e){let t=e.getChildren().map(T).reduce(((e,t)=>e.concat(t)),[]).reduce(((e,t)=>t||e[e.length-1]?[...e,t]:e),[]);return s.filter((e=>!e.owner)).forEach((e=>t.push(...C(e)))),t.join("\n")}function T(e){switch(e.kind){case ts.SyntaxKind.SyntaxList:return e._children.map(T).reduce(((e,t)=>e.concat(t)),[]);case ts.SyntaxKind.EndOfFileToken:case ts.SyntaxKind.OpenBraceToken:case ts.SyntaxKind.CloseBraceToken:return[];default:return E(e)}}function C(e){let t=[];if(e.kind===pxtc.decompiler.CommentKind.SingleLine)t.push("# "+e.text);else{t.push('"""');for(const n of e.lines)t.push(n);t.push('"""')}return t}function E(e){const t=D(e);return pxtc.decompiler.getCommentsForStatement(e,s).map(C).reduce(((e,t)=>e.concat(t)),[]).concat(t)}function D(t){return ts.isVariableStatement(t)?B(t):ts.isClassDeclaration(t)?j(t):ts.isEnumDeclaration(t)?$(t):ts.isExpressionStatement(t)?J(t):ts.isFunctionDeclaration(t)?V(t):ts.isIfStatement(t)?M(t):ts.isForStatement(t)?R(t):ts.isForOfStatement(t)?L(t):ts.isWhileStatement(t)?I(t):ts.isReturnStatement(t)?N(t):ts.isBlock(t)?q(t):ts.isTypeAliasDeclaration(t)?w(t):ts.isEmptyStatement(t)?[]:ts.isModuleDeclaration(t)?A(t):ts.isBreakStatement(t)?["break"]:ts.isContinueStatement(t)?["continue"]:(e.tickEvent("depython.todo.statement",{statement:t.kind}),n(t,3002,`Not supported in MakeCode Python: ${ts.SyntaxKind[t.kind]} (${t.kind})`))}function A(e){let n=h(e.name),r=e.body&&e.body.getChildren().map(T).reduce(((e,t)=>e.concat(t)),[]).map((e=>t.indent1(e)));return["@namespace",`class ${n}:`].concat(r||[])}function w(e){let t=pxtc.emitPyTypeFromTypeNode(e.type);return[`${h(e.name)} = ${t}`]}function N(e){if(!e.expression)return["return"];let[t,n]=xe(e.expression),r=Y("return ",t);return n.concat(r)}function I(e){let[t,n]=xe(e.expression),r=F(e.statement),i=Y("while ",t,":");return n.concat(i).concat(r)}function P(e){let t=Math.floor(Number(e));return t!==1/0&&String(t)===e}function O(e){if(!e.initializer)return null;if(e.initializer.kind!==ts.SyntaxKind.VariableDeclarationList)return null;let t=e.initializer;if(1!==t.declarations.length)return null;let n=t.declarations[0],r=h(n.name);if(!n.initializer||!ve(n.initializer)||!k(n.initializer))return null;let[i,a]=xe(n.initializer);if(a.length)return null;let o=Q(i);if(!e.condition)return null;if(!ts.isBinaryExpression(e.condition))return null;if(!ts.isIdentifier(e.condition.left))return null;if(h(e.condition.left)!=r)return null;if(!k(e.condition.right))return null;let[s,c]=xe(e.condition.right);if(c.length)return null;let l=Q(s),u=l;if(e.condition.operatorToken.kind===ts.SyntaxKind.LessThanEqualsToken&&P(l))u=""+(Number(l)+1);else if(e.condition.operatorToken.kind!==ts.SyntaxKind.LessThanToken)return null;return e.incrementor&&(ts.isPostfixUnaryExpression(e.incrementor)||ts.isPrefixUnaryExpression(e.incrementor))?e.incrementor.operator!==ts.SyntaxKind.PlusPlusToken?null:o<u?{name:r,fromIncl:o,toExcl:u}:null:null}function F(e){let n=D(e).map(t.indent1);return n.length<1&&(n=[t.indent1("pass")]),n}function L(t){if(!ts.isVariableDeclarationList(t.initializer))return e.tickEvent("depython.todo.forof.complexexp"),n(t,3003,"Unsupported expression in for..of initializer: "+t.initializer.getText());let r=t.initializer.declarations.map((e=>h(e.name)));if(1!==r.length)return e.tickEvent("depython.todo.forof.multidecl"),n(t,3004,"Unsupported multiple declerations in for..of: "+t.initializer.getText());let i=r[0],[a,o]=xe(t.expression),s=o;s=s.concat(Y(`for ${i} in `,a,":"));let c=F(t.statement);return s=s.concat(c),s}function R(e){let n=O(e);if(n){let{name:t,fromIncl:r,toExcl:i}=n,a="0"===r?`for ${t} in range(${i}):`:`for ${t} in range(${r}, ${i}):`,o=F(e.statement);return[a].concat(o)}let r,i=[];if(e.initializer)if(ts.isVariableDeclarationList(e.initializer)){let t=e.initializer.declarations.map(G).reduce(((e,t)=>e.concat(t)),[]);i=i.concat(t)}else{let[t,n]=xe(e.initializer);i=i.concat(n).concat(t)}if(e.condition){let[t,n]=xe(e.condition);i=i.concat(n),r=Q(t)}else r="True";let a=`while ${r}:`;i.push(a);let o=D(e.statement).map(t.indent1);if(0!==o.length||e.incrementor||(o=[t.indent1("pass")]),i=i.concat(o),e.incrementor){let n=z(e.incrementor);if(n)i=i.concat(n.map(t.indent1));else{let[n,r]=xe(e.incrementor);i=i.concat(r).concat(n.map(t.indent1))}}return i}function M(e){let{supportStmts:t,ifStmt:n,rest:r}=U(e);return t.concat([n]).concat(r)}function U(e){let t=[],[n,r]=xe(e.expression);t=t.concat(r);let i=`if ${Q(n)}:`,a=[],o=F(e.thenStatement);if(a=a.concat(o),e.elseStatement)if(ts.isIfStatement(e.elseStatement)){let{supportStmts:n,ifStmt:r,rest:i}=U(e.elseStatement),o=`el${r}`;t=t.concat(n),a.push(o),a=a.concat(i)}else{a.push("else:");let t=F(e.elseStatement);a=a.concat(t)}return{supportStmts:t,ifStmt:i,rest:a}}function B(e){return e.declarationList.declarations.map(G).reduce(((e,t)=>e.concat(t)),[])}function j(t){return e.tickEvent("depython.todo.classes"),n(t,3016,"Unsupported: classes are not supported in Python right now.")}function $(r){let i=[];i.push(`class ${h(r.name)}(Enum):`);let a=r.members.every((e=>!!e.initializer)),o=!r.members.every((e=>!!e.initializer));if(!a&&!o)return e.tickEvent("depython.todo.enummix"),n(r,3005,"Unsupported enum decleration: has mixture of explicit and implicit initialization");if(a)return e.tickEvent("depython.todo.enuminit"),n(r,3006,"Unsupported: explicit enum initialization");let s=0;for(let e of r.members)i.push(t.indent1(`${h(e.name)} = ${s++}`));return i}function K(e){return!(!ts.isPrefixUnaryExpression(e)&&!ts.isPostfixUnaryExpression(e))&&(e.operator===ts.SyntaxKind.MinusMinusToken||e.operator===ts.SyntaxKind.PlusPlusToken)}function z(e){if(!K(e))return null;let[t,n]=xe(e.operand),r=e.operator===ts.SyntaxKind.MinusMinusToken?" -= 1":" += 1",i=n;return i.push(`${Q(t)}${r}`),i}function J(e){let t=z(e.expression);if(t)return t;const[n,r]=xe(e.expression);return r.length?["",...r,...n,""]:[...r,...n]}function q(e){return e.getChildren().map(T).reduce(((e,t)=>e.concat(t)),[])}function V(r,i,a,o){let s=[];r.kind!==ts.SyntaxKind.MethodDeclaration&&r.kind!==ts.SyntaxKind.Constructor||s.push("self");let c=(a?oe(r.parameters,a):r.parameters).map((e=>H(e,!o)));s=s.concat(c);let l,u=s.join(", "),d=[];if(i)l=i;else{if(!r.name)return e.tickEvent("depython.todo.anonymousfunc"),n(r,3012,"Unsupported: anonymous function decleration");l=h(r.name)}if(d.push(`def ${l}(${u}):`),!r.body)return e.tickEvent("depython.todo.funcwithoutbody"),n(r,3013,"Unsupported: function decleration without body");let p=[];if(ts.isBlock(r.body))p=q(r.body);else{let[e,t]=xe(r.body);p=p.concat(t),p.concat(e)}if(p.length){let e=f.getExplicitGlobals(r).map((e=>h(e)));e&&e.length&&p.unshift(`global ${e.join(", ")}`);let n=f.getExplicitNonlocals(r).map((e=>h(e)));n&&n.length&&p.unshift(`nonlocal ${n.join(", ")}`),d=d.concat(p.map(t.indent1))}else d.push(t.indent1("pass"));return d}function H(t,r=!0){let i=t.altName||h(t.name),a="";if(t.type&&r){let e=pxtc.emitPyTypeFromTypeNode(t.type);e&&-1===e.indexOf("(TODO")&&(a=`: ${e}`)}let o="";if(t.initializer){let[r,i]=xe(t.initializer);if(i.length)return e.tickEvent("depython.todo.complexinit"),n(t,3007,`Unsupported: complex expression in parameter default value not supported. Expression: ${t.initializer.getText()}`);o=` = ${Q(r)}`}return`${i}${a}${o}`}function G(e){let t=[],n=h(e.name);if(e.initializer){let r,[i,a]=xe(e.initializer);if(t=t.concat(a),e.type){r=`${n}: ${pxtc.emitPyTypeFromTypeNode(e.type)} = ${Q(i)}`}else r=`${n} = ${Q(i)}`;return t.push(r),t}return t}function W(e,t){return[[e],t||[]]}function Q(e,t="\n"){return e.join(t)}function Y(e="",t,n=""){return t[0]=e+t[0],t[t.length-1]=t[t.length-1]+n,t}function X(t,r){switch(t){case ts.SyntaxKind.BarBarToken:return"or";case ts.SyntaxKind.AmpersandAmpersandToken:return"and";case ts.SyntaxKind.ExclamationToken:return"not";case ts.SyntaxKind.LessThanToken:return"<";case ts.SyntaxKind.LessThanEqualsToken:return"<=";case ts.SyntaxKind.GreaterThanToken:return">";case ts.SyntaxKind.GreaterThanEqualsToken:return">=";case ts.SyntaxKind.EqualsEqualsEqualsToken:case ts.SyntaxKind.EqualsEqualsToken:return"==";case ts.SyntaxKind.ExclamationEqualsEqualsToken:case ts.SyntaxKind.ExclamationEqualsToken:return"!=";case ts.SyntaxKind.EqualsToken:return"=";case ts.SyntaxKind.PlusToken:return"+";case ts.SyntaxKind.MinusToken:return"-";case ts.SyntaxKind.AsteriskToken:return"*";case ts.SyntaxKind.PlusEqualsToken:return"+=";case ts.SyntaxKind.MinusEqualsToken:return"-=";case ts.SyntaxKind.PercentToken:return"%";case ts.SyntaxKind.SlashToken:return"/";case ts.SyntaxKind.PlusPlusToken:case ts.SyntaxKind.MinusMinusToken:return e.tickEvent("depython.todo.unsupportedop",{op:t}),n(r,3008,"Unsupported ++ and -- in an expression (not a statement or for loop)");case ts.SyntaxKind.AmpersandToken:return"&";case ts.SyntaxKind.CaretToken:return"^";case ts.SyntaxKind.LessThanLessThanToken:return"<<";case ts.SyntaxKind.GreaterThanGreaterThanToken:return">>";case ts.SyntaxKind.GreaterThanGreaterThanGreaterThanToken:return e.tickEvent("depython.todo.unsupportedop",{op:t}),n(r,3009,"Unsupported operator: >>>");case ts.SyntaxKind.AsteriskAsteriskToken:return"**";case ts.SyntaxKind.AsteriskAsteriskEqualsToken:return"**=";case ts.SyntaxKind.PercentEqualsToken:return"%=";case ts.SyntaxKind.AsteriskEqualsToken:return"*=";case ts.SyntaxKind.SlashEqualsToken:return"/=";default:return e.tickEvent("depython.todo.unsupportedop",{op:t}),n(r,3008,`Unsupported Python operator (code: ${t})`)}}function Z(e){let t=x(e.left),n=x(e.right),r=e.operatorToken.kind===ts.SyntaxKind.PlusToken&&(t||n),[i,a]=xe(e.left);r&&!t&&(i=Y("str(",i,")"));let o=X(e.operatorToken.kind,e),[s,c]=xe(e.right);r&&!n&&(s=Y("str(",s,")"));let l=a.concat(c);return[Y(Q(i)+" "+o+" ",s),l]}function ee(e){let t=g(e);if(t)return W(t);let[n,r]=xe(e.expression),i=h(e.name);return W("length"===i?`len(${Q(n)})`:`${Q(n)}.${i}`,r)}function te(e){if(ts.isPropertyAccessExpression(e)){let t=h(e.name),n=t.substr(t.lastIndexOf(".")+1);return ts.isIdentifier(e.expression)?[n]:te(e.expression).concat([n])}return ts.isIdentifier(e)?[h(e)]:[]}function ne(t,n,r,i){let o="";n&&(o=te(n).map(e.U.snakify).join("_"));let s=[];if(r&&r.length>1&&i&&i.length>1)for(let t=0;t<r.length&&t<i.length;t++){let n=i[t];if(v(a.getTypeAtLocation(n),ts.TypeFlags.EnumLike)){let t=te(n).map(e.U.snakify);s=s.concat(t)}}let c=s.join("_"),l="";o||c||!t||(l=h(t.name));let u=([o,c,l].filter((e=>e)).map(e.U.snakify).map((e=>e.toLowerCase())).join("_")||"my_callback").split("_");u.length>4&&(u=p(u));let d=e.U.toDictionary(["any","on","event"],(e=>e));for(;u.length>2;){let e=f(u,d);if(e.length==u.length)break;u=e}return u=["on",...u],u.join("_");function p(e){let t={},n=[];for(let r of e)r in t||(t[r]=!0,n.push(r));return n}function f(e,t){let n=[],r=!1;for(let i of e)!(i in t)||r?n.push(i):r=!0;return n}}function re(e){let n=e.join(", ");return n.length>60&&e.length>1?e.map(((n,r)=>{let i=","==n.charAt(n.length-1)?"":",";if(0==r){let e=n.split("\n");if(e.length>1){n=e.shift()+"\n"+t.indent1(e.join("\n"))}return n+i}return r==e.length-1?t.indent1(n):t.indent1(n+i)})):[n]}function ie(e,t,n,r,i){if((ts.isFunctionExpression(e)||ts.isArrowFunction(e))&&t&&t.type&&ts.isFunctionTypeNode(t.type)){let a;return se(e,ne(t,n,r,i),a,!0)}return xe(e)}function ae(t){let r=a.getTypeAtLocation(t.expression),i=a.typeToTypeNode(r),o=ts.createNodeArray([]);if(ts.isFunctionTypeNode(i)&&(o=i.parameters,t.arguments&&o.length<t.arguments.length))return e.tickEvent("depython.todo.argparammismatch",{kind:t.kind}),n(t,3010,"TODO: Unsupported call site where caller the arguments outnumber the callee parameters: "+t.getText());const s=m(t.expression);if(t.arguments&&s&&"TD_ID"==s.attributes.shim)return xe(t.arguments[0]);if(ts.isPropertyAccessExpression(t.expression)&&"toString"===t.expression.name.getText()){const[e,n]=xe(t.expression.expression);return[Y("str(",e,")"),n]}let[c,l]=xe(t.expression),u=Q(c),d=(t.arguments||ts.createNodeArray()).map(((e,n,r)=>ie(e,o[n],t.expression,o,r))),p=d.map((([e,t])=>t)).reduce(((e,t)=>e.concat(t)),l);if(0===u.indexOf("_py.py_")){if(d.length<=0)return e.tickEvent("depython.todo._pynoargs"),n(t,3014,"Unsupported: call expression has no arguments for _py.py_ fn");u=u.substr(7).split("_").filter(((e,t)=>0!==t)).join("_");return[Y(`${d.shift()[0]}.${u}(`,re(d.map((([e,t])=>e)).reduce(((e,t)=>e.concat(t)),[])),")"),p]}return[Y(`${u}(`,re(d.map((([e,t])=>e)).reduce(((e,t)=>e.concat(t)),[])),")"),p]}function oe(e,t){let n=[],r={};for(let i=0;i<Math.max(e.length,t.length);i++){let a;if(e[i])a=e[i],r[h(a.name)]=!0;else{a=t[i];let e=h(a.name);r[e]&&(e=pxtc.decompiler.getNewName(e,r),a=Object.assign({altName:e},t[i]))}n.push(a)}return ts.createNodeArray(n,!1)}function se(e,t,n,r){let i=e.name?h(e.name):y(t||"my_function");return W(i,V(e,i,n,r))}function ce(e){switch(e){case ts.SyntaxKind.ExclamationToken:return" ";case ts.SyntaxKind.PlusToken:case ts.SyntaxKind.MinusToken:return"";default:return" "}}function le(e){let t=X(e.operator,e),[n,r]=xe(e.operand);return W(`${t}${ce(e.operator)}${Q(n)}`,r)}function ue(e){let t=X(e.operator,e),[n,r]=xe(e.operand),i=ce(e.operator);return W(`${Q(n)}${i}${t}`,r)}function de(e){let t=e.elements.map(xe),n=t.map((([e,t])=>t)).reduce(((e,t)=>e.concat(t)),[]);return[Y("[",re(t.map((([e,t])=>e)).reduce(((e,t)=>e.concat(t)),[])),"]"),n]}function pe(t){if(!t.argumentExpression)return e.tickEvent("depython.todo.accesswithoutexp"),n(t,3015,"Unsupported: element access expression without an argument expression");let[r,i]=xe(t.expression),[a,o]=xe(t.argumentExpression),s=i.concat(o);return W(`${Q(r)}[${Q(a)}]`,s)}function fe(e){let[t,n]=xe(e.expression);return W(`(${Q(t)})`,n)}function _e(e){if(ts.isNoSubstitutionTemplateLiteral(e))return W(`"""\n${e.text.trim().split("\n").map((e=>`${t.INDENT}${e.trim()}`)).join("\n")}\n${t.INDENT}"""`);let[n,r]=xe(e.tag),[i,a]=xe(e.template),o=r.concat(a);return W(`${Q(n)}(${Q(i)})`,o)}function me(e){if("undefined"==e.text)return W("None");return W(h(e))}function ge(e,t){let n=e=>ge(e,t);return ts.isBinaryExpression(e)?n(e.left)&&n(e.right):ts.isPropertyAccessExpression(e)?n(e.expression):ts.isPrefixUnaryExpression(e)||ts.isPostfixUnaryExpression(e)?e.operator!==ts.SyntaxKind.PlusPlusToken&&e.operator!==ts.SyntaxKind.MinusMinusToken&&n(e.operand):ts.isParenthesizedExpression(e)?n(e.expression):ts.isArrayLiteralExpression(e)?e.elements.map(n).reduce(((e,t)=>e&&t),!0):ts.isElementAccessExpression(e)?n(e.expression)&&(!e.argumentExpression||n(e.argumentExpression)):t(e)}function he(e){return e.parent?e.parent.kind===ts.SyntaxKind.ParenthesizedExpression?he(e.parent):e.parent:void 0}function ye(e){if("any"===e.type.getText().trim()&&(ts.isNumericLiteral(e.expression)||ts.isStringLiteral(e.expression)||e.expression.kind===ts.SyntaxKind.TrueKeyword||e.expression.kind===ts.SyntaxKind.FalseKeyword)){const t=he(e);if((null==t?void 0:t.kind)===ts.SyntaxKind.BinaryExpression)switch(t.operatorToken.kind){case ts.SyntaxKind.EqualsEqualsToken:case ts.SyntaxKind.EqualsEqualsEqualsToken:case ts.SyntaxKind.ExclamationEqualsToken:case ts.SyntaxKind.ExclamationEqualsEqualsToken:case ts.SyntaxKind.LessThanToken:case ts.SyntaxKind.LessThanEqualsToken:case ts.SyntaxKind.GreaterThanToken:case ts.SyntaxKind.GreaterThanEqualsToken:return!0}}return!1}function ve(e){return ge(e,(e=>{switch(e.kind){case ts.SyntaxKind.PropertyAccessExpression:case ts.SyntaxKind.BinaryExpression:case ts.SyntaxKind.ParenthesizedExpression:case ts.SyntaxKind.ArrayLiteralExpression:case ts.SyntaxKind.ElementAccessExpression:case ts.SyntaxKind.TrueKeyword:case ts.SyntaxKind.FalseKeyword:case ts.SyntaxKind.NullKeyword:case ts.SyntaxKind.UndefinedKeyword:case ts.SyntaxKind.NumericLiteral:case ts.SyntaxKind.StringLiteral:case ts.SyntaxKind.NoSubstitutionTemplateLiteral:return!0;case ts.SyntaxKind.CallExpression:case ts.SyntaxKind.NewExpression:case ts.SyntaxKind.FunctionExpression:case ts.SyntaxKind.ArrowFunction:case ts.SyntaxKind.Identifier:case ts.SyntaxKind.ThisKeyword:return!1;case ts.SyntaxKind.PrefixUnaryExpression:case ts.SyntaxKind.PostfixUnaryExpression:let t=e;return t.operator!==ts.SyntaxKind.PlusPlusToken&&t.operator!==ts.SyntaxKind.MinusMinusToken}return!1}))}function be(e){let[t,n]=xe(e.condition),[r,i]=xe(e.whenTrue),[a,o]=xe(e.whenFalse),s=n.concat(i).concat(o);return W(`${r} if ${Q(t)} else ${Q(a)}`,s)}function xe(t){if(ts.isBinaryExpression(t))return Z(t);if(ts.isPropertyAccessExpression(t))return ee(t);if(ts.isCallExpression(t))return ae(t);if(ts.isNewExpression(t))return ae(t);if(ts.isFunctionExpression(t)||ts.isArrowFunction(t))return se(t);if(ts.isPrefixUnaryExpression(t))return le(t);if(ts.isPostfixUnaryExpression(t))return ue(t);if(ts.isParenthesizedExpression(t))return fe(t);if(ts.isArrayLiteralExpression(t))return de(t);if(ts.isElementAccessExpression(t))return pe(t);if(ts.isNoSubstitutionTemplateLiteral(t)||ts.isTaggedTemplateExpression(t))return _e(t);switch(t.kind){case ts.SyntaxKind.TrueKeyword:return W("True");case ts.SyntaxKind.FalseKeyword:return W("False");case ts.SyntaxKind.ThisKeyword:return W("self");case ts.SyntaxKind.NullKeyword:case ts.SyntaxKind.UndefinedKeyword:return W("None")}return ts.isIdentifier(t)?me(t):ts.isNumericLiteral(t)||ts.isStringLiteral(t)?W(t.getText()):ts.isConditionalExpression(t)?be(t):ts.isAsExpression(t)&&ye(t)?xe(t.expression):(e.tickEvent("depython.todo.expression",{kind:t.kind}),n(t,3017,"Unsupported expression kind: "+t.kind))}}(r,i),s=i.replace(/(\.py)?\.\w*$/i,"")+".py";a.outfiles[s]=o}catch(t){t.pyDiagnostic?a.diagnostics=[t.pyDiagnostic]:e.reportException(t),a.success=!1}return a};function r(e){return n=>(n||"").split("\n").map((n=>`${t.INDENT.repeat(e)}${n}`)).join("\n")}t.INDENT="    ",t.indent=r,t.indent1=r(1)}(e.py||(e.py={}))}(pxt||(pxt={})),function(e){!function(e){!function(e){const t=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/;e.isIdentifierStart=function(e){return ts.pxtc.isIdentifierStart(e,ts.pxtc.ScriptTarget.ES5)},e.isIdentifierChar=function(e){return ts.pxtc.isIdentifierPart(e,ts.pxtc.ScriptTarget.ES5)},e.isSpace=function(e){return!!(32===e||9===e||11===e||12===e||160===e||e>=5760&&t.test(String.fromCharCode(e)))},e.isNewline=function(e){return 10===e||13===e||(8232===e||8233===e)}}(e.rx||(e.rx={}))}(e.py||(e.py={}))}(pxt||(pxt={})),function(e){!function(e){function t(e){const t={refs:[],children:[],owner:void 0};return function e(r){var i;if(!r)return t;if(ts.isPropertyAccessOrQualifiedName(r))return t;if(ts.isIdentifier(r))return{refs:[{kind:"read",node:r,varName:r.text}],children:[],owner:void 0};if(ts.isVariableDeclaration(r)||ts.isParameter(r)){const t=e(r.initializer);return{refs:[...t.refs,{kind:"decl",node:r,varName:r.name.getText()}],children:t.children,owner:void 0}}if(ts.isPrefixUnaryExpression(r)||ts.isPostfixUnaryExpression(r)){const t=e(r.operand),i=r.operand.getText();return n(t,{refs:[{kind:"assign",node:r,varName:i}],children:[],owner:void 0})}if(function(e){const t=[ts.SyntaxKind.EqualsToken,ts.SyntaxKind.PlusEqualsToken,ts.SyntaxKind.MinusEqualsToken,ts.SyntaxKind.AsteriskEqualsToken,ts.SyntaxKind.AsteriskAsteriskEqualsToken,ts.SyntaxKind.SlashEqualsToken,ts.SyntaxKind.PercentEqualsToken,ts.SyntaxKind.LessThanLessThanEqualsToken,ts.SyntaxKind.GreaterThanGreaterThanEqualsToken,ts.SyntaxKind.GreaterThanGreaterThanGreaterThanEqualsToken,ts.SyntaxKind.AmpersandEqualsToken,ts.SyntaxKind.BarEqualsToken,ts.SyntaxKind.CaretEqualsToken];return ts.isBinaryExpression(e)&&t.some((t=>e.operatorToken.kind===t))}(r)){const t=e(r.right);let i;r.operatorToken.kind!==ts.SyntaxKind.EqualsToken&&(i=e(r.left));const a=r.left.getText();return n(i,n(t,{refs:[{kind:"assign",node:r,varName:a}],children:[],owner:void 0}))}if(ts.isFunctionExpression(r)||ts.isArrowFunction(r)||ts.isFunctionDeclaration(r)||ts.isMethodDeclaration(r)){const a=null===(i=r.name)||void 0===i?void 0:i.getText();let o;a&&(o={kind:"decl",node:r,varName:a});const s=r.parameters.map((t=>e(t))).reduce(n,t),c=e(r.body),l=n(s,c);return l.owner=r,{refs:o?[o]:[],children:[l],owner:void 0}}return r.getChildren().map(e).reduce(n,t)}(e);function n(e,n){return e&&n?{refs:[...e.refs,...n.refs],children:[...e.children,...n.children],owner:e.owner||n.owner}:e||n||t}}function n(e,t,r=[]){const i=[],a=[],o=[],s=[],c={};for(const n of e.refs)"read"===n.kind||"assign"===n.kind?c[n.varName]?o.push(n):d(n)?a.push(n):t&&t[n.varName]?i.push(n):s.push(n):c[n.varName]=n;const l=t||c,u=t?[...r,c]:[];return{globalUsage:i,nonlocalUsage:a,localUsage:o,environmentUsage:s,children:e.children.map((e=>n(e,l,u))),owner:e.owner};function d(e){return r.map((t=>t[e.varName])).reduce(((e,t)=>t||e),void 0)}}function r(e){return`${e.kind}:${e.varName}`}e.computeScopeVariableLookup=function(e){const r=n(t(e)),i=new Map,a=new Map;return function e(t){const n=s((r=t,[...r.globalUsage,...r.environmentUsage].filter((e=>"assign"===e.kind)).map((e=>e))));var r;i.set(t.owner,n);const o=s(function(e){return e.nonlocalUsage.filter((e=>"assign"===e.kind)).map((e=>e))}(t));a.set(t.owner,o),t.children.forEach(e)}(r),{getExplicitGlobals:e=>i.get(e)||[],getExplicitNonlocals:e=>a.get(e)||[]};function o(e){let t=e.node.operand||e.node.left;return ts.isIdentifier(t)?t:void 0}function s(e){return e.map(o).filter((e=>!!e)).map((e=>e)).reduce(((e,t)=>e.find((e=>e.text===t.text))?e:[...e,t]),[])}},e.toStringVariableScopes=function(i){const a=t(i),o=n(a);return function t(n){return[n.refs.map(r).join(", "),...n.children.map(t).map((t=>t.map(e.indent1))).map((e=>["{",...e,"}"])).reduce(((e,t)=>[...e,...t]),[])]}(a).join("\n")+"\n\n\n"+function(t){return function t(n){const i=n.globalUsage.map(r).join(", "),a=n.nonlocalUsage.map(r).join(", "),o=n.localUsage.map(r).join(", "),s=n.environmentUsage.map(r).join(", ");return[i?"global "+i:"",a?"nonlocal "+a:"",o?"local "+o:"",s?"env "+s:"",...n.children.map(t).map((t=>t.map(e.indent1))).map((e=>["{",...e,"}"])).reduce(((e,t)=>[...e,...t]),[])].filter((e=>!!e))}(t).join("\n")}(o)}}(e.py||(e.py={}))}(pxt||(pxt={}));
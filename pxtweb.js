var pxt;"undefined"==typeof navigator||!/Trident/i.test(navigator.userAgent)||/skipbrowsercheck=1/i.exec(window.location.href)||/\/browsers/i.exec(window.location.href)||(window.location.href="/browsers"),function(e){const t=[];let r,o,n,i=!1,s=!1,a=!1;class p{constructor(e){this.log=e,this.q=[],t.push(this)}track(e,t,r){i?this.log(e,t,r):(this.q.push([e,t,r]),this.q.length>20&&this.q.shift())}flush(){for(;this.q.length;){const[e,t,r]=this.q.shift();this.log(e,t,r)}}}function c(e=!1){const r=window.loadAppInsights;r&&(a=r(e,f),i=!0,t.forEach((e=>e.flush())))}function f(e){const t=window.pxtConfig;if("PageviewData"==e.baseType&&!e.baseData.properties)return!1;if("PageviewPerformanceData"==e.baseType){const t=e.baseData.name;e.baseData.name=window.location.origin,e.baseData.properties||(e.baseData.properties={}),e.baseData.properties.pageName=t,e.baseData.properties.pathName=window.location.pathname}if(void 0===t||!t)return!0;const r=e.baseData;r.properties=r.properties||{},r.properties.target=t.targetId,r.properties.stage=(t.relprefix||"/--").replace(/[^a-z]/gi,"");const o=navigator.userAgent.toLowerCase(),n=/\belectron\/(\d+\.\d+\.\d+.*?)(?: |$)/i.exec(o);n&&(r.properties.Electron=1,r.properties.ElectronVersion=n[1]);const i=window.pxtElectron;void 0!==i&&(r.properties.PxtElectron=1,r.properties.ElectronVersion=i.versions.electronVersion,r.properties.ChromiumVersion=i.versions.chromiumVersion,r.properties.NodeVersion=i.versions.nodeVersion,r.properties.PxtElectronVersion=i.versions.pxtElectronVersion,r.properties.PxtCoreVersion=i.versions.pxtCoreVersion,r.properties.PxtTargetVersion=i.versions.pxtTargetVersion,r.properties.PxtElectronIsProd=i.versions.isProd);const p=/\((MakeCode Arcade Kiosk UWP)\/([\S]+)\/([\S]+)\)/i.exec(o);return p&&(r.properties.KioskUwp=1,r.properties.KioskUwpVersion=p[2],r.properties.KioskUwpPlatform=p[3]),r.properties.cookie=s&&a,!0}!function(e){let t;function r(){return Math.round(performance.now()-e.startTimeMs)}function o(e){let t=(e=Math.round(e))%1e3,r=Math.floor(e/1e3),o=r%60,n=Math.floor(r/60);return n>0?`${n}m${o}s`:r>5?`${r}s`:r>0?`${r}s${t}ms`:`${e}ms`}function n(t,o=r()){e.stats.milestones.push([t,o])}function i(){if(t=performance&&!!performance.mark&&!!performance.measure,t){performance.measure("measure from the start of navigation to now");let t=performance.getEntriesByType("measure")[0];e.startTimeMs=t.startTime}}e.stats={durations:[],milestones:[]},e.perfReportLogged=!1,e.splitMs=r,e.prettyStr=o,e.splitStr=function(){return o(r())},e.recordMilestone=n,e.init=i,e.measureStart=function(e){t&&performance.mark(`${e} start`)},e.measureEnd=function(r){if(t&&performance.getEntriesByName(`${r} start`).length){performance.mark(`${r} end`),performance.measure(`${r} elapsed`,`${r} start`,`${r} end`);let t=performance.getEntriesByName(`${r} elapsed`,"measure");if(t&&1===t.length){let o=t[0],n=o.duration;n>10&&e.stats.durations.push([r,o.startTime,n])}performance.clearMarks(`${r} start`),performance.clearMarks(`${r} end`),performance.clearMeasures(`${r} elapsed`)}},e.report=function(r=null){if(t){let t="performance report:\n";for(let[n,i]of e.stats.milestones)if(!r||n.indexOf(r)>=0){t+=`\t\t${n} @ ${o(i)}\n`}t+="\n";for(let[n,i,s]of e.stats.durations){let e=r&&n.indexOf(r)>=0;if(s>50&&!r||e){t+=`\t\t${n} took ~ ${o(s)}`,s>1e3&&(t+=` (${o(i)} - ${o(i+s)})`),t+="\n"}}console.log(t)}e.perfReportLogged=!0},i(),n("first JS running")}(n=e.perf||(e.perf={})),e.initAnalyticsAsync=function(){(function(){const e="undefined"!=typeof window,t=e&&!!window.pxtElectron,r=e&&!!window.ipcRenderer||/ipc=1/.test(location.hash)||/ipc=1/.test(location.search);return t||r})()||function(){try{return window&&window.self!==window.top}catch(e){return!1}}()&&/nocookiebanner=1/i.test(window.location.href)?c(!0):window.pxtSkipAnalyticsCookie?c(!1):c(!0)},e.aiTrackEvent=function(e,t,o){r||(r=new p(((e,t,r)=>window.appInsights.trackEvent({name:e,properties:t,measurements:r})))),r.track(e,t,o)},e.aiTrackException=function(e,t,r){o||(o=new p(((e,t,r)=>window.appInsights.trackException({exception:e,properties:t?{...r,kind:t}:r})))),o.track(e,t,r)},e.initializeAppInsightsInternal=c,e.setInteractiveConsent=function(e){s=e}}(pxt||(pxt={}));
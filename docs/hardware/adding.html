<!DOCTYPE html>
<html lang="" xmlns="http://www.w3.org/1999/xhtml" xmlns:og="http://ogp.me/ns#"
	xmlns:fb="http://www.facebook.com/2008/fbml">

<head>
	<meta charset="UTF-8">
	<title>Microsoft MakeCode Arcade</title>
	<meta name="Description" content="Develop your programming skills by quickly creating and modding retro arcade games with Blocks and JavaScript in the MakeCode editor" />

	<!-- ifdef incontexttranslations endif -->
	
<!-- include meta.html -->
<!-- This file is typically overriden by the target, with own Twitter
     account etc. Most data is taken from the theme file though.  
  -->

<!-- include robotsmeta.html -->

<!-- end include robotsmeta.html -->

<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@msmakecode" />
<meta name="twitter:title" content="Microsoft MakeCode Arcade" />
<meta name="twitter:description" content="Develop your programming skills by quickly creating and modding retro arcade games with Blocks and JavaScript in the MakeCode editor" />
<meta name="twitter:image" content="/static/hardware/minipcb.png" />

<meta property="og:title" content="Microsoft MakeCode Arcade" />
<meta property="og:site_name" content="Microsoft MakeCode" />
<meta property="og:type" content="website" />
<meta property="og:description" content="Develop your programming skills by quickly creating and modding retro arcade games with Blocks and JavaScript in the MakeCode editor" />
<meta property="fb:app_id" content="" />
<meta property="og:image" content="/static/hardware/minipcb.png" />

<meta name="format-detection" content="telephone=no">
<link rel="apple-touch-icon" href="docs/static/icons/favicon.ico">
<link rel="icon" type="image/png" href="docs/static/icons/favicon.ico">
<link rel="shortcut icon" href="docs/static/icons/favicon.ico">
<meta name="theme-color" content="">

<!-- end include meta.html -->

	
<!-- include head.html -->
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width,height=device-height,user-scalable=no,initial-scale=1.0,maximum-scale=1.0,minimum-scale=1.0">

<link rel="stylesheet" data-rtl="/blb/rtlsemantic.css" href="/pxt-arcade-app/semantic.css" />
<link id="blocklycss"  data-rtl="/blb/rtlblockly.css" rel="stylesheet" href="/pxt-arcade-app/blockly.css" />
<link rel="stylesheet" href="/pxt-arcade-app/docfiles/style.css" />
<link rel="stylesheet" href="/pxt-arcade-app/docfiles/vs.css" />
<link rel="stylesheet" href="/pxt-arcade-app/docfiles/target.css" />

<script src="/pxt-arcade-app/jquery.js" type="text/javascript"></script>
<script src="/pxt-arcade-app/semantic.js" type="text/javascript"></script>
<script src="/pxt-arcade-app/docfiles/target.js" type="text/javascript"></script>
<script src="/pxt-arcade-app/embed.js" type="text/javascript"></script>
<script src="/pxt-arcade-app/docfiles/docs.js" type="text/javascript"></script>

<style>
    
</style>

<!-- end include head.html -->


</head>

<body id='root' class='root'>
	<div id="accessibleMenu" class="ui accessibleMenu borderless fixed menu docs" role="menubar">
		
            <a href="#maincontent" class="ui item link" tabindex="0" role="menuitem">Skip to main content</a>
        
	</div>

	
<!-- include tocheader.html -->
<div id="top-bar" class="ui fixed accent borderless inverted main menu hideprint docs" role="menubar">
    <div>
        
            <a id="togglesidebar" class="launch icon item" tabindex="0" title="Side menu" aria-label="Side menu" role="menuitem" aria-expanded="false">
                <i class="content icon"></i>
            </a>
        
        <div class="item" role="menuitem">
            <div class="header-org-logo">
                <img src="/static/logo/Microsoft_logo_rgb_W-white_D.png" alt="Microsoft">
            </div>
            <div class="header-org-logo-sm">
                <img src="/static/logo/Microsoft_logo_rgb_W-white_D-square.png" alt="Microsoft">
            </div>
            <div class="header-title"><span>MakeCode</span></div>
        </div>
    </div>
    <div>
        <div class="item">
            <form id="tocsearch1" class="search" role="form" method="get" action="https://www.bing.com/search">
                <div class="ui fluid icon input">
                    <input type="hidden" name="q1" value="site:https://arcade.makecode.com/" />
                    
                <input type="search" name="q" placeholder="Search..." aria-label="Search Documentation">
                <i onclick="document.getElementById('tocsearch1').submit();" tabindex="0" class="search link icon" aria-label="Search" role="button"></i>
            
                </div>
            </form>
        </div>
    </div>
</div>

<div id="side-menu" class="ui vertical accent inverted sidebar menu left hideprint docs" role="menubar">
    <!-- TOC Menu (tocheader.html) -->
    <div class="menuContainer" role="menu">
        
    <a class="item " href="/pxt-arcade-app/docs/about.html" role="menuitem">About</a>


    <a class="item " href="/pxt-arcade-app/docs/faq.html" role="menuitem">FAQ</a>


    <a class="item " href="/pxt-arcade-app/docs/projects.html" role="menuitem">Projects</a>


    <a class="item " href="/pxt-arcade-app/docs/github.html" role="menuitem">GitHub</a>


    <div class="ui  accordion item visible" role="tree" title="">
        <div class=" title">
            <i class="right chevron icon"></i>
            <a class="header" role="treeitem" aria-expanded="false" href="/pxt-arcade-app/docs/reference.html">Reference</a>
        </div>
        <div class=" content">
            
    <a class="item " href="/pxt-arcade-app/docs/reference/sprites.html" role="menuitem">sprites</a>


    <a class="item " href="/pxt-arcade-app/docs/reference/controller.html" role="menuitem">controller</a>


    <a class="item " href="/pxt-arcade-app/docs/reference/game.html" role="menuitem">game</a>


    <a class="item " href="/pxt-arcade-app/docs/reference/music.html" role="menuitem">music</a>


    <a class="item " href="/pxt-arcade-app/docs/reference/scene.html" role="menuitem">scene</a>


    <a class="item " href="/pxt-arcade-app/docs/reference/info.html" role="menuitem">info</a>


    <a class="item " href="/pxt-arcade-app/docs/reference/images.html" role="menuitem">images</a>

        </div>
    </div>


    <div class="ui  accordion item visible" role="tree" title="">
        <div class=" title">
            <i class="right chevron icon"></i>
            <a class="header" role="treeitem" aria-expanded="false" href="/pxt-arcade-app/docs/blocks.html">Blocks</a>
        </div>
        <div class=" content">
            
    <a class="item " href="/pxt-arcade-app/docs/blocks/on-start.html" role="menuitem">On Start</a>


    <div class="ui  accordion item visible" role="tree" title="">
        <div class=" title">
            <i class="right chevron icon"></i>
            <a class="header" role="treeitem" aria-expanded="false" href="/pxt-arcade-app/docs/blocks/loops.html">Loops</a>
        </div>
        <div class=" content">
            
    <a class="item " href="/pxt-arcade-app/docs/blocks/loops/repeat.html" role="menuitem">repeat</a>


    <a class="item " href="/pxt-arcade-app/docs/blocks/loops/for.html" role="menuitem">for</a>


    <a class="item " href="/pxt-arcade-app/docs/blocks/loops/while.html" role="menuitem">while</a>


    <a class="item " href="/pxt-arcade-app/docs/blocks/loops/for-of.html" role="menuitem">for of</a>

        </div>
    </div>


    <div class="ui  accordion item visible" role="tree" title="">
        <div class=" title">
            <i class="right chevron icon"></i>
            <a class="header" role="treeitem" aria-expanded="false" href="/pxt-arcade-app/docs/blocks/logic.html">Logic</a>
        </div>
        <div class=" content">
            
    <a class="item " href="/pxt-arcade-app/docs/blocks/logic/if.html" role="menuitem">if</a>


    <a class="item " href="/pxt-arcade-app/docs/blocks/logic/boolean.html" role="menuitem">Boolean</a>

        </div>
    </div>


    <div class="ui  accordion item visible" role="tree" title="">
        <div class=" title">
            <i class="right chevron icon"></i>
            <a class="header" role="treeitem" aria-expanded="false" href="/pxt-arcade-app/docs/blocks/variables.html">Variables</a>
        </div>
        <div class=" content">
            
    <a class="item " href="/pxt-arcade-app/docs/blocks/variables/assign.html" role="menuitem">assign</a>


    <a class="item " href="/pxt-arcade-app/docs/blocks/variables/change.html" role="menuitem">change var</a>


    <a class="item " href="/pxt-arcade-app/docs/blocks/variables/var.html" role="menuitem">var</a>

        </div>
    </div>


    <a class="item " href="/pxt-arcade-app/docs/blocks/math.html" role="menuitem">Math</a>


    <a class="item " href="/pxt-arcade-app/docs/blocks/javascript-blocks.html" role="menuitem">JavaScript blocks</a>


    <a class="item " href="/pxt-arcade-app/docs/blocks/custom.html" role="menuitem">Custom blocks</a>

        </div>
    </div>


    <div class="ui  accordion item visible" role="tree" title="">
        <div class=" title">
            <i class="right chevron icon"></i>
            <a class="header" role="treeitem" aria-expanded="false" href="/pxt-arcade-app/docs/python.html">Python</a>
        </div>
        <div class=" content">
            
    <a class="item " href="/pxt-arcade-app/docs/python/call.html" role="menuitem">Calling</a>


    <a class="item " href="/pxt-arcade-app/docs/python/sequence.html" role="menuitem">Sequencing</a>


    <a class="item " href="/pxt-arcade-app/docs/python/variables.html" role="menuitem">Variables</a>


    <a class="item " href="/pxt-arcade-app/docs/python/operators.html" role="menuitem">Operators</a>


    <a class="item " href="/pxt-arcade-app/docs/python/statements.html" role="menuitem">Statements</a>


    <a class="item " href="/pxt-arcade-app/docs/python/functions.html" role="menuitem">Functions</a>


    <a class="item " href="/pxt-arcade-app/docs/python/classes.html" role="menuitem">Classes</a>

        </div>
    </div>


    <div class="ui  accordion item visible" role="tree" title="">
        <div class=" title">
            <i class="right chevron icon"></i>
            <a class="header" role="treeitem" aria-expanded="false" href="/pxt-arcade-app/docs/javascript.html">JavaScript</a>
        </div>
        <div class=" content">
            
    <a class="item " href="/pxt-arcade-app/docs/javascript/call.html" role="menuitem">Calling</a>


    <a class="item " href="/pxt-arcade-app/docs/javascript/sequence.html" role="menuitem">Sequencing</a>


    <a class="item " href="/pxt-arcade-app/docs/javascript/variables.html" role="menuitem">Variables</a>


    <a class="item " href="/pxt-arcade-app/docs/javascript/operators.html" role="menuitem">Operators</a>


    <a class="item " href="/pxt-arcade-app/docs/javascript/statements.html" role="menuitem">Statements</a>


    <a class="item " href="/pxt-arcade-app/docs/javascript/functions.html" role="menuitem">Functions</a>


    <a class="item " href="/pxt-arcade-app/docs/javascript/types.html" role="menuitem">Types</a>


    <a class="item " href="/pxt-arcade-app/docs/javascript/classes.html" role="menuitem">Classes</a>


    <a class="item " href="/pxt-arcade-app/docs/javascript/interfaces.html" role="menuitem">Interfaces</a>


    <a class="item " href="/pxt-arcade-app/docs/javascript/generics.html" role="menuitem">Generics</a>

        </div>
    </div>


    <div class="ui  accordion item visible" role="tree" title="">
        <div class=" title">
            <i class="right chevron icon"></i>
            <a class="header" role="treeitem" aria-expanded="false" href="/pxt-arcade-app/docs/types.html">Types</a>
        </div>
        <div class=" content">
            
    <a class="item " href="/pxt-arcade-app/docs/types/number.html" role="menuitem">Number</a>


    <a class="item " href="/pxt-arcade-app/docs/types/string.html" role="menuitem">String</a>


    <a class="item " href="/pxt-arcade-app/docs/types/boolean.html" role="menuitem">Boolean</a>


    <a class="item " href="/pxt-arcade-app/docs/types/array.html" role="menuitem">Array</a>


    <a class="item " href="/pxt-arcade-app/docs/types/function.html" role="menuitem">Function</a>


    <a class="item " href="/pxt-arcade-app/docs/types/image.html" role="menuitem">Image</a>


    <a class="item " href="/pxt-arcade-app/docs/types/sprite.html" role="menuitem">Sprite</a>

        </div>
    </div>


    <a class="item " href="/pxt-arcade-app/docs/block-gallery.html" role="menuitem">Blocks Gallery</a>


    <div class="ui  accordion item visible" role="tree" title="">
        <div class=" title">
            <i class="right chevron icon"></i>
            <a class="header" role="treeitem" aria-expanded="false" href="">Miscellaneous</a>
        </div>
        <div class=" content">
            
    <a class="item " href="/pxt-arcade-app/docs/about.html" role="menuitem">About</a>


    <a class="item " href="/pxt-arcade-app/docs/support.html" role="menuitem">Support</a>


    <a class="item " href="/pxt-arcade-app/docs/translate.html" role="menuitem">Translate</a>


    <a class="item " href="/pxt-arcade-app/docs/share.html" role="menuitem">Sharing projects</a>


    <a class="item " href="/pxt-arcade-app/docs/multiplayer.html" role="menuitem">Multiplayer</a>


    <a class="item " href="/pxt-arcade-app/docs/offline.html" role="menuitem">Offline support</a>


    <a class="item " href="/pxt-arcade-app/docs/save.html" role="menuitem">Save</a>


    <a class="item " href="/pxt-arcade-app/docs/identity/sign-in.html" role="menuitem">Sign In</a>


    <a class="item " href="/pxt-arcade-app/docs/identity/cloud-sync.html" role="menuitem">Cloud Sync</a>


    <a class="item " href="/pxt-arcade-app/docs/vscode.html" role="menuitem">VS Code</a>

        </div>
    </div>


    <div class="ui  accordion item visible" role="tree" title="">
        <div class=" title">
            <i class="right chevron icon"></i>
            <a class="header" role="treeitem" aria-expanded="false" href="/pxt-arcade-app/docs/hardware.html">Hardware</a>
        </div>
        <div class=" content">
            
    <a class="item " href="/pxt-arcade-app/docs/hardware/errors.html" role="menuitem">Errors</a>


    <a class="item " href="/pxt-arcade-app/docs/hardware/adding.html" role="menuitem">Adding New Board</a>


    <a class="item " href="/pxt-arcade-app/docs/hardware/raspberry-pi.html" role="menuitem">Raspberry Pi</a>


    <a class="item " href="/pxt-arcade-app/docs/hardware/makey-makey.html" role="menuitem">Makey Makey</a>


    <a class="item " href="/pxt-arcade-app/docs/hardware/shoebox-controller.html" role="menuitem">Shoebox Controller</a>


    <a class="item " href="/pxt-arcade-app/docs/hardware/dev.html" role="menuitem">Dev</a>


    <a class="item " href="/pxt-arcade-app/docs/hardware/dbg.html" role="menuitem">Debug connector</a>

        </div>
    </div>


    <div class="ui  accordion item visible" role="tree" title="">
        <div class=" title">
            <i class="right chevron icon"></i>
            <a class="header" role="treeitem" aria-expanded="false" href="">Developers</a>
        </div>
        <div class=" content">
            
    <a class="item " href="/pxt-arcade-app/docs/cli.html" role="menuitem">Command Line Interface</a>


    <a class="item " href="/pxt-arcade-app/docs/code.html" role="menuitem">Visual Studio Code support</a>


    <a class="item " href="/pxt-arcade-app/docs/blocks-embed.html" role="menuitem">Blocks Embed</a>


    <a class="item " href="/pxt-arcade-app/docs/developer/images.html" role="menuitem">Art, images, colors</a>


    <a class="item " href="/pxt-arcade-app/docs/developer/sound.html" role="menuitem">Sounds</a>

        </div>
    </div>


    <div class="ui  accordion item visible" role="tree" title="">
        <div class=" title">
            <i class="right chevron icon"></i>
            <a class="header" role="treeitem" aria-expanded="false" href="/pxt-arcade-app/docs/lessons.html">Lessons</a>
        </div>
        <div class=" content">
            
    <a class="item " href="/pxt-arcade-app/docs/lessons/cherry-pickr.html" role="menuitem">Cherry Pickr</a>


    <a class="item " href="/pxt-arcade-app/docs/lessons/barrel-dodger.html" role="menuitem">Barrel Dodger</a>


    <a class="item " href="/pxt-arcade-app/docs/lessons/dance-party.html" role="menuitem">Dance Party</a>


    <a class="item " href="/pxt-arcade-app/docs/lessons/block-out.html" role="menuitem">BlockOut</a>

        </div>
    </div>


    <div class="ui  accordion item visible" role="tree" title="">
        <div class=" title">
            <i class="right chevron icon"></i>
            <a class="header" role="treeitem" aria-expanded="false" href="/pxt-arcade-app/docs/courses.html">Courses</a>
        </div>
        <div class=" content">
            
    <a class="item " href="/pxt-arcade-app/docs/courses/csintro1.html" role="menuitem">CS Intro 1</a>


    <a class="item " href="/pxt-arcade-app/docs/courses/csintro2.html" role="menuitem">CS Intro 2</a>


    <a class="item " href="/pxt-arcade-app/docs/courses/csintro3.html" role="menuitem">CS Intro 3</a>

        </div>
    </div>

    </div>
</div>
<!-- end include tocheader.html -->


	<div id="docs" class="pusher">

		<div class="article" id="maincontent">
			<div class="article-inner">

				
<!-- include header.html -->
<div class="ui one column padded grid hideprint">
    <div class="column ui container">
        
    </div>
</div>
<!-- end include header.html -->


				<div class="main ui container fluid mainbody">
					<button id="printbtn" class="circular ui icon right floated button hideprint hidemobile"
						title="Print" aria-label="Print">
						<i class="icon print"></i>
					</button>
					
    <div class="ui text">
        <h1 id="creating-your-own-arcade-hardware">Creating your own Arcade hardware</h1>
    <div class="ui negative message">
        <div class="content">
            <h4 id="contact-the-makecode-team">Contact the MakeCode Team</h4><p><strong>If you want to produce an Arcade compatible product please let us know at <a target="_blank" rel="nofollow noopener" href="mailto:arcadehdw@microsoft.com">arcadehdw@microsoft.com</a>.</strong></p>

        </div>
    </div>
<h2 id="overview">Overview </h2><p>The MakeCode Arcade system is designed to support a variety of physical gaming devices in addition to a more virtual experience on a PC or mobile device. We encourage others to design and build new variants of MakeCode Arcade hardware using the guidelines presented in this document. </p>

    <div class="ui positive message">
        <div class="content">
            <h4 id="minimal-open-source-reference-design">Minimal Open Source Reference Design</h4><p><img class="ui image" src="/static/hardware/minipcb.png" alt="Schematics screenshot" loading="lazy"></p>
<p>We have built a minimal open source hardware reference design for an Arcade board. This consists of a schematic (available as PDF and as Altium .SchDoc), a layout (available as Gerbers and related CAM files plus an Altium .PcbDoc), and a BoM (available as a Microsoft Excel file). </p>
<ul>
<li><strong>Download Reference Design at <a target="_blank" rel="nofollow noopener" href="https://github.com/microsoft/pxt-arcade-hardware-designs">https://github.com/microsoft/pxt-arcade-hardware-designs</a></strong></li>
</ul>

        </div>
    </div>
<p>Arcade hardware must meet the following specifications:</p>
<ul>
<li>An ARM Cortex M microcontroller (see <a  rel="nofollow noopener" href="#mcu">MCU</a>)</li>
<li>160x120 pixel display (see <a  rel="nofollow noopener" href="#screen">display</a>)</li>
<li>4 directional buttons, 2 action buttons (A and B), 1 utility button (menu/select/pause), 1 reset button (see <a  rel="nofollow noopener" href="#buttons">buttons</a>)</li>
<li>single channel sound output (see <a  rel="nofollow noopener" href="#audio">audio</a>)</li>
<li>USB connector for programming and power (see <a  rel="nofollow noopener" href="#usb">USB connector</a>)</li>
<li>Some way to commission and possibly debug the board (see <a  rel="nofollow noopener" href="#debug">commissioning and debugging</a>)</li>
</ul>
<p>In addition we encourage:</p>
<ul>
<li>a connector for multi-player communications (see <a  rel="nofollow noopener" href="#jacdac">Jacdac</a>)</li>
<li>provision for battery power: a battery connector, a battery holder and/or a LiPo recharging circuit (see <a  rel="nofollow noopener" href="#battery">battery</a>)</li>
<li><strong>exclusion</strong> of a power LED which would draw unnecessary current (see <a  rel="nofollow noopener" href="#power">power</a>)</li>
</ul>
<p>Other optional elements include:</p>
<ul>
<li>an accelerometer or other motion sensor (see <a  rel="nofollow noopener" href="#accelerometer">accelerometer</a>)</li>
<li>a vibration motor (see <a  rel="nofollow noopener" href="#vibrationmotor">vibration motor</a>)</li>
<li>a 3.5mm stereo audio connector for headphones (see <a  rel="nofollow noopener" href="#audio">audio</a>)</li>
<li>additional flash memory</li>
<li>status LEDs (see <a  rel="nofollow noopener" href="#leds">LEDs</a>)</li>
<li>an electrical expansion connector to support the use of plug-in accessories and connection of external 
circuits (see <a  rel="nofollow noopener" href="#pins">expansion coonnector</a>)</li>
</ul>
<p>A firmware configuration system allows a lot of flexibility regarding specific component choices and circuit designs to meet the above specification, see <a  rel="nofollow noopener" href="#cf2">Configuration</a>. </p>
<p>The rest of this page is split into three main sections, each of which refers to our reference design:</p>
<ul>
<li><a  rel="nofollow noopener" href="#components">Components</a> describes each of the required and optional components and features in more detail</li>
<li><a  rel="nofollow noopener" href="#hardwaredev">Hardware design notes</a> provides additional hardware circuit design considerations</li>
<li><a  rel="nofollow noopener" href="#firmwaredev">Firmware development notes</a> describes aspects of firmware development and configuration</li>
</ul>
<h2 id="components">Components </h2><h3 id="mcu">MCU </h3><p>MakeCode Arcade currently only targets ARM Cortex-based MCUs; we have tested Cortex M4F and M0+.</p>
<p>The Arcade display resolution and colour depth requires 160x120x4 bits for a display buffer, taking a little under 10kB.
We need at least two sets of display data for double-buffering and the user is very likely to use two or three more for various
sprite operations. This, together with heap fragmentation concerns,  requires the hardware to have <strong>at least 96kB of RAM</strong>. Programs with heavy memory requirements may only run if there is more than 96kB of RAM.
In addition <strong>512kB of flash</strong> and a processor speed of at least <strong>64MHz</strong> or more are recommended.</p>
<p>We currently support the following hardware variants which match the above criteria:</p>
<ul>
<li><strong>D5</strong> based on Microchip <strong>ATSAMD51G19A</strong> (Cortex M4F, 192kB of RAM, 512kB of flash, 120MHz)</li>
<li><strong>F4</strong> (formerly F401) based on one of the ST Micro <strong>STM32F4xx</strong> chips:<ul>
<li><strong>STM32F401xE</strong> (Cortex M4F, 96kB of RAM, 512kB of flash, 84MHz)</li>
<li><strong>STM32F411xE</strong> (Cortex M4F, 128kB of RAM, 512kB of flash, 96MHz)</li>
<li><strong>STM32F412xE</strong> (Cortex M4F, 128kB of RAM, 512kB of flash, 96MHz)</li>
<li><strong>STM32F412xG</strong> (Cortex M4F, 256kB of RAM, 1024kB of flash, 96MHz)</li>
</ul>
</li>
<li><strong>R2</strong> based on <strong>RP2040</strong> (Cortex-M0+, 264kB of RAM, typically 2048kB+ of flash, 125MHz)</li>
</ul>
<p>The STM32F41x series is listed to run at 100MHz, but to support USB we need to run them at 96MHz.
We support 48 pin and larger packages. Only STM32F412 in 64 pin and larger packages support a parallel display interface,
which is required if you want to use an ILI9341 320x240 display (see <a  rel="nofollow noopener" href="#screen">display</a>).</p>
<p>Additionally, we have experimental support for the following:</p>
<ul>
<li><strong>N4</strong> based on Nordic <strong>NRF52840</strong> (Cortex M4F, 256kB of RAM, 1024kB of flash, 64MHz)</li>
<li><strong>N3</strong> based on Nordic <strong>NRF52833</strong> (Cortex M4F, 128kB of RAM, 512kB of flash, 64MHz)</li>
</ul>
<p>Of course, many other choices are possible and we would love to hear your feedback.</p>
<h3 id="screen">Display </h3><p>When using a 160x128 pixel display we do not use the 8 bottom rows of the display, to make
it easier to upscale to a 320x240 display. We use 15 colors plus transparency along with
a user-controllable palette. Some of the displays we have tested are listed below, but 
if you have good reasons to use a different display please let us know.</p>
<h4 id="160x128-based-on-st7735-or-ili9163c-controller-chip">160x128 based on ST7735 or ILI9163C controller chip</h4><p>In this case the display is connected to the MCU using SPI. The chosen display must therefore expose the ST7735 or 
ILI9163C SPI interface. Different displays use different names for the same pins. The following are all equivalent:</p>
<ul>
<li>RS, DC and A0</li>
<li>MOSI, SDA and DATA</li>
<li>SCK, SCLK, SCL and CLOCK</li>
<li>LEDK and LED-</li>
<li>LEDA and LED+</li>
<li>RESET and RST</li>
</ul>
<p>Most displays don’t have a MISO line and in any case this does not need to be connected.</p>
<p>The purpose of the <code>LCD_BL</code> signal is to modulate power to the LCD backlight in order to dim or shut off the display.
The reference design shows one way of doing this. </p>
<p>We have found the following part numbers for ST7735 and ILI9163C displays:</p>
<ul>
<li><a target="_blank" rel="nofollow noopener" href="http://www.microtech-lcd.com/tftlcd/177-14-pin128160-custom-lcd-di.html">MTF0177SN-10</a></li>
<li><a target="_blank" rel="nofollow noopener" href="https://www.ezsolutionkr.com/tft-lcd-z180sn009-v0-0">Z180SN009</a></li>
<li><a target="_blank" rel="nofollow noopener" href="https://cdn-shop.adafruit.com/datasheets/JD-T1800.pdf">JD-T18003-T01</a></li>
</ul>
<h4 id="320x240-based-on-ili9341-via-spi">320x240 based on ILI9341 via SPI</h4><p>On D5, the SPI can run up to 50MHz and most displays seem to be able to handle that,
which results in about 36fps.</p>
<p>Also, use the following display configuration to begin with:</p>
<pre><code>DISPLAY_TYPE = 9341
DISPLAY_WIDTH = 320
DISPLAY_HEIGHT = 240
DISPLAY_CFG0 = 0x08
DISPLAY_CFG1 = 0x0010ff
DISPLAY_CFG2 = 50</code></pre><h4 id="320x240-based-on-ili9341-via-8-bit-parallel">320x240 based on ILI9341 via 8-bit parallel</h4><p>On F4, this requires an 8 bit parallel interface because SPI at 42MHz is unstable;
in this case STM32F412RE or better is required.</p>
<p>The FSMC controller on STM32F412 in 64 pin version enforces
the following pin connections:</p>
<table>
<thead>
<tr>
<th>Screen</th>
<th>Function</th>
<th>STM32F412RE</th>
</tr>
</thead>
<tbody>
<tr>
<td>RD</td>
<td>NOE</td>
<td>PC5</td>
</tr>
<tr>
<td>WR</td>
<td>NWE</td>
<td>PC2/PD2</td>
</tr>
<tr>
<td>RS (D/C)</td>
<td>A0</td>
<td>PC3</td>
</tr>
<tr>
<td>D0</td>
<td>D0</td>
<td>PB14</td>
</tr>
<tr>
<td>D1</td>
<td>D1</td>
<td>PC6</td>
</tr>
<tr>
<td>D2</td>
<td>D2</td>
<td>PC11</td>
</tr>
<tr>
<td>D3</td>
<td>D3</td>
<td>PC12</td>
</tr>
<tr>
<td>D4</td>
<td>D4</td>
<td>PA2</td>
</tr>
<tr>
<td>D5</td>
<td>D5</td>
<td>PA3</td>
</tr>
<tr>
<td>D6</td>
<td>D6</td>
<td>PA4</td>
</tr>
<tr>
<td>D7</td>
<td>D7</td>
<td>PA5</td>
</tr>
</tbody>
</table>
<p><br /></p>
<p>The CS pin of the screen can be connected anywhere (defined in bootloader as <code>DISPLAY_CS</code>).
The RS pin is also currently handled in software, so could be anywhere, 
but it’s recommended to connect it to A0 (defined in bootloader as <code>DISPLAY_DC</code>).</p>
<p>The choice of the WR pin should be in <code>DISPLAY_MOSI</code> bootloader config,
and <code>DISPLAY_MISO</code> should contain <code>PC5</code> if the display read line is connected.
Otherwise <code>DISPLAY_MISO</code> should be undefined.
<code>DISPLAY_SCK</code> should always be undefined.</p>
<p>Also, use the following display configuration to begin with:</p>
<pre><code>DISPLAY_TYPE = 9341
DISPLAY_WIDTH = 320
DISPLAY_HEIGHT = 240
DISPLAY_CFG0 = 0x08
DISPLAY_CFG1 = 0x0010ff
DISPLAY_CFG2 = 0x1000004</code></pre><p>Note that the ILI9341 has 4 configuration pins IM3, IM2, IM1, IM0.
The following configurations are supported:</p>
<table>
<thead>
<tr>
<th>IM3</th>
<th>IM2</th>
<th>IM1</th>
<th>IM0</th>
<th>Connection</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>D[7:0]   - D7:D0</td>
</tr>
<tr>
<td>1</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>D[17:10] - D7:D0</td>
</tr>
</tbody>
</table>
<p>That is, in the first config connect pin D[7] to PA5, D[6] to PA4, etc.
In the second config, connect D[17] to PA5, D[16] to PA4, etc.</p>
<h3 id="buttons">Buttons </h3><p>We require a total of 8 buttons: <code>left</code>, <code>up</code>, <code>right</code>, <code>down</code> (in a directional pad or d-pad layout), <code>A</code>, <code>B</code>, <code>Menu</code> and <code>Reset</code>.
The 4 directional buttons, the A/B buttons, and the MENU button are to be connected
to an MCU GPIO pin to provide digital inputs. Our configuration system (see <a  rel="nofollow noopener" href="#cf2">Configuration</a>) allows for
active high or active low button inputs. If the MCU has internal pull-ups or pull-downs, there is no need for external pull-ups.</p>
<p>The recommended button arrangement is to have the directional buttons in a ‘d-pad’ layout on the left of the board, while the <code>A</code> and <code>B</code> buttons are to the right. <code>A</code> is above and to the right of <code>B</code>. <code>Menu</code> is best placed somewhere near the other buttons, and <code>Reset</code> is best placed next to the USB connector.</p>
<p>One function of the <code>Menu</code> button is to exit low-power sleep mode. For an MCU with a ‘wakeup’ input pin that takes the MCU out of a deep sleep low power mode, <code>Menu</code> should be wired to that pin. The <code>Reset</code> button should be wired to the MCU reset pin.</p>
<p>Arcade boards should have ‘soft power off’ rather than a physical on-off switch, see <a  rel="nofollow noopener" href="#power">power management</a>.</p>
<h3 id="audio">Audio </h3><p>Single channel mono audio output requires either a DAC or PWM with DMA support. The corresponding audio output from the MCU
should be connected to an amplifier and an on-board sounder or speaker. A headphone jack for sound is optional.
Note that we no longer use a stereo jack for networking, instead we use the purpose-built <a  rel="nofollow noopener" href="#jacdac">Jacdac protocol</a> with its own connector. If there is an audio
headphone jack it must be clearly labelled with a ‘headphone’ symbol.</p>
<h3 id="usb">USB connector </h3><p>Arcade must have a micro USB socket for power and UF2 programming. We recommend a part with through-hole 
mechanical solder-down tabs to provide more strength, especially for ‘bare boards’ whcih have no physical enclosure to
add mechanical strength. We recommend adding ESD protection for the USB data lines and a zener diode
to clamp the Vbus power line and thereby limit over-voltage transients during USB connection. </p>
<h3 id="jacdac">Multi-player communications with Jacdac </h3>
    <div class="ui negative message">
        <div class="content">
            <h4 id="warning">Warning</h4><p><strong>Multi-player communication is under development.
It’s fine to build prototypes, but before designing any production hardware please contact us at <a target="_blank" rel="nofollow noopener" href="mailto:arcadehdw@microsoft.com">arcadehdw@microsoft.com</a>.</strong></p>

        </div>
    </div>
<p>Multi-player communications between Arcade devices is based on <a target="_blank" rel="nofollow noopener" href="https://aka.ms/jacdac">Jacdac</a>, a protocol for networking over a single-wire connection.</p>
<h3 id="battery">Battery power </h3><p>Arcade boards should ideally have provision for battery power: a battery connector, 
a battery holder and/or a LiPo recharging circuit. For regular batteries we suggest using a JST connector
of the same style and polarity as that used on the Adafruit Circuit Playground Express.  </p>
<h3 id="accelerometer">Accelerometer </h3><p>An accelerometer is optional. We currently support the following parts:</p>
<ul>
<li>LIS3DH</li>
<li>MMA8453</li>
<li>MPU6050</li>
</ul>
<p>If requested, we can potentially add support for other accelerometers such as MSA300.</p>
<p>The accelerometers should have the SDA, SCL and INT1 lines connected
to each respective <code>ACCELEROMETER_*</code> line as defined in the bootloader.</p>
<h3 id="vibrationmotor">Vibration motor </h3><p>An optional vibration motor can be connected. It should be driven by the <code>VIBRATION</code> line as defined in the bootloader. Software will keep this pin low during normal operation, and drive it high to activate the motor. </p>
<h3 id="leds">LEDs </h3><p>Up to 4 LEDs can be defined. The first can be used for Jacdac status.</p>
<h3 id="pins">Expansion connector </h3><p>You may wish to include some kind of expansion connector that allows users to connect their own circuitry to your Arcade board. This could be a pin header that’s either fitted during production or left unpopulated for users to fit or solder to if desired. Alternatively, if a number of pins are to be exposed in an ‘edge connector’ style, one option is a micro:bit compatible edge-connector. Another approach is to use <a target="_blank" rel="nofollow noopener" href="https://aka.ms/jacdac">Jacdac</a> so that it’s really easy for users to add or remove additional hardware functionality. </p>
<h2 id="hardwaredev">Hardware design notes </h2><h3 id="power">Power management </h3><p>The Arcade firmware automatically switches the device off if it is not in use, unless the user has disabled this feature. 
A hardware power switch is therefore unnecessary. Not
only does this reduce cost, the auto-power-off feature improves battery life.</p>
<p>In order to ensure very low quiescent consumption following auto-power-off, all peripherals to the MCU must 
enter a low power mode. We also put the CPU into deep sleep. The LCD backlight and audio amplifier will 
be switched off. Ensure that there is no power LED
that cannot be turned off from the MCU. If you require an MCU output to signal shutdown there is an 
optional <code>PWREN</code> signal - if defined, the software will pull it high on boot, and keep it low during sleep. 
If you want to include a power LED, control it via the <code>PWREN</code> signal.</p>
<p>A 3.3V regulator is likely to be needed. It should be robust to any unfiltered transients on the USB power line
and to downstream short-circuits which may occur if the Arcade board has no enclosure. If it is possible to
touch the regulator, it must not get too hot to touch under any circumstances.</p>
<p>An optional <code>BATTSENSE</code> can be connected to a voltage divider and to the battery.
This is not yet supported in software.</p>
<h3 id="debug">Comissioning and debugging </h3><p>Provision must be made for commissioning boards following manufacture. Depending on the MCU it may
be possible to flash and test the board over USB. However, to-date we have used a debug connector
which exposes SWD and other signals, as shown in the reference design. We use a standard 0.1” pitch
single row header footprint for this, but we do not fit a connector to the PCB. Instead we use the technique
described here: <a  rel="nofollow noopener" href="/pxt-arcade-app/docs/hardware/dbg.html">debug connector information</a>.</p>
<h3 id="pin-mapping">Pin mapping</h3><p>The reference design provides a particular pinout (or pin mapping), but it is possible to use a different pinout.
You need to put your pinout in the bootloader and flash the bootloader.
Then, when you get a UF2 file from the Arcade website, it will at runtime look for
settings such as the pinout in the bootloader and use the right pins.</p>
<p>There are some restrictions on the pinout:</p>
<ul>
<li>if using SPI screen, if needs to be on SPI pins; on F4 best use SPI1 as it may allow for faster refresh in the future</li>
<li>DISPLAY_BL should be on a pin with PWM (so we can dim it)</li>
<li>MENU button should be a pin which can wake the MCU up from sleep mode (on D5 it requires <code>EIC</code>; on F4 it can be any pin)</li>
<li>other buttons can be on any pin</li>
<li><code>JACK_TX</code> if present needs to be on <code>UART_TX</code> pin on F4, and on PAD0 of a SERCOM with EIC on D5</li>
<li><code>JACK_SND</code> if present needs to be on TIM1_CH* pin of F4 and DAC0 of D5 (PA02)</li>
</ul>
<h2 id="firmwaredev">Firmware development notes </h2><h3 id="bootloaders">Bootloaders </h3><p>There are different bootloaders to support the hardware variants.
These bootloaders support the <a  rel="nofollow noopener" href="#cf2">CF2 configuration data section</a>.</p>
<ul>
<li>F4: <a target="_blank" rel="nofollow noopener" href="https://github.com/mmoskal/uf2-stm32f">https://github.com/mmoskal/uf2-stm32f</a></li>
<li>D5: <a target="_blank" rel="nofollow noopener" href="https://github.com/microsoft/uf2-samdx1">https://github.com/microsoft/uf2-samdx1</a></li>
<li>R2 (UF2 bootloader always in ROM)</li>
</ul>
<p>The following bootloaders do <strong>not</strong> support the <a  rel="nofollow noopener" href="#cf2">CF2 configuration data section</a> yet.</p>
<ul>
<li>N4: <a target="_blank" rel="nofollow noopener" href="https://github.com/adafruit/Adafruit_nRF52840_Bootloader">https://github.com/adafruit/Adafruit_nRF52840_Bootloader</a></li>
</ul>
<h3 id="compilation">Compilation</h3><p>If you’re compiling a bootloader on your own, you will need to create a <code>board.h</code> file.
Start from an existing, generic arcade board (README in bootloader should have instructions).
Then:</p>
<ul>
<li>if you don’t have accelerometer, remove all lines with the <code>ACCELEROMETER</code> word</li>
<li>if you don’t have vibration motor, remove the line for <code>PIN_VIBRATION</code></li>
<li>if you are not doing a pin header:<ul>
<li>maybe you want to leave holes for people to solder a header in?</li>
<li>otherwise, remove all <code>PIN_Dx</code>, and <code>PIN_SDA</code>, <code>PIN_SCL</code>, <code>PIN_MISO</code>, <code>PIN_MOSI</code>, 
<code>PIN_SCK</code>, <code>PIN_SERVO_x</code> entries</li>
</ul>
</li>
<li>if you have fewer than 4 LEDs remove <code>PIN_LEDx</code></li>
<li>if you do not have a way to disable power to external components, remove <code>PIN_PWREN</code></li>
<li>if you don’t have Jacdac, remove <code>PIN_JACK_*</code></li>
<li>if you don’t have Jacdac power, remove <code>PIN_JACK_PWREN</code></li>
<li>if you don’t have second menu button (it’s not required), remove <code>PIN_BTN_MENU2</code></li>
<li>if you don’t have a voltage divider for measuring battery level (which isn’t supported yet anyway),
remove <code>PIN_BATTSENSE</code></li>
</ul>
<p>Once you’re done with all these changes, drop the <code>board.h</code> file onto <a target="_blank" rel="nofollow noopener" href="https://microsoft.github.io/uf2/patcher/">https://microsoft.github.io/uf2/patcher/</a>.</p>
<p>This should load the config, with stuff removed.
Now you can patch the config with your pinout.
You should at least change <code>BOOTLOADER_BOARD_ID</code> to a new random value. 
DO NOT generate it by banging on the board or using a clever hex string, 
use <code>printf &quot;0x%04x%04x\n&quot; $RANDOM $RANDOM</code> to minimize the risk of a conflict</p>
<p>If you’re seeing strange effects on the display, you can try one of the following
configs:</p>
<pre><code>DISPLAY_CFG0 = 0x01000080 
DISPLAY_CFG1 = 0x00000603
# or:
DISPLAY_CFG0 = 0x00000080 
DISPLAY_CFG1 = 0x00000603
# or:
DISPLAY_CFG0 = 0x00000090
DISPLAY_CFG1 = 0x000e14ff</code></pre><p>For the ST7735 and ILI9341 screens:</p>
<ul>
<li>the low byte of <code>CFG0</code> is the MADCTL register</li>
<li>the next two bytes of <code>CFG0</code> are offset X and Y (if the display doesn’t start at 0, 0)</li>
<li>the lowest bit of high byte of <code>CFG0</code> can be set to enabled XOR of palette</li>
<li><code>CFG1</code> is FRMCTR1</li>
<li>the low byte of <code>CFG2</code> is the desired SPI frequency in MHz (ignored for ILI9341)</li>
</ul>
<p>The patching website can also remove config entries, just specify the value as <code>null</code>.</p>
<p>Once you’re done patching, select “Apply my patch”, which will download new <code>board.h</code>.</p>
<p>Note that you need to use the patching website to put the right header and size
in the configuration data. It’s also possible to patch a binary file of the bootloader with new config using the
same website.</p>
<h3 id="protection">Bootloader protection </h3><p>End users will typically update the bootloader by copying a special UF2 file, which
has a user-level application that overwrites the bootloader.</p>
<p>To prevent misuse of this feature (eg one student emailing to a another a malicious UF2 
file which writes a non-functional bootloader), some bootloaders (currently only F4)
implement a protection feature.
When booting, the bootloader will check if it’s write-protected (this is done by setting bits
in flash, which only take effect upon reset).
If the write-protection is disabled, presumably during a bootloader update process,
the bootloader will present a screen to the user asking if they really want to update
the bootloader and that doing so could possibly brick the board.
If the users agrees to upgrade, the app is allowed to run (and presumably update the bootloader).
Otherwise, the protection is re-enabled.</p>
<p>The default configuration of the bootloaders have this feature disabled to ease the
development process. To enable it, set <code>BOOTLOADER_PROTECTION = 1</code>.</p>
<h3 id="variants">Variant notes </h3><h4 id="f4">F4 </h4><p>STM32F4 requires an external crystal for stable USB operation.
The software takes the installed crystal frequency from a specific bootloader location,
but best to stick to 8MHz.</p>
<p>The following is the recommended pinout. The recommended pinout for
header was described above. It’s consistent with the config for the generic F4
in the bootloader repo.</p>
<pre><code># 64 pin package F4

PIN_ACCELEROMETER_INT = PC13
PIN_ACCELEROMETER_SCL = PB10
PIN_ACCELEROMETER_SDA = PB03

PIN_BTN_A = PC00
PIN_BTN_B = PC01
PIN_BTN_DOWN = PB02
PIN_BTN_LEFT = PA04
PIN_BTN_MENU = PC02
PIN_BTN_MENU2 = PC03
PIN_BTN_RIGHT = PC09
PIN_BTN_UP = PB05

PIN_DISPLAY_BL = PB09
PIN_DISPLAY_CS = PB12
PIN_DISPLAY_DC = PB04
PIN_DISPLAY_MISO = PA06
PIN_DISPLAY_MOSI = PA07
PIN_DISPLAY_RST = PC12
PIN_DISPLAY_SCK = PA05

PIN_JACK_PWREN = PC10
PIN_JACK_SND = PA08
PIN_JACK_TX = PB06

PIN_LED1 = PB00
PIN_LED2 = PB01
PIN_LED3 = PC07
PIN_LED4 = PC06

PIN_BATTSENSE = PC04
PIN_PWREN = PA15
PIN_VIBRATION = PC08</code></pre><pre><code># 48 pin package F4

PIN_ACCELEROMETER_INT = PC13
PIN_ACCELEROMETER_SCL = PB10
PIN_ACCELEROMETER_SDA = PB03

PIN_BTN_A = PB08
PIN_BTN_B = PA15
PIN_BTN_DOWN = PB02
PIN_BTN_LEFT = PA04
PIN_BTN_MENU = PA01
PIN_BTN_MENU2 = null # or PB01
PIN_BTN_RIGHT = PA10
PIN_BTN_UP = PB05

PIN_DISPLAY_BL = PB09
PIN_DISPLAY_CS = PB12
PIN_DISPLAY_DC = PB04
PIN_DISPLAY_MISO = PA06
PIN_DISPLAY_MOSI = PA07
PIN_DISPLAY_RST = PB07
PIN_DISPLAY_SCK = PA05

PIN_JACK_PWREN = PA00
PIN_JACK_SND = PA08
PIN_JACK_TX = PB06

PIN_LED1 = PB00
PIN_LED2 = PB01 # or null
PIN_LED3 = null
PIN_LED4 = null

PIN_BATTSENSE = null
PIN_PWREN = PC15
PIN_VIBRATION = PC14</code></pre><h4 id="d5">D5 </h4><p><code>JACK_TX</code> needs to be on a pin with external IRQ and <code>PAD0</code> of some SERCOM.</p>
<p><code>JACK_SND</code> needs to be on <code>PA02</code> (DAC output).</p>
<h4 id="r2">R2 </h4><p>For RP2040, the application looks for CF2 section (see below) at 4kB before the end of 1MB, 2MB, 4MB, 8MB, 16MB, 32MB (that’s megabytes) in the flash. It’s recommended to place it at all these addresses (size of flash permitting). 
See <a target="_blank" rel="nofollow noopener" href="https://github.com/microsoft/pxt-arcade/blob/master/libs/hw---rp2040/sample-config.uf2">sample config UF2</a>.
Manufacturers should provide a “factory reset” UF2 which contains all these config sections, and possibly a test game.
This file can be used to recover after the flash has been overwritten (eg by large files in the Micropython filesystem).</p>
<h3 id="cf2">Configuration </h3><p>We anticipate the future need of various configurations for display controllers, as well as different
accelerometers, etc. Thus, we generate the same UF2 file
for all boards of a given variant, and have the runtime look for configuration
values in the bootloader area (called <strong>CF2</strong> configuration).</p>
<p>See <a target="_blank" rel="nofollow noopener" href="https://github.com/microsoft/uf2/blob/master/cf2.md">https://github.com/microsoft/uf2/blob/master/cf2.md</a> for more details on the configuration format.
The <a  rel="nofollow noopener" href="#bootloaders">bootloaders</a> can be binary patched with new configuration data if needed.</p>
<p>The configuration data also includes the assignment of a GPIO pin header.
Generally, the header isn’t essential to this board, but it’s recommended
to at least leave holes for people to solder it in.</p>
<p>The mapping between MCU GPIOs and the various hardware signals such as the buttons and display interface is specified in the bootloader. They can be changed as described above.</p>

    </div>

					<div class="hideprint"></div>
				</div>

			</div>

			
<!-- include footer.html -->
<footer class="ui vertical footer segment hideprint docs inverted" aria-hidden="false">
    <div class="ui center aligned container">
        <div class="ui horizontal link list">
            <a
                class="item"
                href="https://twitter.com/intent/follow?screen_name=MsMakeCode"
                title="Follow us on Twitter"
                target="_blank"
                rel="noopener">
                <i class="huge icon twitter"></i>
            </a>
            <a class="item" href="https://www.youtube.com/channel/UCye7YlvFUUQ1dSy0WZZ1T_Q" title="Subscribe to our YouTube channel"
                target="_blank" rel="noopened">
                <i class="huge icon youtube"></i>
            </a>
            <a class="item" href="mailto:makecode@microsoft.com" title="Send us an Email"
                target="_blank" rel="noopened">
                <i class="huge icon mail"></i>
            </a>
        </div>
        <div class="ui section divider"></div>
        <div class="ui container horizontal small divided link list">
            <a id="langpicker" tabindex="0" class="ui item" rel="noopener">
                <i class="icon xicon globe" aria-hidden="true" role="presentation"></i>Language
            </a>
            <a class="item" href="https://makecode.com/privacy" target="_blank" rel="noopener">Privacy &amp; Cookies</a>
            <a class="item" href="https://makecode.com/termsofuse" target="_blank" rel="noopener">Terms Of Use</a>
            <a class="item" href="https://makecode.com/trademarks" target="_blank" rel="noopener">Trademarks</a>
            <span class="item">© 2022 Microsoft</span>
        </div>
        <div class="ui container horizontal small link list poweredBy">
            <span class="item">Powered by</span>
            <a class="middle aligned" href="https://makecode.com/" title="Microsoft MakeCode"
                target="_blank" rel="noopener">
                <img width="100" src="/static/logo/Microsoft-logo_rgb_c-gray.png" alt="Microsoft">
            </a>
        </div>
    </div>
</footer>

<!-- end include footer.html -->


		</div>

	</div>

    
<!-- include langpicker.html -->
<div id="langmodal" class="ui modal docs" role="dialog" aria-modal="true" aria-describedby="langmodalheader" tabindex="-1">
    <h2 id="langmodalheader" class="header">Select Language</h2>
    <div role="button" class="closeIcon" tabindex="0" aria-label="Close">
        <i class="icon close remove circle" aria-hidden="true"></i>
    </div>

	<div class="content">
	    <div class="group">
            <div id="availablelocales" class="ui cards centered" role="listbox" aria-label="List of available locales"></div>
        </div>
        <div class="ui" id="langmodalfooter">
            <a class="ui" href="/pxt-arcade-app/docs/translate.html" target="_blank" rel="noopener noreferrer">
                How do I add a new language?
            </a>

            <a id="translatebtn" class="ui button" role="button" tabindex="0">
                Translate this page
            </a>
        </div>
    </div>
</div>


<!-- end include langpicker.html -->

	
<!-- include macros.html -->
<!-- macro button -->

<!-- macro vimeo -->

<!-- macro youtube -->

<!-- macro section -->

<!-- macro hide -->

<!-- macro avatar -->

<!-- macro hint -->

<!-- macro codecard -->

<!-- macro tutorialhint -->

<!-- macro reminder -->

<!-- macro alert -->

<!-- macro tip -->

<!-- wrapped around ordinary content -->
<!-- macro main-container -->

<!-- used for 'column' box - they are collected and wrapped in 'column-container' -->
<!-- macro column -->
<!-- macro column-container -->


<!-- Menu on the top of the page -->
<!-- macro item -->

<!-- macro divider -->

<!-- TOC in the sidebar -->
<!-- macro item -->

<!-- macro divider -->

<!-- macro toc-dropdown -->

<!-- macro toc-dropdown-noLink -->

<!-- macro toc-dropdown-noHeading -->

<!-- TODO: duplicates of above for compatability with docsrender.ts;
    remove with pxtlib/docsrender.ts TOC TODOs after cloud bump. -->
<!-- macro top-dropdown -->

<!-- macro top-dropdown-noHeading -->

<!-- macro inner-dropdown -->

<!-- macro nested-dropdown -->
<!-- end include macros.html -->

	
<!-- include tracking.html -->
<script type="text/javascript" src="/pxt-arcade-app/pxtweb.js"></script>
<script type="text/javascript">
    window.loadAppInsights = function (includeCookie) {
        //Backend will patch / + doccdn + / with CDN url and the check that URL ends with the sha would pass
        var isProduction = includeCookie && (/[0-9a-f]{40}\/ai\.2\.min\.js$/.test("/pxt-arcade-app/ai.2.min.js"));
        !function(T,l,y){var S=T.location,k="script",D="connectionString",C="ingestionendpoint",I="disableExceptionTracking",E="ai.device.",b="toLowerCase",w="crossOrigin",N="POST",e="appInsightsSDK",t=y.name||"appInsights";(y.name||T[e])&&(T[e]=t);var n=T[t]||function(d){var g=!1,f=!1,m={initialize:!0,queue:[],sv:"5",version:2,config:d};function v(e,t){var n={},a="Browser";return n[E+"id"]=a[b](),n[E+"type"]=a,n["ai.operation.name"]=S&&S.pathname||"_unknown_",n["ai.internal.sdkVersion"]="javascript:snippet_"+(m.sv||m.version),{time:function(){var e=new Date;function t(e){var t=""+e;return 1===t.length&&(t="0"+t),t}return e.getUTCFullYear()+"-"+t(1+e.getUTCMonth())+"-"+t(e.getUTCDate())+"T"+t(e.getUTCHours())+":"+t(e.getUTCMinutes())+":"+t(e.getUTCSeconds())+"."+((e.getUTCMilliseconds()/1e3).toFixed(3)+"").slice(2,5)+"Z"}(),iKey:e,name:"Microsoft.ApplicationInsights."+e.replace(/-/g,"")+"."+t,sampleRate:100,tags:n,data:{baseData:{ver:2}}}}var h=d.url||y.src;if(h){function a(e){var t,n,a,i,r,o,s,c,u,p,l;g=!0,m.queue=[],f||(f=!0,t=h,s=function(){var e={},t=d.connectionString;if(t)for(var n=t.split(";"),a=0;a<n.length;a++){var i=n[a].split("=");2===i.length&&(e[i[0][b]()]=i[1])}if(!e[C]){var r=e.endpointsuffix,o=r?e.location:null;e[C]="https://"+(o?o+".":"")+"dc."+(r||"services.visualstudio.com")}return e}(),c=s[D]||d[D]||"",u=s[C],p=u?u+"/v2/track":d.endpointUrl,(l=[]).push((n="SDK LOAD Failure: Failed to load Application Insights SDK script (See stack for details)",a=t,i=p,(o=(r=v(c,"Exception")).data).baseType="ExceptionData",o.baseData.exceptions=[{typeName:"SDKLoadFailed",message:n.replace(/\./g,"-"),hasFullStack:!1,stack:n+"\nSnippet failed to load ["+a+"] -- Telemetry is disabled\nHelp Link: https://go.microsoft.com/fwlink/?linkid=2128109\nHost: "+(S&&S.pathname||"_unknown_")+"\nEndpoint: "+i,parsedStack:[]}],r)),l.push(function(e,t,n,a){var i=v(c,"Message"),r=i.data;r.baseType="MessageData";var o=r.baseData;return o.message='AI (Internal): 99 message:"'+("SDK LOAD Failure: Failed to load Application Insights SDK script (See stack for details) ("+n+")").replace(/\"/g,"")+'"',o.properties={endpoint:a},i}(0,0,t,p)),function(e,t){if(JSON){var n=T.fetch;if(n&&!y.useXhr)n(t,{method:N,body:JSON.stringify(e),mode:"cors"});else if(XMLHttpRequest){var a=new XMLHttpRequest;a.open(N,t),a.setRequestHeader("Content-type","application/json"),a.send(JSON.stringify(e))}}}(l,p))}function i(e,t){f||setTimeout(function(){!t&&m.core||a()},500)}var e=function(){var n=l.createElement(k);n.src=h;var e=y[w];return!e&&""!==e||"undefined"==n[w]||(n[w]=e),n.onload=i,n.onerror=a,n.onreadystatechange=function(e,t){"loaded"!==n.readyState&&"complete"!==n.readyState||i(0,t)},n}();y.ld<0?l.getElementsByTagName("head")[0].appendChild(e):setTimeout(function(){l.getElementsByTagName(k)[0].parentNode.appendChild(e)},y.ld||0)}try{m.cookie=l.cookie}catch(p){}function t(e){for(;e.length;)!function(t){m[t]=function(){var e=arguments;g||m.queue.push(function(){m[t].apply(m,e)})}}(e.pop())}var n="track",r="TrackPage",o="TrackEvent";t([n+"Event",n+"PageView",n+"Exception",n+"Trace",n+"DependencyData",n+"Metric",n+"PageViewPerformance","start"+r,"stop"+r,"start"+o,"stop"+o,"addTelemetryInitializer","setAuthenticatedUserContext","clearAuthenticatedUserContext","flush"]),m.SeverityLevel={Verbose:0,Information:1,Warning:2,Error:3,Critical:4};var s=(d.extensionConfig||{}).ApplicationInsightsAnalytics||{};if(!0!==d[I]&&!0!==s[I]){var c="onerror";t(["_"+c]);var u=T[c];T[c]=function(e,t,n,a,i){var r=u&&u(e,t,n,a,i);return!0!==r&&m["_"+c]({message:e,url:t,lineNumber:n,columnNumber:a,error:i}),r},d.autoExceptionInstrumented=!0}return m}(y.cfg);function a(){y.onInit&&y.onInit(n)}(T[t]=n).queue&&0===n.queue.length?(n.queue.push(a),n.trackPageView({})):a()}(window,document,{
            src: "https://js.monitor.azure.com/scripts/b/ai.2.min.js", // The SDK URL Source
            onInit: function (sdk) {
                sdk.addTelemetryInitializer(function (envelope) {
                    // App Insights automatically sends a page view event on setup, but we send our own later with additional properties.
                    // This stops the automatic event from firing, so we don't end up with duplicate page view events.
                    if (envelope.baseType == "PageviewData" && !envelope.baseData.properties) {
                        return false;
                    }

                    if (envelope.baseType == "PageviewPerformanceData") {
                        var pageName = envelope.baseData.name;
                        envelope.baseData.name = window.location.origin;
                        if (!envelope.baseData.properties) {
                            envelope.baseData.properties = {};
                        }
                        envelope.baseData.properties.pageName = pageName;
                        var scrubbedUrl = scrubUrl(envelope.baseData.uri);
                        envelope.baseData.uri = scrubbedUrl;
                        var toUrl = new URL(scrubbedUrl);
                        envelope.baseData.properties.pathName = toUrl ? toUrl.pathname : "";
                        if (envelope.ext && envelope.ext.trace) {
                            envelope.ext.trace.name = toUrl ? toUrl.pathname : "";
                        }
                    }

                    var telemetryItem = envelope.baseData;
                    telemetryItem.properties = telemetryItem.properties || {};
                    telemetryItem.properties["cookie"] = isProduction;
                    if (typeof pxtConfig === "undefined" || !pxtConfig || !pxtConfig.targetId) {
                        telemetryItem.properties["target"] = "arcade";
                        return true;
                    }
                    telemetryItem.properties["target"] = pxtConfig.targetId;
                    telemetryItem.properties["stage"] = (pxtConfig.relprefix || "/--").replace(/[^a-z]/ig, '')
                    if (typeof Windows !== "undefined")
                        telemetryItem.properties["WindowsApp"] = 1;
                    var userAgent = navigator.userAgent.toLowerCase();
                    var electronRegexResult = /\belectron\/(\d+\.\d+\.\d+.*?)(?: |$)/i.exec(userAgent); // Example navigator.userAgent: "Mozilla/5.0 Chrome/61.0.3163.100 Electron/2.0.0 Safari/537.36"
                    if (electronRegexResult) {
                        telemetryItem.properties["Electron"] = 1;
                        telemetryItem.properties["ElectronVersion"] = electronRegexResult[1];
                    }
                    if (typeof pxtElectron !== "undefined") {
                        telemetryItem.properties["PxtElectron"] = 1;
                        telemetryItem.properties["ElectronVersion"] = pxtElectron.versions.electronVersion;
                        telemetryItem.properties["ChromiumVersion"] = pxtElectron.versions.chromiumVersion;
                        telemetryItem.properties["NodeVersion"] = pxtElectron.versions.nodeVersion;
                        telemetryItem.properties["PxtElectronVersion"] = pxtElectron.versions.pxtElectronVersion;
                        telemetryItem.properties["PxtCoreVersion"] = pxtElectron.versions.pxtCoreVersion;
                        telemetryItem.properties["PxtTargetVersion"] = pxtElectron.versions.pxtTargetVersion;
                        telemetryItem.properties["PxtElectronIsProd"] = pxtElectron.versions.isProd;
                    }
                    // Kiosk UWP info is appended to the user agent by the makecode-dotnet-apps/arcade-kiosk UWP app
                    var kioskUwpRegexResult = /\((MakeCode Arcade Kiosk UWP)\/([\S]+)\/([\S]+)\)/i.exec(userAgent); // Example navigator.userAgent: "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/117.0.0.0 Safari/537.36 Edg/117.0.2045.60 (MakeCode Arcade Kiosk UWP/0.1.41.0/Windows.Xbox)"
                    if (kioskUwpRegexResult) {
                        telemetryItem.properties["KioskUwp"] = 1;
                        telemetryItem.properties["KioskUwpVersion"] = kioskUwpRegexResult[2];
                        telemetryItem.properties["KioskUwpPlatform"] = kioskUwpRegexResult[3];
                    }
                    return true;
                });
            },
            cfg: {
                instrumentationKey:"9801ed01-c40f-46ec-aa40-2a1742a9e71c",
                disableAjaxTracking: true,
                overridePageViewDuration: false,
                disableExceptionTracking: true,
                disableCorrelationHeaders: true,
                disableCookiesUsage: !isProduction,
                isStorageUseDisabled: !isProduction,
                url: "/pxt-arcade-app/ai.2.min.js"
            }
        });
        window.appInsights=appInsights;
        var location = window.location.toString();
        appInsights.trackPageView({
            name: window.location.hostname,
            uri: window.location.origin,
            properties: {
                url: scrubUrl(location),
                urlReferrer: scrubUrl(document.referrer.toString())
            }
        });

        // Scrub potential PII from the URL.
        function scrubUrl(url) {
            if (!url) return url;

            var scriptIdRegex = /(?:S?\d{5}-\d{5}-\d{5}-\d{5})|(?:_[0-9a-zA-Z]{12})/g;
            var scrubbedUrl = new URL(url.toLocaleLowerCase().replace(scriptIdRegex, "xxxxx-xxxxx-xxxxx-xxxxx"));

            // Just as a precaution, strip any suspicious query parameters.
            var blockedParamKeywords = ["username", "password", "token", "pwd"];
            var searchParams = Array.from(scrubbedUrl.searchParams.keys());
            for (var param of searchParams) {
                if (blockedParamKeywords.some(k => param.indexOf(k) != -1)) {
                    scrubbedUrl.searchParams.delete(param);
                }
            }

            return scrubbedUrl.toString();
        }

        return isProduction;
    }
    pxt.initAnalyticsAsync();
</script>

<!-- end include tracking.html -->


</body>

</html>